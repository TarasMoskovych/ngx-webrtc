(self.webpackChunkngx_webrtc=self.webpackChunkngx_webrtc||[]).push([[179],{255:le=>{function re(j){return Promise.resolve().then(()=>{var D=new Error("Cannot find module '"+j+"'");throw D.code="MODULE_NOT_FOUND",D})}re.keys=()=>[],re.resolve=re,re.id=255,le.exports=re},272:module=>{var re;window,re=function(){return function(le){var re={};function j(D){if(re[D])return re[D].exports;var R=re[D]={i:D,l:!1,exports:{}};return le[D].call(R.exports,R,R.exports,j),R.l=!0,R.exports}return j.m=le,j.c=re,j.d=function(D,R,O){j.o(D,R)||Object.defineProperty(D,R,{enumerable:!0,get:O})},j.r=function(D){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})},j.t=function(D,R){if(1&R&&(D=j(D)),8&R||4&R&&"object"==typeof D&&D&&D.__esModule)return D;var O=Object.create(null);if(j.r(O),Object.defineProperty(O,"default",{enumerable:!0,value:D}),2&R&&"string"!=typeof D)for(var T in D)j.d(O,T,function(N){return D[N]}.bind(null,T));return O},j.n=function(D){var R=D&&D.__esModule?function(){return D.default}:function(){return D};return j.d(R,"a",R),R},j.o=function(D,R){return Object.prototype.hasOwnProperty.call(D,R)},j.p="",j(j.s=92)}([function(le,re,j){"use strict";j.r(re);var D,R=j(11),O=j.n(R),T=function(){var W=new Date;return W.toTimeString().split(" ")[0]+":"+W.getMilliseconds()},N=j(14),y=j(2),I=j(1),h=j(45),m=j.n(h),v=j(46),k=j.n(v),B=new Array(32).fill(void 0);function w(W){return B[W]}B.push(void 0,null,!0,!1);var E=B.length;function U(W){var Y,F=w(W);return(Y=W)<36||(B[Y]=E,E=Y),F}var P=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});P.decode();var G=null;function V(){return null!==G&&G.buffer===D.memory.buffer||(G=new Uint8Array(D.memory.buffer)),G}function ee(W,F){return P.decode(V().subarray(W,W+F))}function se(W){E===B.length&&B.push(B.length+1);var F=E;return E=B[F],B[F]=W,F}var te=0,oe=new TextEncoder("utf-8"),$="function"==typeof oe.encodeInto?function(W,F){return oe.encodeInto(W,F)}:function(W,F){var Y=oe.encode(W);return F.set(Y),{read:W.length,written:Y.length}},b=null;function l(){return null!==b&&b.buffer===D.memory.buffer||(b=new Int32Array(D.memory.buffer)),b}var q,H=function(){function W(){m()(this,W)}return k()(W,[{key:"free",value:function(){var F=this.ptr;this.ptr=0,D.__wbg_signmanager_free(F)}},{key:"get_digest",value:function(F){return U(D.signmanager_get_digest(this.ptr,se(F)))}}],[{key:"__wrap",value:function(F){var Y=Object.create(W.prototype);return Y.ptr=F,Y}},{key:"new",value:function(){var F=D.signmanager_new();return W.__wrap(F)}}]),W}(),_=!1,u=null,g=0,C="free",L=[],K=[],ie=0;(u?Promise.resolve(u):new Promise(function(W){_||D||function F(){var Y={wbg:{}};Y.wbg.__wbindgen_object_drop_ref=function(ye){U(ye)},Y.wbg.__wbindgen_string_new=function(ye,x){return se(ee(ye,x))},Y.wbg.__wbindgen_string_get=function(ye,x){var De=w(x),Ue="string"==typeof De?De:void 0,Ve=null==Ue?0:function(Ze,ue,p){if(void 0===p){var ne=oe.encode(Ze),fe=ue(ne.length);return V().subarray(fe,fe+ne.length).set(ne),te=ne.length,fe}for(var me=Ze.length,pe=(fe=ue(me),V()),J=0;J<me;J++){var _e=Ze.charCodeAt(J);if(_e>127)break;pe[fe+J]=_e}if(J!==me){0!==J&&(Ze=Ze.slice(J)),fe=p(fe,me,me=J+3*Ze.length);var Se=V().subarray(fe+J,fe+me);J+=$(Ze,Se).written}return te=J,fe}(Ue,D.__wbindgen_malloc,D.__wbindgen_realloc),Ke=te;l()[ye/4+1]=Ke,l()[ye/4+0]=Ve},Y.wbg.__wbindgen_throw=function(ye,x){throw new Error(ee(ye,x))};for(var ve=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),function(ye){return ye.charCodeAt(0)}),de=new Uint8Array([177,156,215,89,13,111,230,1]),ce=new Uint8Array(ve.length),Te=new Uint8Array(256),Me=0;Me<256;Me++)Te[Me]=Me;var Ae=0;for(Me=0;Me<256;Me++){var Le=[Te[Ae=(Ae+Te[Me]+de[Me%de.length])%256],Te[Me]];Te[Me]=Le[0],Te[Ae]=Le[1]}Me=0,Ae=0;for(var We=0;We<0+ve.length;We++){var f=[Te[Ae=(Ae+Te[Me=(Me+1)%256])%256],Te[Me]];Te[Me]=f[0],Te[Ae]=f[1],We>=0&&(ce[We-0]=ve[We-0]^Te[(Te[Me]+Te[Ae])%256])}return _=!0,new Promise(function(ye){var x,De;(x=ce.buffer,De=Y,WebAssembly.instantiate(x,De)).then(function(x){_=!1,D=x.instance.exports,F.__wbindgen_wasm_module=x.module,ye()})})}().then(function(){u=H.new(),W(u)})})).then(function(W){q=W});var he=!0;setInterval(function(){Object(y.getParameter)("UPLOAD_LOG")&&Q.info("console log upload")},9e5);var Q=function(){var W,F,Y,ve,de,ce,Te=null,Me=["DEBUG","INFO","WARNING","ERROR","NONE"],Oe=0,Le=function(f,ye){if(Object(y.getParameter)("UPLOAD_LOG"))try{ye=Array.prototype.slice.call(ye);var x="";if(ye.forEach(function(De){"object"===O()(De)&&(De=JSON.stringify(De)),x=x+De+" "}),L.push({payload:x,log_level:f}),he)return;"free"===C&&function De(Ue){C="uploading",setTimeout(function(){!function(f,ye,x){var De={};Array.isArray(f)||(f=[f]),f=f.map(function(Ke){return{log_item_id:g++,log_level:Ke.log_level,payload_str:Ke.payload}}),De={timestamp:Date.now(),sdk_version:y.VERSION,process_id:Object(I.getProcessId)(),payload:JSON.stringify(f)},q?De.hash=q.get_digest("".concat(De.payload).concat(De.process_id).concat(De.timestamp)):x&&x();try{var Ue=Te,Ve=Te||"https://".concat(Object(y.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(N.post)(Ve,De,function(Ke){"OK"===Ke?ye&&ye():x&&x()},function(Ke){x&&x()},Ue?{withCredentials:!0}:{withCredentials:!0,"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}catch(Ke){x&&x()}}(Ue,function(){ie=0,0!==L.length?(K=L.splice(0,L.length<10?L.length:10),De(K)):C="free"},function(){setTimeout(function(){De(K)},ie++<2?200:1e4)})},3e3)}(K=L.splice(0,L.length<10?L.length:10))}catch(De){}};F=function(){for(var f=[0],ye=0;ye<arguments.length;ye++)f.push(arguments[ye]);W.apply(this,f)},Y=function(){for(var f=[1],ye=0;ye<arguments.length;ye++)f.push(arguments[ye]);W.apply(this,f)},ve=function(){for(var f=[2],ye=0;ye<arguments.length;ye++)f.push(arguments[ye]);W.apply(this,f)},de=function(){for(var f=[3],ye=0;ye<arguments.length;ye++)f.push(arguments[ye]);W.apply(this,f)};var We={};return ce=function(f){We[f]||(ve.apply(void 0,arguments),We[f]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,stopWaitJoin:function(){he=!1},enableLogUpload:function(){Object(y.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(y.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(f){Te=f?"https://".concat(f,"/ls/?h=").concat(Object(y.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(y.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(f){f>4?f=4:f<0&&(f=0),Oe=f},log:W=function(){var f=arguments[0],ye=arguments;if(ye[0]=T()+" Agora-SDK ["+(Me[f]||"DEFAULT")+"]:",Le(f,ye),!(f<Oe))switch(f){case 0:case 1:console.log.apply(console,ye);break;case 2:console.warn.apply(console,ye);break;case 3:console.log.apply(console,ye);break;default:return void console.log.apply(console,ye)}},debug:F,info:Y,warning:ve,deprecate:ce,error:de}}();re.default=Q},function(le,re,j){"use strict";j.r(re),j.d(re,"report",function(){return b}),j.d(re,"SESSION_INIT",function(){return U}),j.d(re,"JOIN_CHOOSE_SERVER",function(){return P}),j.d(re,"JOIN_GATEWAY",function(){return G}),j.d(re,"PUBLISH",function(){return V}),j.d(re,"SUBSCRIBE",function(){return ee}),j.d(re,"getProcessId",function(){return $});var D=j(43),R=j.n(D),O=j(7),T=j.n(O),N=j(2),y=j(0),I=j(14),h=j(28),m=j.n(h),v=j(44);function k(l,H){var _=Object.keys(l);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(l);H&&(u=u.filter(function(q){return Object.getOwnPropertyDescriptor(l,q).enumerable})),_.push.apply(_,u)}return _}function B(l){for(var H=1;H<arguments.length;H++){var _=null!=arguments[H]?arguments[H]:{};H%2?k(Object(_),!0).forEach(function(u){R()(l,u,_[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(_)):k(Object(_)).forEach(function(u){Object.defineProperty(l,u,Object.getOwnPropertyDescriptor(_,u))})}return l}var w,E,U="session_init",P="join_choose_server",G="join_gateway",V="publish",ee="subscribe",se=new(j.n(v).a),te={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},oe=null,$=function(){return oe||(oe="process-"+m()(),y.default.info("processId: "+oe)),oe},b=(E=0,(w={list:{},setProxyServer:function(l){se.setProxy(l),w.proxyServerURL=l},getUrl:function(){return w.proxyServerURL?"https://".concat(w.proxyServerURL,"/rs/?h=").concat(Object(N.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(N.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return w.proxyServerURL?"https://".concat(w.proxyServerURL,"/rs/?h=").concat(Object(N.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(N.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(l){return w.list[l]?w.list[l].startTime:(y.default.DEBUG("[getSessionStartTime]: session ".concat(l," no exit")),0)},sessionInit:function(l,H){var _=T()({},te);_.startTime=+new Date,_.sid=l,_.cname=H.cname,w.list[l]=_;var u=T()({},{willUploadConsoleLog:Object(N.getParameter)("UPLOAD_LOG"),areaVersion:"global"},H.extend),q=T()({},_);q.eventType=U,q.appid=H.appid,q.browser=navigator.userAgent,q.build=N.BUILD,q.lts=+new Date,q.elapse=q.lts-q.startTime,q.extend=JSON.stringify(u),q.mode=H.mode,q.process=$(),q.success=H.succ,q.version=N.VERSION,delete q.startTime,w.send({type:"Session",data:q}),w._flushInvokeReport(l)},joinChooseServer2:function(l,H,_){if(w.list[l]){w.list[l].uid||(H.uid&&(w.list[l].uid=parseInt(H.uid)),H.cid&&(w.list[l].cid=parseInt(H.cid)),H.vid&&(w.list[l].vid=parseInt(H.vid)));var u=T()({},w.list[l]);u.eventType=P;var q=H.lts;u.lts=Date.now(),u.eventElapse=u.lts-q,u.chooseServerAddr=H.csAddr,u.errorCode=H.ec,u.elapse=u.lts-u.startTime,u.success=H.succ,u.chooseServerIp=H.chooseServerIp||"",u.chooseServerAddrList=JSON.stringify(H.serverList),delete u.startTime,w.send({type:"JoinChooseServer",data:u})}},joinChooseServer:function(l,H,_){if(w.list[l]){_&&(H.uid&&(w.list[l].uid=parseInt(H.uid)),H.cid&&(w.list[l].cid=parseInt(H.cid)),H.vid&&(w.list[l].vid=parseInt(H.vid)));var u=T()({},w.list[l]);u.eventType=P;var q=H.lts;u.lts=Date.now(),u.eventElapse=u.lts-q,u.chooseServerAddr=H.csAddr,u.errorCode=H.ec,u.elapse=u.lts-u.startTime,u.success=H.succ,u.chooseServerIp=H.chooseServerIp||"",u.chooseServerAddrList=JSON.stringify(H.serverList),delete u.startTime,w.send({type:"JoinChooseServer",data:u})}},reqUserAccount:function(l,H){H.vid&&(w.list[l].vid=parseInt(H.vid));var _=T()({},w.list[l]),u=H.lts;_.eventType="req_user_account",_.lts=Date.now(),_.success=H.success,_.serverAddress=H.serverAddress,_.stringUid=H.stringUid,_.uid=H.uid,_.errorCode=H.errorCode,_.elapse=_.lts-_.startTime,_.eventElapse=_.lts-u,_.extend="string"==typeof H.extend?H.extend:JSON.stringify(H.extend),delete _.startTime,w.send({type:"ReqUserAccount",data:_})},joinGateway:function(l,H){H.vid&&(w.list[l].vid=parseInt(H.vid)),H.uid&&(w.list[l].uid=parseInt(H.uid));var _=T()({},w.list[l]),u=H.lts;_.eventType=G,_.firstSuccess=H.firstSuccess,_.lts=Date.now(),_.gatewayAddr=H.addr,_.success=H.succ,_.errorCode=H.ec,_.elapse=_.lts-_.startTime,_.eventElapse=_.lts-u,delete _.startTime,w.send({type:"JoinGateway",data:_})},publish:function(l,H){var _=T()({},w.list[l]);_.eventType=V;var u=H.lts;_.lts=Date.now(),_.eventElapse=_.lts-u,_.elapse=_.lts-_.startTime,_.success=H.succ,_.errorCode=H.ec,_.audio=H.audio,_.video=H.video,_.screenshare=H.screenshare,_.publishRequestid=H.publishRequestid,_.p2pid=H.p2pid,H.videoName&&(_.videoName=H.videoName),H.audioName&&(_.audioName=H.audioName),H.screenName&&(_.screenName=H.screenName),delete _.startTime,w.send({type:"Publish",data:_}),w._flushInvokeReport(l)},subscribe:function(l,H){var _=T()({},w.list[l]);_.eventType=ee;var u=H.lts;_.lts=Date.now(),_.eventElapse=_.lts-u,_.elapse=_.lts-_.startTime,_.errorCode=H.ec,_.success=H.succ,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,isFinite(H.peerid)?_.peer=H.peerid:_.peerSuid=""+H.peerid,"boolean"==typeof H.video&&(_.video=H.video),"boolean"==typeof H.audio&&(_.audio=H.audio),delete _.startTime,w.send({type:"Subscribe",data:_}),w._flushInvokeReport(l)},firstRemoteFrame:function(l,H){var _=T()({},w.list[l]);_.eventType="first_remote_frame";var u=H.lts;_.lts=Date.now(),_.eventElapse=_.lts-u,_.elapse=_.lts-_.startTime,_.width=H.width,_.height=H.height,_.success=H.succ,_.errorCode=H.ec,isFinite(H.peerid)?_.peer=H.peerid:_.peerSuid=""+H.peerid,delete _.startTime,w.send({type:"FirstFrame",data:_})},firstVideoReceived:function(l,H){var _=T()({},w.list[l]);_.eventType="first_video_received",_.lts=Date.now(),_.peer=H.peerid,_.uid=H.uid,_.elapse=H.elapse,_.subscribeElapse=H.subscribeElapse,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,w.send({type:"FirstVideoReceived",data:_})},firstAudioReceived:function(l,H){var _=T()({},w.list[l]);_.eventType="first_audio_received",_.lts=Date.now(),_.peer=H.peerid,_.uid=H.uid,_.elapse=H.elapse,_.subscribeElapse=H.subscribeElapse,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,w.send({type:"FirstAudioReceived",data:_})},firstVideoDecode:function(l,H){var _=T()({},w.list[l]);_.eventType="first_video_decode",_.lts=Date.now(),_.peer=H.peerid,_.uid=H.uid,_.elapse=H.elapse,_.videowidth=H.width,_.videoheight=H.height,_.subscribeElapse=H.subscribeElapse,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,w.send({type:"FirstVideoDecode",data:_})},firstAudioDecode:function(l,H){var _=T()({},w.list[l]);_.eventType="first_audio_decode",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,_.elapse=H.elapse,_.subscribeElapse=H.subscribeElapse,_.subscribeRequestid=H.subscribeRequestid,_.p2pid=H.p2pid,w.send({type:"FirstAudioDecode",data:_})},onAddAudioStream:function(l,H){var _=T()({},w.list[l]);_.eventType="on_add_audio_stream",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,w.send({type:"OnAddAudioStream",data:_})},onAddVideoStream:function(l,H){var _=T()({},w.list[l]);_.eventType="on_add_video_stream",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,w.send({type:"OnAddVideoStream",data:_})},onUpdateStream:function(l,H){var _=T()({},w.list[l]);_.eventType="on_update_stream",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,_.audio=H.audio,_.video=H.video,w.send({type:"OnUpdateStream",data:_})},onRemoveStream:function(l,H){var _=T()({},w.list[l]);_.eventType="on_remove_stream",_.lts=Date.now(),_.uid=H.uid,_.peer=H.peerid,w.send({type:"OnRemoveStream",data:_})},streamSwitch:function(l,H){var _=T()({},w.list[l]);_.eventType="stream_switch",_.lts=Date.now(),_.isDual=H.isdual,_.elapse=_.lts-_.startTime,_.success=_.succ,delete _.startTime,w.send({type:"StreamSwitch",data:_})},audioSendingStopped:function(l,H){var _=T()({},w.list[l]);_.eventType="audio_sending_stopped",_.lts=Date.now(),_.elapse=_.lts-_.startTime,_.reason=H.reason,_.success=H.succ,delete _.startTime,w.send({type:"AudioSendingStopped",data:_})},videoSendingStopped:function(l,H){var _=T()({},w.list[l]);_.eventType="video_sending_stopped",_.lts=Date.now(),_.elapse=_.lts-_.startTime,_.reson=H.reason,_.success=H.succ,delete _.startTime,w.send({type:"VideoSendingStopped",data:_})},requestProxyAppCenter:function(l,H){var _=T()({},w.list[l]),u=H.lts;_.eventType="request_proxy_appcenter",_.lts=Date.now(),_.eventElapse=_.lts-u,_.elapse=_.lts-_.startTime,_.extend=H.extend+"",_.APAddr=H.APAddr,_.workerManagerList=H.workerManagerList,_.response=H.response,_.errorCode=H.ec,_.success=H.succ,delete _.startTime,w.send({type:"RequestProxyAppCenter",data:_})},requestProxyWorkerManager:function(l,H){var _=T()({},w.list[l]),u=H.lts;_.eventType="request_proxy_worker_manager",_.lts=Date.now(),_.eventElapse=_.lts-u,_.elapse=_.lts-_.startTime,_.extend=H.extend,_.workerManagerAddr=H.workerManagerAddr,_.response=H.response,_.errorCode=H.ec,_.success=H.succ,delete _.startTime,w.send({type:"RequestProxyWorkerManager",data:_})},requestWorkerEvent:function(l,H){var _=T()({},w.list[l]),u=_.startTime,q=Date.now();delete(_=B({},_,{},H,{elapse:q-u,lts:q,productType:"WebRTC"})).startTime,w.send({type:"WorkerEvent",data:_})},requestApWorkerEvent:function(l,H){var _=T()({},w.list[l]),u=_.startTime,q=Date.now();_=B({},_,{},H,{elapse:q-u,lts:q}),w.send({type:"APWorkerEvent",data:_})},sendCustomReportMessage:function(l,H,_){var u={type:"UserAnalytics",data:B({sid:l},H)},q=w.getUrl(),g=!!w.proxyServerURL;Object(I.post)(q,u,function(C){_&&_()},function(C){var L=w.getBackUrl();Object(I.post)(L,u,function(K){_&&_()},function(K){_&&_("Failed")},g?{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},g?{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},joinChannelTimeOut:function(l){w.send({type:"JoinChannelTimeout",data:B({},l)})},peerPublishStatus:function(l){w.send({type:"PeerPublishStatus",data:B({},l)})},joinWebProxyAP:function(l){w.send({type:"JoinWebProxyAP",data:B({},l)})},webSocketQuit:function(l){w.send({type:"WebSocketQuit",data:B({},l)})}}).reportApiInvoke=function(l,H){var _=H.tag,u=H.name,q=H.getStates,g=H.options,C=H.timeout,L=void 0===C?6e4:C,K=H.callback,ie=H.reportResult,he=void 0===ie||ie,Q=Date.now(),W=0,F=E++,Y=function(){return B({tag:_,invokeId:F,sid:l,name:u,apiInvokeTime:Q,options:g},q&&{states:(ce=q(),Object.keys(ce).reduce(function(Te,Me){var Oe=Te;return null!=ce[Me]&&(Oe[Me]=ce[Me]),Oe},{}))});var ce},ve=!!Object(N.getParameter)("SHOW_REPORT_INVOKER_LOG");ve&&y.default.info("".concat(u," start"));var de=setTimeout(function(){b._sendApiInvoke(B({},Y(),{error:"API_INVOKE_TIMEOUT",success:!1}))},L);return function(ce,Te){if(clearTimeout(de),++W>1&&(ce="EXECUTOR_INVOKE_".concat(W)),ce)return b._sendApiInvoke(B({},Y(),{success:!1,error:ce},q&&{states:q()})),ve&&y.default.info("".concat(u," onFailure"),ce),K&&K(ce);b._sendApiInvoke(B({},Y(),{success:!0},he&&{result:Te},{},q&&{states:q()})),ve&&y.default.info("".concat(u," onSuccess")),K&&K(null,Te)}},w._cachedItems=[],w._cacheInvokeReport=function(l){l.lts||(l.lts=Date.now()),w._cachedItems.push(l),w._cachedItems.length>50&&w._cachedItems.shift()},w._flushInvokeReport=function(l){if(w._cachedItems.length){var H=w._cachedItems;w._cachedItems=[],y.default.debug("Flush cached event reporting:",H.length),H.forEach(function(_,u){_.sid=l,setTimeout(function(){w._sendApiInvoke(_)},5e3+500*u)})}},w._sendApiInvoke=function(l){var H=l.tag,_=l.invokeId,u=l.sid,q=l.name,g=l.result,C=l.states,L=l.options,K=l.error,ie=l.success,he=l.apiInvokeTime,Q=l.lts,W=Object(N.getParameter)("NOT_REPORT_EVENT");if(!(H&&W instanceof Array&&-1!==W.indexOf(H)))if(w.list[u]){var F=w.list[u],Y=F.startTime,ve=F.cname,de=F.uid,ce=F.cid,Te=(Q=Q||Date.now())-Y,Me=Q-he,Oe="";if(L)try{Oe=JSON.stringify(L)}catch(Le){Oe=L.toString()}var Ae=B({invokeId:_,sid:u,cname:ve,cid:ce,lts:Q,uid:de,success:ie,elapse:Te,apiName:q,execElapse:Me},void 0!==L&&{options:Oe},{},void 0!==C&&{execStates:JSON.stringify(C)},{},void 0!==K&&{errorCode:JSON.stringify(K)},{},void 0!==g&&{execResult:JSON.stringify(g)});w.send({type:"ApiInvoke",data:Ae})}else w._cacheInvokeReport(arguments[0])},w.sendCache=[],w.sendTimer=null,w.send=function(l){if(l.data){var H=l.data;w._lastLts&&w._lastLts>=H.lts&&(H.lts=w._lastLts+1),w._lastLts=H.lts}if(w.sendCache.push(l),null===w.sendTimer)return function _(){w.sendTimer=setTimeout(function(){if(0!==w.sendCache.length){var u=w.sendCache.splice(0,w.sendCache.length<10?w.sendCache.length:10);return se.sendReportList(u,w.list[u[0].data.sid].vid),_()}w.sendTimer=null},Object(N.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},w)},function(le,re,j){"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.BUILD="v3.6.4-0-g9aa9f46",re.VERSION="3.6.4";var D=0*Date.now()+11499+86604+5615+6547+846;re.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},re.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var R={AREA_SETTING:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"web-2.statscollector.sd-rtn.com",EVENT_REPORT_BACKUP_DOMAIN:"web-3.statscollector.sd-rtn.com",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,LIVE_STREAMING_TIMEOUT:12e4,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:D.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",NGINX:"webrtc-cloud-proxy.sd-rtn.com",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:"",CHOOSE_SERVER_FRAGEMENT_LENGTH:4,PLAN:"plan-b"};re.setParameter=function(O,T){return void 0!==R[O]&&(R[O]=T,!0)},re.getParameter=function(O){return void 0!==R[O]?R[O]:null}},function(le,re,j){"use strict";j.r(re),j.d(re,"checkValidObject",function(){return y}),j.d(re,"checkValidString",function(){return I}),j.d(re,"checkValidNumber",function(){return h}),j.d(re,"checkValidArray",function(){return m}),j.d(re,"checkValidFloatNumber",function(){return v}),j.d(re,"checkValidBoolean",function(){return k}),j.d(re,"checkValidEnum",function(){return N}),j.d(re,"checkValidUID",function(){return B}),j.d(re,"isValidString",function(){return w}),j.d(re,"isValidNumber",function(){return E}),j.d(re,"isValidBoolean",function(){return P}),j.d(re,"isASCII",function(){return ee}),j.d(re,"isInteger",function(){return se}),j.d(re,"isNumber",function(){return te}),j.d(re,"isString",function(){return oe}),j.d(re,"isArray",function(){return $}),j.d(re,"isEmpty",function(){return b}),j.d(re,"isValidToken",function(){return G}),j.d(re,"isValidChannelName",function(){return V});var D=j(11),R=j.n(D),O=j(10),T=j(0),N=function(l,H,_){for(var u=0;u<_.length;u++)if(l===_[u])return!0;throw new Error("".concat(H," can only be set as ").concat(JSON.stringify(_)))},y=function(l,H){if(!l)throw new Error("Invalid param: ".concat(H||"param"," cannot be empty"));if("object"!==R()(l))throw new Error("".concat(H||"This paramter"," is of the object type"));return!0},I=function(l,H,_,u,q){if(b(_)&&(_=1),u=u||255,b(q)&&(q=!0),b(l))throw new Error("".concat(H||"param"," cannot be empty"));if(!w(l,_,u,q))throw new Error("Invalid ".concat(H||"string param",": Length of the string: [").concat(_,",").concat(u,"].").concat(q?" ASCII characters only.":""))},h=function(l,H,_,u){if(b(_)&&(_=1),u=u||1e4,b(l))throw new Error("".concat(H||"param"," cannot be empty"));if(!E(l,_,u))throw new Error("Invalid ".concat(H||"number param",": The value range is [").concat(_,",").concat(u,"]. integer only"))},m=function(l,H){if(!Array.isArray(l))throw new Error("".concat(H," should be an array"))},v=function(l,H,_,u){if(null==l)throw new Error("".concat(H||"param"," cannot be null"));if(b(_)&&(_=0),u=u||1e4,b(l))throw new Error("".concat(H||"param"," cannot be empty"));if(!U(l,_,u))throw new Error("Invalid ".concat(H||"number param",": The value range is [").concat(_,",").concat(u,"]."))},k=function(l,H){if(b(l))throw new Error("".concat(H||"param"," cannot be empty"));if(!P(l))throw new Error("Invalid ".concat(H||"boolean param",": The value is of the boolean type."))},B=function(l){if(!Object(O.is32Uint)(l)&&!w(l,1,255))throw T.default.error("Invalid UID ".concat(l," ").concat(R()(l))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},w=function(l,H,_,u){return H||(H=0),_||(_=Number.MAX_SAFE_INTEGER),b(u)&&(u=!0),oe(l)&&(!u||ee(l))&&l.length>=H&&l.length<=_},E=function(l,H,_){return se(l)&&l>=H&&l<=_},U=function(l,H,_){return te(l)&&l>=H&&l<=_},P=function(l){return"boolean"==typeof l},G=function(l){return w(l,1,2047)},V=function(l){return oe(l)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(l)},ee=function(l){if("string"==typeof l){for(var H=0;H<l.length;H++){var _=l.charCodeAt(H);if(_<0||_>255)return!1}return!0}},se=function(l){return"number"==typeof l&&l%1==0},te=function(l){return"number"==typeof l},oe=function(l){return"string"==typeof l},$=function(l){return l instanceof Array},b=function(l){return null==l}},function(le,re,j){"use strict";j.r(re),j.d(re,"APErrorCode",function(){return D}),j.d(re,"GatewayErrorCode",function(){return R}),j.d(re,"StringUidErrorCode",function(){return O}),j.d(re,"JOIN_GS_TRYNEXT_LIST",function(){return T}),j.d(re,"JOIN_CS_RETRY_LIST",function(){return N}),j.d(re,"JOIN_PROXY_RETRY_LIST",function(){return y}),j.d(re,"INJECT_STREAM_STATUS",function(){return I}),j.d(re,"WEBSOCKET_CLOSE_REASON",function(){return h});var D={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},R={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",2028:"ILLEGAL_AES_PASSWORD",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},O={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},T=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],N=["NO_SERVICE_AVAILABLE"],y=["NO_SERVICE_AVAILABLE","REQUEST_PROXY_SERVER_FAILED","REQUEST_PROXY_SERVER_TIME_OUT"],I={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10},h={WS_DISCONNECT:"WS_DISCONNECT"};re.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(le,re,j){"use strict";j.r(re),j.d(re,"getBrowserInfo",function(){return P}),j.d(re,"getBrowserVersion",function(){return v}),j.d(re,"getBrowserOS",function(){return k}),j.d(re,"isChrome",function(){return D}),j.d(re,"isSafari",function(){return R}),j.d(re,"isFireFox",function(){return T}),j.d(re,"isOpera",function(){return N}),j.d(re,"isEdge",function(){return O}),j.d(re,"isQQBrowser",function(){return y}),j.d(re,"isWeChatBrowser",function(){return I}),j.d(re,"isLegacyChrome",function(){return w}),j.d(re,"isSupportedPC",function(){return h}),j.d(re,"isSupportedMobile",function(){return m}),j.d(re,"getChromeKernelVersion",function(){return U}),j.d(re,"isChromeKernel",function(){return B});var D=function(){var G=P();return G.name&&"Chrome"===G.name},R=function(){var G=P();return G.name&&"Safari"===G.name},O=function(){var G=P();return G.name&&"Edge"===G.name},T=function(){var G=P();return G.name&&"Firefox"===G.name},N=function(){var G=P();return G.name&&"OPR"===G.name},y=function(){var G=P();return G.name&&"QQBrowser"===G.name},I=function(){var G=P();return G.name&&"MicroMessenger"===G.name},h=function(){var G=k();return"Linux"===G||"Mac OS X"===G||"Mac OS"===G||-1!==G.indexOf("Windows")},m=function(){var G=k();return"Android"===G||"iOS"===G},v=function(){return P().version},k=function(){return P().os},B=function(){return!!navigator.userAgent.match(/chrome\/[\d]./i)};function w(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var E,U=function(){var G=navigator.userAgent.match(/chrome\/[\d]./i);return G&&G[0]&&G[0].split("/")[1]},P=(E=function(){var G,V=navigator.userAgent,ee=V.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===ee[1]&&null!=(G=V.match(/(OPR(?=\/))\/?(\d+)/i))&&(ee=G),"Safari"===ee[1]&&null!=(G=V.match(/version\/(\d+)/i))&&(ee[2]=G[1]),~V.toLowerCase().indexOf("qqbrowser")&&null!=(G=V.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(ee=G),~V.toLowerCase().indexOf("micromessenger")&&null!=(G=V.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(ee=G),~V.toLowerCase().indexOf("edge")&&null!=(G=V.match(/(edge(?=\/))\/?(\d+)/i))&&(ee=G),~V.toLowerCase().indexOf("trident")&&null!=(G=/\brv[ :]+(\d+)/g.exec(V)||[])&&(ee=[null,"IE",G[1]]);var se=void 0,te=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var oe in te){var $=te[oe];if($.r.test(navigator.userAgent)){se=$.s;break}}return{name:ee[1],version:ee[2],os:se}}(),function(){return E})},function(le,re,j){"use strict";j.d(re,"b",function(){return D}),j.d(re,"a",function(){return R}),j.d(re,"c",function(){return O}),j(0);var D=function(T,N,y){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(N)>-1&&("string"==typeof y||isFinite(y)))return T[N]=""+y},R=function(T){var N={};return T.forEach(function(y){y.id&&y.type&&(-1===y.id.indexOf("send")&&-1===y.type.toLowerCase().indexOf("outbound")&&-1===y.id.indexOf("outbound_rtp")&&-1===y.id.indexOf("OutboundRTP")||("audio"===y.mediaType?(D(N,"audioSendBytes",y.bytesSent),D(N,"audioSendPackets",y.packetsSent),D(N,"audioSendPacketsLost",y.packetsLost)):(D(N,"videoSendBytes",y.bytesSent),D(N,"videoSendPackets",y.packetsSent),D(N,"videoSendPacketsLost",y.packetsLost),D(N,"videoSendFrameRate",y.googFrameRateSent),D(N,"videoSendResolutionWidth",y.googFrameWidthSent),D(N,"videoSendResolutionHeight",y.googFrameHeightSent))))}),N},O=function(T){var N={};return T.forEach(function(y){y.id&&y.type&&(-1===y.id.indexOf("recv")&&-1===y.type.toLowerCase().indexOf("inbound")&&-1===y.id.indexOf("inbound_rtp")&&-1===y.id.indexOf("inbound-rtp")&&-1===y.id.indexOf("InboundRTP")||("audio"===y.mediaType?(D(N,"audioReceiveBytes",y.bytesReceived),D(N,"audioReceivePackets",y.packetsReceived),D(N,"audioReceivePacketsLost",y.packetsLost)):(D(N,"videoReceiveBytes",y.bytesReceived),D(N,"videoReceivePacketsLost",y.packetsLost),D(N,"videoReceivePackets",y.packetsReceived),D(N,"videoReceiveFrameRate",y.googFrameRateReceived),D(N,"videoReceiveDecodeFrameRate",y.googFrameRateDecoded),D(N,"videoReceiveResolutionWidth",y.googFrameWidthReceived),D(N,"videoReceiveResolutionHeight",y.googFrameHeightReceived))))}),N}},function(le,re){function j(){return le.exports=j=Object.assign||function(D){for(var R=1;R<arguments.length;R++){var O=arguments[R];for(var T in O)Object.prototype.hasOwnProperty.call(O,T)&&(D[T]=O[T])}return D},j.apply(this,arguments)}le.exports=j},function(le,re,j){"use strict";j.d(re,"b",function(){return R}),j.d(re,"e",function(){return T}),j.d(re,"a",function(){return N}),j.d(re,"d",function(){return y}),j.d(re,"c",function(){return I});var D=j(0),R=function(){var h={dispatcher:{}};return h.dispatcher.eventListeners={},h.addEventListener=function(m,v){void 0===h.dispatcher.eventListeners[m]&&(h.dispatcher.eventListeners[m]=[]),h.dispatcher.eventListeners[m].push(v)},h.hasListeners=function(m){return!(!h.dispatcher.eventListeners[m]||!h.dispatcher.eventListeners[m].length)},h.on=h.addEventListener,h.removeEventListener=function(m,v){var k;h.dispatcher.eventListeners[m]&&-1!==(k=h.dispatcher.eventListeners[m].indexOf(v))&&h.dispatcher.eventListeners[m].splice(k,1)},h.dispatchEvent=function(m){var v;for(v in h.dispatcher.eventListeners[m.type])if(h.dispatcher.eventListeners[m.type]&&h.dispatcher.eventListeners[m.type].hasOwnProperty(v)&&"function"==typeof h.dispatcher.eventListeners[m.type][v])try{h.dispatcher.eventListeners[m.type][v](m)}catch(k){D.default.debug("[".concat(h.clientId,"] Error in ").concat(m.type," event"),k)}},h.dispatchSocketEvent=function(m){var v;for(v in h.dispatcher.eventListeners[m.type])h.dispatcher.eventListeners[m.type]&&h.dispatcher.eventListeners[m.type].hasOwnProperty(v)&&"function"==typeof h.dispatcher.eventListeners[m.type][v]&&h.dispatcher.eventListeners[m.type][v](m.msg)},h},O=function(h){var m={};return m.type=h.type,m},T=function(h){var m=O(h);return m.stream=h.stream,m.reason=h.reason,m.msg=h.msg,m},N=function(h){var m=O(h);return m.uid=h.uid,m.attr=h.attr,m.stream=h.stream,m},y=function(h){var m=O(h);return m.msg=h.msg,m},I=function(h){var m=O(h);return m.url=h.url,m.uid=h.uid,m.status=h.status,m.reason=h.reason,m}},function(le,re,j){"use strict";var D,R=this&&this.__extends||(D=function(te,oe){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,b){$.__proto__=b}||function($,b){for(var l in b)b.hasOwnProperty(l)&&($[l]=b[l])})(te,oe)},function(te,oe){function $(){this.constructor=te}D(te,oe),te.prototype=null===oe?Object.create(oe):($.prototype=oe.prototype,new $)}),O=this&&this.__awaiter||function(te,oe,$,b){return new($||($=Promise))(function(l,H){function _(g){try{q(b.next(g))}catch(C){H(C)}}function u(g){try{q(b.throw(g))}catch(C){H(C)}}function q(g){var C;g.done?l(g.value):(C=g.value,C instanceof $?C:new $(function(L){L(C)})).then(_,u)}q((b=b.apply(te,oe||[])).next())})},T=this&&this.__generator||function(te,oe){var $,b,l,H,_={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return H={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(H[Symbol.iterator]=function(){return this}),H;function u(q){return function(g){return function(C){if($)throw new TypeError("Generator is already executing.");for(;_;)try{if($=1,b&&(l=2&C[0]?b.return:C[0]?b.throw||((l=b.return)&&l.call(b),0):b.next)&&!(l=l.call(b,C[1])).done)return l;switch(b=0,l&&(C=[2&C[0],l.value]),C[0]){case 0:case 1:l=C;break;case 4:return _.label++,{value:C[1],done:!1};case 5:_.label++,b=C[1],C=[0];continue;case 7:C=_.ops.pop(),_.trys.pop();continue;default:if(!((l=(l=_.trys).length>0&&l[l.length-1])||6!==C[0]&&2!==C[0])){_=0;continue}if(3===C[0]&&(!l||C[1]>l[0]&&C[1]<l[3])){_.label=C[1];break}if(6===C[0]&&_.label<l[1]){_.label=l[1],l=C;break}if(l&&_.label<l[2]){_.label=l[2],_.ops.push(C);break}l[2]&&_.ops.pop(),_.trys.pop();continue}C=oe.call(te,_)}catch(L){C=[6,L],b=0}finally{$=l=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([q,g])}}},N=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(re,"__esModule",{value:!0});var y=N(j(67)),I=j(2),h=N(j(0)),m=j(3),v=j(14),k=j(10),B=function(te){function oe($,b){var l=te.call(this)||this;return l._state=G.RELAY_STATE_IDLE,l._onStatus=function(H){h.default.debug("["+l.clientId+"] ChannelMediaStatus: "+JSON.stringify(H)),H&&H.command&&("onAudioPacketReceived"===H.command&&l.emit("event",P.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===H.command&&l.emit("event",P.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===H.command&&(l._state=G.RELAY_STATE_FAILURE,l.emit("state",G.RELAY_STATE_FAILURE,V.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===H.command&&(l._state=G.RELAY_STATE_FAILURE,l.emit("state",G.RELAY_STATE_FAILURE,V.DEST_TOKEN_EXPIRED,H.channelName?{came:H.channelName}:null)))},l._onClose=function(){return O(l,void 0,void 0,function(){var H;return T(this,function(_){switch(_.label){case 0:if(h.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",P.NETWORK_DISCONNECTED),this.state=G.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];_.label=1;case 1:return _.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return _.sent(),[3,4];case 3:return(H=_.sent())instanceof se&&(H.message===E.WS_ABORT||H.message===E.AP_REQUEST_ABORT)?[2]:(this.emit("state",G.RELAY_STATE_FAILURE,V.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}})})},l.token=$.appId,l.appId=$.appId,l.cname=$.cname,l.uid=$.uid,l.sid=$.sid,l.clientId=b,l}return R(oe,te),Object.defineProperty(oe.prototype,"state",{get:function(){return this._state},set:function($){var b=this._state;this._state=$,b!==$&&this.emit("state",$)},enumerable:!0,configurable:!0}),oe.prototype.startChannelMediaRelay=function($){return O(this,void 0,void 0,function(){return T(this,function(b){switch(b.label){case 0:if(this.state!==G.RELAY_STATE_IDLE)throw new se(E.BAD_STATE);return this.state=G.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return b.sent(),h.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage($)];case 2:return b.sent(),this._prevChannelMediaConfig=$,[2]}})})},oe.prototype.updateChannelMediaRelay=function($){return O(this,void 0,void 0,function(){return T(this,function(b){switch(b.label){case 0:if(this.state!==G.RELAY_STATE_RUNNING)throw new se(E.BAD_STATE);return[4,this._sendUpdateMessage($)];case 1:return b.sent(),this._prevChannelMediaConfig=$,[2]}})})},oe.prototype.stopChannelMediaRelay=function(){return O(this,void 0,void 0,function(){return T(this,function($){switch($.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return $.sent(),h.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=G.RELAY_STATE_IDLE,this.dispose(),[2]}})})},oe.prototype.dispose=function(){h.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=G.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},oe.prototype._requestOneAP=function($){var b=this;return new Promise(function(l,H){var _={command:"convergeAllocateEdge",sid:b.sid,appId:b.appId,token:"",ts:+new Date,version:I.VERSION,cname:b.cname,uid:b.uid+"",seq:1,requestId:1},u={service_name:"tele_channel",json_body:JSON.stringify(_)};v.post("https://"+$,u,function(g){var C=null,L=null;try{C=JSON.parse(g)}catch(K){H(new se(E.AP_JSON_PARSE_ERROR,K))}0!==C.code&&H(new se(E.AP_REQUEST_ERROR,C));try{L=JSON.parse(C.json_body)}catch(K){H(new se(E.AP_JSON_PARSE_ERROR,K))}200!==L.code&&H(new se(E.AP_REQUEST_ERROR,L)),L.servers?l(L.servers):H(new se(E.AP_JSON_PARSE_ERROR,L))},function(g){return H(g)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})})},oe.prototype._requestAP=function(){var $=this,b=I.getParameter("UAP_AP");return new Promise(function(l,H){setTimeout(function(){H(new se(E.AP_REQUEST_TIMEOUT))},5e3),$.on("dispose",function(){H(new se(E.AP_REQUEST_ABORT))}),b.forEach(function(_){$._requestOneAP(_+="/api/v1").then(function(u){h.default.debug("["+$.clientId+"] startChannelMediaRelay request AP "+_+" success: "+JSON.stringify(u));var q=u[0],g="wss://"+q.address.replace(/\./g,"-")+".edge.agora.io:"+q.wss;l(g)}).catch(function(u){h.default.debug("["+$.clientId+"] startChannelMediaRelay request AP "+_+" failed: "+JSON.stringify(u))})})})},oe.prototype._connectWebsocket=function($){return this._signal=new ee(this.appId,this.cname,this.uid,this.sid),this._signal.connect($)},oe.prototype._connect=function(){return O(this,void 0,void 0,function(){var $;return T(this,function(b){switch(b.label){case 0:return[4,this._requestAP()];case 1:return $=b.sent(),[4,this._connectWebsocket($)];case 2:return b.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",P.NETWORK_CONNECTED),[2]}})})},oe.prototype._sendStartRelayMessage=function($){return O(this,void 0,void 0,function(){var b,l,H,_,u,q;return T(this,function(g){switch(g.label){case 0:return this._checkSignal(),b=this._genMessage(U.StopPacketTransfer),[4,this._signal.request(b)];case 1:return g.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return g.sent(),h.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),l=this._genMessage(U.SetSdkProfile,$),[4,this._signal.request(l)];case 3:return g.sent(),h.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),H=this._genMessage(U.SetSourceChannel,$),[4,this._signal.request(H)];case 4:return g.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return g.sent(),this.emit("event",P.PACKET_JOINED_SRC_CHANNEL),h.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),_=this._genMessage(U.SetSourceUserId,$),[4,this._signal.request(_)];case 6:return g.sent(),h.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),u=this._genMessage(U.SetDestChannel,$),[4,this._signal.request(u)];case 7:return g.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return g.sent(),this.emit("event",P.PACKET_JOINED_DEST_CHANNEL),h.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),q=this._genMessage(U.StartPacketTransfer,$),[4,this._signal.request(q)];case 9:return g.sent(),this.emit("event",P.PACKET_SENT_TO_DEST_CHANNEL),this.state=G.RELAY_STATE_RUNNING,h.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}})})},oe.prototype._sendReconnectMessage=function($){return O(this,void 0,void 0,function(){var b;return T(this,function(l){switch(l.label){case 0:return this._checkSignal(),b=this._genMessage(U.Reconnect,$),[4,this._signal.request(b)];case 1:return l.sent(),[2]}})})},oe.prototype._sendUpdateMessage=function($){return O(this,void 0,void 0,function(){var b;return T(this,function(l){switch(l.label){case 0:return this._checkSignal(),b=this._genMessage(U.UpdateDestChannel,$),[4,this._signal.request(b)];case 1:return l.sent(),this.emit("event",P.PACKET_UPDATE_DEST_CHANNEL),h.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}})})},oe.prototype._sendStopRelayMessage=function(){return O(this,void 0,void 0,function(){var $;return T(this,function(b){switch(b.label){case 0:return this._checkSignal(),$=this._genMessage(U.StopPacketTransfer),[4,this._signal.request($)];case 1:return b.sent(),h.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}})})},oe.prototype._genMessage=function($,b){var l=this,H=[],_=[],u=[],q={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:I.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},g=null;switch($){case U.SetSdkProfile:return q.clientRequest={command:"SetSdkProfile",type:"multi_channel"},q;case U.SetSourceChannel:return g=b.getSrcChannelMediaInfo(),q.clientRequest={command:"SetSourceChannel",uid:g.uid+"",channelName:g.channelName,token:g.token||this.appId},q;case U.SetSourceUserId:return g=b.getSrcChannelMediaInfo(),q.clientRequest={command:"SetSourceUserId",uid:this.uid+""},q;case U.SetDestChannel:return b.getDestChannelMediaInfos().forEach(function(C){H.push(C.channelName),_.push(C.uid+""),u.push(C.token||l.appId)}),q.clientRequest={command:"SetDestChannel",channelName:H,uid:_,token:u},q;case U.StartPacketTransfer:return q.clientRequest={command:"StartPacketTransfer"},q;case U.Reconnect:return q.clientRequest={command:"Reconnect"},q;case U.StopPacketTransfer:return q.clientRequest={command:"StopPacketTransfer"},q;case U.UpdateDestChannel:return b.getDestChannelMediaInfos().forEach(function(C){H.push(C.channelName),_.push(C.uid+""),u.push(C.token||l.appId)}),q.clientRequest={command:"UpdateDestChannel",channelName:H,uid:_,token:u},q}},oe.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new se(E.WS_DISCONNECTED)},oe}(y.default);re.default=B;var w=function(){function te(){this.destChannelMediaInfos=new Map}return te.prototype.setSrcChannelInfo=function(oe){m.checkValidObject(oe,"srcInfo");var $=oe.uid,b=oe.channelName,l=oe.token;if(l&&!m.isValidToken(l))throw new Error("Invalid token in SrcChannelInfo");if(!m.isValidChannelName(b))throw new Error("Invalid channelName in SrcChannelInfo");if(!k.is32Uint($))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=oe},te.prototype.setDestChannelInfo=function(oe,$){if(!m.isValidChannelName(oe))throw new Error("Invalid channelName in DestChannelInfo");m.checkValidObject($,"destInfo");var b=$.uid,l=$.token,H=$.channelName;if(l&&!m.isValidToken(l))throw new Error("Invalid token in DestChannelInfo");if(!m.isValidChannelName(H))throw new Error("Invalid channelName in DestChannelInfo");if(!k.is32Uint(b))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(oe,$)},te.prototype.removeDestChannelInfo=function(oe){if(!m.isValidChannelName(oe))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(oe)},te.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},te.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},te}();re.ChannelMediaRelayConfiguration=w;var E,U,P,G,V,te,ee=function(te){function oe($,b,l,H){var _=te.call(this)||this;return _._onOpen=function(){_.emit("open")},_._onClose=function(u){_.emit("close"),_.dispose()},_._onMessage=function(u){var q=JSON.parse(u.data);if(!q||"serverResponse"!==q.command||!q.requestId)return q&&"serverStatus"===q.command&&q.serverStatus&&q.serverStatus.command?(_.emit("status",q.serverStatus),void _.emit(q.serverStatus.command,q.serverStatus)):void 0;_.emit("req_"+q.requestId,q)},_._requestId=1,_.appId=$,_.cname=b,_.uid=l,_.sid=H,_}return R(oe,te),oe.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},oe.prototype.sendMessage=function($){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new se(E.WS_DISCONNECTED);var b=this._requestId++;return $.requestId=b,$.seq=b,this._ws.send(JSON.stringify($)),b},oe.prototype.waitStatus=function($){var b=this;return new Promise(function(l,H){var _=window.setTimeout(function(){H(new se(E.WAIT_STATUS_TIMEOUT,$))},5e3);b.once($,function(u){clearTimeout(_),u.state&&0!==u.state?H(new se(E.WAIT_STATUS_ERROR,$)):l()}),b.once("dispose",function(){clearTimeout(_),H(new se(E.WS_ABORT))})})},oe.prototype.request=function($){var b=this;return new Promise(function(l,H){var _=b.sendMessage($),u=window.setTimeout(function(){b.removeAllListeners("req_"+_),H(new se(E.REQUEST_TIMEOUT))},3e3);b.once("req_"+_,function(q){clearTimeout(u),q&&200===q.code?l(q):H(new se(E.REQUEST_FAILED,q))}),b.once("dispose",function(){clearTimeout(u),H(new se(E.WS_ABORT))})})},oe.prototype.connect=function($){var b=this;return new Promise(function(l,H){b._ws=new WebSocket($),b._ws.onopen=function(){b._onOpen(),b._prvUrl=$,b._ws.onmessage=b._onMessage,b._ws.onclose=b._onClose,b._startHeartBeatCheck(),l()},b._ws.onclose=function(_){b._ws=null,H(new se(E.CONNECT_FAILED,"websocket error code: "+_.code))},setTimeout(function(){b._ws&&b._ws.readyState!==WebSocket.OPEN&&(b._ws.onopen=null,b._ws.onclose=null,b._ws.close(),b._ws=null,H(new se(E.CONNECT_TIMEOUT)))},5e3),b.once("dispose",function(){H(new se(E.WS_ABORT))})})},oe.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},oe.prototype._sendPing=function($){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new se(E.WS_DISCONNECTED);var b=this._requestId++;return $.requestId=b,this._ws.send(JSON.stringify($)),b},oe.prototype._startHeartBeatCheck=function(){var $=this;this._heartBeatTimer=window.setInterval(function(){$._sendPing({command:"ping",appId:$.appId,cname:$.cname,uid:$.uid+"",sid:$.sid,ts:+new Date,requestId:0})},3e3)},oe.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},oe}(y.default),se=function(te,oe,$){void 0===te&&(te=""),this.code=$,this.data=oe,this.message=te};re.ChannelMediaError=se,(te=E=re.CHANNEL_MEDIA_ERROR||(re.CHANNEL_MEDIA_ERROR={})).CONNECT_FAILED="connect failed",te.CONNECT_TIMEOUT="connect timeout",te.WS_DISCONNECTED="websocket disconnected",te.REQUEST_TIMEOUT="request timeout",te.REQUEST_FAILED="request failed",te.WAIT_STATUS_TIMEOUT="wait status timeout",te.WAIT_STATUS_ERROR="wait status error",te.BAD_STATE="bad state",te.WS_ABORT="ws abort",te.AP_REQUEST_TIMEOUT="AP request timeout",te.AP_JSON_PARSE_ERROR="AP json parse error",te.AP_REQUEST_ERROR="AP request error",te.AP_REQUEST_ABORT="AP request abort",function(te){te[te.SetSdkProfile=0]="SetSdkProfile",te[te.SetSourceChannel=1]="SetSourceChannel",te[te.SetSourceUserId=2]="SetSourceUserId",te[te.SetDestChannel=3]="SetDestChannel",te[te.StartPacketTransfer=4]="StartPacketTransfer",te[te.StopPacketTransfer=5]="StopPacketTransfer",te[te.UpdateDestChannel=6]="UpdateDestChannel",te[te.Reconnect=7]="Reconnect",te[te.SetVideoProfile=8]="SetVideoProfile"}(U||(U={})),function(te){te[te.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",te[te.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",te[te.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",te[te.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",te[te.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",te[te.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",te[te.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",te[te.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",te[te.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",te[te.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(P=re.CHANNEL_MEDIA_RELAY_EVENT||(re.CHANNEL_MEDIA_RELAY_EVENT={})),function(te){te[te.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",te[te.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",te[te.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",te[te.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(G=re.CHANNEL_MEDIA_RELAY_STATE||(re.CHANNEL_MEDIA_RELAY_STATE={})),function(te){te[te.RELAY_OK=0]="RELAY_OK",te[te.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",te[te.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",te[te.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",te[te.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",te[te.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",te[te.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",te[te.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",te[te.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",te[te.INTERNAL_ERROR=9]="INTERNAL_ERROR",te[te.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",te[te.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",te[te.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",te[te.RELAY_NOT_START=13]="RELAY_NOT_START",te[te.OPERATION_ABORT=14]="OPERATION_ABORT"}(V=re.CHANNEL_MEDIA_RELAY_ERROR||(re.CHANNEL_MEDIA_RELAY_ERROR={}))},function(le,re,j){"use strict";j.r(re),j.d(re,"isLiveTranscodingValid",function(){return V}),j.d(re,"generateSessionId",function(){return U}),j.d(re,"audioLevelHelper",function(){return B}),j.d(re,"vsResHack",function(){return P}),j.d(re,"is32Uint",function(){return G}),j.d(re,"safeCall",function(){return m}),j.d(re,"random",function(){return se}),j.d(re,"popBanTip",function(){return $}),j.d(re,"lengthInUtf8Bytes",function(){return te}),j.d(re,"audioTimerLoop",function(){return oe}),j.d(re,"generateId",function(){return E}),j.d(re,"uint8ArrayToBase64",function(){return v}),j.d(re,"base64ToUint8Array",function(){return k});var D=j(11),R=j.n(D),O=j(5),T=j(0),N=j(28),y=j.n(N),I=j(25),h=j(15),m=function(){var b=arguments[0];if("function"==typeof b){var l=Array.prototype.slice.call(arguments,1);b.apply(null,l)}},v=function(b){for(var l="",H=0;H<b.length;H+=1)l+=String.fromCharCode(b[H]);return window.btoa(l)},k=function(b){for(var l=window.atob(b),H=new Uint8Array(new ArrayBuffer(l.length)),_=0;_<l.length;_+=1)H[_]=l.charCodeAt(_);return H},B=function(b){return this.audioContext=Object(I.a)(),this.sourceNode=b.otWebkitAudioSource||this.audioContext.createMediaStreamSource(b),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var l=0,H=0;H<this.timeDomainData.length;H++)l=Math.max(l,Math.abs(this.timeDomainData[H]-128));return l/128}return T.default.warning("can't find analyser in audioLevelHelper"),0},this},w=1e4;function E(){return++w}function U(){return y()().replace(/-/g,"").toUpperCase()}var P=function(b,l,H){try{T.default.debug("start vsResHack",b);var _=document.createElement("video");_.setAttribute("autoplay",""),_.setAttribute("muted",""),_.muted=!0,_.setAttribute("playsinline",""),_.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(_);var u=!1;_.addEventListener("playing",function(q){O.isFireFox()?_.videoWidth&&(u=!0,T.default.debug("[vsResHack] get stream resolution: ","".concat(_.videoWidth," x ").concat(_.videoHeight),b),l(_.videoWidth,_.videoHeight),_.srcObject=null,_.remove()):(u=!0,T.default.debug("[vsResHack] get stream resolution: ","".concat(_.videoWidth," x ").concat(_.videoHeight),b),l(_.videoWidth,_.videoHeight),_.srcObject=null,_.remove())}),Object(h.setSrcObject)(_,b),_.play().catch(function(){}),setTimeout(function(){!u&&_&&(l(_.videoWidth,_.videoHeight),_.srcObject=null,_.remove())},4e3)}catch(q){H(q)}},G=function(b){return"number"==typeof b&&0<=b&&b<=4294967295},V=function(b){var l=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var H in b)if("lowLatency"===H&&"boolean"!=typeof b[H]||"userConfigExtraInfo"===H&&"object"!==R()(b[H])||"transcodingUsers"===H&&!ee(b[H])||!~l.indexOf(H)&&"number"!=typeof b[H])throw new Error("Param ["+H+"] is inValid");return!0},ee=function(b){for(var l=0;l<b.length;l++)for(var H in b[l])if("number"!=typeof b[l][H])throw new Error("Param user["+l+"] - ["+H+"] is inValid");return!0},se=function(b){isNaN(b)&&(b=1e3);var l=+new Date,H=(l=(9301*l+49297)%233280)/233280;return Math.ceil(H*b)},te=function(b){var l=encodeURIComponent(b).match(/%[89ABab]/g);return b.length+(l?l.length:0)},oe=function(b,l){var H=1/l,_=Object(I.a)(),u=_.createGain();u.gain.value=0,u.connect(_.destination);var q=!1;return function g(){var C=_.createOscillator();C.onended=g,C.connect(u),C.start(0),C.stop(_.currentTime+H),b(_.currentTime),q&&(C.onended=function(){})}(),function(){q=!0}},$=function(){if(!document.getElementById("agora-ban-tip")){var b=document.createElement("div");b.id="agora-ban-tip",b.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(b);var l=document.createElement("div");l.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",b.append(l);var H=document.createElement("div");H.style="height: 76px; display: flex; justify-content: center; align-items: center;";var _=document.createElement("span");_.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",_.innerText="!";var u=document.createElement("span");u.innerText="This browser does not support webRTC",H.append(_),H.append(u);var q=document.createElement("div");q.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",q.innerText="OK",l.append(H),l.append(q),q.onclick=function(){var g=document.getElementById("agora-ban-tip");g.parentNode.removeChild(g)}}}},function(le,re){function j(D){return le.exports=j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},j(D)}le.exports=j},function(le,re,j){le.exports=j(62)},function(le,re,j){"use strict";var D=j(12),R=j.n(D),O=j(17),T=j.n(O),N=j(11),y=j.n(N),I=j(30),h=j.n(I),m=j(7),v=j.n(m),k=j(22),B=j(8),w=function(W){W&&W.apply(this,[].slice.call(arguments,1))},E=j(0),U=j(1),P=j(10),G=j(14),V=j(2),ee=function(W){var F=Object(B.b)(W);F.needReconnect=!0,F.isTimeout=!1,F.isInit=!0,F.sendbytes=0,F.recvbytes=0,F.startTime=Date.now(),F.lastMsgTime=null,F.clientId=W.clientId,F.hostIndex=0,F.requestID=0,F.host=W.host instanceof Array?W.host:[W.host],F.getSendBytes=function(){return F.sendbytes},F.getRecvBytes=function(){return F.recvbytes},F.getDuration=function(){return Math.ceil((Date.now()-F.startTime)/1e3)},F.getURL=function(){return F.connection.url},F.reconnect=function(){F.isInit=!0,F.creatConnection()},F.connectNext=function(){F.isInit=!0,++F.hostIndex,E.default.debug("["+F.clientId+"] Gateway length:"+F.host.length+" current index:"+F.hostIndex),F.hostIndex>=F.host.length?F.dispatchEvent(Object(B.d)({type:"recover"})):F.creatConnection()},F.replaceHost=function(de){F.host=de||F.host,F.hostIndex=0,F.creatConnection()},F.creatConnection=function(){F.needReconnect=!0,F.lts=(new Date).getTime(),F.connection=new WebSocket("wss://"+F.host[F.hostIndex]),F.connection.binaryType="arraybuffer",F.turnConfig={};var de=W.proxyServerType;if(F.connection.url&&3!==de&&4!==de&&5!==de){var ce=F.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),Te=F.host[F.hostIndex].split(":"),Me=F.connection.url.match(/h=([^:]+)&p=(\d+)/);ce?(F.turnConfig.url=ce[1],Object(V.getParameter)("TURN_ENABLE_TCP")&&(F.turnConfig.tcpport=parseInt(ce[2])+30),Object(V.getParameter)("TURN_ENABLE_UDP")&&(F.turnConfig.udpport=parseInt(ce[2])+30)):Me?(F.turnConfig.url=Me[1],Object(V.getParameter)("TURN_ENABLE_TCP")&&(F.turnConfig.tcpport=parseInt(Me[2])+30),Object(V.getParameter)("TURN_ENABLE_UDP")&&(F.turnConfig.udpport=parseInt(Me[2])+30)):Te&&(F.turnConfig.url=Te[0],Object(V.getParameter)("TURN_ENABLE_TCP")&&(F.turnConfig.tcpport=parseInt(Te[1])+30),Object(V.getParameter)("TURN_ENABLE_UDP")&&(F.turnConfig.udpport=parseInt(Te[1])+30))}F.connection.onopen=function(Oe){F.needReconnect=!0,F.isTimeout=!1,F.isInit=!1,F.sendbytes=0,F.recvbytes=0,F.startTime=Date.now(),Object(G.resetHTTPByetsCount)(),clearTimeout(F.timeoutCheck),F.dispatchEvent(Object(B.d)({type:"onopen",event:Oe,socket:F}))},F.connection.onmessage=function(Oe){if(Oe.data instanceof ArrayBuffer)F.dispatchEvent({type:"onBinaryData",data:Oe.data});else{F.recvbytes+=Object(P.lengthInUtf8Bytes)(Oe.data);var Ae=JSON.parse(Oe.data);F.lastMsgTime=Date.now(),Ae.hasOwnProperty("_id")?F.dispatchEvent(Object(B.d)({type:Ae._id,msg:Ae})):Ae.hasOwnProperty("_type")&&F.dispatchSocketEvent(Object(B.d)({type:Ae._type,msg:Ae._message}))}},F.connection.onclose=function(Oe){F.needReconnect?F.isTimeout||F.isInit?(E.default.debug("["+F.clientId+"] websockect connect timeout"),U.report.joinGateway(W.sid,{lts:F.lts,succ:!1,ec:"timeout",addr:F.connection.url}),F.connectNext()):(F.dispatchEvent(Object(B.d)({type:"disconnect",event:Oe})),F.requests&&F.requests instanceof Array&&(F.requests.map(function(Ae){Ae.callback("REQUEST_ABORT")}),F.requests=[])):(E.default.debug("["+F.clientId+"] websockect closeed"),w(W.onFailure,Oe),clearTimeout(F.timeoutCheck),F.dispatchEvent(Object(B.d)({type:"close",event:Oe})),F.connection.onopen=void 0,F.connection.onclose=void 0,F.connection.onerror=void 0,F.connection.onmessage=void 0,F.connection=void 0)},F.connection.onerror=function(Oe){},setTimeout(function(){F.connection&&F.connection.readyState!=WebSocket.OPEN&&(F.isTimeout=!0,F.connection.close())},5e3)},F.creatConnection(),F.sendMessage=function(de,ce){if(F.connection&&F.connection.readyState==WebSocket.OPEN){var Te=JSON.stringify(de);F.sendbytes+=Object(P.lengthInUtf8Bytes)(Te),F.connection.send(Te)}else ce({error:"Gateway not connected"})},F.disconnect=function(){F.needReconnect=!0,F.connection.close()},F.close=function(){F.needReconnect=!1,F.connection.onclose=void 0,F.connection.close(),clearInterval(F.requestTimer),F.requests&&F.requests instanceof Array&&(F.requests.map(function(de){de.callback("REQUEST_ABORT")}),F.requests=[])},F.sendSignalCommand=function(de,ce){de._id="_request_"+F.requestID,F.requestID+=1,"publish_stats"!==de._type&&"subscribe_stats"!==de._type&&"publish_stats_low"!==de._type&&F.on(de._id,function(Te){Te.msg&&ce&&ce(Te.msg._result,Te.msg.message),delete F.dispatcher.eventListeners[de._id]}),F.sendMessage(de,function(Te){Te.reason="NOT_CONNECTED",ce&&ce(Te.reason,Te)})},F.requests=[];var Y=function(de){var ce=F.requests.findIndex(function(Me){return Me.id===de.type});if(ce>=0)var Te=F.requests.splice(ce,1)[0];Te&&F.dispatcher.eventListeners[de.type]?(delete F.dispatcher.eventListeners[de.type],de.msg&&Te.callback&&Te.callback(de.msg._result,de.msg._message)):E.default.warning("Detached Response",de.type,de.msg)},ve=function(de){var ce=this,Te=F.requests.findIndex(function(Me){return Me.id===ce.id});Te>=0&&(ce=F.requests.splice(Te,1)[0]),ce&&F.dispatcher.eventListeners[de.type]?(delete F.dispatcher.eventListeners[de.type],de.reason="NOT_CONNECTED",ce.callback&&ce.callback(de.reason,de)):E.default.warning("handleSendError",ce)};return F.sendRequest=function(de,ce){de=v()({_id:"_request_"+F.requestID},de),F.requestID+=1;var Te={id:de._id,timeoutCounter:0,stalledAt:Date.now(),message:de,callback:ce};F.requests.push(Te),F.addEventListener(de._id,Y),F.sendMessage(de,ve.bind(Te))},F.checkRequestTimeout=function(){for(var de=Math.ceil(Object(V.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(V.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),ce=F.requests.length-1;ce>=0;ce--){var Te=F.requests[ce];Te.timeoutCounter>=de?(F.requests.splice(ce,1),E.default.error("Request Timeout",Te.timeoutCounter,Te.message),Te.callback&&Te.callback("TIMEOUT")):Te.timeoutCounter++}},clearInterval(F.requestTimer),F.requestTimer=setInterval(F.checkRequestTimeout,Object(V.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),F.sendReport=function(de){F.sendMessage(de,function(){})},F},te=j(23),oe=j(4),$=j(20),b=j(5),l={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"tryNext",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},H={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},_={};for(var u in H){var q=H[u];_[q]&&E.default.error("Key Conflict: ".concat(q,": ").concat(H[q],"| ").concat(u)),_[q]=u}var g=function(W){return H[W]||W},C=function(W){return _[W]||W},L=j(9),K=j.n(L),ie=j(51),he=function W(F){var p,ne,Y=!1,ve=function(p){return{_type:"control",_message:p}},de=function(p,ne){var fe={};return Object.keys(ne).forEach(function(me){Object(V.getParameter)("STATS_FILTER")[me]||(fe[g(me)]=ne[me])}),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:p,stats:fe}}},ce=function(p){return{_type:"publish",_message:p}},Te=function(p,ne){var fe={};return Object.keys(ne).forEach(function(me){Object(V.getParameter)("STATS_FILTER")[me]||(fe[g(me)]=ne[me])}),{_type:"subscribe_stats",_message:{stream_id:p,stats:fe}}},Me=W.DISCONNECTED,Oe=W.CONNECTING,Ae=W.CONNECTED,Le=W.DISCONNECTING,We=Me,f=Object(B.b)(F);Object.defineProperty(f,"state",{set:function(p){var ne=We;We=p,Object($._setClientConnectionStateRecord)(f.clientId,p),p!==W.CONNECTED&&p!==W.DISCONNECTING&&(f.hasJoined=!1),ne!==p&&f.dispatchEvent({type:"connection-state-change",prevState:W.connetionStateMap[ne],curState:W.connetionStateMap[p]})},get:function(){return We}}),f.socket=void 0,f.state=Me,f.mode=F.mode,f.role=F.role,f.codec=F.codec,f.config={},f.timers={},f.timer_counter={},f.localStreams={},f.remoteStreams={},f.remoteMuteState={},f.attemps=1,f.p2p_attemps=1,f.audioLevel={},f.activeSpeaker=void 0,f.reconnectMode="tryNext",f.rejoinAttempt=0,f.hasChangeBGPAddress=!1,f.traffic_stats={},f.clientId=F.clientId,f.pingpongCounter=0,f.hasInvokeLeave=!1,f.p2ps=new Map,f.liveStreams=new Map,f.injectLiveStreams=new Map,f.remoteStreamsInChannel=new Set,f.subscribeRequestId=new Map,f.publishRequestId=0,f.hasJoined=!1,f.isFirstSuccess=!0,f.peerPublishDurationMap=new Map,ne=w,(p=f).makeRequest=function(fe,me,pe){if(void 0===p.socket)return E.default.debug("[".concat(p.clientId,"] No socket available")),void ne(pe,oe.default.INVALID_OPERATION);try{p.socket.emitRequest(fe,function(J,_e){var Se;"success"===J?"function"==typeof me&&me(_e):"function"==typeof pe&&(Se=_e&&_e.error_code&&oe.GatewayErrorCode[_e.error_code]?oe.GatewayErrorCode[_e.error_code]:_e&&_e.error_str?_e.error_str:_e&&_e.error_code?"UNKNOW_ERROR_".concat(_e.error_code):J,pe(Se,_e))})}catch(J){E.default.debug("[".concat(p.clientId,"] Socket emit message failed ").concat(JSON.stringify(fe))),E.default.debug("[".concat(p.clientId,"] "),J),ne(pe,oe.default.SOCKET_ERROR)}},p.makeReport=function(fe){void 0===p.socket&&E.default.debug("[".concat(p.clientId,"] No socket available"));try{p.socket.emitReport(fe)}catch(me){E.default.debug("[".concat(p.clientId,"] Socket emit report failed ").concat(JSON.stringify(fe)))}},f.inChannelInfo={joinAt:null,duration:0},f._sendMessage=function(p,ne){switch(p){case"SubscribeStats":f.makeReport(Te.apply(void 0,h()(ne)));break;case"SubscribeRelatedStats":f.makeReport(de.apply(void 0,h()(ne)))}};var ye=w;f.p2pCounter=Object(P.random)(1e5),f.generateP2PId=function(){return++f.p2pCounter},f.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},f.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},f.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},f.configPublisher=function(p){f.config=p},f.getGatewayInfo=function(p,ne){f.makeRequest({_type:"gateway_info"},p,ne)},f.setClientRole=function(p,ne){E.default.debug("[".concat(f.clientId,"] setClientRole to ").concat(p));var fe=U.report.reportApiInvoke(f.joinInfo.sid,{name:"_setClientRole",callback:ne});f.makeRequest({_type:"set_client_role",_message:{role:p}},function(){f.role=p,f.dispatchEvent({type:"client-role-changed",role:p}),fe&&fe(null,{role:p})},function(me,pe){if(pe&&pe.code&&(me=oe.GatewayErrorCode[pe.code]||"UNKNOW_ERROR_"+pe.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===me)return fe&&fe(null);E.default.error("set Client role error to "+p+": "+me),fe&&fe(me)})},f.join=function(p,ne,fe,me){f.hasInvokeLeave=!1,p.useProxyServer&&(f.hasChangeBGPAddress=!0);var pe=(new Date).getTime(),J=p.uid;if(f.inChannelInfo.joinAt&&(f.inChannelInfo.duration+=pe-f.inChannelInfo.joinAt),f.inChannelInfo.joinAt=pe,f.state!==Oe)return E.default.error("[".concat(f.clientId,"] GatewayClient.join Failed: state "),f.state),me&&me(oe.default.INVALID_OPERATION),void U.report.joinGateway(p.sid,{lts:pe,succ:!1,ec:oe.default.INVALID_OPERATION,addr:null});if(null!=J&&parseInt(J)!==J)return E.default.error("[".concat(f.clientId,"] Input uid is invalid")),f.state=Me,me&&me(oe.default.INVALID_PARAMETER),void U.report.joinGateway(p.sid,{lts:pe,succ:!1,ec:oe.default.INVALID_PARAMETER,addr:null});var _e=Q.register(f,{uid:J,cname:p&&p.cname});if(_e)return f.state=Me,me&&me(_e),void U.report.joinGateway(p.sid,{lts:pe,succ:!1,ec:_e,addr:null});f.joinInfo=v()({},p),f.uid=J,f.key=ne,f.pingpongCounter=0,Ve(p,function(Se){if(p.useLocalAccessPoint)try{var Re=f.socket.signal.connection.url.match(/wss\:\/\/([^:]+):(\d+)/)[1];Object(V.setParameter)("EVENT_REPORT_DOMAIN",Re),Object(V.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",Re),Object(V.setParameter)("LOG_UPLOAD_SERVER","".concat(Re,":6444"))}catch(Ce){E.default.debug("[".concat(f.clientId,"] LocalAccessPoint error: ").concat(Ce))}if(f.state===Le||f.state===Me)return me&&me("LEAVE_BEFORE_JOIN_SUCCESS");f.state=Ae,E.default.debug("[".concat(f.clientId,"] Connected to gateway server")),clearInterval(f.pingTimer),f.pingTimer=setInterval(function(){var Ce=Object(V.getParameter)("PING_PONG_TIME_OUT");if(++f.pingpongCounter>=Ce){var Be=Date.now();f.socket&&E.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(Be-f.socket.getLastMsgTime(),"ms")),f.socket&&f.socket.getLastMsgTime()&&Be-f.socket.getLastMsgTime()>Object(V.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(f.pingpongCounter=0,f.socket.close(),f.socket.dispatchEvent(Object(B.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var qe=Date.now();f.makeRequest({_type:"ping"},function(){f.pingpongCounter=0;var He=Date.now()-qe;Object(V.getParameter)("REPORT_STATS")&&f.makeRequest({_type:"ping_back",_message:{pingpongElapse:He}})},function(He,tt){"TIMEOUT"!==He&&(E.default.error("Ping Error ".concat(He," ").concat(JSON.stringify(tt))),tt&&tt.error_code&&f.socket&&f.socket.signal&&f.socket.signal.connection&&f.socket.signal.connection.readyState===WebSocket.OPEN&&(E.default.info("Disconnecting websocket connection"),f.socket.signal.connection.close()))})},3e3),function(Ce,Be){var qe=Ce.role,He=v()({},f.joinInfo.apResponse),tt={session_id:f.joinInfo.sid,app_id:F.appId,channel_key:f.key,channel_name:f.joinInfo.cname,sdk_version:V.VERSION,browser:navigator.userAgent,process_id:Object(U.getProcessId)(),mode:f.mode,codec:f.codec,role:qe,has_changed_gateway:Object(V.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||f.hasChangeBGPAddress,ap_response:He,optionalInfo:f.joinInfo.optionalInfo,extend:Object(V.getParameter)("JOIN_EXTEND"),details:{}};if(f.joinInfo.hasOwnProperty("stringUid")&&(tt.string_uid=f.joinInfo.stringUid),f.socket&&f.socket.signal&&f.socket.signal&&(He.addresses&&He.addresses[f.socket.signal.hostIndex]&&(tt.ap_response.ticket=He.addresses[f.socket.signal.hostIndex].ticket,delete He.addresses),Object(V.getParameter)("SET_DEFAULT_TURNSERVER")&&f.socket.signal.turnConfig)){var Ye={username:f.joinInfo.uid.toString(),credential:f.joinInfo.token,forceturn:Object(V.getParameter)("FORCE_TURN")};Ye.url=f.socket.signal.turnConfig.url,f.socket.signal.turnConfig.tcpport&&(Ye.tcpport=""+f.socket.signal.turnConfig.tcpport),f.socket.signal.turnConfig.udpport&&(Ye.udpport=""+f.socket.signal.turnConfig.udpport),f.joinInfo.turnServers.find(function(St){if(St.url===Ye.url)return!0})||f.joinInfo.turnServers.push(Ye)}3===f.joinInfo.proxyServerType&&(tt.plugin="web_cloud_proxy",tt.details.cservice_map="1"),f.joinInfo.aesmode&&f.joinInfo.aespassword?(tt.aes_mode=f.joinInfo.aesmode,tt.aes_encrypt=!0,f.joinInfo.aes_salt&&(tt.aes_salt=f.joinInfo.aes_salt),Object(ie.encryptRSA)(f.joinInfo.aespassword).then(function(St){tt.aes_secret=St,f.dispatchEvent({type:"join-message-hook",joinMessage:tt}),Be(null,{_type:"join",_message:tt})}).catch(function(St){E.default.error("[".concat(f.clientId,"] encrypt password failed "),St),Be("ENCRYPT_PASSWORD_FAILED")})):(f.dispatchEvent({type:"join-message-hook",joinMessage:tt}),Be(null,{_type:"join",_message:tt}))}({role:f.role},function(Ce,Be){if(Ce)return me&&me(Ce);f.makeRequest(Be,function(qe){if(U.report.joinGateway(p.sid,{lts:pe,succ:!0,ec:null,vid:p.vid,uid:p.uid,addr:f.socket.getURL(),firstSuccess:f.isFirstSuccess}),f.joinSuccessLts=Date.now(),f.isFirstSuccess=!1,f.rejoinAttempt=0,f.hasJoined=!0,fe&&fe(qe.uid),!0===qe.return_vosip||!0===Object(V.getParameter)("ENABLE_LIVE_SERVER_LIST")){var He=null;try{He=f.socket.signal.connection.url}catch(tt){E.default.debug("[".concat(f.clientId,"] Can not get gateway ip: ").concat(tt))}He?Object(V.setParameter)("LIVE_SERVER_LIST",[He]):Object(V.setParameter)("LIVE_SERVER_LIST",[])}f.dispatchEvent({type:"join"}),clearInterval(f.timers.trafficStats),f.timers.trafficStats=setInterval(function(){f.makeRequest({_type:"traffic_stats"},function(tt){var Ye={};for(var St in tt)Ye[C(St)]=tt[St];if(Ye.peer_delay&&Ye.peer_delay.length){var ot=[];Ye.peer_delay.forEach(function(jn){var lt={};for(var Bi in jn)lt[C(Bi)]=jn[Bi];ot.push(lt)}),Ye.peer_delay=ot}f.traffic_stats=Ye,f.traffic_stats.timestamp=Date.now();var rt=f.localStreams[J]||f.localStreams[f.joinInfo.stringUid];rt&&(rt.traffic_stats={access_delay:Ye.access_delay}),Ye.peer_delay&&Ye.peer_delay.forEach(function(jn){var lt=f.remoteStreams[jn.peer_uid];lt&&(lt.traffic_stats={access_delay:Ye.access_delay,e2e_delay:jn.e2e_delay,audio_delay:jn.audio_delay,video_delay:jn.video_delay})}),f.dispatchEvent({type:"after-getTrafficStats",trafficStats:Ye})})},3e3)},function(qe,He){if(E.default.error("[".concat(f.clientId,"] User join failed [").concat(qe,"]")),"ERR_JOIN_BY_MULTI_IP"===qe){try{U.report.joinGateway(p.sid,{lts:pe,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:f.socket.getURL()})}catch(tt){}return f.dispatchEvent({type:"onMultiIP",option:He.option})}l[qe]&&f.rejoinAttempt<4?f._doWithAction(l[qe],fe,me):me&&me(qe),U.report.joinGateway(p.sid,{lts:pe,succ:!1,ec:qe,addr:f.socket&&f.socket.getURL()})})})},function(Se){E.default.error("[".concat(f.clientId,"] User join failed [").concat(Se,"]")),me&&me(Se),U.report.joinGateway(p.sid,{lts:pe,succ:!1,ec:Se,addr:f.socket.getURL()})}),this.remoteMuteState={},f.resetAudioVolumeIndication()},f.leave=function(p,ne){var fe=Q.unregister(f);switch(fe&&E.default.debug("[".concat(f.clientId,"] "),fe),f.p2ps.clear(),f.state){case Me:return E.default.debug("[".concat(f.clientId,"] Client Already in DISCONNECTED status")),void ye(p);case Le:return E.default.debug("[".concat(f.clientId,"] Client Already in DISCONNECTING status")),void ye(ne,oe.default.INVALID_OPERATION);case Oe:return f.socket&&f.socket.close(),f.socket=void 0,E.default.info("[".concat(f.clientId,"] Client connecting, Leave channel success")),f.state=Me,p&&p()}for(var me in f.state=Le,f.channelMediaConfig&&(f.channelMediaRelayController&&f.channelMediaRelayController.dispose(),f.channelMediaRelayController=null),clearInterval(f.pingTimer),f.timers)f.timers.hasOwnProperty(me)&&clearInterval(f.timers[me]);for(var me in f.inChannelInfo.joinAt&&(f.inChannelInfo.duration+=Date.now()-f.inChannelInfo.joinAt,f.inChannelInfo.joinAt=null),f.hasJoined?f.makeRequest({_type:"leave"},function(_e){f.socket.close(),f.socket=void 0,E.default.info("[".concat(f.clientId,"] Leave channel success")),f.state=Me,p&&p(_e)},function(_e){"TIMEOUT"!==_e&&"REQUEST_ABORT"!==_e&&(E.default.error("[".concat(f.clientId,"] Leave Channel Failed"),_e),f.state=Ae,ne&&ne(_e))}):(f.socket&&(f.socket.close(),f.socket=void 0),E.default.info("[".concat(f.clientId,"] Leave channel before joined")),f.state=Me,p&&p()),f.localStreams)if(f.localStreams.hasOwnProperty(me)){var pe=f.localStreams[me];delete f.localStreams[me],void 0!==pe.pc&&(pe.pc.close(),pe.pc=void 0)}ue()},f.publish=function(p,ne,fe,me){var pe=(new Date).getTime(),J=!1;if(p.publishLTS=pe,"object"!==y()(p)||null===p)return E.default.error("[".concat(f.clientId,"] Invalid local stream")),me&&me(oe.default.INVALID_LOCAL_STREAM),void U.report.publish(f.joinInfo.sid,{lts:pe,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:oe.default.INVALID_LOCAL_STREAM});if(!p.stream&&void 0===p.url)return E.default.error("[".concat(f.clientId,"] Invalid local media stream")),me&&me(oe.default.INVALID_LOCAL_STREAM),void U.report.publish(f.joinInfo.sid,{lts:pe,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:oe.default.INVALID_LOCAL_STREAM});if(f.state!==Ae)return E.default.error("[".concat(f.clientId,"] User is not in the session")),me&&me(oe.default.INVALID_OPERATION),void U.report.publish(f.joinInfo.sid,{lts:pe,succ:!1,audio:p.hasAudio(),video:p.hasVideo(),screenshare:p.hasScreen(),audioName:p.hasAudio()&&p.audioName,videoName:p.hasVideo()&&p.videoName,screenName:p.hasScreen()&&p.screenName,ec:oe.default.INVALID_OPERATION});var _e=p.getAttributes()||{};if(p.local&&void 0===f.localStreams[p.getId()]&&(p.hasAudio()||p.hasVideo()||p.hasScreen())){var Se=f.generateP2PId();if(f.p2ps.set(Se,p),p.p2pId=Se,void 0!==p.url)Ke(ce({state:"url",audio:p.hasAudio(),video:p.hasVideo(),attributes:p.getAttributes()}),function(Ce,Be){"success"===Ce?(p.getUserId()!==Be&&p.setUserId(Be),f.localStreams[Be]=p,p.onClose=function(){f.unpublish(p)}):E.default.error("[".concat(f.clientId,"] Publish local stream failed"),Ce)});else{f.localStreams[p.getId()]=p,p.connectionSpec={callback:function(Ce){Ce||me&&me("CANNOT_GET_OFFER"),"motion"===p.optimizationMode&&p.pc.setRtpSenderParameters("maintain-framerate"),"detail"===p.optimizationMode&&p.pc.setRtpSenderParameters("maintain-resolution"),f.makeRequest(ce({state:"offer",stream_type:1==ne.streamType?"low":"high",p2p_id:Se,sdp:Ce,audio:p.audio||p.screenAudio,video:p.screen||p.video,screen:p.screen,attributes:p.getAttributes(),dtx:p.DTX,hq:p.highQuality,lq:p.lowQuality,stereo:p.stereo,speech:p.speech,codec:f.codec,extend:Object(V.getParameter)("PUB_EXTEND")}),function(Be){p.getUserId()!==Be.uid&&p.setUserId(Be.uid),E.default.info("[".concat(f.clientId,"] Local stream published with uid"),Be.uid),p.onClose=function(){f.unpublish(p)},p._onAudioUnmute=function(){f.makeReport(ve({action:"unmute_local_audio",stream_id:p.getId()}))},p._onVideoUnmute=function(){f.makeReport(ve({action:"unmute_local_video",stream_id:p.getId()}))},p._onAudioMute=function(){f.makeReport(ve({action:"mute_local_audio",stream_id:p.getId()}))},p._onVideoMute=function(){f.makeReport(ve({action:"mute_local_video",stream_id:p.getId()}))},p.getId()===p.getUserId()&&(p.isAudioOn()||p.hasAudio()&&(E.default.debug("[".concat(f.clientId,"] local stream audio mute")),p._onAudioMute()),p.isVideoOn()||(p.hasVideo()||p.hasScreen())&&(E.default.debug("[".concat(f.clientId,"] local stream video mute")),p._onVideoMute())),p.pc.oniceconnectionstatechange=function(qe){if("failed"===qe){if(null!=f.timers[p.getId()]&&(clearInterval(f.timers[p.getId()]),clearInterval(f.timers[p.getId()]+"_RelatedStats")),E.default.error("[".concat(f.clientId,"] Publisher connection is lost -- streamId: ").concat(p.getId(),", p2pId: ").concat(Se)),f.p2ps.delete(Se),E.default.debug("[".concat(f.clientId,"] publish p2p failed: "),f.p2ps),!J)return J=!0,U.report.publish(f.joinInfo.sid,{lts:pe,succ:!1,audio:p.hasAudio(),video:p.hasVideo(),screenshare:p.hasScreen(),audioName:p.hasAudio()&&p.audioName,videoName:p.hasVideo()&&p.videoName,screenName:p.hasScreen()&&p.screenName,ec:oe.default.PEERCONNECTION_FAILED,publishRequestid:f.publishRequestId||0,p2pid:Se}),f.dispatchEvent(Object(B.a)({type:"pubP2PLost",stream:p})),me&&me(oe.default.PEERCONNECTION_FAILED);f.dispatchEvent(Object(B.a)({type:"pubP2PLost",stream:p}))}else if("connected"===qe&&(E.default.debug("[".concat(f.clientId,"] publish p2p connected: "),f.p2ps),p.getId()===p.getUserId()&&(p._isAudioMuted()?f.makeReport(ve({action:"mute_local_audio",stream_id:p.getId()})):f.makeReport(ve({action:"unmute_local_audio",stream_id:p.getId()})),p._isVideoMuted()?f.makeReport(ve({action:"mute_local_video",stream_id:p.getId()})):f.makeReport(ve({action:"unmute_local_video",stream_id:p.getId()}))),!J))return J=!0,U.report.publish(f.joinInfo.sid,{lts:pe,succ:!0,audio:p.hasAudio(),video:p.hasVideo(),screenshare:p.hasScreen(),audioName:p.hasAudio()&&p.audioName,videoName:p.hasVideo()&&p.videoName,screenName:p.hasScreen()&&p.screenName,ec:null,publishRequestid:f.publishRequestId||0,p2pid:Se}),fe&&fe()},p.pc.processSignalingMessage(Be.sdp)},function(Be,qe){E.default.error("Publish Failed: ".concat(Be)),U.report.publish(f.joinInfo.sid,{lts:pe,succ:!1,audio:p.hasAudio(),video:p.hasVideo(),screenshare:p.hasScreen(),audioName:p.hasAudio()&&p.audioName,videoName:p.hasVideo()&&p.videoName,screenName:p.hasScreen()&&p.screenName,ec:Be,publishRequestid:f.publishRequestId||0,p2pid:Se}),"TIMEOUT"!=Be&&(f.processPublishFailure(p),me&&me(Be))})},audio:p.hasAudio(),video:p.hasVideo(),screen:p.hasScreen(),optimizationMode:p.optimizationMode,isSubscriber:!1,stunServerUrl:f.stunServerUrl,turnServers:f.joinInfo.turnServers,maxAudioBW:_e.maxAudioBW,minVideoBW:_e.minVideoBW,maxVideoBW:_e.maxVideoBW,mode:f.mode,codec:f.codec,isVideoMute:p.userMuteVideo||p.peerMuteVideo,isAudioMute:p.userMuteAudio||p.peerMuteAudio,maxFrameRate:p.attributes.maxFrameRate,agoraStream:p,clientId:f.clientId,isCloudProxy3:3===f.joinInfo.proxyServerType,onNoIceCandidate:function(){f.dispatchEvent({type:"no_ice_candidate",stream:p})}},p.pc=Object(te.a)(p.connectionSpec),p.pc.addStream(p.stream),E.default.debug("[".concat(f.clientId,"] PeerConnection add stream :"),p.stream),p.pc.onnegotiationneeded=function(Ce){"motion"===p.optimizationMode&&p.pc.setRtpSenderParameters("maintain-framerate"),"detail"===p.optimizationMode&&p.pc.setRtpSenderParameters("maintain-resolution");var Be={state:"negotiation",stream_type:1===ne.streamType?"low":"high",p2p_id:Se,sdp:Ce};f.makeRequest(ce(Be),function(qe){E.default.debug("Negotating Stream ".concat(p.getId())),p.pc.processSignalingMessage(qe.sdp)},function(qe,He){E.default.error("Negotiation failed ".concat(qe),He,Be)})},clearInterval(f.timers[p.getId()]),f.timers[p.getId()]=setInterval(function(){if(Object(V.getParameter)("REPORT_STATS")){var Ce=0;p&&p.pc&&p.pc.getStats&&p.pc.getStatsRate(function(Be){Be.forEach(function(qe){if(qe&&qe.id&&!(/_recv$/.test(qe.id)||/^time$/.test(qe.id)||~qe.type.toLowerCase().indexOf("inbound"))&&p.getUserId()){if(-1===qe.id.indexOf("outbound_rtp")&&-1===qe.id.indexOf("OutboundRTP")&&-1===qe.type.toLowerCase().indexOf("outbound")||"video"!==qe.mediaType||(qe.googFrameWidthSent=p.videoWidth+"",qe.googFrameHeightSent=p.videoHeight+""),"video"===qe.mediaType)try{var He=p.stream.getVideoTracks()[0];qe.A_vstd=He.enabled?"0":"1"}catch(St){}if("audio"===qe.mediaType)try{var tt=p.stream.getAudioTracks()[0];qe.A_astd=tt.enabled?"0":"1"}catch(St){}if(p.getId()==p.getUserId()){var Ye=200*Ce;Ce++,setTimeout(function(){var ot,Qt,St=f.socket&&f.socket.getLastMsgTime()&&Date.now()-f.socket.getLastMsgTime();St>Object(V.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(St)):f.makeReport((ot=qe,Qt={},Object.keys(ot).forEach(function(rt){Object(V.getParameter)("STATS_FILTER")[rt]||(Qt[g(rt)]=ot[rt])}),{_type:"publish_stats",_message:{stream_type:"high",stats:Qt}}))},Ye)}else Ye=200*Ce,Ce++,setTimeout(function(){var ot,Qt,St=f.socket&&f.socket.getLastMsgTime()&&Date.now()-f.socket.getLastMsgTime();St>Object(V.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(St)):f.makeReport((ot=qe,Qt={},Object.keys(ot).forEach(function(rt){Object(V.getParameter)("STATS_FILTER")[rt]||(Qt[g(rt)]=ot[rt])}),{_type:"publish_stats",_message:{stream_type:"low",stats:Qt}}))},Ye)}})})}},3e3);var Re=function(){Object(V.getParameter)("REPORT_STATS")&&p&&p.pc&&p.pc.getVideoRelatedStats&&p.pc.getVideoRelatedStats(function(Ce){var Be,qe,tt,Ye,He=f.socket&&f.socket.getLastMsgTime()&&Date.now()-f.socket.getLastMsgTime();He>Object(V.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(He)):p.getId()===p.getUserId()?f.makeReport((Be=Ce,qe={},Object.keys(Be).forEach(function(tt){Object(V.getParameter)("STATS_FILTER")[tt]||(qe[g(tt)]=Be[tt])}),{_type:"publish_related_stats",_message:{stream_type:"high",stats:qe}})):f.makeReport((tt=Ce,Ye={},Object.keys(tt).forEach(function(St){Object(V.getParameter)("STATS_FILTER")[St]||(Ye[g(St)]=tt[St])}),{_type:"publish_related_stats",_message:{stream_type:"low",stats:Ye}}))})};Re(),clearInterval(f.timers[p.getId()+"_RelatedStats"]),f.timers[p.getId()+"_RelatedStats"]=setInterval(Re,1e3)}}},f.unpublish=function(p,ne,fe,me){if("object"!==y()(p)||null===p)return E.default.error("[".concat(f.clientId,"] Invalid local stream")),void ye(me,oe.default.INVALID_LOCAL_STREAM);if(f.state!==Ae)return E.default.error("[".concat(f.clientId,"] User not in the session")),void ye(me,oe.default.INVALID_OPERATION);if(null!=f.timers[p.getId()]&&(clearInterval(f.timers[p.getId()]),clearInterval(f.timers[p.getId()+"_RelatedStats"])),void 0!==f.socket)if(p.local&&void 0!==f.localStreams[p.getId()]){delete f.localStreams[p.getId()];var pe={stream_id:p.getUserId(),stream_type:1===ne.streamType?"low":"high"};f.makeRequest({_type:"unpublish",_message:pe}),(p.hasAudio()||p.hasVideo()||p.hasScreen())&&void 0===p.url&&void 0!==p.pc&&(p.pc.close(),p.pc=void 0),p.onClose=void 0,p._onAudioMute=void 0,p._onAudioUnute=void 0,p._onVideoMute=void 0,p._onVideoUnmute=void 0,f.p2ps.delete(p.p2pId),fe&&fe()}else E.default.error("[".concat(f.clientId,"] Invalid local stream")),ye(me,oe.default.INVALID_LOCAL_STREAM);else E.default.error("[".concat(f.clientId,"] User not in the session")),ye(me,oe.default.INVALID_OPERATION)},f.subscribe=function(p,ne,fe){var me=(new Date).getTime();p.subscribeLTS=me;var pe=!1;if(E.default.info("[".concat(f.clientId,"] Gatewayclient ").concat(f.uid," Subscribe ").concat(p.getId(),": ").concat(JSON.stringify(p.subscribeOptions))),"object"!==y()(p)||null===p)return E.default.error("[".concat(f.clientId,"] Invalid remote stream")),fe&&fe(oe.default.INVALID_REMOTE_STREAM),void U.report.subscribe(f.joinInfo.sid,{lts:me,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:oe.default.INVALID_REMOTE_STREAM});if(f.state!==Ae&&(E.default.error("[".concat(f.clientId,"] User is not in the session")),!pe))return pe=!0,U.report.subscribe(f.joinInfo.sid,{lts:me,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:oe.default.INVALID_OPERATION}),fe&&fe(oe.default.INVALID_OPERATION);if(!p.local&&f.remoteStreams.hasOwnProperty(p.getId()))if(p.hasAudio()||p.hasVideo()||p.hasScreen()){var J=f.generateP2PId();f.p2ps.set(J,p),p.p2pId=J,p.pc=Object(te.a)({callback:function(_e){_e||fe&&fe("CANNOT_GET_OFFER");var Se={stream_id:p.getId(),audio:!p.subscribeOptions||p.subscribeOptions.audio,video:!p.subscribeOptions||p.subscribeOptions.video,codec:f.codec,p2p_id:J,sdp:_e,tcc:Object(V.getParameter)("SUBSCRIBE_TCC"),extend:Object(V.getParameter)("SUB_EXTEND")};f.makeRequest({_type:"subscribe",_message:Se},function(Re){p.pc.processSignalingMessage(Re.sdp)},function(Re,Ce){E.default.error("[".concat(f.clientId,"] Subscribe remote stream Failed: ").concat(Re,", closing stream "),p.getId(),Ce),U.report.subscribe(f.joinInfo.sid,{lts:me,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:Re}),"TIMEOUT"!=Re&&(f.processSubscribeFailure(p),fe&&fe(Re))})},nop2p:!0,audio:!0,video:!0,screen:p.hasScreen(),isSubscriber:!0,stunServerUrl:f.stunServerUrl,turnServers:f.joinInfo.turnServers,isVideoMute:p.userMuteVideo,isAudioMute:p.userMuteAudio,uid:p.getId(),agoraStream:p,clientId:f.clientId}),p.pc.onaddstream=function(_e,Se){if(p._onAudioUnmute=function(){f.makeReport(ve({action:"unmute_remote_audio",stream_id:p.getId()}),function(){},function(){})},p._onAudioMute=function(){f.makeReport(ve({action:"mute_remote_audio",stream_id:p.getId()}),function(){},function(){})},p._onVideoUnmute=function(){f.makeReport(ve({action:"unmute_remote_video",stream_id:p.getId()}),function(){},function(){})},p._onVideoMute=function(){f.makeReport(ve({action:"mute_remote_video",stream_id:p.getId()}),function(){},function(){})},"ontrack"===Se&&"video"===_e.track.kind||"onaddstream"===Se){E.default.info("[".concat(f.clientId,"] Remote stream subscribed with uid "),p.getId());var Re=f.remoteStreams[p.getId()];if(f.remoteStreams[p.getId()].stream="onaddstream"===Se?_e.stream:_e.streams[0],f.remoteStreams[p.getId()].hasVideo()){if(Object(b.isFireFox)()||Object(b.isSafari)()){var Ce=f.remoteStreams[p.getId()].stream;Object(P.vsResHack)(Ce,function(He,tt){p.videoWidth=He,p.videoHeight=tt},function(He){return E.default.warning("[".concat(f.clientId,"] vsResHack failed: ")+He)})}}else{var Be=f.remoteStreams[p.getId()];Be.peerMuteVideo=!0,f._adjustPCMuteStatus(Be)}Re&&Re.isPlaying()&&Re.elementID&&(E.default.debug("[".concat(f.clientId,"] Reload Player ").concat(Re.elementID," StreamId ").concat(Re.getId())),p.audioOutput=Re.audioOutput,Re.stop(),p.play(Re.elementID,Re.playOptions)),delete p.audioLevelHelper;var qe=Object(B.e)({type:"stream-subscribed",stream:f.remoteStreams[p.getId()]});f.dispatchEvent(qe)}},clearInterval(f.timers[p.getId()]),f.timers[p.getId()]=setInterval(function(){if(Object(V.getParameter)("REPORT_STATS")){var _e=0;p&&p.pc&&p.pc.getStats&&p.pc.getStatsRate(function(Se){Se.forEach(function(Re){if(Re&&Re.id){if(/_send$/.test(Re.id)||/^time$/.test(Re.id)||/^bweforvideo$/.test(Re.id))return;-1===Re.id.indexOf("inbound_rtp")&&-1===Re.id.indexOf("inbound-rtp")&&-1===Re.type.toLowerCase().indexOf("inbound")||"video"!==Re.mediaType||(Re.googFrameWidthReceived=p.videoWidth+"",Re.googFrameHeightReceived=p.videoHeight+"");var Ce=200*_e;_e++;var Be=p.getId();setTimeout(function(){var qe=f.socket&&f.socket.getLastMsgTime()&&Date.now()-f.socket.getLastMsgTime();if(qe>Object(V.getParameter)("REPORT_STATS_TIMEOUT"))E.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(qe));else{if("video"===Re.mediaType)try{var He=p.stream.getVideoTracks()[0];Re.A_vrtd=He.enabled?"0":"1",p.player&&p.player.freezeTimeCounterList.length>0&&(Re.A_vrft=p.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(Ye){}if("audio"===Re.mediaType)try{var tt=p.stream.getAudioTracks()[0];Re.A_artd=tt.enabled?"0":"1"}catch(Ye){}f.makeReport(Te(Be,Re))}},Ce)}})})}},3e3),clearInterval(f.timers[p.getId()+"_RelatedStats"]),f.timers[p.getId()+"_RelatedStats"]=setInterval(function(){if(Object(V.getParameter)("REPORT_STATS")&&p&&p.pc){var _e=f.socket&&f.socket.getLastMsgTime()&&Date.now()-f.socket.getLastMsgTime();if(_e>Object(V.getParameter)("REPORT_STATS_TIMEOUT"))return void E.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(_e));p.pc.getVideoRelatedStats&&p.pc.getVideoRelatedStats(function(Se){p.player&&(p.hasVideo()&&!p.peerMuteVideo&&(Se.isFreeze=p.player.freezeCount>p.player.lastFreezeCount),p.player.lastFreezeCount=p.player.freezeCount),f.makeReport(de(p.getId(),Se))}),p.pc.getAudioRelatedStats&&p.pc.getAudioRelatedStats(function(Se){f.makeReport(de(p.getId(),Se))})}},1e3),f.audioLevel[p.getId()]=0,clearInterval(f.timers[p.getId()+"audio"]),f.timers[p.getId()+"audio"]=setInterval(function(){f.hasListeners("active-speaker")&&p&&p.pc&&"established"===p.pc.state&&p.pc.getStats&&p.pc.getStats(function(_e){_e.forEach(function(Se){if("audio"===Se.mediaType){if(Se.audioOutputLevel>5e3)for(var Re in f.audioLevel[p.getId()]<20&&(f.audioLevel[p.getId()]+=1),f.audioLevel)Re!==""+p.getId()&&f.audioLevel[Re]>0&&(f.audioLevel[Re]-=1);var Ce=Object.keys(f.audioLevel).sort(function(qe,He){return f.audioLevel[He]-f.audioLevel[qe]});if(f.activeSpeaker!==Ce[0]){var Be=Object(B.a)({type:"active-speaker",uid:Ce[0]});f.dispatchEvent(Be),f.activeSpeaker=Ce[0],E.default.debug("[".concat(f.clientId,"] Update active speaker: ").concat(f.activeSpeaker))}}})},50)},50),p.pc.oniceconnectionstatechange=function(_e){if("failed"===_e)null!=f.timers[p.getId()]&&(clearInterval(f.timers[p.getId()]),clearInterval(f.timers[p.getId()]+"audio")),E.default.error("[".concat(f.clientId,"] Subscriber connection is lost -- streamId: ").concat(p.getId(),", p2pId: ").concat(J)),E.default.debug("[".concat(f.clientId,"] subscribe p2p failed: "),f.p2ps),pe||(pe=!0,fe&&fe(oe.default.PEERCONNECTION_FAILED),U.report.subscribe(f.joinInfo.sid,{lts:me,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:oe.default.PEERCONNECTION_FAILED,subscribeRequestid:f.subscribeRequestId.get(p.getId())||0,p2pid:J})),f.remoteStreams[p.getId()]&&f.p2ps.has(J)&&(f.p2ps.delete(J),f.dispatchEvent(Object(B.a)({type:"subP2PLost",stream:p})));else if("connected"===_e&&(E.default.debug("[".concat(f.clientId,"] subscribe p2p connected: "),f.p2ps),!pe)){pe=!0,U.report.subscribe(f.joinInfo.sid,{lts:me,succ:!0,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:null,subscribeRequestid:f.subscribeRequestId.get(p.getId())||0,p2pid:J}),f._adjustPCMuteStatus(p);var Se=!1,Re=!1,Ce=!1,Be=setInterval(function(){Se&&Re||(p.pc?p.pc.getStats(function(St){St.forEach(function(ot){if((-1!==ot.id.indexOf("recv")||ot.type&&-1!==ot.type.toLowerCase().indexOf("inbound")||-1!==ot.id.indexOf("inbound_rtp")||-1!==ot.id.indexOf("inbound-rtp")||-1!==ot.id.indexOf("InboundRTP"))&&"audio"===ot.mediaType){if((ot.googDecodingNormal>0||ot.audioOutputLevel>0)&&!Se){Se=!0,f.dispatchEvent({type:"first-audio-frame-decode",stream:p}),Se&&Re&&clearInterval(Be);var Qt=Date.now(),rt=U.report.getSessionStartTime(f.joinInfo.sid);U.report.firstAudioDecode(f.joinInfo.sid,{peerid:p.uintId,uid:f.uid,elapse:Qt-rt,subscribeElapse:Qt-p.subscribeLTS,subscribeRequestid:f.subscribeRequestId.get(p.getId())||0,p2pid:J})}parseInt(ot.packetsReceived)>0&&!Re&&(Re=!0,f.dispatchEvent({type:"first-audio-packet-received",stream:p}),Se&&Re&&clearInterval(Be),Qt=Date.now(),rt=U.report.getSessionStartTime(f.joinInfo.sid),U.report.firstAudioReceived(f.joinInfo.sid,{peerid:p.uintId,uid:f.uid,elapse:Qt-rt,subscribeElapse:Qt-p.subscribeLTS,subscribeRequestid:f.subscribeRequestId.get(p.getId())||0,p2pid:J}))}})},100):clearInterval(Be))},100),qe=!1,He=!1,tt=setInterval(function(){qe&&He||(p.pc?p.pc.getStats(function(St){St.forEach(function(ot){if((-1!==ot.id.indexOf("recv")||ot.type&&-1!==ot.type.toLowerCase().indexOf("inbound")||-1!==ot.id.indexOf("inbound_rtp")||-1!==ot.id.indexOf("inbound-rtp")||-1!==ot.id.indexOf("InboundRTP"))&&"video"===ot.mediaType){if((ot.framesDecoded>0||ot.googFramesDecoded>0)&&!qe){qe=!0,f.dispatchEvent({type:"first-video-frame-decode",stream:p}),qe&&He&&clearInterval(tt);var Qt=Date.now(),rt=U.report.getSessionStartTime(f.joinInfo.sid);p.firstFrameTime=(new Date).getTime()-p.subscribeLTS,U.report.firstVideoDecode(f.joinInfo.sid,{peerid:p.uintId,width:parseInt(ot.googFrameWidthReceived)||0,height:parseInt(ot.googFrameHeightReceived)||0,uid:f.uid,elapse:Qt-rt,subscribeElapse:Qt-p.subscribeLTS,subscribeRequestid:f.subscribeRequestId.get(p.getId())||0,p2pid:J})}ot.packetsReceived>0&&!He&&(He=!0,f.dispatchEvent({type:"first-video-packet-received",stream:p}),qe&&He&&clearInterval(tt),Qt=Date.now(),rt=U.report.getSessionStartTime(f.joinInfo.sid),U.report.firstVideoReceived(f.joinInfo.sid,{peerid:p.uintId,uid:f.uid,elapse:Qt-rt,subscribeElapse:Qt-p.subscribeLTS,subscribeRequestid:f.subscribeRequestId.get(p.getId())||0,p2pid:J}))}})},100):clearInterval(tt))},100),Ye=setInterval(function(){if(!Ce){var St=p.getId(),ot=f.traffic_stats;if(ot&&ot.peer_delay){var Qt=ot.peer_delay.find(function(Wt){return Wt.peer_uid==St});if(Qt){if(Ce=!0,f.peerPublishDurationMap.get(p.getId()))return void clearInterval(Ye);var rt=Qt.peer_publish_audio_duration,jn=Qt.peer_publish_video_duration;if(void 0===rt||void 0===jn)return;f.peerPublishDurationMap.set(p.getId(),!0);var lt=U.report.getSessionStartTime(f.joinInfo.sid),Bi=(rt||jn)+(Date.now()-ot.timestamp),ts=Date.now();U.report.peerPublishStatus({audiotag:rt?1:-1,videotag:jn?1:-1,lts:ts,sid:f.joinInfo.sid,cname:f.joinInfo.cname,cid:f.joinInfo.cid,uid:f.joinInfo.uid,elapse:ts-lt,peer:p.uintId,peerPublishDuration:Bi,joinChannelSuccessElapse:ts-f.joinSuccessLts,subscribeElapse:ts-p.subscribeLTS}),clearInterval(Ye)}}}},1e3);return p.sid=f.joinInfo.sid,ne&&ne()}}}else E.default.error("[".concat(f.clientId,"] Invalid remote stream")),pe||(pe=!0,fe&&fe(oe.default.INVALID_REMOTE_STREAM),U.report.subscribe(f.joinInfo.sid,{lts:me,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:oe.default.INVALID_REMOTE_STREAM}));else E.default.error("[".concat(f.clientId,"] No such remote stream")),pe||(pe=!0,fe&&fe(oe.default.NO_SUCH_REMOTE_STREAM),U.report.subscribe(f.joinInfo.sid,{lts:me,succ:!1,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:oe.default.NO_SUCH_REMOTE_STREAM}))},f.subscribeChange=function(p,ne,fe){var me=Date.now();E.default.info("[".concat(f.clientId,"] Gatewayclient ").concat(f.uid," SubscribeChange ").concat(p.getId(),": ").concat(JSON.stringify(p.subscribeOptions))),f._adjustPCMuteStatus(p);var pe={stream_id:p.getId(),audio:p.subscribeOptions.audio,video:p.subscribeOptions.video};f.makeRequest({_type:"subscribe_change",_message:pe},function(J){var _e=Object(B.e)({type:"stream-subscribe-changed",stream:f.remoteStreams[p.getId()]});U.report.subscribe(f.joinInfo.sid,{lts:me,succ:!0,video:p.subscribeOptions&&p.subscribeOptions.video,audio:p.subscribeOptions&&p.subscribeOptions.audio,peerid:p.getId(),ec:null,subscribeRequestid:f.subscribeRequestId.get(p.getId())||0,p2pid:f.p2ps.get(p.getId())}),f.dispatchEvent(_e),ne&&ne()},function(J,_e){E.default.error("[".concat(f.clientId,"] Subscribe Change Failed ").concat(p.getId()),J,_e),fe&&fe(J,_e)})},f.processPublishFailure=function(p){p.publishLTS=null,p.p2pId&&f.p2ps.get(p.p2pId)===p&&f.p2ps.delete(p.p2pId),f.localStreams[p.getUserId()]===p&&delete f.localStreams[p.getUserId()],f.localStreams[p.getId()]===p&&delete f.localStreams[p.getId()],p.pc&&(p.pc.processSignalingMessage=function(){},p.pc.oniceconnectionstatechange=function(){},p.pc.close(),delete p.pc),delete p.onClose,delete p._onAudioUnmute,delete p._onVideoUnmute,delete p._onAudioMute,delete p._onVideoMute,delete p._onAudioUnmute},f.processSubscribeFailure=function(p){p.p2pId&&f.p2ps.get(p.p2pId)===p&&f.p2ps.delete(p.p2pId),p.pc&&(p.pc.onaddstream=function(){},p.pc.processSignalingMessage=function(){},p.pc.oniceconnectionstatechange=function(){},p.pc.close(),delete p.pc),delete p.onClose,delete p._onAudioUnmute,delete p._onVideoUnmute,delete p._onAudioMute,delete p._onVideoMute,delete p._onAudioUnmute},f._adjustPCMuteStatus=function(p){E.default.debug("[".concat(f.clientId,"]: use _adjustPCMuteStatus: ").concat(p.getId())),E.default.debug("[".concat(f.clientId,"]: video: ").concat(p.video,", audio: ").concat(p.audio,", suboption: ").concat(JSON.stringify(p.subscribeOptions),",userMuteVideo: ").concat(p.userMuteVideo,", peerMuteVideo: ").concat(p.peerMuteVideo,", userMuteAudio: ").concat(p.userMuteAudio,", peerMuteAudio: ").concat(p.peerMuteAudio)),!p.local&&p.pc&&p.pc.peerConnection.getReceivers&&p.pc.peerConnection.getReceivers().forEach(function(ne){if(ne&&ne.track&&"audio"===ne.track.kind){var fe=!p.userMuteAudio&&!p.peerMuteAudio;p.subscribeOptions&&!p.subscribeOptions.audio&&(fe=!1),E.default.debug("[".concat(f.clientId,"]: set receiver audio track: ").concat(fe)),ne.track.enabled=!!fe}else if(ne&&ne.track&&"video"===ne.track.kind){var me=!p.userMuteVideo&&!p.peerMuteVideo;p.subscribeOptions&&!p.subscribeOptions.video&&(me=!1),E.default.debug("[".concat(f.clientId,"]: set receiver video track: ").concat(me)),ne.track.enabled=!!me}})},f.unsubscribe=function(p,ne,fe){if("object"!==y()(p)||null===p)return E.default.error("[".concat(f.clientId,"] Invalid remote stream")),void ye(fe,oe.default.INVALID_REMOTE_STREAM);if(f.state!==Ae)return E.default.error("[".concat(f.clientId,"] User is not in the session")),void ye(fe,oe.default.INVALID_OPERATION);if(null!=f.timers[p.getId()]&&(clearInterval(f.timers[p.getId()]),clearInterval(f.timers[p.getId()]+"audio")),null!=f.audioLevel[p.getId()]&&delete f.audioLevel[p.getId()],null!=f.timer_counter[p.getId()]&&delete f.timer_counter[p.getId()],f.remoteStreams.hasOwnProperty(p.getId())){if(!f.socket)return E.default.error("[".concat(f.clientId,"] User is not in the session")),void ye(fe,oe.default.INVALID_OPERATION);if(p.local)return E.default.error("[".concat(f.clientId,"] Invalid remote stream")),void ye(fe,oe.default.INVALID_REMOTE_STREAM);p.close(),p.stop();var me={stream_id:p.getId()};f.makeRequest({_type:"unsubscribe",_message:me}),void 0!==p.pc&&(p.pc.close(),p.pc=void 0),p.onClose=void 0,p._onAudioMute=void 0,p._onAudioUnute=void 0,p._onVideoMute=void 0,p._onVideoUnmute=void 0,delete p.subscribeOptions,f.p2ps.delete(p.p2pId),E.default.info("[".concat(f.clientId,"] Unsubscribe stream success")),ne&&ne()}else ye(fe,oe.default.NO_SUCH_REMOTE_STREAM)},f.setRemoteVideoStreamType=function(p,ne){if(E.default.debug("[".concat(f.clientId,"] Switching remote video stream ").concat(p.getId()," to ").concat(ne)),"object"===y()(p)&&null!==p)if(f.state===Ae){if(!p.local){switch(ne){case f.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case f.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case f.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var fe={stream_id:p.getId(),stream_type:ne};f.makeRequest({_type:"switch_video_stream",_message:fe},function(){E.default.debug("SwitchVideoStream Success ".concat(fe.stream_id," ").concat(fe.stream_type))},function(me,pe){E.default.error("SwitchVideoStream Error ".concat(me," ").concat(fe.stream_id," ").concat(fe.stream_type),pe)})}}else E.default.error("[".concat(f.clientId,"] User is not in the session"));else E.default.error("[".concat(f.clientId,"] Invalid remote stream"))},f.renewToken=function(p,ne,fe){p?f.key?f.state!==Ae?(E.default.debug("[".concat(f.clientId,"] Client is not connected. Trying to rejoin")),f.key=p,f.rejoin(),ne&&ne()):(E.default.debug("[".concat(f.clientId,"] renewToken from ").concat(f.key," to ").concat(p)),f.key=p,f.makeRequest({_type:"renew_token",_message:{token:p}},ne,fe)):(E.default.error("[".concat(f.clientId,"] Client is previously joined without token")),fe&&fe(oe.default.INVALID_PARAMETER)):(E.default.error("[".concat(f.clientId,"] Invalid Token ").concat(p)),fe&&fe(oe.default.INVALID_PARAMETER))},f.setStreamFallbackOption=function(p,ne){if(E.default.debug("[".concat(f.clientId,"] Set stream fallback option ").concat(p.getId()," to ").concat(ne)),"object"===y()(p)&&null!==p)if(f.state===Ae){if(!p.local){switch(ne){case f.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case f.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case f.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var fe={stream_id:p.getId(),fallback_type:ne};f.makeRequest({_type:"set_fallback_option",_message:fe},function(){E.default.debug("SetStreamFallbackOption success ".concat(fe.stream_id," ").concat(ne))},function(me,pe){E.default.error("Failed to SetStreamFallbackOption ".concat(fe.stream_id," ").concat(ne," ").concat(me),pe)})}}else E.default.error("[".concat(f.clientId,"] User is not in the session"));else E.default.error("[".concat(f.clientId,"] Invalid remote stream"))},f.enableAudioVolumeIndicator=function(p,ne){f.audioVolumeIndication.enabled=!0,f.audioVolumeIndication.interval=p,f.audioVolumeIndication.smooth=ne,f.resetAudioVolumeIndication()},f.resetAudioVolumeIndication=function(){if(clearInterval(f.timers.audioVolumeIndication),clearInterval(f.timers.audioVolumeSampling),f.audioVolumeIndication.enabled&&f.audioVolumeIndication.interval){var p=Math.floor(1e3*f.audioVolumeIndication.smooth/100);clearInterval(f.timers.audioVolumeSampling),f.timers.audioVolumeSampling=setInterval(function(){f.audioVolumeSampling||(f.audioVolumeSampling={});var ne={};for(var fe in f.remoteStreams){var me=f.remoteStreams[fe];if(me.stream&&me.hasAudio()){var pe=me.getAudioLevel();pe>0&&pe<1&&(pe*=100);var J=f.audioVolumeSampling[fe]||[];for(J.push(pe);J.length>p;)J.shift();ne[fe]=J}}f.audioVolumeSampling=ne},100),clearInterval(f.timers.audioVolumeIndication),f.timers.audioVolumeIndication=setInterval(function(){if(f.socket&&f.socket.signal&&f.socket.signal.connection&&f.socket.signal.connection.readyState===WebSocket.OPEN){var ne=[];for(var fe in f.remoteStreams)if(f.audioVolumeSampling&&f.audioVolumeSampling[fe]){var me=f.audioVolumeSampling[fe],pe=0;me.forEach(function(Re){pe+=Re});var J={uid:fe,level:Math.floor(pe/me.length)};J.level&&ne.push(J)}var _e=ne.sort(function(Re,Ce){return Re.level-Ce.level});E.default.debug("[".concat(f.clientId,"] volume-indicator "),JSON.stringify(_e)),f.audioVolumeIndication.sortedAudioVolumes=_e;var Se=Object(B.a)({type:"volume-indicator",attr:_e});f.dispatchEvent(Se)}},f.audioVolumeIndication.interval)}},f.closeGateway=function(){E.default.debug("[".concat(f.clientId,"] close gateway")),f.state=Me,f.socket.close(),De()},f.startChannelMediaRelay=function(){var p=T()(R.a.mark(function ne(fe){var me,pe,_e;return R.a.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(!f.channelMediaRelayController){Se.next=2;break}throw new L.ChannelMediaError("RELAY_ALREADY_START","",L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return me=function(Re){f.dispatchEvent({type:"channel-media-relay-event",code:Re})},pe=function(Re,Ce,Be){Re===L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&Ce===L.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(f.channelMediaRelayController.dispose(),f.channelMediaRelayController=null),f.dispatchEvent({type:"channel-media-relay-state",state:Re,code:Ce,data:Be})},f.channelMediaRelayController=new K.a(f.joinInfo,f.clientId),f.channelMediaRelayController.on("event",me),f.channelMediaRelayController.on("state",pe),Se.prev=7,Se.next=10,f.channelMediaRelayController.startChannelMediaRelay(fe);case 10:Se.next=22;break;case 12:throw Se.prev=12,Se.t0=Se.catch(7),E.default.debug("[".concat(f.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(Se.t0))),f.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[_e=Se.t0 instanceof L.ChannelMediaError?"SetSourceChannelStatus"===Se.t0.data||Se.t0.data&&Se.t0.data.serverResponse&&"SetSourceChannel"===Se.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===Se.t0.data||Se.t0.data&&Se.t0.data.serverResponse&&"SetDestChannel"===Se.t0.data.serverResponse.command?"FAILED_JOIN_DEST":Se.t0.data&&Se.t0.data.serverResponse&&"StartPacketTransfer"===Se.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":Se.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||Se.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":Se.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||Se.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":Se.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":Se.t0.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||Se.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR"]}),f.channelMediaRelayController&&(f.channelMediaRelayController.dispose(),f.channelMediaConfig=null,f.channelMediaRelayController=null),f.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(_e,null,L.CHANNEL_MEDIA_RELAY_ERROR[_e]);case 22:f.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),f.channelMediaConfig=fe;case 24:case"end":return Se.stop()}},ne,null,[[7,12]])}));return function(ne){return p.apply(this,arguments)}}(),f.updateChannelMediaRelay=function(){var p=T()(R.a.mark(function ne(fe){var me,pe;return R.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(f.channelMediaRelayController){J.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return J.prev=2,J.next=5,f.channelMediaRelayController.updateChannelMediaRelay(fe);case 5:J.next=18;break;case 7:throw J.prev=7,J.t0=J.catch(2),E.default.debug("[".concat(f.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),me=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,pe=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",f.dispatchEvent({type:"channel-media-relay-event",code:L.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),f.dispatchEvent({type:"channel-media-relay-state",state:me,code:L.CHANNEL_MEDIA_RELAY_ERROR[pe]}),f.channelMediaRelayController&&(f.channelMediaRelayController.dispose(),f.channelMediaConfig=null,f.channelMediaRelayController=null),f.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(pe,null,L.CHANNEL_MEDIA_RELAY_ERROR[pe]);case 18:f.channelMediaConfig=fe;case 19:case"end":return J.stop()}},ne,null,[[2,7]])}));return function(ne){return p.apply(this,arguments)}}(),f.stopChannelMediaRelay=T()(R.a.mark(function p(){var fe;return R.a.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(f.channelMediaRelayController){me.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return me.prev=2,me.next=5,f.channelMediaRelayController.stopChannelMediaRelay();case 5:me.next=17;break;case 7:throw me.prev=7,me.t0=me.catch(2),E.default.debug("[".concat(f.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),fe=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",f.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[fe]}),f.channelMediaRelayController&&(f.channelMediaRelayController.dispose(),f.channelMediaConfig=null,f.channelMediaRelayController=null),f.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(fe,null,L.CHANNEL_MEDIA_RELAY_ERROR[fe]);case 17:f.channelMediaConfig=null,f.channelMediaRelayController=null;case 19:case"end":return me.stop()}},p,null,[[2,7]])})),f.sendMetadata=function(p,ne){f.makeRequest({_type:"send_metadata",_message:{session_id:f.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(p)))}},function(){E.default.debug("[".concat(f.clientId,'] send metadata "').concat(p,'" success')),ne&&ne(null)},function(fe){E.default.error("[".concat(f.clientId,'] send metadata "').concat(p,'" failed'),fe),ne&&ne(fe)})},f._reportWebsocketCloseEvent=function(p,ne){try{var fe=U.report.getSessionStartTime(f.joinInfo.sid),me=Date.now();U.report.webSocketQuit({lts:me,sid:f.joinInfo.sid,cname:f.joinInfo.cname,cid:f.joinInfo.cid,uid:f.joinInfo.uid,elapse:me-fe,succ:p,errorCode:ne,ip:null})}catch(pe){E.default.debug("[".concat(f.clientId,"]: _reportWebsocketCloseEvent exception, ").concat(pe))}};var x=function(){E.default.debug("[".concat(f.clientId,"] Reconnect gateway")),f.state=Me,f.socket.close(),De(),f.reconnectMode="recover",f.state=Oe,Ue()};f.recover=x;var De=function(){for(var p in f.dispatchEvent({type:"before-clear-connection"}),f.timers)f.timers.hasOwnProperty(p)&&clearInterval(f.timers[p]);for(var p in f.remoteStreams)if(f.remoteStreams.hasOwnProperty(p)){var ne=f.remoteStreams[p],fe=Object(B.a)({type:"stream-removed",uid:ne.getId(),stream:ne});f.dispatchEvent(fe)}f.p2ps.clear(),ue(),Ze(),clearInterval(f.pingTimer)};f.rejoin=function(){f.socket&&(clearInterval(f.pingTimer),f.socket.close(),f.socket=void 0),f.state=Oe,Ue()};var Ue=function(p,ne){f.dispatchEvent(Object(B.a)({type:"rejoin-start"})),p=p||function(fe){E.default.info("[".concat(f.clientId,"] User ").concat(fe," is re-joined to ").concat(f.joinInfo.cname)),f.dispatchEvent(Object(B.a)({type:"rejoin"})),f.channelMediaConfig&&f.startChannelMediaRelay(f.channelMediaConfig).then(function(){E.default.debug("[".concat(f.clientId,"] restartChannelMediaRelay success"))}).catch(function(me){E.default.debug("[".concat(f.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(me)))}),f.liveStreams&&f.liveStreams.size&&f.liveStreams.forEach(function(me,pe){me&&f.setLiveTranscoding(f.transcoding),f.startLiveStreaming(pe,me)}),f.injectLiveStreams&&f.injectLiveStreams.size&&f.injectLiveStreams.forEach(function(me,pe){f.addInjectStreamUrl(pe,me)})},ne=ne||function(fe){E.default.error("[".concat(f.clientId,"] Re-join to channel failed "),fe),f.dispatchEvent(Object(B.e)({type:"error",reason:fe}))},f.key?(++f.rejoinAttempt,f.join(f.joinInfo,f.key,p,ne)):E.default.error("[".concat(f.clientId,"] Connection recover failed [Invalid channel key]"))},Ve=function(p,ne,fe){if(f.onConnect=ne,f.socket){if(f.dispatchEvent({type:"reconnect"}),"retry"===f.reconnectMode)E.default.debug("[".concat(f.clientId,"] Retry current gateway")),f.socket.reconnect();else if("tryNext"===f.reconnectMode)E.default.debug("[".concat(f.clientId,"] Try next gateway")),f.socket.connectNext();else if("recover"===f.reconnectMode){E.default.debug("[".concat(f.clientId,"] Recover gateway")),E.default.debug("[".concat(f.clientId,"] Try to reconnect choose server and get gateway list again ")),f.reconnectingCS=!0;var me=f.joinInfo&&f.joinInfo.sid;Object($.getGatewayList)(f.joinInfo,function(J){E.default.debug("[".concat(f.clientId,"] session:  ").concat(me," get gateway list success")),f.joinInfo.apResponse=J.res,f.reconnectingCS?f.socket.replaceHost(J.gateway_addr):E.default.debug("[".concat(f.clientId,"] session:  ").concat(me," already leave"))})}}else f.socket=function(W,F){var Y={connect:function(){F.host=W,Y.signal=ee(F),Y.on=Y.signal.on,Y.dispatchEvent=Y.signal.dispatchEvent,Y.signal.on("onopen",function(ve){Y.signal.onEvent=function(de){Y.dispatchEvent(Object(B.d)({type:de.event,msg:de}))},Y.dispatchEvent(Object(B.d)({type:"connect",msg:ve}))}),Y.signal.on("onError",function(ve){onError(ve.msg.code,"error")})},getLastMsgTime:function(){return Y.signal&&Y.signal.lastMsgTime},getSendBytes:function(){return Y.signal.getSendBytes()},getRecvBytes:function(){return Y.signal.getRecvBytes()},getDuration:function(){return Y.signal.getDuration()},disconnect:function(){Y.signal.disconnect()},close:function(){Y.signal.close()},getURL:function(){return Y.signal.getURL()},reconnect:function(){Y.signal.reconnect()},connectNext:function(){Y.signal.connectNext()},replaceHost:function(ve){Y.signal.replaceHost(ve)},emitSimpleMessage:function(ve,de){Y.signal.sendSignalCommand(ve,de)},emitRequest:function(ve,de){Y.signal.sendRequest(ve,de)},emitReport:function(ve){Y.signal.sendReport(ve)}};return Y.connect(),Y}(p.gatewayAddr,{sid:f.joinInfo.sid,clientId:f.clientId,proxyServerType:f.joinInfo.proxyServerType}),f.socket.on("start-connection",function(J){f.ticket=J&&J.msg&&J.msg.ticket}),f.socket.on("on_uplink_stats",function(J){var _e={};for(var Se in J)_e[C(Se)]=J[Se];if(f.OutgoingAvailableBandwidth=_e.uplink_available_bandwidth,f.localStreams[f.uid]){var Re=f.localStreams[f.uid].uplinkStats;Re&&Re.period_fir===_e.period_fir||E.default.debug("[".concat(f.clientId,"]: Period fir change to: ").concat(_e.period_fir)),f.localStreams[f.uid].uplinkStats=_e}}),f.socket.on("connect",function(){f.dispatchEvent({type:"connected"}),f.attemps=1,f.onConnect()}),f.socket.on("recover",function(){f.state=Oe,E.default.debug("[".concat(f.clientId,"] Try to reconnect choose server and get gateway list again ")),f.reconnectingCS=!0;var J=f.joinInfo&&f.joinInfo.sid;Object($.getGatewayList)(f.joinInfo,function(_e){E.default.debug("[".concat(f.clientId,"] session:  ").concat(J," get gateway list success")),f.reconnectingCS?f.socket.replaceHost(_e.gateway_addr):E.default.debug("[".concat(f.clientId,"] session:  ").concat(J," already leave"))})}),f.socket.on("disconnect",function(J){if(E.default.debug("[".concat(f.clientId,"] Receive disconnect message")),f.state!==Me){f.state=Me,f._reportWebsocketCloseEvent(-1,oe.WEBSOCKET_CLOSE_REASON.WS_DISCONNECT);var _e=Object(B.e)({type:"error",reason:oe.default.SOCKET_DISCONNECTED});if(f.dispatchEvent(_e),f.reconnectMode=0===f.p2ps.size?"tryNext":"retry",De(),f.channelMediaRelayController&&f.channelMediaRelayController.dispose(),f.channelMediaRelayController=null,1!=Y){var Re=1e3*Math.min(30,Math.pow(2,f.attemps)-1);if(E.default.error("[".concat(f.clientId,"] Disconnect from server [").concat(JSON.stringify(J),"], attempt to recover [#").concat(f.attemps,"] after ").concat(Re/1e3," seconds")),f.hasInvokeLeave)return E.default.debug("[".concat(f.clientId,"] No reconnection because Client.leave has been invoked")),void(f.hasInvokeLeave=!1);setTimeout(function(){f.attemps++,f.state=Oe,f.inChannelInfo&&Date.now()-f.inChannelInfo.joinAt>Object(V.getParameter)("TICKET_RENEW_TIMEOUT")?(E.default.debug("Recovering to renew ticket"),x()):Ue()},Re)}else{var Ce=Q.unregister(f);Ce&&E.default.debug("[".concat(f.clientId,"] "),Ce)}}}),f.socket.on("on_add_audio_stream",function(J){if(E.default.info("[".concat(f.clientId,"] Newly added audio stream with uid ").concat(J.uid)),f.joinInfo.stringUid&&"string"!=typeof J.uid&&E.default.error("StringUID is Mixed with UintUID"),f.remoteStreamsInChannel.has(J.uid)||f.remoteStreamsInChannel.add(J.uid),void 0===f.remoteStreams[J.uid]){var _e=Object(k.a)({streamID:J.uid,local:!1,audio:J.audio,video:J.video,uintUID:J.uint_id||J.uid});_e.peerMuteVideo=!0,f.remoteStreams[J.uid]=_e;var Se=Object(B.e)({type:"stream-added",stream:_e});f.dispatchEvent(Se);var Re=f.remoteMuteState[J.uid];Re&&Re.audio&&(Se=Object(B.a)({type:"mute-audio",uid:J.uid}),f.dispatchEvent(Se)),Re&&Re.video&&(Se=Object(B.a)({type:"mute-video",uid:J.uid}),f.dispatchEvent(Se))}U.report.onAddAudioStream(f.joinInfo.sid,{peerid:J.uint_id||J.uid,uid:f.uid})}),f.socket.on("on_update_stream",function(J){E.default.info("[".concat(f.clientId,"] on_update_stream:"),J);var _e=f.remoteStreams[J.uid];if(f.joinInfo.stringUid&&"string"!=typeof J.uid&&E.default.error("StringUID is Mixed with UintUID"),_e){_e.audio=J.audio,_e.video=J.video,_e.screen=J.screen,_e.pc&&f._adjustPCMuteStatus(_e);var Se=Object(B.e)({type:"stream-updated",stream:_e});f.dispatchEvent(Se)}else E.default.debug("[".concat(f.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(J.uid));U.report.onUpdateStream(f.joinInfo.sid,{peerid:J.uint_id||J.uid,audio:J.audio,video:J.video,uid:f.uid})}),f.socket.on("on_add_video_stream",function(J){if(E.default.info("[".concat(f.clientId,"] Newly added remote stream with uid ").concat(J.uid,".")),f.joinInfo.stringUid&&"string"!=typeof J.uid&&E.default.error("StringUID is Mixed with UintUID"),f.remoteStreamsInChannel.has(J.uid)||f.remoteStreamsInChannel.add(J.uid),void 0===f.remoteStreams[J.uid]){var _e=Object(k.a)({streamID:J.uid,local:!1,audio:J.audio,video:J.video,uintUID:J.uint_id||J.uid});f.remoteStreams[J.uid]=_e;var Se=Object(B.e)({type:"stream-added",stream:_e});f.dispatchEvent(Se);var Re=f.remoteMuteState[J.uid];Re&&Re.audio&&(Se=Object(B.a)({type:"mute-audio",uid:J.uid}),f.dispatchEvent(Se)),Re&&Re.video&&(Se=Object(B.a)({type:"mute-video",uid:J.uid}),f.dispatchEvent(Se))}else{var Ce=f.remoteStreams[J.uid];if(Ce.video=!0,Ce.peerMuteVideo=!1,Ce.pc&&f._adjustPCMuteStatus(Ce),E.default.info("[".concat(f.clientId,"] Stream changed: enable video ").concat(J.uid)),void 0!==Ce.stream&&Ce.isPlaying()){var Be=Ce.player.elementID;Ce.stop(),Ce.play(Be,Ce.playOptions)}}U.report.onAddVideoStream(f.joinInfo.sid,{peerid:J.uint_id||J.uid,uid:f.uid})}),f.socket.on("on_remove_stream",function(J){E.default.info("[".concat(f.clientId,"] on_remove_stream:"),J),f.remoteStreamsInChannel.has(J.uid)&&f.remoteStreamsInChannel.delete(J.uid);var _e=f.remoteStreams[J.uid];if(_e){delete f.remoteStreams[J.uid],delete f.remoteMuteState[J.uid];var Se=Object(B.e)({type:"stream-removed",stream:_e});f.dispatchEvent(Se),_e.close(),void 0!==_e.pc&&(_e.pc.close(),_e.pc=void 0,f.p2ps.delete(_e.p2pId)),U.report.onRemoveStream(f.joinInfo.sid,{peerid:J.uint_id||J.uid,uid:f.uid})}else E.default.error("ERROR stream ",J.uid," not found onRemoveStream ",J)}),f.socket.on("on_publish_stream",function(J){E.default.info("[".concat(f.clientId,"] on_publish_stream:"),J),f.dispatchEvent({type:"streamPublished",stream:f.localStreams[J.uid],proxy:J.proxy}),U.report.reportApiInvoke(f.joinInfo.sid,{name:"on_publish_stream",options:{proxy:J.proxy}})()}),f.socket.on("mute_audio",function(J){E.default.info("[".concat(f.clientId,"] rcv peer mute audio: ").concat(J.uid)),f.remoteMuteState[J.uid]=f.remoteMuteState[J.uid]||{audio:!1,video:!1},f.remoteMuteState[J.uid].audio=!0;var _e=Object(B.a)({type:"mute-audio",uid:J.uid}),Se=f.remoteStreams[J.uid];Se?(Se.peerMuteAudio=!0,Se.pc&&f._adjustPCMuteStatus(Se),f.dispatchEvent(_e)):E.default.debug("Ignoring event ".concat(J.type),J)}),f.socket.on("unmute_audio",function(J){E.default.info("[".concat(f.clientId,"] rcv peer unmute audio: ").concat(J.uid)),f.remoteMuteState[J.uid]=f.remoteMuteState[J.uid]||{audio:!1,video:!1},f.remoteMuteState[J.uid].audio=!1;var _e=Object(B.a)({type:"unmute-audio",uid:J.uid}),Se=f.remoteStreams[J.uid];Se?(Se.peerMuteAudio=!1,Se.pc&&f._adjustPCMuteStatus(Se),f.dispatchEvent(_e)):E.default.debug("Ignoring event ".concat(J.type),J)}),f.socket.on("mute_video",function(J){E.default.info("[".concat(f.clientId,"] rcv peer mute video: ").concat(J.uid)),f.remoteMuteState[J.uid]=f.remoteMuteState[J.uid]||{audio:!1,video:!1},f.remoteMuteState[J.uid].video=!0;var _e=Object(B.a)({type:"mute-video",uid:J.uid}),Se=f.remoteStreams[J.uid];Se?(Se.peerMuteVideo=!0,Se.player&&(Se.player.peerVideoReady=!1),Se.pc&&f._adjustPCMuteStatus(Se),f.dispatchEvent(_e)):E.default.debug("Ignoring event ".concat(J.type),J)}),f.socket.on("unmute_video",function(J){E.default.info("[".concat(f.clientId,"] rcv peer unmute video: ").concat(J.uid)),f.remoteMuteState[J.uid]=f.remoteMuteState[J.uid]||{audio:!1,video:!1},f.remoteMuteState[J.uid].video=!1;var _e=Object(B.a)({type:"unmute-video",uid:J.uid}),Se=f.remoteStreams[J.uid];Se?(Se.peerMuteVideo=!1,Se.pc&&f._adjustPCMuteStatus(Se),f.dispatchEvent(_e)):E.default.debug("Ignoring event ".concat(J.type),J)}),f.socket.on("on_crypt_error",function(J){E.default.warning("[".concat(f.clientId,"] stream crypt error"));var _e=Object(B.a)({type:"crypt-error",cryptType:J.crypt_type});f.dispatchEvent(_e)}),f.socket.on("on_user_banned",function(J){E.default.info("[".concat(f.clientId,"] user banned uid: ").concat(J.uid," error: ").concat(J.error_code));var _e=Object(B.a)({type:"client-banned",uid:J.uid,attr:J.error_code});f.dispatchEvent(_e),Y=!0}),f.socket.on("on_stream_fallback_update",function(J){E.default.info("[".concat(f.clientId,"] stream fallback peerId: ").concat(J.stream_id," type: ").concat(J.stream_type));var _e=Object(B.a)({type:"stream-fallback",uid:J.stream_id,stream:J.stream_id,attr:J.stream_type});f.dispatchEvent(_e)}),f.socket.on("stream_recover",function(J){E.default.info("[".concat(f.clientId,"] stream recover uid: ").concat(J.id," peerId: ").concat(J.peerid," type: ").concat(J.type));var _e=Object(B.a)({type:"stream-recover",uid:J.id,stream:J.peerid,attr:J.type});f.dispatchEvent(_e)}),f.socket.on("on_p2p_lost",function(J){E.default.debug("[".concat(f.clientId,"] p2plost: "),J,"p2ps:",f.p2ps);var _e,Se="DTLS failed";(_e=f.localStreams[J.uid]||f.remoteStreams[J.uid])?(_e.pc&&_e.pc.offerCandidates&&0===_e.pc.offerCandidates.length&&(Se="NO_CANDIDATES_IN_OFFER"),"publish"===J.event&&U.report.publish(f.joinInfo.sid,{lts:_e.publishLTS,succ:!1,audio:_e.hasAudio(),video:_e.hasVideo(),screenshare:_e.hasScreen(),audioName:_e.hasAudio()&&_e.audioName,videoName:_e.hasVideo()&&_e.videoName,screenName:_e.hasScreen()&&_e.screenName,ec:Se,publishRequestid:f.publishRequestId||0,p2pid:f.p2ps.get(_e.getId())}),"subscribe"===J.event&&U.report.subscribe(f.joinInfo.sid,{lts:_e.subscribeLTS,succ:!1,video:_e.subscribeOptions&&_e.subscribeOptions.video,audio:_e.subscribeOptions&&_e.subscribeOptions.audio,peerid:J.uid+"",ec:Se,subscribeRequestid:f.subscribeRequestId.get(_e.getId())||0,p2pid:f.p2ps.get(_e.getId())})):E.default.warning("P2PLost Stream Not found",J),E.default.debug("[".concat(f.clientId,"] p2plost:"),J.p2pid),(_e=f.p2ps.get(J.p2pid))&&(f.p2ps.delete(J.p2pid),_e.local?f.dispatchEvent(Object(B.a)({type:"pubP2PLost",stream:_e,attr:Se})):f.remoteStreams[_e.getId()]&&f.dispatchEvent(Object(B.a)({type:"subP2PLost",stream:_e,attr:Se})))}),f.socket.on("on_token_privilege_will_expire",function(J){E.default.debug("[".concat(f.clientId,"] Received Message onTokenPrivilegeWillExpire")),f.dispatchEvent(Object(B.a)({type:"onTokenPrivilegeWillExpire"}))}),f.socket.on("on_token_privilege_did_expire",function(){E.default.warning("[".concat(f.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),f.closeGateway(),f.dispatchEvent(Object(B.a)({type:"onTokenPrivilegeDidExpire"}))}),f.socket.on("enable_local_video",function(J){E.default.info("[".concat(f.clientId,"] enable_local_video:"),J),f.dispatchEvent(Object(B.a)({type:"enable-local-video",uid:J.uid}))}),f.socket.on("disable_local_video",function(J){E.default.info("[".concat(f.clientId,"] disable_local_video:"),J),f.dispatchEvent(Object(B.a)({type:"disable-local-video",uid:J.uid}))}),f._doWithAction=function(J,_e,Se){var Re,Ce;"tryNext"===J?(Re=_e,Ce=Se,E.default.debug("[".concat(f.clientId,"] Connect next gateway")),f.state=Me,f.socket.close(),De(),f.reconnectMode="tryNext",f.state=Oe,Ue(Re,Ce)):"retry"===J?function(Re,Ce){E.default.debug("[".concat(f.clientId,"] Reconnect gateway")),f.state=Me,f.socket.close(),De(),f.reconnectMode="retry",f.state=Oe,Ue(Re,Ce)}(_e,Se):"quit"===J?(E.default.debug("[".concat(f.clientId,"] quit gateway")),f.state=Me,f.socket.close(),De()):"recover"===J&&x()},f.socket.on("on_notification",function(J){if(E.default.debug("[".concat(f.clientId,"] Receive notification: "),J),"ERR_JOIN_BY_MULTI_IP"===oe.GatewayErrorCode[J.code])return f.dispatchEvent({type:"onMultiIP",option:J.option});J.detail?f._doWithAction(l[oe.GatewayErrorCode[J.code]]):J.action&&f._doWithAction(J.action)}),f.socket.on("on_user_offline",function(J){E.default.info("[".concat(f.clientId,"] on_user_offline:"),J);var _e=Object(B.a)({type:"peer-leave",uid:J.uid});if(f.remoteStreamsInChannel.has(J.uid)&&f.remoteStreamsInChannel.delete(J.uid),f.remoteStreams.hasOwnProperty(J.uid)&&(_e.stream=f.remoteStreams[J.uid]),_e.reason=J.reason,f.dispatchEvent(_e),E.default.info("[".concat(f.clientId,"] remove remoteMuteState "),J.uid),delete f.remoteMuteState[J.uid],f.remoteStreams.hasOwnProperty(J.uid)){E.default.info("[".concat(f.clientId,"] closing stream on peer leave"),J.uid);var Se=f.remoteStreams[J.uid];Se.close(),delete f.remoteStreams[J.uid],U.report.onRemoveStream(f.joinInfo.sid,{peerid:J.uint_id||J.uid,uid:f.uid}),void 0!==Se.pc&&(Se.pc.close(),Se.pc=void 0,f.p2ps.delete(Se.p2pId))}f.timers.hasOwnProperty(J.uid)&&(clearInterval(f.timers[J.uid]),clearInterval(f.timers[J.uid]+"_RelatedStats"),delete f.timers[J.uid]),null!=f.audioLevel[J.uid]&&delete f.audioLevel[J.uid],null!=f.timer_counter[J.uid]&&delete f.timer_counter[J.uid]}),f.socket.on("onUplinkStats",function(J){}),f.socket.on("liveStreamingStarted",function(J){var _e=Object(B.c)({type:"liveStreamingStarted",url:J.url});f.dispatchEvent(_e)}),f.socket.on("liveStreamingFailed",function(J){var _e=Object(B.c)({type:"liveStreamingFailed",url:J.url});f.dispatchEvent(_e)}),f.socket.on("liveStreamingStopped",function(J){var _e=Object(B.c)({type:"liveStreamingStopped",url:J.url});f.dispatchEvent(_e)}),f.socket.on("liveTranscodingUpdated",function(J){var _e=Object(B.c)({type:"liveTranscodingUpdated",reason:J.reason});f.dispatchEvent(_e)}),f.socket.on("streamInjectedStatus",function(J){var _e=Object(B.c)({type:"streamInjectedStatus",url:J.url,uid:J.uid,status:J.status});f.dispatchEvent(_e)}),f.socket.on("on_user_online",function(J){f.joinInfo.stringUid&&"string"!=typeof J.uid&&E.default.error("StringUID is Mixed with UintUID"),f.dispatchEvent({type:"peer-online",uid:J.uid})}),f.socket.on("receive_metadata",function(J){f.joinInfo.stringUid&&"string"!=typeof J.uid&&E.default.error("StringUID is Mixed with UintUID");var _e=decodeURIComponent(escape(window.atob(J.metadata)));E.default.debug("[".concat(f.clientId,"] received ").concat(J.uid," metadata: ").concat(_e)),f.dispatchEvent({type:"receive-metadata",uid:J.uid,metadata:_e})})},Ke=function(p,ne){if(void 0!==f.socket)try{f.socket.emitSimpleMessage(p,function(fe,me){ne&&ne(fe,me)})}catch(fe){E.default.error("[".concat(f.clientId,"] Error in sendSimpleSdp [").concat(fe,"]"))}else E.default.error("[".concat(f.clientId,"] Error in sendSimpleSdp [socket not ready]"))},Ze=function(){for(var p in f.localStreams)if(void 0!==f.localStreams[p]){var ne=f.localStreams[p];delete f.localStreams[p],void 0!==ne.pc&&(ne.pc.close(),ne.pc=void 0)}},ue=function(){for(var p in f.remoteStreamsInChannel.clear(),f.remoteStreams)if(f.remoteStreams.hasOwnProperty(p)){var ne=f.remoteStreams[p];ne.isPlaying()&&ne.stop(),ne.close(),delete f.remoteStreams[p],void 0!==ne.pc&&(ne.pc.close(),ne.pc=void 0)}};return f},Q={_gatewayClients:{},register:function(W,F){if(!F.uid){var Y="NO_UID_PROVIDED";return E.default.error("[".concat(W.clientId,"] "),Y,F),Y}return F.cname?this._gatewayClients[F.cname]&&this._gatewayClients[F.cname][F.uid]&&this._gatewayClients[F.cname][F.uid]!==W?(Y="UID_CONFLICT",E.default.error("[".concat(W.clientId,"] "),Y,F),Y):(E.default.debug("[".concat(W.clientId,"] register client Channel"),F.cname,"Uid",F.uid),this._gatewayClients[F.cname]||(this._gatewayClients[F.cname]={}),this._gatewayClients[F.cname][F.uid]=W,null):(Y="NO_CHANNEL_PROVIDED",E.default.error("[".concat(W.clientId,"] "),Y,F),Y)},unregister:function(W){var F=W&&W.uid,Y=W.joinInfo&&W.joinInfo.cname;if(!F||!Y){var ve="INVALID_GATEWAYCLIENT";return E.default.error("[".concat(W.clientId,"] "),ve),ve}if(this._gatewayClients[Y]&&this._gatewayClients[Y][F])return this._gatewayClients[Y][F]!==W?(ve="GATEWAYCLIENT_UID_CONFLICT",E.default.error("[".concat(W.clientId,"] "),ve),ve):(E.default.debug("[".concat(W.clientId,"] unregister client "),W.uid),delete this._gatewayClients[Y][F],null);ve="GATEWEAY_CLIENT_UNREGISTERED",E.default.error("[".concat(W.clientId,"] "),ve)}};he.DISCONNECTED=0,he.CONNECTING=1,he.CONNECTED=2,he.DISCONNECTING=3,he.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},re.a=he},function(le,re,j){"use strict";j.r(re),j.d(re,"post",function(){return m}),j.d(re,"postFormData",function(){return h}),j.d(re,"shouldUseHttps",function(){return v}),j.d(re,"getHTTPSendBytes",function(){return N}),j.d(re,"getHTTPRecvBytes",function(){return y}),j.d(re,"resetHTTPByetsCount",function(){return I});var D=j(2),R=j(10),O=0,T=0,N=function(){return O},y=function(){return T},I=function(){O=0,T=0},h=function(k,B,w,E,U){var P=new XMLHttpRequest;if(P.timeout=B.timeout||Object(D.getParameter)("HTTP_CONNECT_TIMEOUT"),P.open("POST",k,!0),U)for(var G in U)"withCredentials"==G?P.withCredentials=!0:P.setRequestHeader(G,U[G]);P.onload=function(se){T+=Object(R.lengthInUtf8Bytes)(P.responseText),200!==P.status?E&&E({httpErrorCode:"httpcode-xhr.status"},k):w&&w(P.responseText)},P.onerror=function(se){E&&E(se,k)},P.ontimeout=function(se){E&&E(se,k)};var V=JSON.stringify(B);O+=Object(R.lengthInUtf8Bytes)(V);var ee=new FormData;ee.append("request",V),P.send(ee)},m=function(k,B,w,E,U){var P=new XMLHttpRequest;if(P.timeout=B.timeout||Object(D.getParameter)("HTTP_CONNECT_TIMEOUT"),P.open("POST",k,!0),P.setRequestHeader("Content-type","application/json; charset=utf-8"),U)for(var G in U)"withCredentials"==G?P.withCredentials=!0:P.setRequestHeader(G,U[G]);P.onload=function(ee){T+=Object(R.lengthInUtf8Bytes)(P.responseText),200!==P.status?E&&E({httpErrorCode:"httpcode-xhr.status"},k):w&&w(P.responseText)},P.onerror=function(ee){E&&E(ee,k)},P.ontimeout=function(ee){E&&E(ee,k)};var V=JSON.stringify(B);O+=Object(R.lengthInUtf8Bytes)(V),P.send(V)},v=function(){return"https:"==document.location.protocol}},function(le,re,j){"use strict";j.r(re),j.d(re,"RTCPeerConnection",function(){return te}),j.d(re,"getUserMedia",function(){return T}),j.d(re,"attachMediaStream",function(){return N}),j.d(re,"reattachMediaStream",function(){return y}),j.d(re,"setSrcObject",function(){return k}),j.d(re,"getSrcObject",function(){return B}),j.d(re,"webrtcDetectedBrowser",function(){return I}),j.d(re,"webrtcDetectedVersion",function(){return h}),j.d(re,"webrtcMinimumVersion",function(){return m}),j.d(re,"webrtcTesting",function(){return oe}),j.d(re,"webrtcUtils",function(){return U});var D=j(11),R=j.n(D),O=j(5),T=null,N=null,y=null,I=null,h=null,m=null,v=null,k=null,B=null,w=null,E={addStream:null},U={log:function(){},extractVersion:function($,b,l){var H=$.match(b);return H&&H.length>=l&&parseInt(H[l])}};if("object"==("undefined"==typeof window?"undefined":R()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(k=function($,b){"mozSrcObject"in $?$.mozSrcObject=b:($._srcObject=b,$.src=b?URL.createObjectURL(b):null)},B=function($){return"mozSrcObject"in $?$.mozSrcObject:$._srcObject}):(k=function($,b){$.srcObject=b},B=function($){return $.srcObject}),T=window.navigator&&window.navigator.getUserMedia):(k=function($,b){$.srcObject=b},B=function($){return $.srcObject}),N=function($,b){k($,b)},y=function($,b){k($,B(b))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var P in U.log("This appears to be Firefox"),I="firefox",h=U.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),m=31,w=mozRTCPeerConnection,E)E[P]=w.prototype[P];if(v=function($,b){if(h<38&&$&&$.iceServers){for(var l=[],H=0;H<$.iceServers.length;H++){var _=$.iceServers[H];if(_.hasOwnProperty("urls"))for(var u=0;u<_.urls.length;u++){var q={url:_.urls[u]};0===_.urls[u].indexOf("turn")&&(q.username=_.username,q.credential=_.credential),l.push(q)}else l.push($.iceServers[H])}$.iceServers=l}var g=new w($,b);for(var C in E)g[C]=E[C];return g},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),T=function($,b,l){var H=function(_){if("object"!==R()(_)||_.require)return _;var u=[];return Object.keys(_).forEach(function(q){if("require"!==q&&"advanced"!==q&&"mediaSource"!==q){var g=_[q]="object"===R()(_[q])?_[q]:{ideal:_[q]};if(void 0===g.min&&void 0===g.max&&void 0===g.exact||u.push(q),void 0!==g.exact&&("number"==typeof g.exact?g.min=g.max=g.exact:_[q]=g.exact,delete g.exact),void 0!==g.ideal){_.advanced=_.advanced||[];var C={};C[q]="number"==typeof g.ideal?{min:g.ideal,max:g.ideal}:g.ideal,_.advanced.push(C),delete g.ideal,Object.keys(g).length||delete _[q]}}}),u.length&&(_.require=u),_};return h<38&&(U.log("spec: "+JSON.stringify($)),$.audio&&($.audio=H($.audio)),$.video&&($.video=H($.video)),U.log("ff37: "+JSON.stringify($))),navigator.mozGetUserMedia($,b,l)},navigator.getUserMedia=T,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:se,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function($){$([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},h<41){var G=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return G().then(void 0,function($){if("NotFoundError"===$.name)return[];throw $})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var P in U.log("This appears to be Chrome"),I="chrome",h=U.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),m=38,w=webkitRTCPeerConnection,E)E[P]=w.prototype[P];v=function($,b){$&&$.iceTransportPolicy&&($.iceTransports=$.iceTransportPolicy);var l=new w($,b);for(var H in E)l[H]=E[H];var _=l.getStats.bind(l);return l.getStats=function(u,q,g){var C=arguments;C.length>0&&"function"==typeof u&&(q?(g=q,q=u,C=[u=null,q,g]):(q=u,C=[u=null,q]));var L=function(ie){var he={};return ie.result().forEach(function(Q){var W={id:Q.id,timestamp:Q.timestamp,type:Q.type};Q.names().forEach(function(F){W[F]=Q.stat(F)}),he[W.id]=W}),he};if(C.length>=2){var K=function(ie){C[1](L(ie))};return _.apply(this,[K,C[0]])}return _()},l},["createOffer","createAnswer"].forEach(function($){var b=webkitRTCPeerConnection.prototype[$];webkitRTCPeerConnection.prototype[$]=function(){var l=this;if(arguments.length<1||1===arguments.length&&"object"===R()(arguments[0])){var H=1===arguments.length?arguments[0]:void 0;return new Promise(function(_,u){b.apply(l,[_,u,H])})}return b.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function($){var b=webkitRTCPeerConnection.prototype[$];webkitRTCPeerConnection.prototype[$]=function(){var l=arguments,H=this;return new Promise(function(_,u){b.apply(H,[l[0],function(){_(),l.length>=2&&l[1].apply(null,[])},function(q){u(q),l.length>=3&&l[2].apply(null,[q])}])})}});var V=function($){if("object"!==R()($)||$.mandatory||$.optional)return $;var b={};return Object.keys($).forEach(function(l){if("require"!==l&&"advanced"!==l&&"mediaSource"!==l){var H="object"===R()($[l])?$[l]:{ideal:$[l]};void 0!==H.exact&&"number"==typeof H.exact&&(H.min=H.max=H.exact);var _=function(q,g){return q?q+g.charAt(0).toUpperCase()+g.slice(1):"deviceId"===g?"sourceId":g};if(void 0!==H.ideal){b.optional=b.optional||[];var u={};"number"==typeof H.ideal?(u[_("min",l)]=H.ideal,b.optional.push(u),(u={})[_("max",l)]=H.ideal,b.optional.push(u)):(u[_("",l)]=H.ideal,b.optional.push(u))}void 0!==H.exact&&"number"!=typeof H.exact?(b.mandatory=b.mandatory||{},b.mandatory[_("",l)]=H.exact):["min","max"].forEach(function(q){void 0!==H[q]&&(b.mandatory=b.mandatory||{},b.mandatory[_(q,l)]=H[q])})}}),$.advanced&&(b.optional=(b.optional||[]).concat($.advanced)),b};if(T=function($,b,l){return $.audio&&($.audio=V($.audio)),$.video&&($.video=V($.video)),U.log("chrome: "+JSON.stringify($)),navigator.webkitGetUserMedia($,b,l)},navigator.getUserMedia=T,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:se,enumerateDevices:function(){return new Promise(function($){var b={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(l){$(l.map(function(H){return{label:H.label,kind:b[H.kind],deviceId:H.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){if((Object(O.getBrowserVersion)()?Number(Object(O.getBrowserVersion)().split(".")[0]):void 0)<46){var ee=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function($){return U.log("spec:   "+JSON.stringify($)),$.audio=V($.audio),$.video=V($.video),U.log("chrome: "+JSON.stringify($)),ee($)}}}else navigator.mediaDevices.getUserMedia=function($){return se($)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){U.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){U.log("Dummy mediaDevices.removeEventListener called.")}),N=function($,b){h>=43?k($,b):void 0!==$.src?$.src=b?URL.createObjectURL(b):null:U.log("Error attaching stream to element.")},y=function($,b){h>=43?k($,B(b)):$.src=b.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(U.log("This appears to be Edge"),I="edge",h=U.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),m=12):U.log("Browser does not appear to be WebRTC-capable");else U.log("This does not appear to be a browser"),I="not a browser";function se($){return new Promise(function(b,l){T($,b,l)})}var te,oe={};try{Object.defineProperty(oe,"version",{set:function($){h=$}})}catch($){}v?te=v:"undefined"!=typeof window&&(te=window.RTCPeerConnection)},function(le,re,j){"use strict";var D=j(12),R=j.n(D),O=j(17),T=j.n(O),N=j(48),y=j.n(N),I=j(5),h=j(1),m=j(3),v=j(0),k=(j(25),j(2),j(4),j(49)),B=j.n(k),w=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function E(u){for(var q=new Uint8Array([99,114,121,112,116,105,105]),g=q.length,C=u,L=C.length,K=new Uint8Array(L),ie=new Uint8Array(256),he=0;he<256;he++)ie[he]=he;for(var Q=0,W=0;W<256;W++){var F=[ie[Q=(Q+ie[W]+q[W%g])%256],ie[W]];ie[W]=F[0],ie[Q]=F[1]}var ve=0;Q=0;for(var de=0;de<0+L;de++){var ce=[ie[Q=(Q+ie[ve=(ve+1)%256])%256],ie[ve]];ie[ve]=ce[0],ie[Q]=ce[1],de>=0&&(K[de-0]=C[de-0]^ie[(ie[ve]+ie[Q])%256])}var Te=String.fromCharCode.apply(null,K);return Function("var winSize = 5; return `"+Te+"`")()}function U(u,q){var g=E(q),C=B.a.createProgramFromSources(u,[E(w),g]),L=u.getAttribLocation(C,"a_position"),K=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,K),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),u.STATIC_DRAW),u.enableVertexAttribArray(L);var ie=2,he=u.FLOAT,Q=!1,W=0,F=0;u.vertexAttribPointer(L,ie,he,Q,W,F);var Y=u.getAttribLocation(C,"a_texCoord"),ve=u.createBuffer();return u.bindBuffer(u.ARRAY_BUFFER,ve),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),u.STATIC_DRAW),u.enableVertexAttribArray(Y),u.vertexAttribPointer(Y,ie=2,he=u.FLOAT,Q=!1,W=0,F=0),C}var P=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function G(u,q,g){var C=u.gl;this.program=U(C,P),this.setUniforms=function(){C.getUniformLocation(this.program,"u_image");var L=C.getUniformLocation(this.program,"u_flipY");C.uniform1f(L,1)}}var V=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function ee(u,q,g){var C=u.gl,L=1/q,K=1/g,ie=5;this.program=U(C,V),this.setUniforms=function(){C.getUniformLocation(this.program,"u_image");var he=C.getUniformLocation(this.program,"u_flipY"),Q=C.getUniformLocation(this.program,"u_singleStepOffset"),W=C.getUniformLocation(this.program,"u_denoiseLevel");C.uniform2f(Q,L,K),C.uniform1f(W,ie),C.uniform1f(he,1)},this.setParameters=function(he){void 0!==he.denoiseLevel&&(ie=he.denoiseLevel)},this.setSize=function(he,Q){L=1/he,K=1/Q}}var se=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function te(u,q,g){var C=u.gl,L=1/q,K=1/g,ie=5;this.program=U(C,se),this.setUniforms=function(){C.getUniformLocation(this.program,"u_image");var he=C.getUniformLocation(this.program,"u_flipY"),Q=C.getUniformLocation(this.program,"u_singleStepOffset"),W=C.getUniformLocation(this.program,"u_denoiseLevel");C.uniform2f(Q,L,K),C.uniform1f(W,ie),C.uniform1f(he,1)},this.setParameters=function(he){void 0!==he.denoiseLevel&&(ie=he.denoiseLevel)},this.setSize=function(he,Q){L=1/he,K=1/Q}}var oe=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function $(u,q,g){var C=u.gl,L=1/q,K=1/g,ie=5;this.program=U(C,oe),this.setUniforms=function(){C.getUniformLocation(this.program,"u_image");var he=C.getUniformLocation(this.program,"u_flipY"),Q=C.getUniformLocation(this.program,"u_singleStepOffset"),W=C.getUniformLocation(this.program,"u_denoiseLevel");C.uniform2f(Q,L,K),C.uniform1f(W,ie),C.uniform1f(he,1)},this.setParameters=function(he){void 0!==he.denoiseLevel&&(ie=he.denoiseLevel)},this.setSize=function(he,Q){L=1/he,K=1/Q}}var b=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function l(u,q,g){var C=u.gl,L=5,K=.1,ie=.5,he=175/180*3.141593,Q=115/180*3.141593,W=173/180*3.141593,F=116/180*3.141593,Y=2.04203545,ve=0,de=0,ce=0,Te=[],Me=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Oe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],Ae=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=U(C,b),this.setUniforms=function(){var Le=C.getUniformLocation(this.program,"u_flipY"),We=C.getUniformLocation(this.program,"u_denoiseLevel");C.uniform1f(We,L),C.uniform1f(Le,1);var f=C.getUniformLocation(this.program,"light");C.uniform1f(f,K);var ye=C.getUniformLocation(this.program,"redness");C.uniform1f(ye,ie);var x=C.getUniformLocation(this.program,"skin_he_max"),De=C.getUniformLocation(this.program,"skin_he_min"),Ue=C.getUniformLocation(this.program,"skin_hc_max"),Ve=C.getUniformLocation(this.program,"skin_hc_min"),Ke=C.getUniformLocation(this.program,"skin_hc_axis"),Ze=C.getUniformLocation(this.program,"facts_rotate_c"),ue=C.getUniformLocation(this.program,"facts_rotate_le"),p=C.getUniformLocation(this.program,"facts_rotate_ge");C.uniform1f(x,he),C.uniform1f(De,Q),C.uniform1f(Ue,W),C.uniform1f(Ve,F),C.uniform1f(Ke,Y),C.uniform1f(Ze,ve),C.uniform1f(ue,de),C.uniform1f(p,ce);var ne=C.getUniformLocation(this.program,"u_originImage");C.activeTexture(C.TEXTURE2),C.bindTexture(C.TEXTURE_2D,u.inputTexture),C.uniform1i(ne,2);for(var fe=["lighten_lut"],me=[C.TEXTURE3],pe=0;pe<fe.length;pe++){var J=C.getUniformLocation(this.program,fe[pe]);C.activeTexture(me[pe]),C.bindTexture(C.TEXTURE_2D,Te[pe]),C.uniform1i(J,pe+3)}},this.setParameters=function(Le){void 0!==Le.denoiseLevel&&(L=Le.denoiseLevel),void 0!==Le.lightLevel&&(K=Le.lightLevel),void 0!==Le.rednessLevel&&this._updateRedness(ie=Le.rednessLevel),void 0!==Le.lighteningContrastLevel&&this._updateLut(Le.lighteningContrastLevel)},this._updateRedness=function(Le){var We,f,ye=3.141593,x=Le,De=x;x>1&&(x=1),x<0&&(x=0),De>1&&(De=1),De<0&&(De=0),ve=.8*x,De<.8&&(De=0),(Y=(117-4*De)/180*ye)<(F=(116-4*De)/180*ye)&&(Y=F),F<ye/2&&(F=ye/2),Y<ye/2&&(Y=ye/2),(Q=(115-4*De)/180*ye)<ye/2&&(Q=ye/2),(W=173/180*ye)>ye&&(W=ye),Y>ye&&(Y=ye),(he=175/180*ye)>ye&&(he=ye),f=W-Y,ce=(We=he-W)>.01?ve*f/We:ve,f=Y-F,de=(We=F-Q)>.01?ve*f/We:ve},this._updateLut=function(Le){var We=null;0==Le&&(We=Oe),1==Le&&(We=Ae),2==Le&&(We=Me);for(var f=[new Uint8Array(We)],ye=[256],x=[1],De=0;De<f.length;De++)C.bindTexture(C.TEXTURE_2D,Te[De]),C.texImage2D(C.TEXTURE_2D,0,C.LUMINANCE,ye[De],x[De],0,C.LUMINANCE,C.UNSIGNED_BYTE,f[De])},this._init=function(){for(var We=[new Uint8Array(Oe)],f=[256],ye=[1],x=0;x<We.length;x++){var De=C.createTexture();C.bindTexture(C.TEXTURE_2D,De),C.texImage2D(C.TEXTURE_2D,0,C.LUMINANCE,f[x],ye[x],0,C.LUMINANCE,C.UNSIGNED_BYTE,We[x]),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.LINEAR),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.LINEAR),Te.push(De)}},this._init()}var H=!1;function _(){this.programs=[];var u=this,q=null,g=null;u.gl=null,u.inputTexture=null;var C=[],L=[],K=0,ie=0;u._initGl=function(he,Q){u.inputTexture=q.createTexture(),q.bindTexture(q.TEXTURE_2D,u.inputTexture),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR);for(var W=0;W<4;W++){var F=q.createTexture();q.bindTexture(q.TEXTURE_2D,F),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),W<2?q.texImage2D(q.TEXTURE_2D,0,q.RGBA,he,Q,0,q.RGBA,q.UNSIGNED_BYTE,null):q.texImage2D(q.TEXTURE_2D,0,q.RGBA,Q,he,0,q.RGBA,q.UNSIGNED_BYTE,null);var Y=q.createFramebuffer();q.bindFramebuffer(q.FRAMEBUFFER,Y),q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,F,0),C.push(F),L.push(Y)}q.viewport(0,0,he,Q),K=he,ie=Q},u.render=function(he){if(q){var Q=0;ie==he.videoWidth&&K===he.videoHeight&&(Q=2),q.viewport(0,0,he.videoWidth,he.videoHeight),q.bindTexture(q.TEXTURE_2D,u.inputTexture),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,he);for(var W=H?u.programs.length-1:0,F=0;F<=W;F++){var Y=u.programs[F].program;q.useProgram(Y);var ve=q.getUniformLocation(Y,"u_image");u.programs[F].setUniforms(),q.bindFramebuffer(q.FRAMEBUFFER,L[Q+F%2]),q.clearColor(0,0,0,1),q.clear(q.COLOR_BUFFER_BIT),q.drawArrays(q.TRIANGLES,0,6),q.activeTexture(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,C[Q+F%2]),q.uniform1i(ve,0)}q.useProgram(g);var de=q.getUniformLocation(g,"u_flipY");q.uniform1f(de,-1),q.bindFramebuffer(q.FRAMEBUFFER,null),q.clearColor(0,0,0,1),q.clear(q.COLOR_BUFFER_BIT),q.drawArrays(q.TRIANGLES,0,6)}},u.setEnableBeauty=function(he){H=he},u.init=function(he,Q,W){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");q=W.getContext("webgl"),u.gl=q,u._initGl(he,Q),u.programs.push(new G(this,he,Q)),u.programs.push(new ee(this,he,Q)),u.programs.push(new te(this,he,Q)),u.programs.push(new $(this,he,Q)),u.programs.push(new l(this,he,Q)),g=u.programs[0].program},u.release=function(){u.gl=null,q=null,g=null,u.inputTexture=null,u.programs=[],C=[],L=[]},u.setDenoiseLevel=function(he){u.programs.forEach(function(Q){Q.setParameters&&Q.setParameters({denoiseLevel:he})})},u.setLightLevel=function(he){u.programs.forEach(function(Q){Q.setParameters&&Q.setParameters({lightLevel:he})})},u.setRednessLevel=function(he){u.programs.forEach(function(Q){Q.setParameters&&Q.setParameters({rednessLevel:he})})},u.setContrastLevel=function(he){u.programs.forEach(function(Q){Q.setParameters&&Q.setParameters({lighteningContrastLevel:he})})},u.setSize=function(he,Q){u.programs.forEach(function(W){W.setSize&&W.setSize(he,Q)})}}_._instance=null,_.getInstance=function(){return _._instance||(_._instance=new _),_._instance},re.a={addVideoEffectCapability:function(u){var q;u.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},u._initVideoContext=function(){if(u.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!u.stream)throw new Error("Failed to init video context. Local Stream not initialized");u.videoEffect.originVideoTrack=u.stream.getVideoTracks()[0],u.attributes&&u.attributes.maxFrameRate&&(u.videoEffect.fps=u.attributes.maxFrameRate),u.videoEffect.videoContextInited=!0},u._renderWithWebGL=function(q){return new Promise(function(g){u.videoEffect.canvas||(u.videoEffect.canvas=document.createElement("canvas")),u.videoEffect.video||(u.videoEffect.video=document.createElement("video")),u.videoEffect.video.setAttribute("autoplay",""),u.videoEffect.video.setAttribute("muted",""),u.videoEffect.video.muted=!0,u.videoEffect.video.setAttribute("playsinline",""),u.videoEffect.video.setAttribute("style","display:none"),u.videoEffect.video.srcObject=q;var C=q.getVideoTracks()[0].getSettings(),L=C.width,K=C.height;console.log("Width: ".concat(L,", Height: ").concat(K)),u.videoEffect.canvas.setAttribute("width",L),u.videoEffect.canvas.setAttribute("height",K),u.videoEffect.video.setAttribute("width",L),u.videoEffect.video.setAttribute("height",K);var ie=_.getInstance();ie.init(u.videoEffect.video.width,u.videoEffect.video.height,u.videoEffect.canvas),ie.setDenoiseLevel(u.videoEffect.denoiseLevel),ie.setLightLevel(u.videoEffect.lightLevel),ie.setRednessLevel(u.videoEffect.rednessLevel),ie.setContrastLevel(u.videoEffect.lighteningContrastLevel),u.videoEffect.video.addEventListener("playing",function he(){var Q=u.videoEffect.canvas.captureStream(u.videoEffect.fps);u.videoEffect.video.removeEventListener("playing",he,!0),g([Q.getVideoTracks()[0],u.videoEffect.video])},!0),u.videoEffect.video.play()})},u._disableEffect=function(){u.videoEffect.videoContextInited||u._initVideoContext();var q=u.videoEffect.originVideoTrack;if(!q)return v.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(u.pc&&u.pc.peerConnection&&u.pc.peerConnection){var g=(u.pc.peerConnection&&u.pc.peerConnection.getSenders()).find(function(C){return C&&C.track&&"video"==C.track.kind});if(g&&g.replaceTrack&&q)return g.replaceTrack(q)}return Promise.resolve()},u._releaseEffect=function(){var q;return q=u.videoEffect.enableBeauty?u._disableEffect():Promise.resolve(),_.getInstance().release(),u.videoEffect.videoContextInited=!1,u.videoEffect.canvasVideoTrack=null,q},u._enableEffect=function(){return u.videoEffect.videoContextInited||u._initVideoContext(),u.videoEffect.originVideoTrack?u.videoEffect.canvasVideoTrack?(u._showEffectInLocalPlayer(),u._replaceWithCanvasTrack()):u._renderWithWebGL(u.stream).then(function(q){var g=y()(q,2),L=g[1];u.videoEffect.canvasVideoTrack=g[0];var K=_.getInstance();return requestAnimationFrame(function ie(){u.videoEffect.enableBeauty&&K.render(L),u.videoEffect.videoContextInited&&requestAnimationFrame(ie)}),I.isChrome()&&document.addEventListener("visibilitychange",function(){document,document.hidden?u.videoEffect.stopChromeBackgroundLoop=function(ie,he){var Q=1/he,W=new AudioContext,F=W.createGain();F.gain.value=0,F.connect(W.destination),function ve(){var de=W.createOscillator();de.onended=ve,de.connect(F),de.start(0),de.stop(W.currentTime+Q),u.videoEffect.enableBeauty&&K.render(L),Y&&(de.onended=function(){W.close()})}();var Y=!1;return function(){Y=!0}}(0,u.videoEffect.fps):u.videoEffect.stopChromeBackgroundLoop&&(u.videoEffect.stopChromeBackgroundLoop(),u.videoEffect.stopChromeBackgroundLoop=null)},!1),u._showEffectInLocalPlayer(),u._replaceWithCanvasTrack()}):(v.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},u._showEffectInLocalPlayer=function(){if(u.player){var q=u.player.div.children[0];if("none"!==q.style.display&&(u.player.div.appendChild(u.videoEffect.canvas),"video"===q.tagName.toLowerCase())){var g=q.getAttribute("style");u.videoEffect.canvas.setAttribute("style",g),"none"!==q.style.display&&(q.style.display="none")}}},u._removeEffectFromLocalPlayer=function(){if(u.player&&u.player.div&&u.videoEffect.enableBeauty&&u.videoEffect.canvas){u.player.div.removeChild(u.videoEffect.canvas);var q=u.player.div.children[0];"video"===q.tagName.toLowerCase()&&(u.videoEffect.canvas.style.display="none",q.style.display="block")}},u._replaceWithCanvasTrack=function(){var q=null;return u.pc&&u.pc.peerConnection&&u.pc.peerConnection&&(q=(u.pc.peerConnection&&u.pc.peerConnection.getSenders()).find(function(g){return g&&g.track&&"video"==g.track.kind})),q&&q.replaceTrack&&u.videoEffect.canvasVideoTrack?q.replaceTrack(u.videoEffect.canvasVideoTrack):Promise.resolve()},u.setBeautyEffectOptions=(q=T()(R.a.mark(function g(C,L){var K,ie=arguments;return R.a.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(Object(m.checkValidBoolean)(C,"enabled"),K=_.getInstance(),u.videoEffect.enableBeauty==C){he.next=14;break}if(K.setEnableBeauty(C),!C){he.next=9;break}return he.next=7,u._enableEffect();case 7:he.next=12;break;case 9:return u._removeEffectFromLocalPlayer(),he.next=12,u._releaseEffect();case 12:u.videoEffect.enableBeauty=C,h.report.reportApiInvoke(u.sid,{callback:null,options:ie,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(C){he.next=16;break}return he.abrupt("return");case 16:if(!L){he.next=20;break}Object(m.checkValidObject)(L,"options"),he.next=21;break;case 20:return he.abrupt("return");case 21:if(void 0!==L.smoothnessLevel&&(Object(m.checkValidFloatNumber)(L.smoothnessLevel,"smoothnessLevel",0,1),u.videoEffect.denoiseLevel=10*L.smoothnessLevel,u.videoEffect.denoiseLevel<.1&&(u.videoEffect.denoiseLevel=.1),K.setDenoiseLevel(u.videoEffect.denoiseLevel)),void 0!==L.lighteningLevel&&(Object(m.checkValidFloatNumber)(L.lighteningLevel,"lighteningLevel",0,1),u.videoEffect.lightLevel=L.lighteningLevel/2,u.videoEffect.lightLevel<.01&&(u.videoEffect.lightLevel=.01),K.setLightLevel(u.videoEffect.lightLevel)),void 0!==L.rednessLevel&&(Object(m.checkValidFloatNumber)(L.rednessLevel,"rednessLevel",0,1),u.videoEffect.rednessLevel=L.rednessLevel,u.videoEffect.rednessLevel<.01&&(u.videoEffect.rednessLevel=.01),K.setRednessLevel(u.videoEffect.rednessLevel)),void 0===L.lighteningContrastLevel){he.next=29;break}if(0===L.lighteningContrastLevel||1===L.lighteningContrastLevel||2===L.lighteningContrastLevel){he.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:u.videoEffect.lighteningContrastLevel=parseFloat(L.lighteningContrastLevel),K.setContrastLevel(u.videoEffect.lighteningContrastLevel);case 29:case"end":return he.stop()}},g)})),function(g,C){return q.apply(this,arguments)})},restoreVideoEffect:function(u){return u.videoEffect.enableBeauty?u._enableEffect():Promise.resolve()},disableVideoEffect:function(u){return u._releaseEffect?u._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(u){u.videoEffect.enableBeauty&&u.videoEffect.canvas&&u._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(u){u._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(u){return u.videoEffect.enableBeauty?u._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(u){return!!(u.videoEffect.enableBeauty&&u.videoEffect&&u.videoEffect.videoContextInited)&&(v.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(le,re){function j(D,R,O,T,N,y,I){try{var h=D[y](I),m=h.value}catch(v){return void O(v)}h.done?R(m):Promise.resolve(m).then(T,N)}le.exports=function(D){return function(){var R=this,O=arguments;return new Promise(function(T,N){var y=D.apply(R,O);function I(m){j(y,T,N,I,h,"next",m)}function h(m){j(y,T,N,I,h,"throw",m)}I(void 0)})}}},function(le,re,j){"use strict";var D=j(35),R=Object.prototype.toString;function O(h){return"[object Array]"===R.call(h)}function T(h){return void 0===h}function N(h){return null!==h&&"object"==typeof h}function y(h){return"[object Function]"===R.call(h)}function I(h,m){if(null!=h)if("object"!=typeof h&&(h=[h]),O(h))for(var v=0,k=h.length;v<k;v++)m.call(null,h[v],v,h);else for(var B in h)Object.prototype.hasOwnProperty.call(h,B)&&m.call(null,h[B],B,h)}le.exports={isArray:O,isArrayBuffer:function(h){return"[object ArrayBuffer]"===R.call(h)},isBuffer:function(h){return null!==h&&!T(h)&&null!==h.constructor&&!T(h.constructor)&&"function"==typeof h.constructor.isBuffer&&h.constructor.isBuffer(h)},isFormData:function(h){return"undefined"!=typeof FormData&&h instanceof FormData},isArrayBufferView:function(h){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(h):h&&h.buffer&&h.buffer instanceof ArrayBuffer},isString:function(h){return"string"==typeof h},isNumber:function(h){return"number"==typeof h},isObject:N,isUndefined:T,isDate:function(h){return"[object Date]"===R.call(h)},isFile:function(h){return"[object File]"===R.call(h)},isBlob:function(h){return"[object Blob]"===R.call(h)},isFunction:y,isStream:function(h){return N(h)&&y(h.pipe)},isURLSearchParams:function(h){return"undefined"!=typeof URLSearchParams&&h instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:I,merge:function h(){var m={};function v(w,E){m[E]="object"==typeof m[E]&&"object"==typeof w?h(m[E],w):w}for(var k=0,B=arguments.length;k<B;k++)I(arguments[k],v);return m},deepMerge:function h(){var m={};function v(w,E){m[E]="object"==typeof m[E]&&"object"==typeof w?h(m[E],w):"object"==typeof w?h({},w):w}for(var k=0,B=arguments.length;k<B;k++)I(arguments[k],v);return m},extend:function(h,m,v){return I(m,function(k,B){h[B]=v&&"function"==typeof k?D(k,v):k}),h},trim:function(h){return h.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(le,re,j){"use strict";j.d(re,"a",function(){return h});var D=j(7),R=j.n(D),O=j(8),T=j(0),N=j(4);function I(m,v){(null==v||v>m.length)&&(v=m.length);for(var k=0,B=new Array(v);k<v;k++)B[k]=m[k];return B}var h=new function(){var m=Object(O.b)();return m.devicesHistory={},m.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},m.state=m.states.UNINIT,m.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},m.deviceReloadTimer=null,m._init=function(v,k){m.state=m.states.INITING,m.devicesHistory={},m._reloadDevicesInfo(function(){m.state=m.states.INITED,m.dispatchEvent({type:"inited"}),v&&v()},function(B){T.default.warning("Device Detection functionality cannot start properly."),m.state=m.states.UNINIT,k&&k(B)})},m._enumerateDevices=function(v,k){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return T.default.warning("enumerateDevices() not supported."),k&&k("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then(function(B){v&&setTimeout(function(){v(B)},0)}).catch(function(B){k&&k(B)})},m._reloadDevicesInfo=function(v,k){var B=[];m._enumerateDevices(function(w){var E=Date.now();for(var U in w.forEach(function(G){var V=m.devicesHistory[G.deviceId];if((V?V.state:m.deviceStates.INACTIVE)!=m.deviceStates.ACTIVE){var ee=V||{initAt:E};ee.device=G,ee.state=m.deviceStates.ACTIVE,B.push(ee),m.devicesHistory[G.deviceId]=ee}m.devicesHistory[G.deviceId].lastReloadAt=E}),m.devicesHistory){var P=m.devicesHistory[U];P&&P.state==m.deviceStates.ACTIVE&&P.lastReloadAt!==E&&(P.state=m.deviceStates.INACTIVE,B.push(P)),P.lastReloadAt=E}m.state==m.states.INITED&&B.forEach(function(G){var V=R()({},G);switch(G.device.kind){case"audioinput":V.type="recordingDeviceChanged";break;case"audiooutput":V.type="playoutDeviceChanged";break;case"videoinput":V.type="cameraChanged";break;default:T.default.warning("Unknown device change",V),V.type="unknownDeviceChanged"}m.dispatchEvent(V)}),v&&v()},k)},m.getDeviceById=function(v,k,B){m.getDevices(function(w){for(var E=0;E<w.length;E++){var U=w[E];if(U&&U.deviceId===v)return k&&k(U)}return B&&B()})},m.searchDeviceNameById=function(v){var k=m.devicesHistory[v];return k?k.device.label||k.device.deviceId:null},m.getDevices=function(v,k){m._enumerateDevices(v,function(B){k&&k(B.name+": "+B.message)})},m.getVideoCameraIdByLabel=function(v,k,B){m.getCameras(function(w){var E,U=function(m){if("undefined"==typeof Symbol||null==m[Symbol.iterator]){if(Array.isArray(m)||(m=function(P,G){if(P){if("string"==typeof P)return I(P,G);var V=Object.prototype.toString.call(P).slice(8,-1);if("Object"===V&&P.constructor&&(V=P.constructor.name),"Map"===V||"Set"===V)return Array.from(V);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return I(P,G)}}(m))){var v=0,k=function(){};return{s:k,n:function(){return v>=m.length?{done:!0}:{done:!1,value:m[v++]}},e:function(P){throw P},f:k}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var B,w,E=!0,U=!1;return{s:function(){B=m[Symbol.iterator]()},n:function(){var P=B.next();return E=P.done,P},e:function(P){U=!0,w=P},f:function(){try{E||null==B.return||B.return()}finally{if(U)throw w}}}}(w);try{for(U.s();!(E=U.n()).done;){var P=E.value;if(P.label===v)return k&&k(P.deviceId)}}catch(G){U.e(G)}finally{U.f()}return B&&B(N.default.NOT_FIND_DEVICE_BY_LABEL)},B)},m.getRecordingDevices=function(v,k){return m._enumerateDevices(function(B){var w=B.filter(function(E){return"audioinput"==E.kind});v&&v(w)},function(B){k&&k(B)})},m.getPlayoutDevices=function(v,k){return m._enumerateDevices(function(B){var w=B.filter(function(E){return"audiooutput"==E.kind});v&&v(w)},function(B){k&&k(B)})},m.getCameras=function(v,k){return m._enumerateDevices(function(B){var w=B.filter(function(E){return"videoinput"==E.kind});v&&v(w)},function(B){k&&k(B)})},m._init(function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",function(){m._reloadDevicesInfo()}),m.deviceReloadTimer=setInterval(m._reloadDevicesInfo,5e3)}),m}},function(le,re,j){"use strict";j.r(re),j.d(re,"_getReconnectCSTimer",function(){return te}),j.d(re,"_setClientConnectionStateRecord",function(){return oe}),j.d(re,"getGatewayList",function(){return b}),j.d(re,"getUserAccount",function(){return H});var D=j(11),R=j.n(D),O=j(12),T=j.n(O),N=j(17),y=j.n(N),I=j(2),h=(j(5),j(0)),m=j(14),v=j(1),k=j(4),B=function(_,u){var q=!1,g=0,C=Object(I.getParameter)("PROXY_CS"),L=Object(I.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),K=0,ie={command:"convergeAllocateEdge",sid:_.sid,appId:_.appId,token:_.token,uid:_.uid,cname:_.cname,ts:Math.floor(Date.now()/1e3),version:I.VERSION,seq:0,requestId:1},he=function(W){var F=(new Date).getTime();w("https://"+W+"/api/v1",ie,function(Y,ve){if(Y)return h.default.debug("["+_.clientId+"] Request proxy server failed: ",Y),g++,v.report.requestProxyAppCenter(_.sid,{lts:F,succ:!1,APAddr:W,workerManagerList:null,ec:JSON.stringify(Y),response:JSON.stringify({err:Y,res:ve})}),g>=C.length&&u&&u("Get proxy server failed: request all failed"),void(!(g%L)&&g<C.length&&(K++,Q()));if(!q)if((ve=JSON.parse(ve)).json_body){var de=JSON.parse(ve.json_body);if(h.default.debug("["+_.clientId+"] App return:",de.servers),200!==de.code)g++,h.default.debug("["+_.clientId+"] "+(Y="Get proxy server failed: response code ["+de.code+"], reason [ "+de.reason+"]")),v.report.requestProxyAppCenter(_.sid,{lts:F,succ:!1,APAddr:W,workerManagerList:null,ec:Y,response:JSON.stringify({err:Y,res:ve})}),g>=C.length&&u&&u(Y),!(g%L)&&g<C.length&&(K++,Q());else{q=!0;var ce=U(de.servers);v.report.requestProxyAppCenter(_.sid,{lts:F,succ:!0,APAddr:W,workerManagerList:JSON.stringify(ce),ec:null,response:JSON.stringify({res:ve})}),u&&u(null,ce)}}else h.default.debug("["+_.clientId+"] Get proxy server failed: no json_body"),v.report.requestProxyAppCenter(_.sid,{lts:F,succ:!1,APAddr:W,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:ve})})})},Q=function(){for(var W=K*L,F=W;F<Math.min(C.length,W+L);F++)he(C[F])};Q()},w=function(_,u,q){var g={service_name:"webrtc_proxy",json_body:JSON.stringify(u)};Object(m.post)(_,g,function(C){q&&q(null,C)},function(C){q&&q(C)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})},U=function(_){if(!(_&&[]instanceof Array))return[];var u=[];return _.forEach(function(q){var g;q.address&&q.tcp?(q.address.match(/^[\.\:\d]+$/)?g="".concat(q.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(h.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(q.address,". Used As Host instead")),g="".concat(q.address,":").concat(q.tcp)),u.push(g)):h.default.error("["+joinInfo.clientId+"] Invalid address format ",q)}),u},P=j(21),G=function(_,u,q,g){var C=Object(I.getParameter)("WEBCS_DOMAIN").concat(Object(I.getParameter)("WEBCS_DOMAIN_BACKUP_LIST")),L=Object(I.getParameter)("PROXY_SERVER_TYPE3");C=["".concat(L[0],"/ap/?url=").concat(C[1]),"".concat(L[0],"/ap/?url=").concat(C[3]),"".concat(L[1],"/ap/?url=").concat(C[0]),"".concat(L[1],"/ap/?url=").concat(C[2])];var K,ie=0,he=!0,Q=Object(I.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),W=0,F=function(ve){var de,ce,Te,Me,Oe,Ae,Le,We,f,ye;de=_,ce=ve,Te=u,Me=function(de,ce){de?(ie++,h.default.error("[".concat(u.clientId,"] request ").concat(ve," failed: ").concat(de)),de&&-1===k.JOIN_PROXY_RETRY_LIST.indexOf(de)&&(K=de),ie===C.length&&(K||(K="RETRYABLE_ERROR"),q(K)),!(ie%Q)&&ie<C.length&&(W++,Y())):he&&(/sd-rtn/.test(ce.gatewayServers.gateway_addr[0])?Object(I.setParameter)("NGINX",L[0]):Object(I.setParameter)("NGINX",L[1]),he=!1,q(null,ce))},Oe=g,Ae=Date.now(),Le=function(x,De){try{v.report.joinChooseServer2(Te.sid,{lts:Ae,succ:!x,csAddr:ce,serverList:De&&De.gateway_addr,cid:De&&De.cid+"",uid:De&&De.uid+"",ec:x,chooseServerIp:De&&De.detail&&De.detail[502]})}catch(Ue){}},We=function(x,De){var Ue=Date.now();try{v.report.joinWebProxyAP({lts:Ue,sid:Te.sid,cname:Te.cname,cid:Te.cid,uid:Te.uid,sucess:x?-1:1,elapse:Ue-Ae,eventType:de,apServerAddr:ce,turnServerAddrList:JSON.stringify(De),errorCode:x||"0"})}catch(Ve){}},f=Object(I.getParameter)("AREA_SETTING").reduce(function(x,De,Ue){var Ve=Object(P.getAreaCodeByArea)(De);return Ve?0===Ue?Ve:"".concat(x,",").concat(Ve):x},""),ye={appid:Te.token,client_ts:Date.now(),opid:133,sid:Te.sid,request_bodies:[{uri:22,buffer:{cname:Te.cname,detail:{11:f,6:Te.stringUid},key:Te.token,service_ids:[11,18],uid:Te.uid||0}}]},ce="https://".concat(ce,"/api/v2/transpond/webrtc?v=2"),Object(m.postFormData)(ce,ye,function(x){var De=function(pe){return new RegExp(/10102\d{2}$/).test(pe)?"NO_SERVICE_AVAILABLE":k.APErrorCode[pe]||pe};try{var Ue,Ve,Ke=JSON.parse(x);if(30===(Ke=Ke.response_body)[0].uri&&0!==Ke[0].buffer.code){var Ze=De(Ke[0].buffer.code);return We(Ze,Ke),Me(Ze)}if(4096===Ke[0].buffer.flag?(Ve=Ke[0].buffer,Ue=Ke[1].buffer):(Ve=Ke[1].buffer,Ue=Ke[0].buffer),0!==Ue.code)return Ze=De(Ue.code),h.default.error("[".concat(Te.clientId,"] requestProxyServer failed: ").concat(Ze)),We(Ze,Ue),Me(Ze);if(!Ue.edges_services||!Ue.edges_services instanceof Array)return We("UNEXPECTED_ERROR",Ue),Me("UNEXPECTED_ERROR");var ue=Object(I.getParameter)("GATEWAY_DOMAINS"),p=0;if(ce.indexOf(ue[1])>-1&&(p=1),0===Ue.edges_services.length)return We("EMPTY_PROXY_LIST",Ue),Me("EMPTY_PROXY_LIST");var ne=Ue.edges_services.map(function(pe){if(pe.ip)return pe.ip=Oe?"".concat(pe.ip.replace(/[^\d]/g,"-"),".").concat(ue[p++%ue.length]):"".concat(pe.ip),pe});if(We(null,ne),0!==Ve.code)return Ze=De(Ve.code),h.default.error("[".concat(Te.clientId,"] requestChooseServer failed: ").concat(Ze)),Le(Ze),Me(Ze);var fe=[];if(ue=Object(I.getParameter)("GATEWAY_DOMAINS"),p=0,ce.indexOf(ue[1])>-1&&(p=1),Ve.edges_services.forEach(function(pe){var J;if(pe.ip&&pe.port){if(!pe.ip.match(/^[\.\:\d]+$/))return h.default.info("["+Te.clientId+"] "+"Cannot recognized as IP address ".concat(pe.ip,". Used As Host instead")),void Le("UNEXPECTED_IP");J="".concat(pe.ip.replace(/[^\d]/g,"-"),".").concat(ue[p++%ue.length]);var _e=Object(I.getParameter)("PROXY_SERVER_TYPE3");J=/sd-rtn/.test(ce)?"".concat(_e[0],"/ws/?h=").concat(J,"&p=").concat(pe.port):"".concat(_e[1],"/ws/?h=").concat(J,"&p=").concat(pe.port),fe.push(J)}else h.default.error("["+Te.clientId+"] Invalid address format ",pe)}),!fe.length)return h.default.error("["+Te.clientId+"] Empty Address response",Ke),Le("EMPTY_ADDRESS_RESPONSE"),Me("EMPTY_ADDRESS_RESPONSE");Ve.ticket=Ve.cert;var me={gateway_addr:fe,uid:Ve.uid,cid:Ve.cid,vid:Ve.detail&&Ve.detail[8],res:Ve,detail:Ke.detail};Le(null,me),Me(null,{gatewayServers:me,turnServers:ne})}catch(pe){return h.default.error("[".concat(Te.clientId,"] requestProxyServer failed with unexpected body "),pe),We("UNEXPECTED_ERROR"),Me("UNEXPECTED_ERROR")}},function(x,De){"timeout"===x.type?(We("REQUEST_PROXY_SERVER_TIME_OUT"),Me("REQUEST_PROXY_SERVER_TIME_OUT")):(We("REQUEST_PROXY_SERVER_FAILED"),Me("REQUEST_PROXY_SERVER_FAILED"))})},Y=function(){for(var ve=W*Q,de=ve;de<Math.min(C.length,ve+Q);de++)F(C[de])};Y()},V=j(13),ee={},se={},te=function(_){return ee[_]},oe=function(_,u){se[_]=u},$=function(_,u,q,g,C,L){var K=(new Date).getTime(),ie=u,he="";u.multiIP&&u.multiIP.gateway_ip&&(he={vocs_ip:[u.multiIP.uni_lbs_ip],vos_ip:[u.multiIP.gateway_ip]});var Q=Object(I.getParameter)("AREA_SETTING").reduce(function(F,Y,ve){var de=Object(P.getAreaCodeByArea)(Y);return de?0===ve?de:"".concat(F,",").concat(de):F},""),W={appid:u.token,opid:133,client_ts:+new Date,sid:u.sid,request_bodies:[{uri:22,buffer:{cname:u.cname,detail:{5:he?JSON.stringify(he):void 0,6:u.stringUid,11:Q},key:u.token,service_ids:[11],uid:u.uid||0}}]};Object(m.postFormData)(_,W,function(F){try{var Y=JSON.parse(F),ve=(Y=Y.response_body[0].buffer).code}catch(Le){var de="requestChooseServer failed with unexpected body "+F;return h.default.error("["+ie.clientId+"]",de),g(de,void 0,void 0,L)}if(ve)return Oe=new RegExp(/10102\d{2}$/).test(ve)?"NO_SERVICE_AVAILABLE":k.APErrorCode[Y.code]||ve,v.report.joinChooseServer(u.sid,{lts:K,succ:!1,csAddr:_,serverList:null,ec:Oe,chooseServerIp:Y&&Y.detail&&Y.detail[502]}),g("Get server node failed ["+Oe+"]",_,Oe,L);var ce=[],Te=Object(I.getParameter)("GATEWAY_DOMAINS"),Me=0;if(_.indexOf(Te[1])>-1&&(Me=1),Y.edges_services.forEach(function(Le){var We;Le.ip&&Le.port?(Le.ip.match(/^[\.\:\d]+$/)?We="".concat(Le.ip.replace(/[^\d]/g,"-"),".").concat(Te[Me++%Te.length],":").concat(Le.port):(h.default.info("["+ie.clientId+"] "+"Cannot recognized as IP address ".concat(Le.ip,". Used As Host instead")),We="".concat(Le.ip,":").concat(Le.port)),ce.push(We)):h.default.error("["+ie.clientId+"] Invalid address format ",Le)}),!ce.length){h.default.error("["+ie.clientId+"] Empty Address response",Y);var Oe="EMPTY_ADDRESS_RESPONSE";return v.report.joinChooseServer(u.sid,{lts:K,succ:!1,csAddr:_,serverList:null,ec:Oe,chooseServerIp:Y&&Y.detail&&Y.detail[502]}),g("Get server node failed ["+Oe+"]",_,Oe,L)}return Y.ticket=Y.cert,q({gateway_addr:ce,uid:Y.uid,cid:Y.cid,vid:Y.detail&&Y.detail[8],res:Y,uni_lbs_ip:Y.detail},_)},function(F,Y){"timeout"===F.type?(v.report.joinChooseServer(u.sid,{lts:K,succ:!1,csAddr:Y,serverList:null,ec:"timeout"}),g("Connect choose server timeout",Y,void 0,L)):(v.report.joinChooseServer(u.sid,{lts:K,succ:!1,csAddr:Y,serverList:null,ec:F.httpErrorCode||"server_wrong"}),g("Connect choose server error",Y,void 0,L))})},b=function(_,u,q){var g=!1,C=null,L=1,K=1,ie=_.clientId,he=function F(Y,ve){if(!g){var de=[];!function(ce,Te,Me){var Oe,Ae=(new Date).getTime(),Le=!1,We=0,f=0,ye=Object(I.getParameter)("WEBCS_DOMAIN"),x=ye.length,De=Object(I.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),Ue=De.length,Ve=Object(I.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),Ke=0,Ze=0,ue=function(pe,J){var _e;try{_e=pe.res.detail[8]}catch(Be){h.default.debug("["+ce.clientId+"] get vid failed",Be)}if(Le)v.report.joinChooseServer(ce.sid,{lts:Ae,succ:!0,csAddr:J,serverList:pe.gateway_addr,cid:pe.cid+"",uid:pe.uid+"",ec:null,vid:_e,chooseServerIp:pe.res&&pe.res.detail&&pe.res.detail[502]},!1);else{if(clearTimeout(me),Le=!0,ce.proxyServer)for(var Se=pe.gateway_addr,Re=0;Re<Se.length;Re++){var Ce=Se[Re].split(":");pe.gateway_addr[Re]=ce.proxyServer+"/ws/?h="+Ce[0]+"&p="+Ce[1]}(function(ce){g=!0,de=ce,clearTimeout(C),se[ie]!==V.a.DISCONNECTED&&se[ie]!==V.a.DISCONNECTING?ve&&ve(de,null):h.default.debug("[".concat(_.clientId,"] Request gateway list success when connection state is ").concat(se[ie]))})(pe),v.report.joinChooseServer(ce.sid,{lts:Ae,succ:!0,csAddr:J,serverList:pe.gateway_addr,cid:pe.cid+"",uid:pe.uid+"",ec:null,vid:_e,chooseServerIp:pe.res&&pe.res.detail&&pe.res.detail[502]},!0)}},p=function(pe,J,_e,Se){"domain"===Se&&We++,"backup"===Se&&f++,h.default.error("["+ce.clientId+"]",pe,J,_e),_e&&-1===k.JOIN_CS_RETRY_LIST.indexOf(_e)&&(Oe=_e),We===x&&f===Ue&&function(ce){if(ce)return h.default.info("["+_.clientId+"] Join failed: "+ce),void(q&&q(ce));if(se[ie]===V.a.DISCONNECTED||se[ie]===V.a.DISCONNECTING)return h.default.debug("[".concat(_.clientId,"] Request gateway list falied when connection state is ").concat(se[ie])),void(q&&q("OPERATION_ABORT"));h.default.debug("["+_.clientId+"] Request gateway list will be restart in "+L+"s"),C=setTimeout(function(){F(Y,ve)},1e3*L),ee[ie]=C;var Te=Object(I.getParameter)("AP_BACKOFF_MAX_TIME");L=L>=Te?Te:2*L}(Oe),"domain"===Se&&!(We%Ve)&&We<x&&(Ke++,ne()),"backup"===Se&&!(f%Ve)&&f<Ue&&(Ze++,fe())},ne=function pe(){for(var J=Ke*Ve,_e=J;_e<Math.min(x,J+Ve);++_e){var Se;if("string"==typeof ye[_e]){var Re=ye[_e];Se=ce.proxyServer?"https://".concat(ce.proxyServer,"/ap/?url=").concat(Re+"api/v2/transpond/webrtc?v=2"):"https://".concat(Re,"/api/v2/transpond/webrtc?v=2");var Ce=Object(P.getAreaCodeByWebCS)(Re);h.default.debug("["+ce.clientId+"] "+"Connect to choose_server: ".concat(Se,", ").concat(Ce)),$(Se,ce,ue,p,0,"domain")}else We++,h.default.error("["+ce.clientId+"] Invalid Host",ye[_e]),_e===J+Ve-1&&_e<x-1-1&&(Ke++,pe())}};ne();var fe=function pe(){if(!Le)for(var J=Ze*Ve,_e=J;_e<Math.min(Ue,J+Ve);_e++){var Se;if("string"==typeof De[_e]){var Re=De[_e];Se=ce.proxyServer?"https://".concat(ce.proxyServer,"/ap/?url=").concat(Re+"/api/v2/transpond/webrtc?v=2"):"https://".concat(Re,"/api/v2/transpond/webrtc?v=2");var Ce=Object(P.getAreaCodeByWebCS)(Re);h.default.debug("["+ce.clientId+"] "+"Connect to backup_choose_server: ".concat(Se,", ").concat(Ce)),$(Se,ce,ue,p,0,"backup")}else f++,h.default.error("["+ce.clientId+"] Invalid Host",De[_e]),_e===J+Ve-1&&_e<De-1-1&&(Ke++,pe())}},me=setTimeout(fe,1e3)}(_)}},Q=function F(){var Y,ve;ve=function(Y,ve){if(Y){h.default.debug("["+_.clientId+"]",Y),h.default.debug("["+_.clientId+"] Request proxy will be restart in "+K+"s"),C=setTimeout(function(){F()},1e3*K),ee[ie]=C;var de=Object(I.getParameter)("AP_BACKOFF_MAX_TIME");K=K>=de?de:2*K}else{clearTimeout(C);var ce=ve.address;_.proxyServer=ce;var Te={mode:"manual",url:ve.address,tcpport:ve.serverResponse.tcpport||"3433",udpport:ve.serverResponse.udpport||"3478",username:ve.serverResponse.username||"test",credential:ve.serverResponse.password||Object(I.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};Te.tcpport+="",Te.udpport+="",_.turnServers=[],_.turnServers.push(Te),v.report.setProxyServer(ce),h.default.setProxyServer(ce),he(ce,u)}},B(Y=_,function(de,ce){if(de)return ve&&ve(de);h.default.debug("["+Y.clientId+"] getProxyServerList: ",ce),function(_,u,q){var g=!1,C=0,L={command:"request",gatewayType:"http",appId:_.appId,cname:_.cname,uid:_.uid+"",sdkVersion:"2.3.1",sid:_.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:_.appId,cname:_.cname,uid:_.uid+"",sid:_.sid}};u.map(function(K){var he,Q,W,ie=(new Date).getTime();he="https://"+K+":4000/v2/machine",Q=L,W=function(he,Q){if(he)return h.default.debug("["+_.clientId+"] Request worker manager failed: ",he),C++,v.report.requestProxyWorkerManager(_.sid,{lts:ie,succ:!1,workerManagerAddr:K,ec:JSON.stringify(he),response:JSON.stringify({res:Q})}),void(C>=u.length&&q&&q("requeet worker manager server failed: request failed"));if(!g){if(!(Q=JSON.parse(Q)).serverResponse)return q&&q("requeet worker manager server failed: serverResponse is undefined");g=!0,v.report.requestProxyWorkerManager(_.sid,{lts:ie,succ:!0,workerManagerAddr:K,ec:JSON.stringify(he),response:JSON.stringify({res:Q})}),q&&q(null,{address:K,serverResponse:Q.serverResponse})}},Object(m.post)(he,Q,function(F){W&&W(null,F)},function(F){W&&W(F)})})}(Y,ce,ve)})},W=function F(){G("proxy3",_,function(Y,ve){if(Y)return"RETRYABLE_ERROR"!==Y?q&&q(Y):(h.default.debug("["+_.clientId+"]",Y),h.default.debug("["+_.clientId+"] Request proxy will be restart in "+K+"s"),C=setTimeout(function(){F()},1e3*K),ee[ie]=C,void(K=K>=3600?3600:2*K));var de=ve.gatewayServers,ce=ve.turnServers;clearTimeout(C);var Te=Object(I.getParameter)("NGINX");_.proxyServer=Te,_.turnServers=[],ce.map(function(Me){var Oe={mode:"manual",url:Me.ip,tcpport:"",udpport:Me.port||"3478",username:Me.username||"test",credential:Me.password||Object(I.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};Oe.tcpport+="",Oe.udpport+="",_.turnServers.push(Oe)}),v.report.setProxyServer(Te),h.default.setProxyServer(Te),u(de)})};_.useProxyServer?1==_.proxyServerType?Q():2==_.proxyServerType?function F(){var Y,ve;ve=function(Y,ve){if(Y)return h.default.debug("["+_.clientId+"]",Y),h.default.debug("["+_.clientId+"] Request proxy will be restart in "+K+"s"),C=setTimeout(function(){F()},1e3*K),ee[ie]=C,void(K=K>=3600?3600:2*K);clearTimeout(C);var de=Object(I.getParameter)("PROXY_SERVER_TYPE2");_.proxyServer=de;var ce={mode:"manual",url:ve.address,tcpport:ve.serverResponse.tcpport||"3433",udpport:ve.serverResponse.udpport||"3478",username:ve.serverResponse.username||"test",credential:ve.serverResponse.password||"111111",forceturn:!0};ce.tcpport+="",ce.udpport+="",_.turnServers=[],_.turnServers.push(ce),v.report.setProxyServer(de),h.default.setProxyServer(de),he(de,u)},B(Y=_,function(de,ce){return de?ve&&ve(de):(h.default.debug("["+Y.clientId+"] getProxyServerList: ",ce),ve&&ve(null,{address:ce[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))})}():3==_.proxyServerType?W():4==_.proxyServerType?G("proxy4",_,function(F,Y){if(F)return"RETRYABLE_ERROR"!==F?q&&q(F):(h.default.debug("["+_.clientId+"]",F),h.default.debug("["+_.clientId+"] Request proxy will be restart in "+K+"s"),C=setTimeout(function(){W()},1e3*K),ee[ie]=C,void(K=K>=3600?3600:2*K));var ve=Y.gatewayServers,de=Y.turnServers;clearTimeout(C);var ce=Object(I.getParameter)("NGINX");_.proxyServer=ce,_.turnServers=[],de.map(function(Te){var Me={mode:"manual",url:Te.ip,tcpport:Te.port||"443",udpport:"",username:Te.username||"test",credential:Te.password||Object(I.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!1};Me.tcpport+="",Me.udpport+="",_.turnServers.push(Me)}),v.report.setProxyServer(ce),h.default.setProxyServer(ce),u(ve)}):5==_.proxyServerType?G("proxy5",_,function(F,Y){if(F)return"RETRYABLE_ERROR"!==F?q&&q(F):(h.default.debug("["+_.clientId+"]",F),h.default.debug("["+_.clientId+"] Request proxy will be restart in "+K+"s"),C=setTimeout(function(){W()},1e3*K),ee[ie]=C,void(K=K>=3600?3600:2*K));var ve=Y.gatewayServers,de=Y.turnServers;clearTimeout(C);var ce=Object(I.getParameter)("NGINX");_.proxyServer=ce,_.turnServers=[],de.map(function(Te){var Me={mode:"manual",url:Te.ip,tcpport:Te.port||"443",udpport:"",username:Te.username||"test",credential:Te.password||Object(I.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!1,useTurns:!0};Me.tcpport+="",Me.udpport+="",_.turnServers.push(Me)}),v.report.setProxyServer(ce),h.default.setProxyServer(ce),u(ve)},!0):Q():he(null,u)},l=function(_,u,q,g,C){var L=Date.now(),K={sid:u.sid,opid:10,appid:u.appId,string_uid:g=g||u.stringUid};return new Promise(function(ie,he){Object(m.post)(_+"".concat(-1===_.indexOf("?")?"?":"&","action=stringuid"),K,function(Q){try{var W=JSON.parse(Q),F=W.code}catch(Te){var Y="requestUserAccount failed with unexpected body "+Q;return h.default.error("["+u.clientId+"]",Y),he({retryable:!0,info:Y,url:_,error:"UNEXPECTED_ERROR"}),q&&q.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void v.report.reqUserAccount(K.sid,{lts:L,success:!1,serverAddress:_,stringUid:g,uid:null,extend:Q,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(F){var ve=!1;return"INTERNAL_SERVER_ERROR"===(ce=k.StringUidErrorCode[W.code%1e4]||"REQ_ACCOUNT_ERR_".concat(F))&&(ve=!0),q&&q.dispatchEvent({type:"error",reason:ce}),v.report.reqUserAccount(K.sid,{lts:L,success:!1,serverAddress:_,stringUid:g,uid:null,errorCode:ce,extend:K}),he({retryable:ve,info:Y="Get String Uid Failed ["+ce+"]",url:_,error:ce})}var de=W.uid;if(!(de>0&&de<Math.pow(2,32))){h.default.error("["+u.clientId+"] "+"Invalid Uint Uid ".concat(g," => ").concat(de),W);var ce="INVALID_UINT_UID_".concat(de);return q&&q.dispatchEvent({type:"error",reason:ce}),v.report.reqUserAccount(K.sid,{lts:L,success:!1,serverAddress:_,stringUid:g,uid:null,errorCode:ce,extend:K}),he({retryable:!0,error:ce,info:"Get String Uid failed ["+ce+"]",url:_})}ie({uid:de,url:_}),v.report.reqUserAccount(K.sid,{lts:L,success:!0,serverAddress:_,stringUid:g,uid:de,errorCode:null,extend:K})},function(Q,W){if("timeout"===Q.type){var F="USER_ACCOUNT_TIMEOUT";q&&q.dispatchEvent({type:"error",reason:F}),v.report.reqUserAccount(K.sid,{lts:L,success:!1,serverAddress:W,stringUid:g,uid:null,errorCode:F,extend:K}),he({retryable:!0,info:F,url:W,error:F})}else{var Y="USER_ACCOUNT_SERVER_WRONG_".concat(Q.type);q&&q.dispatchEvent({type:"error",reason:Y}),v.report.reqUserAccount(K.sid,{lts:L,success:!1,serverAddress:W,stringUid:g,uid:null,errorCode:Y,extend:K}),he({retryable:!0,info:Y,url:W,error:Y})}},{"X-Packet-Service-Type":0,"X-Packet-URI":72})})},H=function(_,u,q){Date.now();var g,W,C=Object(I.getParameter)("ACCOUNT_REGISTER"),L=!1,K=Object(I.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),ie=null,he=null,Q=new Promise((W=y()(T.a.mark(function F(Y,ve){var de,ce,Te;return T.a.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:ie=Y,he=ve,g=0;case 3:if(!(g<Object(I.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){Me.next=33;break}if(!L){Me.next=6;break}return Me.abrupt("return");case 6:return de=C[g%C.length],ce=_.proxyServer?"https://".concat(_.proxyServer,"/ap/?url=").concat(de+"/api/v1"):"https://".concat(de,"/api/v1"),Me.prev=8,Me.delegateYield(T.a.mark(function Oe(){var Ae;return T.a.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=3,l(ce,_,u,q);case 3:if(Ae=Le.sent,!L){Le.next=6;break}return Le.abrupt("return",{v:void 0});case 6:L=!0,setTimeout(function(){h.default.debug("Get UserAccount Successfully",Ae),ie(Ae)},0);case 8:case"end":return Le.stop()}},Oe)})(),"t0",10);case 10:if(Te=Me.t0,"object"!==R()(Te)){Me.next=13;break}return Me.abrupt("return",Te.v);case 13:Me.next=30;break;case 15:if(Me.prev=15,Me.t1=Me.catch(8),!L){Me.next=19;break}return Me.abrupt("return");case 19:if(!Me.t1.retryable){Me.next=27;break}return(K=Math.ceil(K*Object(I.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(I.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(K=Object(I.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),h.default.error("".concat(Me.t1.info," ").concat(Me.t1.url," Will Fetch User Account in ").concat(K/1e3," seconds")),Me.next=25,new Promise(function(Oe){setTimeout(Oe,K)});case 25:Me.next=30;break;case 27:h.default.error("Get UserAccount Error: ".concat(Me.t1.info," ").concat(Me.t1.url),Me.t1.error),L=!0,he(Me.t1.error);case 30:g++,Me.next=3;break;case 33:case"end":return Me.stop()}},F,null,[[8,15]])})),function(F,Y){return W.apply(this,arguments)}));return Q.cancel=function(){L||(L=!0,he({info:"Request Cancelled",retryable:!1}))},Q.isFinished=function(){return L},Q}},function(le,re,j){"use strict";var D=this&&this.__spreadArrays||function(){for(var k=0,B=0,w=arguments.length;B<w;B++)k+=arguments[B].length;var E=Array(k),U=0;for(B=0;B<w;B++)for(var P=arguments[B],G=0,V=P.length;G<V;G++,U++)E[U]=P[G];return E},R=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(re,"__esModule",{value:!0});var O,T,k,N=R(j(0));(k=O||(O={})).CHINA="CHINA",k.ASIA="ASIA",k.NORTH_AMERICA="NORTH_AMERICA",k.EUROPE="EUROPE",k.JAPAN="JAPAN",k.INDIA="INDIA",k.OCEANIA="OCEANIA",k.SOUTH_AMERICA="SOUTH_AMERICA",k.AFRICA="AFRICA",k.OVERSEA="OVERSEA",k.GLOBAL="GLOBAL",re.AREAS=O,function(k){k.CHINA="CN",k.ASIA="AS",k.NORTH_AMERICA="NA",k.EUROPE="EU",k.JAPAN="JP",k.INDIA="IN",k.OCEANIA="OC",k.SOUTH_AMERICA="SA",k.AFRICA="AF",k.OVERSEA="OVERSEA",k.GLOBAL="GLOBAL"}(T||(T={}));var y={ASIA:{CODE:T.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:T.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:T.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:T.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:T.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:T.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],NGINX:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:T.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],NGINX:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:T.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:T.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:T.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};re.AREA_DOMAIN_MAP=y;var I={GLOBAL:{ASIA:[O.CHINA,O.JAPAN,O.INDIA],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},h=Object.keys(I[O.GLOBAL]),m=[O.CHINA,O.NORTH_AMERICA,O.EUROPE,O.ASIA,O.JAPAN,O.INDIA,O.OCEANIA,O.SOUTH_AMERICA,O.AFRICA];re.getAreaCodeByConfig=function(k){var B=k.areaCode,w=k.excludedArea;return w?function(k,B){var te,E=[];if("string"==typeof k&&(k=[k]),B&&!k.includes(O.GLOBAL)&&(E=k),B||(E=k),B&&k.includes(O.GLOBAL)){var U=[O.GLOBAL,O.OVERSEA],P=Object.keys(y);if(B===O.GLOBAL)throw new Error("Can not set excludedArea to 'GLOBAL'");if(B===O.CHINA)E=[O.OVERSEA];else if(h.includes(B)){var G=(void 0===(te=B)&&(te=""),I[O.GLOBAL][te]||[]),V=D(U,[B],G);E=P.filter(function(te){return!V.includes(te)})}else if(function(te){var oe=!1;return h.forEach(function($){I.GLOBAL[$].includes(te)&&(oe=!0)}),oe}(B)){var ee=function(te){void 0===te&&(te="");var oe="";return h.forEach(function($){I.GLOBAL[$].includes(te)&&(oe=$)}),oe}(B),se=D(U,[ee,B]);E=P.filter(function(te){return!se.includes(te)})}else E=k;E=function(te){var oe=[];return m.forEach(function($){te.includes($)&&oe.push($)}),oe.concat(te.filter(function($){return!m.includes($)}))}(E)}return console.log("getAreaCodeAfterCalculation result",E),E}(B,w):B},y.CHINA={CODE:T.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]},re.getAreaCodeByWebCS=function(k){for(var B=Object.keys(y),w=0;w<B.length;w++){var U=y[B[w]];if(U.WEBCS_DOMAIN.includes(k)||U.WEBCS_DOMAIN_BACKUP_LIST.includes(k))return U.CODE===T.OVERSEA?T.ASIA+","+T.EUROPE+","+T.AFRICA+","+T.NORTH_AMERICA+","+T.SOUTH_AMERICA+","+T.OCEANIA:U.CODE}},re.getAreaCodeByArea=function(k){return k===O.OVERSEA?T.ASIA+","+T.EUROPE+","+T.AFRICA+","+T.NORTH_AMERICA+","+T.SOUTH_AMERICA+","+T.OCEANIA:T[k]},re.getAreaDomainConfig=function(k){var B={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],NGINX:[]};return k.map(function(w){var E=y[w];if(E){var U=Object.keys(E);U?U.map(function(P){"CODE"!==P&&(B[P]=B[P].concat(E[P]))}):N.default.info(w+" is not exist")}else N.default.info(w+" is not exist")}),B}},function(le,re,j){"use strict";j.d(re,"a",function(){return l}),j.d(re,"b",function(){return H});var D=j(7),R=j.n(D),O=j(5),T=j(8),y=j(0),I=j(15),h=j(4),m=j(2),v=j(1),k=0,B=function(_){var u=function(_){var u=Object(T.b)({});return u.url=".",u}();u.id=_.id,u.playerId=k++,u.destroyed=!1,u.fit=_.options&&_.options.fit,"contain"!==u.fit&&"cover"!==u.fit&&(u.fit=null),u.url=_.url,u.stream=_.stream.stream,u.peerVideoReady=!1,u.isFreeze=!1,u.freezeTimeCounterList=[],u.freezeCount=0,u.lastFreezeCount=0,u.lastTimeupdateTime=0,u.elementID=_.elementID,u.setAudioOutput=function(Oe,Ae,Le){var We=u.video||u.audio;return We?We.setSinkId?void We.setSinkId(Oe).then(function(){return y.default.debug("["+u.id+"] "+"video ".concat(u.id," setAudioOutput ").concat(Oe," SUCCESS")),We==u.video&&u.audio?u.audio.setSinkId(Oe):Promise.resolve()}).then(function(){return y.default.debug("["+u.id+"] "+"audio ".concat(u.id," setAudioOutput ").concat(Oe," SUCCESS")),Ae&&Ae()}).catch(function(f){return y.default.error("["+u.id+"] VideoPlayer.setAudioOutput",f),Le&&Le(f)}):(y.default.error("["+u.id+"] ",h.default.WEB_API_NOT_SUPPORTED),Le&&Le(h.default.WEB_API_NOT_SUPPORTED)):(y.default.error("["+u.id+"] ",h.default.PLAYER_NOT_FOUND),Le&&Le(h.default.PLAYER_NOT_FOUND))},u.destroy=function(){y.default.debug("[".concat(u.id,"] destroy ").concat(_.stream.local?"local":"remote"," Player ").concat(u.id)),Object(I.setSrcObject)(u.video,null),Object(I.setSrcObject)(u.audio,null),u.video.load(),u.audio.load(),u.video.pause(),u.video.remove(),u.audio.remove(),u.freezeCheckInterval&&clearInterval(u.freezeCheckInterval),u.destroyed=!0,delete u.resizer,document.getElementById(u.div.id)&&u.parentNode.contains(u.div)&&u.div.remove()&&u.parentNode.removeChild(u.div),["video","audio"].forEach(function(Oe){var Ae=C[Oe];clearTimeout(Ae.playDeferTimeout),Ae.formerMediaState=null;var Le={playerId:u.playerId,stateId:Ae.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};C[Oe]=Le;var We={type:"player-status-change",playerId:u.playerId,mediaType:Oe,status:Le.status,reason:Le.reason,isErrorState:!1,streamId:u.id};y.default.debug("[".concat(u.id,"] Media Player Status Change Triggered by destroy()"),We),_.stream.dispatchEvent(We),v.report.reportApiInvoke(_.stream.sid,{name:"Stream.playerStatusChange",options:We,tag:"tracer"})()})},u.div=document.createElement("div"),u.div.setAttribute("id","player_"+u.id),u.div.setAttribute("style",_.stream.video?"width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;":"width: 100%; height: 100%; position: relative; overflow: hidden;"),u.video=document.createElement("video"),u.video.setAttribute("id","video"+u.id),u.video.setAttribute("style",_.stream.local&&!_.stream.screen?_.stream.mirror?"width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(u.fit||"cover",";"):"width: 100%; height: 100%; position: absolute; object-fit: ".concat(u.fit||"cover",";"):_.stream.video?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(u.fit||"cover",";"):_.stream.screen?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(u.fit||"contain"):"width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(u.fit||"cover"));var q={autoplay:!0,muted:!!_.stream.local||!(!O.isSafari()&&"iOS"!==O.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},g=R()({},q,_.options);!0!==g.muted||g.volume||(g.volume=0),u.video.setAttribute("autoplay",""),u.video.setAttribute("muted",""),u.video.muted=!0,u.video.autoplay=!0,g.playsinline&&u.video.setAttribute("playsinline",""),g.controls&&u.video.setAttribute("controls",""),g.contains&&(u.video.controls=!0),Number.isFinite(g.volume)&&(u.video.volume=g.volume),u.audio=document.createElement("audio"),u.audio.setAttribute("id","audio"+u.id),!0===g.muted&&u.audio.setAttribute("muted",""),!0===g.muted&&(u.audio.muted=!0),g.playsinline&&u.audio.setAttribute("playsinline",""),Number.isFinite(g.volume)&&(u.audio.volume=g.volume),void 0!==u.elementID?(document.getElementById(u.elementID).appendChild(u.div),u.container=document.getElementById(u.elementID)):(document.body.appendChild(u.div),u.container=document.body),u.parentNode=u.div.parentNode;var C={video:{playerId:u.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:u.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};u.mediaElemExists=function(Oe){for(var Ae=Oe,Le=0;Le<Object(m.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&Ae;Le++)Ae=Ae.parentNode;return!!Ae};var L=function(Oe){return u.mediaElemExists(Oe)?Oe.paused?"paused":"play":"aborted"},K=function(Oe,Ae,Le){var We=L(Oe),f=!0;return"paused"===We?("audio"===Ae&&!0===Le.muted&&(f=!1),Le.autoplay||(f=!1)):"play"===We?"video"===Ae?f=!1:!0===Le.muted?Oe.muted&&(f=!1):Oe.muted||(f=!1):"aborted"===We&&(f=!1),f},ie=function(Oe){var Ae,Le=this;if(Le===u.video?Ae="video":Le===u.audio&&(Ae="audio"),Ae){if(Oe.type||y.default.error("[".concat(u.id,"] Unexpected evt"),Oe),"video"===Ae&&Le.muted&&Le.paused)return y.default.debug("[".concat(u.id,"] auto resume video element")),void Le.play();var We=L(Le);clearTimeout(C[Ae].playDeferTimeout),C[Ae].playDeferTimeout=setTimeout(function(){C[Ae].playDeferTimeout=null;var f=C[Ae],ye=L(Le);if(We===ye){var x={playerId:u.playerId,stateId:f.stateId+1,playDeferTimeout:null,error:K(Le,Ae,g),status:L(Le),reason:Oe.type,updatedAt:Date.now()};if(f.status!==x.status){C[Ae]=x;var De={type:"player-status-change",playerId:u.playerId,mediaType:Ae,status:x.status,reason:x.reason,isErrorState:x.error,streamId:u.id};y.default.debug("[".concat(u.id,"] Media Player Status Change"),De),_.stream.dispatchEvent(De),v.report.reportApiInvoke(_.stream.sid,{name:"Stream.playerStatusChange",options:De,tag:"tracer"})()}}else y.default.debug("[".concat(u.id,"] Status Change after event Triggered.")+"Stream ".concat(u.id," PlayerId ").concat(u.playerId," mediaType ").concat(Ae," Status ").concat(We,"=>").concat(ye))},Object(m.getParameter)("PLAYER_STATE_DEFER"))}else y.default.error("[".concat(u.id,"] Unknown media element"),Le)};u.video.addEventListener("playing",function(Oe){!function Ae(){u.video.videoWidth*u.video.videoHeight>4?y.default.debug("["+u.id+"] video dimensions:",u.video.videoWidth,u.video.videoHeight):setTimeout(Ae,50)}()});var he=0,Q=0,W=0;u.freezeCheckInterval=setInterval(function(){Date.now()-u.lastTimeupdateTime>500&&u.peerVideoReady?(u.isFreeze=!0,u.freezeCount+=1):u.isFreeze=!1},500),u.video.addEventListener("playing",ie),u.video.addEventListener("canplay",ie),u.video.addEventListener("abort",ie),u.video.addEventListener("onerror",ie),u.video.addEventListener("suspend",ie),u.video.addEventListener("stalled",ie),u.video.addEventListener("pause",ie),u.audio.addEventListener("playing",ie),u.audio.addEventListener("canplay",ie),u.audio.addEventListener("abort",ie),u.audio.addEventListener("onerror",ie),u.audio.addEventListener("suspend",ie),u.audio.addEventListener("stalled",ie),u.audio.addEventListener("pause",ie);var F=u.audio,Y="audio";if(_.stream.hasVideo()||_.stream.hasScreen())u.div.appendChild(u.video),u.div.appendChild(u.audio),O.isEdge()?u.video.srcObject=_.stream.stream:(Object(I.attachMediaStream)(u.video,_.stream.stream),Object(I.attachMediaStream)(u.audio,_.stream.stream)),u.video.addEventListener("timeupdate",function(){var Oe=Date.now();if((he+=1)<10)u.lastTimeupdateTime=Oe;else for(Oe-u.lastTimeupdateTime>500&&(u.peerVideoReady?Q+=Oe-u.lastTimeupdateTime:u.peerVideoReady=!0),W+=Oe-u.lastTimeupdateTime,u.lastTimeupdateTime=Oe;W>=6e3;)W-=6e3,u.freezeTimeCounterList.push(Math.min(6e3,Q)),Q-=6e3,Q=Math.max(Q,0)});else{!1!==g.muted&&"video_element_muted"!==g.muted||(u.video.removeAttribute("muted"),u.video.muted=!1),u.video.removeAttribute("autoplay"),u.video.autoplay=!1,u.div.appendChild(u.video),F=u.video,Y="video";var de={playerId:u.playerId,stateId:C.audio.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};C.audio=de;var ce={type:"player-status-change",playerId:u.playerId,mediaType:"audio",status:de.status,reason:de.reason,isErrorState:de.error,streamId:u.id};if(y.default.debug("[".concat(u.id,"] Media Player Status Change"),ce),Promise.resolve().then(function(){return _.stream.dispatchEvent(ce)}),v.report.reportApiInvoke(_.stream.sid,{name:"Stream.playerStatusChange",options:ce,tag:"tracer"})(),window.MediaStream&&(O.isSafari()||"iOS"===O.getBrowserOS())){var Te=new MediaStream(_.stream.stream.getAudioTracks());Object(I.setSrcObject)(u.video,Te)}else Object(I.setSrcObject)(u.video,_.stream.stream)}if(g.autoplay&&F){var Me=F.play();Me&&Me.catch&&Me.catch(function(Oe){if(!u.destroyed&&F){var Ae=C[Y],Le={playerId:u.playerId,stateId:Ae.stateId+1,playDeferTimeout:null,error:K(F,Y,g),status:L(F),reason:"error",updatedAt:Date.now()};if(Ae.status!==Le.status){y.default.debug("[".concat(u.id,"] Player ").concat(u.playerId," Status Changed Detected by promise error: ").concat(Ae.status,"=>").concat(Le.status),Oe),C[Y]=Le;var We={type:"player-status-change",playerId:u.playerId,mediaType:Y,status:Le.status,reason:Le.reason,isErrorState:Le.error,streamId:u.id};y.default.debug("[".concat(u.id,"] Media Player Status Change"),We),_.stream.dispatchEvent(We),v.report.reportApiInvoke(_.stream.sid,{name:"Stream.playerStatusChange",options:We,tag:"tracer"})()}}})}return u.setAudioVolume=function(Oe){var Ae=parseInt(Oe)/100;isFinite(Ae)&&(Ae<0?Ae=0:Ae>1&&(Ae=1),u.video&&(u.video.volume=Ae),u.audio&&(u.audio.volume=Ae))},u},w=j(23),E=j(10),U=j(6),P=j(19),G=j(3),V=j(25),ee=j(16),se=j(11),te=j.n(se),oe=function(_){Object(G.checkValidString)(_,"profileName"),-1===(_=_.toLowerCase()).indexOf("_")&&(_+="_1"),Object(G.checkValidEnum)(_,"profileName",Object.keys(m.SUPPORT_RESOLUTION_LIST));var u=m.SUPPORT_RESOLUTION_LIST[_];u||(_=Object(m.getParameter)("DEFAULT_PROFILE"),u=m.SUPPORT_RESOLUTION_LIST[_]);var q={profileName:_,video:{width:u[0],height:u[1]},attributes:{resolution:"".concat(u[0],"x").concat(u[1]),minFrameRate:u[2],maxFrameRate:u[3],minVideoBW:u[4],maxVideoBW:u[5]}};return u[2]&&(q.video.frameRate=u[2]),u[6]&&u[7]&&(q.screen={width:u[0],height:u[1],frameRate:{min:u[6],max:u[7]}}),q},$=function(_){return Object.keys(m.SUPPORT_RESOLUTION_LIST).filter(function(u){var q=m.SUPPORT_RESOLUTION_LIST[u],g=["width","height","frameRate"];for(var C in g){var L=g[C];if(_[L]&&q[C]&&("number"==typeof _[L].max&&_[L].max<q[C]||"number"==typeof _[L].min&&_[L].min>q[C]))return!1}return!0}).reverse()},b=function(_){var u=m.AUDIO_PROFILE_SETTINGS[_]||m.AUDIO_PROFILE_SETTINGS.default;return{highQuality:u[0],stereo:u[1],speech:u[2],lowQuality:u[3]}},l=function(_){var g,u=Object(T.b)();if(u.params=R()({},_),u.stream=_.stream,u.url=_.url,u.onClose=void 0,u.local=!1,u.videoSource=_.videoSource,u.audioSource=_.audioSource,_.video=!(!_.videoSource&&!_.video),u.video=_.video,_.audio=!(!_.audioSource&&!_.audio),u.audio=_.audio,u.screen=!!_.screen,u.screenAudio=!!_.screenAudio,u.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},u.videoSize=_.videoSize,u.player=void 0,u.audioLevelHelper=null,_.attributes=_.attributes||{},u.attributes=_.attributes,u.microphoneId=_.microphoneId,u.cameraId=_.cameraId,u.facingMode=_.facingMode,u.inSwitchDevice=!1,u.userMuteVideo=!1,u.userMuteAudio=!1,u.peerMuteVideo=!1,u.peerMuteAudio=!1,u.lowStream=null,u.videoWidth=0,u.videoHeight=0,u.streamId=_.streamID,u.userId=null,u.uintId=_.uintUID||null,u.mirror=!1!==_.mirror,u.DTX=_.audioProcessing&&_.audioProcessing.DTX,u.audioProcessing=_.audioProcessing,u.optimizationMode=_.optimizationMode,u.highQuality=!1,u.stereo=!1,u.speech=!1,u.screen||delete u.screen,!(void 0===u.videoSize||u.videoSize instanceof Array&&4===u.videoSize.length))throw Error("Invalid Video Size");function q(){var g={};u.getVideoTrack()===this?(y.default.debug("Video Track Ended"),g.type="videoTrackEnded",g.track=this):u.getAudioTrack()===this?(y.default.debug("Audio Track Ended"),g.type="audioTrackEnded",g.track=this):y.default.debug("Detached Track ended",this.kind,this.label,this),g.type&&u.dispatchEvent(g)}return u.videoSize=[640,480,640,480],void 0!==_.local&&!0!==_.local||(u.local=!0),u.initialized=!u.local,u._streamInitID=null,(g=u).audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},g._initSoundIfNotExists=function(C,L){g.audioMixing.sounds[C]||(g.audioMixing.sounds[C]={soundId:C,state:"IDLE",muted:g.userMuteAudio,filePath:L,volume:g.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},g._initSoundIfNotExists(-1),g.loadAudioBuffer=function(C,L,K){var ie=v.report.reportApiInvoke(g.sid,{callback:K,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(G.checkValidString)(L,"url",1,1024,!1),Object(G.checkValidString)(C,"id",1,1024,!1);var he=function(W){y.default.error("[".concat(g.streamId,"] loadAudioBuffer Failed: ")+W),ie(h.default.LOAD_AUDIO_FAILED)},Q=new XMLHttpRequest;Q.open("GET",L,!0),Q.responseType="arraybuffer",Q.onload=function(){if(Q.status>400)he("".concat(Q.status," ").concat(Q.statusText));else{var W=Q.response;g.audioMixing.audioContextInited||g._initAudioContext(),g.audioMixing.ctx.decodeAudioData(W,function(F){g.audioMixing.buffer[C]=F,ie(null)},function(F){y.default.error("[".concat(g.streamId,"] decodeAudioData Failed: "),F),ie(F)})}},Q.onerror=function(){return he("load error")},Q.ontimeout=function(){return he("timeout")},Q.send()},g.createAudioBufferSource=function(C){var L=v.report.reportApiInvoke(g.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(g.audioMixing.buffer[C.id]){var K=g.audioMixing.buffer[C.id],ie=g.audioMixing.ctx.createBufferSource();ie.buffer=K;var he=g.audioMixing.ctx.createGain();if(ie.connect(he),he.connect(g.audioMixing.mediaStreamDest),ie.gainNode=he,C.loop)ie.loop=!0,ie.start(0,C.playTime/1e3);else if(C.cycle>1)if(Object(O.isChrome)()){ie.loop=!0;var Q=C.cycle*K.duration*1e3-(C.playTime||0);ie.start(0,C.playTime/1e3,Q/1e3)}else y.default.warning("[".concat(g.streamId,"] Cycle Param is ignored by current browser")),ie.start(0,C.playTime/1e3);else ie.start(0,C.playTime/1e3);var W=g.audioMixing.sounds[C.soundId];return W.source=ie,g._flushAudioMixingMuteStatus(),ie.addEventListener("ended",function(){ie===W.source&&g.dispatchEvent({type:"audioSourceEnded",soundId:C.soundId,source:ie,sound:W})}),L(),ie}var F="AUDIOBUFFER_NOT_FOUND";return y.default.error("[".concat(g.streamId,"] "),F,C.id),L(!1),!1},g.on("audioSourceEnded",function(C){var L=C.source,K=C.sound;K&&K.state===g.audioMixing.states.BUSY&&!K.pauseAt&&(K.state=g.audioMixing.states.IDLE,K.startAt=null,K.startOffset=null,K.resumeAt=null,K.resumeOffset=null,L.gainNode&&L.gainNode.disconnect&&L.gainNode.disconnect(),L.buffer=null,g.audioMixing.mediaStreamSource.connect(g.audioMixing.mediaStreamDest))}),g.clearAudioBufferSource=function(){g.audioBufferSource.forEach(function(C){C.stop()})},g._isSoundExists=function(C){return!!g.audioMixing.sounds[C.soundId]||(y.default.error("SoundId not exists. #".concat(C.soundId)),!1)},g._initAudioContext=function(){if(g.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!g.stream)throw new Error("Failed to init audio context. Local Stream not initialized");g.audioMixing.ctx=Object(V.a)(),g.audioMixing.mediaStreamSource=g.audioMixing.ctx.createMediaStreamSource(g.stream),g.audioMixing.mediaStreamDest=g.audioMixing.ctx.createMediaStreamDestination(),g.audioMixing.mediaStreamSource.connect(g.audioMixing.mediaStreamDest);var C=g.stream.getVideoTracks()[0];if(C&&g.audioMixing.mediaStreamDest.stream.addTrack(C),g._originStream=g.stream,g._isAudioMuted()?(g._unmuteAudio(),g.stream=g.audioMixing.mediaStreamDest.stream,g._muteAudio()):g.stream=g.audioMixing.mediaStreamDest.stream,g.audioLevelHelper=null,g.pc&&g.pc.peerConnection&&g.pc.peerConnection){var L=(g.pc.peerConnection&&g.pc.peerConnection.getSenders()).find(function(ie){return ie&&ie.track&&"audio"==ie.track.kind}),K=g.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];L&&L.replaceTrack&&K&&L.replaceTrack(K)}g.audioMixing.audioContextInited=!0},g._cleanupAudioMixing=function(){if(g.audioMixing.audioContextInited){for(var C in g.audioMixing.sounds){var L=g.audioMixing.sounds[C];L.state!==g.audioMixing.states.BUSY&&L.state!==g.audioMixing.states.PAUSED||g._stopOneEffect({soundId:C})}g.audioLevelHelper=null,g.audioMixing.audioContextInited=!1}},g._reloadInEarMonitoringMode=function(C){if(C){if(!g.audioMixing.inEarMonitoringModes[C])return y.default.error("[".concat(g.streamId,"] Invalid InEarMonitoringMode ").concat(C));g.audioMixing.inEarMonitoring=C}switch(g.audioMixing.audioContextInited||g._initAudioContext(),g.audioMixing.inEarMonitoring){case g.audioMixing.inEarMonitoringModes.FILE:g.audioMixing.mediaStreamSource.connectedToDestination&&(g.audioMixing.mediaStreamSource.disconnect(g.audioMixing.ctx.destination),g.audioMixing.mediaStreamSource.connectedToDestination=!1);case g.audioMixing.inEarMonitoringModes.ALL:for(var L in g.audioMixing.sounds){var K=g.audioMixing.sounds[L];K&&K.source&&!K.source.connectedToDestination&&(K.source.gainNode.connect(g.audioMixing.ctx.destination),K.source.connectedToDestination=!0)}}switch(g.audioMixing.inEarMonitoring){case g.audioMixing.inEarMonitoringModes.MICROPHONE:g.audioMixing.source.forEach(function(ie){ie.connectedToDestination&&(ie.gainNode.disconnect(g.audioMixing.ctx.destination),ie.connectedToDestination=!1)});case g.audioMixing.inEarMonitoringModes.ALL:g.audioMixing.mediaStreamSource.connectedToDestination||(g.audioMixing.mediaStreamSource.connect(g.audioMixing.ctx.destination),g.audioMixing.mediaStreamSource.connectedToDestination=!0)}},g._startAudioMixingBufferSource=function(C){g.audioMixing.audioContextInited||g._initAudioContext();var K=C.replace,ie=g.createAudioBufferSource({soundId:C.soundId,id:C.filePath,loop:C.loop,cycle:C.cycle,playTime:C.playTime||0});return ie.sound=g.audioMixing.sounds[C.soundId],ie?(ie.addEventListener("ended",g._audioMixingFinishedListener,{once:!0}),g._reloadInEarMonitoringMode(),K&&g.audioMixing.mediaStreamSource.disconnect(g.audioMixing.mediaStreamDest),ie):null},g._stopAudioMixingBufferSource=function(C){var L=g.audioMixing.sounds[C.soundId].source;return L?(L.removeEventListener("ended",g._audioMixingFinishedListener),g.audioMixing.mediaStreamSource.connect(g.audioMixing.mediaStreamDest),L.stop(),L.gainNode&&L.gainNode.disconnect&&L.gainNode.disconnect(),L.buffer=null,L):null},g._flushAudioMixingMuteStatus=function(C){for(var L in g.audioMixing.sounds){var K=g.audioMixing.sounds[L];K&&(void 0!==C&&(K.muted=!!C),K.source&&(K.source.gainNode.gain.value=K.muted?0:K.volume/100))}},g._handleAudioMixingInvalidStateError=function(C,L,K){var ie=g.audioMixing.sounds[L.soundId],he=-1===L.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";y.default.error("[".concat(g.streamId,"] Cannot ").concat(C,": ").concat(he,", state is ").concat(ie.state)),K&&K(he)},g._handleAudioMixingNoSourceError=function(C,L,K){g.audioMixing.sounds[L.soundId].state=g.audioMixing.states.IDLE;var ie=-1===L.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";y.default.error("[".concat(g.streamId,"] Cannot ").concat(C,": ").concat(ie)),K&&K(ie)},g._getOneEffectStates=function(C){var L=g.audioMixing.sounds[C.soundId];return function(){return L?{state:L.state,startAt:L.startAt,resumeAt:L.resumeAt,pauseOffset:L.pauseOffset,pauseAt:L.pauseAt,resumeOffset:L.resumeOffset,stopAt:L.stopAt,duration:g._getOneEffectDuration(C),position:g._getOneEffectCurrentPosition(C)}:{}}},g._audioMixingFinishedListener=function(){var C=this.sound;C.state===g.audioMixing.states.IDLE&&g.audioMixing.buffer[C.options.filePath]&&!C.options.cacheResource&&(y.default.debug("Recycled buffer ".concat(C.options.filePath)),delete g.audioMixing.buffer[C.options.filePath]),-1===C.soundId&&g.dispatchEvent({type:"audioMixingFinished"})},g._playOneEffect=function(C,L){Object(G.checkValidObject)(C,"options");var K=C.soundId,ie=C.cacheResource;if(Object(O.isSafari)()&&Object(O.getBrowserVersion)()<12){var he="BROWSER_NOT_SUPPORT";return y.default.error("[".concat(g.streamId,"] Cannot _playOneEffect: "),he),L(he)}g.audioMixing.audioContextInited||g._initAudioContext(),g._initSoundIfNotExists(K);var Q=g.audioMixing.sounds[K];if(Q.state===g.audioMixing.states.IDLE){if(void 0!==C.cycle&&!C.cycle>0)return he="Invalid Parmeter cycle: "+C.cycle,y.default.error("[".concat(g.streamId,"] ").concat(K),he),L(he);if(Object(G.isEmpty)(ie)&&(C.cacheResource=!0),Q.state=g.audioMixing.states.STARTING,Q.options=C,g.audioMixing.buffer[C.filePath]){var W=g._startAudioMixingBufferSource(C);if(W)return Q.source=W,Q.startAt=Date.now(),Q.resumeAt=null,Q.pauseOffset=null,Q.pauseAt=null,Q.resumeOffset=null,Q.stopAt=null,Q.startOffset=C.playTime||0,Q.state=g.audioMixing.states.BUSY,g._flushAudioMixingMuteStatus(),L(null);Q.state=g.audioMixing.states.IDLE;var F="CREATE_BUFFERSOURCE_FAILED";if(L)return L(F);y.default.error("[".concat(g.streamId,"] "),F)}else g.loadAudioBuffer(C.filePath,C.filePath,function(Y){if(Y)Q.state=g.audioMixing.states.IDLE,L?L(Y):y.default.error("[".concat(g.streamId,"] "),Y);else{var ve=g._startAudioMixingBufferSource(C);if(ve)return Q.source=ve,Q.startAt=Date.now(),Q.resumeAt=null,Q.pauseOffset=null,Q.pauseAt=null,Q.resumeOffset=null,Q.stopAt=null,Q.startOffset=C.playTime||0,Q.state=g.audioMixing.states.BUSY,g._flushAudioMixingMuteStatus(),L(null);if(Q.state=g.audioMixing.states.IDLE,Y="CREATE_BUFFERSOURCE_FAILED",L)return L(Y);y.default.error("[".concat(g.streamId,"] "),Y)}})}else g._handleAudioMixingInvalidStateError("_playEffect",C,L)},g._stopOneEffect=function(C,L){var K=g.audioMixing.sounds[C.soundId];return g._isSoundExists(C)?K.state===g.audioMixing.states.BUSY||K.state===g.audioMixing.states.PAUSED?(g._stopAudioMixingBufferSource(C),K.stopAt=Date.now(),K.state=g.audioMixing.states.IDLE,g.audioMixing.buffer[K.options.filePath]&&!K.options.cacheResource&&(y.default.debug("Recycled buffer ".concat(K.options.filePath)),delete g.audioMixing.buffer[K.options.filePath]),void(L&&L(null))):void g._handleAudioMixingInvalidStateError("_stopOneEffect",C,L):L("SOUND_NOT_EXISTS")},g._pauseOneEffect=function(C,L){var K=g.audioMixing.sounds[C.soundId];if(K.state===g.audioMixing.states.BUSY)return g._stopAudioMixingBufferSource(C)?(K.pauseAt=Date.now(),K.state=g.audioMixing.states.PAUSED,K.pauseOffset=K.resumeAt?K.pauseAt-K.resumeAt+K.resumeOffset:K.pauseAt-K.startAt+K.startOffset,L&&L(null)):void g._handleAudioMixingNoSourceError("_pauseOneEffect",C,L);g._handleAudioMixingInvalidStateError("_pauseOneEffect",C,L)},g._resumeOneEffect=function(C,L){var K=g.audioMixing.sounds[C.soundId];if(K.state===g.audioMixing.states.PAUSED){var he=g._startAudioMixingBufferSource({soundId:C.soundId,filePath:K.options.filePath,cycle:K.options.cycle,loop:K.options.loop,playTime:K.pauseOffset,replace:K.options.replace});if(!he){var Q="CREATE_BUFFERSOURCE_FAILED";return L(Q),void y.default.error("[".concat(g.streamId,"] "),Q)}K.source=he,K.resumeAt=Date.now(),K.resumeOffset=K.pauseOffset,K.state=g.audioMixing.states.BUSY,K.pauseAt=null,K.pauseOffset=null,L(null)}else g._handleAudioMixingInvalidStateError("_resumeOneEffect",C,L)},g._getOneEffectDuration=function(C){var L=g.audioMixing.sounds[C.soundId];return L.options&&L.options.filePath&&g.audioMixing.buffer[L.options.filePath]?1e3*g.audioMixing.buffer[L.options.filePath].duration:null},g._getOneEffectCurrentPosition=function(C,L){var K=g.audioMixing.sounds[C.soundId];return K.state===g.audioMixing.states.PAUSED?K.pauseOffset%g._getOneEffectDuration(C):K.state===g.audioMixing.states.BUSY?K.resumeAt?(Date.now()-K.resumeAt+K.resumeOffset)%g._getOneEffectDuration(C):(Date.now()-K.startAt+K.startOffset)%g._getOneEffectDuration(C):void(L&&g._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",C))},g._setOneEffectPosition=function(C,L,K){var ie=g.audioMixing.sounds[C.soundId];if(ie.state===g.audioMixing.states.BUSY){if(!g._stopAudioMixingBufferSource(C))return void g._handleAudioMixingNoSourceError("_setOneEffectPosition",C,K);var Q=g._startAudioMixingBufferSource({soundId:C.soundId,filePath:ie.options.filePath,loop:ie.options.loop,cycle:ie.options.cycle,playTime:L});if(!Q){var W="CREATE_BUFFERSOURCE_FAILED";return K&&K(W),void y.default.error("[".concat(g.streamId,"] "),W)}ie.source=Q,ie.startAt=Date.now(),ie.startOffset=L,ie.resumeAt=null,ie.resumeOffset=null,ie.pauseOffset=null,ie.pauseAt=null}else{if(ie.state!==g.audioMixing.states.PAUSED)return void g._handleAudioMixingInvalidStateError("_setOneEffectPosition",C,K);ie.pauseOffset=L}K&&K(null)},g.startAudioMixing=function(C,L){var K=v.report.reportApiInvoke(g.sid,{callback:function(de){if(de)return L&&L(de);g.dispatchEvent({type:"audioMixingPlayed"}),L&&L(null)},getStates:g._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:C});Object(G.checkValidObject)(C,"options");var ie=C.filePath,he=C.cacheResource,Q=C.cycle,W=C.loop,F=C.playTime,Y=C.replace;Object(G.checkValidString)(ie,"filePath",1,Object(m.getParameter)("FILEPATH_LENMAX"),!1),Object(G.checkValidNumber)(F,"playTime",0,1e8),!Object(G.isEmpty)(Q)&&Object(G.checkValidNumber)(Q,"cycle"),!Object(G.isEmpty)(W)&&Object(G.checkValidBoolean)(W,"loop"),!Object(G.isEmpty)(Y)&&Object(G.checkValidBoolean)(Y,"replace"),!Object(G.isEmpty)(he)&&Object(G.checkValidBoolean)(he,"cacheResource");var ve=R()({soundId:-1},C);g._playOneEffect(ve,K)},g.stopAudioMixing=function(C){var L=v.report.reportApiInvoke(g.sid,{callback:C,getStates:g._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});g._stopOneEffect({soundId:-1},L)},g.pauseAudioMixing=function(C){var L=v.report.reportApiInvoke(g.sid,{callback:C,getStates:g._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return g._pauseOneEffect({soundId:-1},L)},g.resumeAudioMixing=function(C){var L=v.report.reportApiInvoke(g.sid,{callback:function(K,ie){if(K)return C&&C(K);g.dispatchEvent({type:"audioMixingPlayed"}),C&&C(null)},getStates:g._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});g._resumeOneEffect({soundId:-1},L)},g.adjustAudioMixingVolume=function(C){var L=v.report.reportApiInvoke(g.sid,{getStates:g._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(G.checkValidNumber)(C,"volume",0,100),g.audioMixing.sounds[-1].volume=C,g._flushAudioMixingMuteStatus(),L()},g.getAudioMixingDuration=function(){var C=v.report.reportApiInvoke(g.sid,{getStates:g._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),L=g._getOneEffectDuration({soundId:-1});return C(null,L),L},g.getAudioMixingCurrentPosition=function(){var C=v.report.reportApiInvoke(g.sid,{getStates:g._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),L=g._getOneEffectCurrentPosition({soundId:-1},!0);return C(null,L),L},g.setAudioMixingPosition=function(C,L){var K=v.report.reportApiInvoke(g.sid,{callback:L,options:arguments,tag:"tracer",getStates:g._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(G.checkValidNumber)(C,"position",0,1e8),g._setOneEffectPosition({soundId:-1},C,K)},g.playEffect=function(C,L){var K=v.report.reportApiInvoke(g.sid,{callback:function(W){if(W)return L&&L(W);g.dispatchEvent({type:"effectPlayed"}),L&&L(null)},name:"Stream.playEffect",options:C});Object(G.checkValidObject)(C,"options");var ie=C.soundId,he=C.filePath,Q=C.cycle;Object(G.checkValidNumber)(ie,"soundId",1,1e4),Object(G.checkValidString)(he,"filePath",0,Object(m.getParameter)("FILEPATH_LENMAX"),!1),!Object(G.isEmpty)(Q)&&Object(G.checkValidNumber)(Q,"cycle"),g._playOneEffect(C,K)},g.stopEffect=function(C,L){var K=v.report.reportApiInvoke(g.sid,{callback:L,getStates:g._getOneEffectStates({soundId:C}),name:"Stream.stopEffect"});Object(G.checkValidNumber)(C,"soundId",1,1e4),g._stopOneEffect({soundId:C},K)},g.stopAllEffects=function(C){var L=v.report.reportApiInvoke(g.sid,{callback:C,name:"Stream.stopAllEffect"}),K=!1,ie=0,he=0,Q=function(Y){K||(Y?(L(Y),K=!0):ie+=1,ie===he&&(L(null),K=!0))};for(var W in g.audioMixing.sounds){var F=g.audioMixing.sounds[W];-1!==F.soundId&&(F.state!==g.audioMixing.states.BUSY&&F.state!==g.audioMixing.states.PAUSED||(he++,g._stopOneEffect({soundId:W},Q)))}he||L(null)},g.preloadEffect=function(C,L,K){var ie=v.report.reportApiInvoke(g.sid,{callback:K,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(G.checkValidNumber)(C,"soundId",1,1e4),Object(G.checkValidString)(L,"filePath",1,Object(m.getParameter)("FILEPATH_LENMAX"),!1),g._initSoundIfNotExists(C,L),g.audioMixing.buffer[L]?ie(null):g.loadAudioBuffer(L,L,ie)},g.unloadEffect=function(C,L){var K=v.report.reportApiInvoke(g.sid,{callback:L,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(G.checkValidNumber)(C,"soundId",1,1e4);var ie=g.audioMixing.sounds[C];if(!ie){var he="SOUND_NOT_EXISTS";return y.default.error(he,C),void K(he)}var Q=ie.options?ie.options.filePath:ie.filePath;if(Q)delete g.audioMixing.buffer[Q],delete g.audioMixing.sounds[C],K(null);else{var W="SOUND_BUFFER_NOT_FOUND";y.default.error(W,C),K(W)}},g.pauseEffect=function(C,L){var K=v.report.reportApiInvoke(g.sid,{callback:L,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return g._pauseOneEffect({soundId:C},K)},g.pauseAllEffects=function(C){var L=v.report.reportApiInvoke(g.sid,{callback:C,name:"Stream.pauseAllEffects"}),K=!1,ie=0,he=0,Q=function(F){K||(F?(L(F),K=!0):ie+=1,ie===he&&(L(null),K=!0))};for(var W in g.audioMixing.sounds)"-1"!==W&&g.audioMixing.sounds[W].state===g.audioMixing.states.BUSY&&(he++,g._pauseOneEffect({soundId:W},Q));he||L(null)},g.resumeEffect=function(C,L){Object(G.checkValidNumber)(C,"soundId",1,1e4);var K=v.report.reportApiInvoke(g.sid,{callback:L,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return g._resumeOneEffect({soundId:C},K)},g.resumeAllEffects=function(C){var L=v.report.reportApiInvoke(g.sid,{callback:C,name:"Stream.resumeAllEffects"}),K=!1,ie=0,he=0,Q=function(F){K||(F?(L(F),K=!0):ie+=1,ie===he&&(L(null),K=!0))};for(var W in g.audioMixing.sounds)"-1"!==W&&g.audioMixing.sounds[W].state===g.audioMixing.states.PAUSED&&(he++,g._resumeOneEffect({soundId:W},Q));he||L(null)},g.getEffectsVolume=function(){var C=[];for(var L in g.audioMixing.sounds){var K=g.audioMixing.sounds[L];K&&"-1"!==L&&C.push({soundId:parseInt(L),volume:K.volume})}return C},g.setEffectsVolume=function(C,L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:L});for(var ie in Object(G.checkValidNumber)(C,"volume",0,100),g.audioMixing.defaultVolume=C,g.audioMixing.sounds){var he=g.audioMixing.sounds[ie];"-1"!==ie&&(he.volume=C)}g._flushAudioMixingMuteStatus(),K(null)},g.setVolumeOfEffect=function(C,L,K){var ie=v.report.reportApiInvoke(g.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:K});Object(G.checkValidNumber)(C,"soundId",0,1e4),Object(G.checkValidNumber)(L,"volume",0,100),g._initSoundIfNotExists(C);var he=g.audioMixing.sounds[C];he.volume=L,g._flushAudioMixingMuteStatus(),ie(null)},ee.a.addVideoEffectCapability(u),function(g,C){g.videoConstraint={},C.cameraId&&(g.videoConstraint.deviceId={exact:C.cameraId}),C.facingMode&&(g.videoConstraint.facingMode=C.facingMode),g.videoSize&&(g.videoConstraint.width=g.videoSize[0],g.videoConstraint.height=g.videoSize[1]),Object(O.isLegacyChrome)()||(g.videoConstraint.frameRate=30),g.audioConstraint={},C.microphoneId&&(g.audioConstraint.deviceId={exact:C.microphoneId}),Object(O.isLegacyChrome)()||g.audioProcessing&&(void 0!==g.audioProcessing.AGC&&(Object(O.isFireFox)()?g.audioConstraint.autoGainControl=g.audioProcessing.AGC:Object(O.isChrome)()&&(g.audioConstraint.googAutoGainControl=g.audioProcessing.AGC,g.audioConstraint.googAutoGainControl2=g.audioProcessing.AGC)),void 0!==g.audioProcessing.AEC&&(g.audioConstraint.echoCancellation=g.audioProcessing.AEC),void 0!==g.audioProcessing.ANS&&(Object(O.isFireFox)()?g.audioConstraint.noiseSuppression=g.audioProcessing.ANS:Object(O.isChrome)()&&(g.audioConstraint.googNoiseSuppression=g.audioProcessing.ANS))),g.screenConstraint={},C.sourceId&&(g.screenConstraint.sourceId=C.sourceId),C.extensionId&&Object(O.isChrome)()?(g.screenConstraint.extensionId=C.extensionId,g.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:g.screenAttributes.width,maxHeight:g.screenAttributes.height,maxFrameRate:g.screenAttributes.maxFr,minFrameRate:g.screenAttributes.minFr}):(g.screenConstraint.mediaSource="screen",g.screenConstraint.width=g.screenAttributes.width,g.screenConstraint.height=g.screenAttributes.height,g.screenConstraint.frameRate={ideal:g.screenAttributes.maxFr,max:g.screenAttributes.maxFr}),C.mediaSource&&(g.screenConstraint.mediaSource=C.mediaSource),g.setVideoResolution=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(L instanceof Array)){var ie=oe(L+="");return ie&&ie.video?(g.videoConstraint=R()(g.videoConstraint,{width:{ideal:ie.video.width},height:{ideal:ie.video.height}}),C.attributes.resolution=ie.attributes.resolution,(he=g.stream&&g.stream.getVideoTracks&&g.stream.getVideoTracks()[0])&&he.applyConstraints?(y.default.debug("setVideoResolution applyConstraints",g.videoConstraint),he.applyConstraints(g.videoConstraint).then(K).catch(K)):K(),!0):(K("NO_PROFILE_".concat(L)),!1)}var he,Q=L[0],W=L[1];g.videoConstraint=R()(g.videoConstraint,{width:{ideal:Q},height:{ideal:W}}),C.attributes.resolution="".concat(Q,"x").concat(W),(he=g.stream&&g.stream.getVideoTracks&&g.stream.getVideoTracks()[0])&&he.applyConstraints?(y.default.debug("setVideoResolution applyConstraints",g.videoConstraint),ee.a.disableVideoEffect(g).then(function(){return he.applyConstraints(g.videoConstraint).then(K).catch(K)}).then(function(){return ee.a.restoreVideoEffect(g)})):K()},g.setVideoFrameRate=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(O.isFireFox)())return K("FIREFOX_NOT_SUPPORTED"),!1;if("object"===te()(L)&&L instanceof Array&&L.length>1){g.videoConstraint=R()(g.videoConstraint,{frameRate:L[0]}),g.attributes.minFrameRate=L[0],g.attributes.maxFrameRate=L[1];var ie=g.stream&&g.stream.getVideoTracks&&g.stream.getVideoTracks()[0];return ie&&ie.applyConstraints?(y.default.debug("setVideoFrameRate applyConstraints",g.videoConstraint),ie.applyConstraints(g.videoConstraint).then(K).catch(K)):K(),!0}return K("INVALID_PARAM_".concat(JSON.stringify(L))),!1},g.setVideoBitRate=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===te()(L)&&L instanceof Array&&L.length>1?(C.attributes.minVideoBW=L[0],C.attributes.maxVideoBW=L[1],g.connectionSpec&&(g.connectionSpec.minVideoBW=L[0],g.connectionSpec.maxVideoBW=L[1]),g.pc&&g.pc.renegotiate&&g.pc.renegotiate(),K(),!0):(K("INVALID_PARAM_".concat(JSON.stringify(L))),!1)},g.setScreenBitRate=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===te()(L)&&L instanceof Array&&L.length>1?(g.screenAttributes.minVideoBW=L[0],g.screenAttributes.maxVideoBW=L[1],K(),!0):(K("INVALID_PARAM_".concat(JSON.stringify(L))),!1)},g.setScreenProfile=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(G.checkValidEnum)(L,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var ie=oe(L);return ie&&ie.screen?(g.screenConstraint.mandatory?(g.screenConstraint.mandatory.maxWidth=ie.screen.width,g.screenConstraint.mandatory.maxHeight=ie.screen.height,ie.screen.frameRate&&ie.screen.frameRate.min&&ie.screen.frameRate.max&&(g.screenConstraint.mandatory.minFrameRate=ie.screen.frameRate.min,g.screenConstraint.mandatory.maxFrameRate=ie.screen.frameRate.max)):g.screenConstraint=R()(g.screenConstraint,ie.screen),g.screenAttributes.width=ie.screen.width,g.screenAttributes.height=ie.screen.height,g.screenAttributes.minFr=ie.screen.frameRate.min,g.screenAttributes.maxFr=ie.screen.frameRate.max,K(),!0):(K("NO_SCREEN_PROFILE_".concat(JSON.stringify(L))),!1)},g.setVideoProfileCustom=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});g.setVideoResolution(L[0]),g.setVideoFrameRate([L[1],L[1]]),g.setVideoBitRate([L[2],L[2]]),K()},g.setVideoProfileCustomPlus=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});g.setVideoResolution([L.width,L.height]),C.attributes.resolution="".concat(L.width,"x").concat(L.height),g.setVideoFrameRate([L.framerate,L.framerate]),g.setVideoBitRate([L.bitrate,L.bitrate]),K()},g.setVideoProfile=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),ie=oe(L);if(!ie){var he="Invalid Profile ".concat(L);throw new Error(he)}if(g.profile=L,ie&&ie.video){g.profile=ie.profileName,g.videoConstraint=R()(g.videoConstraint,ie.video),g.connectionSpec&&ie.attributes.maxVideoBW&&(g.connectionSpec.minVideoBW=ie.attributes.minVideoBW,g.connectionSpec.maxVideoBW=ie.attributes.maxVideoBW),Object(O.isEdge)()&&(g.videoConstraint.frameRate.max=60),Object(O.isFireFox)()&&(g.videoConstraint.frameRate=30),C.attributes=R()(C.attributes,ie.attributes),g.pc&&g.pc.renegotiate&&g.pc.renegotiate();var Q=g.stream&&g.stream.getVideoTracks&&g.stream.getVideoTracks()[0];return Q&&Q.applyConstraints?(y.default.debug("setVideoProfile applyConstraints",g.videoConstraint),ee.a.disableVideoEffect(g).then(function(){return Q.applyConstraints(g.videoConstraint)}).then(function(){return ee.a.restoreVideoEffect(g)}).then(function(W){return new Promise(function(F,Y){K(W),setTimeout(function(){Object(E.vsResHack)(g.stream,function(ve,de){g.videoWidth=ve,g.videoHeight=de,F()},function(ve){y.default.warning("[".concat(g.streamId,"] vsResHack failed: "),ve),Y()})},2500)})}).catch(K)):K(),!0}return K("INVALID_VIDEO_PROFILE_".concat(L)),!1},g.setAudioProfile=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(G.checkValidEnum)(L,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),g.audioProfile=L;var ie=b(L);return g.highQuality=ie.highQuality,g.stereo=ie.stereo,g.speech=ie.speech,g.lowQuality=ie.lowQuality,g.stereo&&Object(O.isChrome)()&&(g.audioConstraint.googAutoGainControl=!1,g.audioConstraint.googAutoGainControl2=!1,g.audioConstraint.echoCancellation=!1,g.audioConstraint.googNoiseSuppression=!1),K(),!0},g.setVideoEncoderConfiguration=function(L){Object(G.checkValidObject)(L,"config");var K=v.report.reportApiInvoke(g.sid,{name:"Stream.setVideoEncoderConfiguration",options:L,tag:"tracer"});L.resolution&&(Object(G.checkValidNumber)(L.resolution.width,"config.resolution.width"),Object(G.checkValidNumber)(L.resolution.height,"config.resolution.height"),g.setVideoResolution([L.resolution.width,L.resolution.height])),L.frameRate&&(Object(G.checkValidNumber)(L.frameRate.min,"config.frameRate.min"),Object(G.checkValidNumber)(L.frameRate.max,"config.frameRate.max"),g.setVideoFrameRate([L.frameRate.min,L.frameRate.max])),L.bitrate&&(Object(G.checkValidNumber)(L.bitrate.min,"config.bitrate.min",1,1e7),Object(G.checkValidNumber)(L.bitrate.max,"config.bitrate.max",1,1e7),g.setVideoBitRate([L.bitrate.min,L.bitrate.max])),K()},g.getSupportedProfile=function(L){var K=v.report.reportApiInvoke(g.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:L});if(!g.local){var ie="ONLY_LOCAL_STREAM_SUPPORTED";return y.default.error(ie),K(ie)}if(!g.stream)return y.default.error(ie="STREAM_NOT_INIT"),K(ie);if(!g.stream.getVideoTracks)return y.default.error(ie="TRACK_NOT_SUPPORT"),K(ie);var he=g.stream.getVideoTracks()[0];if(!he)return y.default.error(ie="NO_VIDEO_TRACK_FOUND"),K(ie);if(!he.getCapabilities)return y.default.error(ie="GETCAPABILITY_NOT_SUPPORT"),K(ie);var Q=he.getCapabilities(),W=$(Q);return K(null,W)}}(u,_),u.getId=function(){return u.streamId},u.getUserId=function(){return u.userId},u.checkDualStreamEnabled=function(){return!(!Object(m.getParameter)("DUALSTREAM_OPERATION_CHECK")||!u.isDualStream)&&(y.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},u.setUserId=function(g){var C=v.report.reportApiInvoke(u.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});u.userId&&y.default.warning("[".concat(u.streamId,"] Stream.userId ").concat(u.userId," => ").concat(g)),u.userId=g,C()},u.getAttributes=function(){return _.screen?u.screenAttributes:_.attributes},u.hasAudio=function(){return!!u.audio},u.hasVideo=function(){return!!u.video},u.hasScreen=function(){return!!u.screen},u.hasScreenAudio=function(){return!!u.screenAudio},u.isVideoOn=function(){return(u.hasVideo()||u.hasScreen())&&!u.userMuteVideo},u.isAudioOn=function(){return u.hasAudio()&&!u.userMuteAudio},u.init=function(g,C){var L=v.report.reportApiInvoke(u.sid,{callback:function(Q,W){if(Q)return C&&C(Q);g&&g(W)},name:"Stream.init",options:arguments,tag:"tracer"}),K=((new Date).getTime(),arguments[2]);if(void 0===K&&(K=2),!0===u.initialized)return L({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==u.local)return L({type:"warning",msg:"STREAM_NOT_LOCAL"});var ie=Math.random().toString().slice(3);u._streamInitID=ie,u.videoSource?u.videoName="videoSource":u.video&&(u.videoName=P.a.searchDeviceNameById(_.cameraId)||"default"),u.audioSource?u.audioName="audioSource":u.audio&&(u.audioName=P.a.searchDeviceNameById(_.microphoneId)||"default"),u.screen&&(u.screenName=_.extensionId||"default");try{if(_.audio||_.video||_.screen||_.screenAudio||_.videoSource||_.audioSource){y.default.debug("[".concat(u.streamId,"] Requested access to local media"));var he={streamId:u.streamId};_.videoSource?he.videoSource=_.videoSource:_.screen?he.screen=u.screenConstraint:_.video&&(he.video=u.videoConstraint),_.audioSource?he.audioSource=_.audioSource:_.screenAudio?he.screenAudio=_.screenAudio:_.audio&&(he.audio=u.audioConstraint),Object(w.b)(he,function(Q){if(he.screenAudio&&!Q.getAudioTracks()[0]&&y.default.warning("[".concat(u.streamId,"] Audio sharing is not selected")),he.screen&&y.default.debug("[".concat(u.streamId,"] User has granted access to screen sharing")),(he.video||he.audio)&&y.default.debug("[".concat(u.streamId,"] User has granted access to local media")),null===u._streamInitID){Q.getTracks().forEach(function(F){F.stop()});var W={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return y.default.error(u.streamId,W.info),void L(W)}if(u._streamInitID!==ie)return Q.getTracks().forEach(function(F){F.stop()}),y.default.error(u.streamId,(W={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"}).info),void L(W);u.dispatchEvent({type:"accessAllowed"}),u.stream=Q,u.initialized=!0,u.reloadDeviceName(),u.hasVideo()&&Object(E.vsResHack)(Q,function(F,Y){u.videoWidth=F,u.videoHeight=Y},function(F){y.default.warning("[".concat(u.streamId,"] vsResHack failed: "),F)}),_.screen&&u.stream&&u.stream.getVideoTracks()[0]&&(u.stream.getVideoTracks()[0].onended=function(){u.dispatchEvent({type:"stopScreenSharing"})}),u.stream&&u.stream.getTracks&&u.stream.getTracks().forEach(function(F){F&&!F.onended&&(F.onended=q),"video"===F.kind&&_.optimizationMode&&(F.contentHint=_.optimizationMode,F.contentHint===_.optimizationMode&&y.default.debug("[".concat(u.streamId,"] set content hint to"),_.optimizationMode))}),L()},function(Q){var W={type:"error",info:null};switch(Q&&(W.msg=Q.name||Q.code||Q,Q.message&&(W.info=Q.message),Q.code&&(W.info?W.info+=". "+Q.code:W.info=" "+Q.code),Q.constraint&&(W.info?W.info+=". Constraint: "+Q.constraint:W.info="constraint: "+Q.constraint)),W.msg){case"Starting video failed":case"TrackStartError":if(u.videoConstraint&&(delete u.videoConstraint.width,delete u.videoConstraint.height),K>0)return void setTimeout(function(){u.init(function(Y){return L(Y)},L,K-1)},1);W.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":W.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":W.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":W.msg="PERMISSION_DENIED",u.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":u.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":W.msg="CONSTRAINT_NOT_SATISFIED";break;default:W.msg||(W.msg="UNDEFINED")}var F="Media access ".concat(W.msg).concat(W.info?": "+W.info:"");y.default.error("[".concat(u.streamId,"] "),F),L(W)})}else L({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(Q){y.default.error("[".concat(u.streamId,"] Stream init: "),Q),L({type:"error",msg:Q.message||Q})}},u.reloadDeviceName=function(){if(u.stream){if(u.stream.getVideoTracks){var g=u.stream.getVideoTracks()[0];g&&g.label&&(u.videoName=g.label)}if(u.stream.getAudioTracks){var C=u.stream.getAudioTracks()[0];C&&C.label&&(u.audioName=C.label)}}},u.close=function(){var g=v.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(y.default.debug("[".concat(u.streamId,"] Close stream with id"),u.streamId),u._originStream)try{u._originStream.getTracks().map(function(ie){return ie.stop()})}catch(ie){}if(void 0!==u.stream){var C=u.stream.getTracks();for(var L in C)C.hasOwnProperty(L)&&(C[L].stop(),C[L].onended=null);!u.isLowStream&&u.local?ee.a.disableVideoEffect(u).then(function(){u.stream=void 0}):(u.stream&&u.stream.clean&&u.stream.clean(),u.stream=void 0)}if(u._originStream){for(var L in console.log("clear _originStream"),C=u._originStream.getTracks())C.hasOwnProperty(L)&&(C[L].stop(),C[L].onended=null,console.log("clear onended"));!u.isLowStream&&u.local?ee.a.disableVideoEffect(u).then(function(){u._originStream=void 0}):(u._originStream&&u._originStream.clean&&u._originStream.clean(),u._originStream=void 0)}if(Object(O.isSafari)()&&u.pc&&u.pc.peerConnection&&u.pc.peerConnection.removeTrack&&u.pc.peerConnection.getSenders){var K=u.pc.peerConnection.getSenders();K.forEach(function(ie){ie&&(y.default.debug("[".concat(u.streamId,"] Remove Track"),ie),u.pc.peerConnection.removeTrack(ie))})}u.local&&(u.initialized=!1),u._streamInitID=null,u._onAudioMute=void 0,u._onAudioUnmute=void 0,u._onVideoMute=void 0,u._onVideoUnmute=void 0,u.lowStream&&u.lowStream.close(),u.player&&u.player.video&&u.player.video.srcObject&&(u.player.video.srcObject=null),u.player&&u.player.audio&&u.player.audio.srcObject&&(u.player.audio.srcObject=null),g()},u.enableAudio=function(){var g,C=v.report.reportApiInvoke(u.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return y.default.deprecate("[".concat(u.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),u.userMuteAudio||y.default.warning("[".concat(u.streamId,"] User already enableAudio")),u.userMuteAudio=!1,C(null,g=!u.peerMuteAudio&&u._unmuteAudio()),g},u.disableAudio=function(){var g=v.report.reportApiInvoke(u.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});y.default.deprecate("[".concat(u.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),u.userMuteAudio&&y.default.warning("[".concat(u.streamId,"] User already disableAudio")),u.userMuteAudio=!0;var C=u._muteAudio();return g(null,C),C},u.enableVideo=function(){var g,C=v.report.reportApiInvoke(u.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return y.default.deprecate("[".concat(u.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),u.userMuteVideo||y.default.warning("[".concat(u.streamId,"] User already enableVideo")),u.userMuteVideo=!1,u.lowStream&&(u.lowStream.userMuteVideo=!1),C(null,g=!u.peerMuteVideo&&u._unmuteVideo()),g},u.disableVideo=function(){var g=v.report.reportApiInvoke(u.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});y.default.deprecate("[".concat(u.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),u.userMuteVideo&&y.default.warning("[".concat(u.streamId,"] User already disableVideo")),u.userMuteVideo=!0,u.lowStream&&(u.lowStream.userMuteVideo=!0);var C=u._muteVideo();return g(null,C),C},u.unmuteAudio=function(){var g,C=v.report.reportApiInvoke(u.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return u.userMuteAudio||y.default.warning("[".concat(u.streamId,"] User already unmuteAudio")),u.userMuteAudio=!1,C(null,g=!u.peerMuteAudio&&u._unmuteAudio()),g},u.muteAudio=function(){var g=v.report.reportApiInvoke(u.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});u.userMuteAudio&&y.default.warning("[".concat(u.streamId,"] User already muteAudio")),u.userMuteAudio=!0;var C=u._muteAudio();return g(null,C),C},u.unmuteVideo=function(){var g,C=v.report.reportApiInvoke(u.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return u.userMuteVideo||y.default.warning("[".concat(u.streamId,"] User already unmuteVideo")),u.userMuteVideo=!1,u.lowStream&&(u.lowStream.userMuteVideo=!1),C(null,g=!u.peerMuteVideo&&u._unmuteVideo()),g},u.muteVideo=function(){var g=v.report.reportApiInvoke(u.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});u.userMuteVideo&&y.default.warning("[".concat(u.streamId,"] User already muteVideo")),u.userMuteVideo=!0,u.lowStream&&(u.lowStream.userMuteVideo=!0);var C=u._muteVideo();return g(null,C),C},u._unmuteAudio=function(){return y.default.debug("[".concat(u.streamId,"] Unmuted audio stream with id "),u.streamId),u._flushAudioMixingMuteStatus(!1),!(!u.hasAudio()||!u.initialized||void 0===u.stream||!0===u.stream.getAudioTracks()[0].enabled||(u._onAudioUnmute&&u._onAudioUnmute(),u.pc&&(u.pc.isAudioMute=!1),u.stream.getAudioTracks()[0].enabled=!0,0))},u._isAudioMuted=function(){if(u.stream&&u.hasAudio()){var g=u.stream.getAudioTracks();return g.length>0&&!g[0].enabled}return!1},u._isVideoMuted=function(){if(u.stream&&u.hasVideo()){var g=u.stream.getVideoTracks();return g.length>0&&!g[0].enabled}return!1},u._muteAudio=function(){return y.default.debug("[".concat(u.streamId,"] Muted audio stream with id "),u.streamId),u._flushAudioMixingMuteStatus(!0),!!(u.hasAudio()&&u.initialized&&void 0!==u.stream&&u.stream.getAudioTracks()[0].enabled)&&(u._onAudioMute&&u._onAudioMute(),u.pc&&(u.pc.isAudioMute=!0),u.stream.getAudioTracks()[0].enabled=!1,u.sid&&v.report.audioSendingStopped(u.sid,{succ:!0,reason:"muteAudio"}),!0)},u._unmuteVideo=function(){return y.default.debug("[".concat(u.streamId,"] Unmuted video stream with id"),u.streamId),!(!u.initialized||void 0===u.stream||!u.stream.getVideoTracks().length||!0===u.stream.getVideoTracks()[0].enabled||(u._onVideoUnmute&&u._onVideoUnmute(),u.pc&&(u.pc.isVideoMute=!1),u.stream.getVideoTracks()[0].enabled=!0,u.lowStream&&u.lowStream._unmuteVideo(),0))},u._muteVideo=function(){return y.default.debug("[".concat(u.streamId,"] Muted video stream with id"),u.streamId),!!(u.initialized&&void 0!==u.stream&&u.stream.getVideoTracks().length&&u.stream.getVideoTracks()[0].enabled)&&(u._onVideoMute&&u._onVideoMute(),u.pc&&(u.pc.isVideoMute=!0),u.stream.getVideoTracks()[0].enabled=!1,u.lowStream&&u.lowStream._muteVideo(),u.sid&&v.report.videoSendingStopped(u.sid,{succ:!0,reason:"muteVideo"}),!0)},u.addTrack=function(g){var C=v.report.reportApiInvoke(u.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(u.pc&&u.pc.addTrack(g,u.stream),"audio"==g.kind){u._cleanupAudioMixing();var L=new MediaStream;u.userMuteAudio&&(g.enabled=!1),L.addTrack(g);var K=u.stream.getVideoTracks()[0];K&&L.addTrack(K),u.audio=!0,_.audio=!0,u.stream=L,u.audioLevelHelper=null,u.player&&u.player.video&&(u.player.video.srcObject=u.stream)}else u.userMuteVideo&&(g.enabled=!1),u.stream.addTrack(g),u.video=!0,_.video=!0;g.onended||(g.onended=q),C()},u.removeTrack=function(g){var C=v.report.reportApiInvoke(u.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});u.pc&&u.pc.removeTrack(g,u.stream),u.stream.removeTrack(g),u._cleanupAudioMixing(),"audio"===g.kind?(u.audio=!1,_.audio=!1):(u.video=!1,_.video=!1),u.audioLevelHelper=null,"live"==g.readyState&&(g.stop(),y.default.debug("[".concat(u.streamId,"] Track ").concat(g.kind," Stopped"))),C()},u.setAudioOutput=function(g,C,L){var K=v.report.reportApiInvoke(u.sid,{callback:function(ie,he){if(ie)return L&&L(ie);C&&C(he)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(G.isValidString)(g,1,255)?(u.audioOutput=g,u.player?void u.player.setAudioOutput(g,function(){return K()},K):K()):(y.default.error("[".concat(u.streamId,"] setAudioOutput Invalid Parameter"),g),K(h.default.INVALID_PARAMETER))},u.play=function(g,C,L){"function"==typeof C&&(L=C,C=null),y.default.debug("[".concat(u.streamId,"] play()."),g,C);var K=v.report.reportApiInvoke(u.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:L});if(Object(G.checkValidString)(g,"elementID"),Object(G.isEmpty)(C)||(Object(G.isEmpty)(C.fit)||Object(G.checkValidEnum)(C.fit,"fit",["cover","contain"]),Object(G.isEmpty)(C.muted)||Object(G.checkValidBoolean)(C.muted,"muted")),u.player)y.default.warning("[".concat(u.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),u.resume().then(function(){K(null)}).catch(K);else{u.elementID=g,u.playOptions=C,!u.local||u.video||u.screen?(u.player=new B({id:u.getId(),stream:u,elementID:g,options:C}),u.local&&ee.a.applyEffectInPlayer(u)):u.hasAudio()&&(u.player=new B({id:u.getId(),stream:u,elementID:g,options:C}));var ie={video:null,audio:null},he=function Q(W){if(ie[W.mediaType]=W,ie.video&&ie.audio)if(u.removeEventListener("player-status-change",Q),ie.video.isErrorState||ie.audio.isErrorState){var F=ie.video.isErrorState?ie.video:ie.audio;K({isErrorState:!0,status:F.status,reason:F.reason,video:ie.video,audio:ie.audio})}else K("aborted"===ie.video.status&&"aborted"===ie.audio.status?{status:"aborted",reason:"stop",video:ie.video,audio:ie.audio}:null)};u.on("player-status-change",he),u.audioOutput&&u.player.setAudioOutput(u.audioOutput),void 0!==u.audioLevel&&u.player.setAudioVolume(u.audioLevel),u._flushAudioMixingMuteStatus(!1)}},u.stop=function(){var g=v.report.reportApiInvoke(u.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});y.default.debug("[".concat(u.streamId,"] Stop stream player with id "),u.streamId),u.player?(ee.a.removeEffectFromLocalPlayer(u),u.player.destroy(),delete u.player):y.default.error("[".concat(u.streamId,"] Stream.stop(): Stream is not playing")),u._flushAudioMixingMuteStatus(!0),g()},u.isPlaying=function(){return!!u.player},u.isPaused=function(){return!(!u.player||!(u.player.video&&u.player.video.paused&&u.player.mediaElemExists(u.player.video)||u.player.audio&&u.player.audio.paused&&u.player.mediaElemExists(u.player.audio)))},u.resume=function(){var g,C;return u.player?(u.player.video&&u.player.video.play&&(g=u.player.video.play()),g=g||Promise.resolve(),u.player.audio&&u.player.audio.play&&(C=u.player.audio.play()),C=C||Promise.resolve(),Promise.all([g,C])):Promise.reject("NO_PLAYER_FOUND")},u.getVideoTrack=function(){var g=v.report.reportApiInvoke(u.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(u.stream&&u.stream.getVideoTracks){var C=u.stream.getVideoTracks()[0];if(C)return y.default.info("[".concat(u.streamId,"] getVideoTrack"),C),g(),C}y.default.info("[".concat(u.streamId,"] getVideoTrack None")),g(null,"getVideoTrack None")},u.getAudioTrack=function(){var g=v.report.reportApiInvoke(u.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(u.stream&&u.stream.getAudioTracks){var C=u.stream.getAudioTracks()[0];if(C)return y.default.info("[".concat(u.streamId,"] getAudioTracks"),C),g(),C}y.default.info("[".concat(u.streamId,"] getAudioTracks None")),g(null,"getAudioTracks None")},u._hasVideoTracks=function(){return!!(u.stream&&u.stream.getVideoTracks&&u.stream.getVideoTracks()[0])},u._hasAudioTracks=function(){return!!(u.stream&&u.stream.getAudioTracks&&u.stream.getAudioTracks()[0])},u._replaceMediaStreamTrack=function(g,C,L){if(u.stream){if("video"==g.kind){if(ie=u.stream.getVideoTracks()[0])return u.userMuteVideo&&(g.enabled=!1),u.stream.removeTrack(ie),u.stream.addTrack(g),y.default.debug("[".concat(u.streamId,"] _replaceMediaStreamTrack ").concat(g.kind," SUCCESS")),"live"==ie.readyState&&(ie.stop(),y.default.debug("[".concat(u.streamId,"] Track ").concat(ie.kind," Stopped"))),C&&C();var K="MEDIASTREAM_TRACK_NOT_FOUND";return y.default.error("[".concat(u.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(g.kind)),L(K)}if("audio"==g.kind){var ie;if(ie=u.stream.getAudioTracks()[0]){u.userMuteAudio&&(g.enabled=!1);var he=new MediaStream;he.addTrack(g);var Q=u.stream&&u.stream.getVideoTracks()[0];return Q&&he.addTrack(Q),u.stream=he,u.audioLevelHelper=null,u.player&&u.player.video&&(u.player.video.srcObject=u.stream),y.default.debug("[".concat(u.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==ie.readyState&&(ie.stop(),y.default.debug("[".concat(u.streamId,"] Track ").concat(ie.kind," Stopped"))),C&&C()}return K="MEDIASTREAM_TRACK_NOT_FOUND",y.default.error("[".concat(u.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(g.kind)),L(K)}return K="INVALID_TRACK_TYPE",y.default.error("[".concat(u.streamId,"] _replaceMediaStreamTrack ").concat(K," ").concat(g.kind)),L&&L(K)}return K="NO_STREAM_FOUND",y.default.error("[".concat(u.streamId,"] _replaceMediaStreamTrack ").concat(K)),L&&L(K)},u.replaceTrack=function(g,C,L){var K=v.report.reportApiInvoke(u.sid,{callback:function(ie,he){if(ie)return L&&L(ie);C&&C(he)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return g&&g.kind?(u._cleanupAudioMixing(),g.onended||(g.onended=q),u.pc&&u.pc.hasSender&&u.pc.hasSender(g.kind)?void u.pc.replaceTrack(g,function(){return y.default.debug("[".concat(u.streamId,"] PeerConnection.replaceTrack ").concat(g.kind," SUCCESS")),u._replaceMediaStreamTrack(g,function(ie){return K(null,ie)},K)},function(ie){return y.default.error("[".concat(u.streamId,"] PeerConnection.replaceTrack ").concat(g.kind," Failed ").concat(ie)),K(ie)}):u._replaceMediaStreamTrack(g,function(ie){return K(null,ie)},K)):K("INVALID_TRACK")},u.setAudioVolume=function(g){var C=v.report.reportApiInvoke(u.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(G.checkValidNumber)(g,"level",0,100),u.audioLevel=g,u.player&&u.player.setAudioVolume(g),C()},u.getStats=function(g,C,L){var K=[];K.push(u._getPCStats(L)),K.push(new Promise(function(ie){var he={};u.pc&&u.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(U.b)(he,"videoReceiveResolutionHeight",u.videoHeight),Object(U.b)(he,"videoReceiveResolutionWidth",u.videoWidth)):u.pc&&!u.pc.isSubscriber&&((Object(O.isSafari)()||Object(O.isFireFox)())&&(Object(U.b)(he,"videoSendResolutionHeight",u.videoHeight),Object(U.b)(he,"videoSendResolutionWidth",u.videoWidth)),(Object(O.isSafari)()||Object(O.isFireFox)())&&u.uplinkStats&&Object(U.b)(he,"videoSendPacketsLost",u.uplinkStats.uplink_cumulative_lost)),ie(he)})),K.push(new Promise(function(ie){var he={};return u.traffic_stats&&u.pc&&u.pc.isSubscriber?(Object(U.b)(he,"accessDelay",u.traffic_stats.access_delay),Object(U.b)(he,"endToEndDelay",u.traffic_stats.e2e_delay),Object(U.b)(he,"videoReceiveDelay",u.traffic_stats.video_delay),Object(U.b)(he,"audioReceiveDelay",u.traffic_stats.audio_delay)):u.traffic_stats&&u.pc&&!u.pc.isSubscriber&&Object(U.b)(he,"accessDelay",u.traffic_stats.access_delay),ie(he)})),Promise.all(K).then(function(ie){for(var he={},Q=ie.length-1;Q>=0;Q--){var W=ie[Q];R()(he,W)}g&&setTimeout(g.bind(u,he),0)}).catch(function(ie){C&&setTimeout(C.bind(u,ie),0)})},u._getPCStats=function(g){return new Promise(function(C,L){if(!u.pc||"established"!==u.pc.state||!u.pc.getStats)return L("PEER_CONNECTION_NOT_ESTABLISHED");u.pc.getStats(function(K){if(!u.pc||"established"!==u.pc.state||!u.pc.getStats)return L("PEER_CONNECTION_STATE_CHANGE");var ie=u.pc.isSubscriber?Object(U.c)(K):Object(U.a)(K);return C(ie)},g)}).then(function(C){return u.pc.isSubscriber?(Object(O.isFireFox)()||Object(O.isSafari)())&&(C.videoReceiveResolutionHeight&&"0"!==C.videoReceiveResolutionHeight||C.videoReceiveResolutionWidth&&"0"!==C.videoReceiveResolutionWidth||(Object(U.b)(C,"videoReceiveResolutionHeight",u.videoHeight),Object(U.b)(C,"videoReceiveResolutionWidth",u.videoWidth))):((Object(O.isSafari)()||Object(O.isFireFox)())&&(C.videoSendResolutionHeight&&"0"!==C.videoSendResolutionHeight||C.videoSendResolutionWidth&&"0"!==C.videoSendResolutionWidth||(Object(U.b)(C,"videoSendResolutionHeight",u.videoHeight),Object(U.b)(C,"videoSendResolutionWidth",u.videoWidth))),(Object(O.isSafari)()||Object(O.isFireFox)())&&u.uplinkStats&&Object(U.b)(C,"videoSendPacketsLost",u.uplinkStats.uplink_cumulative_lost)),Promise.resolve(C)})},u.getAudioLevel=function(){if(u.audioLevelHelper)return u.audioLevelHelper.getAudioLevel();if(u.stream){if(0!==u.stream.getAudioTracks().length)return u.audioLevelHelper=new E.audioLevelHelper(u.stream),u.audioLevelHelper.getAudioLevel();y.default.warning("[".concat(u.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else y.default.warning("[".concat(u.streamId,"] can't get audioLevel beacuse no stream exist"))},u.setVideoProfile("480p_1"),u._switchVideoDevice=function(g,C,L){if(g===u.cameraId)return C&&C();var K={video:R()({},u.videoConstraint,{deviceId:{exact:g}}),audio:!1};y.default.debug("[".concat(u.streamId,"] ").concat(K)),Object(w.b)(K,function(ie){try{var he=function(){u.isPlaying()&&(u.stop(),u.elementID&&u.play(u.elementID,u.playOptions)),u.cameraId=g,u.videoConstraint.deviceId={exact:g},u.userMuteVideo&&(u.stream.getVideoTracks()[0].enabled=!1),ee.a.restoreVideoEffect(u).then(function(){C&&C()})};ee.a.disableVideoEffect(u).then(function(){var Q=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(Q=!0),Q?u.replaceTrack(ie.getVideoTracks()[0],he,L):(u.removeTrack(u.stream.getVideoTracks()[0]),u.addTrack(ie.getVideoTracks()[0]),he())})}catch(Q){return L&&L(Q)}},function(ie){return L&&L(ie)})},u._switchAudioDevice=function(g,C,L){if(g===u.microphoneId)return C&&C();var K={video:!1,audio:R()({},u.audioConstraint,{deviceId:{exact:g}})};y.default.debug("[".concat(u.streamId,"] "),K),Object(w.b)(K,function(ie){var he=function(){u._cleanupAudioMixing(),u.userMuteAudio&&(u.stream.getAudioTracks()[0].enabled=!1),u.isPlaying()&&(u.stop(),u.elementID&&u.play(u.elementID,u.playOptions)),u.microphoneId=g,u.audioConstraint.deviceId={exact:g},C&&C()};try{var Q=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(Q=!0),Q?u.replaceTrack(ie.getAudioTracks()[0],he,L):(u.removeTrack(u.stream.getAudioTracks()[0]),u.addTrack(ie.getAudioTracks()[0]),he())}catch(W){return L&&L(W)}},function(ie){return L&&L(ie)})},u.switchDevice=function(g,C,L,K){var ie=v.report.reportApiInvoke(u.sid,{callback:function(de,ce){if(de)return K&&K(de);L&&L(ce)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(G.checkValidString)(C,"deviceId");var he=function(){return u.inSwitchDevice=!1,ie()},Q=function(de){u.inSwitchDevice=!1,y.default.error("[".concat(u.streamId,"] "),de),ie(de)};if(u.inSwitchDevice)return ie("Device switch is in process.");if(u.inSwitchDevice=!0,!u.local)return Q("Only the local stream can switch the device.");if(u.screen&&"video"===g)return Q("The device cannot be switched during screen-sharing.");if(!u.video&&"video"===g)return Q("Video track not exist.");if(!u.audio&&"audio"===g)return Q("Audio track not exist.");if(u.videoSource||u.audioSource)return Q("The device cannot be switched when using videoSource or audioSource.");var W=!1;for(var F in u.audioMixing.sounds){var Y=u.audioMixing.sounds[F];if(Y.state!==u.audioMixing.states.IDLE){W=!0;break}}var ve=u.audioMixing.audioContextInited;if(ve&&W)return Q("The device cannot be switched when using audio Mixing.");P.a.getDeviceById(C,function(){if("video"===g)u._switchVideoDevice(C,he,Q);else{if("audio"!==g)return Q("Invalid type.");u._switchAudioDevice(C,he,Q)}},function(){return Q("The device does not exist.")})},u},H=function(_){var u=v.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:_&&_.audioSource?_.audioSource.enabled:null,videoTrackEnable:_&&_.videoSource?_.videoSource.enabled:null}}});Object(G.checkValidObject)(_,"StreamSpec");var q=_.streamID,g=_.audio,C=_.video,L=_.screen,K=_.screenAudio,ie=_.cameraId,he=_.facingMode,Q=_.microphoneId,W=_.mirror,F=_.extensionId,Y=_.mediaSource,ve=_.audioProcessing,de=_.optimizationMode;if(!Object(G.isEmpty)(q)&&!Object(E.is32Uint)(q)&&!Object(G.isValidString)(q,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(G.checkValidBoolean)(g,"audio"),Object(G.checkValidBoolean)(C,"video"),Object(G.isEmpty)(L)||Object(G.checkValidBoolean)(L,"screen"),Object(G.isEmpty)(K)||Object(G.checkValidBoolean)(K,"screenAudio"),Object(G.isEmpty)(ie)||Object(G.checkValidString)(ie,"cameraId",0,255,!1),Object(G.isEmpty)(he)||Object(G.checkValidEnum)(he,"facingMode",["user","environment","left","right"]),Object(G.isEmpty)(Q)||Object(G.checkValidString)(Q,"microphoneId",0,255,!1),Object(G.isEmpty)(F)||Object(G.checkValidString)(F,"extensionId"),Object(G.isEmpty)(Y)||Object(G.checkValidEnum)(Y,"mediaSource",["screen","application","window"]),Object(G.isEmpty)(W)||Object(G.checkValidBoolean)(W,"mirror"),!Object(G.isEmpty)(ve)){var ce=ve.AGC,Te=ve.AEC,Me=ve.ANS;Object(G.isEmpty)(ce)||Object(G.checkValidBoolean)(ce,"AGC"),Object(G.isEmpty)(Te)||Object(G.checkValidBoolean)(Te,"AEC"),Object(G.isEmpty)(Me)||Object(G.checkValidBoolean)(Me,"ANS")}Object(G.isEmpty)(de)||Object(G.checkValidEnum)(de,"optimizationMode",["detail","motion"]),y.default.debug("Create stream"),!0===K&&!0===g&&y.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),_.screen&&!de&&(_.optimizationMode="detail");var Oe=l(_);return u(),Oe}},function(le,re,j){"use strict";j.d(re,"a",function(){return oe}),j.d(re,"b",function(){return $});var D=j(5),R=j(7),O=j.n(R),T=j(12),N=j.n(T),y=j(17),I=j.n(y),h=j(0),m=j(15),v=j(2);function B(b,l){(null==l||l>b.length)&&(l=b.length);for(var H=0,_=new Array(l);H<l;H++)_[H]=b[H];return _}function U(b){if("undefined"==typeof Symbol||null==b[Symbol.iterator]){if(Array.isArray(b)||(b=function(C,L){if(C){if("string"==typeof C)return P(C,L);var K=Object.prototype.toString.call(C).slice(8,-1);if("Object"===K&&C.constructor&&(K=C.constructor.name),"Map"===K||"Set"===K)return Array.from(K);if("Arguments"===K||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return P(C,L)}}(b))){var l=0,H=function(){};return{s:H,n:function(){return l>=b.length?{done:!0}:{done:!1,value:b[l++]}},e:function(C){throw C},f:H}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _,u,q=!0,g=!1;return{s:function(){_=b[Symbol.iterator]()},n:function(){var C=_.next();return q=C.done,C},e:function(C){g=!0,u=C},f:function(){try{q||null==_.return||_.return()}finally{if(g)throw u}}}}function P(b,l){(null==l||l>b.length)&&(l=b.length);for(var H=0,_=new Array(l);H<l;H++)_[H]=b[H];return _}var V=j(47),ee=j.n(V),se=j(26),te=(j(4),103),oe=function(b){var l={};if(l.clientId=b.clientId,b.session_id=te+=1,"undefined"==typeof window||!window.navigator)throw h.default.error("["+l.streamId+"]["+l.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(l.browser="mozilla",l=function(b){var W,l={},H=(mozRTCPeerConnection,mozRTCSessionDescription),_=!1;l.uid=b.uid,l.isVideoMute=b.isVideoMute,l.isAudioMute=b.isAudioMute,l.isSubscriber=b.isSubscriber,l.clientId=b.clientId,l.filterStatsCache=[],l.originStatsCache=[],l.lastTimeGetStats=null,l.pc_config={iceServers:[]},b.iceServers instanceof Array?b.iceServers.map(function(W){0===W.url.indexOf("stun:")&&l.pc_config.iceServers.push({url:W.url})}):(b.stunServerUrl&&(b.stunServerUrl instanceof Array?b.stunServerUrl.map(function(W){"string"==typeof W&&""!==W&&l.pc_config.iceServers.push({url:W})}):"string"==typeof b.stunServerUrl&&""!==b.stunServerUrl&&l.pc_config.iceServers.push({url:b.stunServerUrl})),b.turnServers&&(b.turnServers instanceof Array?b.turnServers.map(function(W){W.udpport&&l.pc_config.iceServers.push({username:W.username,credential:W.credential,credentialType:"password",urls:(W.useTurns?"turns:":"turn:")+W.url+":"+W.udpport+"?transport=udp"}),"string"==typeof W.tcpport&&""!==W.tcpport&&l.pc_config.iceServers.push({username:W.username,credential:W.credential,credentialType:"password",urls:(W.useTurns?"turns:":"turn:")+W.url+":"+W.tcpport+"?transport=tcp"}),!0===W.forceturn&&(l.pc_config.iceTransportPolicy="relay")}):h.default.error("[".concat(l.clientId,"] turnServers is not a array")))),void 0===b.audio&&(b.audio=!0),void 0===b.video&&(b.video=!0),l.mediaConstraints={offerToReceiveAudio:b.audio,offerToReceiveVideo:b.video,mozDontOfferDataChannel:!0},l.roapSessionId=103,l.peerConnection=new m.RTCPeerConnection(l.pc_config),l.iceCandidateTimer=setTimeout(function(){l.iceCandidateTimer=null,h.default.debug("[".concat(l.clientId,"]Candidates collected: ").concat(l.iceCandidateCount)),l.moreIceComing&&(l.moreIceComing=!1,l.markActionNeeded())},Object(v.getParameter)("CANDIDATE_TIMEOUT")),l.peerConnection.onicecandidate=function(W){var F,Y,ve,de;Y=(F=l.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),ve=F.match(/a=candidate:.+typ\shost.+\r\n/),de=F.match(/a=candidate:.+typ\srelay.+\r\n/),null===Y&&null===ve&&null===de||void 0!==l.ice||!l.iceCandidateTimer||(clearTimeout(l.iceCandidateTimer),l.iceCandidateTimer=null,l.ice=0,l.moreIceComing=!1,l.markActionNeeded()),l.iceCandidateCount=l.iceCandidateCount+1},l.checkMLineReverseInSDP=function(W){return!(!~W.indexOf("m=audio")||!~W.indexOf("m=video"))&&W.indexOf("m=audio")>W.indexOf("m=video")},l.reverseMLineInSDP=function(W){var F=W.split("m=audio"),Y=F[1].split("m=video");return F[0]+"m=video"+Y[1]+"m=audio"+Y[0]},l.processSignalingMessage=function(W){var F,Y=JSON.parse(W);l.incomingMessage=Y,"new"===l.state?"OFFER"===Y.messageType?(Y.sdp=he(Y.sdp),l.peerConnection.setRemoteDescription(new H(F={sdp:Y.sdp,type:"offer"}),function(){h.default.debug("["+l.clientId+"]setRemoteDescription succeeded")},function(ve){h.default.info("["+l.clientId+"]setRemoteDescription failed: "+ve.name)}),l.state="offer-received",l.markActionNeeded()):l.error("Illegal message for this state: "+Y.messageType+" in state "+l.state):"offer-sent"===l.state?"ANSWER"===Y.messageType?(Y.sdp=he(Y.sdp),Y.sdp=Y.sdp.replace(/ generation 0/g,""),Y.sdp=Y.sdp.replace(/ udp /g," UDP "),-1!==Y.sdp.indexOf("a=group:BUNDLE")?(Y.sdp=Y.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),Y.sdp=Y.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),Y.sdp=Y.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(Y.sdp=Y.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),Y.sdp=Y.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),F={sdp:Y.sdp,type:"answer"},b.screen&&"detail"===b.optimizationMode&&(h.default.debug("[".concat(l.client,"] remove screen share abs ext")),Y.sdp=Q(F.sdp)),l.peerConnection.setRemoteDescription(new H(F),function(){h.default.debug("["+l.clientId+"]setRemoteDescription succeeded")},function(ve){h.default.info("["+l.clientId+"]setRemoteDescription failed: "+ve)}),l.state="established"):"pr-answer"===Y.messageType?l.peerConnection.setRemoteDescription(new H(F={sdp:Y.sdp,type:"pr-answer"}),function(){h.default.debug("["+l.clientId+"]setRemoteDescription succeeded")},function(ve){h.default.info("["+l.clientId+"]setRemoteDescription failed: "+ve.name)}):l.error("offer"===Y.messageType?"Not written yet":"Illegal message for this state: "+Y.messageType+" in state "+l.state):"established"===l.state&&("OFFER"===Y.messageType?(l.peerConnection.setRemoteDescription(new H(F={sdp:Y.sdp,type:"offer"}),function(){h.default.debug("["+l.clientId+"]setRemoteDescription succeeded")},function(ve){h.default.info("["+l.clientId+"]setRemoteDescription failed: "+ve.name)}),l.state="offer-received",l.markActionNeeded()):l.error("Illegal message for this state: "+Y.messageType+" in state "+l.state))},l.setRtpSenderParameters=(W=I()(N.a.mark(function F(Y){var ve,de,ce;return N.a.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(ve=l.peerConnection.getSenders(),de=ve.find(function(Me){return"video"===Me.track.kind})){Te.next=4;break}return Te.abrupt("return");case 4:return(ce=de.getParameters()).degradationPreference=Y,Te.prev=6,h.default.debug("[".concat(l.clientId,"] setParameters"),ce),Te.next=10,de.setParameters(ce);case 10:Te.next=15;break;case 12:Te.prev=12,Te.t0=Te.catch(6),h.default.debug("[".concat(l.clientId,"] setParameters failed, ignore"));case 15:case"end":return Te.stop()}},F,null,[[6,12]])})),function(F){return W.apply(this,arguments)});var u={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},q={id:"",type:"",mediaType:"",googCodecName:b.codec?b.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},g={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},C={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},L=0,K=0,ie=0;l.getVideoRelatedStats=function(W){l.peerConnection.getStats().then(function(F){var Y,ve=U(F.values());try{for(ve.s();!(Y=ve.n()).done;){var de=Y.value;if(l.isSubscriber){if(("inbound-rtp"===de.type||"inboundrtp"===de.type)&&"video"===de.mediaType){if(!l.lastReport)return void(l.lastReport=de);W&&W({browser:"firefox",mediaType:"video",peerId:l.uid,isVideoMute:l.isVideoMute,frameRateReceived:Math.round(de.framerateMean)+"",frameRateDecoded:de.framesDecoded-l.lastReport.framesDecoded+"",bytesReceived:de.bytesReceived+"",packetsReceived:de.packetsReceived+"",packetsLost:de.packetsLost+""}),l.lastReport=de}}else if(("outbound-rtp"===de.type||"outboundrtp"===de.type)&&"video"===de.mediaType){if(!l.lastReport)return void(l.lastReport=de);W&&W({mediaType:"video",isVideoMute:l.isVideoMute,frameRateInput:Math.round(de.framerateMean)+"",frameRateSent:de.framesEncoded-l.lastReport.framesEncoded+""}),l.lastReport=de}}}catch(ce){ve.e(ce)}finally{ve.f()}})},l.getAudioRelatedStats=function(W){l.peerConnection.getStats().then(function(F){var Y,ve=U(F.values());try{for(ve.s();!(Y=ve.n()).done;){var de=Y.value;l.isSubscriber&&("inbound-rtp"!==de.type&&"inboundrtp"!==de.type||"audio"!==de.mediaType||W&&W({browser:"firefox",mediaType:"audio",peerId:l.uid,isAudioMute:l.isAudioMute,frameDropped:de.packetsLost+"",frameReceived:de.packetsReceived+"",googJitterReceived:de.jitter+"",bytesReceived:de.bytesReceived+"",packetsReceived:de.packetsReceived+"",packetsLost:de.packetsLost+""}))}}catch(ce){ve.e(ce)}finally{ve.f()}})},l.getStatsRate=function(W){l.getStats(function(F){F.forEach(function(Y){}),W(F)})},l.getStats=function(W,F){F=(F=F||500)>500?500:F,l.lastTimeGetStats&&Date.now()-l.lastTimeGetStats<F?W&&W(l.filterStatsCache,l.originStatsCache):this._getStats(function(Y,ve){l.filterStatsCache=Y,l.originStatsCache=ve,l.lastTimeGetStats=Date.now(),W&&W(Y,ve)})},l._getStats=function(W){l.peerConnection.getStats().then(function(F){var Y,ve=[],de=U(F.values());try{for(de.s();!(Y=de.n()).done;){var ce=Y.value;ve.push(ce),"outbound-rtp"!==ce.type&&"outboundrtp"!==ce.type||"video"!==ce.mediaType||-1!==ce.id.indexOf("rtcp")||(q.id=ce.id,q.type=ce.type,q.mediaType=ce.mediaType,q.bytesSent=ce.bytesSent?ce.bytesSent+"":"0",q.packetsSent=ce.packetsSent?ce.packetsSent+"":"0",q.googPlisReceived=ce.pliCount?ce.pliCount+"":"0",q.googNacksReceived=ce.nackCount?ce.nackCount+"":"0",q.googFirsReceived=ce.firCount?ce.firCount+"":"0",q.googFrameRateSent=ce.framerateMean?Math.round(ce.framerateMean)+"":"0"),"outbound-rtp"!==ce.type&&"outboundrtp"!==ce.type||"audio"!==ce.mediaType||-1!==ce.id.indexOf("rtcp")||(u.id=ce.id,u.type=ce.type,u.mediaType=ce.mediaType,u.bytesSent=ce.bytesSent?ce.bytesSent+"":"0",u.packetsSent=ce.packetsSent?ce.packetsSent+"":"0",b.agoraStream.local&&(u.audioInputLevel=Math.round(32767*b.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==ce.type&&"inboundrtp"!==ce.type||"audio"!==ce.mediaType||ce.isRemote||-1!==ce.id.indexOf("rtcp")||(g.id=ce.id,g.type=ce.type,g.mediaType=ce.mediaType,g.bytesReceived=ce.bytesReceived?ce.bytesReceived+"":"0",g.packetsLost=ce.packetsLost?ce.packetsLost+"":"0",g.packetsReceived=ce.packetsReceived?ce.packetsReceived+"":"0",g.googJitterReceived=ce.jitter?ce.jitter+"":"0",b.agoraStream.local||(g.audioOutputLevel=Math.round(32767*b.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==ce.type&&"inboundrtp"!==ce.type||"video"!==ce.mediaType||ce.isRemote||-1!==ce.id.indexOf("rtcp")||(C.id=ce.id,C.type=ce.type,C.mediaType=ce.mediaType,C.bytesReceived=ce.bytesReceived?ce.bytesReceived+"":"0",C.googFrameRateReceived=ce.framerateMean?Math.round(ce.framerateMean)+"":"0",C.googFramesDecoded=ce.framesDecoded?ce.framesDecoded+"":"0",Date.now()-ie>=1e3?(C.googFrameRateDecoded=(ce.framesDecoded-L)/((Date.now()-ie)/1e3),C.googFrameRateDecoded=Math.round(Math.max(0,C.googFrameRateDecoded)),ie=Date.now(),K=C.googFrameRateDecoded,L=ce.framesDecoded,C.googFrameRateDecoded=C.googFrameRateDecoded.toString()):C.googFrameRateDecoded=K.toString(),C.packetsLost=ce.packetsLost?ce.packetsLost+"":"0",C.packetsReceived=ce.packetsReceived?ce.packetsReceived+"":"0",C.googJitterBufferMs=ce.jitter?ce.jitter+"":"0",C.googNacksSent=ce.nackCount?ce.nackCount+"":"0",C.googPlisSent=ce.pliCount?ce.pliCount+"":"0",C.googFirsSent=ce.firCount?ce.firCount+"":"0"),-1!==ce.id.indexOf("outbound_rtcp_video")&&(q.packetsLost=ce.packetsLost?ce.packetsLost+"":"0")}}catch(Me){de.e(Me)}finally{de.f()}var Te=[q,u,g,C];Te.push({id:"time",startTime:l.connectedTime,timestamp:new Date}),W(Te,ve)},function(F){h.default.error("["+l.clientId+"]"+F)})},l.addStream=function(W){_=!0,l.peerConnection.addStream(W),l.markActionNeeded()},l.removeStream=function(){l.markActionNeeded()},l.close=function(){l.state="closed",l.peerConnection.close()},l.markActionNeeded=function(){l.actionNeeded=!0,l.doLater(function(){l.onstablestate()})},l.doLater=function(W){window.setTimeout(W,1)},l.onstablestate=function(){if(l.actionNeeded){if("new"===l.state||"established"===l.state)_&&(l.mediaConstraints=void 0),l.peerConnection.createOffer(function(F){if(F.sdp=he(F.sdp),F.sdp=F.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),F.sdp!==l.prevOffer)return l.peerConnection.setLocalDescription(F),l.state="preparing-offer",void l.markActionNeeded();h.default.debug("["+l.clientId+"]Not sending a new offer")},function(F){h.default.debug("["+l.clientId+"]Ups! create offer failed ",F)},l.mediaConstraints);else if("preparing-offer"===l.state){if(l.moreIceComing)return;l.prevOffer=l.peerConnection.localDescription.sdp,l.offerCandidates=l.prevOffer.match(/a=candidate.+\r\n/g)||[],l.offerCandidates.length||(b.isCloudProxy3&&b.onNoIceCandidate&&b.onNoIceCandidate(),h.default.warning("[".concat(l.clientId,"]No Ice Candidate generated")),Object(v.getParameter)("SHIM_CANDIDATE")?(h.default.debug("Shimming fake candidate"),l.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):h.default.error("[".concat(l.clientId,"]None Ice Candidate not allowed"))),l.prevOffer=l.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),l.sendMessage("OFFER",l.prevOffer),l.state="offer-sent"}else if("offer-received"===l.state)l.peerConnection.createAnswer(function(F){if(l.peerConnection.setLocalDescription(F),l.state="offer-received-preparing-answer",l.iceStarted)l.markActionNeeded();else{var Y=new Date;h.default.debug("["+l.clientId+"]"+Y.getTime()+": Starting ICE in responder"),l.iceStarted=!0}},function(){h.default.debug("["+l.clientId+"]Ups! Something went wrong")});else if("offer-received-preparing-answer"===l.state){if(l.moreIceComing)return;l.sendMessage("ANSWER",l.peerConnection.localDescription.sdp),l.state="established"}else l.debug("Dazed and confused in state "+l.state+", stopping here");l.actionNeeded=!1}},l.sendMessage=function(W,F){var Y={};Y.messageType=W,Y.sdp=F,"OFFER"===W?(Y.offererSessionId=l.sessionId,Y.answererSessionId=l.otherSessionId,Y.seq=l.sequenceNumber+=1,Y.tiebreaker=Math.floor(429496723*Math.random()+1)):(Y.offererSessionId=l.incomingMessage.offererSessionId,Y.answererSessionId=l.sessionId,Y.seq=l.incomingMessage.seq),l.onsignalingmessage(JSON.stringify(Y))},l._getSender=function(W){if(l.peerConnection&&l.peerConnection.getSenders){var F=l.peerConnection.getSenders().find(function(Y){return Y.track.kind==W});if(F)return F}return null},l.hasSender=function(W){return!!l._getSender(W)},l.replaceTrack=function(W,F,Y){var ve=l._getSender(W.kind);if(!ve)return Y("NO_SENDER_FOUND");try{ve.replaceTrack(W)}catch(de){return Y&&Y(de)}setTimeout(function(){return F&&F()},50)},l.error=function(W){throw"Error in RoapOnJsep: "+W},l.sessionId=l.roapSessionId+=1,l.sequenceNumber=0,l.actionNeeded=!1,l.iceStarted=!1,l.moreIceComing=!0,l.iceCandidateCount=0,l.onsignalingmessage=b.callback,l.peerConnection.ontrack=function(W){l.onaddstream&&l.onaddstream(W,"ontrack")},l.peerConnection.onremovestream=function(W){l.onremovestream&&l.onremovestream(W)},l.peerConnection.oniceconnectionstatechange=function(W){"connected"===W.currentTarget.iceConnectionState&&(l.connectedTime=new Date),l.oniceconnectionstatechange&&l.oniceconnectionstatechange(W.currentTarget.iceConnectionState)};var he=function(W){var F;if(b.video&&b.maxVideoBW&&(null==(F=W.match(/m=video.*\r\n/))&&(F=W.match(/m=video.*\n/)),F&&F.length>0)){var Y=F[0]+"b=TIAS:"+1e3*b.maxVideoBW+"\r\n";W=W.replace(F[0],Y)}return b.audio&&b.maxAudioBW&&(null==(F=W.match(/m=audio.*\r\n/))&&(F=W.match(/m=audio.*\n/)),F&&F.length>0)&&(W=W.replace(F[0],Y=F[0]+"b=TIAS:"+1e3*b.maxAudioBW+"\r\n")),W},Q=function(W){return(W=W.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return l.onaddstream=null,l.onremovestream=null,l.state="new",l.markActionNeeded(),l}(b)):"iOS"===D.getBrowserOS()||D.isSafari()?(h.default.debug("["+l.streamId+"]["+l.clientId+"]Safari"),(l=function(b){var l={},H=m.RTCPeerConnection;l.uid=b.uid,l.isVideoMute=b.isVideoMute,l.isAudioMute=b.isAudioMute,l.isSubscriber=b.isSubscriber,l.clientId=b.clientId,l.filterStatsCache=[],l.originStatsCache=[],l.lastTimeGetStats=null,l.pc_config={iceServers:[],bundlePolicy:"max-bundle"},l.con={optional:[{DtlsSrtpKeyAgreement:!0}]},b.iceServers instanceof Array?l.pc_config.iceServers=b.iceServers:(b.stunServerUrl&&(b.stunServerUrl instanceof Array?b.stunServerUrl.map(function(W){"string"==typeof W&&""!==W&&l.pc_config.iceServers.push({url:W})}):"string"==typeof b.stunServerUrl&&""!==b.stunServerUrl&&l.pc_config.iceServers.push({url:b.stunServerUrl})),b.turnServers&&(b.turnServers instanceof Array?b.turnServers.map(function(W){W.udpport&&l.pc_config.iceServers.push({username:W.username,credential:W.credential,credentialType:"password",urls:(W.useTurns?"turns:":"turn:")+W.url+":"+W.udpport+"?transport=udp"}),"string"==typeof W.tcpport&&""!==W.tcpport&&l.pc_config.iceServers.push({username:W.username,credential:W.credential,credentialType:"password",urls:(W.useTurns?"turns:":"turn:")+W.url+":"+W.tcpport+"?transport=tcp"}),!0===W.forceturn&&(l.pc_config.iceTransportPolicy="relay")}):h.default.error("[".concat(l.clientId,"] turnServers is not a array")))),void 0===b.audio&&(b.audio=!0),void 0===b.video&&(b.video=!0),l.mediaConstraints={mandatory:{OfferToReceiveVideo:b.video,OfferToReceiveAudio:b.audio}},l.roapSessionId=103;try{l.pc_config.sdpSemantics=Object(v.getParameter)("PLAN"),l.peerConnection=new H(l.pc_config,l.con)}catch(W){delete l.pc_config.sdpSemantics,l.peerConnection=new H(l.pc_config,l.con)}l.iceCandidateTimer=setTimeout(function(){l.iceCandidateTimer=null,l.moreIceComing&&(l.moreIceComing=!1,l.markActionNeeded())},Object(v.getParameter)("CANDIDATE_TIMEOUT")),l.peerConnection.onicecandidate=function(W){var F,Y,ve,de;Y=(F=l.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),ve=F.match(/a=candidate:.+typ\shost.+\r\n/),de=F.match(/a=candidate:.+typ\srelay.+\r\n/),0===l.iceCandidateCount&&(l.timeout=setTimeout(function(){l.moreIceComing&&(l.moreIceComing=!1,l.markActionNeeded())},1e3)),null===Y&&null===ve&&null===de||void 0!==l.ice||!l.iceCandidateTimer||(clearTimeout(l.iceCandidateTimer),l.iceCandidateTimer=null,l.ice=0,l.moreIceComing=!1,l.markActionNeeded()),l.iceCandidateCount=l.iceCandidateCount+1};var W,_=function(W){return b.screen&&(W=W.replace("a=x-google-flag:conference\r\n","")),W},u=function(W){var F;return(F=W.match(/m=video.*\r\n/))&&b.minVideoBW&&b.maxVideoBW&&(W=W.replace(F[0],F[0]+"b=AS:"+b.maxVideoBW+"\r\n"),h.default.debug("["+l.clientId+"]Set Video Bitrate - min:"+b.minVideoBW+" max:"+b.maxVideoBW)),(F=W.match(/m=audio.*\r\n/))&&b.maxAudioBW&&(W=W.replace(F[0],F[0]+"b=AS:"+b.maxAudioBW+"\r\n")),W};l.processSignalingMessage=function(W){var F,Y=JSON.parse(W);l.incomingMessage=Y,"new"===l.state?"OFFER"===Y.messageType?(F={sdp:Y.sdp,type:"offer"},l.peerConnection.setRemoteDescription(new RTCSessionDescription(F)),l.state="offer-received",l.markActionNeeded()):l.error("Illegal message for this state: "+Y.messageType+" in state "+l.state):"offer-sent"===l.state?"ANSWER"===Y.messageType?((F={sdp:Y.sdp,type:"answer"}).sdp=_(F.sdp),F.sdp=u(F.sdp),F.sdp=F.sdp.replace(/a=x-google-flag:conference\r\n/g,""),b.screen&&"detail"===b.optimizationMode&&(h.default.debug("[".concat(l.client,"] remove screen share abs ext")),F.sdp=F.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),l.peerConnection.setRemoteDescription(new RTCSessionDescription(F)),l.state="established"):"pr-answer"===Y.messageType?(F={sdp:Y.sdp,type:"pr-answer"},l.peerConnection.setRemoteDescription(new RTCSessionDescription(F))):l.error("offer"===Y.messageType?"Not written yet":"Illegal message for this state: "+Y.messageType+" in state "+l.state):"established"===l.state&&("OFFER"===Y.messageType?(F={sdp:Y.sdp,type:"offer"},l.peerConnection.setRemoteDescription(new RTCSessionDescription(F)),l.state="offer-received",l.markActionNeeded()):"ANSWER"===Y.messageType?((F={sdp:Y.sdp,type:"answer"}).sdp=_(F.sdp),F.sdp=u(F.sdp),l.peerConnection.setRemoteDescription(new RTCSessionDescription(F))):l.error("Illegal message for this state: "+Y.messageType+" in state "+l.state))},l.setRtpSenderParameters=(W=I()(N.a.mark(function F(Y){return N.a.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:l.degradation=Y;case 1:case"end":return ve.stop()}},F)})),function(F){return W.apply(this,arguments)}),l._setRtpSenderParameters=function(){var W=I()(N.a.mark(function F(Y){var ve,de,ce;return N.a.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(ve=l.peerConnection.getSenders(),de=ve.find(function(Me){return"video"===Me.track.kind})){Te.next=4;break}return Te.abrupt("return");case 4:return(ce=de.getParameters()).degradationPreference=Y,Te.prev=6,h.default.debug("[".concat(l.clientId,"] setParameters"),ce),Te.next=10,de.setParameters(ce);case 10:Te.next=15;break;case 12:Te.prev=12,Te.t0=Te.catch(6),h.default.debug("[".concat(l.clientId,"] setParameters failed, ignore"));case 15:case"end":return Te.stop()}},F,null,[[6,12]])}));return function(F){return W.apply(this,arguments)}}();var q={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},g={id:"",type:"",mediaType:"",googCodecName:b.codec?b.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},C={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},L={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},K={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},ie=0,he=0,Q=0;return l.isRemoteVideoStats=function(W){return!!(W.frameHeight&&W.frameWidth&&W.remoteSource)},l.getVideoRelatedStats=function(W){l.peerConnection.getStats().then(function(F){F.forEach(function(Y){if(l.isSubscriber){var ve={peerId:l.uid,mediaType:"video",isVideoMute:l.isVideoMute};if("track"===Y.type&&(~Y.id.indexOf("video")||~Y.trackIdentifier.indexOf("v")||l.isRemoteVideoStats(Y))){if(!l.lastReport)return void(l.lastReport=Y);ve.frameRateReceived=Y.framesReceived-l.lastReport.framesReceived+"",ve.frameRateDecoded=Y.framesDecoded-l.lastReport.framesDecoded+"",l.lastReport=Y}"inbound-rtp"===Y.type&&~Y.id.indexOf("Video")&&(ve.bytesReceived=Y.bytesReceived+"",ve.packetsReceived=Y.packetsReceived+"",ve.packetsLost=Y.packetsLost+""),W&&W(ve)}else if("outbound-rtp"===Y.type&&~Y.id.indexOf("Video")){if(!l.lastReport)return void(l.lastReport=Y);W&&W({mediaType:"video",isVideoMute:l.isVideoMute,frameRateInput:b.maxFrameRate+"",frameRateSent:Y.framesEncoded-l.lastReport.framesEncoded+""}),l.lastReport=Y}})})},l.getAudioRelatedStats=function(W){l.peerConnection.getStats().then(function(F){F.forEach(function(Y){l.isSubscriber&&"inbound-rtp"===Y.type&&~Y.id.indexOf("Audio")&&W&&W({peerId:l.uid,mediaType:"audio",isAudioMute:l.isAudioMute,frameDropped:Y.packetsLost+"",frameReceived:Y.packetsReceived+"",googJitterReceived:Y.jitter+"",bytesReceived:Y.bytesReceived+"",packetsReceived:Y.packetsReceived+"",packetsLost:Y.packetsLost+""})})})},l.getStatsRate=function(W){l.getStats(function(F){F.forEach(function(Y){"outbound-rtp"===Y.type&&"video"===Y.mediaType&&Y.googFramesEncoded&&(Y.googFrameRateSent=Math.ceil((Y.googFramesEncoded-ie)/3).toString(),ie=Y.googFramesEncoded),"inbound-rtp"===Y.type&&-1!=Y.id.indexOf("55543")&&(Y.googFrameRateReceived&&(Y.googFrameRateReceived=Math.ceil((Y.googFrameReceived-Q)/3).toString(),Q=Y.googFrameReceived),Y.googFrameRateDecoded&&(Y.googFrameRateDecoded=Math.ceil((Y.googFramesDecoded-he)/3).toString(),he=Y.googFramesDecoded))}),W(F)})},l.getStats=function(W,F){F=(F=F||500)>500?500:F,l.lastTimeGetStats&&Date.now()-l.lastTimeGetStats<F?W&&W(l.filterStatsCache,l.originStatsCache):this._getStats(function(Y,ve){l.filterStatsCache=Y,l.originStatsCache=ve,l.lastTimeGetStats=Date.now(),W&&W(Y,ve)})},l._getStats=function(W){var F=[];l.peerConnection.getStats().then(function(Y){Y.forEach(function(de){var ce;F.push(de),"outbound-rtp"===de.type&&"audio"===de.mediaType&&(q.id=de.id,q.type=de.type,q.mediaType=de.mediaType,q.bytesSent=de.bytesSent?de.bytesSent+"":"0",q.packetsSent=de.packetsSent?de.packetsSent+"":"0",b.agoraStream.local&&(q.audioInputLevel=Math.round(32767*b.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===de.type&&"video"===de.mediaType&&(g.id=de.id,g.type=de.type,g.mediaType=de.mediaType,g.bytesSent=de.bytesSent?de.bytesSent+"":"0",g.packetsSent=de.packetsSent?de.packetsSent+"":"0",g.googPlisReceived=de.pliCount?de.pliCount+"":"0",g.googNacksReceived=de.nackCount?de.nackCount+"":"0",g.googFirsReceived=de.firCount?de.firCount+"":"0",g.googFramesEncoded=de.framesEncoded?de.framesEncoded+"":"0",(ce=Y.get(de.trackId))&&(g.googFrameHeightSent=ce.frameHeight&&ce.frameHeight.toString(),g.googFrameWidthSent=ce.frameWidth&&ce.frameWidth.toString())),"inbound-rtp"!==de.type||-1==de.id.indexOf("44444")&&"audio"!==de.mediaType||(C.id=de.id,C.type=de.type,C.mediaType="audio",C.packetsReceived=de.packetsReceived?de.packetsReceived+"":"0",C.bytesReceived=de.bytesReceived?de.bytesReceived+"":"0",C.packetsLost=de.packetsLost?de.packetsLost+"":"0",C.packetsReceived=de.packetsReceived?de.packetsReceived+"":"0",C.googJitterReceived=de.jitter?de.jitter+"":"0",(ce=Y.get(de.trackId))&&(C.audioOutputLevel=ce.audioLevel&&Math.round(32767*ce.audioLevel).toString()),b.agoraStream.local||C.audioOutputLevel||(C.audioOutputLevel=Math.round(32767*b.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==de.type||-1==de.id.indexOf("55543")&&"video"!==de.mediaType||(L.id=de.id,L.type=de.type,L.mediaType="video",L.packetsReceived=de.packetsReceived?de.packetsReceived+"":"0",L.bytesReceived=de.bytesReceived?de.bytesReceived+"":"0",L.packetsLost=de.packetsLost?de.packetsLost+"":"0",L.googJitterBufferMs=de.jitter?de.jitter+"":"0",L.googNacksSent=de.nackCount?de.nackCount+"":"0",L.googPlisSent=de.pliCount?de.pliCount+"":"0",L.googFirsSent=de.firCount?de.firCount+"":"0",(ce=Y.get(de.trackId))&&(L.googFrameHeightReceived=ce.frameHeight&&ce.frameHeight.toString(),L.googFrameWidthReceived=ce.frameWidth&&ce.frameWidth.toString(),L.googFrameReceived=ce.framesReceived&&ce.framesReceived.toString(),L.googFramesDecoded=ce.framesDecoded&&ce.framesDecoded.toString())),"candidate-pair"===de.type&&(0==de.availableIncomingBitrate?K.googAvailableSendBandwidth=de.availableOutgoingBitrate+"":K.googAvailableReceiveBandwidth=de.availableIncomingBitrate+"")});var ve=[K,q,g,C,L];ve.push({id:"time",startTime:l.connectedTime,timestamp:new Date}),W(ve,F)}).catch(function(Y){h.default.error("["+l.clientId+"] ",Y)})},l.addTrack=function(W,F){l.peerConnection.addTrack(W,F)},l.removeTrack=function(W,F){var Y=l.peerConnection.getSenders().find(function(ve){return ve.track==W});Y.replaceTrack(null),l.peerConnection.removeTrack(Y)},l.addStream=function(W){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?W.getTracks().forEach(function(F){return l.peerConnection.addTrack(F,W)}):l.peerConnection.addStream(W),l.markActionNeeded()},l.removeStream=function(){l.markActionNeeded()},l.close=function(){l.state="closed",l.peerConnection.close()},l.markActionNeeded=function(){l.actionNeeded=!0,l.doLater(function(){l.onstablestate()})},l.doLater=function(W){window.setTimeout(W,1)},l.onstablestate=function(){if(l.actionNeeded){if("new"===l.state||"established"===l.state)b.isSubscriber&&(l.peerConnection.addTransceiver("audio",{direction:"recvonly"}),l.peerConnection.addTransceiver("video",{direction:"recvonly"})),l.peerConnection.createOffer(l.mediaConstraints).then(function(F){if(F.sdp=u(F.sdp),b.isSubscriber||(F.sdp=F.sdp.replace(/a=.*video-orientation\r\n/g,"")),F.sdp!==l.prevOffer)return l.peerConnection.setLocalDescription(F),l.state="preparing-offer",void l.markActionNeeded();h.default.debug("["+l.clientId+"]Not sending a new offer")}).catch(function(F){h.default.debug("["+l.clientId+"]peer connection create offer failed ",F)});else if("preparing-offer"===l.state){if(l.moreIceComing)return;l.prevOffer=l.peerConnection.localDescription.sdp,l.offerCandidates=l.prevOffer.match(/a=candidate.+\r\n/g)||[],l.offerCandidates.length||(h.default.warning("[".concat(l.clientId,"]No Ice Candidate generated")),b.isCloudProxy3&&b.onNoIceCandidate&&b.onNoIceCandidate(),Object(v.getParameter)("SHIM_CANDIDATE")?(h.default.debug("Shimming fake candidate"),l.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):h.default.error("[".concat(l.clientId,"]None Ice Candidate not allowed"))),l.prevOffer=l.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),l.sendMessage("OFFER",l.prevOffer),l.state="offer-sent"}else if("offer-received"===l.state)l.peerConnection.createAnswer(function(F){if(l.peerConnection.setLocalDescription(F),l.state="offer-received-preparing-answer",l.iceStarted)l.markActionNeeded();else{var Y=new Date;h.default.debug("["+l.clientId+"]"+Y.getTime()+": Starting ICE in responder"),l.iceStarted=!0}},function(F){h.default.debug("["+l.clientId+"]peer connection create answer failed ",F)},l.mediaConstraints);else if("offer-received-preparing-answer"===l.state){if(l.moreIceComing)return;l.sendMessage("ANSWER",l.peerConnection.localDescription.sdp),l.state="established"}else l.debug("Dazed and confused in state "+l.state+", stopping here");l.actionNeeded=!1}},l.sendMessage=function(W,F){var Y={};Y.messageType=W,Y.sdp=F,"OFFER"===W?(Y.offererSessionId=l.sessionId,Y.answererSessionId=l.otherSessionId,Y.seq=l.sequenceNumber+=1,Y.tiebreaker=Math.floor(429496723*Math.random()+1)):(Y.offererSessionId=l.incomingMessage.offererSessionId,Y.answererSessionId=l.sessionId,Y.seq=l.incomingMessage.seq),l.onsignalingmessage(JSON.stringify(Y))},l._getSender=function(W){if(l.peerConnection&&l.peerConnection.getSenders){var F=l.peerConnection.getSenders().find(function(Y){return Y.track.kind==W});if(F)return F}return null},l.hasSender=function(W){return!!l._getSender(W)},l.replaceTrack=function(W,F,Y){var ve=l._getSender(W.kind);if(!ve)return Y("NO_SENDER_FOUND");try{ve.replaceTrack(W)}catch(de){return Y&&Y(de)}setTimeout(function(){return F&&F()},50)},l.error=function(W){throw"Error in RoapOnJsep: "+W},l.sessionId=l.roapSessionId+=1,l.sequenceNumber=0,l.actionNeeded=!1,l.iceStarted=!1,l.moreIceComing=!0,l.iceCandidateCount=0,l.onsignalingmessage=b.callback,l.peerConnection.ontrack=function(W){console.log("!!! ontrack, ",W.track.kind,W.track),l.onaddstream&&l.onaddstream(W,"ontrack")},l.peerConnection.onremovestream=function(W){l.onremovestream&&l.onremovestream(W)},l.peerConnection.oniceconnectionstatechange=function(W){"connected"===W.currentTarget.iceConnectionState&&(l.connectedTime=new Date,l._setRtpSenderParameters(l.degradation)),l.oniceconnectionstatechange&&l.oniceconnectionstatechange(W.currentTarget.iceConnectionState)},l.renegotiate=function(){l.isSubscriber||(h.default.debug("[".concat(l.uid,"]"),"renegotiating"),void 0!==l.prevOffer&&l.peerConnection.createOffer().then(function(W){return W.sdp=W.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),W.sdp=_(W.sdp),W.sdp=u(W.sdp),l.peerConnection.setLocalDescription(W)}).then(function(){l.onnegotiationneeded&&l.onnegotiationneeded(l.peerConnection.localDescription.sdp)}).catch(function(W){console.log("createOffer error: ",W)}))},l.isSubscriber||(l.peerConnection.onnegotiationneeded=l.renegotiate),l.onaddstream=null,l.onremovestream=null,l.state="new",l.markActionNeeded(),l}(b)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?l=new ee.a(b):(l=function(b){var l={},H=m.RTCPeerConnection;l.uid=b.uid,l.isVideoMute=b.isVideoMute,l.isAudioMute=b.isAudioMute,l.isSubscriber=b.isSubscriber,l.clientId=b.clientId,l.filterStatsCache=[],l.originStatsCache=[],l.lastTimeGetStats=null,l.pc_config={iceServers:[]};var _={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},u={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:b.codec?b.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},q={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},g={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},C={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};l.con={optional:[{DtlsSrtpKeyAgreement:!0}]},b.iceServers instanceof Array?l.pc_config.iceServers=b.iceServers:(b.stunServerUrl&&(b.stunServerUrl instanceof Array?b.stunServerUrl.map(function(Q){"string"==typeof Q&&""!==Q&&l.pc_config.iceServers.push({url:Q})}):"string"==typeof b.stunServerUrl&&""!==b.stunServerUrl&&l.pc_config.iceServers.push({url:b.stunServerUrl})),b.turnServers&&(b.turnServers instanceof Array?b.turnServers.map(function(Q){Q.udpport&&l.pc_config.iceServers.push({username:Q.username,credential:Q.credential,credentialType:"password",urls:(Q.useTurns?"turns:":"turn:")+Q.url+":"+Q.udpport+"?transport=udp"}),"string"==typeof Q.tcpport&&""!==Q.tcpport&&l.pc_config.iceServers.push({username:Q.username,credential:Q.credential,credentialType:"password",urls:(Q.useTurns?"turns:":"turn:")+Q.url+":"+Q.tcpport+"?transport=tcp"}),!0===Q.forceturn&&(l.pc_config.iceTransportPolicy="relay")}):h.default.error("[".concat(l.clientId,"] turnServers is not a array")))),void 0===b.audio&&(b.audio=!0),void 0===b.video&&(b.video=!0),l.mediaConstraints={mandatory:{OfferToReceiveVideo:b.video,OfferToReceiveAudio:b.audio}},l.roapSessionId=103;try{l.pc_config.sdpSemantics=Object(v.getParameter)("PLAN"),l.peerConnection=new H(l.pc_config,l.con)}catch(Q){delete l.pc_config.sdpSemantics,l.peerConnection=new H(l.pc_config,l.con)}l.iceCandidateTimer=setTimeout(function(){l.iceCandidateTimer=null,h.default.debug("[".concat(l.clientId,"]Candidates collected: ").concat(l.iceCandidateCount)),l.moreIceComing&&(l.moreIceComing=!1,l.markActionNeeded())},Object(v.getParameter)("CANDIDATE_TIMEOUT")),l.peerConnection.onicecandidate=function(Q){var W,F,Y,ve;F=(W=l.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),Y=W.match(/a=candidate:.+typ\shost.+\r\n/),ve=W.match(/a=candidate:.+typ\srelay.+\r\n/),null===F&&null===Y&&null===ve||void 0!==l.ice||!l.iceCandidateTimer||(clearTimeout(l.iceCandidateTimer),l.iceCandidateTimer=null,l.ice=0,l.moreIceComing=!1,l.markActionNeeded()),l.iceCandidateCount=l.iceCandidateCount+1};var Q,L=function(Q){return Q.replace("a=x-google-flag:conference\r\n","")},K=function(Q){var W,F;if((W=Q.match(/m=video.*\r\n/))&&b.minVideoBW&&b.maxVideoBW){F=W[0]+"b=AS:"+b.maxVideoBW+"\r\n";var Y=0,ve=0;"h264"===b.codec?(Y=Q.search(/a=rtpmap:(\d+) H264\/90000\r\n/),ve=Q.search(/H264\/90000\r\n/)):"vp8"===b.codec?(Y=Q.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),ve=Q.search(/VP8\/90000\r\n/)):"vp9"===b.codec&&(Y=Q.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),ve=Q.search(/VP9\/90000\r\n/)),-1!==Y&&-1!==ve&&ve-Y>10&&(F=F+"a=fmtp:"+Q.slice(Y+9,ve-1)+" x-google-min-bitrate="+b.minVideoBW+"\r\n"),Q=(Q=Q.replace(W[0],F)).replace(/42001f/g,"42e01f"),h.default.debug("["+l.clientId+"]Set Video Bitrate - min:"+b.minVideoBW+" max:"+b.maxVideoBW)}return(W=Q.match(/m=audio.*\r\n/))&&b.maxAudioBW&&(Q=Q.replace(W[0],F=W[0]+"b=AS:"+b.maxAudioBW+"\r\n")),Q};l.processSignalingMessage=function(Q){var W,F=JSON.parse(Q);l.incomingMessage=F,"new"===l.state?"OFFER"===F.messageType?(W={sdp:F.sdp,type:"offer"},l.peerConnection.setRemoteDescription(new RTCSessionDescription(W)).catch(function(Y){}),l.state="offer-received",l.markActionNeeded()):l.error("Illegal message for this state: "+F.messageType+" in state "+l.state):"offer-sent"===l.state?"ANSWER"===F.messageType?((W={sdp:F.sdp,type:"answer"}).sdp=L(W.sdp),W.sdp=K(W.sdp),b.screen&&"detail"===b.optimizationMode&&(h.default.debug("[".concat(l.client,"] remove screen share abs ext")),W.sdp=W.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),b.isSubscriber&&(W.sdp=W.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),l.peerConnection.setRemoteDescription(new RTCSessionDescription(W)).catch(function(Y){}),l.state="established"):"pr-answer"===F.messageType?(W={sdp:F.sdp,type:"pr-answer"},l.peerConnection.setRemoteDescription(new RTCSessionDescription(W)).catch(function(Y){})):l.error("offer"===F.messageType?"Not written yet":"Illegal message for this state: "+F.messageType+" in state "+l.state):"established"===l.state&&("OFFER"===F.messageType?(W={sdp:F.sdp,type:"offer"},l.peerConnection.setRemoteDescription(new RTCSessionDescription(W)).catch(function(Y){}),l.state="offer-received",l.markActionNeeded()):"ANSWER"===F.messageType?((W={sdp:F.sdp,type:"answer"}).sdp=L(W.sdp),W.sdp=K(W.sdp),l.peerConnection.setRemoteDescription(new RTCSessionDescription(W)).catch(function(Y){})):l.error("Illegal message for this state: "+F.messageType+" in state "+l.state))},l.setRtpSenderParameters=(Q=I()(N.a.mark(function W(F){var Y,ve,de;return N.a.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(Y=l.peerConnection.getSenders(),console.log("senders",Y),ve=Y.find(function(Te){return"video"===Te.track.kind})){ce.next=5;break}return ce.abrupt("return");case 5:return(de=ve.getParameters()).degradationPreference=F,ce.prev=7,h.default.debug("[".concat(l.clientId,"] setParameters"),de),ce.next=11,ve.setParameters(de);case 11:ce.next=16;break;case 13:ce.prev=13,ce.t0=ce.catch(7),h.default.debug("[".concat(l.clientId,"] setParameters failed, ignore"));case 16:case"end":return ce.stop()}},W,null,[[7,13]])})),function(W){return Q.apply(this,arguments)});var ie=0,he=0;return l.getVideoRelatedStats=function(Q){l.getStats(function(W){W.forEach(function(F){if(l.isSubscriber){if("video"===F.mediaType&&F.id&&~F.id.indexOf("recv")){if(D.isChromeKernel()&&+D.getBrowserVersion()>=76){var ve=+F.googFramesDecoded-he;l._setStat(g,"googFrameRateReceived",+F.googFramesReceived-ie),l._setStat(g,"googFrameRateDecoded",ve),l._setStat(g,"googFrameRateOutput",ve),ie=+F.googFramesReceived,he=+F.googFramesDecoded}Q&&Q({mediaType:"video",peerId:l.uid,isVideoMute:l.isVideoMute,frameRateReceived:F.googFrameRateReceived,frameRateDecoded:F.googFrameRateDecoded,bytesReceived:F.bytesReceived,packetsReceived:F.packetsReceived,packetsLost:F.packetsLost})}}else"video"===F.mediaType&&F.id&&~F.id.indexOf("send")&&Q&&Q({mediaType:"video",isVideoMute:l.isVideoMute,frameRateInput:F.googFrameRateInput,frameRateSent:F.googFrameRateSent,googRtt:F.googRtt})})})},l.getAudioRelatedStats=function(Q){l.getStats(function(W){W.forEach(function(F){l.isSubscriber&&"audio"===F.mediaType&&F.id&&~F.id.indexOf("recv")&&Q&&Q({mediaType:"audio",peerId:l.uid,isAudioMute:l.isAudioMute,frameDropped:parseInt(F.googDecodingPLC)+parseInt(F.googDecodingPLCCNG)+"",frameReceived:F.googDecodingCTN,googJitterReceived:F.googJitterReceived,bytesReceived:F.bytesReceived,packetsReceived:F.packetsReceived,packetsLost:F.packetsLost})})})},l.getStatsRate=function(Q){l.getStats(function(W){Q(W)})},l.getStats=function(Q,W){W=(W=W||500)>500?500:W,l.lastTimeGetStats&&Date.now()-l.lastTimeGetStats<W?Q&&Q(l.filterStatsCache,l.originStatsCache):(l.lastTimeGetStats=Date.now(),this._getStats(function(F,Y){l.filterStatsCache=F,l.originStatsCache=Y,Q&&Q(F,Y)}))},l._setStat=function(Q,W,F){Q.hasOwnProperty(W)&&(null!=F&&F!==1/0&&F==F||(F=0),Q[W]=F+"")},l._processGetStatsAfterChrome76=function(Q){var W=this;l.lastStats||(l.lastStats=new Map),l.peerConnection.getStats().then(function(F){var Y,ve=[],de=[],ce=new Map,Te=new Date,Me=function(b){if("undefined"==typeof Symbol||null==b[Symbol.iterator]){if(Array.isArray(b)||(b=function(C,L){if(C){if("string"==typeof C)return B(C,L);var K=Object.prototype.toString.call(C).slice(8,-1);if("Object"===K&&C.constructor&&(K=C.constructor.name),"Map"===K||"Set"===K)return Array.from(K);if("Arguments"===K||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return B(C,L)}}(b))){var l=0,H=function(){};return{s:H,n:function(){return l>=b.length?{done:!0}:{done:!1,value:b[l++]}},e:function(C){throw C},f:H}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _,u,q=!0,g=!1;return{s:function(){_=b[Symbol.iterator]()},n:function(){var C=_.next();return q=C.done,C},e:function(C){g=!0,u=C},f:function(){try{q||null==_.return||_.return()}finally{if(g)throw u}}}}(F.values());try{for(Me.s();!(Y=Me.n()).done;){var Oe=Y.value;"codec"!=Oe.type?"candidate-pair"!=Oe.type?("inbound-rtp"===Oe.type&&"video"===Oe.mediaType&&ce.set("inbound-video",Oe),"inbound-rtp"===Oe.type&&"audio"===Oe.mediaType&&ce.set("inbound-audio",Oe),"outbound-rtp"===Oe.type&&"audio"===Oe.mediaType&&ce.set("outbound-audio",Oe),"outbound-rtp"===Oe.type&&"video"===Oe.mediaType&&ce.set("outbound-video",Oe),"track"===Oe.type&&"video"===Oe.kind&&Oe.remoteSource&&ce.set("remote-video-track",Oe),"track"===Oe.type&&"audio"===Oe.kind&&Oe.remoteSource&&ce.set("remote-audio-track",Oe),"remote-inbound-rtp"===Oe.type&&"video"===Oe.mediaType&&ce.set("remote-inbound-video",Oe),"remote-inbound-rtp"===Oe.type&&"audio"===Oe.mediaType&&ce.set("remote-inbound-audio",Oe),"track"!==Oe.type||"video"!==Oe.kind||Oe.remoteSource||ce.set("local-video-track",Oe),"track"!==Oe.type||"audio"!==Oe.kind||Oe.remoteSource||ce.set("local-audio-track",Oe),"media-source"===Oe.type&&"video"===Oe.kind&&ce.set("media-source-video",Oe),"media-source"===Oe.type&&"audio"===Oe.kind&&ce.set("media-source-audio",Oe)):de.push(Oe):ve.push(Oe)}}catch(Ze){Me.e(Ze)}finally{Me.f()}ce.set("codec",ve),ce.set("candidatePairs",de),ce.set("timestamp",+Te);var Ae=null,Le=null;if(g.timestamp=Te,q.timestamp=Te,_.timestamp=Te,_.timestamp=Te,C.timestamp=Te,W.isSubscriber)(Ae=ce.get("inbound-video"))&&(l._setStat(g,"id","inbound_video_ssrc_recv"),l._setStat(g,"mediaType",Ae.mediaType),l._setStat(g,"packetsLost",Ae.packetsLost),l._setStat(g,"googDecodeMs",null),l._setStat(g,"googMaxDecodeMs",null),l._setStat(g,"googRenderDelayMs",null),l._setStat(g,"googMinPlayoutDelayMs",null),l._setStat(g,"googNacksSent",Ae.nackCount),l._setStat(g,"googPlisSent",Ae.pliCount),l._setStat(g,"googFirsSent",Ae.firCount),l._setStat(g,"bytesReceived",Ae.bytesReceived),l._setStat(g,"packetsReceived",Ae.packetsReceived)),(Ae=ce.get("inbound-audio"))&&(l._setStat(q,"id","inbound_audio_ssrc_recv"),l._setStat(q,"mediaType",Ae.mediaType),l._setStat(q,"bytesReceived",Ae.bytesReceived),l._setStat(q,"packetsLost",Ae.packetsLost),l._setStat(q,"packetsReceived",Ae.packetsReceived),l._setStat(q,"googAccelerateRate",Ae.removedSamplesForAcceleration),l._setStat(q,"googCurrentDelayMs",Ae.jitterBufferDelay),l._setStat(q,"googDecodingCNG",null),l._setStat(q,"googDecodingCTN",null),l._setStat(q,"googDecodingCTSG",null),l._setStat(q,"googDecodingNormal",null),l._setStat(q,"googDecodingPLC",null),l._setStat(q,"googDecodingPLCCNG",null),l._setStat(q,"googJitterReceived",Ae.jitter),l._setStat(q,"googPreferredJitterBufferMs",null),l._setStat(q,"googSecondaryDecodedRate",null)),(Ae=ce.get("remote-video-track"))&&(l._setStat(g,"googTargetDelayMs",Ae.jitterBufferDelay),l._setStat(g,"googFrameWidthReceived",Ae.frameWidth),l._setStat(g,"googFrameHeightReceived",Ae.frameHeight),l._setStat(g,"googJitterBufferMs",Ae.jitterBufferDelay/Ae.jitterBufferEmittedCount*1e3),l._setStat(g,"googCurrentDelayMs",Ae.jitterBufferDelay),l._setStat(g,"googFramesDecoded",Ae.framesDecoded),l._setStat(g,"googFramesReceived",Ae.framesReceived)),(Ae=ce.get("remote-audio-track"))&&(l._setStat(q,"audioOutputLevel",32767*Ae.audioLevel),l._setStat(q,"googJitterBufferMs",Ae.jitterBufferDelay/Ae.jitterBufferEmittedCount*1e3),l._setStat(q,"googExpandRate",Ae.concealedSamples),l._setStat(q,"googPreemptiveExpandRate",Ae.insertedSamplesForDeceleration),l._setStat(q,"googSpeechExpandRate",Ae.silentConcealedSamples));else{var We=l.lastStats.get("timestamp"),f=l.lastStats.get("outbound-video");if((Ae=ce.get("outbound-audio"))&&(l._setStat(_,"id","outbound_audio_ssrc_send"),l._setStat(_,"mediaType",Ae.mediaType),l._setStat(_,"aecDivergentFilterFraction",null),l._setStat(_,"bytesSent",Ae.bytesSent),l._setStat(_,"packetsSent",Ae.packetsSent),Le=Ae.transportId),Ae=ce.get("outbound-video")){if(l._setStat(u,"id","outbound_video_ssrc_send"),l._setStat(u,"mediaType",Ae.mediaType),l._setStat(u,"bytesSent",Ae.bytesSent),l._setStat(u,"packetsSent",Ae.packetsSent),l._setStat(u,"googAdaptationChanges",Ae.qualityLimitationDurations),l._setStat(u,"googAvgEncodeMs",null),l._setStat(u,"googEncodeUsagePercent",null),Le=Ae.transportId,Ae.totalEncodedBytesTarget&&f&&f.totalEncodedBytesTarget){var ye=(Ae.totalEncodedBytesTarget-f.totalEncodedBytesTarget)/(+new Date-We);l._setStat(C,"googTargetEncBitrate",Math.floor(8*ye*1e3))}if(Ae.retransmittedBytesSent&&f&&f.retransmittedBytesSent){var x=(Ae.retransmittedBytesSent-f.retransmittedBytesSent)/(+new Date-We);l._setStat(C,"googRetransmitBitrate",Math.floor(8*x*1e3))}if(Ae.bytesSent&&f&&f.bytesSent){var De=(Ae.bytesSent-f.bytesSent)/(+new Date-We);l._setStat(C,"googTransmitBitrate",Math.floor(8*De*1e3)),l._setStat(C,"googActualEncBitrate",Math.floor(8*De*1e3))}if(Ae.totalPacketSendDelay&&f&&f.totalPacketSendDelay){var Ue=(Ae.totalPacketSendDelay-f.totalPacketSendDelay)/(+new Date-We);l._setStat(C,"googBucketDelay",Math.floor(1e3*Ue))}}if((Ae=ce.get("remote-inbound-video"))&&(l._setStat(u,"packetsLost",Ae.packetsLost),l._setStat(u,"googRtt",Ae.roundTripTime)),(Ae=ce.get("local-video-track"))&&(l._setStat(u,"googFrameHeightSent",Ae.frameHeight),l._setStat(u,"googFrameWidthSent",Ae.frameWidth),void 0!==Ae.framesPerSecond&&l._setStat(u,"googFrameRateSent",Ae.framesPerSecond)),(Ae=ce.get("local-audio-track"))&&(l._setStat(_,"googEchoCancellationReturnLoss",Ae.echoReturnLoss),l._setStat(_,"googEchoCancellationReturnLossEnhancement",Ae.echoReturnLossEnhancement)),(Ae=ce.get("media-source-video"))&&(l._setStat(u,"googFrameHeightInput",Ae.height),l._setStat(u,"googFrameWidthInput",Ae.width),l._setStat(u,"googFrameRateInput",Ae.framesPerSecond)),(Ae=ce.get("media-source-audio"))&&l._setStat(_,"audioInputLevel",32767*Ae.totalAudioEnergy),(Ae=ce.get("inbound-video"))&&(l._setStat(u,"googFirsReceived",Ae.firCount),l._setStat(u,"googNacksReceived",Ae.nackCount),l._setStat(u,"googPlisReceived",Ae.pliCount)),Le)ce.get("candidatePairs").map(function(Ze){Le==Ze.transportId&&l._setStat(C,"googAvailableSendBandwidth",Ze.availableOutgoingBitrate)});else{var Ve=ce.get("candidatePairs")[0];Ve&&l._setStat(C,"googAvailableSendBandwidth",Ve.availableOutgoingBitrate)}}l.lastStats=ce;var Ke=[O()({},u),O()({},_),O()({},g),O()({},q),O()({},C)];Ke.push({id:"time",startTime:l.connectedTime,timestamp:new Date}),Q(Ke)})},l._processGetStatsBeforeChrome76=function(Q){l.peerConnection.getStats(function(W){var F=[],Y=[],ve=null;Object.keys(W).forEach(function(de){var ce=W[de];ce&&(Y.push(ce),ve=ce.timestamp,"VideoBwe"===ce.type?C=ce:ce.id.indexOf("_send")>-1&&"video"===ce.mediaType?u=ce:ce.id.indexOf("_send")>-1&&"audio"===ce.mediaType?_=ce:ce.id.indexOf("_recv")>-1&&"video"===ce.mediaType?g=ce:ce.id.indexOf("_recv")>-1&&"audio"===ce.mediaType&&(q=ce))}),(F=[O()({},u),O()({},_),O()({},g),O()({},q),O()({},C)]).push({id:"time",startTime:l.connectedTime,timestamp:ve||new Date}),Q(F,Y)})},l._getStats=function(Q){Object(v.getParameter)("CHROME_NEW_STATS")&&D.isChromeKernel()&&+D.getBrowserVersion()>=76?l._processGetStatsAfterChrome76(Q):l._processGetStatsBeforeChrome76(Q)},l.addTrack=function(Q,W){l.peerConnection.addTrack(Q,W)},l.removeTrack=function(Q,W){l.peerConnection.removeTrack(l.peerConnection.getSenders().find(function(F){return F.track==Q}))},l.addStream=function(Q){l.peerConnection.addStream(Q),l.markActionNeeded()},l.removeStream=function(){l.markActionNeeded()},l.close=function(){l.state="closed",l.peerConnection.close()},l.markActionNeeded=function(){l.actionNeeded=!0,l.doLater(function(){l.onstablestate()})},l.doLater=function(Q){window.setTimeout(Q,1)},l.onstablestate=function(){if(l.actionNeeded){if("new"===l.state||"established"===l.state)l.peerConnection.createOffer(l.mediaConstraints).then(function(W){return W?W.sdp!==l.prevOffer?(b.isSubscriber&&(W.sdp=W.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),l.peerConnection.setLocalDescription(W),l.state="preparing-offer",void l.markActionNeeded()):void h.default.debug("["+l.clientId+"]Not sending a new offer"):(h.default.debug("["+l.clientId+"]sessionDescription is null"),void l.onsignalingmessage(null))}).catch(function(W){h.default.debug("["+l.clientId+"]peer connection create offer failed ",W)});else if("preparing-offer"===l.state){if(l.moreIceComing)return;l.prevOffer=l.peerConnection.localDescription.sdp,l.offerCandidates=l.prevOffer.match(/a=candidate.+\r\n/g)||[],l.offerCandidates.length||(b.isCloudProxy3&&b.onNoIceCandidate&&b.onNoIceCandidate(),h.default.warning("[".concat(l.clientId,"]No Ice Candidate generated")),Object(v.getParameter)("SHIM_CANDIDATE")?(h.default.debug("Shimming fake candidate"),l.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):h.default.error("[".concat(l.clientId,"]None Ice Candidate not allowed"))),l.prevOffer=l.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),l.sendMessage("OFFER",l.prevOffer),l.state="offer-sent"}else if("offer-received"===l.state)l.peerConnection.createAnswer(function(W){if(l.peerConnection.setLocalDescription(W),l.state="offer-received-preparing-answer",l.iceStarted)l.markActionNeeded();else{var F=new Date;h.default.debug("["+l.clientId+"]"+F.getTime()+": Starting ICE in responder"),l.iceStarted=!0}},function(W){h.default.debug("["+l.clientId+"]peer connection create answer failed ",W)},l.mediaConstraints);else if("offer-received-preparing-answer"===l.state){if(l.moreIceComing)return;l.sendMessage("ANSWER",l.peerConnection.localDescription.sdp),l.state="established"}else h.default.debug("[".concat(l.clientId,"] Dazed and confused in state ' + that.state + ', stopping here'"));l.actionNeeded=!1}},l.sendMessage=function(Q,W){var F={};F.messageType=Q,F.sdp=W,"OFFER"===Q?(F.offererSessionId=l.sessionId,F.answererSessionId=l.otherSessionId,F.seq=l.sequenceNumber+=1,F.tiebreaker=Math.floor(429496723*Math.random()+1)):(F.offererSessionId=l.incomingMessage.offererSessionId,F.answererSessionId=l.sessionId,F.seq=l.incomingMessage.seq),l.onsignalingmessage(JSON.stringify(F))},l._getSender=function(Q){if(l.peerConnection&&l.peerConnection.getSenders){var W=l.peerConnection.getSenders().find(function(F){return F.track.kind==Q});if(W)return W}return null},l.hasSender=function(Q){return!!l._getSender(Q)},l.replaceTrack=function(Q,W,F){var Y=l._getSender(Q.kind);if(!Y)return F("NO_SENDER_FOUND");try{Y.replaceTrack(Q)}catch(ve){return F&&F(ve)}setTimeout(function(){return W&&W()},50)},l.error=function(Q){throw"Error in RoapOnJsep: "+Q},l.sessionId=l.roapSessionId+=1,l.sequenceNumber=0,l.actionNeeded=!1,l.iceStarted=!1,l.moreIceComing=!0,l.iceCandidateCount=0,l.onsignalingmessage=b.callback,l.peerConnection.ontrack=function(Q){l.onaddstream&&(l.onaddstream(Q,"ontrack"),l.peerConnection.onaddstream=null)},l.peerConnection.onaddstream=function(Q){l.onaddstream&&(l.onaddstream(Q,"onaddstream"),l.peerConnection.ontrack=null)},l.peerConnection.onremovestream=function(Q){l.onremovestream&&l.onremovestream(Q)},l.peerConnection.oniceconnectionstatechange=function(Q){console.log(Q),console.log(l.peerConnection.iceConnectionState),"connected"===Q.currentTarget.iceConnectionState&&(l.connectedTime=new Date),l.oniceconnectionstatechange&&l.oniceconnectionstatechange(Q.currentTarget.iceConnectionState)},l.renegotiate=function(){void 0!==l.prevOffer&&l.peerConnection.createOffer().then(function(Q){return Q.sdp=Q.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),Q.sdp=L(Q.sdp),Q.sdp=K(Q.sdp),l.peerConnection.setLocalDescription(Q)}).then(function(){l.onnegotiationneeded&&l.onnegotiationneeded(l.peerConnection.localDescription.sdp)}).catch(function(Q){console.log("createOffer error: ",Q)})},l.peerConnection.onnegotiationneeded=l.renegotiate,l.onaddstream=null,l.onremovestream=null,l.onnegotiationneeded=null,l.state="new",l.markActionNeeded(),l}(b)).browser="chrome-stable",l},$=function(b,l,H){var _={};_.config=b,_.streamId=b.streamId,delete b.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var u=0,q=1,g=!1,C=null,L=function(Q){if(u++,C)if(C===Q)h.default.debug("Using Video Source/ Audio Source");else{var W=C.getVideoTracks()[0],F=C.getAudioTracks()[0],Y=Q.getVideoTracks()[0],ve=Q.getAudioTracks()[0];Y&&(W&&C.removeTrack(W),C.addTrack(Y)),ve&&(F&&C.removeTrack(F),C.addTrack(ve))}else C=Q;u!==q||g||(g=!0,setTimeout(function(){l(C)},0))},K=function(Q){h.default.error("Failed to GetUserMedia",Q.name,Q.code,Q.message,Q),u++,g||(g=!0,setTimeout(function(){H&&H(Q)},0))},ie=function(){var Q={video:b.video,audio:b.audio};if(h.default.debug("GetUserMedia",JSON.stringify(Q)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(Q).then(L).catch(K);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(b,L,K);else{var W={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};h.default.error("["+_.streamId+"]"+W.message),H&&H(W)}};if((b.videoSource||b.audioSource)&&(C=new MediaStream,b.videoSource&&C.addTrack(b.videoSource),b.audioSource&&C.addTrack(b.audioSource)),b.video||b.audio||b.screen||b.screenAudio){if(!b.screen&&b.screenAudio)return H&&H({code:"Set screen to true before sharing the audio"});if(b.screen){if(se.a.isElectron())return b.screen.sourceId?se.a.getScreenStream(b.screen.sourceId,b.screen,function(Q,W){Q?K(Q):(b.audio&&(q++,ie()),L(W))}):se.a.shareScreen(b.screen,function(Q,W){Q?K(Q):(b.audio&&(q++,ie()),L(W))});if(D.isFireFox()){if(h.default.debug("["+_.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(b.screen.mediaSource))return H&&H({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:b.screen},function(Q){b.audio&&(q++,ie()),L(Q)},K)}else if(D.isChromeKernel()&&b.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void H({code:"This browser does not support screen sharing"});h.default.debug("["+_.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(b.screen.extensionId,{getStream:!0},function(Q){void 0===Q?(h.default.error("["+_.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),K({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(b.screen.mandatory.chromeMediaSourceId=Q.streamId,navigator.getMedia({video:b.screen},function(W){b.audio&&(q++,ie()),L(W)},K))})}catch(Q){return h.default.debug("["+_.streamId+"]AgoraRTC screensharing plugin is not accessible"),void H({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var he={};return he.video="number"==typeof b.screen.width&&"number"==typeof b.screen.height?{width:{ideal:b.screen.width},height:{ideal:b.screen.height}}:{width:b.screen.width,height:b.screen.height},he.video.frameRate=b.screen.frameRate&&b.screen.frameRate.min?{ideal:b.screen.frameRate.max,max:b.screen.frameRate.max}:b.screen.frameRate,b.screenAudio&&(he.audio=b.screenAudio),h.default.debug("use getDisplayMedia, constraints:",he),window.navigator.mediaDevices.getDisplayMedia(he).then(function(Q){!b.screenAudio&&b.audio&&(q++,ie()),L(Q)}).catch(K)}h.default.error("["+_.streamId+"]This browser does not support screenSharing"),H({code:"This browser does not support screen sharing"})}}else ie()}else L(C)}},function(le,re,j){"use strict";var D=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(re,"__esModule",{value:!0});var T,R=D(j(0)),O=function(){function T(N,y,I){void 0===y&&(y=""),this.name="AgoraRTCException",this.code=N,this.message="AgoraRTCError "+this.code+": "+y,this.data=I}return T.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},T.prototype.throw=function(){throw R.default.error(this.toString()),this},T}();re.AgoraRTCError=O,(T=re.AgoraRTCErrorCode||(re.AgoraRTCErrorCode={})).UNEXPECTED_ERROR="UNEXPECTED_ERROR",T.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",T.TIMEOUT="TIMEOUT",T.INVALID_PARAMS="INVALID_PARAMS",T.NOT_SUPPORT="NOT_SUPPORT",T.INVALID_OPERATION="INVALID_OPERATION",T.OPERATION_ABORT="OPERATION_ABORT",T.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",T.NETWORK_ERROR="NETWORK_ERROR",T.NETWORK_TIMEOUT="NETWORK_TIMEOUT",T.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",T.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",T.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",T.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",T.ELECTRON_IS_NULL="ELECTRON_IS_NULL",T.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",T.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",T.STREAM_IS_CLOSED="STREAM_IS_CLOSED",T.ABORT_OTHER_INIT="ABORT_OTHER_INIT",T.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",T.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",T.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",T.PERMISSION_DENIED="PERMISSION_DENIED",T.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",T.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",T.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",T.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",T.TRACK_IS_DISABLED="TRACK_IS_DISABLED",T.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",T.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",T.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",T.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",T.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",T.UID_CONFLICT="UID_CONFLICT",T.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",T.INVALID_TRACK="INVALID_TRACK",T.SENDER_NOT_FOUND="SENDER_NOT_FOUND",T.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",T.SET_ANSWER_FAILED="SET_ANSWER_FAILED",T.ICE_FAILED="ICE_FAILED",T.PC_CLOSED="PC_CLOSED",T.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",T.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",T.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",T.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",T.INVALID_REMOTE_USER="INVALID_REMOTE_USER",T.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",T.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",T.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",T.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",T.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",T.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",T.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",T.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",T.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",T.WS_ABORT="WS_ABORT",T.WS_DISCONNECT="WS_DISCONNECT",T.WS_ERR="WS_ERR",T.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",T.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",T.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",T.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",T.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",T.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",T.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",T.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",T.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",T.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",T.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",T.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",T.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",T.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",T.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",T.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",T.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",T.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",T.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"},function(le,re,j){"use strict";j.d(re,"a",function(){return y});var D=j(0),R=window.AudioContext||window.webkitAudioContext,O=j(2),T=O.getParameter,N=O.setParameter,y=function(){return T("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),N("AUDIO_CONTEXT",function(){if(R){var I=new R;return window.ctx=I,new Promise(function(h){document.body?h():window.addEventListener("load",h)}).then(function(){var h=function m(){"suspended"==I.state?(D.default.debug("AudioContext is suspended, auto resume"),I.resume().then(function(){D.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",m,!0),document.body.removeEventListener("mousedown",m,!0)})):(D.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",m,!0),document.body.removeEventListener("mousedown",m,!0))};D.default.debug(">>> add event listener >>>>"),document.body.addEventListener("touchend",h,!0),document.body.addEventListener("mousedown",h,!0)}),I}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),T("AUDIO_CONTEXT")};y()},function(le,re,j){"use strict";var D=j(1),R=null,O=function(){try{R=window.require("electron")}catch(y){}return R},T=function(y){var I=D.report.reportApiInvoke(null,{callback:y,name:"getScreenSources",options:arguments,tag:"tracer"}),h=O();if(!h)return I&&I("electron is null");try{var m=h.desktopCapturer.getSources({types:["window","screen"]})}catch(v){console.log(v)}m instanceof Promise?(console.log("electron.desktopCapturer.getSources return type is Promise"),m.then(function(v){return I&&I(null,v)}).catch(function(v){return I&&I(v)})):m=h.desktopCapturer.getSources({types:["window","screen"]},function(v,k){console.log("electron.desktopCapturer.getSources return type is callback"),I&&I(null,k)})},N=function(y,I,h){I={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:y,maxHeight:I.height,maxWidth:I.width,maxFrameRate:I.frameRate&&I.frameRate.max,minFrameRate:I.frameRate&&I.frameRate.min}}},navigator.webkitGetUserMedia(I,function(v){h&&h(null,v)},function(v){h&&h(v)})};re.a={isElectron:function(){return!!O()},getElectronInstance:O,getScreenSources:T,getScreenStream:N,shareScreen:function(y,I){T(function(h,m){if(h)return I&&I(h);!function(v,k){var B=document.createElement("div");B.innerText="share screen",B.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var w=document.createElement("div");w.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var E=document.createElement("div");E.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",E.setAttribute("style","height: 12%;");var U=document.createElement("div");U.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var P=document.createElement("div");P.setAttribute("style","text-align: right; padding: 16px 0;");var G=document.createElement("button");G.innerHTML="cancel",G.setAttribute("style","width: 85px;"),G.onclick=function(){document.body.removeChild(V),k&&k("NotAllowedError")},P.appendChild(G),w.appendChild(E),w.appendChild(U),w.appendChild(P);var V=document.createElement("div");V.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),V.appendChild(B),V.appendChild(w),document.body.appendChild(V),v.map(function(ee){if(ee.id){var se=document.createElement("div");se.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var te=ee.thumbnail;te.getSize().width>1920&&(te=te.resize({width:1920})),se.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+te.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+ee.name.replace(/[\u00A0-\u9999<>\&]/g,function(oe){return"&#"+oe.charCodeAt(0)+";"})+"</span>",se.onclick=function(){document.body.removeChild(V),k&&k(null,ee.id)},U.appendChild(se)}})}(m,function(v,k){if(v)return I&&I(v);N(k,y,I)})})}}},function(le,re,j){"use strict";Object.defineProperty(re,"__esModule",{value:!0});var R,D=j(3);(R=re.LiveStreamingServiceMode||(re.LiveStreamingServiceMode={})).TRANSCODE="mix_streaming",R.RAW="raw_streaming",R.INJECT="inject_streaming",re.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},re.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},re.isLiveStreamingTranscodingConfig=function(R){return D.isEmpty(R.width)||D.checkValidNumber(R.width,"config.width",0),D.isEmpty(R.height)||D.checkValidNumber(R.height,"config.height",0),D.isEmpty(R.videoBitrate)||D.checkValidNumber(R.videoBitrate,"config.videoBitrate",1,1e6),D.isEmpty(R.videoFramerate)||D.checkValidNumber(R.videoFramerate,"config.videoFramerate"),D.isEmpty(R.lowLatency)||D.checkValidBoolean(R.lowLatency,"config.lowLatency"),D.isEmpty(R.audioSampleRate)||D.checkValidEnum(R.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),D.isEmpty(R.audioBitrate)||D.checkValidNumber(R.audioBitrate,"config.audioBitrate",1,128),D.isEmpty(R.audioChannels)||D.checkValidEnum(R.audioChannels,"config.audioChannels",[1,2,3,4,5]),D.isEmpty(R.videoGop)||D.checkValidNumber(R.videoGop,"config.videoGop"),D.isEmpty(R.videoCodecProfile)||D.checkValidEnum(R.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),D.isEmpty(R.userCount)||D.checkValidNumber(R.userCount,"config.userCount",0,17),D.isEmpty(R.backgroundColor)||D.checkValidNumber(R.backgroundColor,"config.backgroundColor",0,16777215),R.transcodingUsers&&!D.isEmpty(R.transcodingUsers)&&(D.checkValidArray(R.transcodingUsers,"config.transcodingUsers"),R.transcodingUsers.forEach(function(O,T){D.checkValidUID(O.uid),D.isEmpty(O.x)||D.checkValidNumber(O.x,"transcodingUser["+T+"].x",0,1e4),D.isEmpty(O.y)||D.checkValidNumber(O.y,"transcodingUser["+T+"].y",0,1e4),D.isEmpty(O.width)||D.checkValidNumber(O.width,"transcodingUser["+T+"].width",0,1e4),D.isEmpty(O.height)||D.checkValidNumber(O.height,"transcodingUser["+T+"].height",0,1e4),D.isEmpty(O.zOrder)||D.checkValidNumber(O.zOrder-1,"transcodingUser["+T+"].zOrder",0,100),D.isEmpty(O.alpha)||D.checkValidFloatNumber(O.alpha,"transcodingUser["+T+"].alpha",0,1)})),R.images&&!D.isEmpty(R.images)&&(D.checkValidArray(R.images,"config.images"),R.images.forEach(function(O,T){D.checkValidString(O.url,"images["+T+"].url",1,1e3,!1),D.isEmpty(O.x)||D.checkValidNumber(O.x,"images["+T+"].x",0,1e4),D.isEmpty(O.y)||D.checkValidNumber(O.y,"images["+T+"].y",0,1e4),D.isEmpty(O.width)||D.checkValidNumber(O.width,"images["+T+"].width",0,1e4),D.isEmpty(O.height)||D.checkValidNumber(O.height,"images["+T+"].height",0,1e4),D.isEmpty(O.zOrder)||D.checkValidNumber(O.zOrder,"images["+T+"].zOrder",0,255),D.isEmpty(O.alpha)||D.checkValidFloatNumber(O.alpha,"images["+T+"].alpha",0,1)})),!0},re.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},re.isInjectStreamConfig=function(R){return D.isEmpty(R.audioVolume)||D.checkValidNumber(R.audioVolume,"config.audioVolume",0,1e3),D.isEmpty(R.audioBitrate)||D.checkValidNumber(R.audioBitrate,"config.audioBitrate",1,1e4),D.isEmpty(R.audioChannels)||D.checkValidEnum(R.audioChannels,"config.audioChannels",[1,2]),D.isEmpty(R.audioSampleRate)||D.checkValidEnum(R.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),D.isEmpty(R.width)||D.checkValidNumber(R.width,"config.width",0,1e4),D.isEmpty(R.height)||D.checkValidNumber(R.height,"config.height",0,1e4),D.isEmpty(R.videoBitrate)||D.checkValidNumber(R.videoBitrate,"config.videoBitrate",1,1e4),D.isEmpty(R.videoFramerate)||D.checkValidNumber(R.videoFramerate,"config.videoFramerate",1,1e4),D.isEmpty(R.videoGop)||D.checkValidNumber(R.videoGop,"config.videoGop",1,1e4),!0},re.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(R){R.WARNING="@live_uap-warning",R.ERROR="@line_uap-error",R.PUBLISH_STREAM_STATUS="@live_uap-publish-status",R.INJECT_STREAM_STATUS="@live_uap-inject-status",R.WORKER_STATUS="@live_uap-worker-status",R.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(re.LiveStreamingUapSignalEvents||(re.LiveStreamingUapSignalEvents={})),function(R){R.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(re.LiveStreamingInternalEvents||(re.LiveStreamingInternalEvents={})),function(R){R[R.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",R[R.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",R[R.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",R[R.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",R[R.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",R[R.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",R[R.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",R[R.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",R[R.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",R[R.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",R[R.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",R[R.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",R[R.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",R[R.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",R[R.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",R[R.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",R[R.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",R[R.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE=505]="LIVE_STREAM_RESPONSE_INGNORE_MESSAGE",R[R.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",R[R.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",R[R.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",R[R.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(re.LIVE_STREAM_ERROR_CODE||(re.LIVE_STREAM_ERROR_CODE={})),function(R){R.CONNECTED="websocket:connected",R.RECONNECTING="websocket:reconnecting",R.WILL_RECONNECT="websocket:will_reconnect",R.CLOSED="websocket:closed",R.FAILED="websocket:failed",R.ON_MESSAGE="websocket:on_message",R.REQUEST_NEW_URLS="websocket:request_new_urls"}(re.WebSocketManagerEvents||(re.WebSocketManagerEvents={}))},function(le,re,j){var D=j(54),R=j(55);le.exports=function(O,T,N){var y=T&&N||0;"string"==typeof O&&(T="binary"===O?new Array(16):null,O=null);var I=(O=O||{}).random||(O.rng||D)();if(I[6]=15&I[6]|64,I[8]=63&I[8]|128,T)for(var h=0;h<16;++h)T[y+h]=I[h];return T||R(I)}},function(le,re,j){"use strict";var D=this&&this.__assign||function(){return(D=Object.assign||function(P){for(var G,V=1,ee=arguments.length;V<ee;V++)for(var se in G=arguments[V])Object.prototype.hasOwnProperty.call(G,se)&&(P[se]=G[se]);return P}).apply(this,arguments)},R=this&&this.__awaiter||function(P,G,V,ee){return new(V||(V=Promise))(function(se,te){function oe(l){try{b(ee.next(l))}catch(H){te(H)}}function $(l){try{b(ee.throw(l))}catch(H){te(H)}}function b(l){var H;l.done?se(l.value):(H=l.value,H instanceof V?H:new V(function(_){_(H)})).then(oe,$)}b((ee=ee.apply(P,G||[])).next())})},O=this&&this.__generator||function(P,G){var V,ee,se,te,oe={label:0,sent:function(){if(1&se[0])throw se[1];return se[1]},trys:[],ops:[]};return te={next:$(0),throw:$(1),return:$(2)},"function"==typeof Symbol&&(te[Symbol.iterator]=function(){return this}),te;function $(b){return function(l){return function(H){if(V)throw new TypeError("Generator is already executing.");for(;oe;)try{if(V=1,ee&&(se=2&H[0]?ee.return:H[0]?ee.throw||((se=ee.return)&&se.call(ee),0):ee.next)&&!(se=se.call(ee,H[1])).done)return se;switch(ee=0,se&&(H=[2&H[0],se.value]),H[0]){case 0:case 1:se=H;break;case 4:return oe.label++,{value:H[1],done:!1};case 5:oe.label++,ee=H[1],H=[0];continue;case 7:H=oe.ops.pop(),oe.trys.pop();continue;default:if(!((se=(se=oe.trys).length>0&&se[se.length-1])||6!==H[0]&&2!==H[0])){oe=0;continue}if(3===H[0]&&(!se||H[1]>se[0]&&H[1]<se[3])){oe.label=H[1];break}if(6===H[0]&&oe.label<se[1]){oe.label=se[1],se=H;break}if(se&&oe.label<se[2]){oe.label=se[2],oe.ops.push(H);break}se[2]&&oe.ops.pop(),oe.trys.pop();continue}H=G.call(P,oe)}catch(_){H=[6,_],ee=0}finally{V=se=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([b,l])}}},T=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(re,"__esModule",{value:!0});var N=j(2),y=T(j(34)),I=j(24),h=T(j(0)),m=j(1);function v(P){return new Promise(function(G){window.setTimeout(G,P)})}function k(P,G){return new Promise(function(V,ee){G.timeout=G.timeout||N.getParameter("HTTP_CONNECT_TIMEOUT"),G.responseType=G.responseType||"json",G.data&&(G.data=JSON.stringify(G.data)),G.headers=G.headers||{},G.headers["Content-Type"]="application/json",G.method="POST",G.url=P,y.default.request(G).then(function(se){V(se.data)}).catch(function(se){y.default.isCancel(se)?ee(new I.AgoraRTCError(I.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):ee("ECONNABORTED"===se.code?new I.AgoraRTCError(I.AgoraRTCErrorCode.NETWORK_TIMEOUT,se.message):se.response?new I.AgoraRTCError(I.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,se.response.status):new I.AgoraRTCError(I.AgoraRTCErrorCode.NETWORK_ERROR,se.message))})})}function B(P,G,V,ee){var se=this,te=Object.assign({},re.DEFAULT_RETRY_CONFIG,ee),oe=te.timeout,$=function(){return R(se,void 0,void 0,function(){return O(this,function(H){switch(H.label){case 0:return[4,v(oe)];case 1:return H.sent(),oe*=te.timeoutFactor,oe=Math.min(te.maxRetryTimeout,oe),[2]}})})},b=!1,l=new Promise(function(H,_){return R(se,void 0,void 0,function(){var u,q,g;return O(this,function(C){switch(C.label){case 0:G=G||function(){return!1},V=V||function(){return!0},u=0,C.label=1;case 1:if(!(u<te.maxRetryCount))return[3,12];if(b)return[2,_(new I.AgoraRTCError(I.AgoraRTCErrorCode.OPERATION_ABORT))];C.label=2;case 2:return C.trys.push([2,7,,11]),[4,P()];case 3:return q=C.sent(),G(q,u)?u+1===te.maxRetryCount?[2,H(q)]:[4,$()]:[3,5];case 4:return C.sent(),[3,6];case 5:return[2,H(q)];case 6:return[3,11];case 7:return g=C.sent(),V(g,u)?u+1===te.maxRetryCount?[2,_(g)]:[4,$()]:[3,9];case 8:return C.sent(),[3,10];case 9:return[2,_(g)];case 10:return[3,11];case 11:return u+=1,[3,1];case 12:return[2]}})})});return l.cancel=function(){return b=!0},l}function w(P,G){return{addressList:P.servers.map(function(V,ee){return"wss://"+V.address.replace(/\./g,"-")+".edge.agora.io:"+V.wss+"?serviceName="+encodeURIComponent(G)}),workerToken:P.workerToken,vid:P.vid}}re.wait=v,re.post=k,re.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},re.getRetryWaitTime=function(P,G){var V=G.timeout*Math.pow(G.timeoutFactor,P);return Math.min(G.maxRetryTimeout,V)},re.retryable=B,re.liveStreamingServerResponseToResult=w;var E=1;function U(P,G,V,ee,se){var te=this;void 0===se&&(se=re.DEFAULT_RETRY_CONFIG),E+=1;var oe,$,b={sid:V.sid,command:"convergeAllocateEdge",uid:"666",appId:V.appId,ts:Math.floor(Date.now()/1e3),seq:E,requestId:E,version:N.VERSION,cname:V.cname},l={service_name:G,json_body:JSON.stringify(b)},H=P[0];return B(function(){return R(te,void 0,void 0,function(){var _,u,q,g,C;return O(this,function(L){switch(L.label){case 0:return oe=Date.now(),[4,k(H,{data:l,cancelToken:ee,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(_=L.sent(),$=Date.now()-oe,0!==_.code)throw q=new I.AgoraRTCError(I.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+_.code,{retry:!0}),h.default.error(q.toString()),q;if(200!==(u=JSON.parse(_.json_body)).code)throw q=new I.AgoraRTCError(I.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+u.code+", reason: "+u.reason),h.default.error(q.toString()),q;if(!u.servers||0===u.servers.length)throw q=new I.AgoraRTCError(I.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),h.default.error(q.toString()),q;if(g=w(u,G),N.getParameter("LIVE_STREAMING_ADDRESS"))try{C=JSON.parse(N.getParameter("LIVE_STREAMING_ADDRESS")),g.addressList=C}catch(K){g.addressList=[N.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,D(D({},g),{responseTime:$})]}})})},function(_,u){return m.report.requestApWorkerEvent(V.sid,{success:!0,sc:200,serviceName:G,responseDetail:JSON.stringify(_.addressList),firstSuccess:0===u,responseTime:$,serverIp:P[u%P.length]}),!1},function(_,u){return m.report.requestApWorkerEvent(V.sid,{success:!1,sc:_.data&&_.data.code||200,serviceName:G,responseTime:$,serverIp:P[u%P.length]}),!!(_.code!==I.AgoraRTCErrorCode.OPERATION_ABORT&&_.code!==I.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||_.data&&_.data.retry)&&(H=P[(u+1)%P.length],!0)},se)}re.requestLiveStreamingWorkerManager=U,re.getLiveStreamingWorkerMangerResult=function(P,G,V){return R(this,void 0,void 0,function(){var ee,se;return O(this,function(te){switch(te.label){case 0:ee=N.getParameter("UAP_AP").map(function(oe){return G.proxyServer?"https://"+G.proxyServer+"/ap/?url="+oe+"/api/v1?action=uap":"https://"+oe+"/api/v1?action=uap"}),te.label=1;case 1:return te.trys.push([1,3,,4]),[4,U(ee,P,G,V)];case 2:return[2,te.sent()];case 3:throw se=te.sent(),m.report.requestApWorkerEvent(G.sid,{success:!1,sc:se.data&&se.data.code||200,serviceName:P,responseTime:se.data&&se.data.responseTime}),se;case 4:return[2]}})})}},function(le,re,j){var D=j(68),R=j(69),O=j(31),T=j(70);le.exports=function(N){return D(N)||R(N)||O(N)||T()}},function(le,re,j){var D=j(32);le.exports=function(R,O){if(R){if("string"==typeof R)return D(R,O);var T=Object.prototype.toString.call(R).slice(8,-1);return"Object"===T&&R.constructor&&(T=R.constructor.name),"Map"===T||"Set"===T?Array.from(T):"Arguments"===T||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T)?D(R,O):void 0}}},function(le,re){le.exports=function(j,D){(null==D||D>j.length)&&(D=j.length);for(var R=0,O=new Array(D);R<D;R++)O[R]=j[R];return O}},function(le,re,j){"use strict";var D=this&&this.__spreadArrays||function(){for(var N=0,y=0,I=arguments.length;y<I;y++)N+=arguments[y].length;var h=Array(N),m=0;for(y=0;y<I;y++)for(var v=arguments[y],k=0,B=v.length;k<B;k++,m++)h[m]=v[k];return h};Object.defineProperty(re,"__esModule",{value:!0});var R=j(24),O=function(){function N(){this._events={},this.addListener=this.on}return N.prototype.getListeners=function(y){return this._events[y]?this._events[y].map(function(I){return I.listener}):[]},N.prototype.on=function(y,I){this._events[y]||(this._events[y]=[]);var h=this._events[y];-1===this._indexOfListener(h,I)&&h.push({listener:I,once:!1})},N.prototype.once=function(y,I){this._events[y]||(this._events[y]=[]);var h=this._events[y];-1===this._indexOfListener(h,I)&&h.push({listener:I,once:!0})},N.prototype.off=function(y,I){if(this._events[y]){var h=this._events[y],m=this._indexOfListener(h,I);-1!==m&&h.splice(m,1),0===this._events[y].length&&delete this._events[y]}},N.prototype.removeAllListeners=function(y){y?delete this._events[y]:this._events={}},N.prototype.emit=function(y){for(var I=[],h=1;h<arguments.length;h++)I[h-1]=arguments[h];this._events[y]||(this._events[y]=[]);for(var m=this._events[y].map(function(B){return B}),v=0;v<m.length;v+=1){var k=m[v];k.once&&this.off(y,k.listener),k.listener.apply(this,I||[])}},N.prototype._indexOfListener=function(y,I){for(var h=y.length;h--;)if(y[h].listener===I)return h;return-1},N}();function T(N,y){for(var I=[],h=2;h<arguments.length;h++)I[h-2]=arguments[h];var m=null,v=null;if(N.emit.apply(N,D([y],I,[function(k){m=k},function(k){v=k}])),null!==v)throw v;if(null===m)throw new R.AgoraRTCError(R.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return m}re.EventEmitter=O,re.emitAsPromise=function(N,y){for(var I=[],h=2;h<arguments.length;h++)I[h-2]=arguments[h];return 0===N.getListeners(y).length?Promise.reject(new R.AgoraRTCError(R.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise(function(m,v){N.emit.apply(N,D([y],I,[m,v]))})},re.emitAsInvokerNoResponse=function(N,y){for(var I=[],h=2;h<arguments.length;h++)I[h-2]=arguments[h];return 0===N.getListeners(y).length?null:T.apply(void 0,D([N,y],I))},re.emitAsInvoker=T},function(le,re,j){le.exports=j(74)},function(le,re,j){"use strict";le.exports=function(D,R){return function(){for(var O=new Array(arguments.length),T=0;T<O.length;T++)O[T]=arguments[T];return D.apply(R,O)}}},function(le,re,j){"use strict";var D=j(18);function R(O){return encodeURIComponent(O).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}le.exports=function(O,T,N){if(!T)return O;var y;if(N)y=N(T);else if(D.isURLSearchParams(T))y=T.toString();else{var I=[];D.forEach(T,function(m,v){null!=m&&(D.isArray(m)?v+="[]":m=[m],D.forEach(m,function(k){D.isDate(k)?k=k.toISOString():D.isObject(k)&&(k=JSON.stringify(k)),I.push(R(v)+"="+R(k))}))}),y=I.join("&")}if(y){var h=O.indexOf("#");-1!==h&&(O=O.slice(0,h)),O+=(-1===O.indexOf("?")?"?":"&")+y}return O}},function(le,re,j){"use strict";le.exports=function(D){return!(!D||!D.__CANCEL__)}},function(le,re,j){"use strict";(function(D){var R=j(18),O=j(80),T={"Content-Type":"application/x-www-form-urlencoded"};function N(h,m){!R.isUndefined(h)&&R.isUndefined(h["Content-Type"])&&(h["Content-Type"]=m)}var y,I={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==D&&"[object process]"===Object.prototype.toString.call(D))&&(y=j(39)),y),transformRequest:[function(h,m){return O(m,"Accept"),O(m,"Content-Type"),R.isFormData(h)||R.isArrayBuffer(h)||R.isBuffer(h)||R.isStream(h)||R.isFile(h)||R.isBlob(h)?h:R.isArrayBufferView(h)?h.buffer:R.isURLSearchParams(h)?(N(m,"application/x-www-form-urlencoded;charset=utf-8"),h.toString()):R.isObject(h)?(N(m,"application/json;charset=utf-8"),JSON.stringify(h)):h}],transformResponse:[function(h){if("string"==typeof h)try{h=JSON.parse(h)}catch(m){}return h}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(h){return h>=200&&h<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};R.forEach(["delete","get","head"],function(h){I.headers[h]={}}),R.forEach(["post","put","patch"],function(h){I.headers[h]=R.merge(T)}),le.exports=I}).call(this,j(79))},function(le,re,j){"use strict";var D=j(18),R=j(81),O=j(36),T=j(83),N=j(86),y=j(87),I=j(40);le.exports=function(h){return new Promise(function(m,v){var k=h.data,B=h.headers;D.isFormData(k)&&delete B["Content-Type"];var w=new XMLHttpRequest;h.auth&&(B.Authorization="Basic "+btoa((h.auth.username||"")+":"+(h.auth.password||"")));var P=T(h.baseURL,h.url);if(w.open(h.method.toUpperCase(),O(P,h.params,h.paramsSerializer),!0),w.timeout=h.timeout,w.onreadystatechange=function(){if(w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))){var ee="getAllResponseHeaders"in w?N(w.getAllResponseHeaders()):null;R(m,v,{data:h.responseType&&"text"!==h.responseType?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:ee,config:h,request:w}),w=null}},w.onabort=function(){w&&(v(I("Request aborted",h,"ECONNABORTED",w)),w=null)},w.onerror=function(){v(I("Network Error",h,null,w)),w=null},w.ontimeout=function(){var ee="timeout of "+h.timeout+"ms exceeded";h.timeoutErrorMessage&&(ee=h.timeoutErrorMessage),v(I(ee,h,"ECONNABORTED",w)),w=null},D.isStandardBrowserEnv()){var G=j(88),V=(h.withCredentials||y(P))&&h.xsrfCookieName?G.read(h.xsrfCookieName):void 0;V&&(B[h.xsrfHeaderName]=V)}if("setRequestHeader"in w&&D.forEach(B,function(ee,se){void 0===k&&"content-type"===se.toLowerCase()?delete B[se]:w.setRequestHeader(se,ee)}),D.isUndefined(h.withCredentials)||(w.withCredentials=!!h.withCredentials),h.responseType)try{w.responseType=h.responseType}catch(ee){if("json"!==h.responseType)throw ee}"function"==typeof h.onDownloadProgress&&w.addEventListener("progress",h.onDownloadProgress),"function"==typeof h.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",h.onUploadProgress),h.cancelToken&&h.cancelToken.promise.then(function(ee){w&&(w.abort(),v(ee),w=null)}),void 0===k&&(k=null),w.send(k)})}},function(le,re,j){"use strict";var D=j(82);le.exports=function(R,O,T,N,y){var I=new Error(R);return D(I,O,T,N,y)}},function(le,re,j){"use strict";var D=j(18);le.exports=function(R,O){O=O||{};var T={},N=["url","method","params","data"],y=["headers","auth","proxy"],I=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];D.forEach(N,function(v){void 0!==O[v]&&(T[v]=O[v])}),D.forEach(y,function(v){D.isObject(O[v])?T[v]=D.deepMerge(R[v],O[v]):void 0!==O[v]?T[v]=O[v]:D.isObject(R[v])?T[v]=D.deepMerge(R[v]):void 0!==R[v]&&(T[v]=R[v])}),D.forEach(I,function(v){void 0!==O[v]?T[v]=O[v]:void 0!==R[v]&&(T[v]=R[v])});var h=N.concat(y).concat(I),m=Object.keys(O).filter(function(v){return-1===h.indexOf(v)});return D.forEach(m,function(v){void 0!==O[v]?T[v]=O[v]:void 0!==R[v]&&(T[v]=R[v])}),T}},function(le,re,j){"use strict";function D(R){this.message=R}D.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},D.prototype.__CANCEL__=!0,le.exports=D},function(le,re){le.exports=function(j,D,R){return D in j?Object.defineProperty(j,D,{value:R,enumerable:!0,configurable:!0,writable:!0}):j[D]=R,j}},function(le,re,j){"use strict";var D=this&&this.__awaiter||function(w,E,U,P){return new(U||(U=Promise))(function(G,V){function ee(oe){try{te(P.next(oe))}catch($){V($)}}function se(oe){try{te(P.throw(oe))}catch($){V($)}}function te(oe){var $;oe.done?G(oe.value):($=oe.value,$ instanceof U?$:new U(function(b){b($)})).then(ee,se)}te((P=P.apply(w,E||[])).next())})},R=this&&this.__generator||function(w,E){var U,P,G,V,ee={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return V={next:se(0),throw:se(1),return:se(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function se(te){return function(oe){return function($){if(U)throw new TypeError("Generator is already executing.");for(;ee;)try{if(U=1,P&&(G=2&$[0]?P.return:$[0]?P.throw||((G=P.return)&&G.call(P),0):P.next)&&!(G=G.call(P,$[1])).done)return G;switch(P=0,G&&($=[2&$[0],G.value]),$[0]){case 0:case 1:G=$;break;case 4:return ee.label++,{value:$[1],done:!1};case 5:ee.label++,P=$[1],$=[0];continue;case 7:$=ee.ops.pop(),ee.trys.pop();continue;default:if(!((G=(G=ee.trys).length>0&&G[G.length-1])||6!==$[0]&&2!==$[0])){ee=0;continue}if(3===$[0]&&(!G||$[1]>G[0]&&$[1]<G[3])){ee.label=$[1];break}if(6===$[0]&&ee.label<G[1]){ee.label=G[1],G=$;break}if(G&&ee.label<G[2]){ee.label=G[2],ee.ops.push($);break}G[2]&&ee.ops.pop(),ee.trys.pop();continue}$=E.call(w,ee)}catch(b){$=[6,b],P=0}finally{U=G=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([te,oe])}}},O=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}},T=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var E={};if(null!=w)for(var U in w)Object.hasOwnProperty.call(w,U)&&(E[U]=w[U]);return E.default=w,E};Object.defineProperty(re,"__esModule",{value:!0});var N=O(j(56)),y=T(j(60)),I=T(j(61)),h=O(j(0)),m=j(2),v=N.default.Root.fromJSON(I),k=function(){function w(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return w.prototype.setProxy=function(E){this.proxyServer=E},w.prototype.sendReportList=function(E,U){var P=this,G=this._dataConvert("ProtoRaws",{vid:U,sendTs:Math.round(Date.now()/1e3),payloads:E.map(function(V){return{id:y[V.type],msg:P._dataConvert(V.type,V.data)}})});this.send(G)},w.prototype._dataConvert=function(E,U){var P;try{P=v.lookupType("protobuf."+E)}catch(V){h.default.error("[send-proto] invalid proto name "+E)}var G=P.create(U);return P.encode(G).finish()},w.prototype.send=function(E){0==this.state?this._send(E):this.requestArray.push(E)},w.prototype._send=function(E){return D(this,void 0,void 0,function(){return R(this,function(U){switch(U.label){case 0:return U.trys.push([0,2,,4]),this.state=1,[4,this.request(E)];case 1:return U.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return U.sent(),[4,B(this.retryBackoffCount++<2?200:1e4)];case 3:return U.sent(),this._send(E),[3,4];case 4:return[2]}})})},w.prototype.request=function(E){return D(this,void 0,void 0,function(){var U,P;return R(this,function(G){switch(G.label){case 0:U=this._getAddress(),P=this._getBackupAddress(),G.label=1;case 1:return G.trys.push([1,3,,5]),[4,this._request(U,E)];case 2:return G.sent(),[3,5];case 3:return G.sent(),[4,this._request(P,E)];case 4:return G.sent(),[3,5];case 5:return[2]}})})},w.prototype._request=function(E,U){return this._post(E,U)},w.prototype._post=function(E,U){var P=this;return new Promise(function(G,V){var ee=new XMLHttpRequest;ee.timeout=m.getParameter("HTTP_CONNECT_TIMEOUT"),ee.open("POST",E,!0),ee.setRequestHeader("Content-type","application/octet-stream"),P.proxyServer||(ee.setRequestHeader("Cache-Control","no-cache, no-store"),ee.setRequestHeader("Pragma","no-cache"),ee.setRequestHeader("Expires","0")),ee.onload=function(se){G(ee.responseText)},ee.onerror=function(se){V(se)},ee.ontimeout=function(se){V(se)},ee.send(U)})},w.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+m.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+m.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},w.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+m.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+m.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},w}();re.default=k;var B=function(w){return new Promise(function(E){window.setTimeout(E,w)})}},function(le,re){le.exports=function(j,D){if(!(j instanceof D))throw new TypeError("Cannot call a class as a function")}},function(le,re){function j(D,R){for(var O=0;O<R.length;O++){var T=R[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(D,T.key,T)}}le.exports=function(D,R,O){return R&&j(D.prototype,R),O&&j(D,O),D}},function(le,re,j){"use strict";var D=this&&this.__awaiter||function(h,m,v,k){return new(v||(v=Promise))(function(B,w){function E(G){try{P(k.next(G))}catch(V){w(V)}}function U(G){try{P(k.throw(G))}catch(V){w(V)}}function P(G){var V;G.done?B(G.value):(V=G.value,V instanceof v?V:new v(function(ee){ee(V)})).then(E,U)}P((k=k.apply(h,m||[])).next())})},R=this&&this.__generator||function(h,m){var v,k,B,w,E={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return w={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function U(P){return function(G){return function(V){if(v)throw new TypeError("Generator is already executing.");for(;E;)try{if(v=1,k&&(B=2&V[0]?k.return:V[0]?k.throw||((B=k.return)&&B.call(k),0):k.next)&&!(B=B.call(k,V[1])).done)return B;switch(k=0,B&&(V=[2&V[0],B.value]),V[0]){case 0:case 1:B=V;break;case 4:return E.label++,{value:V[1],done:!1};case 5:E.label++,k=V[1],V=[0];continue;case 7:V=E.ops.pop(),E.trys.pop();continue;default:if(!((B=(B=E.trys).length>0&&B[B.length-1])||6!==V[0]&&2!==V[0])){E=0;continue}if(3===V[0]&&(!B||V[1]>B[0]&&V[1]<B[3])){E.label=V[1];break}if(6===V[0]&&E.label<B[1]){E.label=B[1],B=V;break}if(B&&E.label<B[2]){E.label=B[2],E.ops.push(V);break}B[2]&&E.ops.pop(),E.trys.pop();continue}V=m.call(h,E)}catch(ee){V=[6,ee],k=0}finally{v=B=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([P,G])}}},O=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(re,"__esModule",{value:!0});var T,h,N=O(j(0)),y=j(15);(h=T||(T={})).NEW="new",h.PREPARING_OFFER="preparing-offer",h.OFFER_SENT="offer-sent",h.ESTABLISHED="established",h.CLOSED="closed";var I=function(){function h(m){this.candidate=null,this.state=T.NEW,this.config=m,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(m),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:this.config.codec.toUpperCase(),bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return h.prototype.addStream=function(m){this.peerConnection.addStream(m)},h.prototype.setRtpSenderParameters=function(m){return D(this,void 0,void 0,function(){return R(this,function(v){return[2]})})},h.prototype.setAnswer=function(m){var v=JSON.parse(m);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:v.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},h.prototype.close=function(){this.peerConnection.close()},h.prototype.getStats=function(m,v){if(void 0===v&&(v=500),v=v>500?500:v,Date.now()-this.lastTimeGetStats<v){var k=[];this.config.isSubscriber?(k.push(this.receiveVideoStats),k.push(this.receiveAudioStats)):(k.push(this.sendAudioStats),k.push(this.sendVideoStats)),k.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),m&&m(k)}else this._getStats(m)},h.prototype._getStats=function(m){var v=this,k=[];this.peerConnection.getStats(null).then(function(B){v.lastTimeGetStats=Date.now(),Object.keys(B).map(function(w){var E=B[w];v.config.isSubscriber?E.type&&"inboundrtp"===E.type&&E.mediaType&&"audio"===E.mediaType?(v.receiveAudioStats.id=E.id+"recv",v.receiveAudioStats.type=E.type+"",v.receiveAudioStats.mediaType=E.mediaType+"",v.receiveAudioStats.packetsReceived=E.packetsReceived+"",v.receiveAudioStats.bytesReceived=E.bytesReceived+"",v.receiveAudioStats.packetsLost=E.packetsLost+"",v.receiveAudioStats.googJitterReceived=E.jitter+""):E.type&&"inboundrtp"===E.type&&E.mediaType&&"video"===E.mediaType?(v.receiveVideoStats.id=E.id+"recv",v.receiveVideoStats.type=E.type+"",v.receiveVideoStats.mediaType=E.mediaType+"",v.receiveVideoStats.packetsReceived=E.packetsReceived+"",v.receiveVideoStats.bytesReceived=E.bytesReceived+"",v.receiveVideoStats.packetsLost=E.packetsLost+"",v.receiveVideoStats.googJitterBufferMs=E.jitter+"",v.receiveVideoStats.googPlisSent=E.pliCount+"",v.receiveVideoStats.googFirsSent=E.firCount+"",v.receiveVideoStats.googNacksSent=E.nackCount+""):E.remoteSource&&E.type&&"track"===E.type&&E.trackIdentifier&&-1!==E.trackIdentifier.indexOf("v")?(v.receiveVideoStats.googFrameHeightReceived=E.frameHeight+"",v.receiveVideoStats.googFrameWidthReceived=E.frameWidth+"",v.receiveVideoStats.googFrameRateDecoded=E.framesPerSecond+"",v.receiveVideoStats.googFrameRateOutput=E.framesPerSecond+"",v.receiveVideoStats.googFrameRateReceived=E.framesPerSecond+"",v.receiveVideoStats.googFramesDecoded=E.framesDecoded+"",v.receiveVideoStats.googFrameReceived=E.framesReceived+""):E.remoteSource&&E.type&&"track"===E.type&&E.trackIdentifier&&-1!==E.trackIdentifier.indexOf("a")&&(v.receiveAudioStats.audioOutputLevel=E.audioLevel+""):!E.isRemote&&E.type&&"outboundrtp"===E.type&&E.mediaType&&"audio"===E.mediaType?(v.sendAudioStats.id=E.id+"send",v.sendAudioStats.type=E.type+"",v.sendAudioStats.mediaType=E.mediaType+"",v.sendAudioStats.packetsSent=E.packetsSent+"",v.sendAudioStats.bytesSent=E.bytesSent+""):!E.isRemote&&E.type&&"outboundrtp"===E.type&&E.mediaType&&"video"===E.mediaType?(v.sendVideoStats.id=E.id+"send",v.sendVideoStats.type=E.type+"",v.sendVideoStats.mediaType=E.mediaType+"",v.sendVideoStats.packetsSent=E.packetsSent+"",v.sendVideoStats.bytesSent=E.bytesSent+"",v.sendVideoStats.googRtt=E.roundTripTime+"",v.sendVideoStats.googPlisReceived=E.pliCount+"",v.sendVideoStats.googFirsReceived=E.firCount+"",v.sendVideoStats.googNacksReceived=E.nackCount+""):!E.remoteSource&&E.type&&"track"===E.type&&E.framesSent&&0!==E.framesSent&&(v.sendVideoStats.googFrameHeightSent=E.frameHeight+"",v.sendVideoStats.googFrameHeightInput=E.frameHeight+"",v.sendVideoStats.googFrameWidthSent=E.frameWidth+"",v.sendVideoStats.googFrameWidthInput=E.frameWidth+"",v.sendVideoStats.googFramesEncoded=E.framesSent+"",v.sendVideoStats.googFrameRateSent=E.framesPerSecond+"")}),v.config.isSubscriber?(k.push(v.receiveVideoStats),k.push(v.receiveAudioStats)):(k.push(v.sendAudioStats),k.push(v.sendVideoStats)),k.push({id:"time",startTime:v.connectedTime,timestamp:Date.now()}),m&&m(k)})},h.prototype.getStatsRate=function(m){this.getStats(m)},h.prototype.initPeecConnection=function(m){var v=m.stunServerUrl,k=m.turnServer,B=m.iceServers;return this.pcConfig={iceServers:[]},B instanceof Array?this.pcConfig.iceServers=m.iceServers:v&&(v instanceof Array?v.map(function(w){"string"==typeof w&&""!==w&&this.pcConfig.iceServers.push({urls:w})}):"string"==typeof v&&""!==v&&this.pcConfig.iceServers.push({urls:v})),k&&(k instanceof Array?k.map(function(w){"string"==typeof w.url&&""!==w.url&&this.pcConfig.iceServers.push({username:w.username,credential:w.credential,url:w.url})}):"auto"!==k.mode&&"manual"!==k.mode||(k.udpport&&this.pcConfig.iceServers.push({username:k.username,credential:k.credential,credentialType:"password",urls:"turn:"+k.url+":"+k.udpport+"?transport=udp"}),"string"==typeof k.tcpport&&""!==k.tcpport&&this.pcConfig.iceServers.push({username:k.username,credential:k.credential,credentialType:"password",urls:"turn:"+k.url+":"+k.tcpport+"?transport=tcp"}),!0===k.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new y.RTCPeerConnection(this.pcConfig)},h.prototype._ontrack=function(m){this.onaddstream&&this.onaddstream(m,"ontrack")},h.prototype._onaddstream=function(m){this.onaddstream&&this.onaddstream(m,"onaddstream")},h.prototype._oniceconnectionstatechange=function(m){"connected"===m.currentTarget.iceConnectionState&&(this.state=T.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(m.currentTarget.iceConnectionState)},h.prototype._onicecandidate=function(m){!this.candidate&&m&&(this.candidate=m.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},h.prototype.setLocalSDP=function(m){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:m.sdp,type:"offer"})),this.state=T.PREPARING_OFFER,m},h.prototype.editLocalSDP=function(m){return m.sdp=this.setBandWidth(m.sdp),m.sdp=this.reviseOpus(m.sdp),m.sdp=this.addCandidate(m.sdp),m},h.prototype.setSendRecv=function(m){return(m=(m=m.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},h.prototype.setBandWidth=function(m){var v,k,B=this.config,w=B.codec,E=B.minVideoBW,U=B.maxVideoBW,P=B.maxAudioBW,G=B.clientId;if((v=m.match(/m=video.*\r\n/))&&E&&U){k=v[0]+"b=AS:"+U+"\r\n";var V=0,ee=0;"h264"===w?(V=m.search(/a=rtpmap:(\d+) H264\/90000\r\n/),ee=m.search(/H264\/90000\r\n/)):"vp8"===w?(V=m.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),ee=m.search(/VP8\/90000\r\n/)):"vp9"===w&&(V=m.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),ee=m.search(/VP9\/90000\r\n/)),-1!==V&&-1!==ee&&ee-V>10&&(k=k+"a=fmtp:"+m.slice(V+9,ee-1)+" x-google-min-bitrate="+E+"\r\n"),m=m.replace(v[0],k),N.default.debug("["+G+"]Set Video Bitrate - min:"+E+" max:"+U)}return(v=m.match(/m=audio.*\r\n/))&&P&&(m=m.replace(v[0],k=v[0]+"b=AS:"+P+"\r\n")),m},h.prototype.reviseOpus=function(m){return(m=m.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},h.prototype.addCandidate=function(m){return m+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},h.prototype.sendOffer=function(m){this.config.callback(JSON.stringify({sdp:m.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=T.OFFER_SENT},h}();re.default=I},function(le,re,j){var D=j(63),R=j(64),O=j(31),T=j(65);le.exports=function(N,y){return D(N)||R(N,y)||O(N,y)||T()}},function(le,re,j){var D,R,O;R=this,O=function(){"use strict";var T,N=this;function y(k){N.console&&(N.console.error?N.console.error(k):N.console.log&&N.console.log(k))}function I(k,B,w,E){var U=E||y,P=k.createShader(w);return k.shaderSource(P,B),k.compileShader(P),k.getShaderParameter(P,k.COMPILE_STATUS)?P:(U("*** Error compiling shader '"+P+"':"+k.getShaderInfoLog(P)),k.deleteShader(P),null)}function h(k,B,w,E,U){var P=U||y,G=k.createProgram();return B.forEach(function(V){k.attachShader(G,V)}),w&&w.forEach(function(V,ee){k.bindAttribLocation(G,E?E[ee]:ee,V)}),k.linkProgram(G),k.getProgramParameter(G,k.LINK_STATUS)?G:(P("Error in program linking:"+k.getProgramInfoLog(G)),k.deleteProgram(G),null)}(T=T||N)===T.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var m,v=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(m=HTMLCanvasElement.prototype.getContext,function(){var k=arguments,B=k[0];return"webgl"===B&&((k=[].slice.call(arguments))[0]="experimental-webgl"),m.apply(this,k)})),{createProgram:h,createProgramFromSources:function(k,B,w,E,U){for(var P=[],G=0;G<B.length;++G)P.push(I(k,B[G],k[v[G]],U));return h(k,P,w,E,U)}}},void 0===(D=function(){return O.call(R)}.apply(re,[]))||(le.exports=D)},function(le,re,j){"use strict";var D=this&&this.__awaiter||function(h,m,v,k){return new(v||(v=Promise))(function(B,w){function E(G){try{P(k.next(G))}catch(V){w(V)}}function U(G){try{P(k.throw(G))}catch(V){w(V)}}function P(G){var V;G.done?B(G.value):(V=G.value,V instanceof v?V:new v(function(ee){ee(V)})).then(E,U)}P((k=k.apply(h,m||[])).next())})},R=this&&this.__generator||function(h,m){var v,k,B,w,E={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return w={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function U(P){return function(G){return function(V){if(v)throw new TypeError("Generator is already executing.");for(;E;)try{if(v=1,k&&(B=2&V[0]?k.return:V[0]?k.throw||((B=k.return)&&B.call(k),0):k.next)&&!(B=B.call(k,V[1])).done)return B;switch(k=0,B&&(V=[2&V[0],B.value]),V[0]){case 0:case 1:B=V;break;case 4:return E.label++,{value:V[1],done:!1};case 5:E.label++,k=V[1],V=[0];continue;case 7:V=E.ops.pop(),E.trys.pop();continue;default:if(!((B=(B=E.trys).length>0&&B[B.length-1])||6!==V[0]&&2!==V[0])){E=0;continue}if(3===V[0]&&(!B||V[1]>B[0]&&V[1]<B[3])){E.label=V[1];break}if(6===V[0]&&E.label<B[1]){E.label=B[1],B=V;break}if(B&&E.label<B[2]){E.label=B[2],E.ops.push(V);break}B[2]&&E.ops.pop(),E.trys.pop();continue}V=m.call(h,E)}catch(ee){V=[6,ee],k=0}finally{v=B=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([P,G])}}},O=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(re,"__esModule",{value:!0});var T=j(66),N=j(5),y=O(j(0));re.getSupportedCodec=function(h){return D(void 0,void 0,void 0,function(){var m,v,k,B;return R(this,function(E){switch(E.label){case 0:return m={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(y.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{v=T.createRTCPeerConnection({iceServers:[]})}catch(U){return y.default.error("Failed to init RTCPeerConnection",U),[2,Promise.reject(U)]}return v?[3,2]:(y.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(m)]);case 2:return h&&h.stream?[3,7]:(k={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},B=void 0,(N.isSafari()||N.isFireFox()||N.isWeChatBrowser())&&v.addTransceiver?(v.addTransceiver("audio"),v.addTransceiver("video"),[4,v.createOffer()]):[3,4]);case 3:return B=E.sent(),[3,6];case 4:return[4,new Promise(function(U,P){var G=setTimeout(function(){P("CREATEOFFER_TIMEOUT")},3e3);v.createOffer(function(V){clearTimeout(G),U(V)},function(V){clearTimeout(G),P(V)},k)})];case 5:B=E.sent(),E.label=6;case 6:return v.close(),[2,I(B.sdp)];case 7:return h.stream.getTracks&&v.addTrack?h.stream.getTracks().forEach(function(U){v.addTrack(U,h.stream)}):v.addStream(h.stream),B=void 0,N.isSafari()||N.isFireFox()?[4,v.createOffer()]:[3,9];case 8:return B=E.sent(),[3,11];case 9:return[4,new Promise(function(U,P){v.createOffer(U,P)})];case 10:B=E.sent(),E.label=11;case 11:return v.close(),[2,I(B.sdp)]}})})};var I=function(h){var m={video:[],audio:[]};return h.match(/ VP8/i)&&m.video.push("VP8"),h.match(/ VP9/i)&&m.video.push("VP9"),h.match(/ H264/i)&&m.video.push("H264"),h.match(/ opus/i)&&m.audio.push("OPUS"),Promise.resolve(m)}},function(le,re,j){"use strict";var D=this&&this.__awaiter||function(N,y,I,h){return new(I||(I=Promise))(function(m,v){function k(E){try{w(h.next(E))}catch(U){v(U)}}function B(E){try{w(h.throw(E))}catch(U){v(U)}}function w(E){var U;E.done?m(E.value):(U=E.value,U instanceof I?U:new I(function(P){P(U)})).then(k,B)}w((h=h.apply(N,y||[])).next())})},R=this&&this.__generator||function(N,y){var I,h,m,v,k={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return v={next:B(0),throw:B(1),return:B(2)},"function"==typeof Symbol&&(v[Symbol.iterator]=function(){return this}),v;function B(w){return function(E){return function(U){if(I)throw new TypeError("Generator is already executing.");for(;k;)try{if(I=1,h&&(m=2&U[0]?h.return:U[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,U[1])).done)return m;switch(h=0,m&&(U=[2&U[0],m.value]),U[0]){case 0:case 1:m=U;break;case 4:return k.label++,{value:U[1],done:!1};case 5:k.label++,h=U[1],U=[0];continue;case 7:U=k.ops.pop(),k.trys.pop();continue;default:if(!((m=(m=k.trys).length>0&&m[m.length-1])||6!==U[0]&&2!==U[0])){k=0;continue}if(3===U[0]&&(!m||U[1]>m[0]&&U[1]<m[3])){k.label=U[1];break}if(6===U[0]&&k.label<m[1]){k.label=m[1],m=U;break}if(m&&k.label<m[2]){k.label=m[2],k.ops.push(U);break}m[2]&&k.ops.pop(),k.trys.pop();continue}U=y.call(N,k)}catch(P){U=[6,P],h=0}finally{I=m=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([w,E])}}};Object.defineProperty(re,"__esModule",{value:!0});var O=j(10);function T(N){for(var y="",I=0;I<N.length;I+=1)y+=String.fromCharCode(N[I]);return window.btoa(y)}re.encryptRSA=function(N){return D(void 0,void 0,void 0,function(){var y,I,h,m;return R(this,function(v){switch(v.label){case 0:return y=O.base64ToUint8Array("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),[4,window.crypto.subtle.importKey("spki",y,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 1:return I=v.sent(),k=N,h=(new TextEncoder).encode(k),[4,window.crypto.subtle.encrypt({name:"RSA-OAEP"},I,h)];case 2:return m=v.sent(),[2,T(new Uint8Array(m))]}var k})})}},function(le,re,j){"use strict";var D=this&&this.__awaiter||function(m,v,k,B){return new(k||(k=Promise))(function(w,E){function U(V){try{G(B.next(V))}catch(ee){E(ee)}}function P(V){try{G(B.throw(V))}catch(ee){E(ee)}}function G(V){var ee;V.done?w(V.value):(ee=V.value,ee instanceof k?ee:new k(function(se){se(ee)})).then(U,P)}G((B=B.apply(m,v||[])).next())})},R=this&&this.__generator||function(m,v){var k,B,w,E,U={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return E={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function P(G){return function(V){return function(ee){if(k)throw new TypeError("Generator is already executing.");for(;U;)try{if(k=1,B&&(w=2&ee[0]?B.return:ee[0]?B.throw||((w=B.return)&&w.call(B),0):B.next)&&!(w=w.call(B,ee[1])).done)return w;switch(B=0,w&&(ee=[2&ee[0],w.value]),ee[0]){case 0:case 1:w=ee;break;case 4:return U.label++,{value:ee[1],done:!1};case 5:U.label++,B=ee[1],ee=[0];continue;case 7:ee=U.ops.pop(),U.trys.pop();continue;default:if(!((w=(w=U.trys).length>0&&w[w.length-1])||6!==ee[0]&&2!==ee[0])){U=0;continue}if(3===ee[0]&&(!w||ee[1]>w[0]&&ee[1]<w[3])){U.label=ee[1];break}if(6===ee[0]&&U.label<w[1]){U.label=w[1],w=ee;break}if(w&&U.label<w[2]){U.label=w[2],U.ops.push(ee);break}w[2]&&U.ops.pop(),U.trys.pop();continue}ee=v.call(m,U)}catch(se){ee=[6,se],B=0}finally{k=w=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}([G,V])}}},O=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(re,"__esModule",{value:!0});var T=O(j(0)),N=j(71),y=j(24),I=j(1),h=j(27);re.addLiveStreamingCapability=function(m,v){var k=this,B=function(w){var E=w.type;if(!m.joinInfo)return new y.AgoraRTCError(y.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(E){case h.LiveStreamingServiceMode.INJECT:return m._injectStreamingClient||(m._injectStreamingClient=new N.AgoraRTCLiveStreamingClient(m.joinInfo),m._injectStreamingClient.onInjectStatusChange=function(U,P,G){m.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:G,status:U})}),m._injectStreamingClient;case h.LiveStreamingServiceMode.RAW:return m._liveRawStreamingClient||(m._liveRawStreamingClient=new N.AgoraRTCLiveStreamingClient(m.joinInfo),m._liveRawStreamingClient.setGatewayConnectionState(m.getConnectionState()),m.on("connection-state-change",function(U){m._liveRawStreamingClient.setGatewayConnectionState(U.curState),"CONNECTING"===U.prevState&&"CONNECTED"===U.curState&&m._liveRawStreamingClient&&m._liveRawStreamingClient.resetAllTask()}),m._liveRawStreamingClient.onLiveStreamError=function(U,P){T.default.error("LIVE_STREAMING_ERROR",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:U,reason:P.code})},m._liveRawStreamingClient.onLiveStreamWarning=function(U,P){T.default.warning("LIVE_STREAMING_WARNING",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:U,reason:P.code})}),m._liveRawStreamingClient;case h.LiveStreamingServiceMode.TRANSCODE:return m._liveTranscodeStreamingClient||(m._liveTranscodeStreamingClient=new N.AgoraRTCLiveStreamingClient(m.joinInfo),m._liveTranscodeStreamingClient.setGatewayConnectionState(m.getConnectionState()),m.on("connection-state-change",function(U){m._liveTranscodeStreamingClient.setGatewayConnectionState(U.curState),"CONNECTING"===U.prevState&&"CONNECTED"===U.curState&&m._liveTranscodeStreamingClient&&m._liveTranscodeStreamingClient.resetAllTask()}),m._liveTranscodeStreamingClient.onLiveStreamError=function(U,P){T.default.error("LIVE_STREAMING_ERROR",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:U,reason:P.code})},m._liveTranscodeStreamingClient.onLiveStreamWarning=function(U,P){T.default.warning("LIVE_STREAMING_WARNING",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:U,reason:P})}),m._liveTranscodeStreamingClient}};m.gatewayClient.addEventListener("join",function(w){m._injectStreamingClient&&m._injectStreamingClient.resetAllTask()}),m.gatewayClient.addEventListener("stream-unpublished",function(w){w.options&&0===w.options.streamType&&(m._liveRawStreamingClient&&m._liveRawStreamingClient.resetAllTask(),m._liveTranscodeStreamingClient&&m._liveTranscodeStreamingClient.resetAllTask())}),m.gatewayClient.addEventListener("stream-published",function(w){}),m.startLiveStreaming=function(w,E){T.default.debug("startLiveStreaming");var U=I.report.reportApiInvoke(v.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(m.gatewayClient&&"audience"===m.gatewayClient.role){var P={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw U(P),P}var G=m._startLiveStreaming(w,E);return G.then(function(V){U(null,V)}).catch(function(V){T.default.error("LIVE_STREAMING_ERROR",V.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:w,reason:V.code}),U(V)}),G},m._startLiveStreaming=function(w,E){return D(k,void 0,void 0,function(){var U;return R(this,function(P){switch(P.label){case 0:return E||("vp8"===v.codec&&T.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"vp9"===v.codec&&T.default.warning("VP9 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===v.mode&&T.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(m._liveRawStreamingClient&&m._liveRawStreamingClient.haveUrl(w)||m._liveTranscodeStreamingClient&&m._liveTranscodeStreamingClient.haveUrl(w))&&new y.AgoraRTCError(y.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),[4,B({type:U=E?h.LiveStreamingServiceMode.TRANSCODE:h.LiveStreamingServiceMode.RAW}).startLiveStreamingTask(w,U)];case 1:return P.sent(),m.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:w}),[2]}})})},m.setLiveTranscoding=function(w){T.default.debug("setLiveTranscoding: "+JSON.stringify(w));var E=I.report.reportApiInvoke(v.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"}),U=B({type:h.LiveStreamingServiceMode.TRANSCODE});return U.setTranscodingConfig(w).then(function(){m.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),E(null)}).catch(function(P){T.default.error("SET_LIVE_TRANSCODING_ERROR",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:P.code}),E(P)})},m.stopLiveStreaming=function(w){var E=I.report.reportApiInvoke(v.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),U=m._stopLiveStreaming(w);return U.then(function(P){E(null,P)}).catch(function(P){T.default.error("STOP_LIVE_STREAMING_ERROR",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:w,reason:P.code}),E(P)}),U},m._stopLiveStreaming=function(w){return D(this,void 0,void 0,function(){return R(this,function(U){switch(U.label){case 0:return T.default.debug("stopLiveStreaming: "+JSON.stringify(w)),[4,Promise.all([m._liveRawStreamingClient,m._liveTranscodeStreamingClient].map(function(P){return P&&P.haveUrl(w)&&P.stopLiveStreamingTask(w)}))];case 1:return U.sent(),T.default.debug("stopLiveStreaming sucess: "+JSON.stringify(w)),m.gatewayClient.dispatchEvent({type:"liveStreamingStopped",url:w}),[2]}})})},m.addInjectStreamUrl=function(w,E){var U=I.report.reportApiInvoke(v.sessionId,{name:"Client.addInjectStreamUrl",options:[w,E],tag:"tracer"});if("audience"===m.gatewayClient.role){var P={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw U(P),P}var G=m._addInjectStreamUrl(w,E);return G.then(function(V){U(null,V)}).catch(function(V){T.default.error("ADD_INJECT_STREAM_ERROR",V.toString()),U(V)}),G},m._addInjectStreamUrl=function(w,E){return D(k,void 0,void 0,function(){var U;return R(this,function(P){switch(P.label){case 0:return(U=B({type:h.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(E,0),[4,U.startLiveStreamingTask(w,h.LiveStreamingServiceMode.INJECT)];case 1:return P.sent(),[2]}})})},m.removeInjectStreamUrl=function(w){return D(this,void 0,void 0,function(){var E,U;return R(this,function(P){return E=I.report.reportApiInvoke(v.sessionId,{name:"Client.removeInjectStreamUrl",options:[w],tag:"tracer"}),(U=m._removeInjectStreamUrl(w)).then(function(G){E(null,G)}).catch(function(G){T.default.error("REMOVE_INJECT_STREAM_ERROR",G.toString()),E(G)}),[2,U]})})},m._removeInjectStreamUrl=function(w){return D(k,void 0,void 0,function(){return R(this,function(E){switch(E.label){case 0:return[4,B({type:h.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(w)];case 1:return E.sent(),[2]}})})},m._terminateLiveStreaming=function(){return D(k,void 0,void 0,function(){return R(this,function(w){return[m._injectStreamingClient,m._liveRawStreamingClient,m._liveTranscodeStreamingClient].forEach(function(E){E&&E.terminate()}),[2]})})}}},function(le,re,j){"use strict";var D=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(re,"__esModule",{value:!0});var R=D(j(4)),O=D(j(0)),T=j(10);re.default=function(N,y){void 0===y&&(y={width:160,height:120,framerate:15});var I=y.width,h=y.height,m=y.framerate,v=N.stream;if(!v)throw R.default.INVALID_LOCAL_STREAM;if(!v.getVideoTracks()[0])throw R.default.HIGH_STREAM_NOT_VIDEO_TRACE;var k=v.getVideoTracks()[0];O.default.debug("Start getLowStream");var B=document.createElement("video"),w=document.createElement("canvas");B.setAttribute("style","display:none"),B.setAttribute("muted",""),B.muted=!0,B.setAttribute("autoplay",""),B.autoplay=!0,B.setAttribute("playsinline",""),w.setAttribute("style","display:none"),w.setAttribute("width",I.toString()),w.setAttribute("height",h.toString());var E=w.getContext("2d");if(!E)throw new Error("not get canvas context");B.srcObject=v,document.body.append(B),document.body.append(w),B.play(),O.default.debug("Start render lowStream");var U=T.audioTimerLoop(function(){return function(){if(B.paused&&B.play(),B.videoHeight>2&&B.videoWidth>2){var se=w.width*(B.videoHeight/B.videoWidth);Math.abs(se-w.height)>=2&&(O.default.debug("adjust low stream resolution",w.width+"x"+w.height+" -> "+w.width+"x"+se),w.height=se)}E.drawImage(B,0,0,w.width,w.height);var te=N.stream;if(te){var oe=te.getVideoTracks()[0];k!==oe&&(O.default.debug("adjust low stream track"),B.srcObject=te,k=oe)}}()},m),P=w.captureStream(m),G=P.getVideoTracks()[0];return G.requestFrame&&G.requestFrame(),P.clean=function(){O.default.debug("Start clean lowStream"),U(),(B||B.parentNode||B.parentNode.removeChild)&&B.parentNode.removeChild(B),(w||w.parentNode||w.parentNode.removeChild)&&w.parentNode.removeChild(w),O.default.debug("Clean lowStream")},P}},function(le,re){var j="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(j){var D=new Uint8Array(16);le.exports=function(){return j(D),D}}else{var R=new Array(16);le.exports=function(){for(var O,T=0;T<16;T++)0==(3&T)&&(O=4294967296*Math.random()),R[T]=O>>>((3&T)<<3)&255;return R}}},function(le,re){for(var j=[],D=0;D<256;++D)j[D]=(D+256).toString(16).substr(1);le.exports=function(R,O){var T=O||0;return[j[R[T++]],j[R[T++]],j[R[T++]],j[R[T++]],"-",j[R[T++]],j[R[T++]],"-",j[R[T++]],j[R[T++]],"-",j[R[T++]],j[R[T++]],"-",j[R[T++]],j[R[T++]],j[R[T++]],j[R[T++]],j[R[T++]],j[R[T++]]].join("")}},function(module,exports,__nested_webpack_require_634166__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(undefined){"use strict";var le,re,D;le={1:[function(le,re,j){re.exports=function(D,R){for(var O=new Array(arguments.length-1),T=0,N=2,y=!0;N<arguments.length;)O[T++]=arguments[N++];return new Promise(function(I,h){O[T]=function(m){if(y)if(y=!1,m)h(m);else{for(var v=new Array(arguments.length-1),k=0;k<v.length;)v[k++]=arguments[k];I.apply(null,v)}};try{D.apply(R||null,O)}catch(m){y&&(y=!1,h(m))}})}},{}],2:[function(le,re,j){var D=j;D.length=function(N){var y=N.length;if(!y)return 0;for(var I=0;--y%4>1&&"="===N.charAt(y);)++I;return Math.ceil(3*N.length)/4-I};for(var R=new Array(64),O=new Array(123),T=0;T<64;)O[R[T]=T<26?T+65:T<52?T+71:T<62?T-4:T-59|43]=T++;D.encode=function(N,y,I){for(var h,m=null,v=[],k=0,B=0;y<I;){var w=N[y++];switch(B){case 0:v[k++]=R[w>>2],h=(3&w)<<4,B=1;break;case 1:v[k++]=R[h|w>>4],h=(15&w)<<2,B=2;break;case 2:v[k++]=R[h|w>>6],v[k++]=R[63&w],B=0}k>8191&&((m||(m=[])).push(String.fromCharCode.apply(String,v)),k=0)}return B&&(v[k++]=R[h],v[k++]=61,1===B&&(v[k++]=61)),m?(k&&m.push(String.fromCharCode.apply(String,v.slice(0,k))),m.join("")):String.fromCharCode.apply(String,v.slice(0,k))},D.decode=function(N,y,I){for(var h,m=I,v=0,k=0;k<N.length;){var B=N.charCodeAt(k++);if(61===B&&v>1)break;if((B=O[B])===undefined)throw Error("invalid encoding");switch(v){case 0:h=B,v=1;break;case 1:y[I++]=h<<2|(48&B)>>4,h=B,v=2;break;case 2:y[I++]=(15&h)<<4|(60&B)>>2,h=B,v=3;break;case 3:y[I++]=(3&h)<<6|B,v=0}}if(1===v)throw Error("invalid encoding");return I-m},D.test=function(N){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(N)}},{}],3:[function(le,re,j){function D(R,O){"string"==typeof R&&(O=R,R=undefined);var T=[];function N(I){if("string"!=typeof I){var h=y();if(D.verbose&&console.log("codegen: "+h),h="return "+h,I){for(var m=Object.keys(I),v=new Array(m.length+1),k=new Array(m.length),B=0;B<m.length;)v[B]=m[B],k[B]=I[m[B++]];return v[B]=h,Function.apply(null,v).apply(null,k)}return Function(h)()}for(var w=new Array(arguments.length-1),E=0;E<w.length;)w[E]=arguments[++E];if(E=0,I=I.replace(/%([%dfijs])/g,function(U,P){var G=w[E++];switch(P){case"d":case"f":return String(Number(G));case"i":return String(Math.floor(G));case"j":return JSON.stringify(G);case"s":return String(G)}return"%"}),E!==w.length)throw Error("parameter count mismatch");return T.push(I),N}function y(I){return"function "+(I||O||"")+"("+(R&&R.join(",")||"")+"){\n  "+T.join("\n  ")+"\n}"}return N.toString=y,N}re.exports=D,D.verbose=!1},{}],4:[function(le,re,j){function D(){this._listeners={}}re.exports=D,D.prototype.on=function(R,O,T){return(this._listeners[R]||(this._listeners[R]=[])).push({fn:O,ctx:T||this}),this},D.prototype.off=function(R,O){if(R===undefined)this._listeners={};else if(O===undefined)this._listeners[R]=[];else for(var T=this._listeners[R],N=0;N<T.length;)T[N].fn===O?T.splice(N,1):++N;return this},D.prototype.emit=function(R){var O=this._listeners[R];if(O){for(var T=[],N=1;N<arguments.length;)T.push(arguments[N++]);for(N=0;N<O.length;)O[N].fn.apply(O[N++].ctx,T)}return this}},{}],5:[function(le,re,j){re.exports=O;var D=le(1),R=le(7)("fs");function O(T,N,y){return"function"==typeof N?(y=N,N={}):N||(N={}),y?!N.xhr&&R&&R.readFile?R.readFile(T,function(I,h){return I&&"undefined"!=typeof XMLHttpRequest?O.xhr(T,N,y):I?y(I):y(null,N.binary?h:h.toString("utf8"))}):O.xhr(T,N,y):D(O,this,T,N)}O.xhr=function(T,N,y){var I=new XMLHttpRequest;I.onreadystatechange=function(){if(4!==I.readyState)return undefined;if(0!==I.status&&200!==I.status)return y(Error("status "+I.status));if(N.binary){var h=I.response;if(!h){h=[];for(var m=0;m<I.responseText.length;++m)h.push(255&I.responseText.charCodeAt(m))}return y(null,"undefined"!=typeof Uint8Array?new Uint8Array(h):h)}return y(null,I.responseText)},N.binary&&("overrideMimeType"in I&&I.overrideMimeType("text/plain; charset=x-user-defined"),I.responseType="arraybuffer"),I.open("GET",T),I.send()}},{1:1,7:7}],6:[function(le,re,j){function D(y){return"undefined"!=typeof Float32Array?function(){var I=new Float32Array([-0]),h=new Uint8Array(I.buffer),m=128===h[3];function v(E,U,P){I[0]=E,U[P]=h[0],U[P+1]=h[1],U[P+2]=h[2],U[P+3]=h[3]}function k(E,U,P){I[0]=E,U[P]=h[3],U[P+1]=h[2],U[P+2]=h[1],U[P+3]=h[0]}function B(E,U){return h[0]=E[U],h[1]=E[U+1],h[2]=E[U+2],h[3]=E[U+3],I[0]}function w(E,U){return h[3]=E[U],h[2]=E[U+1],h[1]=E[U+2],h[0]=E[U+3],I[0]}y.writeFloatLE=m?v:k,y.writeFloatBE=m?k:v,y.readFloatLE=m?B:w,y.readFloatBE=m?w:B}():function(){function I(m,v,k,B){var w=v<0?1:0;if(w&&(v=-v),0===v)m(1/v>0?0:2147483648,k,B);else if(isNaN(v))m(2143289344,k,B);else if(v>34028234663852886e22)m((w<<31|2139095040)>>>0,k,B);else if(v<11754943508222875e-54)m((w<<31|Math.round(v/1401298464324817e-60))>>>0,k,B);else{var E=Math.floor(Math.log(v)/Math.LN2);m((w<<31|E+127<<23|8388607&Math.round(v*Math.pow(2,-E)*8388608))>>>0,k,B)}}function h(m,v,k){var B=m(v,k),w=2*(B>>31)+1,E=B>>>23&255,U=8388607&B;return 255===E?U?NaN:w*(1/0):0===E?1401298464324817e-60*w*U:w*Math.pow(2,E-150)*(U+8388608)}y.writeFloatLE=I.bind(null,R),y.writeFloatBE=I.bind(null,O),y.readFloatLE=h.bind(null,T),y.readFloatBE=h.bind(null,N)}(),"undefined"!=typeof Float64Array?function(){var I=new Float64Array([-0]),h=new Uint8Array(I.buffer),m=128===h[7];function v(E,U,P){I[0]=E,U[P]=h[0],U[P+1]=h[1],U[P+2]=h[2],U[P+3]=h[3],U[P+4]=h[4],U[P+5]=h[5],U[P+6]=h[6],U[P+7]=h[7]}function k(E,U,P){I[0]=E,U[P]=h[7],U[P+1]=h[6],U[P+2]=h[5],U[P+3]=h[4],U[P+4]=h[3],U[P+5]=h[2],U[P+6]=h[1],U[P+7]=h[0]}function B(E,U){return h[0]=E[U],h[1]=E[U+1],h[2]=E[U+2],h[3]=E[U+3],h[4]=E[U+4],h[5]=E[U+5],h[6]=E[U+6],h[7]=E[U+7],I[0]}function w(E,U){return h[7]=E[U],h[6]=E[U+1],h[5]=E[U+2],h[4]=E[U+3],h[3]=E[U+4],h[2]=E[U+5],h[1]=E[U+6],h[0]=E[U+7],I[0]}y.writeDoubleLE=m?v:k,y.writeDoubleBE=m?k:v,y.readDoubleLE=m?B:w,y.readDoubleBE=m?w:B}():function(){function I(m,v,k,B,w,E){var U=B<0?1:0;if(U&&(B=-B),0===B)m(0,w,E+v),m(1/B>0?0:2147483648,w,E+k);else if(isNaN(B))m(0,w,E+v),m(2146959360,w,E+k);else if(B>17976931348623157e292)m(0,w,E+v),m((U<<31|2146435072)>>>0,w,E+k);else{var P;if(B<22250738585072014e-324)m((P=B/5e-324)>>>0,w,E+v),m((U<<31|P/4294967296)>>>0,w,E+k);else{var G=Math.floor(Math.log(B)/Math.LN2);1024===G&&(G=1023),m(4503599627370496*(P=B*Math.pow(2,-G))>>>0,w,E+v),m((U<<31|G+1023<<20|1048576*P&1048575)>>>0,w,E+k)}}}function h(m,v,k,B,w){var E=m(B,w+v),U=m(B,w+k),P=2*(U>>31)+1,G=U>>>20&2047,V=4294967296*(1048575&U)+E;return 2047===G?V?NaN:P*(1/0):0===G?5e-324*P*V:P*Math.pow(2,G-1075)*(V+4503599627370496)}y.writeDoubleLE=I.bind(null,R,0,4),y.writeDoubleBE=I.bind(null,O,4,0),y.readDoubleLE=h.bind(null,T,0,4),y.readDoubleBE=h.bind(null,N,4,0)}(),y}function R(y,I,h){I[h]=255&y,I[h+1]=y>>>8&255,I[h+2]=y>>>16&255,I[h+3]=y>>>24}function O(y,I,h){I[h]=y>>>24,I[h+1]=y>>>16&255,I[h+2]=y>>>8&255,I[h+3]=255&y}function T(y,I){return(y[I]|y[I+1]<<8|y[I+2]<<16|y[I+3]<<24)>>>0}function N(y,I){return(y[I]<<24|y[I+1]<<16|y[I+2]<<8|y[I+3])>>>0}re.exports=D(D)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(le){}return null}module.exports=inquire},{}],8:[function(le,re,j){var D=j,R=D.isAbsolute=function(T){return/^(?:\/|\w+:)/.test(T)},O=D.normalize=function(T){var N=(T=T.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),y=R(T),I="";y&&(I=N.shift()+"/");for(var h=0;h<N.length;)".."===N[h]?h>0&&".."!==N[h-1]?N.splice(--h,2):y?N.splice(h,1):++h:"."===N[h]?N.splice(h,1):++h;return I+N.join("/")};D.resolve=function(T,N,y){return y||(N=O(N)),R(N)?N:(y||(T=O(T)),(T=T.replace(/(?:\/|^)[^/]+$/,"")).length?O(T+"/"+N):N)}},{}],9:[function(le,re,j){re.exports=function(D,R,O){var T=O||8192,N=T>>>1,y=null,I=T;return function(h){if(h<1||h>N)return D(h);I+h>T&&(y=D(T),I=0);var m=R.call(y,I,I+=h);return 7&I&&(I=1+(7|I)),m}}},{}],10:[function(le,re,j){var D=j;D.length=function(R){for(var O=0,T=0,N=0;N<R.length;++N)(T=R.charCodeAt(N))<128?O+=1:T<2048?O+=2:55296==(64512&T)&&56320==(64512&R.charCodeAt(N+1))?(++N,O+=4):O+=3;return O},D.read=function(R,O,T){if(T-O<1)return"";for(var N,y=null,I=[],h=0;O<T;)(N=R[O++])<128?I[h++]=N:N>191&&N<224?I[h++]=(31&N)<<6|63&R[O++]:N>239&&N<365?(N=((7&N)<<18|(63&R[O++])<<12|(63&R[O++])<<6|63&R[O++])-65536,I[h++]=55296+(N>>10),I[h++]=56320+(1023&N)):I[h++]=(15&N)<<12|(63&R[O++])<<6|63&R[O++],h>8191&&((y||(y=[])).push(String.fromCharCode.apply(String,I)),h=0);return y?(h&&y.push(String.fromCharCode.apply(String,I.slice(0,h))),y.join("")):String.fromCharCode.apply(String,I.slice(0,h))},D.write=function(R,O,T){for(var N,y,I=T,h=0;h<R.length;++h)(N=R.charCodeAt(h))<128?O[T++]=N:N<2048?(O[T++]=N>>6|192,O[T++]=63&N|128):55296==(64512&N)&&56320==(64512&(y=R.charCodeAt(h+1)))?(++h,O[T++]=(N=65536+((1023&N)<<10)+(1023&y))>>18|240,O[T++]=N>>12&63|128,O[T++]=N>>6&63|128,O[T++]=63&N|128):(O[T++]=N>>12|224,O[T++]=N>>6&63|128,O[T++]=63&N|128);return T-I}},{}],11:[function(le,re,j){var D=j,R=le(14),O=le(33);function T(y,I,h,m){if(I.resolvedType)if(I.resolvedType instanceof R){y("switch(d%s){",m);for(var v=I.resolvedType.values,k=Object.keys(v),B=0;B<k.length;++B)I.repeated&&v[k[B]]===I.typeDefault&&y("default:"),y("case%j:",k[B])("case %i:",v[k[B]])("m%s=%j",m,v[k[B]])("break");y("}")}else y('if(typeof d%s!=="object")',m)("throw TypeError(%j)",I.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",m,h,m);else{var w=!1;switch(I.type){case"double":case"float":y("m%s=Number(d%s)",m,m);break;case"uint32":case"fixed32":y("m%s=d%s>>>0",m,m);break;case"int32":case"sint32":case"sfixed32":y("m%s=d%s|0",m,m);break;case"uint64":w=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":y("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",m,m,w)('else if(typeof d%s==="string")',m)("m%s=parseInt(d%s,10)",m,m)('else if(typeof d%s==="number")',m)("m%s=d%s",m,m)('else if(typeof d%s==="object")',m)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",m,m,m,w?"true":"");break;case"bytes":y('if(typeof d%s==="string")',m)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",m,m,m)("else if(d%s.length)",m)("m%s=d%s",m,m);break;case"string":y("m%s=String(d%s)",m,m);break;case"bool":y("m%s=Boolean(d%s)",m,m)}}return y}function N(y,I,h,m){if(I.resolvedType)I.resolvedType instanceof R?y("d%s=o.enums===String?types[%i].values[m%s]:m%s",m,h,m,m):y("d%s=types[%i].toObject(m%s,o)",m,h,m);else{var v=!1;switch(I.type){case"double":case"float":y("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",m,m,m,m);break;case"uint64":v=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":y('if(typeof m%s==="number")',m)("d%s=o.longs===String?String(m%s):m%s",m,m,m)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",m,m,m,m,v?"true":"",m);break;case"bytes":y("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",m,m,m,m,m);break;default:y("d%s=m%s",m,m)}}return y}D.fromObject=function(y){var I=y.fieldsArray,h=O.codegen(["d"],y.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!I.length)return h("return new this.ctor");h("var m=new this.ctor");for(var m=0;m<I.length;++m){var v=I[m].resolve(),k=O.safeProp(v.name);v.map?(h("if(d%s){",k)('if(typeof d%s!=="object")',k)("throw TypeError(%j)",v.fullName+": object expected")("m%s={}",k)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",k),T(h,v,m,k+"[ks[i]]")("}")("}")):v.repeated?(h("if(d%s){",k)("if(!Array.isArray(d%s))",k)("throw TypeError(%j)",v.fullName+": array expected")("m%s=[]",k)("for(var i=0;i<d%s.length;++i){",k),T(h,v,m,k+"[i]")("}")("}")):(v.resolvedType instanceof R||h("if(d%s!=null){",k),T(h,v,m,k),v.resolvedType instanceof R||h("}"))}return h("return m")},D.toObject=function(y){var I=y.fieldsArray.slice().sort(O.compareFieldsById);if(!I.length)return O.codegen()("return {}");for(var h=O.codegen(["m","o"],y.name+"$toObject")("if(!o)")("o={}")("var d={}"),m=[],v=[],k=[],B=0;B<I.length;++B)I[B].partOf||(I[B].resolve().repeated?m:I[B].map?v:k).push(I[B]);if(m.length){for(h("if(o.arrays||o.defaults){"),B=0;B<m.length;++B)h("d%s=[]",O.safeProp(m[B].name));h("}")}if(v.length){for(h("if(o.objects||o.defaults){"),B=0;B<v.length;++B)h("d%s={}",O.safeProp(v[B].name));h("}")}if(k.length){for(h("if(o.defaults){"),B=0;B<k.length;++B){var w=k[B],E=O.safeProp(w.name);if(w.resolvedType instanceof R)h("d%s=o.enums===String?%j:%j",E,w.resolvedType.valuesById[w.typeDefault],w.typeDefault);else if(w.long)h("if(util.Long){")("var n=new util.Long(%i,%i,%j)",w.typeDefault.low,w.typeDefault.high,w.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",E)("}else")("d%s=o.longs===String?%j:%i",E,w.typeDefault.toString(),w.typeDefault.toNumber());else if(w.bytes){var U="["+Array.prototype.slice.call(w.typeDefault).join(",")+"]";h("if(o.bytes===String)d%s=%j",E,String.fromCharCode.apply(String,w.typeDefault))("else{")("d%s=%s",E,U)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",E,E)("}")}else h("d%s=%j",E,w.typeDefault)}h("}")}var P=!1;for(B=0;B<I.length;++B){var G=y._fieldsArray.indexOf(w=I[B]);E=O.safeProp(w.name),w.map?(P||(P=!0,h("var ks2")),h("if(m%s&&(ks2=Object.keys(m%s)).length){",E,E)("d%s={}",E)("for(var j=0;j<ks2.length;++j){"),N(h,w,G,E+"[ks2[j]]")("}")):w.repeated?(h("if(m%s&&m%s.length){",E,E)("d%s=[]",E)("for(var j=0;j<m%s.length;++j){",E),N(h,w,G,E+"[j]")("}")):(h("if(m%s!=null&&m.hasOwnProperty(%j)){",E,w.name),N(h,w,G,E),w.partOf&&h("if(o.oneofs)")("d%s=%j",O.safeProp(w.partOf.name),w.name)),h("}")}return h("return d")}},{14:14,33:33}],12:[function(le,re,j){re.exports=function(N){var y=O.codegen(["r","l"],N.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(N.fieldsArray.filter(function(B){return B.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");N.group&&y("if((t&7)===4)")("break"),y("switch(t>>>3){");for(var I=0;I<N.fieldsArray.length;++I){var h=N._fieldsArray[I].resolve(),m=h.resolvedType instanceof D?"int32":h.type,v="m"+O.safeProp(h.name);y("case %i:",h.id),h.map?(y("if(%s===util.emptyObject)",v)("%s={}",v)("var c2 = r.uint32()+r.pos"),R.defaults[h.keyType]!==undefined?y("k=%j",R.defaults[h.keyType]):y("k=null"),R.defaults[m]!==undefined?y("value=%j",R.defaults[m]):y("value=null"),y("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",h.keyType)("case 2:"),R.basic[m]===undefined?y("value=types[%i].decode(r,r.uint32())",I):y("value=r.%s()",m),y("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),y(R.long[h.keyType]!==undefined?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",v)):h.repeated?(y("if(!(%s&&%s.length))",v,v)("%s=[]",v),R.packed[m]!==undefined&&y("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",v,m)("}else"),R.basic[m]===undefined?y(h.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",v,I):y("%s.push(r.%s())",v,m)):R.basic[m]===undefined?y(h.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",v,I):y("%s=r.%s()",v,m),y("break")}for(y("default:")("r.skipType(t&7)")("break")("}")("}"),I=0;I<N._fieldsArray.length;++I){var k=N._fieldsArray[I];k.required&&y("if(!m.hasOwnProperty(%j))",k.name)("throw util.ProtocolError(%j,{instance:m})",T(k))}return y("return m")};var D=le(14),R=le(32),O=le(33);function T(N){return"missing required '"+N.name+"'"}},{14:14,32:32,33:33}],13:[function(le,re,j){re.exports=function(N){for(var y,I=O.codegen(["m","w"],N.name+"$encode")("if(!w)")("w=Writer.create()"),h=N.fieldsArray.slice().sort(O.compareFieldsById),m=0;m<h.length;++m){var v=h[m].resolve(),k=N._fieldsArray.indexOf(v),B=v.resolvedType instanceof D?"int32":v.type,w=R.basic[B];y="m"+O.safeProp(v.name),v.map?(I("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",y,v.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",y)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(v.id<<3|2)>>>0,8|R.mapKey[v.keyType],v.keyType),w===undefined?I("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",k,y):I(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|w,B,y),I("}")("}")):v.repeated?(I("if(%s!=null&&%s.length){",y,y),v.packed&&R.packed[B]!==undefined?I("w.uint32(%i).fork()",(v.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",y)("w.%s(%s[i])",B,y)("w.ldelim()"):(I("for(var i=0;i<%s.length;++i)",y),w===undefined?T(I,v,k,y+"[i]"):I("w.uint32(%i).%s(%s[i])",(v.id<<3|w)>>>0,B,y)),I("}")):(v.optional&&I("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",y,v.name),w===undefined?T(I,v,k,y):I("w.uint32(%i).%s(%s)",(v.id<<3|w)>>>0,B,y))}return I("return w")};var D=le(14),R=le(32),O=le(33);function T(N,y,I,h){return y.resolvedType.group?N("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",I,h,(y.id<<3|3)>>>0,(y.id<<3|4)>>>0):N("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",I,h,(y.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(le,re,j){re.exports=T;var D=le(22);((T.prototype=Object.create(D.prototype)).constructor=T).className="Enum";var R=le(21),O=le(33);function T(N,y,I,h,m){if(D.call(this,N,I),y&&"object"!=typeof y)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=h,this.comments=m||{},this.reserved=undefined,y)for(var v=Object.keys(y),k=0;k<v.length;++k)"number"==typeof y[v[k]]&&(this.valuesById[this.values[v[k]]=y[v[k]]]=v[k])}T.fromJSON=function(N,y){var I=new T(N,y.values,y.options,y.comment,y.comments);return I.reserved=y.reserved,I},T.prototype.toJSON=function(N){var y=!!N&&Boolean(N.keepComments);return O.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",y?this.comment:undefined,"comments",y?this.comments:undefined])},T.prototype.add=function(N,y,I){if(!O.isString(N))throw TypeError("name must be a string");if(!O.isInteger(y))throw TypeError("id must be an integer");if(this.values[N]!==undefined)throw Error("duplicate name '"+N+"' in "+this);if(this.isReservedId(y))throw Error("id "+y+" is reserved in "+this);if(this.isReservedName(N))throw Error("name '"+N+"' is reserved in "+this);if(this.valuesById[y]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+y+" in "+this);this.values[N]=y}else this.valuesById[this.values[N]=y]=N;return this.comments[N]=I||null,this},T.prototype.remove=function(N){if(!O.isString(N))throw TypeError("name must be a string");var y=this.values[N];if(null==y)throw Error("name '"+N+"' does not exist in "+this);return delete this.valuesById[y],delete this.values[N],delete this.comments[N],this},T.prototype.isReservedId=function(N){return R.isReservedId(this.reserved,N)},T.prototype.isReservedName=function(N){return R.isReservedName(this.reserved,N)}},{21:21,22:22,33:33}],15:[function(le,re,j){re.exports=I;var D=le(22);((I.prototype=Object.create(D.prototype)).constructor=I).className="Field";var R,O=le(14),T=le(32),N=le(33),y=/^required|optional|repeated$/;function I(h,m,v,k,B,w,E){if(N.isObject(k)?(E=B,w=k,k=B=undefined):N.isObject(B)&&(E=w,w=B,B=undefined),D.call(this,h,w),!N.isInteger(m)||m<0)throw TypeError("id must be a non-negative integer");if(!N.isString(v))throw TypeError("type must be a string");if(k!==undefined&&!y.test(k=k.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(B!==undefined&&!N.isString(B))throw TypeError("extend must be a string");this.rule=k&&"optional"!==k?k:undefined,this.type=v,this.id=m,this.extend=B||undefined,this.required="required"===k,this.optional=!this.required,this.repeated="repeated"===k,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!N.Long&&T.long[v]!==undefined,this.bytes="bytes"===v,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=E}I.fromJSON=function(h,m){return new I(h,m.id,m.type,m.rule,m.extend,m.options,m.comment)},Object.defineProperty(I.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),I.prototype.setOption=function(h,m,v){return"packed"===h&&(this._packed=null),D.prototype.setOption.call(this,h,m,v)},I.prototype.toJSON=function(h){var m=!!h&&Boolean(h.keepComments);return N.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",m?this.comment:undefined])},I.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=T.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof R?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof O&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof O)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=N.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var h;N.base64.test(this.typeDefault)?N.base64.decode(this.typeDefault,h=N.newBuffer(N.base64.length(this.typeDefault)),0):N.utf8.write(this.typeDefault,h=N.newBuffer(N.utf8.length(this.typeDefault)),0),this.typeDefault=h}return this.defaultValue=this.map?N.emptyObject:this.repeated?N.emptyArray:this.typeDefault,this.parent instanceof R&&(this.parent.ctor.prototype[this.name]=this.defaultValue),D.prototype.resolve.call(this)},I.d=function(h,m,v,k){return"function"==typeof m?m=N.decorateType(m).name:m&&"object"==typeof m&&(m=N.decorateEnum(m).name),function(B,w){N.decorateType(B.constructor).add(new I(w,h,m,v,{default:k}))}},I._configure=function(h){R=h}},{14:14,22:22,32:32,33:33}],16:[function(le,re,j){var D=re.exports=le(17);D.build="light",D.load=function(R,O,T){return"function"==typeof O?(T=O,O=new D.Root):O||(O=new D.Root),O.load(R,T)},D.loadSync=function(R,O){return O||(O=new D.Root),O.loadSync(R)},D.encoder=le(13),D.decoder=le(12),D.verifier=le(36),D.converter=le(11),D.ReflectionObject=le(22),D.Namespace=le(21),D.Root=le(26),D.Enum=le(14),D.Type=le(31),D.Field=le(15),D.OneOf=le(23),D.MapField=le(18),D.Service=le(30),D.Method=le(20),D.Message=le(19),D.wrappers=le(37),D.types=le(32),D.util=le(33),D.ReflectionObject._configure(D.Root),D.Namespace._configure(D.Type,D.Service,D.Enum),D.Root._configure(D.Type),D.Field._configure(D.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(le,re,j){var D=j;function R(){D.util._configure(),D.Writer._configure(D.BufferWriter),D.Reader._configure(D.BufferReader)}D.build="minimal",D.Writer=le(38),D.BufferWriter=le(39),D.Reader=le(24),D.BufferReader=le(25),D.util=le(35),D.rpc=le(28),D.roots=le(27),D.configure=R,R()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(le,re,j){re.exports=T;var D=le(15);((T.prototype=Object.create(D.prototype)).constructor=T).className="MapField";var R=le(32),O=le(33);function T(N,y,I,h,m,v){if(D.call(this,N,y,h,undefined,undefined,m,v),!O.isString(I))throw TypeError("keyType must be a string");this.keyType=I,this.resolvedKeyType=null,this.map=!0}T.fromJSON=function(N,y){return new T(N,y.id,y.keyType,y.type,y.options,y.comment)},T.prototype.toJSON=function(N){var y=!!N&&Boolean(N.keepComments);return O.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",y?this.comment:undefined])},T.prototype.resolve=function(){if(this.resolved)return this;if(R.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return D.prototype.resolve.call(this)},T.d=function(N,y,I){return"function"==typeof I?I=O.decorateType(I).name:I&&"object"==typeof I&&(I=O.decorateEnum(I).name),function(h,m){O.decorateType(h.constructor).add(new T(m,N,y,I))}}},{15:15,32:32,33:33}],19:[function(le,re,j){re.exports=R;var D=le(35);function R(O){if(O)for(var T=Object.keys(O),N=0;N<T.length;++N)this[T[N]]=O[T[N]]}R.create=function(O){return this.$type.create(O)},R.encode=function(O,T){return this.$type.encode(O,T)},R.encodeDelimited=function(O,T){return this.$type.encodeDelimited(O,T)},R.decode=function(O){return this.$type.decode(O)},R.decodeDelimited=function(O){return this.$type.decodeDelimited(O)},R.verify=function(O){return this.$type.verify(O)},R.fromObject=function(O){return this.$type.fromObject(O)},R.toObject=function(O,T){return this.$type.toObject(O,T)},R.prototype.toJSON=function(){return this.$type.toObject(this,D.toJSONOptions)}},{35:35}],20:[function(le,re,j){re.exports=O;var D=le(22);((O.prototype=Object.create(D.prototype)).constructor=O).className="Method";var R=le(33);function O(T,N,y,I,h,m,v,k){if(R.isObject(h)?(v=h,h=m=undefined):R.isObject(m)&&(v=m,m=undefined),N!==undefined&&!R.isString(N))throw TypeError("type must be a string");if(!R.isString(y))throw TypeError("requestType must be a string");if(!R.isString(I))throw TypeError("responseType must be a string");D.call(this,T,v),this.type=N||"rpc",this.requestType=y,this.requestStream=!!h||undefined,this.responseType=I,this.responseStream=!!m||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=k}O.fromJSON=function(T,N){return new O(T,N.type,N.requestType,N.responseType,N.requestStream,N.responseStream,N.options,N.comment)},O.prototype.toJSON=function(T){var N=!!T&&Boolean(T.keepComments);return R.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",N?this.comment:undefined])},O.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),D.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(le,re,j){re.exports=h;var D=le(22);((h.prototype=Object.create(D.prototype)).constructor=h).className="Namespace";var R,O,T,N=le(15),y=le(33);function I(v,k){if(!v||!v.length)return undefined;for(var B={},w=0;w<v.length;++w)B[v[w].name]=v[w].toJSON(k);return B}function h(v,k){D.call(this,v,k),this.nested=undefined,this._nestedArray=null}function m(v){return v._nestedArray=null,v}h.fromJSON=function(v,k){return new h(v,k.options).addJSON(k.nested)},h.arrayToJSON=I,h.isReservedId=function(v,k){if(v)for(var B=0;B<v.length;++B)if("string"!=typeof v[B]&&v[B][0]<=k&&v[B][1]>k)return!0;return!1},h.isReservedName=function(v,k){if(v)for(var B=0;B<v.length;++B)if(v[B]===k)return!0;return!1},Object.defineProperty(h.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=y.toArray(this.nested))}}),h.prototype.toJSON=function(v){return y.toObject(["options",this.options,"nested",I(this.nestedArray,v)])},h.prototype.addJSON=function(v){if(v)for(var k,B=Object.keys(v),w=0;w<B.length;++w)this.add(((k=v[B[w]]).fields!==undefined?R.fromJSON:k.values!==undefined?T.fromJSON:k.methods!==undefined?O.fromJSON:k.id!==undefined?N.fromJSON:h.fromJSON)(B[w],k));return this},h.prototype.get=function(v){return this.nested&&this.nested[v]||null},h.prototype.getEnum=function(v){if(this.nested&&this.nested[v]instanceof T)return this.nested[v].values;throw Error("no such enum: "+v)},h.prototype.add=function(v){if(!(v instanceof N&&v.extend!==undefined||v instanceof R||v instanceof T||v instanceof O||v instanceof h))throw TypeError("object must be a valid nested object");if(this.nested){var k=this.get(v.name);if(k){if(!(k instanceof h&&v instanceof h)||k instanceof R||k instanceof O)throw Error("duplicate name '"+v.name+"' in "+this);for(var B=k.nestedArray,w=0;w<B.length;++w)v.add(B[w]);this.remove(k),this.nested||(this.nested={}),v.setOptions(k.options,!0)}}else this.nested={};return this.nested[v.name]=v,v.onAdd(this),m(this)},h.prototype.remove=function(v){if(!(v instanceof D))throw TypeError("object must be a ReflectionObject");if(v.parent!==this)throw Error(v+" is not a member of "+this);return delete this.nested[v.name],Object.keys(this.nested).length||(this.nested=undefined),v.onRemove(this),m(this)},h.prototype.define=function(v,k){if(y.isString(v))v=v.split(".");else if(!Array.isArray(v))throw TypeError("illegal path");if(v&&v.length&&""===v[0])throw Error("path must be relative");for(var B=this;v.length>0;){var w=v.shift();if(B.nested&&B.nested[w]){if(!((B=B.nested[w])instanceof h))throw Error("path conflicts with non-namespace objects")}else B.add(B=new h(w))}return k&&B.addJSON(k),B},h.prototype.resolveAll=function(){for(var v=this.nestedArray,k=0;k<v.length;)v[k]instanceof h?v[k++].resolveAll():v[k++].resolve();return this.resolve()},h.prototype.lookup=function(v,k,B){if("boolean"==typeof k?(B=k,k=undefined):k&&!Array.isArray(k)&&(k=[k]),y.isString(v)&&v.length){if("."===v)return this.root;v=v.split(".")}else if(!v.length)return this;if(""===v[0])return this.root.lookup(v.slice(1),k);var w=this.get(v[0]);if(w){if(1===v.length){if(!k||k.indexOf(w.constructor)>-1)return w}else if(w instanceof h&&(w=w.lookup(v.slice(1),k,!0)))return w}else for(var E=0;E<this.nestedArray.length;++E)if(this._nestedArray[E]instanceof h&&(w=this._nestedArray[E].lookup(v,k,!0)))return w;return null===this.parent||B?null:this.parent.lookup(v,k)},h.prototype.lookupType=function(v){var k=this.lookup(v,[R]);if(!k)throw Error("no such type: "+v);return k},h.prototype.lookupEnum=function(v){var k=this.lookup(v,[T]);if(!k)throw Error("no such Enum '"+v+"' in "+this);return k},h.prototype.lookupTypeOrEnum=function(v){var k=this.lookup(v,[R,T]);if(!k)throw Error("no such Type or Enum '"+v+"' in "+this);return k},h.prototype.lookupService=function(v){var k=this.lookup(v,[O]);if(!k)throw Error("no such Service '"+v+"' in "+this);return k},h._configure=function(v,k,B){R=v,O=k,T=B}},{15:15,22:22,33:33}],22:[function(le,re,j){re.exports=O,O.className="ReflectionObject";var D,R=le(33);function O(T,N){if(!R.isString(T))throw TypeError("name must be a string");if(N&&!R.isObject(N))throw TypeError("options must be an object");this.options=N,this.parsedOptions=null,this.name=T,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(O.prototype,{root:{get:function(){for(var T=this;null!==T.parent;)T=T.parent;return T}},fullName:{get:function(){for(var T=[this.name],N=this.parent;N;)T.unshift(N.name),N=N.parent;return T.join(".")}}}),O.prototype.toJSON=function(){throw Error()},O.prototype.onAdd=function(T){this.parent&&this.parent!==T&&this.parent.remove(this),this.parent=T,this.resolved=!1;var N=T.root;N instanceof D&&N._handleAdd(this)},O.prototype.onRemove=function(T){var N=T.root;N instanceof D&&N._handleRemove(this),this.parent=null,this.resolved=!1},O.prototype.resolve=function(){return this.resolved||this.root instanceof D&&(this.resolved=!0),this},O.prototype.getOption=function(T){return this.options?this.options[T]:undefined},O.prototype.setOption=function(T,N,y){return y&&this.options&&this.options[T]!==undefined||((this.options||(this.options={}))[T]=N),this},O.prototype.setParsedOption=function(T,N,y){this.parsedOptions||(this.parsedOptions=[]);var I=this.parsedOptions;if(y){var h=I.find(function(k){return Object.prototype.hasOwnProperty.call(k,T)});h?R.setProperty(h[T],y,N):((h={})[T]=R.setProperty({},y,N),I.push(h))}else{var v={};v[T]=N,I.push(v)}return this},O.prototype.setOptions=function(T,N){if(T)for(var y=Object.keys(T),I=0;I<y.length;++I)this.setOption(y[I],T[y[I]],N);return this},O.prototype.toString=function(){var T=this.constructor.className,N=this.fullName;return N.length?T+" "+N:T},O._configure=function(T){D=T}},{33:33}],23:[function(le,re,j){re.exports=T;var D=le(22);((T.prototype=Object.create(D.prototype)).constructor=T).className="OneOf";var R=le(15),O=le(33);function T(y,I,h,m){if(Array.isArray(I)||(h=I,I=undefined),D.call(this,y,h),I!==undefined&&!Array.isArray(I))throw TypeError("fieldNames must be an Array");this.oneof=I||[],this.fieldsArray=[],this.comment=m}function N(y){if(y.parent)for(var I=0;I<y.fieldsArray.length;++I)y.fieldsArray[I].parent||y.parent.add(y.fieldsArray[I])}T.fromJSON=function(y,I){return new T(y,I.oneof,I.options,I.comment)},T.prototype.toJSON=function(y){var I=!!y&&Boolean(y.keepComments);return O.toObject(["options",this.options,"oneof",this.oneof,"comment",I?this.comment:undefined])},T.prototype.add=function(y){if(!(y instanceof R))throw TypeError("field must be a Field");return y.parent&&y.parent!==this.parent&&y.parent.remove(y),this.oneof.push(y.name),this.fieldsArray.push(y),y.partOf=this,N(this),this},T.prototype.remove=function(y){if(!(y instanceof R))throw TypeError("field must be a Field");var I=this.fieldsArray.indexOf(y);if(I<0)throw Error(y+" is not a member of "+this);return this.fieldsArray.splice(I,1),(I=this.oneof.indexOf(y.name))>-1&&this.oneof.splice(I,1),y.partOf=null,this},T.prototype.onAdd=function(y){D.prototype.onAdd.call(this,y);for(var I=0;I<this.oneof.length;++I){var h=y.get(this.oneof[I]);h&&!h.partOf&&(h.partOf=this,this.fieldsArray.push(h))}N(this)},T.prototype.onRemove=function(y){for(var I,h=0;h<this.fieldsArray.length;++h)(I=this.fieldsArray[h]).parent&&I.parent.remove(I);D.prototype.onRemove.call(this,y)},T.d=function(){for(var y=new Array(arguments.length),I=0;I<arguments.length;)y[I]=arguments[I++];return function(h,m){O.decorateType(h.constructor).add(new T(m,y)),Object.defineProperty(h,m,{get:O.oneOfGetter(y),set:O.oneOfSetter(y)})}}},{15:15,22:22,33:33}],24:[function(le,re,j){re.exports=y;var D,R=le(35),O=R.LongBits,T=R.utf8;function N(w,E){return RangeError("index out of range: "+w.pos+" + "+(E||1)+" > "+w.len)}function y(w){this.buf=w,this.pos=0,this.len=w.length}var I,h="undefined"!=typeof Uint8Array?function(w){if(w instanceof Uint8Array||Array.isArray(w))return new y(w);throw Error("illegal buffer")}:function(w){if(Array.isArray(w))return new y(w);throw Error("illegal buffer")},m=function(){return R.Buffer?function(w){return(y.create=function(E){return R.Buffer.isBuffer(E)?new D(E):h(E)})(w)}:h};function v(){var w=new O(0,0),E=0;if(!(this.len-this.pos>4)){for(;E<3;++E){if(this.pos>=this.len)throw N(this);if(w.lo=(w.lo|(127&this.buf[this.pos])<<7*E)>>>0,this.buf[this.pos++]<128)return w}return w.lo=(w.lo|(127&this.buf[this.pos++])<<7*E)>>>0,w}for(;E<4;++E)if(w.lo=(w.lo|(127&this.buf[this.pos])<<7*E)>>>0,this.buf[this.pos++]<128)return w;if(w.lo=(w.lo|(127&this.buf[this.pos])<<28)>>>0,w.hi=(w.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return w;if(E=0,this.len-this.pos>4){for(;E<5;++E)if(w.hi=(w.hi|(127&this.buf[this.pos])<<7*E+3)>>>0,this.buf[this.pos++]<128)return w}else for(;E<5;++E){if(this.pos>=this.len)throw N(this);if(w.hi=(w.hi|(127&this.buf[this.pos])<<7*E+3)>>>0,this.buf[this.pos++]<128)return w}throw Error("invalid varint encoding")}function k(w,E){return(w[E-4]|w[E-3]<<8|w[E-2]<<16|w[E-1]<<24)>>>0}function B(){if(this.pos+8>this.len)throw N(this,8);return new O(k(this.buf,this.pos+=4),k(this.buf,this.pos+=4))}y.create=m(),y.prototype._slice=R.Array.prototype.subarray||R.Array.prototype.slice,y.prototype.uint32=(I=4294967295,function(){if(I=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(I=(I|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(I=(I|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(I=(I|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(I=(I|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return I;if((this.pos+=5)>this.len)throw this.pos=this.len,N(this,10);return I}),y.prototype.int32=function(){return 0|this.uint32()},y.prototype.sint32=function(){var w=this.uint32();return w>>>1^-(1&w)|0},y.prototype.bool=function(){return 0!==this.uint32()},y.prototype.fixed32=function(){if(this.pos+4>this.len)throw N(this,4);return k(this.buf,this.pos+=4)},y.prototype.sfixed32=function(){if(this.pos+4>this.len)throw N(this,4);return 0|k(this.buf,this.pos+=4)},y.prototype.float=function(){if(this.pos+4>this.len)throw N(this,4);var w=R.float.readFloatLE(this.buf,this.pos);return this.pos+=4,w},y.prototype.double=function(){if(this.pos+8>this.len)throw N(this,4);var w=R.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,w},y.prototype.bytes=function(){var w=this.uint32(),E=this.pos,U=this.pos+w;if(U>this.len)throw N(this,w);return this.pos+=w,Array.isArray(this.buf)?this.buf.slice(E,U):E===U?new this.buf.constructor(0):this._slice.call(this.buf,E,U)},y.prototype.string=function(){var w=this.bytes();return T.read(w,0,w.length)},y.prototype.skip=function(w){if("number"==typeof w){if(this.pos+w>this.len)throw N(this,w);this.pos+=w}else do{if(this.pos>=this.len)throw N(this)}while(128&this.buf[this.pos++]);return this},y.prototype.skipType=function(w){switch(w){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(w=7&this.uint32());)this.skipType(w);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+w+" at offset "+this.pos)}return this},y._configure=function(w){D=w,y.create=m(),D._configure();var E=R.Long?"toLong":"toNumber";R.merge(y.prototype,{int64:function(){return v.call(this)[E](!1)},uint64:function(){return v.call(this)[E](!0)},sint64:function(){return v.call(this).zzDecode()[E](!1)},fixed64:function(){return B.call(this)[E](!0)},sfixed64:function(){return B.call(this)[E](!1)}})}},{35:35}],25:[function(le,re,j){re.exports=O;var D=le(24);(O.prototype=Object.create(D.prototype)).constructor=O;var R=le(35);function O(T){D.call(this,T)}O._configure=function(){R.Buffer&&(O.prototype._slice=R.Buffer.prototype.slice)},O.prototype.string=function(){var T=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+T,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+T,this.len))},O._configure()},{24:24,35:35}],26:[function(le,re,j){re.exports=m;var D=le(21);((m.prototype=Object.create(D.prototype)).constructor=m).className="Root";var R,O,T,N=le(15),y=le(14),I=le(23),h=le(33);function m(w){D.call(this,"",w),this.deferred=[],this.files=[]}function v(){}m.fromJSON=function(w,E){return E||(E=new m),w.options&&E.setOptions(w.options),E.addJSON(w.nested)},m.prototype.resolvePath=h.path.resolve,m.prototype.fetch=h.fetch,m.prototype.load=function w(E,U,P){"function"==typeof U&&(P=U,U=undefined);var G=this;if(!P)return h.asPromise(w,G,E,U);var V=P===v;function ee(H,_){if(P){var u=P;if(P=null,V)throw H;u(H,_)}}function se(H){var _=H.lastIndexOf("google/protobuf/");if(_>-1){var u=H.substring(_);if(u in T)return u}return null}function te(H,_){try{if(h.isString(_)&&"{"===_.charAt(0)&&(_=JSON.parse(_)),h.isString(_)){O.filename=H;var u,q=O(_,G,U),g=0;if(q.imports)for(;g<q.imports.length;++g)(u=se(q.imports[g])||G.resolvePath(H,q.imports[g]))&&oe(u);if(q.weakImports)for(g=0;g<q.weakImports.length;++g)(u=se(q.weakImports[g])||G.resolvePath(H,q.weakImports[g]))&&oe(u,!0)}else G.setOptions(_.options).addJSON(_.nested)}catch(C){ee(C)}V||$||ee(null,G)}function oe(H,_){if(!(G.files.indexOf(H)>-1))if(G.files.push(H),H in T)V?te(H,T[H]):(++$,setTimeout(function(){--$,te(H,T[H])}));else if(V){var u;try{u=h.fs.readFileSync(H).toString("utf8")}catch(q){return void(_||ee(q))}te(H,u)}else++$,G.fetch(H,function(q,g){--$,P&&(q?_?$||ee(null,G):ee(q):te(H,g))})}var $=0;h.isString(E)&&(E=[E]);for(var b,l=0;l<E.length;++l)(b=G.resolvePath("",E[l]))&&oe(b);return V?G:($||ee(null,G),undefined)},m.prototype.loadSync=function(w,E){if(!h.isNode)throw Error("not supported");return this.load(w,E,v)},m.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(w){return"'extend "+w.extend+"' in "+w.parent.fullName}).join(", "));return D.prototype.resolveAll.call(this)};var k=/^[A-Z]/;function B(w,E){var U=E.parent.lookup(E.extend);if(U){var P=new N(E.fullName,E.id,E.type,E.rule,undefined,E.options);return P.declaringField=E,E.extensionField=P,U.add(P),!0}return!1}m.prototype._handleAdd=function(w){if(w instanceof N)w.extend===undefined||w.extensionField||B(0,w)||this.deferred.push(w);else if(w instanceof y)k.test(w.name)&&(w.parent[w.name]=w.values);else if(!(w instanceof I)){if(w instanceof R)for(var E=0;E<this.deferred.length;)B(0,this.deferred[E])?this.deferred.splice(E,1):++E;for(var U=0;U<w.nestedArray.length;++U)this._handleAdd(w._nestedArray[U]);k.test(w.name)&&(w.parent[w.name]=w)}},m.prototype._handleRemove=function(w){if(w instanceof N){if(w.extend!==undefined)if(w.extensionField)w.extensionField.parent.remove(w.extensionField),w.extensionField=null;else{var E=this.deferred.indexOf(w);E>-1&&this.deferred.splice(E,1)}}else if(w instanceof y)k.test(w.name)&&delete w.parent[w.name];else if(w instanceof D){for(var U=0;U<w.nestedArray.length;++U)this._handleRemove(w._nestedArray[U]);k.test(w.name)&&delete w.parent[w.name]}},m._configure=function(w,E,U){R=w,O=E,T=U}},{14:14,15:15,21:21,23:23,33:33}],27:[function(le,re,j){re.exports={}},{}],28:[function(le,re,j){j.Service=le(29)},{29:29}],29:[function(le,re,j){re.exports=R;var D=le(35);function R(O,T,N){if("function"!=typeof O)throw TypeError("rpcImpl must be a function");D.EventEmitter.call(this),this.rpcImpl=O,this.requestDelimited=Boolean(T),this.responseDelimited=Boolean(N)}(R.prototype=Object.create(D.EventEmitter.prototype)).constructor=R,R.prototype.rpcCall=function O(T,N,y,I,h){if(!I)throw TypeError("request must be specified");var m=this;if(!h)return D.asPromise(O,m,T,N,y,I);if(!m.rpcImpl)return setTimeout(function(){h(Error("already ended"))},0),undefined;try{return m.rpcImpl(T,N[m.requestDelimited?"encodeDelimited":"encode"](I).finish(),function(v,k){if(v)return m.emit("error",v,T),h(v);if(null===k)return m.end(!0),undefined;if(!(k instanceof y))try{k=y[m.responseDelimited?"decodeDelimited":"decode"](k)}catch(B){return m.emit("error",B,T),h(B)}return m.emit("data",k,T),h(null,k)})}catch(v){return m.emit("error",v,T),setTimeout(function(){h(v)},0),undefined}},R.prototype.end=function(O){return this.rpcImpl&&(O||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(le,re,j){re.exports=N;var D=le(21);((N.prototype=Object.create(D.prototype)).constructor=N).className="Service";var R=le(20),O=le(33),T=le(28);function N(I,h){D.call(this,I,h),this.methods={},this._methodsArray=null}function y(I){return I._methodsArray=null,I}N.fromJSON=function(I,h){var m=new N(I,h.options);if(h.methods)for(var v=Object.keys(h.methods),k=0;k<v.length;++k)m.add(R.fromJSON(v[k],h.methods[v[k]]));return h.nested&&m.addJSON(h.nested),m.comment=h.comment,m},N.prototype.toJSON=function(I){var h=D.prototype.toJSON.call(this,I),m=!!I&&Boolean(I.keepComments);return O.toObject(["options",h&&h.options||undefined,"methods",D.arrayToJSON(this.methodsArray,I)||{},"nested",h&&h.nested||undefined,"comment",m?this.comment:undefined])},Object.defineProperty(N.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=O.toArray(this.methods))}}),N.prototype.get=function(I){return this.methods[I]||D.prototype.get.call(this,I)},N.prototype.resolveAll=function(){for(var I=this.methodsArray,h=0;h<I.length;++h)I[h].resolve();return D.prototype.resolve.call(this)},N.prototype.add=function(I){if(this.get(I.name))throw Error("duplicate name '"+I.name+"' in "+this);return I instanceof R?(this.methods[I.name]=I,I.parent=this,y(this)):D.prototype.add.call(this,I)},N.prototype.remove=function(I){if(I instanceof R){if(this.methods[I.name]!==I)throw Error(I+" is not a member of "+this);return delete this.methods[I.name],I.parent=null,y(this)}return D.prototype.remove.call(this,I)},N.prototype.create=function(I,h,m){for(var v,k=new T.Service(I,h,m),B=0;B<this.methodsArray.length;++B){var w=O.lcFirst((v=this._methodsArray[B]).resolve().name).replace(/[^$\w_]/g,"");k[w]=O.codegen(["r","c"],O.isReserved(w)?w+"_":w)("return this.rpcCall(m,q,s,r,c)")({m:v,q:v.resolvedRequestType.ctor,s:v.resolvedResponseType.ctor})}return k}},{20:20,21:21,28:28,33:33}],31:[function(le,re,j){re.exports=P;var D=le(21);((P.prototype=Object.create(D.prototype)).constructor=P).className="Type";var R=le(14),O=le(23),T=le(15),N=le(18),y=le(30),I=le(19),h=le(24),m=le(38),v=le(33),k=le(13),B=le(12),w=le(36),E=le(11),U=le(37);function P(V,ee){D.call(this,V,ee),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function G(V){return V._fieldsById=V._fieldsArray=V._oneofsArray=null,delete V.encode,delete V.decode,delete V.verify,V}Object.defineProperties(P.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var V=Object.keys(this.fields),ee=0;ee<V.length;++ee){var se=this.fields[V[ee]],te=se.id;if(this._fieldsById[te])throw Error("duplicate id "+te+" in "+this);this._fieldsById[te]=se}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=v.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=v.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=P.generateConstructor(this)())},set:function(V){var ee=V.prototype;ee instanceof I||((V.prototype=new I).constructor=V,v.merge(V.prototype,ee)),V.$type=V.prototype.$type=this,v.merge(V,I,!0),this._ctor=V;for(var se=0;se<this.fieldsArray.length;++se)this._fieldsArray[se].resolve();var te={};for(se=0;se<this.oneofsArray.length;++se)te[this._oneofsArray[se].resolve().name]={get:v.oneOfGetter(this._oneofsArray[se].oneof),set:v.oneOfSetter(this._oneofsArray[se].oneof)};se&&Object.defineProperties(V.prototype,te)}}}),P.generateConstructor=function(V){for(var ee,se=v.codegen(["p"],V.name),te=0;te<V.fieldsArray.length;++te)(ee=V._fieldsArray[te]).map?se("this%s={}",v.safeProp(ee.name)):ee.repeated&&se("this%s=[]",v.safeProp(ee.name));return se("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},P.fromJSON=function(V,ee){var se=new P(V,ee.options);se.extensions=ee.extensions,se.reserved=ee.reserved;for(var te=Object.keys(ee.fields),oe=0;oe<te.length;++oe)se.add((void 0!==ee.fields[te[oe]].keyType?N.fromJSON:T.fromJSON)(te[oe],ee.fields[te[oe]]));if(ee.oneofs)for(te=Object.keys(ee.oneofs),oe=0;oe<te.length;++oe)se.add(O.fromJSON(te[oe],ee.oneofs[te[oe]]));if(ee.nested)for(te=Object.keys(ee.nested),oe=0;oe<te.length;++oe){var $=ee.nested[te[oe]];se.add(($.id!==undefined?T.fromJSON:$.fields!==undefined?P.fromJSON:$.values!==undefined?R.fromJSON:$.methods!==undefined?y.fromJSON:D.fromJSON)(te[oe],$))}return ee.extensions&&ee.extensions.length&&(se.extensions=ee.extensions),ee.reserved&&ee.reserved.length&&(se.reserved=ee.reserved),ee.group&&(se.group=!0),ee.comment&&(se.comment=ee.comment),se},P.prototype.toJSON=function(V){var ee=D.prototype.toJSON.call(this,V),se=!!V&&Boolean(V.keepComments);return v.toObject(["options",ee&&ee.options||undefined,"oneofs",D.arrayToJSON(this.oneofsArray,V),"fields",D.arrayToJSON(this.fieldsArray.filter(function(te){return!te.declaringField}),V)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",ee&&ee.nested||undefined,"comment",se?this.comment:undefined])},P.prototype.resolveAll=function(){for(var V=this.fieldsArray,ee=0;ee<V.length;)V[ee++].resolve();var se=this.oneofsArray;for(ee=0;ee<se.length;)se[ee++].resolve();return D.prototype.resolveAll.call(this)},P.prototype.get=function(V){return this.fields[V]||this.oneofs&&this.oneofs[V]||this.nested&&this.nested[V]||null},P.prototype.add=function(V){if(this.get(V.name))throw Error("duplicate name '"+V.name+"' in "+this);if(V instanceof T&&V.extend===undefined){if(this._fieldsById?this._fieldsById[V.id]:this.fieldsById[V.id])throw Error("duplicate id "+V.id+" in "+this);if(this.isReservedId(V.id))throw Error("id "+V.id+" is reserved in "+this);if(this.isReservedName(V.name))throw Error("name '"+V.name+"' is reserved in "+this);return V.parent&&V.parent.remove(V),this.fields[V.name]=V,V.message=this,V.onAdd(this),G(this)}return V instanceof O?(this.oneofs||(this.oneofs={}),this.oneofs[V.name]=V,V.onAdd(this),G(this)):D.prototype.add.call(this,V)},P.prototype.remove=function(V){if(V instanceof T&&V.extend===undefined){if(!this.fields||this.fields[V.name]!==V)throw Error(V+" is not a member of "+this);return delete this.fields[V.name],V.parent=null,V.onRemove(this),G(this)}if(V instanceof O){if(!this.oneofs||this.oneofs[V.name]!==V)throw Error(V+" is not a member of "+this);return delete this.oneofs[V.name],V.parent=null,V.onRemove(this),G(this)}return D.prototype.remove.call(this,V)},P.prototype.isReservedId=function(V){return D.isReservedId(this.reserved,V)},P.prototype.isReservedName=function(V){return D.isReservedName(this.reserved,V)},P.prototype.create=function(V){return new this.ctor(V)},P.prototype.setup=function(){for(var V=this.fullName,ee=[],se=0;se<this.fieldsArray.length;++se)ee.push(this._fieldsArray[se].resolve().resolvedType);this.encode=k(this)({Writer:m,types:ee,util:v}),this.decode=B(this)({Reader:h,types:ee,util:v}),this.verify=w(this)({types:ee,util:v}),this.fromObject=E.fromObject(this)({types:ee,util:v}),this.toObject=E.toObject(this)({types:ee,util:v});var te=U[V];if(te){var oe=Object.create(this);oe.fromObject=this.fromObject,this.fromObject=te.fromObject.bind(oe),oe.toObject=this.toObject,this.toObject=te.toObject.bind(oe)}return this},P.prototype.encode=function(V,ee){return this.setup().encode(V,ee)},P.prototype.encodeDelimited=function(V,ee){return this.encode(V,ee&&ee.len?ee.fork():ee).ldelim()},P.prototype.decode=function(V,ee){return this.setup().decode(V,ee)},P.prototype.decodeDelimited=function(V){return V instanceof h||(V=h.create(V)),this.decode(V,V.uint32())},P.prototype.verify=function(V){return this.setup().verify(V)},P.prototype.fromObject=function(V){return this.setup().fromObject(V)},P.prototype.toObject=function(V,ee){return this.setup().toObject(V,ee)},P.d=function(V){return function(ee){v.decorateType(ee,V)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(le,re,j){var D=j,R=le(33),O=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function T(N,y){var I=0,h={};for(y|=0;I<N.length;)h[O[I+y]]=N[I++];return h}D.basic=T([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),D.defaults=T([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",R.emptyArray,null]),D.long=T([0,0,0,1,1],7),D.mapKey=T([0,0,0,5,5,0,0,0,1,1,0,2],2),D.packed=T([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(le,re,j){var D,R,O=re.exports=le(35),T=le(27);O.codegen=le(3),O.fetch=le(5),O.path=le(8),O.fs=O.inquire("fs"),O.toArray=function(m){if(m){for(var v=Object.keys(m),k=new Array(v.length),B=0;B<v.length;)k[B]=m[v[B++]];return k}return[]},O.toObject=function(m){for(var v={},k=0;k<m.length;){var B=m[k++],w=m[k++];w!==undefined&&(v[B]=w)}return v};var N=/\\/g,y=/"/g;O.isReserved=function(m){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(m)},O.safeProp=function(m){return!/^[$\w_]+$/.test(m)||O.isReserved(m)?'["'+m.replace(N,"\\\\").replace(y,'\\"')+'"]':"."+m},O.ucFirst=function(m){return m.charAt(0).toUpperCase()+m.substring(1)};var I=/_([a-z])/g;O.camelCase=function(m){return m.substring(0,1)+m.substring(1).replace(I,function(v,k){return k.toUpperCase()})},O.compareFieldsById=function(m,v){return m.id-v.id},O.decorateType=function(m,v){if(m.$type)return v&&m.$type.name!==v&&(O.decorateRoot.remove(m.$type),m.$type.name=v,O.decorateRoot.add(m.$type)),m.$type;D||(D=le(31));var k=new D(v||m.name);return O.decorateRoot.add(k),k.ctor=m,Object.defineProperty(m,"$type",{value:k,enumerable:!1}),Object.defineProperty(m.prototype,"$type",{value:k,enumerable:!1}),k};var h=0;O.decorateEnum=function(m){if(m.$type)return m.$type;R||(R=le(14));var v=new R("Enum"+h++,m);return O.decorateRoot.add(v),Object.defineProperty(m,"$type",{value:v,enumerable:!1}),v},O.setProperty=function(m,v,k){if("object"!=typeof m)throw TypeError("dst must be an object");if(!v)throw TypeError("path must be specified");return function B(w,E,U){var P=E.shift();if(E.length>0)w[P]=B(w[P]||{},E,U);else{var G=w[P];G&&(U=[].concat(G).concat(U)),w[P]=U}return w}(m,v=v.split("."),k)},Object.defineProperty(O,"decorateRoot",{get:function(){return T.decorated||(T.decorated=new(le(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(le,re,j){re.exports=R;var D=le(35);function R(y,I){this.lo=y>>>0,this.hi=I>>>0}var O=R.zero=new R(0,0);O.toNumber=function(){return 0},O.zzEncode=O.zzDecode=function(){return this},O.length=function(){return 1};var T=R.zeroHash="\0\0\0\0\0\0\0\0";R.fromNumber=function(y){if(0===y)return O;var I=y<0;I&&(y=-y);var h=y>>>0,m=(y-h)/4294967296>>>0;return I&&(m=~m>>>0,h=~h>>>0,++h>4294967295&&(h=0,++m>4294967295&&(m=0))),new R(h,m)},R.from=function(y){if("number"==typeof y)return R.fromNumber(y);if(D.isString(y)){if(!D.Long)return R.fromNumber(parseInt(y,10));y=D.Long.fromString(y)}return y.low||y.high?new R(y.low>>>0,y.high>>>0):O},R.prototype.toNumber=function(y){if(!y&&this.hi>>>31){var I=1+~this.lo>>>0,h=~this.hi>>>0;return I||(h=h+1>>>0),-(I+4294967296*h)}return this.lo+4294967296*this.hi},R.prototype.toLong=function(y){return D.Long?new D.Long(0|this.lo,0|this.hi,Boolean(y)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(y)}};var N=String.prototype.charCodeAt;R.fromHash=function(y){return y===T?O:new R((N.call(y,0)|N.call(y,1)<<8|N.call(y,2)<<16|N.call(y,3)<<24)>>>0,(N.call(y,4)|N.call(y,5)<<8|N.call(y,6)<<16|N.call(y,7)<<24)>>>0)},R.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},R.prototype.zzEncode=function(){var y=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^y)>>>0,this.lo=(this.lo<<1^y)>>>0,this},R.prototype.zzDecode=function(){var y=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^y)>>>0,this.hi=(this.hi>>>1^y)>>>0,this},R.prototype.length=function(){var y=this.lo,I=(this.lo>>>28|this.hi<<4)>>>0,h=this.hi>>>24;return 0===h?0===I?y<16384?y<128?1:2:y<2097152?3:4:I<16384?I<128?5:6:I<2097152?7:8:h<128?9:10}},{35:35}],35:[function(le,re,j){var D=j;function R(T,N,y){for(var I=Object.keys(N),h=0;h<I.length;++h)T[I[h]]!==undefined&&y||(T[I[h]]=N[I[h]]);return T}function O(T){function N(y,I){if(!(this instanceof N))return new N(y,I);Object.defineProperty(this,"message",{get:function(){return y}}),Error.captureStackTrace?Error.captureStackTrace(this,N):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),I&&R(this,I)}return(N.prototype=Object.create(Error.prototype)).constructor=N,Object.defineProperty(N.prototype,"name",{get:function(){return T}}),N.prototype.toString=function(){return this.name+": "+this.message},N}D.asPromise=le(1),D.base64=le(2),D.EventEmitter=le(4),D.float=le(6),D.inquire=le(7),D.utf8=le(10),D.pool=le(9),D.LongBits=le(34),D.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),D.global=D.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,D.emptyArray=Object.freeze?Object.freeze([]):[],D.emptyObject=Object.freeze?Object.freeze({}):{},D.isInteger=Number.isInteger||function(T){return"number"==typeof T&&isFinite(T)&&Math.floor(T)===T},D.isString=function(T){return"string"==typeof T||T instanceof String},D.isObject=function(T){return T&&"object"==typeof T},D.isset=D.isSet=function(T,N){var y=T[N];return!(null==y||!T.hasOwnProperty(N))&&("object"!=typeof y||(Array.isArray(y)?y.length:Object.keys(y).length)>0)},D.Buffer=function(){try{var T=D.inquire("buffer").Buffer;return T.prototype.utf8Write?T:null}catch(N){return null}}(),D._Buffer_from=null,D._Buffer_allocUnsafe=null,D.newBuffer=function(T){return"number"==typeof T?D.Buffer?D._Buffer_allocUnsafe(T):new D.Array(T):D.Buffer?D._Buffer_from(T):"undefined"==typeof Uint8Array?T:new Uint8Array(T)},D.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,D.Long=D.global.dcodeIO&&D.global.dcodeIO.Long||D.global.Long||D.inquire("long"),D.key2Re=/^true|false|0|1$/,D.key32Re=/^-?(?:0|[1-9][0-9]*)$/,D.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,D.longToHash=function(T){return T?D.LongBits.from(T).toHash():D.LongBits.zeroHash},D.longFromHash=function(T,N){var y=D.LongBits.fromHash(T);return D.Long?D.Long.fromBits(y.lo,y.hi,N):y.toNumber(Boolean(N))},D.merge=R,D.lcFirst=function(T){return T.charAt(0).toLowerCase()+T.substring(1)},D.newError=O,D.ProtocolError=O("ProtocolError"),D.oneOfGetter=function(T){for(var N={},y=0;y<T.length;++y)N[T[y]]=1;return function(){for(var I=Object.keys(this),h=I.length-1;h>-1;--h)if(1===N[I[h]]&&this[I[h]]!==undefined&&null!==this[I[h]])return I[h]}},D.oneOfSetter=function(T){return function(N){for(var y=0;y<T.length;++y)T[y]!==N&&delete this[T[y]]}},D.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},D._configure=function(){var T=D.Buffer;T?(D._Buffer_from=T.from!==Uint8Array.from&&T.from||function(N,y){return new T(N,y)},D._Buffer_allocUnsafe=T.allocUnsafe||function(N){return new T(N)}):D._Buffer_from=D._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(le,re,j){re.exports=function(y){var I=R.codegen(["m"],y.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),m={};y.oneofsArray.length&&I("var p={}");for(var v=0;v<y.fieldsArray.length;++v){var k=y._fieldsArray[v].resolve(),B="m"+R.safeProp(k.name);if(k.optional&&I("if(%s!=null&&m.hasOwnProperty(%j)){",B,k.name),k.map)I("if(!util.isObject(%s))",B)("return%j",O(k,"object"))("var k=Object.keys(%s)",B)("for(var i=0;i<k.length;++i){"),N(I,k,"k[i]"),T(I,k,v,B+"[k[i]]")("}");else if(k.repeated)I("if(!Array.isArray(%s))",B)("return%j",O(k,"array"))("for(var i=0;i<%s.length;++i){",B),T(I,k,v,B+"[i]")("}");else{if(k.partOf){var w=R.safeProp(k.partOf.name);1===m[k.partOf.name]&&I("if(p%s===1)",w)("return%j",k.partOf.name+": multiple values"),m[k.partOf.name]=1,I("p%s=1",w)}T(I,k,v,B)}k.optional&&I("}")}return I("return null")};var D=le(14),R=le(33);function O(y,I){return y.name+": "+I+(y.repeated&&"array"!==I?"[]":y.map&&"object"!==I?"{k:"+y.keyType+"}":"")+" expected"}function T(y,I,h,m){if(I.resolvedType)if(I.resolvedType instanceof D){y("switch(%s){",m)("default:")("return%j",O(I,"enum value"));for(var v=Object.keys(I.resolvedType.values),k=0;k<v.length;++k)y("case %i:",I.resolvedType.values[v[k]]);y("break")("}")}else y("{")("var e=types[%i].verify(%s);",h,m)("if(e)")("return%j+e",I.name+".")("}");else switch(I.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":y("if(!util.isInteger(%s))",m)("return%j",O(I,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":y("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",m,m,m,m)("return%j",O(I,"integer|Long"));break;case"float":case"double":y('if(typeof %s!=="number")',m)("return%j",O(I,"number"));break;case"bool":y('if(typeof %s!=="boolean")',m)("return%j",O(I,"boolean"));break;case"string":y("if(!util.isString(%s))",m)("return%j",O(I,"string"));break;case"bytes":y('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',m,m,m)("return%j",O(I,"buffer"))}return y}function N(y,I,h){switch(I.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":y("if(!util.key32Re.test(%s))",h)("return%j",O(I,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":y("if(!util.key64Re.test(%s))",h)("return%j",O(I,"integer|Long key"));break;case"bool":y("if(!util.key2Re.test(%s))",h)("return%j",O(I,"boolean key"))}return y}},{14:14,33:33}],37:[function(le,re,j){var D=j,R=le(19);D[".google.protobuf.Any"]={fromObject:function(O){if(O&&O["@type"]){var T=O["@type"].substring(O["@type"].lastIndexOf("/")+1),N=this.lookup(T);if(N){var y="."===O["@type"].charAt(0)?O["@type"].substr(1):O["@type"];return-1===y.indexOf("/")&&(y="/"+y),this.create({type_url:y,value:N.encode(N.fromObject(O)).finish()})}}return this.fromObject(O)},toObject:function(O,T){var N="",y="";if(T&&T.json&&O.type_url&&O.value){y=O.type_url.substring(O.type_url.lastIndexOf("/")+1),N=O.type_url.substring(0,O.type_url.lastIndexOf("/")+1);var I=this.lookup(y);I&&(O=I.decode(O.value))}if(!(O instanceof this.ctor)&&O instanceof R){var h=O.$type.toObject(O,T);return""===N&&(N="type.googleapis.com/"),y=N+("."===O.$type.fullName[0]?O.$type.fullName.substr(1):O.$type.fullName),h["@type"]=y,h}return this.toObject(O,T)}}},{19:19}],38:[function(le,re,j){re.exports=m;var D,R=le(35),O=R.LongBits,T=R.base64,N=R.utf8;function y(P,G,V){this.fn=P,this.len=G,this.next=undefined,this.val=V}function I(){}function h(P){this.head=P.head,this.tail=P.tail,this.len=P.len,this.next=P.states}function m(){this.len=0,this.head=new y(I,0,0),this.tail=this.head,this.states=null}var v=function(){return R.Buffer?function(){return(m.create=function(){return new D})()}:function(){return new m}};function k(P,G,V){G[V]=255&P}function B(P,G){this.len=P,this.next=undefined,this.val=G}function w(P,G,V){for(;P.hi;)G[V++]=127&P.lo|128,P.lo=(P.lo>>>7|P.hi<<25)>>>0,P.hi>>>=7;for(;P.lo>127;)G[V++]=127&P.lo|128,P.lo=P.lo>>>7;G[V++]=P.lo}function E(P,G,V){G[V]=255&P,G[V+1]=P>>>8&255,G[V+2]=P>>>16&255,G[V+3]=P>>>24}m.create=v(),m.alloc=function(P){return new R.Array(P)},R.Array!==Array&&(m.alloc=R.pool(m.alloc,R.Array.prototype.subarray)),m.prototype._push=function(P,G,V){return this.tail=this.tail.next=new y(P,G,V),this.len+=G,this},(B.prototype=Object.create(y.prototype)).fn=function(P,G,V){for(;P>127;)G[V++]=127&P|128,P>>>=7;G[V]=P},m.prototype.uint32=function(P){return this.len+=(this.tail=this.tail.next=new B((P>>>=0)<128?1:P<16384?2:P<2097152?3:P<268435456?4:5,P)).len,this},m.prototype.int32=function(P){return P<0?this._push(w,10,O.fromNumber(P)):this.uint32(P)},m.prototype.sint32=function(P){return this.uint32((P<<1^P>>31)>>>0)},m.prototype.int64=m.prototype.uint64=function(P){var G=O.from(P);return this._push(w,G.length(),G)},m.prototype.sint64=function(P){var G=O.from(P).zzEncode();return this._push(w,G.length(),G)},m.prototype.bool=function(P){return this._push(k,1,P?1:0)},m.prototype.sfixed32=m.prototype.fixed32=function(P){return this._push(E,4,P>>>0)},m.prototype.sfixed64=m.prototype.fixed64=function(P){var G=O.from(P);return this._push(E,4,G.lo)._push(E,4,G.hi)},m.prototype.float=function(P){return this._push(R.float.writeFloatLE,4,P)},m.prototype.double=function(P){return this._push(R.float.writeDoubleLE,8,P)};var U=R.Array.prototype.set?function(P,G,V){G.set(P,V)}:function(P,G,V){for(var ee=0;ee<P.length;++ee)G[V+ee]=P[ee]};m.prototype.bytes=function(P){var G=P.length>>>0;if(!G)return this._push(k,1,0);if(R.isString(P)){var V=m.alloc(G=T.length(P));T.decode(P,V,0),P=V}return this.uint32(G)._push(U,G,P)},m.prototype.string=function(P){var G=N.length(P);return G?this.uint32(G)._push(N.write,G,P):this._push(k,1,0)},m.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new y(I,0,0),this.len=0,this},m.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new y(I,0,0),this.len=0),this},m.prototype.ldelim=function(){var P=this.head,G=this.tail,V=this.len;return this.reset().uint32(V),V&&(this.tail.next=P.next,this.tail=G,this.len+=V),this},m.prototype.finish=function(){for(var P=this.head.next,G=this.constructor.alloc(this.len),V=0;P;)P.fn(P.val,G,V),V+=P.len,P=P.next;return G},m._configure=function(P){D=P,m.create=v(),D._configure()}},{35:35}],39:[function(le,re,j){re.exports=O;var D=le(38);(O.prototype=Object.create(D.prototype)).constructor=O;var R=le(35);function O(){D.call(this)}function T(N,y,I){N.length<40?R.utf8.write(N,y,I):y.utf8Write?y.utf8Write(N,I):y.write(N,I)}O._configure=function(){O.alloc=R._Buffer_allocUnsafe,O.writeBytesBuffer=R.Buffer&&R.Buffer.prototype instanceof Uint8Array&&"set"===R.Buffer.prototype.set.name?function(N,y,I){y.set(N,I)}:function(N,y,I){if(N.copy)N.copy(y,I,0,N.length);else for(var h=0;h<N.length;)y[I++]=N[h++]}},O.prototype.bytes=function(N){R.isString(N)&&(N=R._Buffer_from(N,"base64"));var y=N.length>>>0;return this.uint32(y),y&&this._push(O.writeBytesBuffer,y,N),this},O.prototype.string=function(N){var y=R.Buffer.byteLength(N);return this.uint32(y),y&&this._push(T,y,N),this},O._configure()},{35:35,38:38}]},re={},D=function R(O){var T=re[O];return T||le[O][0].call(T=re[O]={exports:{}},R,T,T.exports),T.exports}(16),D.util.global.protobuf=D,__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_634166__(59)],(__WEBPACK_AMD_DEFINE_RESULT__=function(R){return R&&R.isLong&&(D.util.Long=R,D.configure()),D}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=D)})()}).call(this,__nested_webpack_require_634166__(57),__nested_webpack_require_634166__(58)(module))},function(le,re){var j;j=function(){return this}();try{j=j||new Function("return this")()}catch(D){"object"==typeof window&&(j=window)}le.exports=j},function(le,re){le.exports=function(j){return j.webpackPolyfill||(j.deprecate=function(){},j.paths=[],j.children||(j.children=[]),Object.defineProperty(j,"loaded",{enumerable:!0,get:function(){return j.l}}),Object.defineProperty(j,"id",{enumerable:!0,get:function(){return j.i}}),j.webpackPolyfill=1),j}},function(le,re){le.exports=D;var j=null;try{j=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(b){}function D(b,l,H){this.low=0|b,this.high=0|l,this.unsigned=!!H}function R(b){return!0===(b&&b.__isLong__)}Object.defineProperty(D.prototype,"__isLong__",{value:!0}),D.isLong=R;var O={},T={};function N(b,l){var H,_,u;return l?(u=0<=(b>>>=0)&&b<256)&&(_=T[b])?_:(H=I(b,(0|b)<0?-1:0,!0),u&&(T[b]=H),H):(u=-128<=(b|=0)&&b<128)&&(_=O[b])?_:(H=I(b,b<0?-1:0,!1),u&&(O[b]=H),H)}function y(b,l){if(isNaN(b))return l?P:U;if(l){if(b<0)return P;if(b>=B)return te}else{if(b<=-w)return oe;if(b+1>=w)return se}return b<0?y(-b,l).neg():I(b%k|0,b/k|0,l)}function I(b,l,H){return new D(b,l,H)}D.fromInt=N,D.fromNumber=y,D.fromBits=I;var h=Math.pow;function m(b,l,H){if(0===b.length)throw Error("empty string");if("NaN"===b||"Infinity"===b||"+Infinity"===b||"-Infinity"===b)return U;if("number"==typeof l?(H=l,l=!1):l=!!l,(H=H||10)<2||36<H)throw RangeError("radix");var _;if((_=b.indexOf("-"))>0)throw Error("interior hyphen");if(0===_)return m(b.substring(1),l,H).neg();for(var u=y(h(H,8)),q=U,g=0;g<b.length;g+=8){var C=Math.min(8,b.length-g),L=parseInt(b.substring(g,g+C),H);if(C<8){var K=y(h(H,C));q=q.mul(K).add(y(L))}else q=(q=q.mul(u)).add(y(L))}return q.unsigned=l,q}function v(b,l){return"number"==typeof b?y(b,l):"string"==typeof b?m(b,l):I(b.low,b.high,"boolean"==typeof l?l:b.unsigned)}D.fromString=m,D.fromValue=v;var k=4294967296,B=k*k,w=B/2,E=N(1<<24),U=N(0);D.ZERO=U;var P=N(0,!0);D.UZERO=P;var G=N(1);D.ONE=G;var V=N(1,!0);D.UONE=V;var ee=N(-1);D.NEG_ONE=ee;var se=I(-1,2147483647,!1);D.MAX_VALUE=se;var te=I(-1,-1,!0);D.MAX_UNSIGNED_VALUE=te;var oe=I(0,-2147483648,!1);D.MIN_VALUE=oe;var $=D.prototype;$.toInt=function(){return this.unsigned?this.low>>>0:this.low},$.toNumber=function(){return this.unsigned?(this.high>>>0)*k+(this.low>>>0):this.high*k+(this.low>>>0)},$.toString=function(b){if((b=b||10)<2||36<b)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(oe)){var l=y(b),H=this.div(l),_=H.mul(l).sub(this);return H.toString(b)+_.toInt().toString(b)}return"-"+this.neg().toString(b)}for(var u=y(h(b,6),this.unsigned),q=this,g="";;){var C=q.div(u),L=(q.sub(C.mul(u)).toInt()>>>0).toString(b);if((q=C).isZero())return L+g;for(;L.length<6;)L="0"+L;g=""+L+g}},$.getHighBits=function(){return this.high},$.getHighBitsUnsigned=function(){return this.high>>>0},$.getLowBits=function(){return this.low},$.getLowBitsUnsigned=function(){return this.low>>>0},$.getNumBitsAbs=function(){if(this.isNegative())return this.eq(oe)?64:this.neg().getNumBitsAbs();for(var b=0!=this.high?this.high:this.low,l=31;l>0&&0==(b&1<<l);l--);return 0!=this.high?l+33:l+1},$.isZero=function(){return 0===this.high&&0===this.low},$.eqz=$.isZero,$.isNegative=function(){return!this.unsigned&&this.high<0},$.isPositive=function(){return this.unsigned||this.high>=0},$.isOdd=function(){return 1==(1&this.low)},$.isEven=function(){return 0==(1&this.low)},$.equals=function(b){return R(b)||(b=v(b)),(this.unsigned===b.unsigned||this.high>>>31!=1||b.high>>>31!=1)&&this.high===b.high&&this.low===b.low},$.eq=$.equals,$.notEquals=function(b){return!this.eq(b)},$.neq=$.notEquals,$.ne=$.notEquals,$.lessThan=function(b){return this.comp(b)<0},$.lt=$.lessThan,$.lessThanOrEqual=function(b){return this.comp(b)<=0},$.lte=$.lessThanOrEqual,$.le=$.lessThanOrEqual,$.greaterThan=function(b){return this.comp(b)>0},$.gt=$.greaterThan,$.greaterThanOrEqual=function(b){return this.comp(b)>=0},$.gte=$.greaterThanOrEqual,$.ge=$.greaterThanOrEqual,$.compare=function(b){if(R(b)||(b=v(b)),this.eq(b))return 0;var l=this.isNegative(),H=b.isNegative();return l&&!H?-1:!l&&H?1:this.unsigned?b.high>>>0>this.high>>>0||b.high===this.high&&b.low>>>0>this.low>>>0?-1:1:this.sub(b).isNegative()?-1:1},$.comp=$.compare,$.negate=function(){return!this.unsigned&&this.eq(oe)?oe:this.not().add(G)},$.neg=$.negate,$.add=function(b){R(b)||(b=v(b));var L=0,K=0,ie=0,he=0;return ie+=(he+=(65535&this.low)+(65535&b.low))>>>16,K+=(ie+=(this.low>>>16)+(b.low>>>16))>>>16,L+=(K+=(65535&this.high)+(65535&b.high))>>>16,L+=(this.high>>>16)+(b.high>>>16),I((ie&=65535)<<16|(he&=65535),(L&=65535)<<16|(K&=65535),this.unsigned)},$.subtract=function(b){return R(b)||(b=v(b)),this.add(b.neg())},$.sub=$.subtract,$.multiply=function(b){if(this.isZero())return U;if(R(b)||(b=v(b)),j)return I(j.mul(this.low,this.high,b.low,b.high),j.get_high(),this.unsigned);if(b.isZero())return U;if(this.eq(oe))return b.isOdd()?oe:U;if(b.eq(oe))return this.isOdd()?oe:U;if(this.isNegative())return b.isNegative()?this.neg().mul(b.neg()):this.neg().mul(b).neg();if(b.isNegative())return this.mul(b.neg()).neg();if(this.lt(E)&&b.lt(E))return y(this.toNumber()*b.toNumber(),this.unsigned);var H=65535&this.high,_=this.low>>>16,u=65535&this.low,g=65535&b.high,C=b.low>>>16,L=65535&b.low,K=0,ie=0,he=0,Q=0;return he+=(Q+=u*L)>>>16,ie+=(he+=_*L)>>>16,he&=65535,ie+=(he+=u*C)>>>16,K+=(ie+=H*L)>>>16,ie&=65535,K+=(ie+=_*C)>>>16,ie&=65535,K+=(ie+=u*g)>>>16,K+=(this.high>>>16)*L+H*C+_*g+u*(b.high>>>16),I((he&=65535)<<16|(Q&=65535),(K&=65535)<<16|(ie&=65535),this.unsigned)},$.mul=$.multiply,$.divide=function(b){if(R(b)||(b=v(b)),b.isZero())throw Error("division by zero");var l,H,_;if(j)return this.unsigned||-2147483648!==this.high||-1!==b.low||-1!==b.high?I((this.unsigned?j.div_u:j.div_s)(this.low,this.high,b.low,b.high),j.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?P:U;if(this.unsigned){if(b.unsigned||(b=b.toUnsigned()),b.gt(this))return P;if(b.gt(this.shru(1)))return V;_=P}else{if(this.eq(oe))return b.eq(G)||b.eq(ee)?oe:b.eq(oe)?G:(l=this.shr(1).div(b).shl(1)).eq(U)?b.isNegative()?G:ee:(H=this.sub(b.mul(l)),_=l.add(H.div(b)));if(b.eq(oe))return this.unsigned?P:U;if(this.isNegative())return b.isNegative()?this.neg().div(b.neg()):this.neg().div(b).neg();if(b.isNegative())return this.div(b.neg()).neg();_=U}for(H=this;H.gte(b);){l=Math.max(1,Math.floor(H.toNumber()/b.toNumber()));for(var u=Math.ceil(Math.log(l)/Math.LN2),q=u<=48?1:h(2,u-48),g=y(l),C=g.mul(b);C.isNegative()||C.gt(H);)C=(g=y(l-=q,this.unsigned)).mul(b);g.isZero()&&(g=G),_=_.add(g),H=H.sub(C)}return _},$.div=$.divide,$.modulo=function(b){return R(b)||(b=v(b)),j?I((this.unsigned?j.rem_u:j.rem_s)(this.low,this.high,b.low,b.high),j.get_high(),this.unsigned):this.sub(this.div(b).mul(b))},$.mod=$.modulo,$.rem=$.modulo,$.not=function(){return I(~this.low,~this.high,this.unsigned)},$.and=function(b){return R(b)||(b=v(b)),I(this.low&b.low,this.high&b.high,this.unsigned)},$.or=function(b){return R(b)||(b=v(b)),I(this.low|b.low,this.high|b.high,this.unsigned)},$.xor=function(b){return R(b)||(b=v(b)),I(this.low^b.low,this.high^b.high,this.unsigned)},$.shiftLeft=function(b){return R(b)&&(b=b.toInt()),0==(b&=63)?this:b<32?I(this.low<<b,this.high<<b|this.low>>>32-b,this.unsigned):I(0,this.low<<b-32,this.unsigned)},$.shl=$.shiftLeft,$.shiftRight=function(b){return R(b)&&(b=b.toInt()),0==(b&=63)?this:b<32?I(this.low>>>b|this.high<<32-b,this.high>>b,this.unsigned):I(this.high>>b-32,this.high>=0?0:-1,this.unsigned)},$.shr=$.shiftRight,$.shiftRightUnsigned=function(b){if(R(b)&&(b=b.toInt()),0==(b&=63))return this;var l=this.high;return b<32?I(this.low>>>b|l<<32-b,l>>>b,this.unsigned):I(32===b?l:l>>>b-32,0,this.unsigned)},$.shru=$.shiftRightUnsigned,$.shr_u=$.shiftRightUnsigned,$.toSigned=function(){return this.unsigned?I(this.low,this.high,!1):this},$.toUnsigned=function(){return this.unsigned?this:I(this.low,this.high,!0)},$.toBytes=function(b){return b?this.toBytesLE():this.toBytesBE()},$.toBytesLE=function(){var b=this.high,l=this.low;return[255&l,l>>>8&255,l>>>16&255,l>>>24,255&b,b>>>8&255,b>>>16&255,b>>>24]},$.toBytesBE=function(){var b=this.high,l=this.low;return[b>>>24,b>>>16&255,b>>>8&255,255&b,l>>>24,l>>>16&255,l>>>8&255,255&l]},D.fromBytes=function(b,l,H){return H?D.fromBytesLE(b,l):D.fromBytesBE(b,l)},D.fromBytesLE=function(b,l){return new D(b[0]|b[1]<<8|b[2]<<16|b[3]<<24,b[4]|b[5]<<8|b[6]<<16|b[7]<<24,l)},D.fromBytesBE=function(b,l){return new D(b[4]<<24|b[5]<<16|b[6]<<8|b[7],b[0]<<24|b[1]<<16|b[2]<<8|b[3],l)}},function(le){le.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156,"JoinWebProxyAP":700,"WebSocketQuit":671}')},function(le){le.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"chooseServerIp":{"type":"string","id":15}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"WebSocketQuit":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"succ":{"type":"int32","id":7},"errorCode":{"type":"string","id":8},"ip":{"type":"string","id":9}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2},"vid":{"type":"int32","id":3}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}},"JoinWebProxyAP":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"sucess":{"type":"int32","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"apServerAddr":{"type":"string","id":10},"turnServerAddrList":{"type":"string","id":11},"errorCode":{"type":"string","id":12}}}}}}}')},function(le,re,j){var D=function(R){"use strict";var O=Object.prototype,T=O.hasOwnProperty,N="function"==typeof Symbol?Symbol:{},y=N.iterator||"@@iterator",I=N.asyncIterator||"@@asyncIterator",h=N.toStringTag||"@@toStringTag";function m(_,u,q,g){var ie,he,Q,W,L=Object.create((u&&u.prototype instanceof B?u:B).prototype),K=new b(g||[]);return L._invoke=(ie=_,he=q,Q=K,W="suspendedStart",function(F,Y){if("executing"===W)throw new Error("Generator is already running");if("completed"===W){if("throw"===F)throw Y;return{value:void 0,done:!0}}for(Q.method=F,Q.arg=Y;;){var ve=Q.delegate;if(ve){var de=te(ve,Q);if(de){if(de===k)continue;return de}}if("next"===Q.method)Q.sent=Q._sent=Q.arg;else if("throw"===Q.method){if("suspendedStart"===W)throw W="completed",Q.arg;Q.dispatchException(Q.arg)}else"return"===Q.method&&Q.abrupt("return",Q.arg);W="executing";var ce=v(ie,he,Q);if("normal"===ce.type){if(W=Q.done?"completed":"suspendedYield",ce.arg===k)continue;return{value:ce.arg,done:Q.done}}"throw"===ce.type&&(W="completed",Q.method="throw",Q.arg=ce.arg)}}),L}function v(_,u,q){try{return{type:"normal",arg:_.call(u,q)}}catch(g){return{type:"throw",arg:g}}}R.wrap=m;var k={};function B(){}function w(){}function E(){}var U={};U[y]=function(){return this};var P=Object.getPrototypeOf,G=P&&P(P(l([])));G&&G!==O&&T.call(G,y)&&(U=G);var V=E.prototype=B.prototype=Object.create(U);function ee(_){["next","throw","return"].forEach(function(u){_[u]=function(q){return this._invoke(u,q)}})}function se(_,u){var q;this._invoke=function(g,C){function L(){return new u(function(K,ie){!function he(Q,W,F,Y){var ve=v(_[Q],_,W);if("throw"!==ve.type){var de=ve.arg,ce=de.value;return ce&&"object"==typeof ce&&T.call(ce,"__await")?u.resolve(ce.__await).then(function(Te){he("next",Te,F,Y)},function(Te){he("throw",Te,F,Y)}):u.resolve(ce).then(function(Te){de.value=Te,F(de)},function(Te){return he("throw",Te,F,Y)})}Y(ve.arg)}(g,C,K,ie)})}return q=q?q.then(L,L):L()}}function te(_,u){var q=_.iterator[u.method];if(void 0===q){if(u.delegate=null,"throw"===u.method){if(_.iterator.return&&(u.method="return",u.arg=void 0,te(_,u),"throw"===u.method))return k;u.method="throw",u.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var g=v(q,_.iterator,u.arg);if("throw"===g.type)return u.method="throw",u.arg=g.arg,u.delegate=null,k;var C=g.arg;return C?C.done?(u[_.resultName]=C.value,u.next=_.nextLoc,"return"!==u.method&&(u.method="next",u.arg=void 0),u.delegate=null,k):C:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,k)}function oe(_){var u={tryLoc:_[0]};1 in _&&(u.catchLoc=_[1]),2 in _&&(u.finallyLoc=_[2],u.afterLoc=_[3]),this.tryEntries.push(u)}function $(_){var u=_.completion||{};u.type="normal",delete u.arg,_.completion=u}function b(_){this.tryEntries=[{tryLoc:"root"}],_.forEach(oe,this),this.reset(!0)}function l(_){if(_){var u=_[y];if(u)return u.call(_);if("function"==typeof _.next)return _;if(!isNaN(_.length)){var q=-1,g=function C(){for(;++q<_.length;)if(T.call(_,q))return C.value=_[q],C.done=!1,C;return C.value=void 0,C.done=!0,C};return g.next=g}}return{next:H}}function H(){return{value:void 0,done:!0}}return w.prototype=V.constructor=E,E.constructor=w,E[h]=w.displayName="GeneratorFunction",R.isGeneratorFunction=function(_){var u="function"==typeof _&&_.constructor;return!!u&&(u===w||"GeneratorFunction"===(u.displayName||u.name))},R.mark=function(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,E):(_.__proto__=E,h in _||(_[h]="GeneratorFunction")),_.prototype=Object.create(V),_},R.awrap=function(_){return{__await:_}},ee(se.prototype),se.prototype[I]=function(){return this},R.AsyncIterator=se,R.async=function(_,u,q,g,C){void 0===C&&(C=Promise);var L=new se(m(_,u,q,g),C);return R.isGeneratorFunction(u)?L:L.next().then(function(K){return K.done?K.value:L.next()})},ee(V),V[h]="Generator",V[y]=function(){return this},V.toString=function(){return"[object Generator]"},R.keys=function(_){var u=[];for(var q in _)u.push(q);return u.reverse(),function g(){for(;u.length;){var C=u.pop();if(C in _)return g.value=C,g.done=!1,g}return g.done=!0,g}},R.values=l,b.prototype={constructor:b,reset:function(_){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach($),!_)for(var u in this)"t"===u.charAt(0)&&T.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=void 0)},stop:function(){this.done=!0;var _=this.tryEntries[0].completion;if("throw"===_.type)throw _.arg;return this.rval},dispatchException:function(_){if(this.done)throw _;var u=this;function q(he,Q){return L.type="throw",L.arg=_,u.next=he,Q&&(u.method="next",u.arg=void 0),!!Q}for(var g=this.tryEntries.length-1;g>=0;--g){var C=this.tryEntries[g],L=C.completion;if("root"===C.tryLoc)return q("end");if(C.tryLoc<=this.prev){var K=T.call(C,"catchLoc"),ie=T.call(C,"finallyLoc");if(K&&ie){if(this.prev<C.catchLoc)return q(C.catchLoc,!0);if(this.prev<C.finallyLoc)return q(C.finallyLoc)}else if(K){if(this.prev<C.catchLoc)return q(C.catchLoc,!0)}else{if(!ie)throw new Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return q(C.finallyLoc)}}}},abrupt:function(_,u){for(var q=this.tryEntries.length-1;q>=0;--q){var g=this.tryEntries[q];if(g.tryLoc<=this.prev&&T.call(g,"finallyLoc")&&this.prev<g.finallyLoc){var C=g;break}}C&&("break"===_||"continue"===_)&&C.tryLoc<=u&&u<=C.finallyLoc&&(C=null);var L=C?C.completion:{};return L.type=_,L.arg=u,C?(this.method="next",this.next=C.finallyLoc,k):this.complete(L)},complete:function(_,u){if("throw"===_.type)throw _.arg;return"break"===_.type||"continue"===_.type?this.next=_.arg:"return"===_.type?(this.rval=this.arg=_.arg,this.method="return",this.next="end"):"normal"===_.type&&u&&(this.next=u),k},finish:function(_){for(var u=this.tryEntries.length-1;u>=0;--u){var q=this.tryEntries[u];if(q.finallyLoc===_)return this.complete(q.completion,q.afterLoc),$(q),k}},catch:function(_){for(var u=this.tryEntries.length-1;u>=0;--u){var q=this.tryEntries[u];if(q.tryLoc===_){var g=q.completion;if("throw"===g.type){var C=g.arg;$(q)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(_,u,q){return this.delegate={iterator:l(_),resultName:u,nextLoc:q},"next"===this.method&&(this.arg=void 0),k}},R}(le.exports);try{regeneratorRuntime=D}catch(R){Function("r","regeneratorRuntime = r")(D)}},function(le,re){le.exports=function(j){if(Array.isArray(j))return j}},function(le,re){le.exports=function(j,D){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(j)){var R=[],O=!0,T=!1,N=void 0;try{for(var y,I=j[Symbol.iterator]();!(O=(y=I.next()).done)&&(R.push(y.value),!D||R.length!==D);O=!0);}catch(h){T=!0,N=h}finally{try{O||null==I.return||I.return()}finally{if(T)throw N}}return R}}},function(le,re){le.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(le,re,j){"use strict";Object.defineProperty(re,"__esModule",{value:!0});var D="object"==typeof window&&window.RTCPeerConnection,R="object"==typeof window&&window.webkitRTCPeerConnection,O="object"==typeof window&&window.mozRTCPeerConnection;re.createRTCPeerConnection=function(T){var N=D||R||O;return N?new N(T):null}},function(le,re,j){var D;!function(R){"use strict";function O(){}var T=O.prototype,N=R.EventEmitter;function y(h,m){for(var v=h.length;v--;)if(h[v].listener===m)return v;return-1}function I(h){return function(){return this[h].apply(this,arguments)}}T.getListeners=function(h){var m,v,k=this._getEvents();if(h instanceof RegExp)for(v in m={},k)k.hasOwnProperty(v)&&h.test(v)&&(m[v]=k[v]);else m=k[h]||(k[h]=[]);return m},T.flattenListeners=function(h){var m,v=[];for(m=0;m<h.length;m+=1)v.push(h[m].listener);return v},T.getListenersAsObject=function(h){var m,v=this.getListeners(h);return v instanceof Array&&((m={})[h]=v),m||v},T.addListener=function(h,m){if(!function w(E){return"function"==typeof E||E instanceof RegExp||!(!E||"object"!=typeof E)&&w(E.listener)}(m))throw new TypeError("listener must be a function");var v,k=this.getListenersAsObject(h),B="object"==typeof m;for(v in k)k.hasOwnProperty(v)&&-1===y(k[v],m)&&k[v].push(B?m:{listener:m,once:!1});return this},T.on=I("addListener"),T.addOnceListener=function(h,m){return this.addListener(h,{listener:m,once:!0})},T.once=I("addOnceListener"),T.defineEvent=function(h){return this.getListeners(h),this},T.defineEvents=function(h){for(var m=0;m<h.length;m+=1)this.defineEvent(h[m]);return this},T.removeListener=function(h,m){var v,k,B=this.getListenersAsObject(h);for(k in B)B.hasOwnProperty(k)&&-1!==(v=y(B[k],m))&&B[k].splice(v,1);return this},T.off=I("removeListener"),T.addListeners=function(h,m){return this.manipulateListeners(!1,h,m)},T.removeListeners=function(h,m){return this.manipulateListeners(!0,h,m)},T.manipulateListeners=function(h,m,v){var k,B,w=h?this.removeListener:this.addListener,E=h?this.removeListeners:this.addListeners;if("object"!=typeof m||m instanceof RegExp)for(k=v.length;k--;)w.call(this,m,v[k]);else for(k in m)m.hasOwnProperty(k)&&(B=m[k])&&("function"==typeof B?w.call(this,k,B):E.call(this,k,B));return this},T.removeEvent=function(h){var m,v=typeof h,k=this._getEvents();if("string"===v)delete k[h];else if(h instanceof RegExp)for(m in k)k.hasOwnProperty(m)&&h.test(m)&&delete k[m];else delete this._events;return this},T.removeAllListeners=I("removeEvent"),T.emitEvent=function(h,m){var v,k,B,w,E=this.getListenersAsObject(h);for(w in E)if(E.hasOwnProperty(w))for(v=E[w].slice(0),B=0;B<v.length;B++)!0===(k=v[B]).once&&this.removeListener(h,k.listener),k.listener.apply(this,m||[])===this._getOnceReturnValue()&&this.removeListener(h,k.listener);return this},T.trigger=I("emitEvent"),T.emit=function(h){var m=Array.prototype.slice.call(arguments,1);return this.emitEvent(h,m)},T.setOnceReturnValue=function(h){return this._onceReturnValue=h,this},T._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},T._getEvents=function(){return this._events||(this._events={})},O.noConflict=function(){return R.EventEmitter=N,O},void 0===(D=function(){return O}.call(R,j,R,le))||(le.exports=D)}("undefined"!=typeof window?window:this||{})},function(le,re,j){var D=j(32);le.exports=function(R){if(Array.isArray(R))return D(R)}},function(le,re){le.exports=function(j){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(j))return Array.from(j)}},function(le,re){le.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(le,re,j){"use strict";var D=this&&this.__assign||function(){return(D=Object.assign||function(E){for(var U,P=1,G=arguments.length;P<G;P++)for(var V in U=arguments[P])Object.prototype.hasOwnProperty.call(U,V)&&(E[V]=U[V]);return E}).apply(this,arguments)},R=this&&this.__awaiter||function(E,U,P,G){return new(P||(P=Promise))(function(V,ee){function se($){try{oe(G.next($))}catch(b){ee(b)}}function te($){try{oe(G.throw($))}catch(b){ee(b)}}function oe($){var b;$.done?V($.value):(b=$.value,b instanceof P?b:new P(function(l){l(b)})).then(se,te)}oe((G=G.apply(E,U||[])).next())})},O=this&&this.__generator||function(E,U){var P,G,V,ee,se={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return ee={next:te(0),throw:te(1),return:te(2)},"function"==typeof Symbol&&(ee[Symbol.iterator]=function(){return this}),ee;function te(oe){return function($){return function(b){if(P)throw new TypeError("Generator is already executing.");for(;se;)try{if(P=1,G&&(V=2&b[0]?G.return:b[0]?G.throw||((V=G.return)&&V.call(G),0):G.next)&&!(V=V.call(G,b[1])).done)return V;switch(G=0,V&&(b=[2&b[0],V.value]),b[0]){case 0:case 1:V=b;break;case 4:return se.label++,{value:b[1],done:!1};case 5:se.label++,G=b[1],b=[0];continue;case 7:b=se.ops.pop(),se.trys.pop();continue;default:if(!((V=(V=se.trys).length>0&&V[V.length-1])||6!==b[0]&&2!==b[0])){se=0;continue}if(3===b[0]&&(!V||b[1]>V[0]&&b[1]<V[3])){se.label=b[1];break}if(6===b[0]&&se.label<V[1]){se.label=V[1],V=b;break}if(V&&se.label<V[2]){se.label=V[2],se.ops.push(b);break}V[2]&&se.ops.pop(),se.trys.pop();continue}b=U.call(E,se)}catch(l){b=[6,l],G=0}finally{P=V=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([oe,$])}}},T=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(re,"__esModule",{value:!0});var N=j(72),y=j(27),I=j(91),h=j(20),m=j(24),v=j(29),k=T(j(0)),B=T(j(34)),w=function(){function E(U){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new I.PromiseMutex("LS"),this.cancelToken=B.default.CancelToken.source(),this.injectConfig=D({},y.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=U}return Object.defineProperty(E.prototype,"isNeedReset",{get:function(){for(var U=this,P=0,G=Array.from(this.streamingTasks.values());P<G.length;P++){var V=G[P];if(V.mode===y.LiveStreamingServiceMode.INJECT||V.mode===y.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find(function(ee){return ee.uid===U.spec.uid}))return!0}return!1},enumerable:!0,configurable:!0}),E.prototype.setTranscodingConfig=function(U){return R(this,void 0,void 0,function(){var P,G,V,ee,se,te=this;return O(this,function(oe){switch(oe.label){case 0:(P=D(D({},y.DEFAULT_TRANSCODING_CONFIG),U)).transcodingUsers||(P.transcodingUsers=P.userConfigs),66!==P.videoCodecProfile&&77!==P.videoCodecProfile&&100!==P.videoCodecProfile&&(k.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+P.videoCodecProfile+" -> 100"),P.videoCodecProfile=100),P.transcodingUsers&&(P.transcodingUsers=P.transcodingUsers.map(function($){return D(D(D({},y.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),$),{zOrder:$.zOrder?$.zOrder+1:1})})),P.images&&(P.images=P.images.map(function($){return D(D({},y.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),$)}));try{y.isLiveStreamingTranscodingConfig(P)}catch($){throw $}return P.transcodingUsers&&(P.userConfigs=P.transcodingUsers.map(function($){return D({},$)}),P.userCount=P.transcodingUsers.length,delete P.transcodingUsers),G=(P.userConfigs||[]).map(function($){return"number"==typeof $.uid?Promise.resolve($.uid):h.getUserAccount(te.spec,null,$.uid)}),[4,this.taskMutex.lock()];case 1:return V=oe.sent(),[4,Promise.all(G)];case 2:if(oe.sent().forEach(function($,b){P.userConfigs&&P.userConfigs[b]&&(P.userConfigs[b].uid=$&&$.uid||$)}),this.transcodingConfig=P,!this.connection)return V(),[2];oe.label=3;case 3:return oe.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map(function($){return $.taskId}).join("#")})];case 4:return ee=oe.sent(),V(),k.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+ee.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(se=oe.sent(),V(),!se.data||!se.data.retry)throw se;return se.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(function($){k.default.warning("["+te.spec.clientId+"] live streaming receive error",se.toString(),"try to republish",$.url),te.startLiveStreamingTask($.url,$.mode,se).then(function(){k.default.debug("["+te.spec.clientId+"] live streaming republish "+$.url+" success")}).catch(function(b){k.default.error("["+te.spec.clientId+"] live streaming republish failed",$.url,b.toString()),te.onLiveStreamError&&te.onLiveStreamError($.url,b)})}),[3,6];case 6:return[2]}})})},E.prototype.setInjectStreamConfig=function(U,P){this.injectConfig=Object.assign({},this.injectConfig,U),this.injectLoopTimes=P},E.prototype.startLiveStreamingTask=function(U,P,G){return R(this,void 0,void 0,function(){var V,ee,se,te,oe,$,b,l,H=this;return O(this,function(_){switch(_.label){case 0:return Array.from(this.streamingTasks.values()).find(function(u){return u.mode===y.LiveStreamingServiceMode.INJECT})&&P===y.LiveStreamingServiceMode.INJECT?[2,new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()]:(V={command:"PublishStream",ts:Date.now(),url:U,uid:this.spec.uid.toString(),autoDestroyTime:30},k.default.debug("["+this.spec.clientId+"] start live streaming "+U+", mode: "+P),[4,this.taskMutex.lock()]);case 1:if(ee=_.sent(),!this.transcodingConfig&&P===y.LiveStreamingServiceMode.TRANSCODE)throw ee(),new m.AgoraRTCError(m.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(!this.connection&&G)return ee(),[2];if(this.streamingTasks.get(U)&&!G)return ee(),[2,new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&P===y.LiveStreamingServiceMode.TRANSCODE)throw ee(),new m.AgoraRTCError(m.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");_.label=2;case 2:return _.trys.push([2,5,,6]),this.connection?[3,4]:(se=this,[4,this.connect(P)]);case 3:se.connection=_.sent(),_.label=4;case 4:return[3,6];case 5:throw te=_.sent(),ee(),te;case 6:switch(P){case y.LiveStreamingServiceMode.TRANSCODE:V.transcodingConfig=D({},this.transcodingConfig);break;case y.LiveStreamingServiceMode.RAW:break;case y.LiveStreamingServiceMode.INJECT:V={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:U,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(V.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,oe=this.lastTaskId++,_.label=7;case 7:return _.trys.push([7,9,,14]),$=new Promise(function(u,q){v.wait(H.retryTimeout).then(function(){if(G)return q(G);var g=H.statusError.get(U);return g?(H.statusError.delete(U),q(g)):void 0})}),[4,Promise.race([this.connection.request("request",{clientRequest:V},!0,{url:U,command:"PublishStream",workerType:P===y.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!G,tid:oe.toString()}),$])];case 8:return b=_.sent(),this.isStartingStreamingTask=!1,k.default.debug("["+this.spec.clientId+"] live streaming started, code: "+b.code),this.streamingTasks.set(U,{clientRequest:V,mode:P,url:U,taskId:oe}),ee(),[3,14];case 9:if(l=_.sent(),ee(),this.isStartingStreamingTask=!1,!l.data||!l.data.retry||G)throw l;return l.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(U,P,l)];case 10:return[2,_.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(U,P,l)];case 12:return[2,_.sent()];case 13:return[3,14];case 14:return[2]}})})},E.prototype.stopLiveStreamingTask=function(U){var P=this;return new Promise(function(G,V){var ee=P.streamingTasks.get(U);if(!ee||!P.connection)return new m.AgoraRTCError(m.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var se=ee.mode;ee.abortTask=function(){k.default.debug("["+P.spec.clientId+"] stop live streaming success(worker exception)"),P.streamingTasks.delete(U),G()},k.default.debug("stop live streaming task request: "+JSON.stringify(U)),P.connection.request("request",{clientRequest:{command:se===y.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:ee.url}},!1,{url:U,command:"UnPublishStream",workerType:se===y.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(P.lastTaskId++).toString()}).then(function(te){k.default.debug("["+P.spec.clientId+"] stop live streaming success, code: "+te.code),P.streamingTasks.delete(U),0===P.streamingTasks.size&&se!==y.LiveStreamingServiceMode.INJECT&&(P.connection.close(),P.connection=void 0),G()}).catch(V)})},E.prototype.controlInjectStream=function(U,P,G,V){return R(this,void 0,void 0,function(){var ee;return O(this,function(se){switch(se.label){case 0:if(!(ee=this.streamingTasks.get(U))||!this.connection||ee.mode!==y.LiveStreamingServiceMode.INJECT)throw new m.AgoraRTCError(m.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:U,control:P,audioVolume:G,position:V}})];case 1:return[2,se.sent().serverResponse]}})})},E.prototype.resetAllTask=function(){var U=this,P=Array.from(this.streamingTasks.values());this.terminate();for(var G=function(te){V.startLiveStreamingTask(te.url,te.mode).catch(function(oe){U.onLiveStreamError&&U.onLiveStreamError(te.url,oe)})},V=this,ee=0,se=P;ee<se.length;ee++)G(se[ee])},E.prototype.setGatewayConnectionState=function(U){this.connection&&(this.connection.gatewayConnectionState=U)},E.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=B.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},E.prototype.connect=function(U){return R(this,void 0,void 0,function(){var P,G=this;return O(this,function(V){switch(V.label){case 0:if(this.connection)throw new m.AgoraRTCError(m.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,v.getLiveStreamingWorkerMangerResult(U,this.spec,this.cancelToken.token)];case 1:return P=V.sent(),this.uapResponse=P,this.connection=new N.AgoraLiveStreamingUapSignal(P.workerToken,this.spec,U),this.connection.on(y.LiveStreamingUapSignalEvents.WARNING,function(ee,se){return G.onLiveStreamWarning&&G.onLiveStreamWarning(se,ee)}),this.connection.on(y.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,function(ee){return G.handlePublishStreamServer(ee)}),this.connection.on(y.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,function(ee){return G.handleInjectStreamServerStatus(ee)}),this.connection.on(y.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,function(ee,se){if(!G.connection)return se(new m.AgoraRTCError(m.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));v.getLiveStreamingWorkerMangerResult(U,G.spec,G.cancelToken.token).then(function(te){G.uapResponse=te,ee(te.addressList)}).catch(se)}),[4,this.connection.init(P.addressList)];case 2:return V.sent(),[2,this.connection]}})})},E.prototype.handlePublishStreamServer=function(U){var P=this,G=U.serverStatus&&U.serverStatus.url;if(!G)throw new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"empty url",{code:U.code});var V=this.streamingTasks.get(G);switch(U.code){case y.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case y.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case y.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case y.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var ee=new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:U.code});if(V)return k.default.error(ee.toString()),this.onLiveStreamError&&this.onLiveStreamError(G,ee);if(!this.isStartingStreamingTask)return;this.statusError.set(G,ee);case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case y.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var se=Array.from(this.streamingTasks.values()),te=function(l){if(l.abortTask)return l.abortTask(),"continue";k.default.warning("["+oe.spec.clientId+"] publish stream status code",U.code,"try to republish",l.url),oe.startLiveStreamingTask(l.url,l.mode,new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:U.code})).then(function(){k.default.debug("["+P.spec.clientId+"] republish live stream success",l.url)}).catch(function(H){k.default.error(H.toString()),P.onLiveStreamError&&P.onLiveStreamError(l.url,H)})},oe=this,$=0,b=se;$<b.length;$++)te(b[$]);return}},E.prototype.handleInjectStreamServerStatus=function(U){var P=Number(U.uid),G=U.serverStatus&&U.serverStatus.url;switch(U.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,P,G));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,P,G),void this.streamingTasks.delete(G);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,P,G),void this.streamingTasks.delete(G);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,P,G),void this.streamingTasks.delete(G);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,P,G),void this.streamingTasks.delete(G);default:return void k.default.debug("inject stream server status",U)}},E.prototype.haveUrl=function(U){return this.streamingTasks.has(U)||void 0},E}();re.AgoraRTCLiveStreamingClient=w},function(le,re,j){"use strict";var D,R=this&&this.__extends||(D=function(P,G){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,ee){V.__proto__=ee}||function(V,ee){for(var se in ee)ee.hasOwnProperty(se)&&(V[se]=ee[se])})(P,G)},function(P,G){function V(){this.constructor=P}D(P,G),P.prototype=null===G?Object.create(G):(V.prototype=G.prototype,new V)}),O=this&&this.__assign||function(){return(O=Object.assign||function(P){for(var G,V=1,ee=arguments.length;V<ee;V++)for(var se in G=arguments[V])Object.prototype.hasOwnProperty.call(G,se)&&(P[se]=G[se]);return P}).apply(this,arguments)},T=this&&this.__awaiter||function(P,G,V,ee){return new(V||(V=Promise))(function(se,te){function oe(l){try{b(ee.next(l))}catch(H){te(H)}}function $(l){try{b(ee.throw(l))}catch(H){te(H)}}function b(l){var H;l.done?se(l.value):(H=l.value,H instanceof V?H:new V(function(_){_(H)})).then(oe,$)}b((ee=ee.apply(P,G||[])).next())})},N=this&&this.__generator||function(P,G){var V,ee,se,te,oe={label:0,sent:function(){if(1&se[0])throw se[1];return se[1]},trys:[],ops:[]};return te={next:$(0),throw:$(1),return:$(2)},"function"==typeof Symbol&&(te[Symbol.iterator]=function(){return this}),te;function $(b){return function(l){return function(H){if(V)throw new TypeError("Generator is already executing.");for(;oe;)try{if(V=1,ee&&(se=2&H[0]?ee.return:H[0]?ee.throw||((se=ee.return)&&se.call(ee),0):ee.next)&&!(se=se.call(ee,H[1])).done)return se;switch(ee=0,se&&(H=[2&H[0],se.value]),H[0]){case 0:case 1:se=H;break;case 4:return oe.label++,{value:H[1],done:!1};case 5:oe.label++,ee=H[1],H=[0];continue;case 7:H=oe.ops.pop(),oe.trys.pop();continue;default:if(!((se=(se=oe.trys).length>0&&se[se.length-1])||6!==H[0]&&2!==H[0])){oe=0;continue}if(3===H[0]&&(!se||H[1]>se[0]&&H[1]<se[3])){oe.label=H[1];break}if(6===H[0]&&oe.label<se[1]){oe.label=se[1],se=H;break}if(se&&oe.label<se[2]){oe.label=se[2],oe.ops.push(H);break}se[2]&&oe.ops.pop(),oe.trys.pop();continue}H=G.call(P,oe)}catch(_){H=[6,_],ee=0}finally{V=se=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([b,l])}}},y=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(re,"__esModule",{value:!0});var I=j(27),h=j(73),m=j(33),v=j(24),k=j(2),B=y(j(0)),w=j(1),E=j(29),U=function(P){function G(V,ee,se){var te=P.call(this)||this;return te._gatewayConnectionState="CONNECTED",te.reconnectMode="retry",te.reqId=0,te.commandReqId=0,te.waitingResponseList=[],te.handleWebSocketOpen=function(){te.reconnectMode="retry",te.startPingPong()},te.handleWebSocketMessage=function(oe){if(oe.data){var $=JSON.parse(oe.data);if($.requestId)te.emit("@"+$.requestId,$);else if(te.serviceMode===I.LiveStreamingServiceMode.INJECT)te.emit(I.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,$);else{w.report.requestWorkerEvent(te.spec.sid,{actionType:"status",serverCode:$.code,workerType:te.serviceMode===I.LiveStreamingServiceMode.TRANSCODE?1:2});var b=$.serverStatus&&$.serverStatus.url;b&&te.waitingResponseList.includes(b)&&200===$.code&&te.emit(b),te.emit(I.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,$)}}},te.spec=ee,te.token=V,te.serviceMode=se,te.websocket=new h.AgoraWebSocketManager("live-streaming"),te.websocket.on(I.WebSocketManagerEvents.CONNECTED,te.handleWebSocketOpen),te.websocket.on(I.WebSocketManagerEvents.ON_MESSAGE,te.handleWebSocketMessage),te.websocket.on(I.WebSocketManagerEvents.REQUEST_NEW_URLS,function(oe,$){m.emitAsPromise(te,I.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(oe).catch($)}),te.websocket.on(I.WebSocketManagerEvents.RECONNECTING,function(){te.websocket.reconnectMode=te.reconnectMode}),te}return R(G,P),Object.defineProperty(G.prototype,"gatewayConnectionState",{get:function(){return this._gatewayConnectionState},set:function(V){this._gatewayConnectionState=V,"CONNECTED"===V&&this.emit("gateway-connected",V)},enumerable:!0,configurable:!0}),G.prototype.init=function(V){return this.websocket.init(V)},G.prototype.request=function(V,ee,se,te){return T(this,void 0,void 0,function(){var oe,$,b,l,H,_,u,q,g,C,L=this;return N(this,function(K){switch(K.label){case 0:if(this.reqId+=1,oe=this.reqId,"request"===V&&(this.commandReqId+=1),$=this.commandReqId,!oe||!this.websocket)throw new v.AgoraRTCError(v.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(b=k.VERSION,"closed"===this.websocket.state)throw new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_DISCONNECT);return l=function(){return new Promise(function(ie,he){var Q=function(){"CONNECTED"===L.gatewayConnectionState&&"connected"===L.websocket.state&&(L.off("gateway-connected",Q),L.websocket.off(I.WebSocketManagerEvents.CONNECTED,Q),ie(void 0))};L.on("gateway-connected",Q),L.websocket.once(I.WebSocketManagerEvents.CLOSED,function(){return he(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ABORT))}),L.websocket.on(I.WebSocketManagerEvents.CONNECTED,Q)})},"connected"===this.websocket.state&&"CONNECTED"===this.gatewayConnectionState?[3,2]:[4,l()];case 1:K.sent(),K.label=2;case 2:H=Promise.race([new Promise(function(ie,he){var Q=function(){he(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ABORT))};L.websocket.once(I.WebSocketManagerEvents.RECONNECTING,Q),L.websocket.once(I.WebSocketManagerEvents.CLOSED,Q),L.once("@"+oe,function(W){ie(W)})}),E.wait(k.getParameter("LIVE_STREAMING_TIMEOUT")).then(function(){return!1})]),(_=O({command:V,sdkVersion:b,seq:oe,requestId:oe,allocate:se,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},ee)).clientRequest&&(_.clientRequest.workerToken=this.token),te&&w.report.requestWorkerEvent(this.spec.sid,O(O({},te),{requestId:$,actionType:"request",payload:JSON.stringify(ee.clientRequest),serverCode:0,code:0})),u=Date.now(),this.websocket.sendMessage(_),q=null,K.label=3;case 3:return K.trys.push([3,5,,8]),[4,H];case 4:return q=K.sent(),[3,8];case 5:if(g=K.sent(),"closed"===this.websocket.state)throw g;return[4,l()];case 6:return K.sent(),[4,this.request(V,ee,se,te)];case 7:return[2,K.sent()];case 8:if(!1===q)throw C=new v.AgoraRTCError(v.AgoraRTCErrorCode.NETWORK_TIMEOUT,(ee&&ee.clientRequest&&ee.clientRequest.command)+" timeout",{changeAddress:!0,retry:!0}),this.emit(I.LiveStreamingUapSignalEvents.WARNING,C,te&&te.url||"unknown url"),te&&w.report.requestWorkerEvent(this.spec.sid,O(O({},te),{requestId:$,actionType:"response",payload:"TIMEOUT",serverCode:0,success:0,responseTime:Date.now()-u})),C;return te&&w.report.requestWorkerEvent(this.spec.sid,O(O({},te),{requestId:$,actionType:"response",payload:JSON.stringify(q.serverResponse),serverCode:q.code,success:200===q.code,responseTime:Date.now()-u})),200===q.code?[3,10]:[4,this.handleResponseError(q)];case 9:K.sent(),K.label=10;case 10:return[2,q]}})})},G.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},G.prototype.close=function(){var V="__VERSION__"===k.VERSION?"0.0.1":k.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:V,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},G.prototype.handleResponseError=function(V){return T(this,void 0,void 0,function(){var ee,se,te,oe,$=this;return N(this,function(b){switch(B.default.debug("[live-streaming] receive response error "+V.code),V.code){case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return B.default.warning("live stream response already exists stream"),this.emit(I.LiveStreamingUapSignalEvents.WARNING,"live stream response already exists stream, code 454",ee=V.serverResponse.url),this.waitingResponseList.includes(ee)||this.waitingResponseList.push(ee),[2,new Promise(function(l,H){$.once(ee,function(){$.waitingResponseList.splice($.waitingResponseList.indexOf(ee),1),l()}),setTimeout(function(){$.waitingResponseList.splice($.waitingResponseList.indexOf(ee),1),H(new v.AgoraRTCError(v.AgoraRTCErrorCode.TIMEOUT,"live stream timeout waiting 454",{code:V.code}))},1e4)})];case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:V.code}).throw()];case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE:throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{retry:!0,changeAddress:!0});case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===V.serverResponse.command||"UninjectStream"===V.serverResponse.command)return[2];throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:V.code}).throw()];case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return se=new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE),[2,this.emit(I.LiveStreamingUapSignalEvents.WARNING,se,V.serverResponse.url)];case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return se=new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),[2,this.emit(I.LiveStreamingUapSignalEvents.WARNING,se,V.serverResponse.url)];case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:V.code}).throw()];case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return se=new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),[2,this.emit(I.LiveStreamingUapSignalEvents.WARNING,se,V.serverResponse.url)];case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:V.code}).throw()];case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case I.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===V.serverResponse.command||"UninjectStream"===V.serverResponse.command)return[2];throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case I.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===V.serverResponse.command||"UninjectStream"===V.serverResponse.command)return[2];if("UpdateTranscoding"===V.serverResponse.command||"ControlStream"===V.serverResponse.command)return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:V.code}).throw()];throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case I.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case I.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case I.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case I.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return this.waitingResponseList.includes(te=V.serverResponse.url)||this.waitingResponseList.push(te),oe=new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:V.code}),this.emit(I.LiveStreamingUapSignalEvents.WARNING,oe,te),[2,new Promise(function(l,H){$.once(te,function(){$.waitingResponseList.splice($.waitingResponseList.indexOf(te),1),l()}),setTimeout(function(){$.waitingResponseList.splice($.waitingResponseList.indexOf(te),1),H(oe)},1e4)})]}return[2]})})},G.prototype.startPingPong=function(){var V=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(function(){"connected"===V.websocket.state&&V.request("ping",{}).catch(function(){})},6e3)},G}(m.EventEmitter);re.AgoraLiveStreamingUapSignal=U},function(le,re,j){"use strict";var D,R=this&&this.__extends||(D=function(B,w){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,U){E.__proto__=U}||function(E,U){for(var P in U)U.hasOwnProperty(P)&&(E[P]=U[P])})(B,w)},function(B,w){function E(){this.constructor=B}D(B,w),B.prototype=null===w?Object.create(w):(E.prototype=w.prototype,new E)}),O=this&&this.__awaiter||function(B,w,E,U){return new(E||(E=Promise))(function(P,G){function V(te){try{se(U.next(te))}catch(oe){G(oe)}}function ee(te){try{se(U.throw(te))}catch(oe){G(oe)}}function se(te){var oe;te.done?P(te.value):(oe=te.value,oe instanceof E?oe:new E(function($){$(oe)})).then(V,ee)}se((U=U.apply(B,w||[])).next())})},T=this&&this.__generator||function(B,w){var E,U,P,G,V={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return G={next:ee(0),throw:ee(1),return:ee(2)},"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G;function ee(se){return function(te){return function(oe){if(E)throw new TypeError("Generator is already executing.");for(;V;)try{if(E=1,U&&(P=2&oe[0]?U.return:oe[0]?U.throw||((P=U.return)&&P.call(U),0):U.next)&&!(P=P.call(U,oe[1])).done)return P;switch(U=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return V.label++,{value:oe[1],done:!1};case 5:V.label++,U=oe[1],oe=[0];continue;case 7:oe=V.ops.pop(),V.trys.pop();continue;default:if(!((P=(P=V.trys).length>0&&P[P.length-1])||6!==oe[0]&&2!==oe[0])){V=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){V.label=oe[1];break}if(6===oe[0]&&V.label<P[1]){V.label=P[1],P=oe;break}if(P&&V.label<P[2]){V.label=P[2],V.ops.push(oe);break}P[2]&&V.ops.pop(),V.trys.pop();continue}oe=w.call(B,V)}catch($){oe=[6,$],U=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([se,te])}}},N=this&&this.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(re,"__esModule",{value:!0});var y=j(24),I=j(33),h=j(29),m=j(27),v=N(j(0)),k=function(B){function w(E){var U=B.call(this)||this;return U.connectionID=0,U.currentURLIndex=0,U.reconnectMode="tryNext",U._state="closed",U.retryConfig=h.DEFAULT_RETRY_CONFIG,U.reconnectCount=0,U.name=E,U}return R(w,B),Object.defineProperty(w.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"state",{get:function(){return this._state},set:function(E){E!==this._state&&(this._state=E,"reconnecting"===this._state?this.emit(m.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(m.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(m.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(m.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),w.prototype.init=function(E){var U=this;return new Promise(function(P,G){U.urls=E;var V=U.urls[U.currentURLIndex];U.state="connecting",U.createWebSocketConnection(V).then(P).catch(G),U.once(m.WebSocketManagerEvents.CLOSED,function(){return G(new y.AgoraRTCError(y.AgoraRTCErrorCode.WS_DISCONNECT))}),U.once(m.WebSocketManagerEvents.CONNECTED,function(){return P()})})},w.prototype.close=function(E,U){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var P=this.websocket;U?setTimeout(function(){return P.close()},500):P.close(),this.websocket=void 0}this.state=E?"failed":"closed"},w.prototype.reconnect=function(E){if(this.websocket){void 0!==E&&(this.reconnectMode=E);var U=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),U&&U.bind(this.websocket)({code:9999})}else v.default.warning("["+this.name+"] can not reconnect, no websocket")},w.prototype.sendMessage=function(E){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new y.AgoraRTCError(y.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var U=JSON.stringify(E);try{this.websocket.send(U)}catch(P){throw new y.AgoraRTCError(y.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+P.toString())}},w.prototype.createWebSocketConnection=function(E){return O(this,void 0,void 0,function(){var U,P=this;return T(this,function(G){return this.connectionID+=1,U=this.connectionID,[2,new Promise(function(V,ee){P.websocket&&(P.websocket.onclose=null,P.websocket.close()),v.default.debug("["+P.name+"] start connect, url: "+E);try{P.websocket=new WebSocket(E),P.websocket.binaryType="arraybuffer"}catch(te){var se=new y.AgoraRTCError(y.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+te.toString());return v.default.error("["+P.name+"]"+se),void ee(se)}h.wait(5e3).then(function(){U===P.connectionID&&P.websocket&&P.websocket.readyState!==WebSocket.OPEN&&P.websocket&&P.websocket.close()}),P.websocket.onopen=function(){v.default.debug("["+P.name+"] websockect opened:",E),P.reconnectMode="retry",P.state="connected",P.reconnectCount=0,V()},P.websocket.onclose=function(te){return O(P,void 0,void 0,function(){var oe,$;return T(this,function(b){switch(b.label){case 0:return v.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+te.code+", reason: "+te.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),oe=I.emitAsInvokerNoResponse(this,m.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(oe)]):[3,2];case 1:return $=b.sent(),"closed"===this.state?(v.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):$?(V(),[3,3]):(ee(new y.AgoraRTCError(y.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+te.code)),this.close(!0),[2]);case 2:ee(new y.AgoraRTCError(y.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+te.code)),this.close(),b.label=3;case 3:return[2]}})})},P.websocket.onmessage=function(te){P.emit(m.WebSocketManagerEvents.ON_MESSAGE,te)}})]})})},w.prototype.reconnectWithAction=function(E,U){return O(this,void 0,void 0,function(){var P,G,ee;return T(this,function(se){switch(se.label){case 0:return!U&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(P=h.getRetryWaitTime(this.reconnectCount,this.retryConfig),v.default.debug("["+this.name+"] wait "+P+"ms to reconnect websocket, mode: "+E),[4,h.wait(P)]):[2,!1];case 1:if(se.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,se.label=2;case 2:return se.trys.push([2,12,,14]),"retry"!==E?[3,4]:[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 3:return se.sent(),[3,11];case 4:return"tryNext"!==E?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,se.sent()];case 6:return v.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 7:return se.sent(),[3,11];case 8:return"recover"!==E?[3,11]:(v.default.debug("["+this.name+"] request new urls"),G=this,[4,I.emitAsPromise(this,m.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return G.urls=se.sent(),this.currentURLIndex=0,[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 10:se.sent(),se.label=11;case 11:return[2,!0];case 12:return ee=se.sent(),v.default.error("["+this.name+"] reconnect failed",ee.toString()),[4,this.reconnectWithAction(E)];case 13:return[2,se.sent()];case 14:return[2]}})})},w}(I.EventEmitter);re.AgoraWebSocketManager=k},function(le,re,j){"use strict";var D=j(18),R=j(35),O=j(75),T=j(41);function N(I){var h=new O(I),m=R(O.prototype.request,h);return D.extend(m,O.prototype,h),D.extend(m,h),m}var y=N(j(38));y.Axios=O,y.create=function(I){return N(T(y.defaults,I))},y.Cancel=j(42),y.CancelToken=j(89),y.isCancel=j(37),y.all=function(I){return Promise.all(I)},y.spread=j(90),le.exports=y,le.exports.default=y},function(le,re,j){"use strict";var D=j(18),R=j(36),O=j(76),T=j(77),N=j(41);function y(I){this.defaults=I,this.interceptors={request:new O,response:new O}}y.prototype.request=function(I){"string"==typeof I?(I=arguments[1]||{}).url=arguments[0]:I=I||{},I.method=(I=N(this.defaults,I)).method?I.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var h=[T,void 0],m=Promise.resolve(I);for(this.interceptors.request.forEach(function(v){h.unshift(v.fulfilled,v.rejected)}),this.interceptors.response.forEach(function(v){h.push(v.fulfilled,v.rejected)});h.length;)m=m.then(h.shift(),h.shift());return m},y.prototype.getUri=function(I){return I=N(this.defaults,I),R(I.url,I.params,I.paramsSerializer).replace(/^\?/,"")},D.forEach(["delete","get","head","options"],function(I){y.prototype[I]=function(h,m){return this.request(D.merge(m||{},{method:I,url:h}))}}),D.forEach(["post","put","patch"],function(I){y.prototype[I]=function(h,m,v){return this.request(D.merge(v||{},{method:I,url:h,data:m}))}}),le.exports=y},function(le,re,j){"use strict";var D=j(18);function R(){this.handlers=[]}R.prototype.use=function(O,T){return this.handlers.push({fulfilled:O,rejected:T}),this.handlers.length-1},R.prototype.eject=function(O){this.handlers[O]&&(this.handlers[O]=null)},R.prototype.forEach=function(O){D.forEach(this.handlers,function(T){null!==T&&O(T)})},le.exports=R},function(le,re,j){"use strict";var D=j(18),R=j(78),O=j(37),T=j(38);function N(y){y.cancelToken&&y.cancelToken.throwIfRequested()}le.exports=function(y){return N(y),y.headers=y.headers||{},y.data=R(y.data,y.headers,y.transformRequest),y.headers=D.merge(y.headers.common||{},y.headers[y.method]||{},y.headers),D.forEach(["delete","get","head","post","put","patch","common"],function(I){delete y.headers[I]}),(y.adapter||T.adapter)(y).then(function(I){return N(y),I.data=R(I.data,I.headers,y.transformResponse),I},function(I){return O(I)||(N(y),I&&I.response&&(I.response.data=R(I.response.data,I.response.headers,y.transformResponse))),Promise.reject(I)})}},function(le,re,j){"use strict";var D=j(18);le.exports=function(R,O,T){return D.forEach(T,function(N){R=N(R,O)}),R}},function(le,re){var j,D,R=le.exports={};function O(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function N(E){if(j===setTimeout)return setTimeout(E,0);if((j===O||!j)&&setTimeout)return j=setTimeout,setTimeout(E,0);try{return j(E,0)}catch(U){try{return j.call(null,E,0)}catch(P){return j.call(this,E,0)}}}!function(){try{j="function"==typeof setTimeout?setTimeout:O}catch(E){j=O}try{D="function"==typeof clearTimeout?clearTimeout:T}catch(E){D=T}}();var y,I=[],h=!1,m=-1;function v(){h&&y&&(h=!1,y.length?I=y.concat(I):m=-1,I.length&&k())}function k(){if(!h){var E=N(v);h=!0;for(var U=I.length;U;){for(y=I,I=[];++m<U;)y&&y[m].run();m=-1,U=I.length}y=null,h=!1,function(P){if(D===clearTimeout)return clearTimeout(P);if((D===T||!D)&&clearTimeout)return D=clearTimeout,clearTimeout(P);try{D(P)}catch(G){try{return D.call(null,P)}catch(V){return D.call(this,P)}}}(E)}}function B(E,U){this.fun=E,this.array=U}function w(){}R.nextTick=function(E){var U=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)U[P-1]=arguments[P];I.push(new B(E,U)),1!==I.length||h||N(k)},B.prototype.run=function(){this.fun.apply(null,this.array)},R.title="browser",R.browser=!0,R.env={},R.argv=[],R.version="",R.versions={},R.on=w,R.addListener=w,R.once=w,R.off=w,R.removeListener=w,R.removeAllListeners=w,R.emit=w,R.prependListener=w,R.prependOnceListener=w,R.listeners=function(E){return[]},R.binding=function(E){throw new Error("process.binding is not supported")},R.cwd=function(){return"/"},R.chdir=function(E){throw new Error("process.chdir is not supported")},R.umask=function(){return 0}},function(le,re,j){"use strict";var D=j(18);le.exports=function(R,O){D.forEach(R,function(T,N){N!==O&&N.toUpperCase()===O.toUpperCase()&&(R[O]=T,delete R[N])})}},function(le,re,j){"use strict";var D=j(40);le.exports=function(R,O,T){var N=T.config.validateStatus;!N||N(T.status)?R(T):O(D("Request failed with status code "+T.status,T.config,null,T.request,T))}},function(le,re,j){"use strict";le.exports=function(D,R,O,T,N){return D.config=R,O&&(D.code=O),D.request=T,D.response=N,D.isAxiosError=!0,D.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},D}},function(le,re,j){"use strict";var D=j(84),R=j(85);le.exports=function(O,T){return O&&!D(T)?R(O,T):T}},function(le,re,j){"use strict";le.exports=function(D){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(D)}},function(le,re,j){"use strict";le.exports=function(D,R){return R?D.replace(/\/+$/,"")+"/"+R.replace(/^\/+/,""):D}},function(le,re,j){"use strict";var D=j(18),R=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];le.exports=function(O){var T,N,y,I={};return O&&D.forEach(O.split("\n"),function(h){if(y=h.indexOf(":"),T=D.trim(h.substr(0,y)).toLowerCase(),N=D.trim(h.substr(y+1)),T){if(I[T]&&R.indexOf(T)>=0)return;I[T]="set-cookie"===T?(I[T]?I[T]:[]).concat([N]):I[T]?I[T]+", "+N:N}}),I}},function(le,re,j){"use strict";var D=j(18);le.exports=D.isStandardBrowserEnv()?function(){var R,O=/(msie|trident)/i.test(navigator.userAgent),T=document.createElement("a");function N(y){var I=y;return O&&(T.setAttribute("href",I),I=T.href),T.setAttribute("href",I),{href:T.href,protocol:T.protocol?T.protocol.replace(/:$/,""):"",host:T.host,search:T.search?T.search.replace(/^\?/,""):"",hash:T.hash?T.hash.replace(/^#/,""):"",hostname:T.hostname,port:T.port,pathname:"/"===T.pathname.charAt(0)?T.pathname:"/"+T.pathname}}return R=N(window.location.href),function(y){var I=D.isString(y)?N(y):y;return I.protocol===R.protocol&&I.host===R.host}}():function(){return!0}},function(le,re,j){"use strict";var D=j(18);le.exports=D.isStandardBrowserEnv()?{write:function(R,O,T,N,y,I){var h=[];h.push(R+"="+encodeURIComponent(O)),D.isNumber(T)&&h.push("expires="+new Date(T).toGMTString()),D.isString(N)&&h.push("path="+N),D.isString(y)&&h.push("domain="+y),!0===I&&h.push("secure"),document.cookie=h.join("; ")},read:function(R){var O=document.cookie.match(new RegExp("(^|;\\s*)("+R+")=([^;]*)"));return O?decodeURIComponent(O[3]):null},remove:function(R){this.write(R,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(le,re,j){"use strict";var D=j(42);function R(O){if("function"!=typeof O)throw new TypeError("executor must be a function.");var T;this.promise=new Promise(function(y){T=y});var N=this;O(function(y){N.reason||(N.reason=new D(y),T(N.reason))})}R.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},R.source=function(){var O;return{token:new R(function(T){O=T}),cancel:O}},le.exports=R},function(le,re,j){"use strict";le.exports=function(D){return function(R){return D.apply(null,R)}}},function(le,re,j){"use strict";var D=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(re,"__esModule",{value:!0});var R=D(j(0)),O=1,T=function(){function N(y){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=O++,y&&(this.name=y),R.default.debug("[lock-"+this.name+"-"+this.lockId+"] is created.")}return Object.defineProperty(N.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),N.prototype.lock=function(){var y,I=this;this.locks+=1,R.default.debug("[lock-"+this.name+"-"+this.lockId+"] is locked, current queue "+this.locks+".");var h=new Promise(function(v){y=function(){I.locks-=1,R.default.debug("[lock-"+I.name+"-"+I.lockId+"] is not locked, current queue "+I.locks+"."),v()}}),m=this.lockingPromise.then(function(){return y});return this.lockingPromise=this.lockingPromise.then(function(){return h}),m},N}();re.PromiseMutex=T},function(le,re,j){"use strict";j.r(re);var D=j(2),R=j(0),O=j(1),T=j(8),N=j(5),y=function(){};y.prototype.set=function(ye,x){["BatteryLevel"].indexOf(ye)>-1&&(this[ye]=x)};var I=new function(){var ye=Object(T.b)();return ye.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},ye.state=ye.states.UNINIT,ye.batteryManager=null,ye._init=function(x,De){ye.state=ye.states.INITING,navigator.getBattery?navigator.getBattery().then(function(Ue){ye.batteryManager=Ue,x&&setTimeout(function(){x()},0)}).catch(function(Ue){R.default.debug("navigator.getBattery is disabled",Ue),x&&x()}):(ye.state=ye.states.INITED,x&&x())},ye._getBatteryStats=function(){var x={};return x.BatteryLevel=ye.batteryManager&&ye.batteryManager.level?Math.floor(100*ye.batteryManager.level):"UNSUPPORTED",x},ye.getStats=function(x,De){var Ue=new y,Ve=ye._getBatteryStats();Ve&&Ve.BatteryLevel&&Ue.set("BatteryLevel",Ve.BatteryLevel),x&&x(Ue)},ye._init(),ye},h=j(22),m=j(19),v=j(26),k=j(50),B=j(9),w=["live","rtc","web","interop","h264_interop","web-only"],E=["vp8","vp9","h264"],U=["aes-128-gcm","aes-256-gcm","aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-256-gcm2","aes-128-gcm2"],P=j(11),G=j.n(P),V=j(7),ee=j.n(V),se=j(13),te=j(4),oe=j(10),$=j(20),b=j(6),l=j(14),H={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},_={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},u=function(ye){var x={remoteStreamStorage:{},localStreamStorage:{}};return x.gatewayClient=ye,x.checkAudioOutputLevel=function(De){return!(De&&parseInt(De.audioRecvBytesDelta)>0&&parseInt(De.audioDecodingNormalDelta)>0&&0===parseInt(De.audioOutputLevel))},x.checkAudioIntputLevel=function(De){return!De||0!==parseInt(De.audioInputLevel)},x.checkFramerateInput=function(De,Ue){if(!De||!Ue.attributes)return!0;var Ve=parseInt(Ue.attributes.maxFrameRate),Ke=parseInt(De.googFrameRateInput);return!Ve||!Ke||!(Ve>10&&Ke<5||Ve<10&&Ve>=5&&Ke<=1)},x.checkFramerateSent=function(De){return!(De&&parseInt(De.googFrameRateInput)>5&&parseInt(De.googFrameRateSent)<=1)},x.checkSendVideoBitrate=function(De){return!De||0!==parseInt(De.videoSendBytesDelta)},x.checkSendAudioBitrate=function(De){return!De||0!==parseInt(De.audioSendBytesDelta)},x.checkVideoDecode=function(De){return!De||0===parseInt(De.videoRecvBytesDelta)||0!==parseInt(De.googFrameRateDecoded)},x.checkAudioDecode=function(De){return!De||0===parseInt(De.audioRecvBytesDelta)||0!==parseInt(De.audioDecodingNormalDelta)},x.record=function(De,Ue,Ve,Ke,Ze){Ve[De]||(Ve[De]={isPrevNormal:!0,record:[]});var ue=Ve[De],p=x["check"+De](Ue,Ze);if(ue.record.push(p),ue.record.length>=5){ue.isCurNormal=-1!==ue.record.indexOf(!0);var ne=_[De];ue.isPrevNormal&&!ue.isCurNormal&&x.gatewayClient.dispatchEvent({type:"exception",code:ne,msg:H[ne],uid:Ke}),!ue.isPrevNormal&&ue.isCurNormal&&x.gatewayClient.dispatchEvent({type:"exception",code:ne+2e3,msg:H[ne+2e3],uid:Ke}),ue.isPrevNormal=ue.isCurNormal,ue.record=[]}},x.setLocalStats=function(De){var Ue={};Object.keys(De).map(function(Ve){var Ke=De[Ve],Ze=x.gatewayClient.localStreams[parseInt(Ve)],ue=x.localStreamStorage[Ve]||{};Ze&&Ze.hasVideo()&&(x.record("SendVideoBitrate",Ke.videoStats,ue,Ve),x.record("FramerateInput",Ke.videoStats,ue,Ve,Ze),x.record("FramerateSent",Ke.videoStats,ue,Ve)),Ze&&Ze.hasAudio()&&(x.record("AudioIntputLevel",Ke.audioStats,ue,Ve),x.record("SendAudioBitrate",Ke.audioStats,ue,Ve)),Ue[Ve]=ue}),x.localStreamStorage=Ue},x.setRemoteStats=function(De){var Ue={};Object.keys(De).map(function(Ve){var Ke=De[Ve],Ze=ye.remoteStreams[Ve],ue=x.remoteStreamStorage[Ve]||{};Ze&&Ze.hasVideo()&&Ze.isPlaying()&&x.record("VideoDecode",Ke.videoStats,ue,Ve),Ze&&Ze.hasAudio()&&Ze.isPlaying()&&(x.record("AudioOutputLevel",Ke.audioStats,ue,Ve),x.record("AudioDecode",Ke.audioStats,ue,Ve)),Ue[Ve]=ue}),x.remoteStreamStorage=Ue},x};function g(ye,x){(null==x||x>ye.length)&&(x=ye.length);for(var De=0,Ue=new Array(x);De<x;De++)Ue[De]=ye[De];return Ue}var C,L=j(3),K=new function(){var ye=Object(T.b)();return ye.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},ye.state=ye.states.UNINIT,ye.type=null,ye.lastConnectedAt=null,ye.lastDisconnectedAt=null,ye.lastTypeChangedAt=null,ye.networkChangeTimer=null,ye._init=function(x,De){if(ye.state=ye.states.INITING,navigator.connection&&navigator.connection.addEventListener){var Ue=ye._getNetworkInfo();ye.type=Ue&&Ue.type,ye.state=ye.states.INITED,x&&x()}else ye.state=ye.states.UNINIT,De&&De("DO_NOT_SUPPORT")},ye._getNetworkInfo=function(){return navigator.connection},ye._reloadNetworkInfo=function(){var x=ye._getNetworkInfo(),De=x&&x.type||"UNSUPPORTED",Ue=Date.now();De!==ye.type&&(ye.lastTypeChangedAt=Ue,"none"==De?ye.lastDisconnectedAt=Ue:"none"==ye.type&&(ye.lastConnectedAt=Ue),ye.type=De,ye.dispatchEvent({type:"networkTypeChanged",networkType:De}))},ye.getStats=function(x,De){var Ue={},Ve=ye._getNetworkInfo();Ve&&(Ue.NetworkType=Ve.type||"UNSUPPORTED"),setTimeout(function(){x(Ue)},0)},ye._init(function(){navigator.connection.addEventListener("change",function(){ye._reloadNetworkInfo()}),ye.networkChangeTimer=setInterval(function(){ye._reloadNetworkInfo()},5e3)},function(x){}),ye},ie=j(52),he=j(16),Q=j(53),W=j.n(Q),F=j(21),Y=function(){return"HTTPS"===(C||C||(C=(window.location.protocol.split(":")[0]||"").toUpperCase()))},ve=function(){return void 0!==window.isSecureContext},de="host",ce=function(ye){var ue,p,x={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1,useLocalAccessPoint:!1};if(x.mode=ye.mode,x.codec=ye.codec,x.clientId=Object(oe.generateSessionId)().slice(0,5),x.uintUid=null,x.customReportCount=0,ye=ee()({},ye),x.aespassword=null,x.aesmode="none",x.hasPublished=!1,x.getSessionId=function(){return ye.sessionId},x.startChannelMediaRelay=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{callback:function(pe){if(pe)return p&&p(pe);p&&p()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(ue instanceof B.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var fe=ue.getSrcChannelMediaInfo(),me=ue.getDestChannelMediaInfos();if(Object(L.isEmpty)(fe))throw"srcChannelMediaInfo should not be empty";if(Object(L.isEmpty)(me)||0===me.length)throw"destChannelMediaInfos should not be empty";if(!Object(oe.is32Uint)(fe.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(L.isValidChannelName)(fe.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(fe.token&&!Object(L.isValidToken)(fe.token))throw"Invalid token in srcChannelMediaInfo";if(me.forEach(function(pe){if(!Object(oe.is32Uint)(pe.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(L.isValidChannelName)(pe.channelName))throw"Invalid channelName in destChannelMediaInfo";if(pe.token&&!Object(L.isValidToken)(pe.token))throw"Invalid token in destChannelMediaInfo"}),x.gatewayClient.state!==se.a.CONNECTED)throw"startChannelMediaRelay should be used after join";x.gatewayClient.startChannelMediaRelay(ue).then(function(){ne&&ne()}).catch(function(pe){ne&&ne(pe)})},x.updateChannelMediaRelay=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{callback:function(pe){if(pe)return p&&p(pe);p&&p()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(ue instanceof B.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var fe=ue.getSrcChannelMediaInfo(),me=ue.getDestChannelMediaInfos();if(Object(L.isEmpty)(fe))throw"srcChannelMediaInfo should not be empty";if(Object(L.isEmpty)(me)||0===me.length)throw"destChannelMediaInfos should not be empty";if(!Object(oe.is32Uint)(fe.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(L.isValidChannelName)(fe.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(fe.token&&!Object(L.isValidToken)(fe.token))throw"Invalid token in srcChannelMediaInfo";if(me.forEach(function(pe){if(!Object(oe.is32Uint)(pe.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(L.isValidChannelName)(pe.channelName))throw"Invalid channelName in destChannelMediaInfo";if(pe.token&&!Object(L.isValidToken)(pe.token))throw"Invalid token in destChannelMediaInfo"}),x.gatewayClient.state!==se.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";x.gatewayClient.updateChannelMediaRelay(ue).then(function(){ne&&ne()}).catch(function(pe){ne&&ne(pe)})},x.stopChannelMediaRelay=function(ue){var p=O.report.reportApiInvoke(ye.sessionId,{callback:function(ne){if(ne)return ue&&ue(ne);ue&&ue()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});x.gatewayClient.stopChannelMediaRelay().then(function(){p&&p()}).catch(function(ne){p&&p(ne)})},x.getConnectionState=function(){var ue=O.report.reportApiInvoke(ye.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),p=se.a.connetionStateMap[x.gatewayClient.state];return ue(),p},x.setClientRole=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{callback:p,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(L.checkValidEnum)(ue,"setClientRole",[de,"audience"]),"rtc"===x.mode){var fe="RTC mode can not use setClientRole";return R.default.warning("[".concat(x.clientId,"] ").concat(fe)),ne&&ne(fe)}x.gatewayClient&&x.gatewayClient.state===se.a.CONNECTED?("audience"===ue&&(0===this.highStreamState?this._unpublish(this.highStream,function(){ne&&ne(null,{role:ue})},function(me){ne&&ne(me)}):x.gatewayClient.setClientRole("audience",ne)),ue===de&&x.gatewayClient.setClientRole(de,ne)):(x.gatewayClient.role=ue,ne&&ne(null,{role:ue}))},x.getGatewayInfo=function(ue){if(x.gatewayClient.state!==se.a.CONNECTED){var p="Client is not in connected state";return R.default.error("[".concat(x.clientId,"] ").concat(p)),void ue(p)}x.gatewayClient.getGatewayInfo(function(ne){ue(null,ne)},ue)},x.renewToken=function(ue,p,ne){var fe=O.report.reportApiInvoke(ye.sessionId,{callback:function(me,pe){if(me)return R.default.error("Failed to renew token ".concat(me),pe),ne&&ne(me);p&&p(pe)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(L.isValidToken)(ue))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return x.gatewayClient?x.key?(x.key=ue,void x.gatewayClient.renewToken(ue,function(me){return fe(null,me)},fe)):(R.default.error("[".concat(x.clientId,"] renewToken should not be called before user join")),fe(te.default.INVALID_OPERATION)):(R.default.error("[".concat(x.clientId,"] renewToken Failed. GatewayClient not Exist")),fe(te.default.INVALID_OPERATION))},x.setLowStreamParameter=function(ue){var p=O.report.reportApiInvoke(ye.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(L.checkValidObject)(ue,"param");var ne=ue.width,fe=ue.height,me=ue.framerate,pe=ue.bitrate;Object(L.isEmpty)(ne)||Object(L.checkValidNumber)(ne,"width"),Object(L.isEmpty)(fe)||Object(L.checkValidNumber)(fe,"height"),Object(L.isEmpty)(me)||Object(L.checkValidNumber)(me,"framerate"),Object(L.isEmpty)(pe)||Object(L.checkValidNumber)(pe,"bitrate",1,1e7),(!ne&&fe||ne&&!fe)&&R.default.warning("[".concat(x.clientId,"] The width and height parameters take effect only when both are set")),x.lowStreamParameter=ue,p()},x.init=function(ue,p,ne){var fe=O.report.reportApiInvoke(ye.sessionId,{callback:function(me,pe){if(me)return ne&&ne(me);p&&p(pe)},name:"Client.init",options:arguments,tag:"tracer"});Object(L.checkValidString)(ue),Object(N.isChromeKernel)()&&Object(N.getChromeKernelVersion)()<=48?ne?fe(te.default.BAD_ENVIRONMENT):Object(oe.popBanTip)():(ye.appId=ue,ye.sessionId=Object(oe.generateSessionId)(),fe())},x.setTurnServer=function(ue){var p=O.report.reportApiInvoke(ye.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(x.gatewayClient&&x.gatewayClient.state!==se.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(x.useProxyServer)throw new Error("You have already set the proxy");if(x.useLocalAccessPoint)throw new Error("You have already set the local proxy");ue instanceof Array||(ue=[ue]);var ne=[];ue.map(function(fe,me){Object(L.checkValidObject)(fe,"turnServer");var pe=fe.turnServerURL,J=fe.username,_e=fe.password,Se=fe.udpport,Re=fe.forceturn,Ce=fe.tcpport;if(Object(L.checkValidString)(pe,"turnServerURL"),Object(L.checkValidString)(J,"username"),Object(L.checkValidString)(_e,"password"),Object(L.checkValidString)(Se,"udpport"),0===parseInt(Se))throw new Error("udpport should not be ".concat(Se));Object(L.isEmpty)(Re)||Object(L.checkValidBoolean)(Re,"forceturn");var Be={mode:"manual"};if(Be.url=pe,Be.udpport=Se,Be.username=J,Be.credential=_e,Be.forceturn=Re||!1,!Object(L.isEmpty)(Ce)){if(Object(L.checkValidString)(Ce,"tcpport"),0===parseInt(Ce))throw new Error("tcpport should not be ".concat(Ce));Be.tcpport=Ce,R.default.info("[".concat(x.clientId,"] Set turnserver[").concat(me,"] tcpurl. ").concat(Be.url,":").concat(Be.tcpport))}R.default.info("[".concat(x.clientId,"] Set turnserver[").concat(me,"] udpurl. ").concat(Be.url,":").concat(Be.udpport,",username: ").concat(Be.username)),ne.push(Be)}),x.turnServers=ne,p()},x.setProxyServer=function(ue){var p=O.report.reportApiInvoke(ye.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(x.gatewayClient&&x.gatewayClient.state!==se.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!ue)throw new Error("Do not set the proxyServer parameter as empty");if(x.useProxyServer)throw new Error("You have already set the proxy");if(x.useLocalAccessPoint)throw new Error("You have already set the local proxy");Object(L.checkValidString)(ue,"proxyServer"),x.proxyServer=ue,O.report.setProxyServer(ue),R.default.setProxyServer(ue),p()},x.startProxyServer=function(ue){var p=O.report.reportApiInvoke(ye.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(x.gatewayClient&&x.gatewayClient.state!==se.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(x.proxyServer)throw new Error("You have already set the proxy");if(x.useLocalAccessPoint)throw new Error("You have already set the local proxy");x.useProxyServer=!0,x.proxyServerType=ue||1,p()},x.stopProxyServer=function(){var ue=O.report.reportApiInvoke(ye.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(x.gatewayClient&&x.gatewayClient.state!==se.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");O.report.setProxyServer(),R.default.setProxyServer(),x.turnServers=[],x.proxyServer=null,x.useProxyServer=!1,x.proxyServerType=null,ue()},x.setEncryptionSecret=function(ue){var p=O.report.reportApiInvoke(ye.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(L.checkValidString)(ue,"password");var ne=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");ne.test(ue)||console.warn("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer,\n      "),x.aespassword=ue,p()},x.setEncryptionMode=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(L.checkValidString)(ue,"encryptionMode"),-1===U.indexOf(ue))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb" | "aes-128-gcm" | "aes-256-gcm" | "aes-128-gcm2" | "aes-256-gcm2"');var fe=["aes-128-gcm2","aes-256-gcm2"];if(-1!==fe.indexOf(ue)){if(!p||!(p instanceof Uint8Array&&32===p.length))throw Error("salt must be an Uint8Array and exactly equal to 32 bytes")}else if(p)throw new Error("Only ".concat("aes-128-gcm2"," and ").concat("aes-256-gcm2"," support use salt"));p&&(x.aesSalt=Object(oe.uint8ArrayToBase64)(p)),x.aesmode=ue,ne()},x.configPublisher=function(ue){var p=O.report.reportApiInvoke(ye.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(L.checkValidObject)(ue,"config");var ne=ue.width,fe=ue.height,me=ue.framerate,pe=ue.bitrate,J=ue.publisherUrl;Object(L.checkValidNumber)(ne,"width"),Object(L.checkValidNumber)(fe,"height"),Object(L.checkValidNumber)(me,"framerate"),Object(L.checkValidNumber)(pe,"bitrate",1,1e7),J&&Object(L.checkValidString)(J,"publisherUrl"),x.gatewayClient.configPublisher(ue),p()},x.enableDualStream=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{callback:function(fe,me){if(fe)return p&&p(fe);ue&&ue(me)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(N.getBrowserOS)()?(O.report.streamSwitch(ye.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),ne(te.default.IOS_NOT_SUPPORT)):Object(N.isWeChatBrowser)()?(O.report.streamSwitch(ye.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),ne(te.default.WECHAT_NOT_SUPPORT)):(O.report.streamSwitch(ye.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),x.isDualStream=!0,x.highStream&&(x.highStream.isDualStream=!0),void(0===x.highStreamState?x._publishLowStream(function(fe){return ne(null,fe)},function(fe){R.default.warning("[".concat(x.clientId,"]"),fe),ne(te.default.ENABLE_DUALSTREAM_FAILED)}):ne(1===x.highStreamState?te.default.STILL_ON_PUBLISHING:null)))},x.disableDualStream=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{callback:function(fe,me){if(fe)return p&&p(fe);ue&&ue(me)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});O.report.streamSwitch(ye.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),x.isDualStream=!1,x.highStream&&(x.highStream.isDualStream=!1),0===x.highStreamState?x._unpublishLowStream(function(){x.highStream.lowStream=null,ne()},function(fe){R.default.warning("[".concat(x.clientId,"]"),fe),ne(te.default.DISABLE_DUALSTREAM_FAILED)}):1===x.highStreamState?ne(te.default.STILL_ON_PUBLISHING):ne()},x._getLowStream=function(ue,p){x.lowStream?ue(x.lowStream):x._createLowStream(function(ne){x.lowStream=ne,ue(x.lowStream)},p)},x._createLowStream=function(ue,p){if(x.highStream&&x.highStream.stream){var ne=ee()({},x.highStream.params);if(ne.streamID+=1,ne.audio=!1,ne.video)if(x.highStream.stream.getVideoTracks()[0]){var fe=new h.a(ne);fe.isLowStream=!0,fe.streamId=x.highStream.getId()+1;var me={};x.lowStreamParameter&&(me=ee()({},x.lowStreamParameter)),me.width&&me.height||(me.width=160,me.height=120),me.framerate=me.framerate||15,me.bitrate=me.bitrate||50,fe.setVideoProfileCustomPlus(me);try{var pe=W()(x.highStream,{width:fe.videoConstraint.width.ideal,height:fe.videoConstraint.height.ideal,framerate:fe.videoConstraint.frameRate});return fe.stream=pe,x.highStream.lowStream=fe,x.highStream.userMuteVideo&&fe.muteVideo(),ue&&ue(fe)}catch(J){return p&&p(J)}}else p&&p(te.default.HIGH_STREAM_NOT_VIDEO_TRACE);else p&&p(te.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else p&&p(te.default.HIGH_STREAM_NOT_VIDEO_TRACE)},x._publishLowStream=function(ue,p){return 2!==x.lowStreamState?p&&p(te.default.LOW_STREAM_ALREADY_PUBLISHED):x.highStream&&x.highStream.hasScreen()?p&&p(te.default.SHARING_SCREEN_NOT_SUPPORT):void x._getLowStream(function(ne){x.lowStreamState=1,x.gatewayClient.publish(ne,{streamType:1},function(){x.lowStreamState=0,ue&&ue()},function(fe){1===x.lowStreamState&&(x.lowStreamState=2),R.default.debug("[".concat(x.clientId,"] publish low stream failed")),p&&p(fe)})},p)},x._unpublishLowStream=function(ue,p){if(0!==x.lowStreamState)return p&&p(te.default.LOW_STREAM_NOT_YET_PUBLISHED);x.lowStream&&(x.gatewayClient.unpublish(x.lowStream,{streamType:1},function(){},function(ne){R.default.debug("[".concat(x.clientId,"] unpublish low stream failed")),p&&p(ne)}),x.lowStream.close(),x.lowStream=null,x.lowStreamState=2,ue&&ue())},x.join=function(ue,p,ne,fe,me,pe){fe&&"function"==typeof fe&&(pe=me,me=fe,fe=null);var J=Y(),_e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser",Se=ve()?window.isSecureContext:"Browser Not Support",Re=function(){R.default.warning(_e)};ve()?window.isSecureContext||Re():J||Re();var Ce=O.report.reportApiInvoke(ye.sessionId,{callback:function(Ye,St){if(Ye)return pe&&pe(Ye);me&&me(St)},name:"Client.join",options:arguments,getStates:function(){return{isHttps:J,isSecureContext:Se}},tag:"tracer"});if(ue&&!Object(L.isValidToken)(ue))return R.default.warning("[".concat(x.clientId,"] Param channelKey should be string")),Ce(te.default.INVALID_PARAMETER);if(!Object(L.isValidChannelName)(p))return R.default.error("Invalid Channel Name ".concat(p)),R.default.warning("[".concat(x.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),Ce(te.default.INVALID_PARAMETER);if("string"==typeof p&&""===p)return R.default.warning("[".concat(x.clientId,"] Param channel should not be empty")),Ce(te.default.INVALID_PARAMETER);if(fe&&!Object(L.isValidString)(fe))return R.default.warning("[".concat(x.clientId,"] optionalInfo should be string")),Ce(te.default.INVALID_PARAMETER);if(ne&&!Object(oe.is32Uint)(ne)&&!Object(L.isValidString)(ne,1,255))return R.default.error("Invalid UID ".concat(ne," ").concat(G()(ne))),R.default.warning("[".concat(x.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is 32Uint")),Ce(te.default.INVALID_PARAMETER);if("string"==typeof ne&&0==ne.length)return R.default.warning("[".concat(x.clientId,"] String uid should not be empty")),Ce(te.default.INVALID_PARAMETER);if("string"==typeof ne&&ne.length>256)return R.default.warning("[".concat(x.clientId,"] Length of string uid should be less than 255")),Ce(te.default.INVALID_PARAMETER);R.default.stopWaitJoin(),x.highStream=null,x.lowStream=null,x.lowStreamParameter=null,x.isDualStream=!1,x.highStreamState=2,x.lowStreamState=2;var Be=Date.now(),qe=setTimeout(function(){if(1!=x.gatewayClient.hasJoined){R.default.debug("[".concat(x.clientId,"] The time to join the channel is greater than 5 seconds "));var Ye=Date.now();O.report.joinChannelTimeOut({lts:Ye,sid:ye.sessionId,cname:p,cid:He&&He.cid,uid:He.uid||("string"==typeof ne?void 0:ne),elapse:Ye-Be,timeout:5})}},5e3),He={clientId:x.clientId,appId:ye.appId,sid:ye.sessionId,cname:p,uid:ne,turnServers:x.turnServers.concat(),proxyServer:x.proxyServer,token:ue||ye.appId,useProxyServer:x.useProxyServer,useLocalAccessPoint:x.useLocalAccessPoint,proxyServerType:x.proxyServerType,optionalInfo:fe};if("string"==typeof ne&&(He.stringUid=ne,x.uintUid?(He.uid=x.uintUid,delete x.uintUid):He.uid=0),x.aespassword&&"none"!==x.aesmode&&ee()(He,{aespassword:x.aespassword,aesmode:x.aesmode}),x.aesSalt&&(He.aes_salt=x.aesSalt),O.report.sessionInit(ye.sessionId,{lts:(new Date).getTime(),cname:p,appid:ye.appId,mode:ye.mode,succ:!0}),x.onSuccess=function(Ye){clearTimeout(qe),x.rtcStatsCollector.startNetworkQualityTimer(),x.onSuccess=null,Ce(null,Ye)},x.onFailure=function(Ye){return Ce(Ye)},x.channel=p,x.gatewayClient.state!==se.a.DISCONNECTED)return R.default.error("[".concat(x.clientId,"] Client already in connecting/connected state")),Ce(te.default.INVALID_OPERATION),void O.report.joinGateway(ye.sessionId,{lts:Date.now(),succ:!1,ec:te.default.INVALID_OPERATION,addr:null});x.gatewayClient.state=se.a.CONNECTING;var tt=function(Ye,St){R.default.info("[".concat(x.clientId,"] Joining channel: ").concat(p)),x.gatewayClient.dispatchEvent({type:"config-distribute",config:St,joinInfo:He}),x.key=ue||ye.appId,He.cid=Ye.cid,He.uid||(He.uid=Ye.uid),He.vid=Ye.vid,He.clientId=x.clientId,He.apResponse=Ye.res,Ye.uni_lbs_ip&&Ye.uni_lbs_ip[1]&&(He.uni_lbs_ip=Ye.uni_lbs_ip[1]),He.gatewayAddr=Ye.gateway_addr,x.joinInfo=He,x.gatewayClient.join(He,x.key,function(ot){R.default.info("[".concat(x.clientId,"] Join channel ").concat(p," success, join with uid: ").concat(ot,".")),x.onSuccess=null,x.rtcStatsCollector.startNetworkQualityTimer(),Ce(null,ot)},function(ot){return Ce(ot)})};He.stringUid&&!He.uid?(x.userAccountReq&&!x.userAccountReq.isFinished()&&x.userAccountReq.cancel(),x.userAccountReq=Object($.getUserAccount)(He,x.gatewayClient),x.userAccountReq.then(function(Ye){R.default.debug("getUserAccount Success ".concat(Ye.url," ").concat(He.stringUid," => ").concat(Ye.uid)),He.uid=Ye.uid,Object($.getGatewayList)(He,tt,function(St){return Ce(St)})}).catch(function(Ye){R.default.error("getUserAccount rejected",Ye),Ce(Ye)})):Object($.getGatewayList)(He,tt,function(Ye){return Ce(Ye)})},x.renewChannelKey=function(ue,p,ne){var fe=O.report.reportApiInvoke(ye.sessionId,{callback:function(me,pe){if(me)return ne&&ne(me);p&&p(pe)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(L.checkValidString)(ue,"key",1,2047),void 0===x.key?(R.default.error("[".concat(x.clientId,"] renewChannelKey should not be called before user join")),fe(te.default.INVALID_OPERATION)):(x.key=ue,x.gatewayClient.joinInfo.token=ue,x.gatewayClient.key=ue,x.gatewayClient.recover(),fe())},x.leave=function(ue,p){x.gatewayClient.isFirstSuccess=!0,x.gatewayClient.hasInvokeLeave=!0;var ne=!1,fe=O.report.reportApiInvoke(ye.sessionId,{callback:function(me,pe){if(me)return p&&p(me);x.gatewayClient.reconnectingCS=!1,x.gatewayClient.state=se.a.DISCONNECTED,clearTimeout(Object($._getReconnectCSTimer)(x.clientId)),x._renewSession(),x.rtcStatsCollector.clearNetworkQualityTimer(),ue&&ue(pe)},name:"Client.leave",options:arguments,tag:"tracer"});R.default.info("[".concat(x.clientId,"] Leaving channel")),x.userAccountReq&&!x.userAccountReq.isFinished()&&(x.userAccountReq.cancel(),x.gatewayClient.state===se.a.CONNECTING&&(x.gatewayClient.state=se.a.DISCONNECTED)),x._terminateLiveStreaming(),x.gatewayClient.leave(function(me){ne=!0,fe(null,me)},fe),setTimeout(function(){ne||(x.gatewayClient.socket&&(x.gatewayClient.socket.close(),x.gatewayClient.socket=null),x.gatewayClient.state=se.a.DISCONNECTED,fe(null,"LEAVE_MSG_TIMEOUT"))},Object(D.getParameter)("LEAVE_MSG_TIMEOUT"))},x._renewSession=function(){var ue=Object(oe.generateSessionId)();if(R.default.debug("renewSession ".concat(ye.sessionId," => ").concat(ue)),ye.sessionId=ue,x.gatewayClient.peerPublishDurationMap.clear(),x.joinInfo&&(x.joinInfo.sid=ue),x.gatewayClient&&(x.gatewayClient.joinInfo&&(x.gatewayClient.joinInfo.sid=ue),x.gatewayClient.localStreams))for(var p in x.gatewayClient.localStreams){var ne=x.gatewayClient.localStreams[p];ne&&(ne.sid=ue)}},x._publish=function(ue,p,ne,fe){if(2!==x.highStreamState)return R.default.warning("[".concat(x.clientId,"] Can't publish stream when stream already publish ").concat(ue.getId())),ne&&ne(te.default.STREAM_ALREADY_PUBLISHED);if(0===x.turnServers.length&&Object(D.getParameter)("FORCE_TURN")&&!Object(D.getParameter)("TURN_ENABLE_TCP")&&!Object(D.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");R.default.info("[".concat(x.clientId,"] Publishing stream, uid ").concat(ue.getId())),x.highStream=ue,x.highStreamState=1,x.highStream.streamId=x.joinInfo.stringUid||x.joinInfo.uid,x.hasPublished=!1;var me=function(pe,J,_e){x.gatewayClient.publish(pe,{streamType:0},function(){pe.sid=ye.sessionId,x.highStreamState=0,R.default.info("[".concat(x.clientId,"] Publish success, uid: ").concat(pe.getId())),x.highStream&&(x.highStream.isDualStream=x.isDualStream),x.isDualStream?x._publishLowStream(function(){J&&J()},function(Se){R.default.warning("[".concat(x.clientId,"] "),Se),he.a.replaceWithCanvasTrack(pe).then(function(){J&&J()})}):he.a.replaceWithCanvasTrack(pe).then(function(){J&&J()})},_e)};"audience"!==x.gatewayClient.role||"live"!==x.mode||fe?me(ue,p,ne):x.gatewayClient.setClientRole(de,function(pe){if(pe)return ne&&ne(pe);me(ue,p,ne)})},x._unpublish=function(ue,p,ne,fe){if(0!==x.highStreamState)return R.default.warning("[".concat(x.clientId,"] Can't unpublish stream when stream not publish")),ne&&ne(te.default.STREAM_NOT_YET_PUBLISHED);R.default.info("[".concat(x.clientId,"] Unpublish stream, uid ").concat(ue.getId()));var me=function(pe,J,_e){x.isDualStream&&x.lowStream&&x._unpublishLowStream(null,_e),x.gatewayClient.unpublish(pe,{streamType:0},function(){x.highStreamState=2,R.default.info("[".concat(x.clientId,"] Unpublish stream success, uid: ").concat(pe.getId())),x.gatewayClient.dispatchEvent({type:"stream-unpublished",stream:pe}),J&&J()},function(Se){R.default.info("[".concat(x.clientId,"] Unpublish stream fail, uid: ").concat(pe.getId())),_e&&_e(Se)})};x.gatewayClient.role!==de||"live"!==x.mode||fe?me(ue,p,ne):x.gatewayClient.setClientRole("audience",function(pe){if(pe)return ne&&ne(pe);me(ue,p,ne)})},x.publish=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{callback:function(fe,me){if(fe)return 1===x.highStreamState&&"REQUEST_ABORT"!==fe&&(x.highStreamState=2),p&&p(fe)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!p}});2===x.highStreamState?ue._hasVideoTracks()||ue._hasAudioTracks()?(x.gatewayClient.publishRequestId=Object(oe.generateId)(),x._publish(ue,function(fe){return ne(null,fe)},function(fe){return ne(fe)})):ne(te.default.NO_TRACK_IN_STREAM):ne(te.default.STREAM_ALREADY_PUBLISHED)},x.unpublish=function(ue,p,ne){var fe=O.report.reportApiInvoke(ye.sessionId,{callback:function(me,pe){if(me)return p&&p(me);ne&&ne(pe)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!p}});0===x.highStreamState?(x.gatewayClient.publishRequestId=null,x._unpublish(ue,function(me){return fe(null,me)},function(me){return fe(me)})):fe(te.default.STREAM_NOT_YET_PUBLISHED)},x.subscribe=function(ue,p,ne){var fe=O.report.reportApiInvoke(ye.sessionId,{callback:function(J,_e){if(J)return ne&&ne(J)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:p,onFailure:!!ne}});"function"==typeof p&&(ne=p,p=null),Object(L.checkValidObject)(ue,"stream"),Object(L.isEmpty)(p)||(Object(L.checkValidObject)(p,"options"),Object(L.isEmpty)(p.video)||Object(L.checkValidBoolean)(p.video,"options.video"),Object(L.isEmpty)(p.audio)||Object(L.checkValidBoolean)(p.audio,"options.audio"));var me={video:!0,audio:!0};if(!Object(L.isEmpty)(p)){if(Object(N.isSafari)()&&(!p.video||!p.audio)){var pe="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return R.default.error("[".concat(x.clientId,"] "),pe),void fe(pe)}if(!Object(L.isEmpty)(p.video)&&!Object(L.isValidBoolean)(p.video)||!Object(L.isEmpty)(p.audio)&&!Object(L.isValidBoolean)(p.audio)||!1===p.audio&&!1===p.video)return pe="INVALID_PARAMETER ".concat(JSON.stringify(p)),R.default.error("[".concat(x.clientId,"] "),pe),void fe(pe)}ue.subscribeOptions?(ee()(ue.subscribeOptions,me,p),x.gatewayClient.subscribeChange(ue,function(J){return fe(null,J)},fe)):(x.gatewayClient.subscribeRequestId.set(ue.getId(),Object(oe.generateId)()),ue.subscribeOptions=ee()({},me,p),x.gatewayClient.subscribe(ue,function(J){return fe(null,J)},fe))},x.unsubscribe=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{callback:function(fe,me){if(fe)return p&&p(fe)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!p}});R.default.info("[".concat(x.clientId,"] Unsubscribe stream, uid: ").concat(ue.getId())),x.gatewayClient.subscribeRequestId.delete(ue.getId()),x.gatewayClient.unsubscribe(ue,function(fe){return ne(null,fe)},ne)},x.setRemoteVideoStreamType=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:p}});Object(L.checkValidEnum)(p,"streamType",[0,1]),x.gatewayClient.setRemoteVideoStreamType(ue,p),ne()},x.setStreamFallbackOption=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:p}});Object(L.checkValidEnum)(p,"fallbackType",[0,1,2]),x.gatewayClient.setStreamFallbackOption(ue,p),ne()},x.enableAudioVolumeIndicator=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});ue=ue||2e3,p=p||3,Object(L.checkValidNumber)(p,"smooth",1,100),Object(L.checkValidNumber)(ue,"interval",50,1e5),x.audioVolumeIndication=x.audioVolumeIndication||{enabled:!0},x.audioVolumeIndication.interval=ue,x.audioVolumeIndication.smooth=p,x.audioVolumeIndication={interval:ue,smooth:p},R.default.info("[".concat(x.clientId,"] enableAudioVolumeIndicator interval ").concat(ue," smooth ").concat(p)),x.gatewayClient.enableAudioVolumeIndicator(ue,p),ne()},x.getNetworkStats=function(ue,p){return R.default.deprecate("[".concat(x.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),K.getStats(ue,p)},x.getSystemStats=function(ue,p){return I.getStats(ue,p)},x.getRecordingDevices=function(ue,p){return m.a.getRecordingDevices(ue,p)},x.getPlayoutDevices=function(ue,p){return m.a.getPlayoutDevices(ue,p)},x.getCameras=function(ue,p){return m.a.getCameras(ue,p)},x.getRemoteAudioStats=function(ue,p){return x.rtcStatsCollector.getRemoteAudioStats(ue,p)},x.getLocalAudioStats=function(ue,p){return x.rtcStatsCollector.getLocalAudioStats(ue,p)},x.getRemoteVideoStats=function(ue,p){return x.rtcStatsCollector.getRemoteVideoStats(ue,p)},x.getLocalVideoStats=function(ue,p){return x.rtcStatsCollector.getLocalVideoStats(ue,p)},x._getRemoteVideoQualityStats=function(ue,p){return x.rtcStatsCollector.getRemoteVideoQualityStats(ue,p)},x._getRemoteAudioQualityStats=function(ue,p){return x.rtcStatsCollector.getRemoteAudioQualityStats(ue,p)},x.getTransportStats=function(ue,p){return x.rtcStatsCollector.getTransportStats(function(ne){return K.getStats(function(fe){var me=ee()({},ne,fe);ue&&ue(me)},p)},p)},x.getSessionStats=function(ue,p){return x.rtcStatsCollector.getSessionStats(ue,p)},x.onNetworkQuality=function(){return x.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},x.sendMetadata=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(fe){if(fe)return p&&p(fe);p&&p()}});x.gatewayClient.sendMetadata(ue,ne)},x.sendCustomReportMessage=function(ue,p,ne,fe,me,pe){Object(D.getParameter)("CR")?x.customReportCount>Object(D.getParameter)("CRL")?pe&&pe("REPORT_LIMITED"):(x.gatewayClient.hasJoined||(R.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),pe&&pe("REPORT_BEFORE_JOINED")),x.customReportTimer||(x.customReportTimer=setInterval(function(){x.customReportCount=0},Object(D.getParameter)("CRI"))),Object(L.checkValidString)(ue,"reportId",0,100,!1),Object(L.checkValidString)(p,"category",0,100,!1),Object(L.checkValidString)(ne,"event",0,100,!1),Object(L.checkValidString)(fe,"label",0,100,!1),Object(L.checkValidNumber)(me,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),x.customReportCount++,O.report.sendCustomReportMessage(ye.sessionId,{reportId:ue,category:p,event:ne,label:fe,value:me,lts:Date.now()},function(J){J?pe&&pe("REPORT_FAILED"):pe&&pe()})):pe&&pe("REPORT_FORBIDDEN")},x.setLocalAccessPoints=function(ue,p){var ne=O.report.reportApiInvoke(ye.sessionId,{name:"Client.setLocalAccessPoints",tag:"tracer"});if(Object(L.checkValidArray)(ue,"serverList"),Object(L.checkValidString)(p,"domain"),x.useProxyServer)throw new Error("You have already set the proxy");var fe=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;ue=ue.map(function(me){return fe.test(me)?"".concat(me.replace(/\./g,"-"),".").concat(p):me}),x.useLocalAccessPoint=!0,Object(D.setParameter)("WEBCS_DOMAIN",ue),Object(D.setParameter)("WEBCS_DOMAIN_BACKUP_LIST",ue),Object(D.setParameter)("GATEWAY_DOMAINS",[p]),Object(D.setParameter)("EVENT_REPORT_DOMAIN",ue[Math.floor(Math.random()*ue.length)]),Object(D.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",ue[Math.floor(Math.random()*ue.length)]),Object(D.setParameter)("LOG_UPLOAD_SERVER","".concat(ue[Math.floor(Math.random()*ue.length)],":6444")),ne()},ye.clientId=x.clientId,x.gatewayClient=Object(se.a)(ye),x.listenerLoggerTimer=null,x.listenerLoggerCache=[],x.on=function(ue,p){x.gatewayClient.on(ue,p),x.listenerLoggerCache.push("".concat(ue).concat(p.name?":"+p.name:"")),x.listenerLoggerTimer?clearTimeout(x.listenerLoggerTimer):R.default.info("[".concat(x.clientId,"] Adding event handler on ").concat(ue)),x.listenerLoggerTimer=setTimeout(function(){x.listenerLoggerCache.length&&(x.listenerLoggerTimer=null,R.default.info("[".concat(x.clientId,"] Added event handler on ").concat(x.listenerLoggerCache.join(", "))),x.listenerLoggerCache=[])},0)},x.off=function(ue,p){R.default.info("remove event handler from [".concat(ue,"]")),x.gatewayClient.removeEventListener(ue,p)},x.rtcStatsCollector=(ue=x.gatewayClient,(p=Object(T.b)()).gatewayClient=ue,p.exceptionMonitor=new u(ue),p.localStats={},p.remoteStats={},p.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},p.getRemoteAudioStats=function(ne){var fe=p.gatewayClient.traffic_stats,me={};for(var pe in p.remoteStats){var J={},_e=p.remoteStats[pe];if(Object(b.b)(J,"End2EndDelay",_e.peer_delay&&_e.peer_delay.audio_delay),Object(b.b)(J,"TransportDelay",_e.peer_delay&&_e.peer_delay.e2e_delay),Object(b.b)(J,"PacketLossRate",_e.peer_delay&&_e.peer_delay.e2e_audio_lost_ratio_400ms),Object(b.b)(J,"RecvLevel",_e.audioStats&&_e.audioStats.audioOutputLevel),Object(b.b)(J,"RecvBitrate",_e.audioRecvBitrate),Object(b.b)(J,"CodecType",_e.audioStats&&_e.audioStats.googCodecName),Object(b.b)(J,"MuteState",_e.audioDisabled),Object(b.b)(J,"TotalFreezeTime",_e.audioStats&&_e.audioStats.audioTotalFreezeTime),Object(b.b)(J,"TotalPlayDuration",_e.audioStats&&_e.audioStats.audioTotalPlayDuration),fe&&fe.peer_delay){var Se=fe.peer_delay.find(function(Ce){return Ce.peer_uid==pe});if(Se){var Re=Se.peer_publish_audio_duration+(Date.now()-fe.timestamp);Object(b.b)(J,"AudioPublishDuration",Re)}else Object(b.b)(J,"AudioPublishDuration",-1)}me[pe]=J}ne&&ne(me)},p.getLocalAudioStats=function(ne){var fe={};for(var me in p.localStats){var pe={},J=p.localStats[me];Object(b.b)(pe,"RecordingLevel",J.audioStats&&J.audioStats.audioInputLevel),Object(b.b)(pe,"SendLevel",J.audioStats&&J.audioStats.totalAudioEnergy),Object(b.b)(pe,"SamplingRate",J.audioStats&&J.audioStats.totalSamplesDuration),Object(b.b)(pe,"SendBitrate",J.audioSendBitrate),Object(b.b)(pe,"CodecType",J.audioStats&&J.audioStats.googCodecName),Object(b.b)(pe,"MuteState",J.audioDisabled),Object(b.b)(pe,"audioSendPacketsLost",J.audioStats&&J.audioStats.packetsLost);var _e=p.gatewayClient.localStreams[me];_e&&_e.isPlaying()&&Object(b.b)(pe,"MuteState",_e.userMuteAudio?"1":"0"),fe[me]=pe}ne&&ne(fe)},p.getRemoteVideoStats=function(ne){var fe=p.gatewayClient.traffic_stats,me={};for(var pe in p.remoteStats){var J={},_e=p.remoteStats[pe];if(Object(b.b)(J,"End2EndDelay",_e.peer_delay&&_e.peer_delay.video_delay),Object(b.b)(J,"TransportDelay",_e.peer_delay&&_e.peer_delay.e2e_delay),Object(b.b)(J,"PacketLossRate",_e.peer_delay&&_e.peer_delay.e2e_video_lost_ratio_400ms),Object(b.b)(J,"RecvBitrate",_e.videoRecvBitrate),Object(b.b)(J,"RecvResolutionWidth",_e.videoStats&&_e.videoStats.googFrameWidthReceived),Object(b.b)(J,"RecvResolutionHeight",_e.videoStats&&_e.videoStats.googFrameHeightReceived),Object(b.b)(J,"RenderResolutionWidth",_e.videoStats&&_e.videoStats.renderRemoteWidth),Object(b.b)(J,"RenderResolutionHeight",_e.videoStats&&_e.videoStats.renderRemoteHeight),Object(b.b)(J,"RenderFrameRate",_e.videoStats&&_e.videoStats.googFrameRateOutput),Object(b.b)(J,"MuteState",_e.videoDisabled),Object(b.b)(J,"TotalFreezeTime",_e.videoStats&&_e.videoStats.videoTotalFreezeTime),Object(b.b)(J,"TotalPlayDuration",_e.videoStats&&_e.videoStats.videoTotalPlayDuration),fe&&fe.peer_delay){var Se=fe.peer_delay.find(function(Ce){return Ce.peer_uid==pe});if(Se){var Re=Se.peer_publish_video_duration+(Date.now()-fe.timestamp);Object(b.b)(J,"VideoPublishDuration",Re)}else Object(b.b)(J,"VideoPublishDuration",-1)}me[pe]=J}ne&&ne(me)},p.getLocalVideoStats=function(ne){var fe={};for(var me in p.localStats){var pe={},J=p.localStats[me];Object(b.b)(pe,"TargetSendBitrate",J.videoTargetSendBitrate),Object(b.b)(pe,"SendFrameRate",J.videoStats&&J.videoStats.googFrameRateSent),Object(b.b)(pe,"SendBitrate",J.videoSendBitrate),Object(b.b)(pe,"SendResolutionWidth",J.videoStats&&J.videoStats.googFrameWidthSent),Object(b.b)(pe,"SendResolutionHeight",J.videoStats&&J.videoStats.googFrameHeightSent),Object(b.b)(pe,"CaptureResolutionWidth",J.videoStats&&J.videoStats.googFrameWidthInput),Object(b.b)(pe,"CaptureResolutionHeight",J.videoStats&&J.videoStats.googFrameHeightInput),Object(b.b)(pe,"EncodeDelay",J.videoStats&&J.videoStats.googAvgEncodeMs),Object(b.b)(pe,"MuteState",J.videoDisabled),Object(b.b)(pe,"TotalFreezeTime",J.videoStats&&J.videoStats.videoTotalFreezeTime),Object(b.b)(pe,"TotalDuration",J.videoStats&&J.videoStats.videoTotalPlayDuration),Object(b.b)(pe,"CaptureFrameRate",J.videoStats&&J.videoStats.googFrameRateSent),Object(b.b)(pe,"videoSendPacketsLost",J.videoStats&&J.videoStats.packetsLost),J.videoStats&&!J.videoStats.googFrameWidthInput&&Object(b.b)(pe,"CaptureResolutionWidth",J.videoStats&&J.videoStats.renderLocalWidth),J.videoStats&&!J.videoStats.googFrameHeightInput&&Object(b.b)(pe,"CaptureResolutionHeight",J.videoStats&&J.videoStats.renderLocalHeight),fe[me]=pe}ne&&ne(fe)},p.getRemoteVideoQualityStats=function(ne){var fe={};for(var me in p.remoteStats){var pe={},J=p.remoteStats[me];Object(b.b)(pe,"videoReceiveDelay",J.videoStats&&J.videoStats.googCurrentDelayMs),Object(b.b)(pe,"VideoFreezeRate",J.videoStats&&J.videoStats.videoFreezeRate),Object(b.b)(pe,"FirstFrameTime",J.firstFrameTime),fe[me]=pe}ne&&ne(fe)},p.getRemoteAudioQualityStats=function(ne){var fe={};for(var me in p.remoteStats){var pe={},J=p.remoteStats[me];Object(b.b)(pe,"audioReceiveDelay",J.audioStats&&J.audioStats.googCurrentDelayMs),Object(b.b)(pe,"AudioFreezeRate",J.videoStats&&J.videoStats.videoFreezeRate),fe[me]=pe}ne&&ne(fe)},p.getTransportStats=function(ne){var fe={},me={},pe=p.gatewayClient.traffic_stats,J=pe.peer_delay;if(Object(b.b)(fe,"OutgoingAvailableBandwidth",p.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(b.b)(fe,"RTT",pe&&2*pe.access_delay),J){var _e,Se=function(ye){if("undefined"==typeof Symbol||null==ye[Symbol.iterator]){if(Array.isArray(ye)||(ye=function(ue,p){if(ue){if("string"==typeof ue)return g(ue,p);var ne=Object.prototype.toString.call(ue).slice(8,-1);if("Object"===ne&&ue.constructor&&(ne=ue.constructor.name),"Map"===ne||"Set"===ne)return Array.from(ne);if("Arguments"===ne||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return g(ue,p)}}(ye))){var x=0,De=function(){};return{s:De,n:function(){return x>=ye.length?{done:!0}:{done:!1,value:ye[x++]}},e:function(ue){throw ue},f:De}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ue,Ve,Ke=!0,Ze=!1;return{s:function(){Ue=ye[Symbol.iterator]()},n:function(){var ue=Ue.next();return Ke=ue.done,ue},e:function(ue){Ze=!0,Ve=ue},f:function(){try{Ke||null==Ue.return||Ue.return()}finally{if(Ze)throw Ve}}}}(J);try{for(Se.s();!(_e=Se.n()).done;){var Re=_e.value;Re.downlink_estimate_bandwidth&&(me[Re.peer_uid]=Re.downlink_estimate_bandwidth/1e3+"")}}catch(Ce){Se.e(Ce)}finally{Se.f()}}fe.IncomingAvailableBandwidth=me,ne&&ne(fe)},p.getSessionStats=function(ne){var fe={},me=p.gatewayClient.traffic_stats,pe=p.gatewayClient.socket,J=0,_e=0;for(var Se in p.remoteStats)(Re=p.remoteStats[Se])&&Re.videoStats&&Re.videoStats.videoRecvBytesDelta&&(_e+=parseInt(Re.videoStats.videoRecvBytesDelta)),Re&&Re.audioStats&&Re.audioStats.audioRecvBytesDelta&&(_e+=parseInt(Re.audioStats.audioRecvBytesDelta));for(var Se in p.localStats){var Re;(Re=p.localStats[Se])&&Re.videoStats&&Re.videoStats.videoSendBytesDelta&&(J+=parseInt(Re.videoStats.videoSendBytesDelta)),Re&&Re.audioStats&&Re.audioStats.audioSendBytesDelta&&(J+=parseInt(Re.audioStats.audioSendBytesDelta))}var Ce=J+p.session.WSSendBytesDelta+p.session.HTTPSendBytesDelta,Be=_e+p.session.WSRecvBytesDelta+p.session.HTTPRecvBytesDelta,qe=p.session.sendBytes+Object(l.getHTTPSendBytes)(),He=p.session.recvBytes+Object(l.getHTTPRecvBytes)();p.gatewayClient.socket&&p.gatewayClient.socket.state===p.gatewayClient.CONNECTED&&(qe+=pe.getSendBytes(),He+=pe.getRecvBytes());var tt=1;me.peer_delay&&(tt=me.peer_delay.length,tt+=1),pe?Object(b.b)(fe,"Duration",pe.getDuration()):Object(b.b)(fe,"Duration",0),Object(b.b)(fe,"UserCount",tt),Object(b.b)(fe,"SendBytes",qe),Object(b.b)(fe,"RecvBytes",He),Object(b.b)(fe,"SendBitrate",8*Ce/1e3),Object(b.b)(fe,"RecvBitrate",8*Be/1e3),ne&&ne(fe)},p.isLocalVideoFreeze=function(ne,fe){var me=0,pe=0;if(!ne||!fe)return!1;if(Object(N.isChrome)()||Object(N.isOpera)())me=ne.googFrameRateInput,pe=ne.googFrameRateSent;else if(Object(N.isSafari)())me=parseInt(ne.framerateMean),pe=parseInt(ne.framesEncoded)-parseInt(fe.framesEncoded);else{if(!Object(N.isFireFox)())return!1;me=parseInt(ne.framerateMean),pe=parseInt(ne.framesEncoded)-parseInt(fe.framesEncoded)}return me>5&&pe<3},p.isRemoteVideoFreeze=function(ne,fe){var me=0,pe=0;if(!ne||!fe)return!1;if(Object(N.isChrome)()||Object(N.isOpera)())me=ne.googFrameRateReceived,pe=ne.googFrameRateDecoded;else if(Object(N.isSafari)())me=ne.framerateMean,pe=parseInt(ne.framesDecoded)-parseInt(fe.framesDecoded);else{if(!Object(N.isFireFox)())return!1;me=parseInt(ne.framesReceived)-parseInt(fe.framesReceived),pe=parseInt(ne.framesDecoded)-parseInt(fe.framesDecoded)}return me>5&&me<10&&pe<3||me>10&&me<20&&pe<4||me>20&&pe<5},p.isAudioFreeze=function(ne){if(Object(N.isChrome)()&&ne){if(ne.googDecodingPLC&&ne.googDecodingPLCCNG&&ne.googDecodingCTN)return(parseInt(ne.googDecodingPLC)+parseInt(ne.googDecodingPLCCNG))/parseInt(ne.googDecodingCTN)>.2}else if((Object(N.isSafari)()||Object(N.isFireFox)())&&ne.packetsLost&&ne.packetsReceived)return parseInt(ne.packetsLost)/(parseInt(ne.packetsLost)+parseInt(ne.packetsReceived))>.2;return!1},p.isAudioDecodeFailed=function(ne){return!!((Object(N.isChrome)()||Object(N.isOpera)())&&ne&&parseInt(ne.bytesReceived)>0&&0===parseInt(ne.googDecodingNormal))},p.startNetworkQualityTimer=function(){p.clearNetworkQualityTimer(),p.networkQualityTimer=setInterval(function(){if(p.gatewayClient.state===se.a.CONNECTED&&navigator.onLine){var ne=p.gatewayClient.traffic_stats;p.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:p.networkQualityTrans(ne.uplink_network_quality),downlinkNetworkQuality:p.networkQualityTrans(ne.downlink_network_quality)})}else p.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3)},p.clearNetworkQualityTimer=function(){p.networkQualityTimer&&clearInterval(p.networkQualityTimer)},p.networkQualityTrans=function(ne){return ne>=0&&ne<.17?1:ne>=.17&&ne<.36?2:ne>=.36&&ne<.59?3:ne>=.59&&ne<=1?4:ne>1?5:0},p.getStatsTimer=setInterval(function(){var ne=p.gatewayClient.traffic_stats,fe=Date.now();p.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(p.localStats).length&&p.exceptionMonitor.setLocalStats(p.localStats),Object.keys(p.remoteStats).length&&p.exceptionMonitor.setRemoteStats(p.remoteStats);var me={};Object.keys(p.gatewayClient.remoteStreams).forEach(function(_e){var Se=p.gatewayClient.remoteStreams[_e],Re=p.remoteStats[_e],Ce={id:_e,updatedAt:fe};me[_e]=Ce,Ce.firstFrameTime=Se.firstFrameTime,Re?(Ce.audioTotalPlayDuration=Re.audioTotalPlayDuration+1,Ce.audioTotalFreezeTime=Re.audioTotalFreezeTime,Ce.isAudioFreeze=!1,Ce.isAudioDecodeFailed=!1,Ce.videoTotalPlayDuration=Re.videoTotalPlayDuration+1,Ce.videoTotalFreezeTime=Re.videoTotalFreezeTime,Ce.isVideoFreeze=!1):(Ce.audioTotalPlayDuration=1,Ce.audioTotalFreezeTime=0,Ce.videoTotalPlayDuration=1,Ce.videoTotalFreezeTime=0);var Be=ne&&ne.peer_delay&&ne.peer_delay.find(function(qe){return qe.peer_uid==_e});Be&&(Ce.peer_delay=Be),Se&&(Se.isPlaying()&&(Ce.audioDisabled=Se.userMuteAudio||Se.peerMuteAudio?"1":"0",Ce.videoDisabled=Se.userMuteVideo||Se.peerMuteVideo?"1":"0"),Re&&Re.peer_delay&&Be&&Re.peer_delay.stream_type!==Be.stream_type&&p.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:_e,streamType:Be.stream_type}),Se.pc&&"established"==Se.pc.state&&Se.pc.getStats(function(qe){if(Ce.pcStats=qe,Ce.audioStats=qe.find(function(ot){return"audio"==ot.mediaType&&(ot.id.indexOf("_recv")>-1||ot.id.toLowerCase().indexOf("inbound")>-1)}),Ce.videoStats=qe.find(function(ot){return"video"==ot.mediaType&&(ot.id.indexOf("_recv")>-1||ot.id.toLowerCase().indexOf("inbound")>-1)}),Re&&Re.audioStats&&Ce.audioStats){var He=parseInt(Ce.audioStats.bytesReceived)-parseInt(Re.audioStats.bytesReceived),tt=parseInt(Ce.audioStats.googDecodingNormal)-parseInt(Re.audioStats.googDecodingNormal);if(Ce.audioStats.audioRecvBytesDelta=He,Ce.audioStats.audioDecodingNormalDelta=tt,p.session.recvBytes+=He,isFinite(He)&&Ce.audioStats.timestamp){var Ye=Ce.audioStats.timestamp.getTime()-Re.audioStats.timestamp.getTime();Ce.audioRecvBitrate=Math.floor(8*He/Ye)}p.isAudioFreeze(Ce.audioStats)&&Ce.audioTotalPlayDuration>10&&(Ce.audioTotalFreezeTime++,Ce.isAudioFreeze=!0),p.isAudioDecodeFailed(Ce.audioStats)&&Ce.audioTotalPlayDuration>10&&(Ce.isAudioDecodeFailed=!0),Ce.audioStats.audioTotalFreezeTime=Ce.audioTotalFreezeTime,Ce.audioStats.audioTotalPlayDuration=Ce.audioTotalPlayDuration,Ce.audioStats.audioFreezeRate=Math.ceil(100*Ce.audioTotalFreezeTime/Ce.audioTotalPlayDuration)}if(Re&&Re.videoStats&&Ce.videoStats){var St=parseInt(Ce.videoStats.bytesReceived)-parseInt(Re.videoStats.bytesReceived);Ce.videoStats.videoRecvBytesDelta=St,p.session.recvBytes+=St,isFinite(St)&&Ce.videoStats.timestamp&&(Ye=Ce.videoStats.timestamp.getTime()-Re.videoStats.timestamp.getTime(),Ce.videoRecvBitrate=Math.floor(8*St/Ye)),p.isRemoteVideoFreeze(Ce.videoStats,Re.videoStats)&&(Ce.videoTotalFreezeTime++,Ce.isVideoFreeze=!0),Ce.videoStats.videoTotalFreezeTime=Ce.videoTotalFreezeTime,Ce.videoStats.videoTotalPlayDuration=Ce.videoTotalPlayDuration,Ce.videoStats.videoFreezeRate=Math.ceil(100*Ce.videoTotalFreezeTime/Ce.videoTotalPlayDuration),Se.player&&Se.player.video&&Se.player.video.videoWidth&&Se.player.video.videoHeight?(Ce.videoStats.renderRemoteWidth=Se.player.video.videoWidth,Ce.videoStats.renderRemoteHeight=Se.player.video.videoHeight):(Ce.videoStats.renderRemoteWidth=Se.videoWidth||Ce.videoStats.googFrameWidthReceived,Ce.videoStats.renderRemoteHeight=Se.videoHeight||Ce.videoStats.googFrameHeightReceived)}}))}),p.remoteStats=me;var pe={};if(Object.keys(p.gatewayClient.localStreams).forEach(function(_e){var Se=p.gatewayClient.localStreams[_e],Re=p.localStats[_e],Ce={id:_e,updatedAt:fe};pe[_e]=Ce,Re?(Ce.videoTotalPlayDuration=Re.videoTotalPlayDuration+1,Ce.videoTotalFreezeTime=Re.videoTotalFreezeTime,Ce.isVideoFreeze=!1):(Ce.videoTotalPlayDuration=1,Ce.videoTotalFreezeTime=0),Se&&(Se.isPlaying()&&(Ce.audioDisabled=Se.userMuteAudio?"1":"0",Ce.videoDisabled=Se.userMuteVideo?"1":"0"),Se.video&&Se.attributes.maxVideoBW?Ce.videoTargetSendBitrate=Se.attributes.maxVideoBW:Se.video&&Se.screenAttributes&&(Ce.videoTargetSendBitrate=Se.screenAttributes.maxVideoBW),Se.pc&&"established"==Se.pc.state&&Se.pc.getStats(function(Be){if(Ce.pcStats=Be.reverse(),Ce.audioStats=Be.find(function(Ye){return"audio"==Ye.mediaType&&(Ye.id.indexOf("_send")>-1||Ye.id.toLowerCase().indexOf("outbound")>-1)}),Ce.videoStats=Be.find(function(Ye){return"video"==Ye.mediaType&&(Ye.id.indexOf("_send")>-1||Ye.id.toLowerCase().indexOf("outbound")>-1)}),Ce.audioStats&&Re&&Re.audioStats){var qe=parseInt(Ce.audioStats.bytesSent)-parseInt(Re.audioStats.bytesSent);if(Ce.audioStats.audioSendBytesDelta=qe,p.session.sendBytes+=qe,isFinite(qe)&&Ce.audioStats.timestamp){var He=Ce.audioStats.timestamp.getTime()-Re.audioStats.timestamp.getTime();Ce.audioSendBitrate=Math.floor(8*qe/He)}}if(Ce.videoStats&&Re&&Re.videoStats){var tt=parseInt(Ce.videoStats.bytesSent)-parseInt(Re.videoStats.bytesSent);Ce.videoStats.videoSendBytesDelta=tt,p.session.sendBytes+=tt,isFinite(tt)&&Ce.videoStats.timestamp&&(He=Ce.videoStats.timestamp.getTime()-Re.videoStats.timestamp.getTime(),Ce.videoSendBitrate=Math.floor(8*tt/He)),p.isLocalVideoFreeze(Ce.videoStats,Re.videoStats)&&(Ce.videoTotalFreezeTime++,Ce.isVideoFreeze=!0),Ce.videoStats.videoTotalFreezeTime=Ce.videoTotalFreezeTime,Ce.videoStats.videoTotalPlayDuration=Ce.videoTotalPlayDuration,Ce.videoStats.videoFreezeRate=Math.ceil(100*Ce.videoTotalFreezeTime/Ce.videoTotalPlayDuration),Ce.videoStats.renderLocalWidth=Se.videoWidth||Ce.videoStats.googFrameWidthSent,Ce.videoStats.renderLocalHeight=Se.videoHeight||Ce.videoStats.googFrameHeightSent}}))}),p.localStats=pe,p.session.HTTPSendBytesDelta=Object(l.getHTTPSendBytes)()-p.session.HTTPSendBytes,p.session.HTTPSendBytes=Object(l.getHTTPSendBytes)(),p.session.HTTPRecvBytesDelta=Object(l.getHTTPRecvBytes)()-p.session.HTTPRecvBytes,p.session.HTTPRecvBytes=Object(l.getHTTPRecvBytes)(),p.gatewayClient.socket&&p.gatewayClient.socket.state===p.gatewayClient.CONNECTED){var J=p.gatewayClient.socket;p.session.WSSendBytesDelta=J.getSendBytes()-p.session.WSSendBytes,p.session.WSSendBytes=J.getSendBytes(),p.session.WSRecvBytesDelta=J.getRecvBytes()-p.session.WSRecvBytes,p.session.WSRecvBytes=J.getRecvBytes()}},1e3),p.gatewayClient.on("join",function(){p.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}}),p),x.configDistributManager=function(ue){var p={};return p.client=ue,p.client.gatewayClient&&p.client.gatewayClient.on("config-distribute",function(ne){var fe=ne.joinInfo,me=ne.config;if(me){Object(L.isEmpty)(me.uploadLog)||(Object(D.setParameter)("UPLOAD_LOG",me.uploadLog),O.report.reportApiInvoke(fe.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:me.uploadLog}})()),Object(L.isEmpty)(me.dualStream)||(ue.isDualStream=me.dualStream,O.report.reportApiInvoke(fe.sid,{name:"_configDistribute",options:{feature:"dualStream",value:me.dualStream}})()),Object(L.isEmpty)(me.streamFallbackOption)||p.client.gatewayClient&&p.client.gatewayClient.on("stream-subscribed",function(pe){var J=pe.stream;J?(p.client.gatewayClient.setStreamFallbackOption(J,me.streamFallbackOption),O.report.reportApiInvoke(fe.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:me.streamFallbackOption,streamId:J.getId()}})()):O.report.reportApiInvoke(fe.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:me.streamFallbackOption,streamId:J.getId(),err:"invalid stream"}})()});try{R.default.debug("[".concat(ue.clientId,"] setParameter in distribution: ").concat(JSON.stringify(me))),Object.keys(me).map(function(pe){return Object(D.setParameter)(pe,me[pe])})}catch(pe){R.default.debug("[".concat(ue.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(me)))}}}),p}(x),Object(ie.addLiveStreamingCapability)(x,ye),ye.areaCode){var Ue=ye.areaCode,Ve=ye.excludedArea,Ke=Object(F.getAreaCodeByConfig)({areaCode:Ue,excludedArea:Ve});Object(D.setParameter)("AREA_SETTING",Ke);var Ze=Object(F.getAreaDomainConfig)(Ke);Object.keys(Ze).map(function(ue){var p=Ze[ue];"LOG_UPLOAD_SERVER"==ue||"EVENT_REPORT_DOMAIN"==ue||"EVENT_REPORT_BACKUP_DOMAIN"==ue||"NGINX"==ue?Object(D.setParameter)(ue,p[0]):Object(D.setParameter)(ue,p)})}return Object(L.isEmpty)(ye.turnServer)||x.setTurnServer(ye.turnServer),Object(L.isEmpty)(ye.proxyServer)||x.setProxyServer(ye.proxyServer),"live"===x.mode&&(x.gatewayClient.role="audience"),"rtc"===x.mode&&(x.gatewayClient.role=de),x.gatewayClient.on("onMultiIP",function(ue){x.gatewayClient.closeGateway(),x.gatewayClient.socket=void 0,x.gatewayClient.hasChangeBGPAddress=!0,x.joinInfo.multiIP=ue.option,x.gatewayClient.state=se.a.CONNECTING;var p=function(ne){R.default.info("[".concat(x.clientId,"] Joining channel: ").concat(x.channel)),x.joinInfo.cid=ne.cid,x.joinInfo.uid||(x.joinInfo.uid=ne.uid),x.joinInfo.uni_lbs_ip=ne.uni_lbs_ip,x.joinInfo.gatewayAddr=ne.gateway_addr,x.onSuccess?x.gatewayClient.join(x.joinInfo,x.key,function(fe){R.default.info("[".concat(x.clientId,"] Join channel ").concat(x.channel," success"));var me=x.onSuccess;x.onSuccess=null,x.onFailure=null,me(fe)},x.onFailure):(x.gatewayClient.joinInfo=ee()({},x.joinInfo),x.gatewayClient.rejoin())};x.joinInfo.stringUid&&!x.joinInfo.uid?(x.userAccountReq&&!x.userAccountReq.isFinished()&&x.userAccountReq.cancel(),x.userAccountReq=Object($.getUserAccount)(joinInfo,x.gatewayClient),x.userAccountReq.then(function(ne){R.default.error("getUserAccount Success ".concat(ne.url," ").concat(joinInfo.stringUid," => ").concat(ne.uid)),x.joinInfo.uid=ne.uid,Object($.getGatewayList)(x.joinInfo,p,x.onFailure)}).catch(function(ne){R.default.error("getUserAccount rejected",ne),x.onFailure(ne)})):Object($.getGatewayList)(x.joinInfo,p,x.onFailure)}),x.gatewayClient.on("rejoin-start",function(){x._renewSession(),O.report.sessionInit(ye.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:x.channel,appid:ye.appId,mode:ye.mode,succ:!0})}),x.gatewayClient.on("recover",function(){x._renewSession(),console.log("recover",ye.sessionId),O.report.sessionInit(ye.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:x.channel,appid:ye.appId,mode:ye.mode,succ:!0})}),x.gatewayClient.on("rejoin",function(){var ue=x.highStreamState;if(R.default.debug("[".concat(x.clientId,"] Client local stream preState: ").concat(ue)),x.onSuccess){var p=x.onSuccess;x.onSuccess=null,x.onFailure=null,p(x.joinInfo.uid)}!x.highStream||0!==ue&&1!==ue||(R.default.info("[".concat(x.clientId,"] publish after rejoin")),x.highStreamState=2,x.lowStreamState=2,x.publish(x.highStream,function(ne){ne&&R.default.info("[".concat(x.clientId,"] "),ne)}))}),x.gatewayClient.on("streamPublished",function(ue){x.hasPublished||(x.hasPublished=!0,x.gatewayClient.dispatchEvent({type:"stream-published",stream:ue.stream,proxy:ue.proxy}))}),x.gatewayClient.on("pubP2PLost",function(ue){R.default.debug("[".concat(x.clientId,"] Start reconnect local peerConnection: ").concat(x.highStream.getId())),x.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:x.highStream.getId()}),1===x.highStreamState&&(x.highStreamState=0,x.lowStreamState=0),x._unpublish(x.highStream,function(){x._publish(x.highStream,function(){R.default.debug("[".concat(x.clientId,"] Reconnect local peerConnection success: ").concat(x.highStream.getId())),x.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:x.highStream.getId(),success:!0,reason:""})},function(p){R.default.debug("[".concat(x.clientId,"] Reconnect local peerConnection failed: ").concat(p)),x.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:x.highStream.getId(),success:!1,reason:p})},!0)},function(p){R.default.debug("[".concat(x.clientId,"] Reconnect local peerConnection failed: ").concat(p)),x.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:x.highStream.getId(),success:!1,reason:p})},!0)}),x.gatewayClient.on("subP2PLost",function(ue){R.default.debug("[".concat(x.clientId,"] Start reconnect remote peerConnection: ").concat(ue.stream.getId()," ").concat(ue.stream.subscribeOptions)),x.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:ue.stream.getId()});var p=ue.stream.subscribeOptions;console.log("Re-subscribe stream",p,ue.stream),x.gatewayClient.unsubscribe(ue.stream,function(){ue.stream.subscribeOptions=p,x.gatewayClient.subscribe(ue.stream,function(){R.default.debug("[".concat(x.clientId,"] Reconnect remote peerConnection success: ").concat(ue.stream.getId())),x.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:ue.stream.getId(),success:!0,reason:""})},function(ne){R.default.debug("[".concat(x.clientId,"] Reconnect remote peerConnection failed: "),ne),x.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:ue.stream.getId(),success:!1,reason:ne})})},function(ne){R.default.debug("[".concat(x.clientId,"] Reconnect remote peerConnection failed: "),ne),x.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:ue.stream.getId(),success:!1,reason:ne})})}),K.on("networkTypeChanged",function(ue){x.gatewayClient&&x.gatewayClient.dispatchEvent(ue);var p=ee()({},ue,{type:"network-type-changed"});x.gatewayClient.dispatchEvent(p)}),m.a.on("recordingDeviceChanged",function(ue){x.gatewayClient&&x.gatewayClient.dispatchEvent(ue);var p=ee()({},ue,{type:"recording-device-changed"});x.gatewayClient.dispatchEvent(p)}),m.a.on("playoutDeviceChanged",function(ue){x.gatewayClient&&x.gatewayClient.dispatchEvent(ue);var p=ee()({},ue,{type:"playout-device-changed"});x.gatewayClient.dispatchEvent(p)}),m.a.on("cameraChanged",function(ue){x.gatewayClient&&x.gatewayClient.dispatchEvent(ue);var p=ee()({},ue,{type:"camera-changed"});x.gatewayClient.dispatchEvent(p)}),x.gatewayClient.on("streamTypeChange",function(ue){var p=ee()({},ue,{type:"stream-type-changed"});x.gatewayClient.dispatchEvent(p),O.report.reportApiInvoke(ye.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(ue))}),x},Me=function(ye){switch(ye){case"h264_interop":return"h264";default:return"vp8"}},Oe=function(ye){return-1===w.indexOf(ye.mode)?te.default.INVALID_CLIENT_MODE:-1===E.indexOf(ye.codec)?te.default.INVALID_CLIENT_CODEC:"h264_interop"==ye.mode&&"h264"!==ye.codec&&te.default.CLIENT_MODE_CODEC_MISMATCH},Ae=function(ye){switch(ye.mode){case"interop":case"h264_interop":ye.mode="live";break;case"web-only":ye.mode="rtc"}},Le=m.a.getDevices,We=v.a.getScreenSources,f=JSON.parse(JSON.stringify(D.SUPPORT_RESOLUTION_LIST));re.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function(ye){var x=O.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(ye=ee()({},ye||{})).codec||(ye.codec=Me(ye.mode));var De=Oe(ye);if(De)throw R.default.error("Invalid parameter setting MODE: ".concat(ye.mode," CODEC: ").concat(ye.codec," ERROR ").concat(De)),x(De),new Error(De);return R.default.info("Creating client, MODE: ".concat(ye.mode," CODEC: ").concat(ye.codec)),Ae(ye),x(null,ye),ce(ye)},createStream:h.b,Logger:R.default,report:O.report,getDevices:Le,getScreenSources:We,getParameter:D.getParameter,setParameter:D.setParameter,checkSystemRequirements:function(){var ye=O.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),x=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,De=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,Ue=window.WebSocket,Ve=!!x&&!!De&&!!Ue,Ke=!1;N.isChrome()&&N.getBrowserVersion()>=58&&"iOS"!==N.getBrowserOS()&&(Ke=!0),N.isFireFox()&&N.getBrowserVersion()>=56&&(Ke=!0),N.isOpera()&&N.getBrowserVersion()>=45&&(Ke=!0),N.isSafari()&&N.getBrowserVersion()>=11&&(Ke=!0),N.isEdge()&&(Ke=!0),(N.isWeChatBrowser()||N.isQQBrowser())&&"iOS"!==N.getBrowserOS()&&(Ke=!0),N.isSupportedPC()||N.isSupportedMobile()||(Ke=!1),R.default.debug(N.getBrowserInfo(),"isAPISupport: "+Ve+", isVendorAndVersionSupport: "+Ke);var Ze=Ve&&Ke;return ye(null,Ze),Ze},getSupportedCodec:k.getSupportedCodec,ChannelMediaRelayConfiguration:B.ChannelMediaRelayConfiguration,VERSION:D.VERSION,BUILD:D.BUILD,PROFILE_TABLE:f,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:F.AREAS,AREA_VERSION:"global"}}]).default},module.exports=re()},344:(le,re,j)=>{"use strict";function D(r){return"function"==typeof r}let R=!1;const O={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else R&&console.log("RxJS: Back to a better error behavior. Thank you. <3");R=r},get useDeprecatedSynchronousErrorHandling(){return R}};function T(r){setTimeout(()=>{throw r},0)}const N={closed:!0,next(r){},error(r){if(O.useDeprecatedSynchronousErrorHandling)throw r;T(r)},complete(){}},y=Array.isArray||(r=>r&&"number"==typeof r.length);function I(r){return null!==r&&"object"==typeof r}const m=(()=>{function r(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,i)=>`${i+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r})();class v{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof v)n.remove(this);else if(null!==n)for(let a=0;a<n.length;++a)n[a].remove(this);if(D(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){t=a instanceof m?k(a.errors):[a]}}if(y(s)){let a=-1,c=s.length;for(;++a<c;){const d=s[a];if(I(d))try{d.unsubscribe()}catch(S){t=t||[],S instanceof m?t=t.concat(k(S.errors)):t.push(S)}}}if(t)throw new m(t)}add(t){let n=t;if(!t)return v.EMPTY;switch(typeof t){case"function":n=new v(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof v)){const s=n;n=new v,n._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof v){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}remove(t){const n=this._subscriptions;if(n){const i=n.indexOf(t);-1!==i&&n.splice(i,1)}}}var r;function k(r){return r.reduce((t,n)=>t.concat(n instanceof m?n.errors:n),[])}v.EMPTY=((r=new v).closed=!0,r);const B="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class E extends v{constructor(t,n,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=N;break;case 1:if(!t){this.destination=N;break}if("object"==typeof t){t instanceof E?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new U(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new U(this,t,n,i)}}[B](){return this}static create(t,n,i){const o=new E(t,n,i);return o.syncErrorThrowable=!1,o}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class U extends E{constructor(t,n,i,o){super(),this._parentSubscriber=t;let s,a=this;D(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==N&&(a=Object.create(n),D(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=i,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;O.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:i}=O;if(this._error)i&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=t,n.syncErrorThrown=!0):T(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;T(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const n=()=>this._complete.call(this._context);O.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,n){try{t.call(this._context,n)}catch(i){if(this.unsubscribe(),O.useDeprecatedSynchronousErrorHandling)throw i;T(i)}}__tryOrSetError(t,n,i){if(!O.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(o){return O.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=o,t.syncErrorThrown=!0,!0):(T(o),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const V="function"==typeof Symbol&&Symbol.observable||"@@observable";function ee(r){return r}let oe=(()=>{class r{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const i=new r;return i.source=this,i.operator=n,i}subscribe(n,i,o){const{operator:s}=this,a=function(r,t,n){if(r){if(r instanceof E)return r;if(r[B])return r[B]()}return r||t||n?new E(r,t,n):new E(N)}(n,i,o);if(a.add(s?s.call(a,this.source):this.source||O.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),O.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(n){try{return this._subscribe(n)}catch(i){O.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=i),function(r){for(;r;){const{closed:t,destination:n,isStopped:i}=r;if(t||i)return!1;r=n&&n instanceof E?n:null}return!0}(n)?n.error(i):console.warn(i)}}forEach(n,i){return new(i=$(i))((o,s)=>{let a;a=this.subscribe(c=>{try{n(c)}catch(d){s(d),a&&a.unsubscribe()}},s,o)})}_subscribe(n){const{source:i}=this;return i&&i.subscribe(n)}[V](){return this}pipe(...n){return 0===n.length?this:function(r){return 0===r.length?ee:1===r.length?r[0]:function(n){return r.reduce((i,o)=>o(i),n)}}(n)(this)}toPromise(n){return new(n=$(n))((i,o)=>{let s;this.subscribe(a=>s=a,a=>o(a),()=>i(s))})}}return r.create=t=>new r(t),r})();function $(r){if(r||(r=O.Promise||Promise),!r)throw new Error("no Promise impl found");return r}const l=(()=>{function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r})();class H extends v{constructor(t,n){super(),this.subject=t,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,n=t.observers;if(this.subject=null,!n||0===n.length||t.isStopped||t.closed)return;const i=n.indexOf(this.subscriber);-1!==i&&n.splice(i,1)}}class _ extends E{constructor(t){super(t),this.destination=t}}let u=(()=>{class r extends oe{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[B](){return new _(this)}lift(n){const i=new q(this,this);return i.operator=n,i}next(n){if(this.closed)throw new l;if(!this.isStopped){const{observers:i}=this,o=i.length,s=i.slice();for(let a=0;a<o;a++)s[a].next(n)}}error(n){if(this.closed)throw new l;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:i}=this,o=i.length,s=i.slice();for(let a=0;a<o;a++)s[a].error(n);this.observers.length=0}complete(){if(this.closed)throw new l;this.isStopped=!0;const{observers:n}=this,i=n.length,o=n.slice();for(let s=0;s<i;s++)o[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new l;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new l;return this.hasError?(n.error(this.thrownError),v.EMPTY):this.isStopped?(n.complete(),v.EMPTY):(this.observers.push(n),new H(this,n))}asObservable(){const n=new oe;return n.source=this,n}}return r.create=(t,n)=>new q(t,n),r})();class q extends u{constructor(t,n){super(),this.destination=t,this.source=n}next(t){const{destination:n}=this;n&&n.next&&n.next(t)}error(t){const{destination:n}=this;n&&n.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:n}=this;return n?this.source.subscribe(t):v.EMPTY}}function g(r){return r&&"function"==typeof r.schedule}function C(r,t){return function(i){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new L(r,t))}}class L{constructor(t,n){this.project=t,this.thisArg=n}call(t,n){return n.subscribe(new K(t,this.project,this.thisArg))}}class K extends E{constructor(t,n,i){super(t),this.project=n,this.count=0,this.thisArg=i||this}_next(t){let n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(n)}}const ie=r=>t=>{for(let n=0,i=r.length;n<i&&!t.closed;n++)t.next(r[n]);t.complete()},W="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",de=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function ce(r){return!!r&&"function"!=typeof r.subscribe&&"function"==typeof r.then}const Te=r=>{if(r&&"function"==typeof r[V])return(r=>t=>{const n=r[V]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(r);if(de(r))return ie(r);if(ce(r))return(r=>t=>(r.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,T),t))(r);if(r&&"function"==typeof r[W])return(r=>t=>{const n=r[W]();for(;;){let i;try{i=n.next()}catch(o){return t.error(o),t}if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(r);{const n=`You provided ${I(r)?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function Ae(r,t){return new oe(n=>{const i=new v;let o=0;return i.add(t.schedule(function(){o!==r.length?(n.next(r[o++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function x(r,t){return t?function(r,t){if(null!=r){if(function(r){return r&&"function"==typeof r[V]}(r))return function(r,t){return new oe(n=>{const i=new v;return i.add(t.schedule(()=>{const o=r[V]();i.add(o.subscribe({next(s){i.add(t.schedule(()=>n.next(s)))},error(s){i.add(t.schedule(()=>n.error(s)))},complete(){i.add(t.schedule(()=>n.complete()))}}))})),i})}(r,t);if(ce(r))return function(r,t){return new oe(n=>{const i=new v;return i.add(t.schedule(()=>r.then(o=>{i.add(t.schedule(()=>{n.next(o),i.add(t.schedule(()=>n.complete()))}))},o=>{i.add(t.schedule(()=>n.error(o)))}))),i})}(r,t);if(de(r))return Ae(r,t);if(function(r){return r&&"function"==typeof r[W]}(r)||"string"==typeof r)return function(r,t){if(!r)throw new Error("Iterable cannot be null");return new oe(n=>{const i=new v;let o;return i.add(()=>{o&&"function"==typeof o.return&&o.return()}),i.add(t.schedule(()=>{o=r[W](),i.add(t.schedule(function(){if(n.closed)return;let s,a;try{const c=o.next();s=c.value,a=c.done}catch(c){return void n.error(c)}a?n.complete():(n.next(s),this.schedule())}))})),i})}(r,t)}throw new TypeError((null!==r&&typeof r||r)+" is not observable")}(r,t):r instanceof oe?r:new oe(Te(r))}class De extends E{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ve extends E{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function Ze(r,t){if(t.closed)return;if(r instanceof oe)return r.subscribe(t);let n;try{n=Te(r)(t)}catch(i){t.error(i)}return n}function ue(r,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(ue((o,s)=>x(r(o,s)).pipe(C((a,c)=>t(o,a,s,c))),n)):("number"==typeof t&&(n=t),i=>i.lift(new p(r,n)))}class p{constructor(t,n=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=n}call(t,n){return n.subscribe(new ne(t,this.project,this.concurrent))}}class ne extends Ve{constructor(t,n,i=Number.POSITIVE_INFINITY){super(t),this.project=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let n;const i=this.index++;try{n=this.project(t,i)}catch(o){return void this.destination.error(o)}this.active++,this._innerSub(n)}_innerSub(t){const n=new De(this),i=this.destination;i.add(n);const o=Ze(t,n);o!==n&&i.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function me(r=Number.POSITIVE_INFINITY){return ue(ee,r)}function pe(r,t){return t?Ae(r,t):new oe(ie(r))}function J(...r){let t=Number.POSITIVE_INFINITY,n=null,i=r[r.length-1];return g(i)?(n=r.pop(),r.length>1&&"number"==typeof r[r.length-1]&&(t=r.pop())):"number"==typeof i&&(t=r.pop()),null===n&&1===r.length&&r[0]instanceof oe?r[0]:me(t)(pe(r,n))}function _e(){return function(t){return t.lift(new Se(t))}}class Se{constructor(t){this.connectable=t}call(t,n){const{connectable:i}=this;i._refCount++;const o=new Re(t,i),s=n.subscribe(o);return o.closed||(o.connection=i.connect()),s}}class Re extends E{constructor(t,n){super(t),this.connectable=n}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const n=t._refCount;if(n<=0)return void(this.connection=null);if(t._refCount=n-1,n>1)return void(this.connection=null);const{connection:i}=this,o=t._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()}}class Ce extends oe{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new v,t.add(this.source.subscribe(new qe(this.getSubject(),this))),t.closed&&(this._connection=null,t=v.EMPTY)),t}refCount(){return _e()(this)}}const Be=(()=>{const r=Ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}})();class qe extends _{constructor(t,n){super(t),this.connectable=n}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const n=t._connection;t._refCount=0,t._subject=null,t._connection=null,n&&n.unsubscribe()}}}function ot(){return new u}function rt(r){for(let t in r)if(r[t]===rt)return t;throw Error("Could not find renamed property on target object.")}function jn(r,t){for(const n in t)t.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(r[n]=t[n])}function lt(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(lt).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Bi(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const ts=rt({__forward_ref__:rt});function Wt(r){return r.__forward_ref__=Wt,r.toString=function(){return lt(this())},r}function nt(r){return Hm(r)?r():r}function Hm(r){return"function"==typeof r&&r.hasOwnProperty(ts)&&r.__forward_ref__===Wt}class _o extends Error{constructor(t,n){super(function(r,t){return`${r?`NG0${r}: `:""}${t}`}(t,n)),this.code=t}}function _t(r){return"string"==typeof r?r:null==r?"":String(r)}function Un(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():_t(r)}function nu(r,t){const n=t?` in ${t}`:"";throw new _o("201",`No provider for ${Un(r)} found${n}`)}function sr(r,t){null==r&&function(r,t,n,i){throw new Error(`ASSERTION ERROR: ${r}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,r,null,"!=")}function Xe(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function xt(r){return{providers:r.providers||[],imports:r.imports||[]}}function Ci(r){return Wm(r,ru)||Wm(r,qm)}function Wm(r,t){return r.hasOwnProperty(t)?r[t]:null}function Gm(r){return r&&(r.hasOwnProperty(Yd)||r.hasOwnProperty(_A))?r[Yd]:null}const ru=rt({\u0275prov:rt}),Yd=rt({\u0275inj:rt}),qm=rt({ngInjectableDef:rt}),_A=rt({ngInjectorDef:rt});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Jd;function Hi(r){const t=Jd;return Jd=r,t}function zm(r,t,n){const i=Ci(r);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&st.Optional?null:void 0!==t?t:void nu(lt(r),"Injector")}function Wi(r){return{toString:r}.toString()}var _r=(()=>((_r=_r||{})[_r.OnPush=0]="OnPush",_r[_r.Default=1]="Default",_r))(),ln=(()=>((ln=ln||{})[ln.Emulated=0]="Emulated",ln[ln.None=2]="None",ln[ln.ShadowDom=3]="ShadowDom",ln))();const vA="undefined"!=typeof globalThis&&globalThis,EA="undefined"!=typeof window&&window,bA="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,SA="undefined"!=typeof global&&global,Ft=vA||SA||EA||bA,ns={},Gt=[],iu=rt({\u0275cmp:rt}),Qd=rt({\u0275dir:rt}),Xd=rt({\u0275pipe:rt}),$m=rt({\u0275mod:rt}),CA=rt({\u0275loc:rt}),Ti=rt({\u0275fac:rt}),Ca=rt({__NG_ELEMENT_ID__:rt});let TA=0;function An(r){return Wi(()=>{const n={},i={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===_r.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||Gt,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||ln.Emulated,id:"c",styles:r.styles||Gt,_:null,setInput:null,schemas:r.schemas||null,tView:null},o=r.directives,s=r.features,a=r.pipes;return i.id+=TA++,i.inputs=Qm(r.inputs,n),i.outputs=Qm(r.outputs),s&&s.forEach(c=>c(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Km):null,i.pipeDefs=a?()=>("function"==typeof a?a():a).map(Ym):null,i})}function Km(r){return Bn(r)||function(r){return r[Qd]||null}(r)}function Ym(r){return function(r){return r[Xd]||null}(r)}const Jm={};function Bt(r){return Wi(()=>{const t={type:r.type,bootstrap:r.bootstrap||Gt,declarations:r.declarations||Gt,imports:r.imports||Gt,exports:r.exports||Gt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(Jm[r.id]=r.type),t})}function Qm(r,t){if(null==r)return ns;const n={};for(const i in r)if(r.hasOwnProperty(i)){let o=r[i],s=o;Array.isArray(o)&&(s=o[1],o=o[0]),n[o]=i,t&&(t[o]=s)}return n}const Je=An;function Qn(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Bn(r){return r[iu]||null}function yr(r,t){const n=r[$m]||null;if(!n&&!0===t)throw new Error(`Type ${lt(r)} does not have '\u0275mod' property.`);return n}function ei(r){return Array.isArray(r)&&"object"==typeof r[1]}function Pr(r){return Array.isArray(r)&&!0===r[1]}function tf(r){return 0!=(8&r.flags)}function cu(r){return 2==(2&r.flags)}function uu(r){return 1==(1&r.flags)}function Lr(r){return null!==r.template}function NA(r){return 0!=(512&r[2])}function So(r,t){return r.hasOwnProperty(Ti)?r[Ti]:null}class Zm{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function bn(){return e_}function e_(r){return r.type.prototype.ngOnChanges&&(r.setInput=LA),PA}function PA(){const r=n_(this),t=null==r?void 0:r.current;if(t){const n=r.previous;if(n===ns)r.previous=t;else for(let i in t)n[i]=t[i];r.current=null,this.ngOnChanges(t)}}function LA(r,t,n,i){const o=n_(r)||function(r,t){return r[t_]=t}(r,{previous:ns,current:null}),s=o.current||(o.current={}),a=o.previous,c=this.declaredInputs[n],d=a[c];s[c]=new Zm(d&&d.currentValue,t,a===ns),r[i]=t}bn.ngInherit=!0;const t_="__ngSimpleChanges__";function n_(r){return r[t_]||null}const r_="http://www.w3.org/2000/svg";let of;function nn(r){return!!r.listen}const o_={createRenderer:(r,t)=>void 0!==of?of:"undefined"!=typeof document?document:void 0};function dn(r){for(;Array.isArray(r);)r=r[0];return r}function lu(r,t){return dn(t[r])}function br(r,t){return dn(t[r.index])}function af(r,t){return r.data[t]}function cr(r,t){const n=t[r];return ei(n)?n:n[0]}function s_(r){return 4==(4&r[2])}function cf(r){return 128==(128&r[2])}function qi(r,t){return null==t?null:r[t]}function a_(r){r[18]=0}function uf(r,t){r[5]+=t;let n=r,i=r[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const ft={lFrame:g_(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function c_(){return ft.bindingsEnabled}function Pe(){return ft.lFrame.lView}function Ot(){return ft.lFrame.tView}function cs(r){return ft.lFrame.contextLView=r,r[8]}function pn(){let r=u_();for(;null!==r&&64===r.type;)r=r.parent;return r}function u_(){return ft.lFrame.currentTNode}function ti(r,t){const n=ft.lFrame;n.currentTNode=r,n.isParent=t}function lf(){return ft.lFrame.isParent}function df(){ft.lFrame.isParent=!1}function du(){return ft.isInCheckNoChangesMode}function fu(r){ft.isInCheckNoChangesMode=r}function us(){return ft.lFrame.bindingIndex++}function JA(r,t){const n=ft.lFrame;n.bindingIndex=n.bindingRootIndex=r,ff(t)}function ff(r){ft.lFrame.currentDirectiveIndex=r}function f_(){return ft.lFrame.currentQueryIndex}function pf(r){ft.lFrame.currentQueryIndex=r}function XA(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function h_(r,t,n){if(n&st.SkipSelf){let o=t,s=r;for(;!(o=o.parent,null!==o||n&st.Host||(o=XA(s),null===o||(s=s[15],10&o.type))););if(null===o)return!1;t=o,r=s}const i=ft.lFrame=p_();return i.currentTNode=t,i.lView=r,!0}function hu(r){const t=p_(),n=r[1];ft.lFrame=t,t.currentTNode=n.firstChild,t.lView=r,t.tView=n,t.contextLView=r,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function p_(){const r=ft.lFrame,t=null===r?null:r.child;return null===t?g_(r):t}function g_(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function m_(){const r=ft.lFrame;return ft.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const __=m_;function pu(){const r=m_();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Wn(){return ft.lFrame.selectedIndex}function zi(r){ft.lFrame.selectedIndex=r}function rn(){const r=ft.lFrame;return af(r.tView,r.selectedIndex)}function ri(){ft.lFrame.currentNamespace=r_}function $i(){ft.lFrame.currentNamespace=null}function gu(r,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const s=r.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:d,ngAfterViewChecked:S,ngOnDestroy:M}=s;a&&(r.contentHooks||(r.contentHooks=[])).push(-n,a),c&&((r.contentHooks||(r.contentHooks=[])).push(n,c),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(n,c)),d&&(r.viewHooks||(r.viewHooks=[])).push(-n,d),S&&((r.viewHooks||(r.viewHooks=[])).push(n,S),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(n,S)),null!=M&&(r.destroyHooks||(r.destroyHooks=[])).push(n,M)}}function mu(r,t,n){y_(r,t,3,n)}function _u(r,t,n,i){(3&r[2])===n&&y_(r,t,n,i)}function gf(r,t){let n=r[2];(3&n)===t&&(n&=2047,n+=1,r[2]=n)}function y_(r,t,n,i){const s=null!=i?i:-1,a=t.length-1;let c=0;for(let d=void 0!==i?65535&r[18]:0;d<a;d++)if("number"==typeof t[d+1]){if(c=t[d],null!=i&&c>=i)break}else t[d]<0&&(r[18]+=65536),(c<s||-1==s)&&(oI(r,n,t,d),r[18]=(4294901760&r[18])+d+2),d++}function oI(r,t,n,i){const o=n[i]<0,s=n[i+1],c=r[o?-n[i]:n[i]];if(o){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{s.call(c)}finally{}}}else try{s.call(c)}finally{}}class wa{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function yu(r,t,n){const i=nn(r);let o=0;for(;o<n.length;){const s=n[o];if("number"==typeof s){if(0!==s)break;o++;const a=n[o++],c=n[o++],d=n[o++];i?r.setAttribute(t,c,d,a):t.setAttributeNS(a,c,d)}else{const a=s,c=n[++o];_f(a)?i&&r.setProperty(t,a,c):i?r.setAttribute(t,a,c):t.setAttribute(a,c),o++}}return o}function v_(r){return 3===r||4===r||6===r}function _f(r){return 64===r.charCodeAt(0)}function vu(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const o=t[i];"number"==typeof o?n=o:0===n||E_(r,n,o,null,-1===n||2===n?t[++i]:null)}}return r}function E_(r,t,n,i,o){let s=0,a=r.length;if(-1===t)a=-1;else for(;s<r.length;){const c=r[s++];if("number"==typeof c){if(c===t){a=-1;break}if(c>t){a=s-1;break}}}for(;s<r.length;){const c=r[s];if("number"==typeof c)break;if(c===n){if(null===i)return void(null!==o&&(r[s+1]=o));if(i===r[s+1])return void(r[s+2]=o)}s++,null!==i&&s++,null!==o&&s++}-1!==a&&(r.splice(a,0,t),s=a+1),r.splice(s++,0,n),null!==i&&r.splice(s++,0,i),null!==o&&r.splice(s++,0,o)}function b_(r){return-1!==r}function ls(r){return 32767&r}function ds(r,t){let n=function(r){return r>>16}(r),i=t;for(;n>0;)i=i[15],n--;return i}let yf=!0;function Eu(r){const t=yf;return yf=r,t}let dI=0;function Oa(r,t){const n=Ef(r,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(r.injectorIndex=t.length,vf(i.data,r),vf(t,null),vf(i.blueprint,null));const o=bu(r,t),s=r.injectorIndex;if(b_(o)){const a=ls(o),c=ds(o,t),d=c[1].data;for(let S=0;S<8;S++)t[s+S]=c[a+S]|d[a+S]}return t[s+8]=o,s}function vf(r,t){r.push(0,0,0,0,0,0,0,0,t)}function Ef(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function bu(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let n=0,i=null,o=t;for(;null!==o;){const s=o[1],a=s.type;if(i=2===a?s.declTNode:1===a?o[6]:null,null===i)return-1;if(n++,o=o[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function Su(r,t,n){!function(r,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ca)&&(i=n[Ca]),null==i&&(i=n[Ca]=dI++);const o=255&i;t.data[r+(o>>5)]|=1<<o}(r,t,n)}function T_(r,t,n){if(n&st.Optional)return r;nu(t,"NodeInjector")}function A_(r,t,n,i){if(n&st.Optional&&void 0===i&&(i=null),0==(n&(st.Self|st.Host))){const o=r[9],s=Hi(void 0);try{return o?o.get(t,i,n&st.Optional):zm(t,i,n&st.Optional)}finally{Hi(s)}}return T_(i,t,n)}function I_(r,t,n,i=st.Default,o){if(null!==r){const s=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(Ca)?r[Ca]:void 0;return"number"==typeof t?t>=0?255&t:pI:t}(n);if("function"==typeof s){if(!h_(t,r,i))return i&st.Host?T_(o,n,i):A_(t,n,i,o);try{const a=s(i);if(null!=a||i&st.Optional)return a;nu(n)}finally{__()}}else if("number"==typeof s){let a=null,c=Ef(r,t),d=-1,S=i&st.Host?t[16][6]:null;for((-1===c||i&st.SkipSelf)&&(d=-1===c?bu(r,t):t[c+8],-1!==d&&D_(i,!1)?(a=t[1],c=ls(d),t=ds(d,t)):c=-1);-1!==c;){const M=t[1];if(w_(s,c,M.data)){const z=gI(c,t,n,a,i,S);if(z!==R_)return z}d=t[c+8],-1!==d&&D_(i,t[1].data[c+8]===S)&&w_(s,c,t)?(a=M,c=ls(d),t=ds(d,t)):c=-1}}}return A_(t,n,i,o)}const R_={};function pI(){return new fs(pn(),Pe())}function gI(r,t,n,i,o,s){const a=t[1],c=a.data[r+8],M=Cu(c,a,n,null==i?cu(c)&&yf:i!=a&&0!=(3&c.type),o&st.Host&&s===c);return null!==M?Na(t,a,M,c):R_}function Cu(r,t,n,i,o){const s=r.providerIndexes,a=t.data,c=1048575&s,d=r.directiveStart,M=s>>20,X=o?c+M:r.directiveEnd;for(let ae=i?c:c+M;ae<X;ae++){const ge=a[ae];if(ae<d&&n===ge||ae>=d&&ge.type===n)return ae}if(o){const ae=a[d];if(ae&&Lr(ae)&&ae.type===n)return d}return null}function Na(r,t,n,i){let o=r[n];const s=t.data;if(function(r){return r instanceof wa}(o)){const a=o;a.resolving&&function(r,t){throw new _o("200",`Circular dependency in DI detected for ${r}`)}(Un(s[n]));const c=Eu(a.canSeeViewProviders);a.resolving=!0;const d=a.injectImpl?Hi(a.injectImpl):null;h_(r,i,st.Default);try{o=r[n]=a.factory(void 0,s,r,i),t.firstCreatePass&&n>=i.directiveStart&&function(r,t,n){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:s}=t.type.prototype;if(i){const a=e_(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(r,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r,a)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-r,o),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(r,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r,s))}(n,s[n],t)}finally{null!==d&&Hi(d),Eu(c),a.resolving=!1,__()}}return o}function w_(r,t,n){return!!(n[t+(r>>5)]&1<<r)}function D_(r,t){return!(r&st.Self||r&st.Host&&t)}class fs{constructor(t,n){this._tNode=t,this._lView=n}get(t,n){return I_(this._tNode,this._lView,t,void 0,n)}}function Zn(r){return Wi(()=>{const t=r.prototype.constructor,n=t[Ti]||bf(t),i=Object.prototype;let o=Object.getPrototypeOf(r.prototype).constructor;for(;o&&o!==i;){const s=o[Ti]||bf(o);if(s&&s!==n)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function bf(r){return Hm(r)?()=>{const t=bf(nt(r));return t&&t()}:So(r)}const gs="__parameters__";function Co(r,t,n){return Wi(()=>{const i=function(r){return function(...n){if(r){const i=r(...n);for(const o in i)this[o]=i[o]}}}(t);function o(...s){if(this instanceof o)return i.apply(this,s),this;const a=new o(...s);return c.annotation=a,c;function c(d,S,M){const z=d.hasOwnProperty(gs)?d[gs]:Object.defineProperty(d,gs,{value:[]})[gs];for(;z.length<=M;)z.push(null);return(z[M]=z[M]||[]).push(a),d}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=r,o.annotationCls=o,o})}class et{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Xe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const vI=new et("AnalyzeForEntryComponents"),Tu=Function;function Sr(r,t){void 0===t&&(t=r);for(let n=0;n<r.length;n++){let i=r[n];Array.isArray(i)?(t===r&&(t=r.slice(0,n)),Sr(i,t)):t!==r&&t.push(i)}return t}function ii(r,t){r.forEach(n=>Array.isArray(n)?ii(n,t):t(n))}function Iu(r,t,n){t>=r.length?r.push(n):r.splice(t,0,n)}function To(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function Yi(r,t){const n=[];for(let i=0;i<r;i++)n.push(t);return n}function ur(r,t,n){let i=_s(r,t);return i>=0?r[1|i]=n:(i=~i,function(r,t,n,i){let o=r.length;if(o==t)r.push(n,i);else if(1===o)r.push(i,r[0]),r[0]=n;else{for(o--,r.push(r[o-1],r[o]);o>t;)r[o]=r[o-2],o--;r[t]=n,r[t+1]=i}}(r,i,t,n)),i}function Cf(r,t){const n=_s(r,t);if(n>=0)return r[1|n]}function _s(r,t){return function(r,t,n){let i=0,o=r.length>>n;for(;o!==i;){const s=i+(o-i>>1),a=r[s<<n];if(t===a)return s<<n;a>t?o=s:i=s+1}return~(o<<n)}(r,t,1)}const La={},Af="__NG_DI_FLAG__",ys="ngTempTokenPath",DI=/\n/gm,If="__source",Rf=rt({provide:String,useValue:rt});let xa;function vs(r){const t=xa;return xa=r,t}function NI(r,t=st.Default){if(void 0===xa)throw new Error("inject() must be called from an injection context");return null===xa?zm(r,void 0,t):xa.get(r,t&st.Optional?null:void 0,t)}function Ne(r,t=st.Default){return(Jd||NI)(nt(r),t)}const L_=Ne;function Ao(r){const t=[];for(let n=0;n<r.length;n++){const i=nt(r[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let o,s=st.Default;for(let a=0;a<i.length;a++){const c=i[a],d=MI(c);"number"==typeof d?-1===d?o=c.token:s|=d:o=c}t.push(Ne(o,s))}else t.push(Ne(i))}return t}function Fa(r,t){return r[Af]=t,r.prototype[Af]=t,r}function MI(r){return r[Af]}function x_(r,t,n,i){const o=r[ys];throw t[If]&&o.unshift(t[If]),r.message=function(r,t,n,i=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let o=lt(t);if(Array.isArray(t))o=t.map(lt).join(" -> ");else if("object"==typeof t){let s=[];for(let a in t)if(t.hasOwnProperty(a)){let c=t[a];s.push(a+":"+("string"==typeof c?JSON.stringify(c):lt(c)))}o=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${o}]: ${r.replace(DI,"\n  ")}`}("\n"+r.message,o,n,i),r.ngTokenPath=o,r[ys]=null,r}const Es=Fa(Co("Inject",r=>({token:r})),-1),er=Fa(Co("Optional"),8),Ji=Fa(Co("SkipSelf"),4);const t1="__ngContext__";function On(r,t){r[t1]=t}function Ff(r){const t=function(r){return r[t1]||null}(r);return t?Array.isArray(t)?t:t.lView:null}function ku(r){return r.ngOriginalError}function AR(r,...t){r.error(...t)}class Ro{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),i=this._findContext(t),o=function(r){return r&&r.ngErrorLogger||AR}(t);o(this._console,"ERROR",t),n&&o(this._console,"ORIGINAL ERROR",n),i&&o(this._console,"ERROR CONTEXT",i)}_findContext(t){return t?function(r){return r.ngDebugContext}(t)||this._findContext(ku(t)):null}_findOriginalError(t){let n=t&&ku(t);for(;n&&ku(n);)n=ku(n);return n||null}}const l1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function ai(r){return r instanceof Function?r():r}var dr=(()=>((dr=dr||{})[dr.Important=1]="Important",dr[dr.DashCase=2]="DashCase",dr))();function Uf(r,t){return undefined(r,t)}function Wa(r){const t=r[3];return Pr(t)?t[3]:t}function Bf(r){return g1(r[13])}function Hf(r){return g1(r[4])}function g1(r){for(;null!==r&&!Pr(r);)r=r[4];return r}function Ts(r,t,n,i,o){if(null!=i){let s,a=!1;Pr(i)?s=i:ei(i)&&(a=!0,i=i[0]);const c=dn(i);0===r&&null!==n?null==o?b1(t,n,c):wo(t,n,c,o||null,!0):1===r&&null!==n?wo(t,n,c,o||null,!0):2===r?function(r,t,n){const i=Lu(r,t);i&&function(r,t,n,i){nn(r)?r.removeChild(t,n,i):t.removeChild(n)}(r,i,t,n)}(t,c,a):3===r&&t.destroyNode(c),null!=s&&function(r,t,n,i,o){const s=n[7];s!==dn(n)&&Ts(t,r,i,s,o);for(let c=10;c<n.length;c++){const d=n[c];Ga(d[1],d,r,t,i,s)}}(t,r,s,n,o)}}function Gf(r,t,n){return nn(r)?r.createElement(t,n):null===n?r.createElement(t):r.createElementNS(n,t)}function _1(r,t){const n=r[9],i=n.indexOf(t),o=t[3];1024&t[2]&&(t[2]&=-1025,uf(o,-1)),n.splice(i,1)}function qf(r,t){if(r.length<=10)return;const n=10+t,i=r[n];if(i){const o=i[17];null!==o&&o!==r&&_1(o,i),t>0&&(r[n-1][4]=i[4]);const s=To(r,10+t);!function(r,t){Ga(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const a=s[19];null!==a&&a.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function y1(r,t){if(!(256&t[2])){const n=t[11];nn(n)&&n.destroyNode&&Ga(r,t,n,3,null,null),function(r){let t=r[13];if(!t)return zf(r[1],r);for(;t;){let n=null;if(ei(t))n=t[13];else{const i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==r;)ei(t)&&zf(t[1],t),t=t[3];null===t&&(t=r),ei(t)&&zf(t[1],t),n=t&&t[4]}t=n}}(t)}}function zf(r,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(r,t){let n;if(null!=r&&null!=(n=r.destroyHooks))for(let i=0;i<n.length;i+=2){const o=t[n[i]];if(!(o instanceof wa)){const s=n[i+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const c=o[s[a]],d=s[a+1];try{d.call(c)}finally{}}else try{s.call(o)}finally{}}}}(r,t),function(r,t){const n=r.cleanup,i=t[7];let o=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+1],c="function"==typeof a?a(t):dn(t[a]),d=i[o=n[s+2]],S=n[s+3];"boolean"==typeof S?c.removeEventListener(n[s],d,S):S>=0?i[o=S]():i[o=-S].unsubscribe(),s+=2}else{const a=i[o=n[s+1]];n[s].call(a)}if(null!==i){for(let s=o+1;s<i.length;s++)i[s]();t[7]=null}}(r,t),1===t[1].type&&nn(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Pr(t[3])){n!==t[3]&&_1(n,t);const i=t[19];null!==i&&i.detachView(r)}}}function v1(r,t,n){return function(r,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const o=r.data[i.directiveStart].encapsulation;if(o===ln.None||o===ln.Emulated)return null}return br(i,n)}(r,t.parent,n)}function wo(r,t,n,i,o){nn(r)?r.insertBefore(t,n,i,o):t.insertBefore(n,i,o)}function b1(r,t,n){nn(r)?r.appendChild(t,n):t.appendChild(n)}function S1(r,t,n,i,o){null!==i?wo(r,t,n,i,o):b1(r,t,n)}function Lu(r,t){return nn(r)?r.parentNode(t):t.parentNode}function C1(r,t,n){return A1(r,t,n)}let A1=function(r,t,n){return 40&r.type?br(r,n):null};function xu(r,t,n,i){const o=v1(r,i,t),s=t[11],c=C1(i.parent||t[6],i,t);if(null!=o)if(Array.isArray(n))for(let d=0;d<n.length;d++)S1(s,o,n[d],c,!1);else S1(s,o,n,c,!1)}function Fu(r,t){if(null!==t){const n=t.type;if(3&n)return br(t,r);if(4&n)return Kf(-1,r[t.index]);if(8&n){const i=t.child;if(null!==i)return Fu(r,i);{const o=r[t.index];return Pr(o)?Kf(-1,o):dn(o)}}if(32&n)return Uf(t,r)()||dn(r[t.index]);{const i=R1(r,t);return null!==i?Array.isArray(i)?i[0]:Fu(Wa(r[16]),i):Fu(r,t.next)}}return null}function R1(r,t){return null!==t?r[16][6].projection[t.projection]:null}function Kf(r,t){const n=10+r+1;if(n<t.length){const i=t[n],o=i[1].firstChild;if(null!==o)return Fu(i,o)}return t[7]}function Yf(r,t,n,i,o,s,a){for(;null!=n;){const c=i[n.index],d=n.type;if(a&&0===t&&(c&&On(dn(c),i),n.flags|=4),64!=(64&n.flags))if(8&d)Yf(r,t,n.child,i,o,s,!1),Ts(t,r,o,c,s);else if(32&d){const S=Uf(n,i);let M;for(;M=S();)Ts(t,r,o,M,s);Ts(t,r,o,c,s)}else 16&d?D1(r,t,i,n,o,s):Ts(t,r,o,c,s);n=a?n.projectionNext:n.next}}function Ga(r,t,n,i,o,s){Yf(n,i,r.firstChild,t,o,s,!1)}function D1(r,t,n,i,o,s){const a=n[16],d=a[6].projection[i.projection];if(Array.isArray(d))for(let S=0;S<d.length;S++)Ts(t,r,o,d[S],s);else Yf(r,t,d,a[3],o,s,!0)}function O1(r,t,n){nn(r)?r.setAttribute(t,"style",n):t.style.cssText=n}function Jf(r,t,n){nn(r)?""===n?r.removeAttribute(t,"class"):r.setAttribute(t,"class",n):t.className=n}function N1(r,t,n){let i=r.length;for(;;){const o=r.indexOf(t,n);if(-1===o)return o;if(0===o||r.charCodeAt(o-1)<=32){const s=t.length;if(o+s===i||r.charCodeAt(o+s)<=32)return o}n=o+1}}const M1="ng-template";function QR(r,t,n){let i=0;for(;i<r.length;){let o=r[i++];if(n&&"class"===o){if(o=r[i],-1!==N1(o.toLowerCase(),t,0))return!0}else if(1===o){for(;i<r.length&&"string"==typeof(o=r[i++]);)if(o.toLowerCase()===t)return!0;return!1}}return!1}function k1(r){return 4===r.type&&r.value!==M1}function XR(r,t,n){return t===(4!==r.type||n?r.value:M1)}function ZR(r,t,n){let i=4;const o=r.attrs||[],s=function(r){for(let t=0;t<r.length;t++)if(v_(r[t]))return t;return r.length}(o);let a=!1;for(let c=0;c<t.length;c++){const d=t[c];if("number"!=typeof d){if(!a)if(4&i){if(i=2|1&i,""!==d&&!XR(r,d,n)||""===d&&1===t.length){if(xr(i))return!1;a=!0}}else{const S=8&i?d:t[++c];if(8&i&&null!==r.attrs){if(!QR(r.attrs,S,n)){if(xr(i))return!1;a=!0}continue}const z=ew(8&i?"class":d,o,k1(r),n);if(-1===z){if(xr(i))return!1;a=!0;continue}if(""!==S){let X;X=z>s?"":o[z+1].toLowerCase();const ae=8&i?X:null;if(ae&&-1!==N1(ae,S,0)||2&i&&S!==X){if(xr(i))return!1;a=!0}}}}else{if(!a&&!xr(i)&&!xr(d))return!1;if(a&&xr(d))continue;a=!1,i=d|1&i}}return xr(i)||a}function xr(r){return 0==(1&r)}function ew(r,t,n,i){if(null===t)return-1;let o=0;if(i||!n){let s=!1;for(;o<t.length;){const a=t[o];if(a===r)return o;if(3===a||6===a)s=!0;else{if(1===a||2===a){let c=t[++o];for(;"string"==typeof c;)c=t[++o];continue}if(4===a)break;if(0===a){o+=4;continue}}o+=s?1:2}return-1}return function(r,t){let n=r.indexOf(4);if(n>-1)for(n++;n<r.length;){const i=r[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,r)}function P1(r,t,n=!1){for(let i=0;i<t.length;i++)if(ZR(r,t[i],n))return!0;return!1}function iw(r,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(r.length===i.length){for(let o=0;o<r.length;o++)if(r[o]!==i[o])continue e;return!0}}return!1}function L1(r,t){return r?":not("+t.trim()+")":t}function ow(r){let t=r[0],n=1,i=2,o="",s=!1;for(;n<r.length;){let a=r[n];if("string"==typeof a)if(2&i){const c=r[++n];o+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else 8&i?o+="."+a:4&i&&(o+=" "+a);else""!==o&&!xr(a)&&(t+=L1(s,o),o=""),i=a,s=s||!xr(i);n++}return""!==o&&(t+=L1(s,o)),t}const pt={};function yt(r){x1(Ot(),Pe(),Wn()+r,du())}function x1(r,t,n,i){if(!i)if(3==(3&t[2])){const s=r.preOrderCheckHooks;null!==s&&mu(t,s,n)}else{const s=r.preOrderHooks;null!==s&&_u(t,s,0,n)}zi(n)}function Vu(r,t){return r<<17|t<<2}function Fr(r){return r>>17&32767}function Qf(r){return 2|r}function Ii(r){return(131068&r)>>2}function Xf(r,t){return-131069&r|t<<2}function Zf(r){return 1|r}function z1(r,t){const n=r.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i],s=n[i+1];if(-1!==s){const a=r.data[s];pf(o),a.contentQueries(2,t[s],s)}}}function qa(r,t,n,i,o,s,a,c,d,S){const M=t.blueprint.slice();return M[0]=o,M[2]=140|i,a_(M),M[3]=M[15]=r,M[8]=n,M[10]=a||r&&r[10],M[11]=c||r&&r[11],M[12]=d||r&&r[12]||null,M[9]=S||r&&r[9]||null,M[6]=s,M[16]=2==t.type?r[16]:M,M}function As(r,t,n,i,o){let s=r.data[t];if(null===s)s=function(r,t,n,i,o){const s=u_(),a=lf(),d=r.data[t]=function(r,t,n,i,o,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,n,t,i,o);return null===r.firstChild&&(r.firstChild=d),null!==s&&(a?null==s.child&&null!==d.parent&&(s.child=d):null===s.next&&(s.next=d)),d}(r,t,n,i,o),ft.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=o;const a=function(){const r=ft.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return ti(s,!0),s}function Is(r,t,n,i){if(0===n)return-1;const o=t.length;for(let s=0;s<n;s++)t.push(i),r.blueprint.push(i),r.data.push(null);return o}function za(r,t,n){hu(t);try{const i=r.viewQuery;null!==i&&gh(1,i,n);const o=r.template;null!==o&&$1(r,t,o,1,n),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&z1(r,t),r.staticViewQueries&&gh(2,r.viewQuery,n);const s=r.components;null!==s&&function(r,t){for(let n=0;n<t.length;n++)Vw(r,t[n])}(t,s)}catch(i){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),i}finally{t[2]&=-5,pu()}}function Rs(r,t,n,i){const o=t[2];if(256==(256&o))return;hu(t);const s=du();try{a_(t),function(r){ft.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==n&&$1(r,t,n,2,i);const a=3==(3&o);if(!s)if(a){const S=r.preOrderCheckHooks;null!==S&&mu(t,S,null)}else{const S=r.preOrderHooks;null!==S&&_u(t,S,0,null),gf(t,0)}if(function(r){for(let t=Bf(r);null!==t;t=Hf(t)){if(!t[2])continue;const n=t[9];for(let i=0;i<n.length;i++){const o=n[i],s=o[3];0==(1024&o[2])&&uf(s,1),o[2]|=1024}}}(t),function(r){for(let t=Bf(r);null!==t;t=Hf(t))for(let n=10;n<t.length;n++){const i=t[n],o=i[1];cf(i)&&Rs(o,i,o.template,i[8])}}(t),null!==r.contentQueries&&z1(r,t),!s)if(a){const S=r.contentCheckHooks;null!==S&&mu(t,S)}else{const S=r.contentHooks;null!==S&&_u(t,S,1),gf(t,1)}!function(r,t){const n=r.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)zi(~o);else{const s=o,a=n[++i],c=n[++i];JA(a,s),c(2,t[s])}}}finally{zi(-1)}}(r,t);const c=r.components;null!==c&&function(r,t){for(let n=0;n<t.length;n++)Fw(r,t[n])}(t,c);const d=r.viewQuery;if(null!==d&&gh(2,d,i),!s)if(a){const S=r.viewCheckHooks;null!==S&&mu(t,S)}else{const S=r.viewHooks;null!==S&&_u(t,S,2),gf(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,uf(t[3],-1))}finally{pu()}}function yw(r,t,n,i){const o=t[10],s=!du(),a=s_(t);try{s&&!a&&o.begin&&o.begin(),a&&za(r,t,i),Rs(r,t,n,i)}finally{s&&!a&&o.end&&o.end()}}function $1(r,t,n,i,o){const s=Wn(),a=2&i;try{zi(-1),a&&t.length>20&&x1(r,t,20,du()),n(i,o)}finally{zi(s)}}function K1(r,t,n){if(tf(t)){const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=r.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}}function ah(r,t,n){!c_()||(function(r,t,n,i){const o=n.directiveStart,s=n.directiveEnd;r.firstCreatePass||Oa(n,t),On(i,t);const a=n.initialInputs;for(let c=o;c<s;c++){const d=r.data[c],S=Lr(d);S&&Mw(t,n,d);const M=Na(t,r,c,n);On(M,t),null!==a&&kw(0,c-o,M,d,0,a),S&&(cr(n.index,t)[8]=M)}}(r,t,n,br(n,t)),128==(128&n.flags)&&function(r,t,n){const i=n.directiveStart,o=n.directiveEnd,a=n.index,c=ft.lFrame.currentDirectiveIndex;try{zi(a);for(let d=i;d<o;d++){const S=r.data[d],M=t[d];ff(d),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&ny(S,M)}}finally{zi(-1),ff(c)}}(r,t,n))}function ch(r,t,n=br){const i=t.localNames;if(null!==i){let o=t.index+1;for(let s=0;s<i.length;s+=2){const a=i[s+1],c=-1===a?n(t,r):r[a];r[o++]=c}}}function Y1(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=Bu(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function Bu(r,t,n,i,o,s,a,c,d,S){const M=20+i,z=M+o,X=function(r,t){const n=[];for(let i=0;i<t;i++)n.push(i<r?null:pt);return n}(M,z),ae="function"==typeof S?S():S;return X[1]={type:r,blueprint:X,template:n,queries:null,viewQuery:c,declTNode:t,data:X.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:d,consts:ae,incompleteFirstPass:!1}}function X1(r,t,n,i){const o=cy(t);null===n?o.push(i):(o.push(n),r.firstCreatePass&&uy(r).push(i,o.length-1))}function Z1(r,t,n){for(let i in r)if(r.hasOwnProperty(i)){const o=r[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,o):n[i]=[t,o]}return n}function fr(r,t,n,i,o,s,a,c){const d=br(t,n);let M,S=t.inputs;!c&&null!=S&&(M=S[i])?(fy(r,n,M,i,o),cu(t)&&function(r,t){const n=cr(t,r);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(i=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(i),o=null!=a?a(o,t.value||"",i):o,nn(s)?s.setProperty(d,i,o):_f(i)||(d.setProperty?d.setProperty(i,o):d[i]=o))}function uh(r,t,n,i){let o=!1;if(c_()){const s=function(r,t,n){const i=r.directiveRegistry;let o=null;if(i)for(let s=0;s<i.length;s++){const a=i[s];P1(n,a.selectors,!1)&&(o||(o=[]),Su(Oa(n,t),r,a.type),Lr(a)?(ry(r,n),o.unshift(a)):o.push(a))}return o}(r,t,n),a=null===i?null:{"":-1};if(null!==s){o=!0,iy(n,r.data.length,s.length);for(let M=0;M<s.length;M++){const z=s[M];z.providersResolver&&z.providersResolver(z)}let c=!1,d=!1,S=Is(r,t,s.length,null);for(let M=0;M<s.length;M++){const z=s[M];n.mergedAttrs=vu(n.mergedAttrs,z.hostAttrs),oy(r,n,t,S,z),Nw(S,z,a),null!==z.contentQueries&&(n.flags|=8),(null!==z.hostBindings||null!==z.hostAttrs||0!==z.hostVars)&&(n.flags|=128);const X=z.type.prototype;!c&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(n.index),c=!0),!d&&(X.ngOnChanges||X.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(n.index),d=!0),S++}!function(r,t){const i=t.directiveEnd,o=r.data,s=t.attrs,a=[];let c=null,d=null;for(let S=t.directiveStart;S<i;S++){const M=o[S],z=M.inputs,X=null===s||k1(t)?null:Pw(z,s);a.push(X),c=Z1(z,S,c),d=Z1(M.outputs,S,d)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=16),c.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=c,t.outputs=d}(r,n)}a&&function(r,t,n){if(t){const i=r.localNames=[];for(let o=0;o<t.length;o+=2){const s=n[t[o+1]];if(null==s)throw new _o("301",`Export of name '${t[o+1]}' not found!`);i.push(t[o],s)}}}(n,i,a)}return n.mergedAttrs=vu(n.mergedAttrs,n.attrs),o}function ty(r,t,n,i,o,s){const a=s.hostBindings;if(a){let c=r.hostBindingOpCodes;null===c&&(c=r.hostBindingOpCodes=[]);const d=~t.index;(function(r){let t=r.length;for(;t>0;){const n=r[--t];if("number"==typeof n&&n<0)return n}return 0})(c)!=d&&c.push(d),c.push(i,o,a)}}function ny(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function ry(r,t){t.flags|=2,(r.components||(r.components=[])).push(t.index)}function Nw(r,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=r;Lr(t)&&(n[""]=r)}}function iy(r,t,n){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+n,r.providerIndexes=t}function oy(r,t,n,i,o){r.data[i]=o;const s=o.factory||(o.factory=So(o.type)),a=new wa(s,Lr(o),null);r.blueprint[i]=a,n[i]=a,ty(r,t,0,i,Is(r,n,o.hostVars,pt),o)}function Mw(r,t,n){const i=br(t,r),o=Y1(n),s=r[10],a=Hu(r,qa(r,o,null,n.onPush?64:16,i,t,s,s.createRenderer(i,n),null,null));r[t.index]=a}function ci(r,t,n,i,o,s){const a=br(r,t);!function(r,t,n,i,o,s,a){if(null==s)nn(r)?r.removeAttribute(t,o,n):t.removeAttribute(o);else{const c=null==a?_t(s):a(s,i||"",o);nn(r)?r.setAttribute(t,o,c,n):n?t.setAttributeNS(n,o,c):t.setAttribute(o,c)}}(t[11],a,s,r.value,n,i,o)}function kw(r,t,n,i,o,s){const a=s[t];if(null!==a){const c=i.setInput;for(let d=0;d<a.length;){const S=a[d++],M=a[d++],z=a[d++];null!==c?i.setInput(n,z,S,M):n[M]=z}}}function Pw(r,t){let n=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;r.hasOwnProperty(o)&&(null===n&&(n=[]),n.push(o,r[o],t[i+1])),i+=2}else i+=2;else i+=4}return n}function sy(r,t,n,i){return new Array(r,!0,!1,t,null,0,i,n,null,null)}function Fw(r,t){const n=cr(t,r);if(cf(n)){const i=n[1];80&n[2]?Rs(i,n,i.template,n[8]):n[5]>0&&dh(n)}}function dh(r){for(let i=Bf(r);null!==i;i=Hf(i))for(let o=10;o<i.length;o++){const s=i[o];if(1024&s[2]){const a=s[1];Rs(a,s,a.template,s[8])}else s[5]>0&&dh(s)}const n=r[1].components;if(null!==n)for(let i=0;i<n.length;i++){const o=cr(n[i],r);cf(o)&&o[5]>0&&dh(o)}}function Vw(r,t){const n=cr(t,r),i=n[1];(function(r,t){for(let n=t.length;n<r.blueprint.length;n++)t.push(r.blueprint[n])})(i,n),za(i,n,n[8])}function Hu(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function fh(r){for(;r;){r[2]|=64;const t=Wa(r);if(NA(r)&&!t)return r;r=t}return null}function ph(r,t,n){const i=t[10];i.begin&&i.begin();try{Rs(r,t,r.template,n)}catch(o){throw dy(t,o),o}finally{i.end&&i.end()}}function ay(r){!function(r){for(let t=0;t<r.components.length;t++){const n=r.components[t],i=Ff(n),o=i[1];yw(o,i,o.template,n)}}(r[8])}function gh(r,t,n){pf(0),t(r,n)}const Ww=(()=>Promise.resolve(null))();function cy(r){return r[7]||(r[7]=[])}function uy(r){return r.cleanup||(r.cleanup=[])}function dy(r,t){const n=r[9],i=n?n.get(Ro,null):null;i&&i.handleError(t)}function fy(r,t,n,i,o){for(let s=0;s<n.length;){const a=n[s++],c=n[s++],d=t[a],S=r.data[a];null!==S.setInput?S.setInput(d,o,i,c):d[c]=o}}function wi(r,t,n){const i=lu(t,r);!function(r,t,n){nn(r)?r.setValue(t,n):t.textContent=n}(r[11],i,n)}function Wu(r,t,n){let i=n?r.styles:null,o=n?r.classes:null,s=0;if(null!==t)for(let a=0;a<t.length;a++){const c=t[a];"number"==typeof c?s=c:1==s?o=Bi(o,c):2==s&&(i=Bi(i,c+": "+t[++a]+";"))}n?r.styles=i:r.stylesWithoutHost=i,n?r.classes=o:r.classesWithoutHost=o}const ws=new et("INJECTOR",-1);class hy{get(t,n=La){if(n===La){const i=new Error(`NullInjectorError: No provider for ${lt(t)}!`);throw i.name="NullInjectorError",i}return n}}const $a=new et("Set Injector scope."),Ka={},zw={};let mh;function py(){return void 0===mh&&(mh=new hy),mh}function gy(r,t=null,n=null,i){return new Kw(r,n,t||py(),i)}class Kw{constructor(t,n,i,o=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&ii(n,c=>this.processProvider(c,t,n)),ii([t],c=>this.processInjectorType(c,[],s)),this.records.set(ws,Ds(void 0,this));const a=this.records.get($a);this.scope=null!=a?a.value:null,this.source=o||("object"==typeof t?null:lt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=La,i=st.Default){this.assertNotDestroyed();const o=vs(this),s=Hi(void 0);try{if(!(i&st.SkipSelf)){let c=this.records.get(t);if(void 0===c){const d=function(r){return"function"==typeof r||"object"==typeof r&&r instanceof et}(t)&&Ci(t);c=d&&this.injectableDefInScope(d)?Ds(_h(t),Ka):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(i&st.Self?py():this.parent).get(t,n=i&st.Optional&&n===La?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ys]=a[ys]||[]).unshift(lt(t)),o)throw a;return x_(a,t,"R3InjectorError",this.source)}throw a}finally{Hi(s),vs(o)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((i,o)=>t.push(lt(o))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,n,i){if(!(t=nt(t)))return!1;let o=Gm(t);const s=null==o&&t.ngModule||void 0,a=void 0===s?t:s,c=-1!==i.indexOf(a);if(void 0!==s&&(o=Gm(s)),null==o)return!1;if(null!=o.imports&&!c){let M;i.push(a);try{ii(o.imports,z=>{this.processInjectorType(z,n,i)&&(void 0===M&&(M=[]),M.push(z))})}finally{}if(void 0!==M)for(let z=0;z<M.length;z++){const{ngModule:X,providers:ae}=M[z];ii(ae,ge=>this.processProvider(ge,X,ae||Gt))}}this.injectorDefTypes.add(a);const d=So(a)||(()=>new a);this.records.set(a,Ds(d,Ka));const S=o.providers;if(null!=S&&!c){const M=t;ii(S,z=>this.processProvider(z,M,S))}return void 0!==s&&void 0!==t.providers}processProvider(t,n,i){let o=Os(t=nt(t))?t:nt(t&&t.provide);const s=function(r,t,n){return _y(r)?Ds(void 0,r.useValue):Ds(my(r),Ka)}(t);if(Os(t)||!0!==t.multi)this.records.get(o);else{let a=this.records.get(o);a||(a=Ds(void 0,Ka,!0),a.factory=()=>Ao(a.multi),this.records.set(o,a)),o=t,a.multi.push(t)}this.records.set(o,s)}hydrate(t,n){return n.value===Ka&&(n.value=zw,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=nt(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function _h(r){const t=Ci(r),n=null!==t?t.factory:So(r);if(null!==n)return n;if(r instanceof et)throw new Error(`Token ${lt(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const t=r.length;if(t>0){const i=Yi(t,"?");throw new Error(`Can't resolve all parameters for ${lt(r)}: (${i.join(", ")}).`)}const n=function(r){const t=r&&(r[ru]||r[qm]);if(t){const n=function(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(r);return null!==n?()=>n.factory(r):()=>new r}(r);throw new Error("unreachable")}function my(r,t,n){let i;if(Os(r)){const o=nt(r);return So(o)||_h(o)}if(_y(r))i=()=>nt(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))i=()=>r.useFactory(...Ao(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))i=()=>Ne(nt(r.useExisting));else{const o=nt(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return So(o)||_h(o);i=()=>new o(...Ao(r.deps))}return i}function Ds(r,t,n=!1){return{factory:r,value:t,multi:n?[]:void 0}}function _y(r){return null!==r&&"object"==typeof r&&Rf in r}function Os(r){return"function"==typeof r}const yy=function(r,t,n){return function(r,t=null,n=null,i){const o=gy(r,t,n,i);return o._resolveInjectorDefTypes(),o}({name:n},t,r,n)};class Nt{static create(t,n){return Array.isArray(t)?yy(t,n,""):yy(t.providers,t.parent,t.name||"")}}function gD(r,t){gu(Ff(r)[1],pn())}function Mt(r){let t=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),n=!0;const i=[r];for(;t;){let o;if(Lr(r))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");o=t.\u0275dir}if(o){if(n){i.push(o);const a=r;a.inputs=Ch(r.inputs),a.declaredInputs=Ch(r.declaredInputs),a.outputs=Ch(r.outputs);const c=o.hostBindings;c&&vD(r,c);const d=o.viewQuery,S=o.contentQueries;if(d&&_D(r,d),S&&yD(r,S),jn(r.inputs,o.inputs),jn(r.declaredInputs,o.declaredInputs),jn(r.outputs,o.outputs),Lr(o)&&o.data.animation){const M=r.data;M.animation=(M.animation||[]).concat(o.data.animation)}}const s=o.features;if(s)for(let a=0;a<s.length;a++){const c=s[a];c&&c.ngInherit&&c(r),c===Mt&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(r){let t=0,n=null;for(let i=r.length-1;i>=0;i--){const o=r[i];o.hostVars=t+=o.hostVars,o.hostAttrs=vu(o.hostAttrs,n=vu(n,o.hostAttrs))}}(i)}function Ch(r){return r===ns?{}:r===Gt?[]:r}function _D(r,t){const n=r.viewQuery;r.viewQuery=n?(i,o)=>{t(i,o),n(i,o)}:t}function yD(r,t){const n=r.contentQueries;r.contentQueries=n?(i,o,s)=>{t(i,o,s),n(i,o,s)}:t}function vD(r,t){const n=r.hostBindings;r.hostBindings=n?(i,o)=>{t(i,o),n(i,o)}:t}Nt.THROW_IF_NOT_FOUND=La,Nt.NULL=new hy,Nt.\u0275prov=Xe({token:Nt,providedIn:"any",factory:()=>Ne(ws)}),Nt.__NG_ELEMENT_ID__=-1;let Gu=null;function Ns(){if(!Gu){const r=Ft.Symbol;if(r&&r.iterator)Gu=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Gu=i)}}}return Gu}class jr{constructor(t){this.wrapped=t}static wrap(t){return new jr(t)}static unwrap(t){return jr.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof jr}}function Ja(r){return!!Th(r)&&(Array.isArray(r)||!(r instanceof Map)&&Ns()in r)}function Th(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Nn(r,t,n){return!Object.is(r[t],n)&&(r[t]=n,!0)}function cn(r,t,n,i){const o=Pe();return Nn(o,us(),t)&&(Ot(),ci(rn(),o,r,t,n,i)),cn}function mn(r,t,n,i,o,s,a,c){const d=Pe(),S=Ot(),M=r+20,z=S.firstCreatePass?function(r,t,n,i,o,s,a,c,d){const S=t.consts,M=As(t,r,4,a||null,qi(S,c));uh(t,n,M,qi(S,d)),gu(t,M);const z=M.tViews=Bu(2,M,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,S);return null!==t.queries&&(t.queries.template(t,M),z.queries=t.queries.embeddedTView(M)),M}(M,S,d,t,n,i,o,s,a):S.data[M];ti(z,!1);const X=d[11].createComment("");xu(S,d,X,z),On(X,d),Hu(d,d[M]=sy(X,d,X,z)),uu(z)&&ah(S,d,z),null!=a&&ch(d,z,c)}function Ie(r,t=st.Default){const n=Pe();return null===n?Ne(r,t):I_(pn(),n,nt(r),t)}function Tt(r,t,n){const i=Pe();return Nn(i,us(),t)&&fr(Ot(),rn(),i,r,t,i[11],n,!1),Tt}function Dh(r,t,n,i,o){const a=o?"class":"style";fy(r,n,t.inputs[a],a,i)}function xe(r,t,n,i){const o=Pe(),s=Ot(),a=20+r,c=o[11],d=o[a]=Gf(c,t,ft.lFrame.currentNamespace),S=s.firstCreatePass?function(r,t,n,i,o,s,a){const c=t.consts,S=As(t,r,2,o,qi(c,s));return uh(t,n,S,qi(c,a)),null!==S.attrs&&Wu(S,S.attrs,!1),null!==S.mergedAttrs&&Wu(S,S.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,S),S}(a,s,o,0,t,n,i):s.data[a];ti(S,!0);const M=S.mergedAttrs;null!==M&&yu(c,d,M);const z=S.classes;null!==z&&Jf(c,d,z);const X=S.styles;null!==X&&O1(c,d,X),64!=(64&S.flags)&&xu(s,o,d,S),0===ft.lFrame.elementDepthCount&&On(d,o),ft.lFrame.elementDepthCount++,uu(S)&&(ah(s,o,S),K1(s,S,o)),null!==i&&ch(o,S)}function Fe(){let r=pn();lf()?df():(r=r.parent,ti(r,!1));const t=r;ft.lFrame.elementDepthCount--;const n=Ot();n.firstCreatePass&&(gu(n,r),tf(r)&&n.queries.elementEnd(r)),null!=t.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(t)&&Dh(n,t,Pe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(t)&&Dh(n,t,Pe(),t.stylesWithoutHost,!1)}function ct(r,t,n,i){xe(r,t,n,i),Fe()}function $u(r,t,n){const i=Pe(),o=Ot(),s=r+20,a=o.firstCreatePass?function(r,t,n,i,o){const s=t.consts,a=qi(s,i),c=As(t,r,8,"ng-container",a);return null!==a&&Wu(c,a,!0),uh(t,n,c,qi(s,o)),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,i,t,n):o.data[s];ti(a,!0);const c=i[s]=i[11].createComment("");xu(o,i,c,a),On(c,i),uu(a)&&(ah(o,i,a),K1(o,a,i)),null!=n&&ch(i,a)}function Ku(){let r=pn();const t=Ot();lf()?df():(r=r.parent,ti(r,!1)),t.firstCreatePass&&(gu(t,r),tf(r)&&t.queries.elementEnd(r))}function Oh(){return Pe()}function Xa(r){return!!r&&"function"==typeof r.then}function nv(r){return!!r&&"function"==typeof r.subscribe}const Yu=nv;function Kt(r,t,n,i){const o=Pe(),s=Ot(),a=pn();return function(r,t,n,i,o,s,a,c){const d=uu(i),M=r.firstCreatePass&&uy(r),z=t[8],X=cy(t);let ae=!0;if(3&i.type||c){const Ee=br(i,t),ke=c?c(Ee):Ee,we=X.length,je=c?Ge=>c(dn(Ge[i.index])):i.index;if(nn(n)){let Ge=null;if(!c&&d&&(Ge=function(r,t,n,i){const o=r.cleanup;if(null!=o)for(let s=0;s<o.length-1;s+=2){const a=o[s];if(a===n&&o[s+1]===i){const c=t[7],d=o[s+2];return c.length>d?c[d]:null}"string"==typeof a&&(s+=2)}return null}(r,t,o,i.index)),null!==Ge)(Ge.__ngLastListenerFn__||Ge).__ngNextListenerFn__=s,Ge.__ngLastListenerFn__=s,ae=!1;else{s=Nh(i,t,z,s,!1);const dt=n.listen(ke,o,s);X.push(s,dt),M&&M.push(o,je,we,we+1)}}else s=Nh(i,t,z,s,!0),ke.addEventListener(o,s,a),X.push(s),M&&M.push(o,je,we,a)}else s=Nh(i,t,z,s,!1);const ge=i.outputs;let be;if(ae&&null!==ge&&(be=ge[o])){const Ee=be.length;if(Ee)for(let ke=0;ke<Ee;ke+=2){const Ut=t[be[ke]][be[ke+1]].subscribe(s),zt=X.length;X.push(s,Ut),M&&M.push(o,i.index,zt,-(zt+1))}}}(s,o,o[11],a,r,t,!!n,i),Kt}function ov(r,t,n,i){try{return!1!==n(i)}catch(o){return dy(r,o),!1}}function Nh(r,t,n,i,o){return function s(a){if(a===Function)return i;const c=2&r.flags?cr(r.index,t):t;0==(32&t[2])&&fh(c);let d=ov(t,0,i,a),S=s.__ngNextListenerFn__;for(;S;)d=ov(t,0,S,a)&&d,S=S.__ngNextListenerFn__;return o&&!1===d&&(a.preventDefault(),a.returnValue=!1),d}}function _n(r=1){return function(r){return(ft.lFrame.contextLView=function(r,t){for(;r>0;)t=t[15],r--;return t}(r,ft.lFrame.contextLView))[8]}(r)}function tO(r,t){let n=null;const i=function(r){const t=r.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(r);for(let o=0;o<t.length;o++){const s=t[o];if("*"!==s){if(null===i?P1(r,s,!0):iw(i,s))return o}else n=o}return n}function Hs(r){const t=Pe()[16][6];if(!t.projection){const i=t.projection=Yi(r?r.length:1,null),o=i.slice();let s=t.child;for(;null!==s;){const a=r?tO(s,r):0;null!==a&&(o[a]?o[a].projectionNext=s:i[a]=s,o[a]=s),s=s.next}}}function tr(r,t=0,n){const i=Pe(),o=Ot(),s=As(o,20+r,16,null,n||null);null===s.projection&&(s.projection=t),df(),64!=(64&s.flags)&&function(r,t,n){D1(t[11],0,t,n,v1(r,n,t),C1(n.parent||t[6],n,t))}(o,i,s)}function gv(r,t,n,i,o){const s=r[n+1],a=null===t;let c=i?Fr(s):Ii(s),d=!1;for(;0!==c&&(!1===d||a);){const M=r[c+1];iO(r[c],t)&&(d=!0,r[c+1]=i?Zf(M):Qf(M)),c=i?Fr(M):Ii(M)}d&&(r[n+1]=i?Qf(s):Zf(s))}function iO(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&_s(r,t)>=0}function Ht(r,t){return function(r,t,n,i){const o=Pe(),s=Ot(),a=function(r){const t=ft.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,n}(2);s.firstUpdatePass&&function(r,t,n,i){const o=r.data;if(null===o[n+1]){const s=o[Wn()],a=function(r,t){return t>=r.expandoStartIndex}(r,n);(function(r,t){return 0!=(r.flags&(t?16:32))})(s,i)&&null===t&&!a&&(t=!1),t=function(r,t,n,i){const o=function(r){const t=ft.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}(r);let s=i?t.residualClasses:t.residualStyles;if(null===o)0===(i?t.classBindings:t.styleBindings)&&(n=Za(n=kh(null,r,t,n,i),t.attrs,i),s=null);else{const a=t.directiveStylingLast;if(-1===a||r[a]!==o)if(n=kh(o,r,t,n,i),null===s){let d=function(r,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==Ii(i))return r[Fr(i)]}(r,t,i);void 0!==d&&Array.isArray(d)&&(d=kh(null,r,t,d[1],i),d=Za(d,t.attrs,i),function(r,t,n,i){r[Fr(n?t.classBindings:t.styleBindings)]=i}(r,t,i,d))}else s=function(r,t,n){let i;const o=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<o;s++)i=Za(i,r[s].hostAttrs,n);return Za(i,t.attrs,n)}(r,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),n}(o,s,t,i),function(r,t,n,i,o,s){let a=s?t.classBindings:t.styleBindings,c=Fr(a),d=Ii(a);r[i]=n;let M,S=!1;if(Array.isArray(n)){const z=n;M=z[1],(null===M||_s(z,M)>0)&&(S=!0)}else M=n;if(o)if(0!==d){const X=Fr(r[c+1]);r[i+1]=Vu(X,c),0!==X&&(r[X+1]=Xf(r[X+1],i)),r[c+1]=function(r,t){return 131071&r|t<<17}(r[c+1],i)}else r[i+1]=Vu(c,0),0!==c&&(r[c+1]=Xf(r[c+1],i)),c=i;else r[i+1]=Vu(d,0),0===c?c=i:r[d+1]=Xf(r[d+1],i),d=i;S&&(r[i+1]=Qf(r[i+1])),gv(r,M,i,!0),gv(r,M,i,!1),function(r,t,n,i,o){const s=o?r.residualClasses:r.residualStyles;null!=s&&"string"==typeof t&&_s(s,t)>=0&&(n[i+1]=Zf(n[i+1]))}(t,M,r,i,s),a=Vu(c,d),s?t.classBindings=a:t.styleBindings=a}(o,s,t,n,a,i)}}(s,r,a,i),t!==pt&&Nn(o,a,t)&&function(r,t,n,i,o,s,a,c){if(!(3&t.type))return;const d=r.data,S=d[c+1];Ju(function(r){return 1==(1&r)}(S)?Rv(d,t,n,o,Ii(S),a):void 0)||(Ju(s)||function(r){return 2==(2&r)}(S)&&(s=Rv(d,null,n,o,c,a)),function(r,t,n,i,o){const s=nn(r);if(t)o?s?r.addClass(n,i):n.classList.add(i):s?r.removeClass(n,i):n.classList.remove(i);else{let a=-1===i.indexOf("-")?void 0:dr.DashCase;if(null==o)s?r.removeStyle(n,i,a):n.style.removeProperty(i);else{const c="string"==typeof o&&o.endsWith("!important");c&&(o=o.slice(0,-10),a|=dr.Important),s?r.setStyle(n,i,o,a):n.style.setProperty(i,o,c?"important":"")}}}(i,a,lu(Wn(),n),o,s))}(s,s.data[Wn()],o,o[11],r,o[a+1]=function(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=lt(function(r){return r instanceof class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?r.changingThisBreaksApplicationSecurity:r}(r)))),r}(t,n),i,a)}(r,t,null,!0),Ht}function kh(r,t,n,i,o){let s=null;const a=n.directiveEnd;let c=n.directiveStylingLast;for(-1===c?c=n.directiveStart:c++;c<a&&(s=t[c],i=Za(i,s.hostAttrs,o),s!==r);)c++;return null!==r&&(n.directiveStylingLast=c),i}function Za(r,t,n){const i=n?1:2;let o=-1;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:o===i&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),ur(r,a,!!n||t[++s]))}return void 0===r?null:r}function Rv(r,t,n,i,o,s){const a=null===t;let c;for(;o>0;){const d=r[o],S=Array.isArray(d),M=S?d[1]:d,z=null===M;let X=n[o+1];X===pt&&(X=z?Gt:void 0);let ae=z?Cf(X,i):M===i?X:void 0;if(S&&!Ju(ae)&&(ae=Cf(d,i)),Ju(ae)&&(c=ae,a))return c;const ge=r[o+1];o=a?Fr(ge):Ii(ge)}if(null!==t){let d=s?t.residualClasses:t.residualStyles;null!=d&&(c=Cf(d,i))}return c}function Ju(r){return void 0!==r}function Mn(r,t=""){const n=Pe(),i=Ot(),o=r+20,s=i.firstCreatePass?As(i,o,1,t,null):i.data[o],a=n[o]=function(r,t){return nn(r)?r.createText(t):r.createTextNode(t)}(n[11],t);xu(i,n,a,s),ti(s,!1)}function Oo(r){return ec("",r,""),Oo}function ec(r,t,n){const i=Pe(),o=function(r,t,n,i){return Nn(r,us(),n)?t+_t(n)+i:pt}(i,r,t,n);return o!==pt&&wi(i,Wn(),o),ec}function tc(r,t,n){const i=Pe();return Nn(i,us(),t)&&fr(Ot(),rn(),i,r,t,i[11],n,!0),tc}const No=void 0;var jO=["en",[["a","p"],["AM","PM"],No],[["AM","PM"],No,No],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],No,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],No,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",No,"{1} 'at' {0}",No],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Gs={};function Kv(r){return r in Gs||(Gs[r]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[r]),Gs[r]}var $e=(()=>(($e=$e||{})[$e.LocaleId=0]="LocaleId",$e[$e.DayPeriodsFormat=1]="DayPeriodsFormat",$e[$e.DayPeriodsStandalone=2]="DayPeriodsStandalone",$e[$e.DaysFormat=3]="DaysFormat",$e[$e.DaysStandalone=4]="DaysStandalone",$e[$e.MonthsFormat=5]="MonthsFormat",$e[$e.MonthsStandalone=6]="MonthsStandalone",$e[$e.Eras=7]="Eras",$e[$e.FirstDayOfWeek=8]="FirstDayOfWeek",$e[$e.WeekendRange=9]="WeekendRange",$e[$e.DateFormat=10]="DateFormat",$e[$e.TimeFormat=11]="TimeFormat",$e[$e.DateTimeFormat=12]="DateTimeFormat",$e[$e.NumberSymbols=13]="NumberSymbols",$e[$e.NumberFormats=14]="NumberFormats",$e[$e.CurrencyCode=15]="CurrencyCode",$e[$e.CurrencySymbol=16]="CurrencySymbol",$e[$e.CurrencyName=17]="CurrencyName",$e[$e.Currencies=18]="Currencies",$e[$e.Directionality=19]="Directionality",$e[$e.PluralCase=20]="PluralCase",$e[$e.ExtraData=21]="ExtraData",$e))();const Qu="en-US";let Yv=Qu;function Ph(r){sr(r,"Expected localeId to be defined"),"string"==typeof r&&(Yv=r.toLowerCase().replace(/_/g,"-"))}function Fh(r,t,n,i,o){if(r=nt(r),Array.isArray(r))for(let s=0;s<r.length;s++)Fh(r[s],t,n,i,o);else{const s=Ot(),a=Pe();let c=Os(r)?r:nt(r.provide),d=my(r);const S=pn(),M=1048575&S.providerIndexes,z=S.directiveStart,X=S.providerIndexes>>20;if(Os(r)||!r.multi){const ae=new wa(d,o,Ie),ge=jh(c,t,o?M:M+X,z);-1===ge?(Su(Oa(S,a),s,c),Vh(s,r,t.length),t.push(c),S.directiveStart++,S.directiveEnd++,o&&(S.providerIndexes+=1048576),n.push(ae),a.push(ae)):(n[ge]=ae,a[ge]=ae)}else{const ae=jh(c,t,M+X,z),ge=jh(c,t,M,M+X),be=ae>=0&&n[ae],Ee=ge>=0&&n[ge];if(o&&!Ee||!o&&!be){Su(Oa(S,a),s,c);const ke=function(r,t,n,i,o){const s=new wa(r,n,Ie);return s.multi=[],s.index=t,s.componentProviders=0,vE(s,o,i&&!n),s}(o?xN:LN,n.length,o,i,d);!o&&Ee&&(n[ge].providerFactory=ke),Vh(s,r,t.length,0),t.push(c),S.directiveStart++,S.directiveEnd++,o&&(S.providerIndexes+=1048576),n.push(ke),a.push(ke)}else Vh(s,r,ae>-1?ae:ge,vE(n[o?ge:ae],d,!o&&i));!o&&i&&Ee&&n[ge].componentProviders++}}}function Vh(r,t,n,i){const o=Os(t);if(o||function(r){return!!r.useClass}(t)){const a=(t.useClass||t).prototype.ngOnDestroy;if(a){const c=r.destroyHooks||(r.destroyHooks=[]);if(!o&&t.multi){const d=c.indexOf(n);-1===d?c.push(n,[i,a]):c[d+1].push(i,a)}else c.push(n,a)}}}function vE(r,t,n){return n&&r.componentProviders++,r.multi.push(t)-1}function jh(r,t,n,i){for(let o=n;o<i;o++)if(t[o]===r)return o;return-1}function LN(r,t,n,i){return Uh(this.multi,[])}function xN(r,t,n,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=Na(n,n[1],this.providerFactory.index,i);s=c.slice(0,a),Uh(o,s);for(let d=a;d<c.length;d++)s.push(c[d])}else s=[],Uh(o,s);return s}function Uh(r,t){for(let n=0;n<r.length;n++)t.push((0,r[n])());return t}function Lt(r,t=[]){return n=>{n.providersResolver=(i,o)=>function(r,t,n){const i=Ot();if(i.firstCreatePass){const o=Lr(r);Fh(n,i.data,i.blueprint,o,!0),Fh(t,i.data,i.blueprint,o,!1)}}(i,o?o(r):r,t)}}class EE{}const SE="ngComponent";class jN{resolveComponentFactory(t){throw function(r){const t=Error(`No component factory found for ${lt(r)}. Did you add it to @NgModule.entryComponents?`);return t[SE]=r,t}(t)}}class Zi{}function nl(...r){}function zs(r,t){return new Dt(br(r,t))}Zi.NULL=new jN;const HN=function(){return zs(pn(),Pe())};let Dt=(()=>{class r{constructor(n){this.nativeElement=n}}return r.__NG_ELEMENT_ID__=HN,r})();function CE(r){return r instanceof Dt?r.nativeElement:r}class Mo{}let fi=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>GN(),r})();const GN=function(){const r=Pe(),n=cr(pn().index,r);return function(r){return r[11]}(ei(n)?n:r)};let Hh=(()=>{class r{}return r.\u0275prov=Xe({token:r,providedIn:"root",factory:()=>null}),r})();class eo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const TE=new eo("12.2.4");class AE{constructor(){}supports(t){return Ja(t)}create(t){return new KN(t)}}const $N=(r,t)=>t;class KN{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||$N}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,o=0,s=null;for(;n||i;){const a=!i||n&&n.currentIndex<RE(i,o,s)?n:i,c=RE(a,o,s),d=a.currentIndex;if(a===i)o--,i=i._nextRemoved;else if(n=n._next,null==a.previousIndex)o++;else{s||(s=[]);const S=c-o,M=d-o;if(S!=M){for(let X=0;X<S;X++){const ae=X<s.length?s[X]:s[X]=0,ge=ae+X;M<=ge&&ge<S&&(s[X]=ae+1)}s[a.previousIndex]=M-S}}c!==d&&t(a,c,d)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Ja(t))throw new Error(`Error trying to diff '${lt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,s,a,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)s=t[c],a=this._trackByFn(c,s),null!==n&&Object.is(n.trackById,a)?(i&&(n=this._verifyReinsertion(n,s,a,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,a,c),i=!0),n=n._next}else o=0,function(r,t){if(Array.isArray(r))for(let n=0;n<r.length;n++)t(r[n]);else{const n=r[Ns()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,c=>{a=this._trackByFn(o,c),null!==n&&Object.is(n.trackById,a)?(i&&(n=this._verifyReinsertion(n,c,a,o)),Object.is(n.item,c)||this._addIdentityChange(n,c)):(n=this._mismatch(n,c,a,o),i=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,o){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,o))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,o)):t=this._addAfter(new YN(n,i),s,o),t}_verifyReinsertion(t,n,i,o){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,s=t._nextRemoved;return null===o?this._removalsHead=s:o._nextRemoved=s,null===s?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const o=null===n?this._itHead:n._next;return t._next=o,t._prev=n,null===o?this._itTail=t:o._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new IE),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new IE),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class YN{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class JN{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class IE{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new JN,this.map.set(n,i)),i.add(t)}get(t,n){const o=this.map.get(t);return o?o.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RE(r,t,n){const i=r.previousIndex;if(null===i)return i;let o=0;return n&&i<n.length&&(o=n[i]),i+t+o}class wE{constructor(){}supports(t){return t instanceof Map||Th(t)}create(){return new QN}}class QN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Th(t)))throw new Error(`Error trying to diff '${lt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,o)=>{if(n&&n.key===o)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(o,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const o=this._records.get(t);this._maybeAddToChanges(o,n);const s=o._prev,a=o._next;return s&&(s._next=a),a&&(a._prev=s),o._next=null,o._prev=null,o}const i=new XN(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class XN{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DE(){return new sc([new AE])}let sc=(()=>{class r{constructor(n){this.factories=n}static create(n,i){if(null!=i){const o=i.factories.slice();n=n.concat(o)}return new r(n)}static extend(n){return{provide:r,useFactory:i=>r.create(n,i||DE()),deps:[[r,new Ji,new er]]}}find(n){const i=this.factories.find(o=>o.supports(n));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(r){return r.name||typeof r}(n)}'`)}}return r.\u0275prov=Xe({token:r,providedIn:"root",factory:DE}),r})();function OE(){return new $s([new wE])}let $s=(()=>{class r{constructor(n){this.factories=n}static create(n,i){if(i){const o=i.factories.slice();n=n.concat(o)}return new r(n)}static extend(n){return{provide:r,useFactory:i=>r.create(n,i||OE()),deps:[[r,new Ji,new er]]}}find(n){const i=this.factories.find(o=>o.supports(n));if(i)return i;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return r.\u0275prov=Xe({token:r,providedIn:"root",factory:OE}),r})();function rl(r,t,n,i,o=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&i.push(dn(s)),Pr(s))for(let c=10;c<s.length;c++){const d=s[c],S=d[1].firstChild;null!==S&&rl(d[1],d,S,i)}const a=n.type;if(8&a)rl(r,t,n.child,i);else if(32&a){const c=Uf(n,t);let d;for(;d=c();)i.push(d)}else if(16&a){const c=R1(t,n);if(Array.isArray(c))i.push(...c);else{const d=Wa(t[16]);rl(d[1],d,c,i,!0)}}n=o?n.projectionNext:n.next}return i}class ac{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return rl(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Pr(t)){const n=t[8],i=n?n.indexOf(this):-1;i>-1&&(qf(t,i),To(n,i))}this._attachedToViewContainer=!1}y1(this._lView[1],this._lView)}onDestroy(t){X1(this._lView[1],this._lView,null,t)}markForCheck(){fh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ph(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,t,n){fu(!0);try{ph(r,t,n)}finally{fu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(r,t){Ga(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class eM extends ac{constructor(t){super(t),this._view=t}detectChanges(){ay(this._view)}checkNoChanges(){!function(r){fu(!0);try{ay(r)}finally{fu(!1)}}(this._view)}get context(){return null}}const nM=function(r){return function(r,t,n){if(cu(r)&&!n){const i=cr(r.index,t);return new ac(i,i)}return 47&r.type?new ac(t[16],t):null}(pn(),Pe(),16==(16&r))};let Ks=(()=>{class r{}return r.__NG_ELEMENT_ID__=nM,r})();const oM=[new wE],aM=new sc([new AE]),cM=new $s(oM),lM=function(){return il(pn(),Pe())};let Oi=(()=>{class r{}return r.__NG_ELEMENT_ID__=lM,r})();const dM=Oi,fM=class extends dM{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t){const n=this._declarationTContainer.tViews,i=qa(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(n)),za(n,i,t),new ac(i)}};function il(r,t){return 4&r.type?new fM(t,r,zs(r,t)):null}class hi{}class NE{}const gM=function(){return PE(pn(),Pe())};let Hr=(()=>{class r{}return r.__NG_ELEMENT_ID__=gM,r})();const _M=Hr,ME=class extends _M{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return zs(this._hostTNode,this._hostLView)}get injector(){return new fs(this._hostTNode,this._hostLView)}get parentInjector(){const t=bu(this._hostTNode,this._hostLView);if(b_(t)){const n=ds(t,this._hostLView),i=ls(t);return new fs(n[1].data[i+8],n)}return new fs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=kE(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,i){const o=t.createEmbeddedView(n||{});return this.insert(o,i),o}createComponent(t,n,i,o,s){const a=i||this.parentInjector;if(!s&&null==t.ngModule&&a){const d=a.get(hi,null);d&&(s=d)}const c=t.create(a,o,void 0,s);return this.insert(c.hostView,n),c}insert(t,n){const i=t._lView,o=i[1];if(function(r){return Pr(r[3])}(i)){const M=this.indexOf(t);if(-1!==M)this.detach(M);else{const z=i[3],X=new ME(z,z[6],z[3]);X.detach(X.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;!function(r,t,n,i){const o=10+i,s=n.length;i>0&&(n[o-1][4]=t),i<s-10?(t[4]=n[o],Iu(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const a=t[17];null!==a&&n!==a&&function(r,t){const n=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===n?r[9]=[t]:n.push(t)}(a,t);const c=t[19];null!==c&&c.insertView(r),t[2]|=128}(o,i,a,s);const c=Kf(s,a),d=i[11],S=Lu(d,a[7]);return null!==S&&function(r,t,n,i,o,s){i[0]=o,i[6]=t,Ga(r,i,n,1,o,s)}(o,a[6],d,i,S,c),t.attachToViewContainerRef(),Iu(Wh(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=kE(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=qf(this._lContainer,n);i&&(To(Wh(this._lContainer),n),y1(i[1],i))}detach(t){const n=this._adjustIndex(t,-1),i=qf(this._lContainer,n);return i&&null!=To(Wh(this._lContainer),n)?new ac(i):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function kE(r){return r[8]}function Wh(r){return r[8]||(r[8]=[])}function PE(r,t){let n;const i=t[r.index];if(Pr(i))n=i;else{let o;if(8&r.type)o=dn(i);else{const s=t[11];o=s.createComment("");const a=br(r,t);wo(s,Lu(s,a),o,function(r,t){return nn(r)?r.nextSibling(t):t.nextSibling}(s,a),!1)}t[r.index]=n=sy(i,t,o,r),Hu(t,n)}return new ME(n,r,t)}const Xs={};class e0 extends Zi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Bn(t);return new n0(n,this.ngModule)}}function t0(r){const t=[];for(let n in r)r.hasOwnProperty(n)&&t.push({propName:r[n],templateName:n});return t}const h3=new et("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>l1});class n0 extends EE{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function(r){return r.map(ow).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return t0(this.componentDef.inputs)}get outputs(){return t0(this.componentDef.outputs)}create(t,n,i,o){const s=(o=o||this.ngModule)?function(r,t){return{get:(n,i,o)=>{const s=r.get(n,Xs,o);return s!==Xs||i===Xs?s:t.get(n,i,o)}}}(t,o.injector):t,a=s.get(Mo,o_),c=s.get(Hh,null),d=a.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",M=i?function(r,t,n){if(nn(r))return r.selectRootElement(t,n===ln.ShadowDom);let i="string"==typeof t?r.querySelector(t):t;return i.textContent="",i}(d,i,this.componentDef.encapsulation):Gf(a.createRenderer(null,this.componentDef),S,function(r){const t=r.toLowerCase();return"svg"===t?r_:"math"===t?"http://www.w3.org/1998/MathML/":null}(S)),z=this.componentDef.onPush?576:528,X=function(r,t){return{components:[],scheduler:r||l1,clean:Ww,playerHandler:t||null,flags:0}}(),ae=Bu(0,null,null,1,0,null,null,null,null,null),ge=qa(null,ae,X,z,null,null,a,d,c,s);let be,Ee;hu(ge);try{const ke=function(r,t,n,i,o,s){const a=n[1];n[20]=r;const d=As(a,20,2,"#host",null),S=d.mergedAttrs=t.hostAttrs;null!==S&&(Wu(d,S,!0),null!==r&&(yu(o,r,S),null!==d.classes&&Jf(o,r,d.classes),null!==d.styles&&O1(o,r,d.styles)));const M=i.createRenderer(r,t),z=qa(n,Y1(t),null,t.onPush?64:16,n[20],d,i,M,s||null,null);return a.firstCreatePass&&(Su(Oa(d,n),a,t.type),ry(a,d),iy(d,n.length,1)),Hu(n,z),n[20]=z}(M,this.componentDef,ge,a,d);if(M)if(i)yu(d,M,["ng-version",TE.full]);else{const{attrs:we,classes:je}=function(r){const t=[],n=[];let i=1,o=2;for(;i<r.length;){let s=r[i];if("string"==typeof s)2===o?""!==s&&t.push(s,r[++i]):8===o&&n.push(s);else{if(!xr(o))break;o=s}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);we&&yu(d,M,we),je&&je.length>0&&Jf(d,M,je.join(" "))}if(Ee=af(ae,20),void 0!==n){const we=Ee.projection=[];for(let je=0;je<this.ngContentSelectors.length;je++){const Ge=n[je];we.push(null!=Ge?Array.from(Ge):null)}}be=function(r,t,n,i,o){const s=n[1],a=function(r,t,n){const i=pn();r.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),oy(r,i,t,Is(r,t,1,null),n));const o=Na(t,r,i.directiveStart,i);On(o,t);const s=br(i,t);return s&&On(s,t),o}(s,n,t);if(i.components.push(a),r[8]=a,o&&o.forEach(d=>d(a,t)),t.contentQueries){const d=pn();t.contentQueries(1,a,d.directiveStart)}const c=pn();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(zi(c.index),ty(n[1],c,0,c.directiveStart,c.directiveEnd,t),ny(t,a)),a}(ke,this.componentDef,ge,X,[gD]),za(ae,ge,null)}finally{pu()}return new m3(this.componentType,be,zs(Ee,ge),ge,Ee)}}class m3 extends class{}{constructor(t,n,i,o,s){super(),this.location=i,this._rootLView=o,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new eM(o),this.componentType=t}get injector(){return new fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Zs=new Map;class v3 extends hi{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new e0(this);const i=yr(t),o=function(r){return r[CA]||null}(t);o&&Ph(o),this._bootstrapComponents=ai(i.bootstrap),this._r3Injector=gy(t,n,[{provide:hi,useValue:this},{provide:Zi,useValue:this.componentFactoryResolver}],lt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=Nt.THROW_IF_NOT_FOUND,i=st.Default){return t===Nt||t===hi||t===ws?this:this._r3Injector.get(t,n,i)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class np extends NE{constructor(t){super(),this.moduleType=t,null!==yr(t)&&function(r){const t=new Set;!function n(i){const o=yr(i,!0),s=o.id;null!==s&&(function(r,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${r} - ${lt(t)} vs ${lt(t.name)}`)}(s,Zs.get(s),i),Zs.set(s,i));const a=ai(o.imports);for(const c of a)t.has(c)||(t.add(c),n(c))}(r)}(t)}create(t){return new v3(this.moduleType,t)}}function s0(r,t,n,i,o,s){const a=t+n;return Nn(r,a,o)?function(r,t,n){return r[t]=n}(r,a+1,s?i.call(s,o):i(o)):function(r,t){const n=r[t];return n===pt?void 0:n}(r,a+1)}function ul(r,t){const n=Ot();let i;const o=r+20;n.firstCreatePass?(i=function(r,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(r===i.name)return i}throw new _o("302",`The pipe '${r}' could not be found!`)}(t,n.pipeRegistry),n.data[o]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(o,i.onDestroy)):i=n.data[o];const s=i.factory||(i.factory=So(i.type)),a=Hi(Ie);try{const c=Eu(!1),d=s();return Eu(c),function(r,t,n,i){n>=r.data.length&&(r.data[n]=null,r.blueprint[n]=null),t[n]=i}(n,Pe(),o,d),d}finally{Hi(a)}}function ll(r,t,n){const i=r+20,o=Pe(),s=function(r,t){return r[t]}(o,i);return function(r,t){jr.isWrapped(t)&&(t=jr.unwrap(t),r[ft.lFrame.bindingIndex]=pt);return t}(o,function(r,t){return r[1].data[t].pure}(o,i)?s0(o,function(){const r=ft.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}(),t,s.transform,n,s):s.transform(n))}function rp(r){return t=>{setTimeout(r,void 0,t)}}const jt=class extends u{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){var o,s,a;let c=t,d=n||(()=>null),S=i;if(t&&"object"==typeof t){const z=t;c=null===(o=z.next)||void 0===o?void 0:o.bind(z),d=null===(s=z.error)||void 0===s?void 0:s.bind(z),S=null===(a=z.complete)||void 0===a?void 0:a.bind(z)}this.__isAsync&&(d=rp(d),c&&(c=rp(c)),S&&(S=rp(S)));const M=super.subscribe({next:c,error:d,complete:S});return t instanceof v&&t.add(M),M}};function x3(){return this._results[Ns()]()}class dl{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Ns(),i=dl.prototype;i[n]||(i[n]=x3)}get changes(){return this._changes||(this._changes=new jt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const o=Sr(t);(this._changesDetected=!function(r,t,n){if(r.length!==t.length)return!1;for(let i=0;i<r.length;i++){let o=r[i],s=t[i];if(n&&(o=n(o),s=n(s)),s!==o)return!1}return!0}(i._results,o,n))&&(i._results=o,i.length=o.length,i.last=o[this.length-1],i.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class ip{constructor(t){this.queryList=t,this.matches=null}clone(){return new ip(this.queryList)}setDirty(){this.queryList.setDirty()}}class op{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,o=[];for(let s=0;s<i;s++){const a=n.getByIndex(s);o.push(this.queries[a.indexInDeclarationView].clone())}return new op(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==g0(t,n).matches&&this.queries[n].setDirty()}}class d0{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class sp{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const o=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(t,o);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new sp(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ap{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new ap(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){const s=i[o];this.matchTNodeWithReadOption(t,n,j3(n,s)),this.matchTNodeWithReadOption(t,n,Cu(n,t,s,!1,!1))}else i===Oi?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Cu(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const o=this.metadata.read;if(null!==o)if(o===Dt||o===Hr||o===Oi&&4&n.type)this.addMatch(n.index,-2);else{const s=Cu(n,t,o,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function j3(r,t){const n=r.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function B3(r,t,n,i){return-1===n?function(r,t){return 11&r.type?zs(r,t):4&r.type?il(r,t):null}(t,r):-2===n?function(r,t,n){return n===Dt?zs(t,r):n===Oi?il(t,r):n===Hr?PE(t,r):void 0}(r,t,i):Na(r,r[1],n,t)}function f0(r,t,n,i){const o=t[19].queries[i];if(null===o.matches){const s=r.data,a=n.matches,c=[];for(let d=0;d<a.length;d+=2){const S=a[d];c.push(S<0?null:B3(t,s[S],a[d+1],n.metadata.read))}o.matches=c}return o.matches}function cp(r,t,n,i){const o=r.queries.getByIndex(n),s=o.matches;if(null!==s){const a=f0(r,t,o,n);for(let c=0;c<s.length;c+=2){const d=s[c];if(d>0)i.push(a[c/2]);else{const S=s[c+1],M=t[-d];for(let z=10;z<M.length;z++){const X=M[z];X[17]===X[3]&&cp(X[1],X,S,i)}if(null!==M[9]){const z=M[9];for(let X=0;X<z.length;X++){const ae=z[X];cp(ae[1],ae,S,i)}}}}}return i}function In(r){const t=Pe(),n=Ot(),i=f_();pf(i+1);const o=g0(n,i);if(r.dirty&&s_(t)===(2==(2&o.metadata.flags))){if(null===o.matches)r.reset([]);else{const s=o.crossesNgTemplate?cp(n,t,i,[]):f0(n,t,o,i);r.reset(s,CE),r.notifyOnChanges()}return!0}return!1}function ea(r,t,n){const i=Ot();i.firstCreatePass&&(p0(i,new d0(r,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),h0(i,Pe(),t)}function Rr(r,t,n,i){const o=Ot();if(o.firstCreatePass){const s=pn();p0(o,new d0(t,n,i),s.index),function(r,t){const n=r.contentQueries||(r.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(r.queries.length-1,t)}(o,r),2==(2&n)&&(o.staticContentQueries=!0)}h0(o,Pe(),n)}function Rn(){return function(r,t){return r[19].queries[t].queryList}(Pe(),f_())}function h0(r,t,n){const i=new dl(4==(4&n));X1(r,t,i,i.destroy),null===t[19]&&(t[19]=new op),t[19].queries.push(new ip(i))}function p0(r,t,n){null===r.queries&&(r.queries=new sp),r.queries.track(new ap(t,n))}function g0(r,t){return r.queries.getByIndex(t)}const vc=new et("Application Initializer");let na=(()=>{class r{constructor(n){this.appInits=n,this.resolve=nl,this.reject=nl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const s=this.appInits[o]();if(Xa(s))n.push(s);else if(Yu(s)){const a=new Promise((c,d)=>{s.subscribe({complete:c,error:d})});n.push(a)}}Promise.all(n).then(()=>{i()}).catch(o=>{this.reject(o)}),0===n.length&&i(),this.initialized=!0}}return r.\u0275fac=function(n){return new(n||r)(Ne(vc,8))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();const Ec=new et("AppId"),y4={provide:Ec,useFactory:function(){return`${pp()}${pp()}${pp()}`},deps:[]};function pp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const k0=new et("Platform Initializer"),bc=new et("Platform ID"),P0=new et("appBootstrapListener");let pl=(()=>{class r{log(n){console.log(n)}warn(n){console.warn(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();const Ni=new et("LocaleId"),L0=new et("DefaultCurrencyCode");class E4{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}const gp=function(r){return new np(r)},b4=gp,S4=function(r){return Promise.resolve(gp(r))},x0=function(r){const t=gp(r),i=ai(yr(r).declarations).reduce((o,s)=>{const a=Bn(s);return a&&o.push(new n0(a)),o},[]);return new E4(t,i)},C4=x0,T4=function(r){return Promise.resolve(x0(r))};let Lo=(()=>{class r{constructor(){this.compileModuleSync=b4,this.compileModuleAsync=S4,this.compileModuleAndAllComponentsSync=C4,this.compileModuleAndAllComponentsAsync=T4}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();const R4=(()=>Promise.resolve(0))();function mp(r){"undefined"==typeof Zone?R4.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class At{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jt(!1),this.onMicrotaskEmpty=new jt(!1),this.onStable=new jt(!1),this.onError=new jt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&n,o.shouldCoalesceRunChangeDetection=i,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function(){let r=Ft.requestAnimationFrame,t=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&t){const n=r[Zone.__symbol__("OriginalDelegate")];n&&(r=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(r){const t=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Ft,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,yp(r),r.isCheckStableRunning=!0,_p(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),yp(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,o,s,a,c)=>{try{return F0(r),n.invokeTask(o,s,a,c)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||r.shouldCoalesceRunChangeDetection)&&t(),V0(r)}},onInvoke:(n,i,o,s,a,c,d)=>{try{return F0(r),n.invoke(o,s,a,c,d)}finally{r.shouldCoalesceRunChangeDetection&&t(),V0(r)}},onHasTask:(n,i,o,s)=>{n.hasTask(o,s),i===o&&("microTask"==s.change?(r._hasPendingMicrotasks=s.microTask,yp(r),_p(r)):"macroTask"==s.change&&(r.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,o,s)=>(n.handleError(o,s),r.runOutsideAngular(()=>r.onError.emit(s)),!1)})}(o)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!At.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(At.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,o){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+o,t,D4,nl,nl);try{return s.runTask(a,n,i)}finally{s.cancelTask(a)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const D4={};function _p(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function yp(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function F0(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function V0(r){r._nesting--,_p(r)}class M4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jt,this.onMicrotaskEmpty=new jt,this.onStable=new jt,this.onError=new jt}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,o){return t.apply(n,i)}}let vp=(()=>{class r{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{At.assertNotInAngularZone(),mp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mp(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:o})}whenStable(n,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,i,o){return[]}}return r.\u0275fac=function(n){return new(n||r)(Ne(At))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})(),j0=(()=>{class r{constructor(){this._applications=new Map,Ep.addToWindow(this)}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return Ep.findTestabilityInTree(this,n,i)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();class k4{addToWindow(t){}findTestabilityInTree(t,n,i){return null}}let Ep=new k4,U0=!0,B0=!1;function bp(){return B0=!0,U0}let qr;const H0=new et("AllowMultipleToken");class Sp{constructor(t,n){this.name=t,this.token=n}}function W0(r,t,n=[]){const i=`Platform: ${t}`,o=new et(i);return(s=[])=>{let a=G0();if(!a||a.injector.get(H0,!1))if(r)r(n.concat(s).concat({provide:o,useValue:!0}));else{const c=n.concat(s).concat({provide:o,useValue:!0},{provide:$a,useValue:"platform"});!function(r){if(qr&&!qr.destroyed&&!qr.injector.get(H0,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");qr=r.get(q0);const t=r.get(k0,null);t&&t.forEach(n=>n())}(Nt.create({providers:c,name:i}))}return function(r){const t=G0();if(!t)throw new Error("No platform exists!");if(!t.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(o)}}function G0(){return qr&&!qr.destroyed?qr:null}let q0=(()=>{class r{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const c=function(r,t){let n;return n="noop"===r?new M4:("zone.js"===r?void 0:r)||new At({enableLongStackTrace:bp(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),d=[{provide:At,useValue:c}];return c.run(()=>{const S=Nt.create({providers:d,parent:this.injector,name:n.moduleType.name}),M=n.create(S),z=M.injector.get(Ro,null);if(!z)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return c.runOutsideAngular(()=>{const X=c.onError.subscribe({next:ae=>{z.handleError(ae)}});M.onDestroy(()=>{Cp(this._modules,M),X.unsubscribe()})}),function(r,t,n){try{const i=n();return Xa(i)?i.catch(o=>{throw t.runOutsideAngular(()=>r.handleError(o)),o}):i}catch(i){throw t.runOutsideAngular(()=>r.handleError(i)),i}}(z,c,()=>{const X=M.injector.get(na);return X.runInitializers(),X.donePromise.then(()=>(Ph(M.injector.get(Ni,Qu)||Qu),this._moduleDoBootstrap(M),M))})})}bootstrapModule(n,i=[]){const o=z0({},i);return function(r,t,n){const i=new np(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(n){const i=n.injector.get(ra);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${lt(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(n){return new(n||r)(Ne(Nt))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();function z0(r,t){return Array.isArray(t)?t.reduce(z0,r):Object.assign(Object.assign({},r),t)}let ra=(()=>{class r{constructor(n,i,o,s,a){this._zone=n,this._injector=i,this._exceptionHandler=o,this._componentFactoryResolver=s,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new oe(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),d=new oe(S=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{At.assertNotInAngularZone(),mp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{At.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{M.unsubscribe(),z.unsubscribe()}});this.isStable=J(c,d.pipe(r=>_e()(function(r,t){return function(i){let o;o="function"==typeof r?r:function(){return r};const s=Object.create(i,Be);return s.source=i,s.subjectFactory=o,s}}(ot)(r))))}bootstrap(n,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let o;o=n instanceof EE?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(o.componentType);const s=function(r){return r.isBoundToModule}(o)?void 0:this._injector.get(hi),c=o.create(Nt.NULL,[],i||o.selector,s),d=c.location.nativeElement,S=c.injector.get(vp,null),M=S&&c.injector.get(j0);return S&&M&&M.registerApplication(d,S),c.onDestroy(()=>{this.detachView(c.hostView),Cp(this.components,c),M&&M.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;Cp(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(P0,[]).concat(this._bootstrapListeners).forEach(o=>o(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(n){return new(n||r)(Ne(At),Ne(Nt),Ne(Ro),Ne(Zi),Ne(na))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();function Cp(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}class ml{}class K4{}const Y4={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let J4=(()=>{class r{constructor(n,i){this._compiler=n,this._config=i||Y4}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[i,o]=n.split("#");return void 0===o&&(o="default"),j(255)(i).then(s=>s[o]).then(s=>J0(s,i,o)).then(s=>this._compiler.compileModuleAsync(s))}loadFactory(n){let[i,o]=n.split("#"),s="NgFactory";return void 0===o&&(o="default",s=""),j(255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(a=>a[o+s]).then(a=>J0(a,i,o))}}return r.\u0275fac=function(n){return new(n||r)(Ne(Lo),Ne(K4,8))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();function J0(r,t,n){if(!r)throw new Error(`Cannot find '${n}' in '${t}'`);return r}const sk=W0(null,"core",[{provide:bc,useValue:"unknown"},{provide:q0,deps:[Nt]},{provide:j0,deps:[]},{provide:pl,deps:[]}]),dk=[{provide:ra,useClass:ra,deps:[At,Nt,Ro,Zi,na]},{provide:h3,deps:[At],useFactory:function(r){let t=[];return r.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:na,useClass:na,deps:[[new er,vc]]},{provide:Lo,useClass:Lo,deps:[]},y4,{provide:sc,useFactory:function(){return aM},deps:[]},{provide:$s,useFactory:function(){return cM},deps:[]},{provide:Ni,useFactory:function(r){return Ph(r=r||"undefined"!=typeof $localize&&$localize.locale||Qu),r},deps:[[new Es(Ni),new er,new Ji]]},{provide:L0,useValue:"USD"}];let hk=(()=>{class r{constructor(n){}}return r.\u0275fac=function(n){return new(n||r)(Ne(ra))},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({providers:dk}),r})(),Il=null;function pi(){return Il}const kt=new et("DocumentToken");let Vo=(()=>{class r{historyGo(n){throw new Error("Not implemented")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({factory:fP,token:r,providedIn:"platform"}),r})();function fP(){return Ne(Eb)}const hP=new et("Location Initialized");let Eb=(()=>{class r extends Vo{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pi().getBaseHref(this._doc)}onPopState(n){const i=pi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=pi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,i,o){bb()?this._history.pushState(n,i,o):this.location.hash=o}replaceState(n,i,o){bb()?this._history.replaceState(n,i,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return r.\u0275fac=function(n){return new(n||r)(Ne(kt))},r.\u0275prov=Xe({factory:pP,token:r,providedIn:"platform"}),r})();function bb(){return!!window.history.pushState}function pP(){return new Eb(Ne(kt))}function Vp(r,t){if(0==r.length)return t;if(0==t.length)return r;let n=0;return r.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?r+t.substring(1):1==n?r+t:r+"/"+t}function Sb(r){const t=r.match(/#|\?|$/),n=t&&t.index||r.length;return r.slice(0,n-("/"===r[n-1]?1:0))+r.slice(n)}function ki(r){return r&&"?"!==r[0]?"?"+r:r}let sa=(()=>{class r{historyGo(n){throw new Error("Not implemented")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({factory:gP,token:r,providedIn:"root"}),r})();function gP(r){const t=Ne(kt).location;return new Cb(Ne(Vo),t&&t.origin||"")}const jp=new et("appBaseHref");let Cb=(()=>{class r extends sa{constructor(n,i){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Vp(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+ki(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${i}${o}`:i}pushState(n,i,o,s){const a=this.prepareExternalUrl(o+ki(s));this._platformLocation.pushState(n,i,a)}replaceState(n,i,o,s){const a=this.prepareExternalUrl(o+ki(s));this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var i,o;null===(o=(i=this._platformLocation).historyGo)||void 0===o||o.call(i,n)}}return r.\u0275fac=function(n){return new(n||r)(Ne(Vo),Ne(jp,8))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})(),mP=(()=>{class r extends sa{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=Vp(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,o,s){let a=this.prepareExternalUrl(o+ki(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,i,a)}replaceState(n,i,o,s){let a=this.prepareExternalUrl(o+ki(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var i,o;null===(o=(i=this._platformLocation).historyGo)||void 0===o||o.call(i,n)}}return r.\u0275fac=function(n){return new(n||r)(Ne(Vo),Ne(jp,8))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})(),Rl=(()=>{class r{constructor(n,i){this._subject=new jt,this._urlChangeListeners=[],this._platformStrategy=n;const o=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Sb(Tb(o)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+ki(i))}normalize(n){return r.stripTrailingSlash(function(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,Tb(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,i="",o=null){this._platformStrategy.pushState(o,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ki(i)),o)}replaceState(n,i="",o=null){this._platformStrategy.replaceState(o,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ki(i)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var i,o;null===(o=(i=this._platformStrategy).historyGo)||void 0===o||o.call(i,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(o=>o(n,i))}subscribe(n,i,o){return this._subject.subscribe({next:n,error:i,complete:o})}}return r.\u0275fac=function(n){return new(n||r)(Ne(sa),Ne(Vo))},r.normalizeQueryParams=ki,r.joinWithSlash=Vp,r.stripTrailingSlash=Sb,r.\u0275prov=Xe({factory:_P,token:r,providedIn:"root"}),r})();function _P(){return new Rl(Ne(sa),Ne(Vo))}function Tb(r){return r.replace(/\/index.html$/,"")}var fn=(()=>((fn=fn||{})[fn.Zero=0]="Zero",fn[fn.One=1]="One",fn[fn.Two=2]="Two",fn[fn.Few=3]="Few",fn[fn.Many=4]="Many",fn[fn.Other=5]="Other",fn))();const AP=function(r){return function(r){const t=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let n=Kv(t);if(n)return n;const i=t.split("-")[0];if(n=Kv(i),n)return n;if("en"===i)return jO;throw new Error(`Missing locale data for the locale "${r}".`)}(r)[$e.PluralCase]};class Fl{}let eL=(()=>{class r extends Fl{constructor(n){super(),this.locale=n}getPluralCategory(n,i){switch(AP(i||this.locale)(n)){case fn.Zero:return"zero";case fn.One:return"one";case fn.Two:return"two";case fn.Few:return"few";case fn.Many:return"many";default:return"other"}}}return r.\u0275fac=function(n){return new(n||r)(Ne(Ni))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();class iL{constructor(t,n,i,o){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kb=(()=>{class r{constructor(n,i,o){this._viewContainer=n,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(r){return r.name||typeof r}(n)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=[];n.forEachOperation((o,s,a)=>{if(null==o.previousIndex){const c=this._viewContainer.createEmbeddedView(this._template,new iL(null,this._ngForOf,-1,-1),null===a?void 0:a),d=new Pb(o,c);i.push(d)}else if(null==a)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const c=this._viewContainer.get(s);this._viewContainer.move(c,a);const d=new Pb(o,c);i.push(d)}});for(let o=0;o<i.length;o++)this._perViewChange(i[o].view,i[o].record);for(let o=0,s=this._viewContainer.length;o<s;o++){const a=this._viewContainer.get(o);a.context.index=o,a.context.count=s,a.context.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(n,i){n.context.$implicit=i.item}static ngTemplateContextGuard(n,i){return!0}}return r.\u0275fac=function(n){return new(n||r)(Ie(Hr),Ie(Oi),Ie(sc))},r.\u0275dir=Je({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();class Pb{constructor(t,n){this.record=t,this.view=n}}let Vl=(()=>{class r{constructor(n,i){this._viewContainer=n,this._context=new sL,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Lb("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Lb("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}}return r.\u0275fac=function(n){return new(n||r)(Ie(Hr),Ie(Oi))},r.\u0275dir=Je({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class sL{constructor(){this.$implicit=null,this.ngIf=null}}function Lb(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${lt(t)}'.`)}class Kp{constructor(t,n){this._viewContainerRef=t,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let jl=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(n){this._ngSwitch=n,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(n){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(n)}_matchCase(n){const i=n==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(n){if(this._defaultViews&&n!==this._defaultUsed){this._defaultUsed=n;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(n)}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Je({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),r})(),xb=(()=>{class r{constructor(n,i,o){this.ngSwitch=o,o._addCase(),this._view=new Kp(n,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(n){return new(n||r)(Ie(Hr),Ie(Oi),Ie(jl,9))},r.\u0275dir=Je({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),r})();class dL{createSubscription(t,n){return t.subscribe({next:n,error:i=>{throw i}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class fL{createSubscription(t,n){return t.then(n,i=>{throw i})}dispose(t){}onDestroy(t){}}const hL=new fL,pL=new dL;let Yp=(()=>{class r{constructor(n){this._ref=n,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,i=>this._updateLatestValue(n,i))}_selectStrategy(n){if(Xa(n))return hL;if(nv(n))return pL;throw function(r,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${lt(r)}'`)}(r,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,i){n===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return r.\u0275fac=function(n){return new(n||r)(Ie(Ks,16))},r.\u0275pipe=Qn({name:"async",type:r,pure:!1}),r})(),Ul=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({providers:[{provide:Fl,useClass:eL}]}),r})();const jb="browser";let Ub=(()=>{class r{}return r.\u0275prov=Xe({token:r,providedIn:"root",factory:()=>new PL(Ne(kt),window)}),r})();class PL{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function(r,t){const n=r.getElementById(t)||r.getElementsByName(t)[0];if(n)return n;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const i=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let o=i.currentNode;for(;o;){const s=o.shadowRoot;if(s){const a=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(a)return a}o=i.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],o-s[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Bb(this.window.history)||Bb(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Bb(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class Xp extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(r){Il||(Il=r)}(new Xp)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=(wc=wc||document.querySelector("base"),wc?wc.getAttribute("href"):null);return null==n?null:function(r){Bl=Bl||document.createElement("a"),Bl.setAttribute("href",r);const t=Bl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){wc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(r,t){t=encodeURIComponent(t);for(const n of r.split(";")){const i=n.indexOf("="),[o,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(o.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Bl,wc=null;const Hb=new et("TRANSITION_ID"),BL=[{provide:vc,useFactory:function(r,t,n){return()=>{n.get(na).donePromise.then(()=>{const i=pi(),o=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let s=0;s<o.length;s++)i.remove(o[s])})}},deps:[Hb,kt,Nt],multi:!0}];class Zp{static init(){!function(r){Ep=r}(new Zp)}addToWindow(t){Ft.getAngularTestability=(i,o=!0)=>{const s=t.findTestabilityInTree(i,o);if(null==s)throw new Error("Could not find testability for element.");return s},Ft.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ft.getAllAngularRootElements=()=>t.getAllRootElements(),Ft.frameworkStabilizers||(Ft.frameworkStabilizers=[]),Ft.frameworkStabilizers.push(i=>{const o=Ft.getAllAngularTestabilities();let s=o.length,a=!1;const c=function(d){a=a||d,s--,0==s&&i(a)};o.forEach(function(d){d.whenStable(c)})})}findTestabilityInTree(t,n,i){if(null==n)return null;const o=t.getTestability(n);return null!=o?o:i?pi().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let HL=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();const Dc=new et("EventManagerPlugins");let Wl=(()=>{class r{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(o=>o.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,o){return this._findPluginFor(i).addEventListener(n,i,o)}addGlobalEventListener(n,i,o){return this._findPluginFor(i).addGlobalEventListener(n,i,o)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const o=this._plugins;for(let s=0;s<o.length;s++){const a=o[s];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return r.\u0275fac=function(n){return new(n||r)(Ne(Dc),Ne(At))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();class eg{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const o=pi().getGlobalEventTarget(this._doc,t);if(!o)throw new Error(`Unsupported event target ${o} for event ${n}`);return this.addEventListener(o,n,i)}}let Gb=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),i.add(o))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})(),Oc=(()=>{class r extends Gb{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,o){n.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,o.push(i.appendChild(a))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(qb),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,o)=>{this._addStylesToHost(n,o,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(qb))}}return r.\u0275fac=function(n){return new(n||r)(Ne(kt))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();function qb(r){pi().remove(r)}const tg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ng=/%COMP%/g;function Gl(r,t,n){for(let i=0;i<t.length;i++){let o=t[i];Array.isArray(o)?Gl(r,o,n):(o=o.replace(ng,r),n.push(o))}return n}function Kb(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let ql=(()=>{class r{constructor(n,i,o){this.eventManager=n,this.sharedStylesHost=i,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new rg(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case ln.Emulated:{let o=this.rendererByCompId.get(i.id);return o||(o=new rx(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,o)),o.applyToHost(n),o}case 1:case ln.ShadowDom:return new ix(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const o=Gl(i.id,i.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(n){return new(n||r)(Ne(Wl),Ne(Oc),Ne(Ec))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();class rg{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,n){return n?document.createElementNS(tg[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,i){t&&t.insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,o){if(o){n=o+":"+n;const s=tg[o];s?t.setAttributeNS(s,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const o=tg[i];o?t.removeAttributeNS(o,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,o){o&(dr.DashCase|dr.Important)?t.style.setProperty(n,i,o&dr.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&dr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,Kb(i)):this.eventManager.addEventListener(t,n,Kb(i))}}class rx extends rg{constructor(t,n,i,o){super(t),this.component=i;const s=Gl(o+"-"+i.id,i.styles,[]);n.addStyles(s),this.contentAttr=function(r){return"_ngcontent-%COMP%".replace(ng,r)}(o+"-"+i.id),this.hostAttr=function(r){return"_nghost-%COMP%".replace(ng,r)}(o+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}class ix extends rg{constructor(t,n,i,o){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Gl(o.id,o.styles,[]);for(let a=0;a<s.length;a++){const c=document.createElement("style");c.textContent=s[a],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ox=(()=>{class r extends eg{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,o){return n.addEventListener(i,o,!1),()=>this.removeEventListener(n,i,o)}removeEventListener(n,i,o){return n.removeEventListener(i,o)}}return r.\u0275fac=function(n){return new(n||r)(Ne(kt))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();const Qb=["alt","control","meta","shift"],fx={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xb={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hx={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let px=(()=>{class r extends eg{constructor(n){super(n)}supports(n){return null!=r.parseEventName(n)}addEventListener(n,i,o){const s=r.parseEventName(i),a=r.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pi().onAndCancel(n,s.domEventName,a))}static parseEventName(n){const i=n.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const s=r._normalizeKey(i.pop());let a="";if(Qb.forEach(d=>{const S=i.indexOf(d);S>-1&&(i.splice(S,1),a+=d+".")}),a+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=o,c.fullKey=a,c}static getEventFullKey(n){let i="",o=function(r){let t=r.key;if(null==t){if(t=r.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===r.location&&Xb.hasOwnProperty(t)&&(t=Xb[t]))}return fx[t]||t}(n);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Qb.forEach(s=>{s!=o&&hx[s](n)&&(i+=s+".")}),i+=o,i}static eventCallback(n,i,o){return s=>{r.getEventFullKey(s)===n&&o.runGuarded(()=>i(s))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return r.\u0275fac=function(n){return new(n||r)(Ne(kt))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();const Sx=W0(sk,"browser",[{provide:bc,useValue:jb},{provide:k0,useValue:function(){Xp.makeCurrent(),Zp.init()},multi:!0},{provide:kt,useFactory:function(){return function(r){of=r}(document),document},deps:[]}]),Cx=[[],{provide:$a,useValue:"root"},{provide:Ro,useFactory:function(){return new Ro},deps:[]},{provide:Dc,useClass:ox,multi:!0,deps:[kt,At,bc]},{provide:Dc,useClass:px,multi:!0,deps:[kt]},[],{provide:ql,useClass:ql,deps:[Wl,Oc,Ec]},{provide:Mo,useExisting:ql},{provide:Gb,useExisting:Oc},{provide:Oc,useClass:Oc,deps:[kt]},{provide:vp,useClass:vp,deps:[At]},{provide:Wl,useClass:Wl,deps:[Dc,At]},{provide:class{},useClass:HL,deps:[]},[]];let ag=(()=>{class r{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:r,providers:[{provide:Ec,useValue:n.appId},{provide:Hb,useExisting:Ec},BL]}}}return r.\u0275fac=function(n){return new(n||r)(Ne(r,12))},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({providers:Cx,imports:[Ul,hk]}),r})();"undefined"!=typeof window&&window;class eS{}const Li="*";function Mx(r,t){return{type:7,name:r,definitions:t,options:{}}}function kx(r,t=null){return{type:4,styles:t,timings:r}}function tS(r,t=null){return{type:2,steps:r,options:t}}function zl(r){return{type:6,styles:r,offset:null}}function Px(r,t,n){return{type:0,name:r,styles:t,options:n}}function Lx(r,t,n=null){return{type:1,expr:r,animation:t,options:n}}function nS(r){Promise.resolve(null).then(r)}class aa{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){nS(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class rS{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,i=0,o=0;const s=this.players.length;0==s?nS(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++n==s&&this._onFinish()}),a.onDestroy(()=>{++i==s&&this._onDestroy()}),a.onStart(()=>{++o==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,c)=>Math.max(a,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(i=>{const o=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(o)})}getPosition(){const t=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}function iS(){return"undefined"!=typeof window&&void 0!==window.document}function lg(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function io(r){switch(r.length){case 0:return new aa;case 1:return r[0];default:return new rS(r)}}function oS(r,t,n,i,o={},s={}){const a=[],c=[];let d=-1,S=null;if(i.forEach(M=>{const z=M.offset,X=z==d,ae=X&&S||{};Object.keys(M).forEach(ge=>{let be=ge,Ee=M[ge];if("offset"!==ge)switch(be=t.normalizePropertyName(be,a),Ee){case"!":Ee=o[ge];break;case Li:Ee=s[ge];break;default:Ee=t.normalizeStyleValue(ge,be,Ee,a)}ae[be]=Ee}),X||c.push(ae),S=ae,d=z}),a.length){const M="\n - ";throw new Error(`Unable to animate due to the following errors:${M}${a.join(M)}`)}return c}function dg(r,t,n,i){switch(t){case"start":r.onStart(()=>i(n&&fg(n,"start",r)));break;case"done":r.onDone(()=>i(n&&fg(n,"done",r)));break;case"destroy":r.onDestroy(()=>i(n&&fg(n,"destroy",r)))}}function fg(r,t,n){const i=n.totalTime,s=hg(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,null==i?r.totalTime:i,!!n.disabled),a=r._data;return null!=a&&(s._data=a),s}function hg(r,t,n,i,o="",s=0,a){return{element:r,triggerName:t,fromState:n,toState:i,phaseName:o,totalTime:s,disabled:!!a}}function hr(r,t,n){let i;return r instanceof Map?(i=r.get(t),i||r.set(t,i=n)):(i=r[t],i||(i=r[t]=n)),i}function sS(r){const t=r.indexOf(":");return[r.substring(1,t),r.substr(t+1)]}let pg=(r,t)=>!1,gg=(r,t)=>!1,aS=(r,t,n)=>[];const cS=lg();(cS||"undefined"!=typeof Element)&&(pg=iS()?(r,t)=>{for(;t&&t!==document.documentElement;){if(t===r)return!0;t=t.parentNode||t.host}return!1}:(r,t)=>r.contains(t),gg=(()=>{if(cS||Element.prototype.matches)return(r,t)=>r.matches(t);{const r=Element.prototype,t=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector;return t?(n,i)=>t.apply(n,[i]):gg}})(),aS=(r,t,n)=>{let i=[];if(n){const o=r.querySelectorAll(t);for(let s=0;s<o.length;s++)i.push(o[s])}else{const o=r.querySelector(t);o&&i.push(o)}return i});let jo=null,uS=!1;function mg(r){jo||(jo=("undefined"!=typeof document?document.body:null)||{},uS=!!jo.style&&"WebkitAppearance"in jo.style);let t=!0;return jo.style&&!function(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in jo.style,!t&&uS&&(t="Webkit"+r.charAt(0).toUpperCase()+r.substr(1)in jo.style)),t}const _g=gg,yg=pg,vg=aS;function lS(r){const t={};return Object.keys(r).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=r[n]}),t}let dS=(()=>{class r{validateStyleProperty(n){return mg(n)}matchesElement(n,i){return _g(n,i)}containsElement(n,i){return yg(n,i)}query(n,i,o){return vg(n,i,o)}computeStyle(n,i,o){return o||""}animate(n,i,o,s,a,c=[],d){return new aa(o,s)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();class $l{}$l.NOOP=new dS;const Eg="ng-enter",Kl="ng-leave",Yl="ng-trigger",Jl=".ng-trigger",hS="ng-animating",bg=".ng-animating";function Uo(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Sg(parseFloat(t[1]),t[2])}function Sg(r,t){switch(t){case"s":return 1e3*r;default:return r}}function Ql(r,t,n){return r.hasOwnProperty("duration")?r:function(r,t,n){let o,s=0,a="";if("string"==typeof r){const c=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return t.push(`The provided timing value "${r}" is invalid.`),{duration:0,delay:0,easing:""};o=Sg(parseFloat(c[1]),c[2]);const d=c[3];null!=d&&(s=Sg(parseFloat(d),c[4]));const S=c[5];S&&(a=S)}else o=r;if(!n){let c=!1,d=t.length;o<0&&(t.push("Duration values below 0 are not allowed for this animation step."),c=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&t.splice(d,0,`The provided timing value "${r}" is invalid.`)}return{duration:o,delay:s,easing:a}}(r,t,n)}function ca(r,t={}){return Object.keys(r).forEach(n=>{t[n]=r[n]}),t}function oo(r,t,n={}){if(t)for(let i in r)n[i]=r[i];else ca(r,n);return n}function gS(r,t,n){return n?t+":"+n+";":""}function mS(r){let t="";for(let n=0;n<r.style.length;n++){const i=r.style.item(n);t+=gS(0,i,r.style.getPropertyValue(i))}for(const n in r.style)r.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=gS(0,Wx(n),r.style[n]));r.setAttribute("style",t)}function gi(r,t,n){r.style&&(Object.keys(t).forEach(i=>{const o=Tg(i);n&&!n.hasOwnProperty(i)&&(n[i]=r.style[o]),r.style[o]=t[i]}),lg()&&mS(r))}function Bo(r,t){r.style&&(Object.keys(t).forEach(n=>{const i=Tg(n);r.style[i]=""}),lg()&&mS(r))}function Nc(r){return Array.isArray(r)?1==r.length?r[0]:tS(r):r}const Cg=new RegExp("{{\\s*(.+?)\\s*}}","g");function _S(r){let t=[];if("string"==typeof r){let n;for(;n=Cg.exec(r);)t.push(n[1]);Cg.lastIndex=0}return t}function Xl(r,t,n){const i=r.toString(),o=i.replace(Cg,(s,a)=>{let c=t[a];return t.hasOwnProperty(a)||(n.push(`Please provide a value for the animation param ${a}`),c=""),c.toString()});return o==i?r:o}function Zl(r){const t=[];let n=r.next();for(;!n.done;)t.push(n.value),n=r.next();return t}const Hx=/-+([a-z0-9])/g;function Tg(r){return r.replace(Hx,(...t)=>t[1].toUpperCase())}function Wx(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function yS(r,t){return 0===r||0===t}function vS(r,t,n){const i=Object.keys(n);if(i.length&&t.length){let s=t[0],a=[];if(i.forEach(c=>{s.hasOwnProperty(c)||a.push(c),s[c]=n[c]}),a.length)for(var o=1;o<t.length;o++){let c=t[o];a.forEach(function(d){c[d]=Ag(r,d)})}}return t}function pr(r,t,n){switch(t.type){case 7:return r.visitTrigger(t,n);case 0:return r.visitState(t,n);case 1:return r.visitTransition(t,n);case 2:return r.visitSequence(t,n);case 3:return r.visitGroup(t,n);case 4:return r.visitAnimate(t,n);case 5:return r.visitKeyframes(t,n);case 6:return r.visitStyle(t,n);case 8:return r.visitReference(t,n);case 9:return r.visitAnimateChild(t,n);case 10:return r.visitAnimateRef(t,n);case 11:return r.visitQuery(t,n);case 12:return r.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function Ag(r,t){return window.getComputedStyle(r)[t]}function Gx(r,t){const n=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(i=>function(r,t,n){if(":"==r[0]){const d=function(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return t.push(`The transition alias value "${r}" is not supported`),"* => *"}}(r,n);if("function"==typeof d)return void t.push(d);r=d}const i=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${r}" is not supported`),t;const o=i[1],s=i[2],a=i[3];t.push(ES(o,a));"<"==s[0]&&!("*"==o&&"*"==a)&&t.push(ES(a,o))}(i,n,t)):n.push(r),n}const td=new Set(["true","1"]),nd=new Set(["false","0"]);function ES(r,t){const n=td.has(r)||nd.has(r),i=td.has(t)||nd.has(t);return(o,s)=>{let a="*"==r||r==o,c="*"==t||t==s;return!a&&n&&"boolean"==typeof o&&(a=o?td.has(r):nd.has(r)),!c&&i&&"boolean"==typeof s&&(c=s?td.has(t):nd.has(t)),a&&c}}const $x=new RegExp("s*:selfs*,?","g");function Ig(r,t,n){return new Kx(r).build(t,n)}class Kx{constructor(t){this._driver=t}build(t,n){const i=new Qx(n);return this._resetContextStyleTimingState(i),pr(this,Nc(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,n){let i=n.queryCount=0,o=n.depCount=0;const s=[],a=[];return"@"==t.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(c=>{if(this._resetContextStyleTimingState(n),0==c.type){const d=c,S=d.name;S.toString().split(/\s*,\s*/).forEach(M=>{d.name=M,s.push(this.visitState(d,n))}),d.name=S}else if(1==c.type){const d=this.visitTransition(c,n);i+=d.queryCount,o+=d.depCount,a.push(d)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:s,transitions:a,queryCount:i,depCount:o,options:null}}visitState(t,n){const i=this.visitStyle(t.styles,n),o=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,a=o||{};if(i.styles.forEach(c=>{if(rd(c)){const d=c;Object.keys(d).forEach(S=>{_S(d[S]).forEach(M=>{a.hasOwnProperty(M)||s.add(M)})})}}),s.size){const c=Zl(s.values());n.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${c.join(", ")}`)}}return{type:0,name:t.name,style:i,options:o?{params:o}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const i=pr(this,Nc(t.animation),n);return{type:1,matchers:Gx(t.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:Ho(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(i=>pr(this,i,n)),options:Ho(t.options)}}visitGroup(t,n){const i=n.currentTime;let o=0;const s=t.steps.map(a=>{n.currentTime=i;const c=pr(this,a,n);return o=Math.max(o,n.currentTime),c});return n.currentTime=o,{type:3,steps:s,options:Ho(t.options)}}visitAnimate(t,n){const i=function(r,t){let n=null;if(r.hasOwnProperty("duration"))n=r;else if("number"==typeof r)return Rg(Ql(r,t).duration,0,"");const i=r;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Rg(0,0,"");return s.dynamic=!0,s.strValue=i,s}return n=n||Ql(i,t),Rg(n.duration,n.delay,n.easing)}(t.timings,n.errors);n.currentAnimateTimings=i;let o,s=t.styles?t.styles:zl({});if(5==s.type)o=this.visitKeyframes(s,n);else{let a=t.styles,c=!1;if(!a){c=!0;const S={};i.easing&&(S.easing=i.easing),a=zl(S)}n.currentTime+=i.duration+i.delay;const d=this.visitStyle(a,n);d.isEmptyStep=c,o=d}return n.currentAnimateTimings=null,{type:4,timings:i,style:o,options:null}}visitStyle(t,n){const i=this._makeStyleAst(t,n);return this._validateStyleAst(i,n),i}_makeStyleAst(t,n){const i=[];Array.isArray(t.styles)?t.styles.forEach(a=>{"string"==typeof a?a==Li?i.push(a):n.errors.push(`The provided style string value ${a} is not allowed.`):i.push(a)}):i.push(t.styles);let o=!1,s=null;return i.forEach(a=>{if(rd(a)){const c=a,d=c.easing;if(d&&(s=d,delete c.easing),!o)for(let S in c)if(c[S].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,n){const i=n.currentAnimateTimings;let o=n.currentTime,s=n.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(a=>{"string"!=typeof a&&Object.keys(a).forEach(c=>{if(!this._driver.validateStyleProperty(c))return void n.errors.push(`The provided animation property "${c}" is not a supported CSS property for animations`);const d=n.collectedStyles[n.currentQuerySelector],S=d[c];let M=!0;S&&(s!=o&&s>=S.startTime&&o<=S.endTime&&(n.errors.push(`The CSS property "${c}" that exists between the times of "${S.startTime}ms" and "${S.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${o}ms"`),M=!1),s=S.startTime),M&&(d[c]={startTime:s,endTime:o}),n.options&&function(r,t,n){const i=t.params||{},o=_S(r);o.length&&o.forEach(s=>{i.hasOwnProperty(s)||n.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(a[c],n.options,n.errors)})})}visitKeyframes(t,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),i;let s=0;const a=[];let c=!1,d=!1,S=0;const M=t.steps.map(ke=>{const we=this._makeStyleAst(ke,n);let je=null!=we.offset?we.offset:function(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(n=>{if(rd(n)&&n.hasOwnProperty("offset")){const i=n;t=parseFloat(i.offset),delete i.offset}});else if(rd(r)&&r.hasOwnProperty("offset")){const n=r;t=parseFloat(n.offset),delete n.offset}return t}(we.styles),Ge=0;return null!=je&&(s++,Ge=we.offset=je),d=d||Ge<0||Ge>1,c=c||Ge<S,S=Ge,a.push(Ge),we});d&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),c&&n.errors.push("Please ensure that all keyframe offsets are in order");const z=t.steps.length;let X=0;s>0&&s<z?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(X=1/(z-1));const ae=z-1,ge=n.currentTime,be=n.currentAnimateTimings,Ee=be.duration;return M.forEach((ke,we)=>{const je=X>0?we==ae?1:X*we:a[we],Ge=je*Ee;n.currentTime=ge+be.delay+Ge,be.duration=Ge,this._validateStyleAst(ke,n),ke.offset=je,i.styles.push(ke)}),i}visitReference(t,n){return{type:8,animation:pr(this,Nc(t.animation),n),options:Ho(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:Ho(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:Ho(t.options)}}visitQuery(t,n){const i=n.currentQuerySelector,o=t.options||{};n.queryCount++,n.currentQuery=t;const[s,a]=function(r){const t=!!r.split(/\s*,\s*/).find(n=>":self"==n);return t&&(r=r.replace($x,"")),[r=r.replace(/@\*/g,Jl).replace(/@\w+/g,n=>Jl+"-"+n.substr(1)).replace(/:animating/g,bg),t]}(t.selector);n.currentQuerySelector=i.length?i+" "+s:s,hr(n.collectedStyles,n.currentQuerySelector,{});const c=pr(this,Nc(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:s,limit:o.limit||0,optional:!!o.optional,includeSelf:a,animation:c,originalSelector:t.selector,options:Ho(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:Ql(t.timings,n.errors,!0);return{type:12,animation:pr(this,Nc(t.animation),n),timings:i,options:null}}}class Qx{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function rd(r){return!Array.isArray(r)&&"object"==typeof r}function Ho(r){return r?(r=ca(r)).params&&(r.params=function(r){return r?ca(r):null}(r.params)):r={},r}function Rg(r,t,n){return{duration:r,delay:t,easing:n}}function wg(r,t,n,i,o,s,a=null,c=!1){return{type:1,element:r,keyframes:t,preStyleProps:n,postStyleProps:i,duration:o,delay:s,totalTime:o+s,easing:a,subTimeline:c}}class id{constructor(){this._map=new Map}consume(t){let n=this._map.get(t);return n?this._map.delete(t):n=[],n}append(t,n){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const n5=new RegExp(":enter","g"),i5=new RegExp(":leave","g");function Dg(r,t,n,i,o,s={},a={},c,d,S=[]){return(new o5).buildKeyframes(r,t,n,i,o,s,a,c,d,S)}class o5{buildKeyframes(t,n,i,o,s,a,c,d,S,M=[]){S=S||new id;const z=new Og(t,n,S,o,s,M,[]);z.options=d,z.currentTimeline.setStyles([a],null,z.errors,d),pr(this,i,z);const X=z.timelines.filter(ae=>ae.containsAnimation());if(X.length&&Object.keys(c).length){const ae=X[X.length-1];ae.allowOnlyTimelineStyles()||ae.setStyles([c],null,z.errors,d)}return X.length?X.map(ae=>ae.buildKeyframes()):[wg(n,[],[],[],0,0,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const i=n.subInstructions.consume(n.element);if(i){const o=n.createSubContext(t.options),s=n.currentTimeline.currentTime,a=this._visitSubInstructions(i,o,o.options);s!=a&&n.transformIntoNewTimeline(a)}n.previousNode=t}visitAnimateRef(t,n){const i=n.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=t}_visitSubInstructions(t,n,i){let s=n.currentTimeline.currentTime;const a=null!=i.duration?Uo(i.duration):null,c=null!=i.delay?Uo(i.delay):null;return 0!==a&&t.forEach(d=>{const S=n.appendInstructionToTimeline(d,a,c);s=Math.max(s,S.duration+S.delay)}),s}visitReference(t,n){n.updateOptions(t.options,!0),pr(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const i=n.subContextCount;let o=n;const s=t.options;if(s&&(s.params||s.delay)&&(o=n.createSubContext(s),o.transformIntoNewTimeline(),null!=s.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=od);const a=Uo(s.delay);o.delayNextStep(a)}t.steps.length&&(t.steps.forEach(a=>pr(this,a,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>i&&o.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const i=[];let o=n.currentTimeline.currentTime;const s=t.options&&t.options.delay?Uo(t.options.delay):0;t.steps.forEach(a=>{const c=n.createSubContext(t.options);s&&c.delayNextStep(s),pr(this,a,c),o=Math.max(o,c.currentTimeline.currentTime),i.push(c.currentTimeline)}),i.forEach(a=>n.currentTimeline.mergeTimelineCollectedStyles(a)),n.transformIntoNewTimeline(o),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const i=t.strValue;return Ql(n.params?Xl(i,n.params,n.errors):i,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const i=n.currentAnimateTimings=this._visitTiming(t.timings,n),o=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),o.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(i.duration),this.visitStyle(s,n),o.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const i=n.currentTimeline,o=n.currentAnimateTimings;!o&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=o&&o.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const i=n.currentAnimateTimings,o=n.currentTimeline.duration,s=i.duration,c=n.createSubContext().currentTimeline;c.easing=i.easing,t.styles.forEach(d=>{c.forwardTime((d.offset||0)*s),c.setStyles(d.styles,d.easing,n.errors,n.options),c.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(c),n.transformIntoNewTimeline(o+s),n.previousNode=t}visitQuery(t,n){const i=n.currentTimeline.currentTime,o=t.options||{},s=o.delay?Uo(o.delay):0;s&&(6===n.previousNode.type||0==i&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=od);let a=i;const c=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!o.optional,n.errors);n.currentQueryTotal=c.length;let d=null;c.forEach((S,M)=>{n.currentQueryIndex=M;const z=n.createSubContext(t.options,S);s&&z.delayNextStep(s),S===n.element&&(d=z.currentTimeline),pr(this,t.animation,z),z.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,z.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(a),d&&(n.currentTimeline.mergeTimelineCollectedStyles(d),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const i=n.parentContext,o=n.currentTimeline,s=t.timings,a=Math.abs(s.duration),c=a*(n.currentQueryTotal-1);let d=a*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":d=c-d;break;case"full":d=i.currentStaggerTime}const M=n.currentTimeline;d&&M.delayNextStep(d);const z=M.currentTime;pr(this,t.animation,n),n.previousNode=t,i.currentStaggerTime=o.currentTime-z+(o.startTime-i.currentTimeline.startTime)}}const od={};class Og{constructor(t,n,i,o,s,a,c,d){this._driver=t,this.element=n,this.subInstructions=i,this._enterClassName=o,this._leaveClassName=s,this.errors=a,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=od,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=d||new sd(this._driver,n,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const i=t;let o=this.options;null!=i.duration&&(o.duration=Uo(i.duration)),null!=i.delay&&(o.delay=Uo(i.delay));const s=i.params;if(s){let a=o.params;a||(a=this.options.params={}),Object.keys(s).forEach(c=>{(!n||!a.hasOwnProperty(c))&&(a[c]=Xl(s[c],a,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const i=t.params={};Object.keys(n).forEach(o=>{i[o]=n[o]})}}return t}createSubContext(t=null,n,i){const o=n||this.element,s=new Og(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=od,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,i){const o={duration:null!=n?n:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new s5(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,o,t.stretchStartingKeyframe);return this.timelines.push(s),o}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,i,o,s,a){let c=[];if(o&&c.push(this.element),t.length>0){t=(t=t.replace(n5,"."+this._enterClassName)).replace(i5,"."+this._leaveClassName);let S=this._driver.query(this.element,t,1!=i);0!==i&&(S=i<0?S.slice(S.length+i,S.length):S.slice(0,i)),c.push(...S)}return!s&&0==c.length&&a.push(`\`query("${n}")\` returned zero elements. (Use \`query("${n}", { optional: true })\` if you wish to allow this.)`),c}}class sd{constructor(t,n,i,o){this._driver=t,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new sd(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles[t]=n,this._globalTimelineStyles[t]=n,this._styleSummary[t]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(n=>{this._backFill[n]=this._globalTimelineStyles[n]||Li,this._currentKeyframe[n]=Li}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,i,o){n&&(this._previousKeyframe.easing=n);const s=o&&o.params||{},a=function(r,t){const n={};let i;return r.forEach(o=>{"*"===o?(i=i||Object.keys(t),i.forEach(s=>{n[s]=Li})):oo(o,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(a).forEach(c=>{const d=Xl(a[c],s,i);this._pendingStyles[c]=d,this._localTimelineStyles.hasOwnProperty(c)||(this._backFill[c]=this._globalTimelineStyles.hasOwnProperty(c)?this._globalTimelineStyles[c]:Li),this._updateStyle(c,d)})}applyStylesToKeyframe(){const t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const n=this._localTimelineStyles[t];this._pendingStyles[t]=n,this._updateStyle(t,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(n=>{const i=this._styleSummary[n],o=t._styleSummary[n];(!i||o.time>i.time)&&this._updateStyle(n,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((c,d)=>{const S=oo(c,!0);Object.keys(S).forEach(M=>{const z=S[M];"!"==z?t.add(M):z==Li&&n.add(M)}),i||(S.offset=d/this.duration),o.push(S)});const s=t.size?Zl(t.values()):[],a=n.size?Zl(n.values()):[];if(i){const c=o[0],d=ca(c);c.offset=0,d.offset=1,o=[c,d]}return wg(this.element,o,s,a,this.duration,this.startTime,this.easing,!1)}}class s5 extends sd{constructor(t,n,i,o,s,a,c=!1){super(t,n,a.delay),this.keyframes=i,this.preStyleProps=o,this.postStyleProps=s,this._stretchStartingKeyframe=c,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:i,easing:o}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],a=i+n,c=n/a,d=oo(t[0],!1);d.offset=0,s.push(d);const S=oo(t[0],!1);S.offset=CS(c),s.push(S);const M=t.length-1;for(let z=1;z<=M;z++){let X=oo(t[z],!1);X.offset=CS((n+X.offset*i)/a),s.push(X)}i=a,n=0,o="",t=s}return wg(this.element,t,this.preStyleProps,this.postStyleProps,i,n,o,!0)}}function CS(r,t=3){const n=Math.pow(10,t-1);return Math.round(r*n)/n}class Ng{}class c5 extends Ng{normalizePropertyName(t,n){return Tg(t)}normalizeStyleValue(t,n,i,o){let s="";const a=i.toString().trim();if(u5[n]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const c=i.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&o.push(`Please provide a CSS unit value for ${t}:${i}`)}return a+s}}const u5=(()=>function(r){const t={};return r.forEach(n=>t[n]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function TS(r,t,n,i,o,s,a,c,d,S,M,z,X){return{type:0,element:r,triggerName:t,isRemovalTransition:o,fromState:n,fromStyles:s,toState:i,toStyles:a,timelines:c,queriedElements:d,preStyleProps:S,postStyleProps:M,totalTime:z,errors:X}}const Mg={};class AS{constructor(t,n,i){this._triggerName=t,this.ast=n,this._stateStyles=i}match(t,n,i,o){return function(r,t,n,i,o){return r.some(s=>s(t,n,i,o))}(this.ast.matchers,t,n,i,o)}buildStyles(t,n,i){const o=this._stateStyles["*"],s=this._stateStyles[t],a=o?o.buildStyles(n,i):{};return s?s.buildStyles(n,i):a}build(t,n,i,o,s,a,c,d,S,M){const z=[],X=this.ast.options&&this.ast.options.params||Mg,ge=this.buildStyles(i,c&&c.params||Mg,z),be=d&&d.params||Mg,Ee=this.buildStyles(o,be,z),ke=new Set,we=new Map,je=new Map,Ge="void"===o,dt={params:Object.assign(Object.assign({},X),be)},Ut=M?[]:Dg(t,n,this.ast.animation,s,a,ge,Ee,dt,S,z);let zt=0;if(Ut.forEach(Fn=>{zt=Math.max(Fn.duration+Fn.delay,zt)}),z.length)return TS(n,this._triggerName,i,o,Ge,ge,Ee,[],[],we,je,zt,z);Ut.forEach(Fn=>{const Vn=Fn.element,ji=hr(we,Vn,{});Fn.preStyleProps.forEach(Zr=>ji[Zr]=!0);const Ui=hr(je,Vn,{});Fn.postStyleProps.forEach(Zr=>Ui[Zr]=!0),Vn!==n&&ke.add(Vn)});const Jn=Zl(ke.values());return TS(n,this._triggerName,i,o,Ge,ge,Ee,Ut,Jn,we,je,zt)}}class f5{constructor(t,n,i){this.styles=t,this.defaultParams=n,this.normalizer=i}buildStyles(t,n){const i={},o=ca(this.defaultParams);return Object.keys(t).forEach(s=>{const a=t[s];null!=a&&(o[s]=a)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const a=s;Object.keys(a).forEach(c=>{let d=a[c];d.length>1&&(d=Xl(d,o,n));const S=this.normalizer.normalizePropertyName(c,n);d=this.normalizer.normalizeStyleValue(c,S,d,n),i[S]=d})}}),i}}class p5{constructor(t,n,i){this.name=t,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states={},n.states.forEach(o=>{this.states[o.name]=new f5(o.style,o.options&&o.options.params||{},i)}),IS(this.states,"true","1"),IS(this.states,"false","0"),n.transitions.forEach(o=>{this.transitionFactories.push(new AS(t,o,this.states))}),this.fallbackTransition=function(r,t,n){return new AS(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,c)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,i,o){return this.transitionFactories.find(a=>a.match(t,n,i,o))||null}matchStyles(t,n,i){return this.fallbackTransition.buildStyles(t,n,i)}}function IS(r,t,n){r.hasOwnProperty(t)?r.hasOwnProperty(n)||(r[n]=r[t]):r.hasOwnProperty(n)&&(r[t]=r[n])}const m5=new id;class _5{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,n){const i=[],o=Ig(this._driver,n,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[t]=o}_buildPlayer(t,n,i){const o=t.element,s=oS(0,this._normalizer,0,t.keyframes,n,i);return this._driver.animate(o,s,t.duration,t.delay,t.easing,[],!0)}create(t,n,i={}){const o=[],s=this._animations[t];let a;const c=new Map;if(s?(a=Dg(this._driver,n,s,Eg,Kl,{},{},i,m5,o),a.forEach(M=>{const z=hr(c,M.element,{});M.postStyleProps.forEach(X=>z[X]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),a=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);c.forEach((M,z)=>{Object.keys(M).forEach(X=>{M[X]=this._driver.computeStyle(z,X,Li)})});const S=io(a.map(M=>{const z=c.get(M.element);return this._buildPlayer(M,{},z)}));return this._playersById[t]=S,S.onDestroy(()=>this.destroy(t)),this.players.push(S),S}destroy(t){const n=this._getPlayer(t);n.destroy(),delete this._playersById[t];const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(t){const n=this._playersById[t];if(!n)throw new Error(`Unable to find the timeline player referenced by ${t}`);return n}listen(t,n,i,o){const s=hg(n,"","","");return dg(this._getPlayer(t),i,s,o),()=>{}}command(t,n,i,o){if("register"==i)return void this.register(t,o[0]);if("create"==i)return void this.create(t,n,o[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(t)}}}const RS="ng-animate-queued",wS="ng-animate-disabled",DS=".ng-animate-disabled",b5=[],OS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},S5={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Or="__ng_removed";class kg{constructor(t,n=""){this.namespaceId=n;const i=t&&t.hasOwnProperty("value");if(this.value=function(r){return null!=r?r:null}(i?t.value:t),i){const s=ca(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const i=this.options.params;Object.keys(n).forEach(o=>{null==i[o]&&(i[o]=n[o])})}}}const Mc="void",Pg=new kg(Mc);class C5{constructor(t,n,i){this.id=t,this.hostElement=n,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Nr(n,this._hostClassName)}listen(t,n,i,o){if(!this._triggers.hasOwnProperty(n))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${n}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${n}" because the provided event is undefined!`);if(!function(r){return"start"==r||"done"==r}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${n}" is not supported!`);const s=hr(this._elementListeners,t,[]),a={name:n,phase:i,callback:o};s.push(a);const c=hr(this._engine.statesByElement,t,{});return c.hasOwnProperty(n)||(Nr(t,Yl),Nr(t,Yl+"-"+n),c[n]=Pg),()=>{this._engine.afterFlush(()=>{const d=s.indexOf(a);d>=0&&s.splice(d,1),this._triggers[n]||delete c[n]})}}register(t,n){return!this._triggers[t]&&(this._triggers[t]=n,!0)}_getTrigger(t){const n=this._triggers[t];if(!n)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return n}trigger(t,n,i,o=!0){const s=this._getTrigger(n),a=new Lg(this.id,n,t);let c=this._engine.statesByElement.get(t);c||(Nr(t,Yl),Nr(t,Yl+"-"+n),this._engine.statesByElement.set(t,c={}));let d=c[n];const S=new kg(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&d&&S.absorbOptions(d.options),c[n]=S,d||(d=Pg),S.value!==Mc&&d.value===S.value){if(!function(r,t){const n=Object.keys(r),i=Object.keys(t);if(n.length!=i.length)return!1;for(let o=0;o<n.length;o++){const s=n[o];if(!t.hasOwnProperty(s)||r[s]!==t[s])return!1}return!0}(d.params,S.params)){const be=[],Ee=s.matchStyles(d.value,d.params,be),ke=s.matchStyles(S.value,S.params,be);be.length?this._engine.reportError(be):this._engine.afterFlush(()=>{Bo(t,Ee),gi(t,ke)})}return}const X=hr(this._engine.playersByElement,t,[]);X.forEach(be=>{be.namespaceId==this.id&&be.triggerName==n&&be.queued&&be.destroy()});let ae=s.matchTransition(d.value,S.value,t,S.params),ge=!1;if(!ae){if(!o)return;ae=s.fallbackTransition,ge=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:ae,fromState:d,toState:S,player:a,isFallbackTransition:ge}),ge||(Nr(t,RS),a.onStart(()=>{ua(t,RS)})),a.onDone(()=>{let be=this.players.indexOf(a);be>=0&&this.players.splice(be,1);const Ee=this._engine.playersByElement.get(t);if(Ee){let ke=Ee.indexOf(a);ke>=0&&Ee.splice(ke,1)}}),this.players.push(a),X.push(a),a}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((n,i)=>{delete n[t]}),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(o=>o.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const i=this._engine.driver.query(t,Jl,!0);i.forEach(o=>{if(o[Or])return;const s=this._engine.fetchNamespacesByElement(o);s.size?s.forEach(a=>a.triggerLeaveAnimation(o,n,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(t,n,i,o){const s=this._engine.statesByElement.get(t);if(s){const a=[];if(Object.keys(s).forEach(c=>{if(this._triggers[c]){const d=this.trigger(t,c,Mc,o);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n),i&&io(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(n&&i){const o=new Set;n.forEach(s=>{const a=s.name;if(o.has(a))return;o.add(a);const d=this._triggers[a].fallbackTransition,S=i[a]||Pg,M=new kg(Mc),z=new Lg(this.id,a,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:a,transition:d,fromState:S,toState:M,player:z,isFallbackTransition:!0})})}}removeNode(t,n){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let o=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)o=!0;else{let a=t;for(;a=a.parentNode;)if(i.statesByElement.get(a)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(t),o)i.markElementAsRemoved(this.id,t,!1,n);else{const s=t[Or];(!s||s===OS)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,n))}}insertNode(t,n){Nr(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(i=>{const o=i.player;if(o.destroyed)return;const s=i.element,a=this._elementListeners.get(s);a&&a.forEach(c=>{if(c.name==i.triggerName){const d=hg(s,i.triggerName,i.fromState.value,i.toState.value);d._data=t,dg(i.player,c.phase,d,c.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):n.push(i)}),this._queue=[],n.sort((i,o)=>{const s=i.transition.ast.depCount,a=o.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(i.element,o.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(i=>i.element===t)||n,n}}class T5{constructor(t,n,i){this.bodyNode=t,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,n){const i=new C5(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,n){const i=this._namespaceList.length-1;if(i>=0){let o=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,n)){this._namespaceList.splice(s+1,0,t),o=!0;break}o||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(n,t),t}register(t,n){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,n)),i}registerTrigger(t,n,i){let o=this._namespaceLookup[t];o&&o.register(n,i)&&this.totalAnimations++}destroy(t,n){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const o=this._namespaceList.indexOf(i);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>i.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,i=this.statesByElement.get(t);if(i){const o=Object.keys(i);for(let s=0;s<o.length;s++){const a=i[o[s]].namespaceId;if(a){const c=this._fetchNamespace(a);c&&n.add(c)}}}return n}trigger(t,n,i,o){if(ad(n)){const s=this._fetchNamespace(t);if(s)return s.trigger(n,i,o),!0}return!1}insertNode(t,n,i,o){if(!ad(n))return;const s=n[Or];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(n);a>=0&&this.collectedLeaveElements.splice(a,1)}if(t){const a=this._fetchNamespace(t);a&&a.insertNode(n,i)}o&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Nr(t,wS)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ua(t,wS))}removeNode(t,n,i,o){if(ad(n)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(n,o):this.markElementAsRemoved(t,n,!1,o),i){const a=this.namespacesByHostElement.get(n);a&&a.id!==t&&a.removeNode(n,o)}}else this._onRemovalComplete(n,o)}markElementAsRemoved(t,n,i,o){this.collectedLeaveElements.push(n),n[Or]={namespaceId:t,setForRemoval:o,hasAnimation:i,removedBeforeQueried:!1}}listen(t,n,i,o,s){return ad(n)?this._fetchNamespace(t).listen(n,i,o,s):()=>{}}_buildInstruction(t,n,i,o,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,o,t.fromState.options,t.toState.options,n,s)}destroyInnerAnimations(t){let n=this.driver.query(t,Jl,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,bg,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return io(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[Or];if(n&&n.setForRemoval){if(t[Or]=OS,n.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,DS)&&this.markElementAsDisabled(t,!1),this.driver.query(t,DS,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,o)=>this._balanceNamespaceList(i,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Nr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,t)}finally{for(let o=0;o<i.length;o++)i[o]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?io(n).onDone(()=>{i.forEach(o=>o())}):i.forEach(o=>o())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,n){const i=new id,o=[],s=new Map,a=[],c=new Map,d=new Map,S=new Map,M=new Set;this.disabledNodes.forEach(Qe=>{M.add(Qe);const it=this.driver.query(Qe,".ng-animate-queued",!0);for(let mt=0;mt<it.length;mt++)M.add(it[mt])});const z=this.bodyNode,X=Array.from(this.statesByElement.keys()),ae=kS(X,this.collectedEnterElements),ge=new Map;let be=0;ae.forEach((Qe,it)=>{const mt=Eg+be++;ge.set(it,mt),Qe.forEach(Pt=>Nr(Pt,mt))});const Ee=[],ke=new Set,we=new Set;for(let Qe=0;Qe<this.collectedLeaveElements.length;Qe++){const it=this.collectedLeaveElements[Qe],mt=it[Or];mt&&mt.setForRemoval&&(Ee.push(it),ke.add(it),mt.hasAnimation?this.driver.query(it,".ng-star-inserted",!0).forEach(Pt=>ke.add(Pt)):we.add(it))}const je=new Map,Ge=kS(X,Array.from(ke));Ge.forEach((Qe,it)=>{const mt=Kl+be++;je.set(it,mt),Qe.forEach(Pt=>Nr(Pt,mt))}),t.push(()=>{ae.forEach((Qe,it)=>{const mt=ge.get(it);Qe.forEach(Pt=>ua(Pt,mt))}),Ge.forEach((Qe,it)=>{const mt=je.get(it);Qe.forEach(Pt=>ua(Pt,mt))}),Ee.forEach(Qe=>{this.processLeaveNode(Qe)})});const dt=[],Ut=[];for(let Qe=this._namespaceList.length-1;Qe>=0;Qe--)this._namespaceList[Qe].drainQueuedTransitions(n).forEach(mt=>{const Pt=mt.player,Tn=mt.element;if(dt.push(Pt),this.collectedEnterElements.length){const bi=Tn[Or];if(bi&&bi.setForMove)return void Pt.destroy()}const Ei=!z||!this.driver.containsElement(z,Tn),mr=je.get(Tn),mo=ge.get(Tn),sn=this._buildInstruction(mt,i,mo,mr,Ei);if(sn.errors&&sn.errors.length)Ut.push(sn);else{if(Ei)return Pt.onStart(()=>Bo(Tn,sn.fromStyles)),Pt.onDestroy(()=>gi(Tn,sn.toStyles)),void o.push(Pt);if(mt.isFallbackTransition)return Pt.onStart(()=>Bo(Tn,sn.fromStyles)),Pt.onDestroy(()=>gi(Tn,sn.toStyles)),void o.push(Pt);sn.timelines.forEach(bi=>bi.stretchStartingKeyframe=!0),i.append(Tn,sn.timelines),a.push({instruction:sn,player:Pt,element:Tn}),sn.queriedElements.forEach(bi=>hr(c,bi,[]).push(Pt)),sn.preStyleProps.forEach((bi,tu)=>{const $d=Object.keys(bi);if($d.length){let es=d.get(tu);es||d.set(tu,es=new Set),$d.forEach(Bm=>es.add(Bm))}}),sn.postStyleProps.forEach((bi,tu)=>{const $d=Object.keys(bi);let es=S.get(tu);es||S.set(tu,es=new Set),$d.forEach(Bm=>es.add(Bm))})}});if(Ut.length){const Qe=[];Ut.forEach(it=>{Qe.push(`@${it.triggerName} has failed due to:\n`),it.errors.forEach(mt=>Qe.push(`- ${mt}\n`))}),dt.forEach(it=>it.destroy()),this.reportError(Qe)}const zt=new Map,Jn=new Map;a.forEach(Qe=>{const it=Qe.element;i.has(it)&&(Jn.set(it,it),this._beforeAnimationBuild(Qe.player.namespaceId,Qe.instruction,zt))}),o.forEach(Qe=>{const it=Qe.element;this._getPreviousPlayers(it,!1,Qe.namespaceId,Qe.triggerName,null).forEach(Pt=>{hr(zt,it,[]).push(Pt),Pt.destroy()})});const Fn=Ee.filter(Qe=>LS(Qe,d,S)),Vn=new Map;MS(Vn,this.driver,we,S,Li).forEach(Qe=>{LS(Qe,d,S)&&Fn.push(Qe)});const Ui=new Map;ae.forEach((Qe,it)=>{MS(Ui,this.driver,new Set(Qe),d,"!")}),Fn.forEach(Qe=>{const it=Vn.get(Qe),mt=Ui.get(Qe);Vn.set(Qe,Object.assign(Object.assign({},it),mt))});const Zr=[],ba=[],Sa={};a.forEach(Qe=>{const{element:it,player:mt,instruction:Pt}=Qe;if(i.has(it)){if(M.has(it))return mt.onDestroy(()=>gi(it,Pt.toStyles)),mt.disabled=!0,mt.overrideTotalTime(Pt.totalTime),void o.push(mt);let Tn=Sa;if(Jn.size>1){let mr=it;const mo=[];for(;mr=mr.parentNode;){const sn=Jn.get(mr);if(sn){Tn=sn;break}mo.push(mr)}mo.forEach(sn=>Jn.set(sn,Tn))}const Ei=this._buildAnimation(mt.namespaceId,Pt,zt,s,Ui,Vn);if(mt.setRealPlayer(Ei),Tn===Sa)Zr.push(mt);else{const mr=this.playersByElement.get(Tn);mr&&mr.length&&(mt.parentPlayer=io(mr)),o.push(mt)}}else Bo(it,Pt.fromStyles),mt.onDestroy(()=>gi(it,Pt.toStyles)),ba.push(mt),M.has(it)&&o.push(mt)}),ba.forEach(Qe=>{const it=s.get(Qe.element);if(it&&it.length){const mt=io(it);Qe.setRealPlayer(mt)}}),o.forEach(Qe=>{Qe.parentPlayer?Qe.syncPlayerEvents(Qe.parentPlayer):Qe.destroy()});for(let Qe=0;Qe<Ee.length;Qe++){const it=Ee[Qe],mt=it[Or];if(ua(it,Kl),mt&&mt.hasAnimation)continue;let Pt=[];if(c.size){let Ei=c.get(it);Ei&&Ei.length&&Pt.push(...Ei);let mr=this.driver.query(it,bg,!0);for(let mo=0;mo<mr.length;mo++){let sn=c.get(mr[mo]);sn&&sn.length&&Pt.push(...sn)}}const Tn=Pt.filter(Ei=>!Ei.destroyed);Tn.length?w5(this,it,Tn):this.processLeaveNode(it)}return Ee.length=0,Zr.forEach(Qe=>{this.players.push(Qe),Qe.onDone(()=>{Qe.destroy();const it=this.players.indexOf(Qe);this.players.splice(it,1)}),Qe.play()}),Zr}elementContainsData(t,n){let i=!1;const o=n[Or];return o&&o.setForRemoval&&(i=!0),this.playersByElement.has(n)&&(i=!0),this.playersByQueriedElement.has(n)&&(i=!0),this.statesByElement.has(n)&&(i=!0),this._fetchNamespace(t).elementContainsData(n)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,i,o,s){let a=[];if(n){const c=this.playersByQueriedElement.get(t);c&&(a=c)}else{const c=this.playersByElement.get(t);if(c){const d=!s||s==Mc;c.forEach(S=>{S.queued||!d&&S.triggerName!=o||a.push(S)})}}return(i||o)&&(a=a.filter(c=>!(i&&i!=c.namespaceId||o&&o!=c.triggerName))),a}_beforeAnimationBuild(t,n,i){const s=n.element,a=n.isRemovalTransition?void 0:t,c=n.isRemovalTransition?void 0:n.triggerName;for(const d of n.timelines){const S=d.element,M=S!==s,z=hr(i,S,[]);this._getPreviousPlayers(S,M,a,c,n.toState).forEach(ae=>{const ge=ae.getRealPlayer();ge.beforeDestroy&&ge.beforeDestroy(),ae.destroy(),z.push(ae)})}Bo(s,n.fromStyles)}_buildAnimation(t,n,i,o,s,a){const c=n.triggerName,d=n.element,S=[],M=new Set,z=new Set,X=n.timelines.map(ge=>{const be=ge.element;M.add(be);const Ee=be[Or];if(Ee&&Ee.removedBeforeQueried)return new aa(ge.duration,ge.delay);const ke=be!==d,we=function(r){const t=[];return PS(r,t),t}((i.get(be)||b5).map(zt=>zt.getRealPlayer())).filter(zt=>!!zt.element&&zt.element===be),je=s.get(be),Ge=a.get(be),dt=oS(0,this._normalizer,0,ge.keyframes,je,Ge),Ut=this._buildPlayer(ge,dt,we);if(ge.subTimeline&&o&&z.add(be),ke){const zt=new Lg(t,c,be);zt.setRealPlayer(Ut),S.push(zt)}return Ut});S.forEach(ge=>{hr(this.playersByQueriedElement,ge.element,[]).push(ge),ge.onDone(()=>function(r,t,n){let i;if(r instanceof Map){if(i=r.get(t),i){if(i.length){const o=i.indexOf(n);i.splice(o,1)}0==i.length&&r.delete(t)}}else if(i=r[t],i){if(i.length){const o=i.indexOf(n);i.splice(o,1)}0==i.length&&delete r[t]}return i}(this.playersByQueriedElement,ge.element,ge))}),M.forEach(ge=>Nr(ge,hS));const ae=io(X);return ae.onDestroy(()=>{M.forEach(ge=>ua(ge,hS)),gi(d,n.toStyles)}),z.forEach(ge=>{hr(o,ge,[]).push(ae)}),ae}_buildPlayer(t,n,i){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,i):new aa(t.duration,t.delay)}}class Lg{constructor(t,n,i){this.namespaceId=t,this.triggerName=n,this.element=i,this._player=new aa,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(i=>dg(t,n,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){hr(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function ad(r){return r&&1===r.nodeType}function NS(r,t){const n=r.style.display;return r.style.display=null!=t?t:"none",n}function MS(r,t,n,i,o){const s=[];n.forEach(d=>s.push(NS(d)));const a=[];i.forEach((d,S)=>{const M={};d.forEach(z=>{const X=M[z]=t.computeStyle(S,z,o);(!X||0==X.length)&&(S[Or]=S5,a.push(S))}),r.set(S,M)});let c=0;return n.forEach(d=>NS(d,s[c++])),a}function kS(r,t){const n=new Map;if(r.forEach(c=>n.set(c,[])),0==t.length)return n;const o=new Set(t),s=new Map;function a(c){if(!c)return 1;let d=s.get(c);if(d)return d;const S=c.parentNode;return d=n.has(S)?S:o.has(S)?1:a(S),s.set(c,d),d}return t.forEach(c=>{const d=a(c);1!==d&&n.get(d).push(c)}),n}const cd="$$classes";function Nr(r,t){if(r.classList)r.classList.add(t);else{let n=r[cd];n||(n=r[cd]={}),n[t]=!0}}function ua(r,t){if(r.classList)r.classList.remove(t);else{let n=r[cd];n&&delete n[t]}}function w5(r,t,n){io(n).onDone(()=>r.processLeaveNode(t))}function PS(r,t){for(let n=0;n<r.length;n++){const i=r[n];i instanceof rS?PS(i.players,t):t.push(i)}}function LS(r,t,n){const i=n.get(r);if(!i)return!1;let o=t.get(r);return o?i.forEach(s=>o.add(s)):t.set(r,i),n.delete(r),!0}class ud{constructor(t,n,i){this.bodyNode=t,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new T5(t,n,i),this._timelineEngine=new _5(t,n,i),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(t,n,i,o,s){const a=t+"-"+o;let c=this._triggerCache[a];if(!c){const d=[],S=Ig(this._driver,s,d);if(d.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${d.join("\n - ")}`);c=function(r,t,n){return new p5(r,t,n)}(o,S,this._normalizer),this._triggerCache[a]=c}this._transitionEngine.registerTrigger(n,o,c)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,i,o){this._transitionEngine.insertNode(t,n,i,o)}onRemove(t,n,i,o){this._transitionEngine.removeNode(t,n,o||!1,i)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,i,o){if("@"==i.charAt(0)){const[s,a]=sS(i);this._timelineEngine.command(s,n,a,o)}else this._transitionEngine.trigger(t,n,i,o)}listen(t,n,i,o,s){if("@"==i.charAt(0)){const[a,c]=sS(i);return this._timelineEngine.listen(a,n,c,s)}return this._transitionEngine.listen(t,n,i,o,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function xS(r,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=xg(t[0]),t.length>1&&(i=xg(t[t.length-1]))):t&&(n=xg(t)),n||i?new la(r,n,i):null}class la{constructor(t,n,i){this._element=t,this._startStyles=n,this._endStyles=i,this._state=0;let o=la.initialStylesByElement.get(t);o||la.initialStylesByElement.set(t,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&gi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gi(this._element,this._initialStyles),this._endStyles&&(gi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(la.initialStylesByElement.delete(this._element),this._startStyles&&(Bo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Bo(this._element,this._endStyles),this._endStyles=null),gi(this._element,this._initialStyles),this._state=3)}}function xg(r){let t=null;const n=Object.keys(r);for(let i=0;i<n.length;i++){const o=n[i];N5(o)&&(t=t||{},t[o]=r[o])}return t}function N5(r){return"display"===r||"position"===r}la.initialStylesByElement=new WeakMap;const FS="animation",VS="animationend";class P5{constructor(t,n,i,o,s,a,c){this._element=t,this._name=n,this._duration=i,this._delay=o,this._easing=s,this._fillMode=a,this._onDoneFn=c,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=d=>this._handleCallback(d)}apply(){(function(r,t){const n=Vg(r,"").trim();let i=0;n.length&&(function(r,t){let n=0;for(let i=0;i<r.length;i++)","===r.charAt(i)&&n++;return n}(n)+1,t=`${n}, ${t}`),ld(r,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),BS(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){jS(this._element,this._name,"paused")}resume(){jS(this._element,this._name,"running")}setPosition(t){const n=US(this._element,this._name);this._position=t*this._duration,ld(this._element,"Delay",`-${this._position}ms`,n)}getPosition(){return this._position}_handleCallback(t){const n=t._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(n-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),BS(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(r,t){const i=Vg(r,"").split(","),o=Fg(i,t);o>=0&&(i.splice(o,1),ld(r,"",i.join(",")))}(this._element,this._name))}}function jS(r,t,n){ld(r,"PlayState",n,US(r,t))}function US(r,t){const n=Vg(r,"");return n.indexOf(",")>0?Fg(n.split(","),t):Fg([n],t)}function Fg(r,t){for(let n=0;n<r.length;n++)if(r[n].indexOf(t)>=0)return n;return-1}function BS(r,t,n){n?r.removeEventListener(VS,t):r.addEventListener(VS,t)}function ld(r,t,n,i){const o=FS+t;if(null!=i){const s=r.style[o];if(s.length){const a=s.split(",");a[i]=n,n=a.join(",")}}r.style[o]=n}function Vg(r,t){return r.style[FS+t]||""}class HS{constructor(t,n,i,o,s,a,c,d){this.element=t,this.keyframes=n,this.animationName=i,this._duration=o,this._delay=s,this._finalStyles=c,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=a||"linear",this.totalTime=o+s,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new P5(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const n=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(t[i]=n?this._finalStyles[i]:Ag(this.element,i))})}this.currentSnapshot=t}}class U5 extends aa{constructor(t,n){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=lS(n)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const n=this._startingStyles[t];n?this.element.style.setProperty(t,n):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class GS{constructor(){this._count=0}validateStyleProperty(t){return mg(t)}matchesElement(t,n){return _g(t,n)}containsElement(t,n){return yg(t,n)}query(t,n,i){return vg(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}buildKeyframeElement(t,n,i){i=i.map(c=>lS(c));let o=`@keyframes ${n} {\n`,s="";i.forEach(c=>{s=" ";const d=parseFloat(c.offset);o+=`${s}${100*d}% {\n`,s+=" ",Object.keys(c).forEach(S=>{const M=c[S];switch(S){case"offset":return;case"easing":return void(M&&(o+=`${s}animation-timing-function: ${M};\n`));default:return void(o+=`${s}${S}: ${M};\n`)}}),o+=`${s}}\n`}),o+="}\n";const a=document.createElement("style");return a.textContent=o,a}animate(t,n,i,o,s,a=[],c){const d=a.filter(Ee=>Ee instanceof HS),S={};yS(i,o)&&d.forEach(Ee=>{let ke=Ee.currentSnapshot;Object.keys(ke).forEach(we=>S[we]=ke[we])});const M=function(r){let t={};return r&&(Array.isArray(r)?r:[r]).forEach(i=>{Object.keys(i).forEach(o=>{"offset"==o||"easing"==o||(t[o]=i[o])})}),t}(n=vS(t,n,S));if(0==i)return new U5(t,M);const z="gen_css_kf_"+this._count++,X=this.buildKeyframeElement(t,z,n);(function(r){var t;const n=null===(t=r.getRootNode)||void 0===t?void 0:t.call(r);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(X);const ge=xS(t,n),be=new HS(t,n,z,i,o,s,M,ge);return be.onDestroy(()=>function(r){r.parentNode.removeChild(r)}(X)),be}}class zS{constructor(t,n,i,o){this.element=t,this.keyframes=n,this.options=i,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,n,i){return t.animate(n,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(n=>{"offset"!=n&&(t[n]=this._finished?this._finalKeyframe[n]:Ag(this.element,n))}),this.currentSnapshot=t}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class q5{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test($S().toString()),this._cssKeyframesDriver=new GS}validateStyleProperty(t){return mg(t)}matchesElement(t,n){return _g(t,n)}containsElement(t,n){return yg(t,n)}query(t,n,i){return vg(t,n,i)}computeStyle(t,n,i){return window.getComputedStyle(t)[n]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,n,i,o,s,a=[],c){if(!c&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,n,i,o,s,a);const M={duration:i,delay:o,fill:0==o?"both":"forwards"};s&&(M.easing=s);const z={},X=a.filter(ge=>ge instanceof zS);yS(i,o)&&X.forEach(ge=>{let be=ge.currentSnapshot;Object.keys(be).forEach(Ee=>z[Ee]=be[Ee])});const ae=xS(t,n=vS(t,n=n.map(ge=>oo(ge,!1)),z));return new zS(t,n,M,ae)}}function $S(){return iS()&&Element.prototype.animate||{}}let $5=(()=>{class r extends eS{constructor(n,i){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(i.body,{id:"0",encapsulation:ln.None,styles:[],data:{animation:[]}})}build(n){const i=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(n)?tS(n):n;return KS(this._renderer,null,i,"register",[o]),new K5(i,this._renderer)}}return r.\u0275fac=function(n){return new(n||r)(Ne(Mo),Ne(kt))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();class K5 extends class{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new Y5(this._id,t,n||{},this._renderer)}}class Y5{constructor(t,n,i,o){this.id=t,this.element=n,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return KS(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,n;return null!==(n=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==n?n:0}}function KS(r,t,n,i,o){return r.setProperty(t,`@@${n}:${i}`,o)}const YS="@.disabled";let J5=(()=>{class r{constructor(n,i,o){this.delegate=n,this.engine=i,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,a)=>{a&&a.parentNode(s)&&a.removeChild(s.parentNode,s)}}createRenderer(n,i){const s=this.delegate.createRenderer(n,i);if(!(n&&i&&i.data&&i.data.animation)){let M=this._rendererCache.get(s);return M||(M=new JS("",s,this.engine),this._rendererCache.set(s,M)),M}const a=i.id,c=i.id+"-"+this._currentId;this._currentId++,this.engine.register(c,n);const d=M=>{Array.isArray(M)?M.forEach(d):this.engine.registerTrigger(a,c,n,M.name,M)};return i.data.animation.forEach(d),new Q5(this,c,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,i,o){n>=0&&n<this._microtaskId?this._zone.run(()=>i(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,c]=s;a(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(n){return new(n||r)(Ne(Mo),Ne(ud),Ne(At))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();class JS{constructor(t,n,i){this.namespaceId=t,this.delegate=n,this.engine=i,this.destroyNode=this.delegate.destroyNode?o=>n.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,i,o=!0){this.delegate.insertBefore(t,n,i),this.engine.onInsert(this.namespaceId,n,t,o)}removeChild(t,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,o){this.delegate.setAttribute(t,n,i,o)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,o){this.delegate.setStyle(t,n,i,o)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){"@"==n.charAt(0)&&n==YS?this.disableAnimations(t,!!i):this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.delegate.listen(t,n,i)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class Q5 extends JS{constructor(t,n,i,o){super(n,i,o),this.factory=t,this.namespaceId=n}setProperty(t,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==YS?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,n.substr(1),i):this.delegate.setProperty(t,n,i)}listen(t,n,i){if("@"==n.charAt(0)){const o=function(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let s=n.substr(1),a="";return"@"!=s.charAt(0)&&([s,a]=function(r){const t=r.indexOf(".");return[r.substring(0,t),r.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{this.factory.scheduleListenerCallback(c._data||-1,i,c)})}return this.delegate.listen(t,n,i)}}let e6=(()=>{class r extends ud{constructor(n,i,o){super(n.body,i,o)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(n){return new(n||r)(Ne(kt),Ne($l),Ne(Ng))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();const Wo=new et("AnimationModuleType"),QS=[{provide:eS,useClass:$5},{provide:Ng,useFactory:function(){return new c5}},{provide:ud,useClass:e6},{provide:Mo,useFactory:function(r,t,n){return new J5(r,t,n)},deps:[ql,ud,At]}],XS=[{provide:$l,useFactory:function(){return"function"==typeof $S()?new q5:new GS}},{provide:Wo,useValue:"BrowserAnimations"},...QS],ZS=[{provide:$l,useClass:dS},{provide:Wo,useValue:"NoopAnimations"},...QS];let i6=(()=>{class r{static withConfig(n){return{ngModule:r,providers:n.disableAnimations?ZS:XS}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({providers:XS,imports:[ag]}),r})();function vt(...r){let t=r[r.length-1];return g(t)?(r.pop(),Ae(r,t)):pe(r)}class rr extends u{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return n&&!n.closed&&t.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new l;return this._value}next(t){super.next(this._value=t)}}class o6 extends E{notifyNext(t,n,i,o,s){this.destination.next(n)}notifyError(t,n){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class s6 extends E{constructor(t,n,i){super(),this.parent=t,this.outerValue=n,this.outerIndex=i,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function a6(r,t,n,i,o=new s6(r,n,i)){if(!o.closed)return t instanceof oe?t.subscribe(o):Te(t)(o)}const e2={};class u6{constructor(t){this.resultSelector=t}call(t,n){return n.subscribe(new l6(t,this.resultSelector))}}class l6 extends o6{constructor(t,n){super(t),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(e2),this.observables.push(t)}_complete(){const t=this.observables,n=t.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let i=0;i<n;i++)this.add(a6(this,t[i],void 0,i))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,n,i){const o=this.values,a=this.toRespond?o[i]===e2?--this.toRespond:this.toRespond:0;o[i]=n,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let n;try{n=this.resultSelector.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(n)}}const fd=(()=>{function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r})();function jg(...r){return me(1)(vt(...r))}const Go=new oe(r=>r.complete());function Ug(r){return r?function(r){return new oe(t=>r.schedule(()=>t.complete()))}(r):Go}function t2(r){return new oe(t=>{let n;try{n=r()}catch(o){return void t.error(o)}return(n?x(n):Ug()).subscribe(t)})}function so(r,t){return"function"==typeof t?n=>n.pipe(so((i,o)=>x(r(i,o)).pipe(C((s,a)=>t(i,s,o,a))))):n=>n.lift(new h6(r))}class h6{constructor(t){this.project=t}call(t,n){return n.subscribe(new p6(t,this.project))}}class p6 extends Ve{constructor(t,n){super(t),this.project=n,this.index=0}_next(t){let n;const i=this.index++;try{n=this.project(t,i)}catch(o){return void this.destination.error(o)}this._innerSub(n)}_innerSub(t){const n=this.innerSubscription;n&&n.unsubscribe();const i=new De(this),o=this.destination;o.add(i),this.innerSubscription=Ze(t,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const n2=(()=>{function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r})();function ao(r){return t=>0===r?Ug():t.lift(new g6(r))}class g6{constructor(t){if(this.total=t,this.total<0)throw new n2}call(t,n){return n.subscribe(new m6(t,this.total))}}class m6 extends E{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){const n=this.total,i=++this.count;i<=n&&(this.destination.next(t),i===n&&(this.destination.complete(),this.unsubscribe()))}}function hd(...r){const t=r[r.length-1];return g(t)?(r.pop(),n=>jg(r,n,t)):n=>jg(r,n)}function r2(r,t){let n=!1;return arguments.length>=2&&(n=!0),function(o){return o.lift(new _6(r,t,n))}}class _6{constructor(t,n,i=!1){this.accumulator=t,this.seed=n,this.hasSeed=i}call(t,n){return n.subscribe(new y6(t,this.accumulator,this.seed,this.hasSeed))}}class y6 extends E{constructor(t,n,i,o){super(t),this.accumulator=n,this._seed=i,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const n=this.index++;let i;try{i=this.accumulator(this.seed,t,n)}catch(o){this.destination.error(o)}this.seed=i,this.destination.next(i)}}function da(r,t){return function(i){return i.lift(new v6(r,t))}}class v6{constructor(t,n){this.predicate=t,this.thisArg=n}call(t,n){return n.subscribe(new E6(t,this.predicate,this.thisArg))}}class E6 extends E{constructor(t,n,i){super(t),this.predicate=n,this.thisArg=i,this.count=0}_next(t){let n;try{n=this.predicate.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}n&&this.destination.next(t)}}function qo(r){return function(n){const i=new b6(r),o=n.lift(i);return i.caught=o}}class b6{constructor(t){this.selector=t}call(t,n){return n.subscribe(new S6(t,this.selector,this.caught))}}class S6 extends Ve{constructor(t,n,i){super(t),this.selector=n,this.caught=i}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new De(this);this.add(i);const o=Ze(n,i);o!==i&&this.add(o)}}}function kc(r,t){return ue(r,t,1)}function Bg(r){return function(n){return 0===r?Ug():n.lift(new C6(r))}}class C6{constructor(t){if(this.total=t,this.total<0)throw new n2}call(t,n){return n.subscribe(new T6(t,this.total))}}class T6 extends E{constructor(t,n){super(t),this.total=n,this.ring=new Array,this.count=0}_next(t){const n=this.ring,i=this.total,o=this.count++;n.length<i?n.push(t):n[o%i]=t}_complete(){const t=this.destination;let n=this.count;if(n>0){const i=this.count>=this.total?this.total:this.count,o=this.ring;for(let s=0;s<i;s++){const a=n++%i;t.next(o[a])}}t.complete()}}function o2(r=R6){return t=>t.lift(new A6(r))}class A6{constructor(t){this.errorFactory=t}call(t,n){return n.subscribe(new I6(t,this.errorFactory))}}class I6 extends E{constructor(t,n){super(t),this.errorFactory=n,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)}}}function R6(){return new fd}function s2(r=null){return t=>t.lift(new w6(r))}class w6{constructor(t){this.defaultValue=t}call(t,n){return n.subscribe(new D6(t,this.defaultValue))}}class D6 extends E{constructor(t,n){super(t),this.defaultValue=n,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function fa(r,t){const n=arguments.length>=2;return i=>i.pipe(r?da((o,s)=>r(o,s,i)):ee,ao(1),n?s2(t):o2(()=>new fd))}function co(){}function gr(r,t,n){return function(o){return o.lift(new N6(r,t,n))}}class N6{constructor(t,n,i){this.nextOrObserver=t,this.error=n,this.complete=i}call(t,n){return n.subscribe(new M6(t,this.nextOrObserver,this.error,this.complete))}}class M6 extends E{constructor(t,n,i,o){super(t),this._tapNext=co,this._tapError=co,this._tapComplete=co,this._tapError=i||co,this._tapComplete=o||co,D(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||co,this._tapError=n.error||co,this._tapComplete=n.complete||co)}_next(t){try{this._tapNext.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class P6{constructor(t){this.callback=t}call(t,n){return n.subscribe(new L6(t,this.callback))}}class L6 extends E{constructor(t,n){super(t),this.add(new v(n))}}class xi{constructor(t,n){this.id=t,this.url=n}}class Hg extends xi{constructor(t,n,i="imperative",o=null){super(t,n),this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pc extends xi{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class a2 extends xi{constructor(t,n,i){super(t,n),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class x6 extends xi{constructor(t,n,i){super(t,n),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class F6 extends xi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V6 extends xi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j6 extends xi{constructor(t,n,i,o,s){super(t,n),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class U6 extends xi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B6 extends xi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class c2{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class u2{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class H6{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W6{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G6{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q6{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l2{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const It="primary";class z6{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ha(r){return new z6(r)}const d2="ngNavigationCancelingError";function Wg(r){const t=Error("NavigationCancelingError: "+r);return t[d2]=!0,t}function K6(r,t,n){const i=n.path.split("/");if(i.length>r.length||"full"===n.pathMatch&&(t.hasChildren()||i.length<r.length))return null;const o={};for(let s=0;s<i.length;s++){const a=i[s],c=r[s];if(a.startsWith(":"))o[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:r.slice(0,i.length),posParams:o}}function mi(r,t){const n=r?Object.keys(r):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let o;for(let s=0;s<n.length;s++)if(o=n[s],!f2(r[o],t[o]))return!1;return!0}function f2(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const n=[...r].sort(),i=[...t].sort();return n.every((o,s)=>i[s]===o)}return r===t}function h2(r){return Array.prototype.concat.apply([],r)}function p2(r){return r.length>0?r[r.length-1]:null}function wn(r,t){for(const n in r)r.hasOwnProperty(n)&&t(r[n],n)}function _i(r){return Yu(r)?r:Xa(r)?x(Promise.resolve(r)):vt(r)}const Q6={exact:function _2(r,t,n){if(!$o(r.segments,t.segments)||!pd(r.segments,t.segments,n)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!r.children[i]||!_2(r.children[i],t.children[i],n))return!1;return!0},subset:y2},g2={exact:function(r,t){return mi(r,t)},subset:function(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(n=>f2(r[n],t[n]))},ignored:()=>!0};function m2(r,t,n){return Q6[n.paths](r.root,t.root,n.matrixParams)&&g2[n.queryParams](r.queryParams,t.queryParams)&&!("exact"===n.fragment&&r.fragment!==t.fragment)}function y2(r,t,n){return v2(r,t,t.segments,n)}function v2(r,t,n,i){if(r.segments.length>n.length){const o=r.segments.slice(0,n.length);return!(!$o(o,n)||t.hasChildren()||!pd(o,n,i))}if(r.segments.length===n.length){if(!$o(r.segments,n)||!pd(r.segments,n,i))return!1;for(const o in t.children)if(!r.children[o]||!y2(r.children[o],t.children[o],i))return!1;return!0}{const o=n.slice(0,r.segments.length),s=n.slice(r.segments.length);return!!($o(r.segments,o)&&pd(r.segments,o,i)&&r.children[It])&&v2(r.children[It],t,s,i)}}function pd(r,t,n){return t.every((i,o)=>g2[n](r[o].parameters,i.parameters))}class zo{constructor(t,n,i){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ha(this.queryParams)),this._queryParamMap}toString(){return nF.serialize(this)}}class wt{constructor(t,n){this.segments=t,this.children=n,this.parent=null,wn(n,(i,o)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gd(this)}}class Lc{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ha(this.parameters)),this._parameterMap}toString(){return C2(this)}}function $o(r,t){return r.length===t.length&&r.every((n,i)=>n.path===t[i].path)}class Gg{}class E2{parse(t){const n=new dF(t);return new zo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){return`${`/${xc(t.root,!0)}`}${function(r){const t=Object.keys(r).map(n=>{const i=r[n];return Array.isArray(i)?i.map(o=>`${md(n)}=${md(o)}`).join("&"):`${md(n)}=${md(i)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(r){return encodeURI(r)}(t.fragment)}`:""}`}}const nF=new E2;function gd(r){return r.segments.map(t=>C2(t)).join("/")}function xc(r,t){if(!r.hasChildren())return gd(r);if(t){const n=r.children[It]?xc(r.children[It],!1):"",i=[];return wn(r.children,(o,s)=>{s!==It&&i.push(`${s}:${xc(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function(r,t){let n=[];return wn(r.children,(i,o)=>{o===It&&(n=n.concat(t(i,o)))}),wn(r.children,(i,o)=>{o!==It&&(n=n.concat(t(i,o)))}),n}(r,(i,o)=>o===It?[xc(r.children[It],!1)]:[`${o}:${xc(i,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[It]?`${gd(r)}/${n[0]}`:`${gd(r)}/(${n.join("//")})`}}function b2(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function md(r){return b2(r).replace(/%3B/gi,";")}function qg(r){return b2(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _d(r){return decodeURIComponent(r)}function S2(r){return _d(r.replace(/\+/g,"%20"))}function C2(r){return`${qg(r.path)}${function(r){return Object.keys(r).map(t=>`;${qg(t)}=${qg(r[t])}`).join("")}(r.parameters)}`}const sF=/^[^\/()?;=#]+/;function yd(r){const t=r.match(sF);return t?t[0]:""}const aF=/^[^=?&#]+/,uF=/^[^?&#]+/;class dF{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wt([],{}):new wt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[It]=new wt(t,n)),i}parseSegment(){const t=yd(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Lc(_d(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=yd(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const o=yd(this.remaining);o&&(i=o,this.capture(i))}t[_d(n)]=_d(i)}parseQueryParam(t){const n=function(r){const t=r.match(aF);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const a=function(r){const t=r.match(uF);return t?t[0]:""}(this.remaining);a&&(i=a,this.capture(i))}const o=S2(n),s=S2(i);if(t.hasOwnProperty(o)){let a=t[o];Array.isArray(a)||(a=[a],t[o]=a),a.push(s)}else t[o]=s}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=yd(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=It);const a=this.parseChildren();n[s]=1===Object.keys(a).length?a[It]:new wt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class T2{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=zg(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){const n=zg(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=$g(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return $g(t,this._root).map(n=>n.value)}}function zg(r,t){if(r===t.value)return t;for(const n of t.children){const i=zg(r,n);if(i)return i}return null}function $g(r,t){if(r===t.value)return[t];for(const n of t.children){const i=$g(r,n);if(i.length)return i.unshift(t),i}return[]}class Fi{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Fc(r){const t={};return r&&r.children.forEach(n=>t[n.value.outlet]=n),t}class A2 extends T2{constructor(t,n){super(t),this.snapshot=n,Kg(this,t)}toString(){return this.snapshot.toString()}}function I2(r,t){const n=function(r,t){const a=new vd([],{},{},"",{},It,t,null,r.root,-1,{});return new w2("",new Fi(a,[]))}(r,t),i=new rr([new Lc("",{})]),o=new rr({}),s=new rr({}),a=new rr({}),c=new rr(""),d=new Ko(i,o,a,c,s,It,t,n.root);return d.snapshot=n.root,new A2(new Fi(d,[]),n)}class Ko{constructor(t,n,i,o,s,a,c,d){this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=s,this.outlet=a,this.component=c,this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(C(t=>ha(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(C(t=>ha(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function R2(r,t="emptyOnly"){const n=r.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const o=n[i],s=n[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(s.component)break;i--}}return function(r){return r.reduce((t,n)=>({params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign({},t.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class vd{constructor(t,n,i,o,s,a,c,d,S,M,z){this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=s,this.outlet=a,this.component=c,this.routeConfig=d,this._urlSegment=S,this._lastPathIndex=M,this._resolve=z}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ha(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ha(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class w2 extends T2{constructor(t,n){super(n),this.url=t,Kg(this,n)}toString(){return D2(this._root)}}function Kg(r,t){t.value._routerState=r,t.children.forEach(n=>Kg(r,n))}function D2(r){const t=r.children.length>0?` { ${r.children.map(D2).join(", ")} } `:"";return`${r.value}${t}`}function Yg(r){if(r.snapshot){const t=r.snapshot,n=r._futureSnapshot;r.snapshot=n,mi(t.queryParams,n.queryParams)||r.queryParams.next(n.queryParams),t.fragment!==n.fragment&&r.fragment.next(n.fragment),mi(t.params,n.params)||r.params.next(n.params),function(r,t){if(r.length!==t.length)return!1;for(let n=0;n<r.length;++n)if(!mi(r[n],t[n]))return!1;return!0}(t.url,n.url)||r.url.next(n.url),mi(t.data,n.data)||r.data.next(n.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function Jg(r,t){return mi(r.params,t.params)&&function(r,t){return $o(r,t)&&r.every((n,i)=>mi(n.parameters,t[i].parameters))}(r.url,t.url)&&!(!r.parent!=!t.parent)&&(!r.parent||Jg(r.parent,t.parent))}function Ed(r,t,n){if(n&&r.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const o=function(r,t,n){return t.children.map(i=>{for(const o of n.children)if(r.shouldReuseRoute(i.value,o.value.snapshot))return Ed(r,i,o);return Ed(r,i)})}(r,t,n);return new Fi(i,o)}{if(r.shouldAttach(t.value)){const s=r.retrieve(t.value);if(null!==s){const a=s.route;return O2(t,a),a}}const i=function(r){return new Ko(new rr(r.url),new rr(r.params),new rr(r.queryParams),new rr(r.fragment),new rr(r.data),r.outlet,r.component,r)}(t.value),o=t.children.map(s=>Ed(r,s));return new Fi(i,o)}}function O2(r,t){if(r.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(r.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=r.value;for(let n=0;n<r.children.length;++n)O2(r.children[n],t.children[n])}function bd(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function Vc(r){return"object"==typeof r&&null!=r&&r.outlets}function Qg(r,t,n,i,o){let s={};return i&&wn(i,(a,c)=>{s[c]=Array.isArray(a)?a.map(d=>`${d}`):`${a}`}),new zo(n.root===r?t:N2(n.root,r,t),s,o)}function N2(r,t,n){const i={};return wn(r.children,(o,s)=>{i[s]=o===t?n:N2(o,t,n)}),new wt(r.segments,i)}class M2{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&bd(i[0]))throw new Error("Root segment cannot have matrix parameters");const o=i.find(Vc);if(o&&o!==p2(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xg{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}}function k2(r,t,n){if(r||(r=new wt([],{})),0===r.segments.length&&r.hasChildren())return Sd(r,t,n);const i=function(r,t,n){let i=0,o=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;o<r.segments.length;){if(i>=n.length)return s;const a=r.segments[o],c=n[i];if(Vc(c))break;const d=`${c}`,S=i<n.length-1?n[i+1]:null;if(o>0&&void 0===d)break;if(d&&S&&"object"==typeof S&&void 0===S.outlets){if(!L2(d,S,a))return s;i+=2}else{if(!L2(d,{},a))return s;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(r,t,n),o=n.slice(i.commandIndex);if(i.match&&i.pathIndex<r.segments.length){const s=new wt(r.segments.slice(0,i.pathIndex),{});return s.children[It]=new wt(r.segments.slice(i.pathIndex),r.children),Sd(s,0,o)}return i.match&&0===o.length?new wt(r.segments,{}):i.match&&!r.hasChildren()?Zg(r,t,n):i.match?Sd(r,0,o):Zg(r,t,n)}function Sd(r,t,n){if(0===n.length)return new wt(r.segments,{});{const i=function(r){return Vc(r[0])?r[0].outlets:{[It]:r}}(n),o={};return wn(i,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(o[a]=k2(r.children[a],t,s))}),wn(r.children,(s,a)=>{void 0===i[a]&&(o[a]=s)}),new wt(r.segments,o)}}function Zg(r,t,n){const i=r.segments.slice(0,t);let o=0;for(;o<n.length;){const s=n[o];if(Vc(s)){const d=CF(s.outlets);return new wt(i,d)}if(0===o&&bd(n[0])){i.push(new Lc(r.segments[t].path,P2(n[0]))),o++;continue}const a=Vc(s)?s.outlets[It]:`${s}`,c=o<n.length-1?n[o+1]:null;a&&c&&bd(c)?(i.push(new Lc(a,P2(c))),o+=2):(i.push(new Lc(a,{})),o++)}return new wt(i,{})}function CF(r){const t={};return wn(r,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[i]=Zg(new wt([],{}),0,n))}),t}function P2(r){const t={};return wn(r,(n,i)=>t[i]=`${n}`),t}function L2(r,t,n){return r==n.path&&mi(t,n.parameters)}class AF{constructor(t,n,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=o}activate(t){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),Yg(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){const o=Fc(n);t.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,o[a],i),delete o[a]}),wn(o,(s,a)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,n,i){const o=t.value,s=n?n.value:null;if(o===s)if(o.component){const a=i.getContext(o.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const i=n.getContext(t.value.outlet);if(i&&i.outlet){const o=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){const i=n.getContext(t.value.outlet),o=i&&t.value.component?i.children:n,s=Fc(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],o);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,n,i){const o=Fc(n);t.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],i),this.forwardEvent(new q6(s.value.snapshot))}),t.children.length&&this.forwardEvent(new W6(t.value.snapshot))}activateRoutes(t,n,i){const o=t.value,s=n?n.value:null;if(Yg(o),o===s)if(o.component){const a=i.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,i);else if(o.component){const a=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const c=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),x2(c.route)}else{const c=function(r){for(let t=r.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(o.snapshot),d=c?c.module.componentFactoryResolver:null;a.attachRef=null,a.route=o,a.resolver=d,a.outlet&&a.outlet.activateWith(o,d),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,i)}}function x2(r){Yg(r.value),r.children.forEach(x2)}class em{constructor(t,n){this.routes=t,this.module=n}}function uo(r){return"function"==typeof r}function Yo(r){return r instanceof zo}const jc=Symbol("INITIAL_VALUE");function Uc(){return so(r=>function(...r){let t,n;return g(r[r.length-1])&&(n=r.pop()),"function"==typeof r[r.length-1]&&(t=r.pop()),1===r.length&&y(r[0])&&(r=r[0]),pe(r,n).lift(new u6(t))}(r.map(t=>t.pipe(ao(1),hd(jc)))).pipe(r2((t,n)=>{let i=!1;return n.reduce((o,s,a)=>o!==jc?o:(s===jc&&(i=!0),i||!1!==s&&a!==n.length-1&&!Yo(s)?o:s),t)},jc),da(t=>t!==jc),C(t=>Yo(t)?t:!0===t),ao(1)))}let F2=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=An({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,i){1&n&&ct(0,"router-outlet")},directives:function(){return[am]},encapsulation:2}),r})();function V2(r,t=""){for(let n=0;n<r.length;n++){const i=r[n];MF(i,kF(t,i))}}function MF(r,t){r.children&&V2(r.children,t)}function kF(r,t){return t?r||t.path?r&&!t.path?`${r}/`:!r&&t.path?t.path:`${r}/${t.path}`:"":r}function tm(r){const t=r.children&&r.children.map(tm),n=t?Object.assign(Object.assign({},r),{children:t}):Object.assign({},r);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==It&&(n.component=F2),n}function Mr(r){return r.outlet||It}function j2(r,t){const n=r.filter(i=>Mr(i)===t);return n.push(...r.filter(i=>Mr(i)!==t)),n}const U2={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Cd(r,t,n){var i;if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||n.length>0)?Object.assign({},U2):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(t.matcher||K6)(n,r,t);if(!s)return Object.assign({},U2);const a={};wn(s.posParams,(d,S)=>{a[S]=d.path});const c=s.consumed.length>0?Object.assign(Object.assign({},a),s.consumed[s.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:c,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function Td(r,t,n,i,o="corrected"){if(n.length>0&&function(r,t,n){return n.some(i=>Ad(r,t,i)&&Mr(i)!==It)}(r,n,i)){const a=new wt(t,function(r,t,n,i){const o={};o[It]=i,i._sourceSegment=r,i._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&Mr(s)!==It){const a=new wt([],{});a._sourceSegment=r,a._segmentIndexShift=t.length,o[Mr(s)]=a}return o}(r,t,i,new wt(n,r.children)));return a._sourceSegment=r,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(r,t,n){return n.some(i=>Ad(r,t,i))}(r,n,i)){const a=new wt(r.segments,function(r,t,n,i,o,s){const a={};for(const c of i)if(Ad(r,n,c)&&!o[Mr(c)]){const d=new wt([],{});d._sourceSegment=r,d._segmentIndexShift="legacy"===s?r.segments.length:t.length,a[Mr(c)]=d}return Object.assign(Object.assign({},o),a)}(r,t,n,i,r.children,o));return a._sourceSegment=r,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}const s=new wt(r.segments,r.children);return s._sourceSegment=r,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Ad(r,t,n){return(!(r.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function B2(r,t,n,i){return!!(Mr(r)===i||i!==It&&Ad(t,n,r))&&("**"===r.path||Cd(t,r,n).matched)}function H2(r,t,n){return 0===t.length&&!r.children[n]}class Bc{constructor(t){this.segmentGroup=t||null}}class W2{constructor(t){this.urlTree=t}}function Id(r){return new oe(t=>t.error(new Bc(r)))}function G2(r){return new oe(t=>t.error(new W2(r)))}function VF(r){return new oe(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class BF{constructor(t,n,i,o,s){this.configLoader=n,this.urlSerializer=i,this.urlTree=o,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(hi)}apply(){const t=Td(this.urlTree.root,[],[],this.config).segmentGroup,n=new wt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,It).pipe(C(s=>this.createUrlTree(nm(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qo(s=>{if(s instanceof W2)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Bc?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,It).pipe(C(o=>this.createUrlTree(nm(o),t.queryParams,t.fragment))).pipe(qo(o=>{throw o instanceof Bc?this.noMatchError(o):o}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,i){const o=t.segments.length>0?new wt([],{[It]:t}):t;return new zo(o,n,i)}expandSegmentGroup(t,n,i,o){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,n,i).pipe(C(s=>new wt([],s))):this.expandSegment(t,i,n,i.segments,o,!0)}expandChildren(t,n,i){const o=[];for(const s of Object.keys(i.children))"primary"===s?o.unshift(s):o.push(s);return x(o).pipe(kc(s=>{const a=i.children[s],c=j2(n,s);return this.expandSegmentGroup(t,c,a,s).pipe(C(d=>({segment:d,outlet:s})))}),r2((s,a)=>(s[a.outlet]=a.segment,s),{}),function(r,t){const n=arguments.length>=2;return i=>i.pipe(r?da((o,s)=>r(o,s,i)):ee,Bg(1),n?s2(t):o2(()=>new fd))}())}expandSegment(t,n,i,o,s,a){return x(i).pipe(kc(c=>this.expandSegmentAgainstRoute(t,n,i,c,o,s,a).pipe(qo(S=>{if(S instanceof Bc)return vt(null);throw S}))),fa(c=>!!c),qo((c,d)=>{if(c instanceof fd||"EmptyError"===c.name){if(H2(n,o,s))return vt(new wt([],{}));throw new Bc(n)}throw c}))}expandSegmentAgainstRoute(t,n,i,o,s,a,c){return B2(o,n,s,a)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(t,n,o,s,a):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,i,o,s,a):Id(n):Id(n)}expandSegmentAgainstRouteUsingRedirect(t,n,i,o,s,a){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,o,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,o,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,o){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?G2(s):this.lineralizeSegments(i,s).pipe(ue(a=>{const c=new wt(a,{});return this.expandSegment(t,c,n,a,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,i,o,s,a){const{matched:c,consumedSegments:d,lastChild:S,positionalParamSegments:M}=Cd(n,o,s);if(!c)return Id(n);const z=this.applyRedirectCommands(d,o.redirectTo,M);return o.redirectTo.startsWith("/")?G2(z):this.lineralizeSegments(o,z).pipe(ue(X=>this.expandSegment(t,n,i,X.concat(s.slice(S)),a,!1)))}matchSegmentAgainstRoute(t,n,i,o,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?vt(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe(C(X=>(i._loadedConfig=X,new wt(o,{})))):vt(new wt(o,{}));const{matched:a,consumedSegments:c,lastChild:d}=Cd(n,i,o);if(!a)return Id(n);const S=o.slice(d);return this.getChildConfig(t,i,o).pipe(ue(z=>{const X=z.module,ae=z.routes,{segmentGroup:ge,slicedSegments:be}=Td(n,c,S,ae),Ee=new wt(ge.segments,ge.children);if(0===be.length&&Ee.hasChildren())return this.expandChildren(X,ae,Ee).pipe(C(Ge=>new wt(c,Ge)));if(0===ae.length&&0===be.length)return vt(new wt(c,{}));const ke=Mr(i)===s;return this.expandSegment(X,Ee,ae,be,ke?It:s,!0).pipe(C(je=>new wt(c.concat(je.segments),je.children)))}))}getChildConfig(t,n,i){return n.children?vt(new em(n.children,t)):n.loadChildren?void 0!==n._loadedConfig?vt(n._loadedConfig):this.runCanLoadGuards(t.injector,n,i).pipe(ue(o=>o?this.configLoader.load(t.injector,n).pipe(C(s=>(n._loadedConfig=s,s))):function(r){return new oe(t=>t.error(Wg(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`)))}(n))):vt(new em([],t))}runCanLoadGuards(t,n,i){const o=n.canLoad;return o&&0!==o.length?vt(o.map(a=>{const c=t.get(a);let d;if(function(r){return r&&uo(r.canLoad)}(c))d=c.canLoad(n,i);else{if(!uo(c))throw new Error("Invalid CanLoad guard");d=c(n,i)}return _i(d)})).pipe(Uc(),gr(a=>{if(!Yo(a))return;const c=Wg(`Redirecting to "${this.urlSerializer.serialize(a)}"`);throw c.url=a,c}),C(a=>!0===a)):vt(!0)}lineralizeSegments(t,n){let i=[],o=n.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return vt(i);if(o.numberOfChildren>1||!o.children[It])return VF(t.redirectTo);o=o.children[It]}}applyRedirectCommands(t,n,i){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,i)}applyRedirectCreatreUrlTree(t,n,i,o){const s=this.createSegmentGroup(t,n.root,i,o);return new zo(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const i={};return wn(t,(o,s)=>{if("string"==typeof o&&o.startsWith(":")){const c=o.substring(1);i[s]=n[c]}else i[s]=o}),i}createSegmentGroup(t,n,i,o){const s=this.createSegments(t,n.segments,i,o);let a={};return wn(n.children,(c,d)=>{a[d]=this.createSegmentGroup(t,c,i,o)}),new wt(s,a)}createSegments(t,n,i,o){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,o):this.findOrReturn(s,i))}findPosParam(t,n,i){const o=i[n.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return o}findOrReturn(t,n){let i=0;for(const o of n){if(o.path===t.path)return n.splice(i),o;i++}return t}}function nm(r){const t={};for(const i of Object.keys(r.children)){const s=nm(r.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function(r){if(1===r.numberOfChildren&&r.children[It]){const t=r.children[It];return new wt(r.segments.concat(t.segments),t.children)}return r}(new wt(r.segments,t))}class q2{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Rd{constructor(t,n){this.component=t,this.route=n}}function GF(r,t,n){const i=r._root;return Hc(i,t?t._root:null,n,[i.value])}function wd(r,t,n){const i=function(r){if(!r)return null;for(let t=r.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(i?i.module.injector:n).get(r)}function Hc(r,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Fc(t);return r.children.forEach(a=>{(function(r,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=r.value,a=t?t.value:null,c=n?n.getContext(r.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const d=function(r,t,n){if("function"==typeof n)return n(r,t);switch(n){case"pathParamsChange":return!$o(r.url,t.url);case"pathParamsOrQueryParamsChange":return!$o(r.url,t.url)||!mi(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jg(r,t)||!mi(r.queryParams,t.queryParams);case"paramsChange":default:return!Jg(r,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);d?o.canActivateChecks.push(new q2(i)):(s.data=a.data,s._resolvedData=a._resolvedData),Hc(r,t,s.component?c?c.children:null:n,i,o),d&&c&&c.outlet&&c.outlet.isActivated&&o.canDeactivateChecks.push(new Rd(c.outlet.component,a))}else a&&Wc(t,c,o),o.canActivateChecks.push(new q2(i)),Hc(r,null,s.component?c?c.children:null:n,i,o)})(a,s[a.value.outlet],n,i.concat([a.value]),o),delete s[a.value.outlet]}),wn(s,(a,c)=>Wc(a,n.getContext(c),o)),o}function Wc(r,t,n){const i=Fc(r),o=r.value;wn(i,(s,a)=>{Wc(s,o.component?t?t.children.getContext(a):null:t,n)}),n.canDeactivateChecks.push(new Rd(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}class r8{}function z2(r){return new oe(t=>t.error(r))}class o8{constructor(t,n,i,o,s,a){this.rootComponentType=t,this.config=n,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a}recognize(){const t=Td(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,It);if(null===n)return null;const i=new vd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},It,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Fi(i,n),s=new w2(this.url,o);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const n=t.value,i=R2(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,n,i){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,i)}processChildren(t,n){const i=[];for(const s of Object.keys(n.children)){const a=n.children[s],c=j2(t,s),d=this.processSegmentGroup(c,a,s);if(null===d)return null;i.push(...d)}const o=$2(i);return function(r){r.sort((t,n)=>t.value.outlet===It?-1:n.value.outlet===It?1:t.value.outlet.localeCompare(n.value.outlet))}(o),o}processSegment(t,n,i,o){for(const s of t){const a=this.processSegmentAgainstRoute(s,n,i,o);if(null!==a)return a}return H2(n,i,o)?[]:null}processSegmentAgainstRoute(t,n,i,o){if(t.redirectTo||!B2(t,n,i,o))return null;let s,a=[],c=[];if("**"===t.path){const ae=i.length>0?p2(i).parameters:{};s=new vd(i,ae,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,J2(t),Mr(t),t.component,t,K2(n),Y2(n)+i.length,Q2(t))}else{const ae=Cd(n,t,i);if(!ae.matched)return null;a=ae.consumedSegments,c=i.slice(ae.lastChild),s=new vd(a,ae.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,J2(t),Mr(t),t.component,t,K2(n),Y2(n)+a.length,Q2(t))}const d=function(r){return r.children?r.children:r.loadChildren?r._loadedConfig.routes:[]}(t),{segmentGroup:S,slicedSegments:M}=Td(n,a,c,d.filter(ae=>void 0===ae.redirectTo),this.relativeLinkResolution);if(0===M.length&&S.hasChildren()){const ae=this.processChildren(d,S);return null===ae?null:[new Fi(s,ae)]}if(0===d.length&&0===M.length)return[new Fi(s,[])];const z=Mr(t)===o,X=this.processSegment(d,S,M,z?It:o);return null===X?null:[new Fi(s,X)]}}function c8(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function $2(r){const t=[],n=new Set;for(const i of r){if(!c8(i)){t.push(i);continue}const o=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==o?(o.children.push(...i.children),n.add(o)):t.push(i)}for(const i of n){const o=$2(i.children);t.push(new Fi(i.value,o))}return t.filter(i=>!n.has(i))}function K2(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Y2(r){let t=r,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function J2(r){return r.data||{}}function Q2(r){return r.resolve||{}}function rm(r){return so(t=>{const n=r(t);return n?x(n).pipe(C(()=>t)):vt(t)})}class m8 extends class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const im=new et("ROUTES");class X2{constructor(t,n,i,o){this.loader=t,this.compiler=n,this.onLoadStartListener=i,this.onLoadEndListener=o}load(t,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const o=this.loadModuleFactory(n.loadChildren).pipe(C(s=>{this.onLoadEndListener&&this.onLoadEndListener(n);const a=s.create(t);return new em(h2(a.injector.get(im,void 0,st.Self|st.Optional)).map(tm),a)}),qo(s=>{throw n._loader$=void 0,s}));return n._loader$=new Ce(o,()=>new u).pipe(_e()),n._loader$}loadModuleFactory(t){return"string"==typeof t?x(this.loader.load(t)):_i(t()).pipe(ue(n=>n instanceof NE?vt(n):x(this.compiler.compileModuleAsync(n))))}}class _8{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new pa,this.attachRef=null}}class pa{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const i=this.getOrCreateContext(t);i.outlet=n,this.contexts.set(t,i)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new _8,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}class v8{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function E8(r){throw r}function b8(r,t,n){return t.parse("/")}function Z2(r,t){return vt(null)}const S8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},C8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ln=(()=>{class r{constructor(n,i,o,s,a,c,d,S){this.rootComponentType=n,this.urlSerializer=i,this.rootContexts=o,this.location=s,this.config=S,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new u,this.errorHandler=E8,this.malformedUriErrorHandler=b8,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Z2,afterPreactivation:Z2},this.urlHandlingStrategy=new v8,this.routeReuseStrategy=new m8,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(hi),this.console=a.get(pl);const X=a.get(At);this.isNgZoneEnabled=X instanceof At&&At.isInAngularZone(),this.resetConfig(S),this.currentUrlTree=new zo(new wt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new X2(c,d,ae=>this.triggerEvent(new c2(ae)),ae=>this.triggerEvent(new u2(ae))),this.routerState=I2(this.currentUrlTree,this.rootComponentType),this.transitions=new rr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const i=this.events;return n.pipe(da(o=>0!==o.id),C(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),so(o=>{let s=!1,a=!1;return vt(o).pipe(gr(c=>{this.currentNavigation={id:c.id,initialUrl:c.currentRawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),so(c=>{const d=!this.navigated||c.extractedUrl.toString()!==this.browserUrlTree.toString(),S=("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl);if(Dd(c.source)&&(this.browserUrlTree=c.rawUrl),S)return vt(c).pipe(so(M=>{const z=this.transitions.getValue();return i.next(new Hg(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),z!==this.transitions.getValue()?Go:Promise.resolve(M)}),function(r,t,n,i){return so(o=>function(r,t,n,i,o){return new BF(r,t,n,i,o).apply()}(r,t,n,o.extractedUrl,i).pipe(C(s=>Object.assign(Object.assign({},o),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),gr(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function(r,t,n,i,o){return ue(s=>function(r,t,n,i,o="emptyOnly",s="legacy"){try{const a=new o8(r,t,n,i,o,s).recognize();return null===a?z2(new r8):vt(a)}catch(a){return z2(a)}}(r,t,s.urlAfterRedirects,n(s.urlAfterRedirects),i,o).pipe(C(a=>Object.assign(Object.assign({},s),{targetSnapshot:a}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),gr(M=>{"eager"===this.urlUpdateStrategy&&(M.extras.skipLocationChange||this.setBrowserUrl(M.urlAfterRedirects,M),this.browserUrlTree=M.urlAfterRedirects);const z=new F6(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);i.next(z)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:X,source:ae,restoredState:ge,extras:be}=c,Ee=new Hg(z,this.serializeUrl(X),ae,ge);i.next(Ee);const ke=I2(X,this.rootComponentType).snapshot;return vt(Object.assign(Object.assign({},c),{targetSnapshot:ke,urlAfterRedirects:X,extras:Object.assign(Object.assign({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=c.rawUrl,this.browserUrlTree=c.urlAfterRedirects,c.resolve(null),Go}),rm(c=>{const{targetSnapshot:d,id:S,extractedUrl:M,rawUrl:z,extras:{skipLocationChange:X,replaceUrl:ae}}=c;return this.hooks.beforePreactivation(d,{navigationId:S,appliedUrlTree:M,rawUrlTree:z,skipLocationChange:!!X,replaceUrl:!!ae})}),gr(c=>{const d=new V6(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),C(c=>Object.assign(Object.assign({},c),{guards:GF(c.targetSnapshot,c.currentSnapshot,this.rootContexts)})),function(r,t){return ue(n=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return 0===a.length&&0===s.length?vt(Object.assign(Object.assign({},n),{guardsResult:!0})):function(r,t,n,i){return x(r).pipe(ue(o=>function(r,t,n,i,o){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?vt(s.map(c=>{const d=wd(c,t,o);let S;if(function(r){return r&&uo(r.canDeactivate)}(d))S=_i(d.canDeactivate(r,t,n,i));else{if(!uo(d))throw new Error("Invalid CanDeactivate guard");S=_i(d(r,t,n,i))}return S.pipe(fa())})).pipe(Uc()):vt(!0)}(o.component,o.route,n,t,i)),fa(o=>!0!==o,!0))}(a,i,o,r).pipe(ue(c=>c&&function(r){return"boolean"==typeof r}(c)?function(r,t,n,i){return x(t).pipe(kc(o=>jg(function(r,t){return null!==r&&t&&t(new H6(r)),vt(!0)}(o.route.parent,i),function(r,t){return null!==r&&t&&t(new G6(r)),vt(!0)}(o.route,i),function(r,t,n){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>function(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(a)).filter(a=>null!==a).map(a=>t2(()=>vt(a.guards.map(d=>{const S=wd(d,a.node,n);let M;if(function(r){return r&&uo(r.canActivateChild)}(S))M=_i(S.canActivateChild(i,r));else{if(!uo(S))throw new Error("Invalid CanActivateChild guard");M=_i(S(i,r))}return M.pipe(fa())})).pipe(Uc())));return vt(s).pipe(Uc())}(r,o.path,n),function(r,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;return i&&0!==i.length?vt(i.map(s=>t2(()=>{const a=wd(s,t,n);let c;if(function(r){return r&&uo(r.canActivate)}(a))c=_i(a.canActivate(t,r));else{if(!uo(a))throw new Error("Invalid CanActivate guard");c=_i(a(t,r))}return c.pipe(fa())}))).pipe(Uc()):vt(!0)}(r,o.route,n))),fa(o=>!0!==o,!0))}(i,s,r,t):vt(c)),C(c=>Object.assign(Object.assign({},n),{guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),gr(c=>{if(Yo(c.guardsResult)){const S=Wg(`Redirecting to "${this.serializeUrl(c.guardsResult)}"`);throw S.url=c.guardsResult,S}const d=new j6(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(d)}),da(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,""),!1)),rm(c=>{if(c.guards.canActivateChecks.length)return vt(c).pipe(gr(d=>{const S=new U6(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(S)}),so(d=>{let S=!1;return vt(d).pipe(function(r,t){return ue(n=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=n;if(!o.length)return vt(n);let s=0;return x(o).pipe(kc(a=>function(r,t,n,i){return function(r,t,n,i){const o=Object.keys(r);if(0===o.length)return vt({});const s={};return x(o).pipe(ue(a=>function(r,t,n,i){const o=wd(r,t,i);return _i(o.resolve?o.resolve(t,n):o(t,n))}(r[a],t,n,i).pipe(gr(c=>{s[a]=c}))),Bg(1),ue(()=>Object.keys(s).length===o.length?vt(s):Go))}(r._resolve,r,t,i).pipe(C(s=>(r._resolvedData=s,r.data=Object.assign(Object.assign({},r.data),R2(r,n).resolve),null)))}(a.route,i,r,t)),gr(()=>s++),Bg(1),ue(a=>s===o.length?vt(n):Go))})}(this.paramsInheritanceStrategy,this.ngModule.injector),gr({next:()=>S=!0,complete:()=>{S||(this.restoreHistory(d),this.cancelNavigationTransition(d,"At least one route resolver didn't emit any value."))}}))}),gr(d=>{const S=new B6(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(S)}))}),rm(c=>{const{targetSnapshot:d,id:S,extractedUrl:M,rawUrl:z,extras:{skipLocationChange:X,replaceUrl:ae}}=c;return this.hooks.afterPreactivation(d,{navigationId:S,appliedUrlTree:M,rawUrlTree:z,skipLocationChange:!!X,replaceUrl:!!ae})}),C(c=>{const d=function(r,t,n){const i=Ed(r,t._root,n?n._root:void 0);return new A2(i,t)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return Object.assign(Object.assign({},c),{targetRouterState:d})}),gr(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((r,t,n)=>C(i=>(new AF(t,i.targetRouterState,i.currentRouterState,n).activate(r),i)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),gr({next(){s=!0},complete(){s=!0}}),function(r){return t=>t.lift(new P6(r))}(()=>{if(!s&&!a){const c=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,c)):this.cancelNavigationTransition(o,c)}this.currentNavigation=null}),qo(c=>{if(a=!0,function(r){return r&&r[d2]}(c)){const d=Yo(c.url);d||(this.navigated=!0,this.restoreHistory(o,!0));const S=new a2(o.id,this.serializeUrl(o.extractedUrl),c.message);i.next(S),d?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),z={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Dd(o.source)};this.scheduleNavigation(M,"imperative",null,z,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const d=new x6(o.id,this.serializeUrl(o.extractedUrl),c);i.next(d);try{o.resolve(this.errorHandler(c))}catch(S){o.reject(S)}}return Go}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,i)&&setTimeout(()=>{const{source:o,state:s,urlTree:a}=i,c={replaceUrl:!0};if(s){const d=Object.assign({},s);delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(c.state=d)}this.scheduleNavigation(a,o,s,c)},0),this.lastLocationChangeInfo=i}))}extractLocationChangeInfoFromEvent(n){var i;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(i=n.state)||void 0===i?void 0:i.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,i){if(!n)return!0;const o=i.urlTree.toString()===n.urlTree.toString();return i.transitionId!==n.transitionId||!o||!("hashchange"===i.source&&"popstate"===n.source||"popstate"===i.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){V2(n),this.config=n.map(tm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:d}=i,S=o||this.routerState.root,M=d?this.currentUrlTree.fragment:a;let z=null;switch(c){case"merge":z=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":z=this.currentUrlTree.queryParams;break;default:z=s||null}return null!==z&&(z=this.removeEmptyProps(z)),function(r,t,n,i,o){if(0===n.length)return Qg(t.root,t.root,t,i,o);const s=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new M2(!0,0,r);let t=0,n=!1;const i=r.reduce((o,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return wn(s.outlets,(d,S)=>{c[S]="string"==typeof d?d.split("/"):d}),[...o,{outlets:c}]}if(s.segmentPath)return[...o,s.segmentPath]}return"string"!=typeof s?[...o,s]:0===a?(s.split("/").forEach((c,d)=>{0==d&&"."===c||(0==d&&""===c?n=!0:".."===c?t++:""!=c&&o.push(c))}),o):[...o,s]},[]);return new M2(n,t,i)}(n);if(s.toRoot())return Qg(t.root,new wt([],{}),t,i,o);const a=function(r,t,n){if(r.isAbsolute)return new Xg(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const s=n.snapshot._urlSegment;return new Xg(s,s===t.root,0)}const i=bd(r.commands[0])?0:1;return function(r,t,n){let i=r,o=t,s=n;for(;s>o;){if(s-=o,i=i.parent,!i)throw new Error("Invalid number of '../'");o=i.segments.length}return new Xg(i,!1,o-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,r.numberOfDoubleDots)}(s,t,r),c=a.processChildren?Sd(a.segmentGroup,a.index,s.commands):k2(a.segmentGroup,a.index,s.commands);return Qg(a.segmentGroup,c,t,i,o)}(S,this.currentUrlTree,n,z,null!=M?M:null)}navigateByUrl(n,i={skipLocationChange:!1}){const o=Yo(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(n,i={skipLocationChange:!1}){return function(r){for(let t=0;t<r.length;t++){const n=r[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,n)}return i}isActive(n,i){let o;if(o=!0===i?Object.assign({},S8):!1===i?Object.assign({},C8):i,Yo(n))return m2(this.currentUrlTree,n,o);const s=this.parseUrl(n);return m2(this.currentUrlTree,s,o)}removeEmptyProps(n){return Object.keys(n).reduce((i,o)=>{const s=n[o];return null!=s&&(i[o]=s),i},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Pc(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(n,i,o,s,a){var c,d;if(this.disposed)return Promise.resolve(!1);const S=this.getTransition(),M=Dd(i)&&S&&!Dd(S.source),ae=(this.lastSuccessfulId===S.id||this.currentNavigation?S.rawUrl:S.urlAfterRedirects).toString()===n.toString();if(M&&ae)return Promise.resolve(!0);let ge,be,Ee;a?(ge=a.resolve,be=a.reject,Ee=a.promise):Ee=new Promise((je,Ge)=>{ge=je,be=Ge});const ke=++this.navigationId;let we;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),we=o&&o.\u0275routerPageId?o.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(c=this.browserPageId)&&void 0!==c?c:0:(null!==(d=this.browserPageId)&&void 0!==d?d:0)+1):we=0,this.setTransition({id:ke,targetPageId:we,source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:ge,reject:be,promise:Ee,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ee.catch(je=>Promise.reject(je))}setBrowserUrl(n,i){const o=this.urlSerializer.serialize(n),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl?this.location.replaceState(o,"",s):this.location.go(o,"",s)}restoreHistory(n,i=!1){var o,s;if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===a?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===a&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(a)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,i){const o=new a2(n.id,this.serializeUrl(n.extractedUrl),i);this.triggerEvent(o),n.resolve(!1)}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return r.\u0275fac=function(n){return new(n||r)(Ne(Tu),Ne(Gg),Ne(pa),Ne(Rl),Ne(Nt),Ne(ml),Ne(Lo),Ne(void 0))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();function Dd(r){return"imperative"!==r}let am=(()=>{class r{constructor(n,i,o,s,a){this.parentContexts=n,this.location=i,this.resolver=o,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new jt,this.deactivateEvents=new jt,this.name=s||It,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const a=(i=i||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),c=this.parentContexts.getOrCreateContext(this.name).children,d=new R8(n,c,this.location.injector);this.activated=this.location.createComponent(a,this.location.length,d),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(n){return new(n||r)(Ie(pa),Ie(Hr),Ie(Zi),function(r){return function(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const n=r.attrs;if(n){const i=n.length;let o=0;for(;o<i;){const s=n[o];if(v_(s))break;if(0===s)o+=2;else if("number"==typeof s)for(o++;o<i&&"string"==typeof n[o];)o++;else{if(s===t)return n[o+1];o+=2}}}return null}(pn(),r)}("name"),Ie(Ks))},r.\u0275dir=Je({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),r})();class R8{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===Ko?this.route:t===pa?this.childContexts:this.parent.get(t,n)}}class eC{}class tC{preload(t,n){return vt(null)}}let nC=(()=>{class r{constructor(n,i,o,s,a){this.router=n,this.injector=s,this.preloadingStrategy=a,this.loader=new X2(i,o,S=>n.triggerEvent(new c2(S)),S=>n.triggerEvent(new u2(S)))}setUpPreloading(){this.subscription=this.router.events.pipe(da(n=>n instanceof Pc),kc(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(hi);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const o=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const a=s._loadedConfig;o.push(this.processRoutes(a.module,a.routes))}else s.loadChildren&&!s.canLoad?o.push(this.preloadConfig(n,s)):s.children&&o.push(this.processRoutes(n,s.children));return x(o).pipe(me(),C(s=>{}))}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?vt(i._loadedConfig):this.loader.load(n.injector,i)).pipe(ue(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return r.\u0275fac=function(n){return new(n||r)(Ne(Ln),Ne(ml),Ne(Lo),Ne(Nt),Ne(eC))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})(),cm=(()=>{class r{constructor(n,i,o={}){this.router=n,this.viewportScroller=i,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Hg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Pc&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof l2&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.router.triggerEvent(new l2(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(Ne(Ln),Ne(Ub),Ne(void 0))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();const Jo=new et("ROUTER_CONFIGURATION"),rC=new et("ROUTER_FORROOT_GUARD"),D8=[Rl,{provide:Gg,useClass:E2},{provide:Ln,useFactory:function(r,t,n,i,o,s,a,c={},d,S){const M=new Ln(null,r,t,n,i,o,s,h2(a));return d&&(M.urlHandlingStrategy=d),S&&(M.routeReuseStrategy=S),function(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy)}(c,M),c.enableTracing&&M.events.subscribe(z=>{var X,ae;null===(X=console.group)||void 0===X||X.call(console,`Router Event: ${z.constructor.name}`),console.log(z.toString()),console.log(z),null===(ae=console.groupEnd)||void 0===ae||ae.call(console)}),M},deps:[Gg,pa,Rl,Nt,ml,Lo,im,Jo,[class{},new er],[class{},new er]]},pa,{provide:Ko,useFactory:function(r){return r.routerState.root},deps:[Ln]},{provide:ml,useClass:J4},nC,tC,class{preload(t,n){return n().pipe(qo(()=>vt(null)))}},{provide:Jo,useValue:{enableTracing:!1}}];function O8(){return new Sp("Router",Ln)}let N8=(()=>{class r{constructor(n,i){}static forRoot(n,i){return{ngModule:r,providers:[D8,iC(n),{provide:rC,useFactory:P8,deps:[[Ln,new er,new Ji]]},{provide:Jo,useValue:i||{}},{provide:sa,useFactory:k8,deps:[Vo,[new Es(jp),new er],Jo]},{provide:cm,useFactory:M8,deps:[Ln,Ub,Jo]},{provide:eC,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:tC},{provide:Sp,multi:!0,useFactory:O8},[um,{provide:vc,multi:!0,useFactory:V8,deps:[um]},{provide:oC,useFactory:j8,deps:[um]},{provide:P0,multi:!0,useExisting:oC}]]}}static forChild(n){return{ngModule:r,providers:[iC(n)]}}}return r.\u0275fac=function(n){return new(n||r)(Ne(rC,8),Ne(Ln,8))},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({}),r})();function M8(r,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new cm(r,t,n)}function k8(r,t,n={}){return n.useHash?new mP(r,t):new Cb(r,t)}function P8(r){return"guarded"}function iC(r){return[{provide:vI,multi:!0,useValue:r},{provide:im,multi:!0,useValue:r}]}let um=(()=>{class r{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new u}appInitializer(){return this.injector.get(hP,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const o=new Promise(c=>i=c),s=this.injector.get(Ln),a=this.injector.get(Jo);return"disabled"===a.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===a.initialNavigation||"enabledBlocking"===a.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?vt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),o})}bootstrapListener(n){const i=this.injector.get(Jo),o=this.injector.get(nC),s=this.injector.get(cm),a=this.injector.get(Ln),c=this.injector.get(ra);n===c.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&a.initialNavigation(),o.setUpPreloading(),s.init(),a.resetRootComponentType(c.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(n){return new(n||r)(Ne(Nt))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac}),r})();function V8(r){return r.appInitializer.bind(r)}function j8(r){return r.bootstrapListener.bind(r)}const oC=new et("Router Initializer");let lm;try{lm="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(r){lm=!1}let ma,Kn=(()=>{class r{constructor(n){this._platformId=n,this.isBrowser=this._platformId?function(r){return r===jb}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!lm)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(n){return new(n||r)(Ne(bc))},r.\u0275prov=Xe({factory:function(){return new r(Ne(bc))},token:r,providedIn:"root"}),r})(),Od=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({}),r})();const sC=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function aC(){if(ma)return ma;if("object"!=typeof document||!document)return ma=new Set(sC),ma;let r=document.createElement("input");return ma=new Set(sC.filter(t=>(r.setAttribute("type",t),r.type===t))),ma}let Gc,dm,Jr;function Nd(r){return function(){if(null==Gc&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Gc=!0}))}finally{Gc=Gc||!1}return Gc}()?r:!!r.capture}function qc(r){return r.composedPath?r.composedPath()[0]:r.target}function Qr(r){return null!=r&&"false"!=`${r}`}function lo(r){return r instanceof Dt?r.nativeElement:r}function hm(r,t,n,i){return D(n)&&(i=n,n=void 0),i?hm(r,t,n).pipe(C(o=>y(o)?i(...o):i(o))):new oe(o=>{cC(r,t,function(a){o.next(arguments.length>1?Array.prototype.slice.call(arguments):a)},o,n)})}function cC(r,t,n,i,o){let s;if(function(r){return r&&"function"==typeof r.addEventListener&&"function"==typeof r.removeEventListener}(r)){const a=r;r.addEventListener(t,n,o),s=()=>a.removeEventListener(t,n,o)}else if(function(r){return r&&"function"==typeof r.on&&"function"==typeof r.off}(r)){const a=r;r.on(t,n),s=()=>a.off(t,n)}else if(function(r){return r&&"function"==typeof r.addListener&&"function"==typeof r.removeListener}(r)){const a=r;r.addListener(t,n),s=()=>a.removeListener(t,n)}else{if(!r||!r.length)throw new TypeError("Invalid event target");for(let a=0,c=r.length;a<c;a++)cC(r[a],t,n,i,o)}i.add(s)}Jr="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class J8 extends v{constructor(t,n){super()}schedule(t,n=0){return this}}let uC=(()=>{class r{constructor(n,i=r.now){this.SchedulerAction=n,this.now=i}schedule(n,i=0,o){return new this.SchedulerAction(this,n).schedule(o,i)}}return r.now=()=>Date.now(),r})();class fo extends uC{constructor(t,n=uC.now){super(t,()=>fo.delegate&&fo.delegate!==this?fo.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,n=0,i){return fo.delegate&&fo.delegate!==this?fo.delegate.schedule(t,n,i):super.schedule(t,n,i)}flush(t){const{actions:n}=this;if(this.active)return void n.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=n.shift());if(this.active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}}const zc=new fo(class extends J8{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return n;clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let o,i=!1;try{this.work(t)}catch(s){i=!0,o=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),o}_unsubscribe(){const t=this.id,n=this.scheduler,i=n.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&i.splice(o,1),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null}});function pm(r){return!y(r)&&r-parseFloat(r)+1>=0}function tV(r){const{index:t,period:n,subscriber:i}=r;if(i.next(t),!i.closed){if(-1===n)return i.complete();r.index=t+1,this.schedule(r,n)}}function $c(r){return t=>t.lift(new rV(r))}class rV{constructor(t){this.notifier=t}call(t,n){const i=new iV(t),o=Ze(this.notifier,new De(i));return o&&!i.seenValue?(i.add(o),n.subscribe(i)):i}}class iV extends Ve{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const dC=Nd({passive:!0});let fC=(()=>{class r{constructor(n,i){this._platform=n,this._ngZone=i,this._monitoredElements=new Map}monitor(n){if(!this._platform.isBrowser)return Go;const i=lo(n),o=this._monitoredElements.get(i);if(o)return o.subject;const s=new u,a="cdk-text-field-autofilled",c=d=>{"cdk-text-field-autofill-start"!==d.animationName||i.classList.contains(a)?"cdk-text-field-autofill-end"===d.animationName&&i.classList.contains(a)&&(i.classList.remove(a),this._ngZone.run(()=>s.next({target:d.target,isAutofilled:!1}))):(i.classList.add(a),this._ngZone.run(()=>s.next({target:d.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",c,dC),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",c,dC)}}),s}stopMonitoring(n){const i=lo(n),o=this._monitoredElements.get(i);o&&(o.unlisten(),o.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((n,i)=>this.stopMonitoring(i))}}return r.\u0275fac=function(n){return new(n||r)(Ne(Kn),Ne(At))},r.\u0275prov=Xe({factory:function(){return new r(Ne(Kn),Ne(At))},token:r,providedIn:"root"}),r})(),hC=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({imports:[[Od]]}),r})();class gV{constructor(t){this.total=t}call(t,n){return n.subscribe(new mV(t,this.total))}}class mV extends E{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}class yV{constructor(t,n){this.compare=t,this.keySelector=n}call(t,n){return n.subscribe(new vV(t,this.compare,this.keySelector))}}class vV extends E{constructor(t,n,i){super(t),this.keySelector=i,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}compare(t,n){return t===n}_next(t){let n;try{const{keySelector:o}=this;n=o?o(t):t}catch(o){return this.destination.error(o)}let i=!1;if(this.hasKey)try{const{compare:o}=this;i=o(this.key,n)}catch(o){return this.destination.error(o)}else this.hasKey=!0;i||(this.key=n,this.destination.next(t))}}class bV{constructor(t,n){this.dueTime=t,this.scheduler=n}call(t,n){return n.subscribe(new SV(t,this.dueTime,this.scheduler))}}class SV extends E{constructor(t,n,i){super(t),this.dueTime=n,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(CV,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function CV(r){r.debouncedNext()}let gm=(()=>{class r{create(n){return"undefined"==typeof MutationObserver?null:new MutationObserver(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({factory:function(){return new r},token:r,providedIn:"root"}),r})(),pC=(()=>{class r{constructor(n){this._mutationObserverFactory=n,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((n,i)=>this._cleanupObserver(i))}observe(n){const i=lo(n);return new oe(o=>{const a=this._observeElement(i).subscribe(o);return()=>{a.unsubscribe(),this._unobserveElement(i)}})}_observeElement(n){if(this._observedElements.has(n))this._observedElements.get(n).count++;else{const i=new u,o=this._mutationObserverFactory.create(s=>i.next(s));o&&o.observe(n,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(n,{observer:o,stream:i,count:1})}return this._observedElements.get(n).stream}_unobserveElement(n){this._observedElements.has(n)&&(this._observedElements.get(n).count--,this._observedElements.get(n).count||this._cleanupObserver(n))}_cleanupObserver(n){if(this._observedElements.has(n)){const{observer:i,stream:o}=this._observedElements.get(n);i&&i.disconnect(),o.complete(),this._observedElements.delete(n)}}}return r.\u0275fac=function(n){return new(n||r)(Ne(gm))},r.\u0275prov=Xe({factory:function(){return new r(Ne(gm))},token:r,providedIn:"root"}),r})(),TV=(()=>{class r{constructor(n,i,o){this._contentObserver=n,this._elementRef=i,this._ngZone=o,this.event=new jt,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(n){this._disabled=Qr(n),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(n){this._debounce=function(r,t=0){return function(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}(n),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const n=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?n.pipe(function(r,t=zc){return n=>n.lift(new bV(r,t))}(this.debounce)):n).subscribe(this.event)})}_unsubscribe(){var n;null===(n=this._currentSubscription)||void 0===n||n.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(Ie(pC),Ie(Dt),Ie(At))},r.\u0275dir=Je({type:r,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),r})(),gC=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({providers:[gm]}),r})();function bC(r){return 0===r.offsetX&&0===r.offsetY}function SC(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}"undefined"!=typeof Element&&Element;const CC=new et("cdk-input-modality-detector-options"),WV={ignoreKeys:[18,17,224,91,16]},_a=Nd({passive:!0,capture:!0});let AC=(()=>{class r{constructor(n,i,o,s){this._platform=n,this._mostRecentTarget=null,this._modality=new rr(null),this._lastTouchMs=0,this._onKeydown=a=>{var c,d;(null===(d=null===(c=this._options)||void 0===c?void 0:c.ignoreKeys)||void 0===d?void 0:d.some(S=>S===a.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=qc(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(bC(a)?"keyboard":"mouse"),this._mostRecentTarget=qc(a))},this._onTouchstart=a=>{SC(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=qc(a))},this._options=Object.assign(Object.assign({},WV),s),this.modalityDetected=this._modality.pipe(t=>t.lift(new gV(1))),this.modalityChanged=this.modalityDetected.pipe(n=>n.lift(new yV(void 0,void 0))),n.isBrowser&&i.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,_a),o.addEventListener("mousedown",this._onMousedown,_a),o.addEventListener("touchstart",this._onTouchstart,_a)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,_a),document.removeEventListener("mousedown",this._onMousedown,_a),document.removeEventListener("touchstart",this._onTouchstart,_a))}}return r.\u0275fac=function(n){return new(n||r)(Ne(Kn),Ne(At),Ne(kt),Ne(CC,8))},r.\u0275prov=Xe({factory:function(){return new r(Ne(Kn),Ne(At),Ne(kt),Ne(CC,8))},token:r,providedIn:"root"}),r})();const wC=new et("cdk-focus-monitor-default-options"),kd=Nd({passive:!0,capture:!0});let mm=(()=>{class r{constructor(n,i,o,s,a){this._ngZone=n,this._platform=i,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new u,this._rootNodeFocusAndBlurListener=c=>{const d=qc(c),S="focus"===c.type?this._onFocus:this._onBlur;for(let M=d;M;M=M.parentElement)S.call(this,c,M)},this._document=s,this._detectionMode=(null==a?void 0:a.detectionMode)||0}monitor(n,i=!1){const o=lo(n);if(!this._platform.isBrowser||1!==o.nodeType)return vt(null);const s=function(r){if(function(){if(null==dm){const r="undefined"!=typeof document?document.head:null;dm=!(!r||!r.createShadowRoot&&!r.attachShadow)}return dm}()){const t=r.getRootNode?r.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return i&&(a.checkChildren=!0),a.subject;const c={checkChildren:i,subject:new u,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(n){const i=lo(n),o=this._elementInfo.get(i);o&&(o.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(o))}focusVia(n,i,o){const s=lo(n);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([c,d])=>this._originChanged(c,i,d)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(n,i,o){o?n.classList.add(i):n.classList.remove(i)}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(n){return 1===this._detectionMode||!!(null==n?void 0:n.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(n,i){this._toggleClass(n,"cdk-focused",!!i),this._toggleClass(n,"cdk-touch-focused","touch"===i),this._toggleClass(n,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(n,"cdk-mouse-focused","mouse"===i),this._toggleClass(n,"cdk-program-focused","program"===i)}_setOrigin(n,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,i){const o=this._elementInfo.get(i),s=qc(n);!o||!o.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),o)}_onBlur(n,i){const o=this._elementInfo.get(i);!o||o.checkChildren&&n.relatedTarget instanceof Node&&i.contains(n.relatedTarget)||(this._setClasses(i),this._emitOrigin(o.subject,null))}_emitOrigin(n,i){this._ngZone.run(()=>n.next(i))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const i=n.rootNode,o=this._rootNodeFocusListenerCount.get(i)||0;o||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,kd),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,kd)}),this._rootNodeFocusListenerCount.set(i,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe($c(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){const i=n.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const o=this._rootNodeFocusListenerCount.get(i);o>1?this._rootNodeFocusListenerCount.set(i,o-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,kd),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,kd),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,i,o){this._setClasses(n,i),this._emitOrigin(o.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(n){const i=[];return this._elementInfo.forEach((o,s)=>{(s===n||o.checkChildren&&s.contains(n))&&i.push([s,o])}),i}}return r.\u0275fac=function(n){return new(n||r)(Ne(At),Ne(Kn),Ne(AC),Ne(kt,8),Ne(wC,8))},r.\u0275prov=Xe({factory:function(){return new r(Ne(At),Ne(Kn),Ne(AC),Ne(kt,8),Ne(wC,8))},token:r,providedIn:"root"}),r})();const DC="cdk-high-contrast-black-on-white",OC="cdk-high-contrast-white-on-black",_m="cdk-high-contrast-active";let NC=(()=>{class r{constructor(n,i){this._platform=n,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);const i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(n):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(n),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const n=this._document.body.classList;n.remove(_m),n.remove(DC),n.remove(OC),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(n.add(_m),n.add(DC)):2===i&&(n.add(_m),n.add(OC))}}}return r.\u0275fac=function(n){return new(n||r)(Ne(Kn),Ne(kt))},r.\u0275prov=Xe({factory:function(){return new r(Ne(Kn),Ne(kt))},token:r,providedIn:"root"}),r})();const MC=new et("cdk-dir-doc",{providedIn:"root",factory:function(){return L_(kt)}});let kC=(()=>{class r{constructor(n){if(this.value="ltr",this.change=new jt,n){const o=n.documentElement?n.documentElement.dir:null,s=(n.body?n.body.dir:null)||o;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(n){return new(n||r)(Ne(MC,8))},r.\u0275prov=Xe({factory:function(){return new r(Ne(MC,8))},token:r,providedIn:"root"}),r})(),PC=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({}),r})();const LC=new eo("12.2.9"),xC=new eo("12.2.9"),ZV=new et("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Xo,Xr=(()=>{class r{constructor(n,i,o){this._hasDoneGlobalChecks=!1,this._document=o,n._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return!(!bp()||void 0!==Jr.__karma__&&Jr.__karma__||void 0!==Jr.jasmine&&Jr.jasmine||void 0!==Jr.jest&&Jr.jest||void 0!==Jr.Mocha&&Jr.Mocha)&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[n])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const n=this._document.createElement("div");n.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(n);const i=getComputedStyle(n);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(n)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&xC.full!==LC.full&&console.warn("The Angular Material version ("+xC.full+") does not match the Angular CDK version ("+LC.full+").\nPlease ensure the versions of these two packages exactly match.")}}return r.\u0275fac=function(n){return new(n||r)(Ne(NC),Ne(ZV,8),Ne(kt))},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({imports:[[PC],PC]}),r})();function FC(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Qr(t)}}}function VC(r,t){return class extends r{constructor(...n){super(...n),this.defaultColor=t,this.color=t}get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function e7(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Qr(t)}}}function t7(r){return class extends r{constructor(...t){super(...t),this.stateChanges=new u,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}try{Xo="undefined"!=typeof Intl}catch(r){Xo=!1}let UC=(()=>{class r{isErrorState(n,i){return!!(n&&n.invalid&&(n.touched||i&&i.submitted))}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({factory:function(){return new r},token:r,providedIn:"root"}),r})();class h7{constructor(t,n,i){this._renderer=t,this.element=n,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const BC={enterDuration:225,exitDuration:150},ym=Nd({passive:!0}),HC=["mousedown","touchstart"],WC=["mouseup","mouseleave","touchend","touchcancel"];class g7{constructor(t,n,i,o){this._target=t,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=lo(i))}fadeInRipple(t,n,i={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},BC),i.animation);i.centered&&(t=o.left+o.width/2,n=o.top+o.height/2);const a=i.radius||function(r,t,n){const i=Math.max(Math.abs(r-n.left),Math.abs(r-n.right)),o=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+o*o)}(t,n,o),c=t-o.left,d=n-o.top,S=s.enterDuration,M=document.createElement("div");M.classList.add("mat-ripple-element"),M.style.left=c-a+"px",M.style.top=d-a+"px",M.style.height=2*a+"px",M.style.width=2*a+"px",null!=i.color&&(M.style.backgroundColor=i.color),M.style.transitionDuration=`${S}ms`,this._containerElement.appendChild(M),function(r){window.getComputedStyle(r).getPropertyValue("opacity")}(M),M.style.transform="scale(1)";const z=new h7(this,M,i);return z.state=0,this._activeRipples.add(z),i.persistent||(this._mostRecentTransientRipple=z),this._runTimeoutOutsideZone(()=>{const X=z===this._mostRecentTransientRipple;z.state=1,!i.persistent&&(!X||!this._isPointerDown)&&z.fadeOut()},S),z}fadeOutRipple(t){const n=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!n)return;const i=t.element,o=Object.assign(Object.assign({},BC),t.config.animation);i.style.transitionDuration=`${o.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.parentNode.removeChild(i)},o.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const n=lo(t);!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,this._registerEvents(HC))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(WC),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const n=bC(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!SC(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=t.changedTouches;for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,n=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,n))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(n=>{this._triggerElement.addEventListener(n,this,ym)})})}_removeTriggerEvents(){this._triggerElement&&(HC.forEach(t=>{this._triggerElement.removeEventListener(t,this,ym)}),this._pointerUpEventsRegistered&&WC.forEach(t=>{this._triggerElement.removeEventListener(t,this,ym)}))}}const y7=new et("mat-ripple-global-options");let Ld=(()=>{class r{constructor(n,i,o,s,a){this._elementRef=n,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new g7(this,i,n,o)}get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,i=0,o){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,i,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),n))}}return r.\u0275fac=function(n){return new(n||r)(Ie(Dt),Ie(At),Ie(Kn),Ie(y7,8),Ie(Wo,8))},r.\u0275dir=Je({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,i){2&n&&Ht("mat-ripple-unbounded",i.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),r})(),GC=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({imports:[[Xr,Od],Xr]}),r})();const I7=["underline"],R7=["connectionContainer"],w7=["inputContainer"],D7=["label"];function O7(r,t){1&r&&($u(0),xe(1,"div",14),ct(2,"div",15),ct(3,"div",16),ct(4,"div",17),Fe(),xe(5,"div",18),ct(6,"div",15),ct(7,"div",16),ct(8,"div",17),Fe(),Ku())}function N7(r,t){1&r&&(xe(0,"div",19),tr(1,1),Fe())}function M7(r,t){if(1&r&&($u(0),tr(1,2),xe(2,"span"),Mn(3),Fe(),Ku()),2&r){const n=_n(2);yt(3),Oo(n._control.placeholder)}}function k7(r,t){1&r&&tr(0,3,["*ngSwitchCase","true"])}function P7(r,t){1&r&&(xe(0,"span",23),Mn(1," *"),Fe())}function L7(r,t){if(1&r){const n=Oh();xe(0,"label",20,21),Kt("cdkObserveContent",function(){return cs(n),_n().updateOutlineGap()}),mn(2,M7,4,1,"ng-container",12),mn(3,k7,1,0,"ng-content",12),mn(4,P7,2,0,"span",22),Fe()}if(2&r){const n=_n();Ht("mat-empty",n._control.empty&&!n._shouldAlwaysFloat())("mat-form-field-empty",n._control.empty&&!n._shouldAlwaysFloat())("mat-accent","accent"==n.color)("mat-warn","warn"==n.color),Tt("cdkObserveContentDisabled","outline"!=n.appearance)("id",n._labelId)("ngSwitch",n._hasLabel()),cn("for",n._control.id)("aria-owns",n._control.id),yt(2),Tt("ngSwitchCase",!1),yt(1),Tt("ngSwitchCase",!0),yt(1),Tt("ngIf",!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)}}function x7(r,t){1&r&&(xe(0,"div",24),tr(1,4),Fe())}function F7(r,t){if(1&r&&(xe(0,"div",25,26),ct(2,"span",27),Fe()),2&r){const n=_n();yt(2),Ht("mat-accent","accent"==n.color)("mat-warn","warn"==n.color)}}function V7(r,t){1&r&&(xe(0,"div"),tr(1,5),Fe()),2&r&&Tt("@transitionMessages",_n()._subscriptAnimationState)}function j7(r,t){if(1&r&&(xe(0,"div",31),Mn(1),Fe()),2&r){const n=_n(2);Tt("id",n._hintLabelId),yt(1),Oo(n.hintLabel)}}function U7(r,t){if(1&r&&(xe(0,"div",28),mn(1,j7,2,2,"div",29),tr(2,6),ct(3,"div",30),tr(4,7),Fe()),2&r){const n=_n();Tt("@transitionMessages",n._subscriptAnimationState),yt(1),Tt("ngIf",n.hintLabel)}}const B7=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],H7=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],KC=new et("MatError"),G7={transitionMessages:Mx("transitionMessages",[Px("enter",zl({opacity:1,transform:"translateY(0%)"})),Lx("void => enter",[zl({opacity:0,transform:"translateY(-5px)"}),kx("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let vm=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Je({type:r}),r})();const YC=new et("MatHint");let Em=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Je({type:r,selectors:[["mat-label"]]}),r})(),z7=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Je({type:r,selectors:[["mat-placeholder"]]}),r})();const JC=new et("MatPrefix"),QC=new et("MatSuffix");let XC=0;const K7=VC(class{constructor(r){this._elementRef=r}},"primary"),Y7=new et("MAT_FORM_FIELD_DEFAULT_OPTIONS"),eT=new et("MatFormField");let J7=(()=>{class r extends K7{constructor(n,i,o,s,a,c,d,S){super(n),this._changeDetectorRef=i,this._dir=s,this._defaults=a,this._platform=c,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new u,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+XC++,this._labelId="mat-form-field-label-"+XC++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==S,this.appearance=a&&a.appearance?a.appearance:"legacy",this._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker}get appearance(){return this._appearance}set appearance(n){const i=this._appearance;this._appearance=n||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==n&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=Qr(n)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(n){this._explicitFormFieldControl=n}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const n=this._control;n.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${n.controlType}`),n.stateChanges.pipe(hd(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),n.ngControl&&n.ngControl.valueChanges&&n.ngControl.valueChanges.pipe($c(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe($c(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),J(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(hd(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(hd(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe($c(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(n){const i=this._control?this._control.ngControl:null;return i&&i[n]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,hm(this._label.nativeElement,"transitionend").pipe(ao(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&n.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,o=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?n.push(i.id):this._hintLabel&&n.push(this._hintLabelId),o&&n.push(o.id)}else this._errorChildren&&n.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(n)}}_validateControlChild(){}updateOutlineGap(){const n=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&n&&n.children.length&&n.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let i=0,o=0;const s=this._connectionContainerRef.nativeElement,a=s.querySelectorAll(".mat-form-field-outline-start"),c=s.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const d=s.getBoundingClientRect();if(0===d.width&&0===d.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const S=this._getStartEnd(d),M=n.children,z=this._getStartEnd(M[0].getBoundingClientRect());let X=0;for(let ae=0;ae<M.length;ae++)X+=M[ae].offsetWidth;i=Math.abs(z-S)-5,o=X>0?.75*X+10:0}for(let d=0;d<a.length;d++)a[d].style.width=`${i}px`;for(let d=0;d<c.length;d++)c[d].style.width=`${o}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(n){return this._dir&&"rtl"===this._dir.value?n.right:n.left}_isAttachedToDOM(){const n=this._elementRef.nativeElement;if(n.getRootNode){const i=n.getRootNode();return i&&i!==n}return document.documentElement.contains(n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(Dt),Ie(Ks),Ie(Dt),Ie(kC,8),Ie(Y7,8),Ie(Kn),Ie(At),Ie(Wo,8))},r.\u0275cmp=An({type:r,selectors:[["mat-form-field"]],contentQueries:function(n,i,o){if(1&n&&(Rr(o,vm,5),Rr(o,vm,7),Rr(o,Em,5),Rr(o,Em,7),Rr(o,z7,5),Rr(o,KC,5),Rr(o,YC,5),Rr(o,JC,5),Rr(o,QC,5)),2&n){let s;In(s=Rn())&&(i._controlNonStatic=s.first),In(s=Rn())&&(i._controlStatic=s.first),In(s=Rn())&&(i._labelChildNonStatic=s.first),In(s=Rn())&&(i._labelChildStatic=s.first),In(s=Rn())&&(i._placeholderChild=s.first),In(s=Rn())&&(i._errorChildren=s),In(s=Rn())&&(i._hintChildren=s),In(s=Rn())&&(i._prefixChildren=s),In(s=Rn())&&(i._suffixChildren=s)}},viewQuery:function(n,i){if(1&n&&(ea(I7,5),ea(R7,7),ea(w7,5),ea(D7,5)),2&n){let o;In(o=Rn())&&(i.underlineRef=o.first),In(o=Rn())&&(i._connectionContainerRef=o.first),In(o=Rn())&&(i._inputContainerRef=o.first),In(o=Rn())&&(i._label=o.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(n,i){2&n&&Ht("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Lt([{provide:eT,useExisting:r}]),Mt],ngContentSelectors:H7,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(n,i){1&n&&(Hs(B7),xe(0,"div",0),xe(1,"div",1,2),Kt("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),mn(3,O7,9,0,"ng-container",3),mn(4,N7,2,0,"div",4),xe(5,"div",5,6),tr(7),xe(8,"span",7),mn(9,L7,5,16,"label",8),Fe(),Fe(),mn(10,x7,2,0,"div",9),Fe(),mn(11,F7,3,4,"div",10),xe(12,"div",11),mn(13,V7,2,1,"div",12),mn(14,U7,5,2,"div",13),Fe(),Fe()),2&n&&(yt(3),Tt("ngIf","outline"==i.appearance),yt(1),Tt("ngIf",i._prefixChildren.length),yt(5),Tt("ngIf",i._hasFloatingLabel()),yt(1),Tt("ngIf",i._suffixChildren.length),yt(1),Tt("ngIf","outline"!=i.appearance),yt(1),Tt("ngSwitch",i._getDisplayedMessages()),yt(1),Tt("ngSwitchCase","error"),yt(1),Tt("ngSwitchCase","hint"))},directives:[Vl,jl,xb,TV],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[G7.transitionMessages]},changeDetection:0}),r})(),tT=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({imports:[[Ul,Xr,gC],Xr]}),r})();function xd(r,t){return new oe(n=>{const i=r.length;if(0===i)return void n.complete();const o=new Array(i);let s=0,a=0;for(let c=0;c<i;c++){const d=x(r[c]);let S=!1;n.add(d.subscribe({next:M=>{S||(S=!0,a++),o[c]=M},error:M=>n.error(M),complete:()=>{s++,(s===i||!S)&&(a===i&&n.next(t?t.reduce((M,z,X)=>(M[z]=o[X],M),{}):o),n.complete())}}))}})}let nT=(()=>{class r{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(fi),Ie(Dt))},r.\u0275dir=Je({type:r}),r})(),Zo=(()=>{class r extends nT{}return r.\u0275fac=function(){let t;return function(i){return(t||(t=Zn(r)))(i||r)}}(),r.\u0275dir=Je({type:r,features:[Mt]}),r})();const yi=new et("NgValueAccessor"),Z7={provide:yi,useExisting:Wt(()=>Fd),multi:!0},t9=new et("CompositionEventMode");let Fd=(()=>{class r extends nT{constructor(n,i,o){super(n,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=pi()?pi().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(fi),Ie(Dt),Ie(t9,8))},r.\u0275dir=Je({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){1&n&&Kt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Lt([Z7]),Mt]}),r})();function ho(r){return null==r||0===r.length}function iT(r){return null!=r&&"number"==typeof r.length}const xn=new et("NgValidators"),po=new et("NgAsyncValidators"),n9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class r9{static min(t){return function(r){return t=>{if(ho(t.value)||ho(r))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<r?{min:{min:r,actual:t.value}}:null}}(t)}static max(t){return function(r){return t=>{if(ho(t.value)||ho(r))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>r?{max:{max:r,actual:t.value}}:null}}(t)}static required(t){return function(r){return ho(r.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(r){return!0===r.value?null:{required:!0}}(t)}static email(t){return function(r){return ho(r.value)||n9.test(r.value)?null:{email:!0}}(t)}static minLength(t){return function(r){return t=>ho(t.value)||!iT(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function(r){return t=>iT(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static pattern(t){return function(r){if(!r)return go;let t,n;return"string"==typeof r?(n="","^"!==r.charAt(0)&&(n+="^"),n+=r,"$"!==r.charAt(r.length-1)&&(n+="$"),t=new RegExp(n)):(n=r.toString(),t=r),i=>{if(ho(i.value))return null;const o=i.value;return t.test(o)?null:{pattern:{requiredPattern:n,actualValue:o}}}}(t)}static nullValidator(t){return null}static compose(t){return yT(t)}static composeAsync(t){return vT(t)}}function go(r){return null}function hT(r){return null!=r}function pT(r){const t=Xa(r)?x(r):r;return Yu(t),t}function gT(r){let t={};return r.forEach(n=>{t=null!=n?Object.assign(Object.assign({},t),n):t}),0===Object.keys(t).length?null:t}function mT(r,t){return t.map(n=>n(r))}function _T(r){return r.map(t=>function(r){return!r.validate}(t)?t:n=>t.validate(n))}function yT(r){if(!r)return null;const t=r.filter(hT);return 0==t.length?null:function(n){return gT(mT(n,t))}}function bm(r){return null!=r?yT(_T(r)):null}function vT(r){if(!r)return null;const t=r.filter(hT);return 0==t.length?null:function(n){return function(...r){if(1===r.length){const t=r[0];if(y(t))return xd(t,null);if(I(t)&&Object.getPrototypeOf(t)===Object.prototype){const n=Object.keys(t);return xd(n.map(i=>t[i]),n)}}if("function"==typeof r[r.length-1]){const t=r.pop();return xd(r=1===r.length&&y(r[0])?r[0]:r,null).pipe(C(n=>t(...n)))}return xd(r,null)}(mT(n,t).map(pT)).pipe(C(gT))}}function Sm(r){return null!=r?vT(_T(r)):null}function ET(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function bT(r){return r._rawValidators}function ST(r){return r._rawAsyncValidators}function Cm(r){return r?Array.isArray(r)?r:[r]:[]}function Vd(r,t){return Array.isArray(r)?r.includes(t):r===t}function CT(r,t){const n=Cm(t);return Cm(r).forEach(o=>{Vd(n,o)||n.push(o)}),n}function TT(r,t){return Cm(t).filter(n=>!Vd(r,n))}let AT=(()=>{class r{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=bm(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Sm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,i){return!!this.control&&this.control.hasError(n,i)}getError(n,i){return this.control?this.control.getError(n,i):null}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Je({type:r}),r})(),Yn=(()=>{class r extends AT{get formDirective(){return null}get path(){return null}}return r.\u0275fac=function(){let t;return function(i){return(t||(t=Zn(r)))(i||r)}}(),r.\u0275dir=Je({type:r,features:[Mt]}),r})();class Vi extends AT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class IT{constructor(t){this._cd=t}is(t){var n,i,o;return"submitted"===t?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(o=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===o?void 0:o[t])}}let RT=(()=>{class r extends IT{constructor(n){super(n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(Vi,2))},r.\u0275dir=Je({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){2&n&&Ht("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[Mt]}),r})(),wT=(()=>{class r extends IT{constructor(n){super(n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(Yn,10))},r.\u0275dir=Je({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,i){2&n&&Ht("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[Mt]}),r})();function Yc(r,t){Im(r,t),t.valueAccessor.writeValue(r.value),function(r,t){t.valueAccessor.registerOnChange(n=>{r._pendingValue=n,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&DT(r,t)})}(r,t),function(r,t){const n=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};r.registerOnChange(n),t._registerOnDestroy(()=>{r._unregisterOnChange(n)})}(r,t),function(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&DT(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function(r,t){if(t.valueAccessor.setDisabledState){const n=i=>{t.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(n),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(n)})}}(r,t)}function Bd(r,t,n=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Wd(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Hd(r,t){r.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Im(r,t){const n=bT(r);null!==t.validator?r.setValidators(ET(n,t.validator)):"function"==typeof n&&r.setValidators([n]);const i=ST(r);null!==t.asyncValidator?r.setAsyncValidators(ET(i,t.asyncValidator)):"function"==typeof i&&r.setAsyncValidators([i]);const o=()=>r.updateValueAndValidity();Hd(t._rawValidators,o),Hd(t._rawAsyncValidators,o)}function Wd(r,t){let n=!1;if(null!==r){if(null!==t.validator){const o=bT(r);if(Array.isArray(o)&&o.length>0){const s=o.filter(a=>a!==t.validator);s.length!==o.length&&(n=!0,r.setValidators(s))}}if(null!==t.asyncValidator){const o=ST(r);if(Array.isArray(o)&&o.length>0){const s=o.filter(a=>a!==t.asyncValidator);s.length!==o.length&&(n=!0,r.setAsyncValidators(s))}}}const i=()=>{};return Hd(t._rawValidators,i),Hd(t._rawAsyncValidators,i),n}function DT(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function OT(r,t){Im(r,t)}function NT(r,t){r._syncPendingControls(),t.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Gd(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}const Jc="VALID",qd="INVALID",ya="PENDING",Qc="DISABLED";function Dm(r){return(Nm(r)?r.validators:r)||null}function MT(r){return Array.isArray(r)?bm(r):r||null}function Om(r,t){return(Nm(t)?t.asyncValidators:r)||null}function kT(r){return Array.isArray(r)?Sm(r):r||null}function Nm(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class Mm{constructor(t,n){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=MT(this._rawValidators),this._composedAsyncValidatorFn=kT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Jc}get invalid(){return this.status===qd}get pending(){return this.status==ya}get disabled(){return this.status===Qc}get enabled(){return this.status!==Qc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=MT(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=kT(t)}addValidators(t){this.setValidators(CT(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(CT(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(TT(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(TT(t,this._rawAsyncValidators))}hasValidator(t){return Vd(this._rawValidators,t)}hasAsyncValidator(t){return Vd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ya,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Qc,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Jc,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jc||this.status===ya)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qc:Jc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ya,this._hasOwnPendingAsyncValidator=!0;const n=pT(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){return function(r,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let i=r;return t.forEach(o=>{i=i instanceof Xc?i.controls.hasOwnProperty(o)?i.controls[o]:null:i instanceof km&&i.at(o)||null}),i}(this,t)}getError(t,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new jt,this.statusChanges=new jt}_calculateStatus(){return this._allControlsDisabled()?Qc:this.errors?qd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ya)?ya:this._anyControlsHaveStatus(qd)?qd:Jc}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Nm(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class va extends Mm{constructor(t=null,n,i){super(Dm(n),Om(i,n)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=null,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Gd(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Gd(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Xc extends Mm{constructor(t,n,i){super(Dm(n),Om(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n instanceof va?n.value:n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const n of Object.keys(this.controls)){const i=this.controls[n];if(this.contains(n)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,n,i)=>((n.enabled||this.disabled)&&(t[i]=n.value),t))}_reduceChildren(t,n){let i=t;return this._forEachChild((o,s)=>{i=n(i,o,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((n,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class km extends Mm{constructor(t,n,i){super(Dm(n),Om(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),n&&(this.controls.splice(t,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){this._checkAllValuesPresent(t),t.forEach((i,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(t.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t instanceof va?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((n,i)=>!!i._syncPendingControls()||n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((n,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const m9={provide:Yn,useExisting:Wt(()=>zd)},Zc=(()=>Promise.resolve(null))();let zd=(()=>{class r extends Yn{constructor(n,i){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new jt,this.form=new Xc({},bm(n),Sm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Zc.then(()=>{const i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),Yc(n.control,n),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Zc.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name),Gd(this._directives,n)})}addFormGroup(n){Zc.then(()=>{const i=this._findContainer(n.path),o=new Xc({});OT(o,n),i.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Zc.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){Zc.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,NT(this.form,this._directives),this.ngSubmit.emit(n),!1}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return r.\u0275fac=function(n){return new(n||r)(Ie(xn,10),Ie(po,10))},r.\u0275dir=Je({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,i){1&n&&Kt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lt([m9]),Mt]}),r})(),VT=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=Je({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),UT=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({}),r})();const Pm=new et("NgModelWithFormControlWarning"),T9={provide:Yn,useExisting:Wt(()=>eu)};let eu=(()=>{class r extends Yn{constructor(n,i){super(),this.validators=n,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new jt,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Wd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const i=this.form.get(n.path);return Yc(i,n),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){Bd(n.control||null,n,!1),Gd(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this.submitted=!0,NT(this.form,this.directives),this.ngSubmit.emit(n),!1}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const i=n.control,o=this.form.get(n.path);i!==o&&(Bd(i||null,n),o instanceof va&&(Yc(o,n),n.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const i=this.form.get(n.path);OT(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const i=this.form.get(n.path);i&&function(r,t){return Wd(r,t)}(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Im(this.form,this),this._oldForm&&Wd(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(n){return new(n||r)(Ie(xn,10),Ie(po,10))},r.\u0275dir=Je({type:r,selectors:[["","formGroup",""]],hostBindings:function(n,i){1&n&&Kt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lt([T9]),Mt,bn]}),r})();const R9={provide:Vi,useExisting:Wt(()=>Fm)};let Fm=(()=>{class r extends Vi{constructor(n,i,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.update=new jt,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function(r,t){if(!t)return null;let n,i,o;return Array.isArray(t),t.forEach(s=>{s.constructor===Fd?n=s:function(r){return Object.getPrototypeOf(r.constructor)===Zo}(s)?i=s:o=s}),o||i||n||null}(0,s)}set isDisabled(n){}ngOnChanges(n){this._added||this._setUpControl(),function(r,t){if(!r.hasOwnProperty("model"))return!1;const n=r.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return function(r,t){return[...t.path,r]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return r.\u0275fac=function(n){return new(n||r)(Ie(Yn,13),Ie(xn,10),Ie(po,10),Ie(yi,10),Ie(Pm,8))},r.\u0275dir=Je({type:r,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Lt([R9]),Mt,bn]}),r._ngModelWarningSentOnce=!1,r})(),nA=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({imports:[[UT]]}),r})(),rA=(()=>{class r{static withConfig(n){return{ngModule:r,providers:[{provide:Pm,useValue:n.warnOnNgModelWithFormControl}]}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({imports:[nA]}),r})(),W9=(()=>{class r{group(n,i=null){const o=this._reduceControls(n);let c,s=null,a=null;return null!=i&&(function(r){return void 0!==r.asyncValidators||void 0!==r.validators||void 0!==r.updateOn}(i)?(s=null!=i.validators?i.validators:null,a=null!=i.asyncValidators?i.asyncValidators:null,c=null!=i.updateOn?i.updateOn:void 0):(s=null!=i.validator?i.validator:null,a=null!=i.asyncValidator?i.asyncValidator:null)),new Xc(o,{asyncValidators:a,updateOn:c,validators:s})}control(n,i,o){return new va(n,i,o)}array(n,i,o){const s=n.map(a=>this._createControl(a));return new km(s,i,o)}_reduceControls(n){const i={};return Object.keys(n).forEach(o=>{i[o]=this._createControl(n[o])}),i}_createControl(n){return n instanceof va||n instanceof Xc||n instanceof km?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Xe({factory:function(){return new r},token:r,providedIn:rA}),r})();const G9=new et("MAT_INPUT_VALUE_ACCESSOR"),q9=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let z9=0;const $9=t7(class{constructor(r,t,n,i){this._defaultErrorStateMatcher=r,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i}});let K9=(()=>{class r extends $9{constructor(n,i,o,s,a,c,d,S,M,z){super(c,s,a,o),this._elementRef=n,this._platform=i,this._autofillMonitor=S,this._formField=z,this._uid="mat-input-"+z9++,this.focused=!1,this.stateChanges=new u,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ge=>aC().has(ge));const X=this._elementRef.nativeElement,ae=X.nodeName.toLowerCase();this._inputValueAccessor=d||X,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&M.runOutsideAngular(()=>{n.nativeElement.addEventListener("keyup",ge=>{const be=ge.target;!be.value&&0===be.selectionStart&&0===be.selectionEnd&&(be.setSelectionRange(1,1),be.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ae,this._isTextarea="textarea"===ae,this._isInFormField=!!z,this._isNativeSelect&&(this.controlType=X.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(n){this._disabled=Qr(n),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(n){this._id=n||this._uid}get required(){return this._required}set required(n){this._required=Qr(n)}get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&aC().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(n){n!==this.value&&(this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=Qr(n)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}_focusChanged(n){n!==this.focused&&(this.focused=n,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var n,i;const o=(null===(i=null===(n=this._formField)||void 0===n?void 0:n._hideControlPlaceholder)||void 0===i?void 0:i.call(n))?null:this.placeholder;if(o!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=o,o?s.setAttribute("placeholder",o):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_validateType(){q9.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const n=this._elementRef.nativeElement,i=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return r.\u0275fac=function(n){return new(n||r)(Ie(Dt),Ie(Kn),Ie(Vi,10),Ie(zd,8),Ie(eu,8),Ie(UC),Ie(G9,10),Ie(fC),Ie(At),Ie(eT,8))},r.\u0275dir=Je({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(n,i){1&n&&Kt("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&n&&(tc("disabled",i.disabled)("required",i.required),cn("id",i.id)("data-placeholder",i.placeholder)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),Ht("mat-input-server",i._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[Lt([{provide:vm,useExisting:r}]),Mt,bn]}),r})(),Y9=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({providers:[UC],imports:[[hC,tT,Xr],hC,tT]}),r})();const iA=["mat-button",""],oA=["*"],Q9=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],X9=VC(FC(e7(class{constructor(r){this._elementRef=r}})));let aA=(()=>{class r extends X9{constructor(n,i,o){super(n),this._focusMonitor=i,this._animationMode=o,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Q9)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);n.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(n,i){n?this._focusMonitor.focusVia(this._getHostElement(),n,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...n){return n.some(i=>this._getHostElement().hasAttribute(i))}}return r.\u0275fac=function(n){return new(n||r)(Ie(Dt),Ie(mm),Ie(Wo,8))},r.\u0275cmp=An({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(n,i){if(1&n&&ea(Ld,5),2&n){let o;In(o=Rn())&&(i.ripple=o.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(n,i){2&n&&(cn("disabled",i.disabled||null),Ht("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Mt],attrs:iA,ngContentSelectors:oA,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,i){1&n&&(Hs(),xe(0,"span",0),tr(1),Fe(),ct(2,"span",1),ct(3,"span",2)),2&n&&(yt(2),Ht("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Tt("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Ld],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),r})(),Z9=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({imports:[[GC,Xr],Xr]}),r})();var ej=j(272);class ir{constructor(t){this.config=t,this.audioDevices=[],this.videoDevices=[],this.AgoraRTC=ir.AgoraRTC,this.checkSystemRequirements()?this.collectDevices():this.AgoraRTC.Logger.error("Web RTC is not supported in this browser")}checkSystemRequirements(){return this.AgoraRTC.checkSystemRequirements()}createClient(t,n=!0,i,o){return this.client=this.AgoraRTC.createClient(t),n&&this.init(this.config.AppID,i,o),this.client}createStream(t){if(!t.microphoneId&&this.audioDevices&&this.audioDevices.length&&(t.microphoneId=this.audioDevices[0].deviceId),!t.cameraId&&this.videoDevices&&this.videoDevices.length){const n=this.videoDevices[0].deviceId;t.cameraId=t.cameraId||n}return this.AgoraRTC.createStream(t)}init(t,n,i){this.client.init(t,n,i)}collectDevices(){this.AgoraRTC.getDevices(t=>{const n=t.filter(o=>"audioinput"===o.kind&&"default"!==o.deviceId),i=t.filter(o=>"videoinput"===o.kind&&"default"!==o.deviceId);this.audioDevices=n,this.videoDevices=i})}}ir.\u0275fac=function(t){return new(t||ir)(Ne("config"))},ir.\u0275prov=Xe({token:ir,factory:ir.\u0275fac,providedIn:"root"}),ir.AgoraRTC=ej,ir.ngInjectableDef=Xe({factory:function(){return new ir(Ne("config"))},token:ir,providedIn:"root"});let tj=(()=>{class r{static forRoot(n){return{ngModule:r,providers:[ir,{provide:"config",useValue:n}]}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({}),r})();const qt={RELAY_OK:0,SERVER_ERROR_RESPONSE:1,SERVER_NO_RESPONSE:2,NO_RESOURCE_AVAILABLE:3,FAILED_JOIN_SRC:4,FAILED_JOIN_DEST:5,FAILED_PACKET_RECEIVED_FROM_SRC:6,FAILED_PACKET_SENT_TO_DEST:7,SERVER_CONNECTION_LOST:8,INTERNAL_ERROR:9,SRC_TOKEN_EXPIRED:10,DEST_TOKEN_EXPIRED:11,RELAY_ALREADY_START:12,RELAY_NOT_START:13};qt[qt.RELAY_OK]="RELAY_OK",qt[qt.SERVER_ERROR_RESPONSE]="SERVER_ERROR_RESPONSE",qt[qt.SERVER_NO_RESPONSE]="SERVER_NO_RESPONSE",qt[qt.NO_RESOURCE_AVAILABLE]="NO_RESOURCE_AVAILABLE",qt[qt.FAILED_JOIN_SRC]="FAILED_JOIN_SRC",qt[qt.FAILED_JOIN_DEST]="FAILED_JOIN_DEST",qt[qt.FAILED_PACKET_RECEIVED_FROM_SRC]="FAILED_PACKET_RECEIVED_FROM_SRC",qt[qt.FAILED_PACKET_SENT_TO_DEST]="FAILED_PACKET_SENT_TO_DEST",qt[qt.SERVER_CONNECTION_LOST]="SERVER_CONNECTION_LOST",qt[qt.INTERNAL_ERROR]="INTERNAL_ERROR",qt[qt.SRC_TOKEN_EXPIRED]="SRC_TOKEN_EXPIRED",qt[qt.DEST_TOKEN_EXPIRED]="DEST_TOKEN_EXPIRED",qt[qt.RELAY_ALREADY_START]="RELAY_ALREADY_START",qt[qt.RELAY_NOT_START]="RELAY_NOT_START";const vi={Debug:0,Info:1,Warning:2,Error:3,None:4};vi[vi.Debug]="Debug",vi[vi.Info]="Info",vi[vi.Warning]="Warning",vi[vi.Error]="Error",vi[vi.None]="None";let nj=(()=>{class r{static forRoot(n){return{ngModule:r,providers:[ir,{provide:"config",useValue:n}]}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r}),r.\u0275inj=xt({imports:[[Ul,tj]]}),r})();const cA_configs={AppID:"fee9eb8f5bb44a6893ec96fd5e993a31"};let rj=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=An({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(n,i){1&n&&ct(0,"router-outlet")},directives:[am],styles:[""],changeDetection:0}),r})(),ij=(()=>{class r{constructor(n,i){this.formBuilder=n,this.router=i}ngOnInit(){this.form=this.formBuilder.group({channelId:["test-channel-ngx-webrtc",r9.required]})}onSubmit(){this.router.navigate(["conference"],{queryParams:Object.assign({},this.form.value)})}}return r.\u0275fac=function(n){return new(n||r)(Ie(W9),Ie(Ln))},r.\u0275cmp=An({type:r,selectors:[["app-home"]],decls:22,vars:4,consts:[[1,"home"],[1,"home__welcome"],[1,"home__form",3,"formGroup","ngSubmit"],[1,"home__wrapper","home__wrapper--center"],["src","assets/user.svg","alt","User",1,"user"],[1,"home__title"],[1,"home__wrapper"],["matInput","","placeholder","Channel id","formControlName","channelId"],["mat-flat-button","","color","primary",3,"disabled"],[1,"home__footer"],["href","https://www.npmjs.com/package/ngx-webrtc-lib","target","_blank"],["viewBox","0 0 27.23 27.23"],["width","27.23","height","27.23","rx","2"],["fill","#fff","points","5.8 21.75 13.66 21.75 13.67 9.98 17.59 9.98 17.58 21.76 21.51 21.76 21.52 6.06 5.82 6.04 5.8 21.75"],["href","https://github.com/TarasMoskovych/ngx-webrtc","target","_blank"],["aria-hidden","true","role","img","viewBox","0 0 16 16","width","50","height","50",1,""],["fill-rule","evenodd","d","M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"]],template:function(n,i){1&n&&(xe(0,"div",0),xe(1,"div",1),xe(2,"form",2),Kt("ngSubmit",function(){return i.onSubmit()}),xe(3,"div",3),ct(4,"img",4),Fe(),xe(5,"h1",5),Mn(6," Welcome "),Fe(),xe(7,"mat-form-field",6),xe(8,"mat-label"),Mn(9,"Channel Id"),Fe(),ct(10,"input",7),Fe(),xe(11,"div",3),xe(12,"button",8),Mn(13,"Start / Join call"),Fe(),Fe(),Fe(),xe(14,"div",9),xe(15,"a",10),ri(),xe(16,"svg",11),ct(17,"rect",12),ct(18,"polygon",13),Fe(),Fe(),$i(),xe(19,"a",14),ri(),xe(20,"svg",15),ct(21,"path",16),Fe(),Fe(),Fe(),Fe(),Fe()),2&n&&(yt(2),Tt("formGroup",i.form),yt(5),Ht("mat-focused",i.form.valid),yt(5),Tt("disabled",i.form.invalid))},directives:[VT,wT,eu,J7,Em,K9,Fd,RT,Fm,aA],styles:[".home[_ngcontent-%COMP%]{align-items:center;background-color:#f2f2f2;display:flex;flex-wrap:wrap;justify-content:center;min-height:100vh;width:100%}.home__welcome[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 5px 10px #0000001a;overflow:hidden;padding:10px 40px;width:390px}.home__welcome[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{height:150px}.home__title[_ngcontent-%COMP%]{color:#333;display:block;font-size:30px;font-weight:500;margin:10px 0 60px;text-align:center}.home__wrapper[_ngcontent-%COMP%]{width:100%}.home__wrapper--center[_ngcontent-%COMP%]{text-align:center}.home__footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.home__footer[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#333;cursor:pointer;height:24px;margin:0 5px;transition:.3s;width:24px}.home__footer[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{fill:#aaa}"],changeDetection:0}),r})();function uA(r=0,t=zc){return(!pm(r)||r<0)&&(r=0),(!t||"function"!=typeof t.schedule)&&(t=zc),new oe(n=>(n.add(t.schedule(oj,r,{subscriber:n,counter:0,period:r})),n))}function oj(r){const{subscriber:t,counter:n,period:i}=r;t.next(n),this.schedule({subscriber:t,counter:n+1,period:i},i)}const lA={connected:!1,loading:!0,statusText:"Connecting",started:null,ended:!1},sj={mode:"rtc",codec:"h264"},aj={audio:!0,video:!0,screen:!1};let cj=(()=>{class r{constructor(n){this.ngxAgoraService=n,this.streamState=new rr(lA),this.remoteStreamVideoToggle=new rr(!0),this.callEnd=new u,this.localContainerId="local-video",this.remoteCalls=[],this.remoteStreamVideoToggle$=this.remoteStreamVideoToggle.asObservable(),this.streamState$=this.streamState.asObservable()}init(n,i,o=!1){return this.uid=n,this.ngxAgoraService.AgoraRTC.Logger.setLogLevel(this.ngxAgoraService.AgoraRTC.Logger[o?"DEBUG":"NONE"]),this.client=this.ngxAgoraService.createClient(sj),this.assignClientHandlers(),this.localStream=this.ngxAgoraService.createStream(Object.assign(Object.assign({},aj),{streamID:this.uid})),this.initLocalStream(()=>{this.streamState.next(Object.assign(Object.assign({},this.streamState.value),{connected:!0,statusText:"Waiting others to join"})),this.join(i,()=>this.publish())}),this.callEnd.asObservable()}deinit(){this.streamState.next(lA)}endCall(){this.client.leave(()=>{this.localStream.isPlaying()&&(this.localStream.stop(),this.localStream.close()),this.streamState.next(Object.assign(Object.assign({},this.streamState.value),{started:null,loading:!0,statusText:"",ended:!0})),uA(500).pipe(ao(1)).subscribe(()=>this.callEnd.next())})}toggleVideo(n){this.localStream&&(n?this.localStream.muteVideo():this.localStream.unmuteVideo())}toggleAudio(n){this.localStream&&(n?this.localStream.muteAudio():this.localStream.unmuteAudio())}toggleFullScreen(n){n?document.exitFullscreen():document.documentElement.requestFullscreen()}isVideoEnabled(){return!!this.localStream&&this.localStream.isVideoOn()}isAudioEnabled(){return!!this.localStream&&this.localStream.isAudioOn()}join(n,i,o){this.client.join(null,n,this.uid,i,o)}publish(){this.client.publish(this.localStream)}assignClientHandlers(){this.client.on("stream-subscribed",n=>{this.streamState.next(Object.assign(Object.assign({},this.streamState.value),{started:n.stream.subscribeLTS,loading:!1}))}),this.client.on("error",n=>{console.log("Got error msg:",n.reason),"DYNAMIC_KEY_TIMEOUT"===n.reason&&this.client.renewChannelKey("",()=>console.log("Renewed the channel key successfully."),i=>console.warn("Renew channel key failed: ",i))}),this.client.on("stream-added",n=>{this.client.subscribe(n.stream,{audio:!0,video:!0},o=>{console.log("Subscribe stream failed",o)})}),this.client.on("stream-subscribed",n=>{const i=n.stream,o=this.getRemoteId(i);this.remoteCalls.length||(this.remoteCalls.push(o),setTimeout(()=>i.play(o),1e3))}),this.client.on("mute-video",()=>this.remoteStreamVideoToggle.next(!1)),this.client.on("unmute-video",()=>this.remoteStreamVideoToggle.next(!0)),this.client.on("stream-removed",n=>{const i=n.stream;i&&(i.stop(),this.remoteCalls=[],console.log(`Remote stream is removed ${i.getId()}`))}),this.client.on("peer-leave",n=>{const i=n.stream;i&&(i.stop(),this.remoteCalls=this.remoteCalls.filter(o=>o!==`${this.getRemoteId(i)}`),this.endCall())})}initLocalStream(n){this.localStream.init(()=>{this.localStream.play(this.localContainerId),n&&n()},i=>console.warn("getUserMedia failed",i))}getRemoteId(n){return`remote_call-${n.getId()}`}}return r.\u0275fac=function(n){return new(n||r)(Ne(ir))},r.\u0275prov=Xe({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),uj=(()=>{class r{constructor(){this.connected=!0,this.ended=!1}get color(){return this.ended?"#aaa":this.connected?"#39D627":"#1296E7"}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=An({type:r,selectors:[["ngx-spinner"]],inputs:{text:"text",connected:"connected",ended:"ended"},decls:9,vars:7,consts:[[1,"spinner"],[1,"spinner__wrapper"],[1,"spinner__icon"],["xmlns","http://www.w3.org/2000/svg","width","64px","height","64px","viewBox","0 0 32 32","fill","none"],["d","M5.25 5.5C3.45507 5.5 2 6.95508 2 8.75V19.25C2 21.0449 3.45507 22.5 5.25 22.5H14.75C16.5449 22.5 18 21.0449 18 19.25V8.75C18 6.95507 16.5449 5.5 14.75 5.5H5.25Z"],["d","M23.1232 20.6431L19.5 17.0935V10.9989L23.1121 7.3706C23.8988 6.58044 25.248 7.13753 25.248 8.25251V19.7502C25.248 20.8577 23.9143 21.4181 23.1232 20.6431Z"],[1,"spinner__cirle"],[1,"spinner__text"]],template:function(n,i){1&n&&(xe(0,"div",0),xe(1,"div",1),xe(2,"div",2),ri(),xe(3,"svg",3),ct(4,"path",4),ct(5,"path",5),Fe(),Fe(),$i(),ct(6,"div",6),xe(7,"div",7),Mn(8),Fe(),Fe(),Fe()),2&n&&(Ht("spinner--connected",i.connected)("spinner--ended",i.ended),yt(4),cn("fill",i.color),yt(1),cn("fill",i.color),yt(3),Oo(i.text))},styles:[".spinner[_ngcontent-%COMP%]{background-color:#232a30;height:100vh;position:relative}.spinner--connected[_ngcontent-%COMP%]   .spinner__cirle[_ngcontent-%COMP%]{border-color:#39d627}.spinner--ended[_ngcontent-%COMP%]   .spinner__cirle[_ngcontent-%COMP%]{border-color:transparent}.spinner__wrapper[_ngcontent-%COMP%]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.spinner__cirle[_ngcontent-%COMP%]{animation:spin 2s linear infinite;border:5px solid #1296E7;border-radius:50%;border-top-color:transparent;height:160px;margin:auto;transition:.3s;width:160px}.spinner__icon[_ngcontent-%COMP%]{left:50%;position:absolute;top:52px;transform:translate(-40%)}.spinner__text[_ngcontent-%COMP%]{color:#fff;font-size:1.3em;margin-top:35px;text-align:center}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"],changeDetection:0}),r})(),lj=(()=>{class r{constructor(){this.started=Date.now()}ngOnInit(){this.time$=function(r=0,t,n){let i=-1;return pm(t)?i=Number(t)<1?1:Number(t):g(t)&&(n=t),g(n)||(n=zc),new oe(o=>{const s=pm(r)?r:+r-n.now();return n.schedule(tV,s,{index:0,period:i,subscriber:o})})}(0,1e3).pipe(C(()=>this.format(Date.now()-this.started)))}format(n){const i=Math.floor(n/1e3%60).toString().padStart(2,"0"),o=Math.floor(n/6e4%60).toString().padStart(2,"0");return[Math.floor(n/36e5%24).toString().padStart(2,"0"),o,i].join(":")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=An({type:r,selectors:[["ngx-timer"]],inputs:{started:"started"},decls:4,vars:3,consts:[[1,"timer"]],template:function(n,i){1&n&&(xe(0,"div",0),xe(1,"span"),Mn(2),ul(3,"async"),Fe(),Fe()),2&n&&(yt(2),Oo(ll(3,1,i.time$)))},pipes:[Yp],styles:[".timer[_ngcontent-%COMP%]{color:#fff;position:relative;text-align:center;z-index:1}.timer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);border-radius:5px;padding:5px 10px}"],changeDetection:0}),r})(),dj=(()=>{class r{constructor(){this.cameraEnabled=!0,this.microphoneEnabled=!0,this.fullScreenEnabled=!1,this.toggleCamera=new jt,this.toggleMicrophone=new jt,this.toggleFullScreen=new jt,this.endCall=new jt}onToggleCamera(){this.toggleCamera.emit(this.cameraEnabled)}onToggleMicrophone(){this.toggleMicrophone.emit(this.microphoneEnabled)}onToggleFullScreen(){this.toggleFullScreen.emit(this.fullScreenEnabled)}onEndCall(){this.endCall.emit()}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=An({type:r,selectors:[["ngx-controls"]],inputs:{cameraEnabled:"cameraEnabled",microphoneEnabled:"microphoneEnabled",fullScreenEnabled:"fullScreenEnabled"},outputs:{toggleCamera:"toggleCamera",toggleMicrophone:"toggleMicrophone",toggleFullScreen:"toggleFullScreen",endCall:"endCall"},decls:63,vars:19,consts:[[1,"controls"],[1,"controls__item"],[1,"controls__button",3,"click"],[1,"controls__icon-wrapper"],["width","32","height","32","viewBox","0 0 64 64","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","video-camera",1,"controls__icon"],["id","Group"],["id","Group_2"],["id","Vector","d","M63.4134 16.2294C63.0454 15.9814 62.5787 15.928 62.1707 16.096L50.6668 20.6986V20C50.6668 16.3226 47.6748 13.3334 44.0001 13.3334H6.66663C2.992 13.3334 0 16.3226 0 20V44C0 47.6774 2.992 50.6666 6.66663 50.6666H44C47.6746 50.6666 50.6666 47.6772 50.6666 44V43.3014L62.1706 47.904C62.5812 48.072 63.048 48.0186 63.4132 47.7706C63.7786 47.5226 63.9999 47.1093 63.9999 46.6666V17.3334C64 16.8906 63.7786 16.4774 63.4134 16.2294Z","fill","white"],["id","no-camera",1,"controls__icon"],["id","Vector","d","M44.0002 13.3325H6.66735C2.99276 13.3325 0.000793457 16.3218 0.000793457 19.999V43.9988C0.000793457 47.6761 2.99276 50.6654 6.66735 50.6654H7.67797L44.9176 13.4257C44.6162 13.3832 44.315 13.3325 44.0002 13.3325Z","fill","white"],["id","Group_3"],["id","Group_4"],["id","Vector_2","d","M63.4134 16.2285C63.0454 15.9805 62.5788 15.9271 62.1708 16.0951L50.6669 20.6977V19.9991C50.6669 18.6417 50.2535 17.3831 49.5549 16.3297L63.608 2.2766C64.128 1.75661 64.128 0.911242 63.608 0.391247C63.088 -0.128748 62.2426 -0.128748 61.7226 0.391247L0.389996 61.724C-0.129999 62.244 -0.129999 63.0894 0.389996 63.6094C0.651369 63.868 0.992615 63.9988 1.33399 63.9988C1.67536 63.9988 2.01661 63.8681 2.27798 63.6094L15.2192 50.6655H44.0003C47.6749 50.6655 50.6669 47.6762 50.6669 43.9989V43.3003L62.1708 47.9029C62.5814 48.0709 63.0481 48.0175 63.4134 47.7695C63.7788 47.5215 64 47.1082 64 46.6655V17.3325C64 16.8898 63.7788 16.4765 63.4134 16.2285Z","fill","white"],["id","microphone",1,"controls__icon"],["id","Vector"],["fill-rule","evenodd","clip-rule","evenodd","d","M44.3474 12.1407L44.3468 17.2309V33.8672C44.3468 40.6024 38.9004 46.0823 32.206 46.0823C27.8366 46.0787 23.8059 43.7286 21.6503 39.9279L20.4131 36.8161C20.1824 35.875 20.0659 34.9098 20.0659 33.941V12.1407C20.0659 5.43551 25.5014 0 32.2066 0C38.9118 0 44.3474 5.43551 44.3474 12.1407Z","fill","white"],["fill-rule","evenodd","clip-rule","evenodd","d","M15.0971 33.7512C15.0947 36.1345 15.5932 38.4912 16.5596 40.6697L18.1223 43.4553C22.3699 49.6259 30.1387 52.3143 37.292 50.089C44.4453 47.8638 49.318 41.2426 49.3156 33.7518C49.3156 32.9026 50.0039 32.2143 50.8532 32.2143C51.7018 32.2143 52.3907 32.9026 52.3907 33.7518C52.4051 44.4499 44.0585 53.2951 33.3778 53.9017V60.9246H39.8098C40.6584 60.9246 41.3473 61.6135 41.3473 62.4622C41.3473 63.3114 40.6584 63.9997 39.8098 63.9997H24.6029C23.7537 63.9997 23.0654 63.3114 23.0654 62.4622C23.0654 61.6135 23.7537 60.9246 24.6029 60.9246H30.3033V53.847C25.6228 53.4212 21.2413 51.3623 17.926 48.0313C17.1926 47.298 16.5163 46.51 15.9031 45.6739L14.2418 42.9874C12.7757 40.1297 12.0148 36.9633 12.022 33.7512C12.022 32.902 12.7103 32.2137 13.5595 32.2137C14.4088 32.2137 15.0971 32.902 15.0971 33.7512Z","fill","white"],["id","no-microphone",1,"controls__icon"],["id","Vector","d","M52.9733 4.25592L44.3474 12.8813V12.1407C44.3474 5.43551 38.9118 0 32.2066 0C25.5014 0 20.0659 5.43551 20.0659 12.1407V33.941C20.0659 34.9098 20.1824 35.875 20.4131 36.8161L16.5596 40.6697C15.5932 38.4912 15.0947 36.1345 15.0971 33.7512C15.0971 32.902 14.4088 32.2137 13.5595 32.2137C12.7103 32.2137 12.022 32.902 12.022 33.7512C12.0148 36.9633 12.7757 40.1297 14.2418 42.9874L8.81411 48.4151C8.4117 48.8007 8.24954 49.3731 8.39008 49.9124C8.53002 50.4518 8.95105 50.8728 9.4898 51.0133C10.0291 51.1539 10.6021 50.9917 10.9877 50.5899L15.9031 45.6739C16.5163 46.51 17.1926 47.298 17.926 48.0313C21.2413 51.3623 25.6228 53.4212 30.3033 53.847V60.9246H24.6029C23.7537 60.9246 23.0654 61.6135 23.0654 62.4622C23.0654 63.3114 23.7537 63.9997 24.6029 63.9997H39.8098C40.6584 63.9997 41.3473 63.3114 41.3473 62.4622C41.3473 61.6135 40.6584 60.9246 39.8098 60.9246H33.3778V53.9017C44.0585 53.2951 52.4051 44.4499 52.3907 33.7518C52.3907 32.9026 51.7018 32.2143 50.8532 32.2143C50.0039 32.2143 49.3156 32.9026 49.3156 33.7518C49.318 41.2426 44.4453 47.8638 37.292 50.089C30.1387 52.3143 22.3699 49.6259 18.1224 43.4553L21.6503 39.9279C23.8059 43.7286 27.8366 46.0787 32.206 46.0823C38.9004 46.0823 44.3468 40.6024 44.3468 33.8672V17.2309L55.1475 6.43072C55.7481 5.83071 55.7481 4.85713 55.1475 4.25652C54.5469 3.65591 53.5733 3.65591 52.9733 4.25652V4.25592Z","fill","white"],["id","fullscreen",1,"controls__icon"],["id","Vector","d","M57.8018 53.4382L44.3964 40.0328L40.0328 44.3964L53.4382 57.8018H43.0205V64H64V43.0205H57.8018V53.4382Z","fill","white"],["id","Vector_2","d","M44.3964 23.9803L57.8018 10.5618V20.9795H64V0H43.0205V6.1982H53.4382L40.0328 19.6036L44.3964 23.9803Z","fill","white"],["id","Vector_3","d","M19.6036 40.0328L6.1982 53.4382V43.0205H0V64H20.9795V57.8018H10.5618L23.9803 44.3964L19.6036 40.0328Z","fill","white"],["id","Vector_4","d","M20.9795 6.1982V0H0V20.9795H6.1982V10.5618L19.6036 23.9803L23.9803 19.6036L10.5618 6.1982H20.9795Z","fill","white"],["id","exit-full-screen",1,"controls__icon"],["id","fullscreen_x5F_exit"],["id","Vector","d","M49.172 54.828L58.344 64L64 58.344L54.828 49.172L64 40H40V64L49.172 54.828Z","fill","white"],["id","Vector_2","d","M0 24H24V0L14.828 9.172L5.75 0.086L0.094 5.742L9.172 14.828L0 24Z","fill","white"],["id","Vector_3","d","M0 58.344L5.656 64L14.828 54.828L24 64V40H0L9.172 49.172L0 58.344Z","fill","white"],["id","Vector_4","d","M40 24H64L54.828 14.828L63.922 5.742L58.266 0.086L49.172 9.172L40 0V24Z","fill","white"],[1,"controls__button","controls__button--danger",3,"click"],["id","phone"],["id","Vector","d","M51.7097 13.2478C51.2458 12.7839 50.4959 12.7839 50.032 13.2478L1.38351 61.8963C0.919568 62.3602 0.919568 63.1101 1.38351 63.574C1.61488 63.8054 1.91864 63.9217 2.2224 63.9217C2.52615 63.9217 2.82991 63.8054 3.06129 63.574L51.7097 14.9256C52.1737 14.4628 52.1737 13.7117 51.7097 13.2478Z","fill","white"],["id","Vector_2","d","M16.9605 42.9635L26.1159 33.8081L21.3365 29.0287C18.91 26.6022 18.6869 24.3679 20.5878 21.5629C20.8535 21.1951 22.5444 19.6941 23.992 18.4839C24.9151 17.9333 25.5487 17.1181 25.8264 16.1155C26.1954 14.783 25.9225 13.2156 25.0516 11.6885C24.8463 11.3373 19.9625 3.06229 15.4583 0.680892C14.6171 0.235937 13.6714 0.0010004 12.721 0.0010004C11.1571 0.0010004 9.68576 0.610886 8.58109 1.71556L5.57082 4.72702C-3.21082 13.5098 -1.58525 24.419 10.2719 36.2749L16.9605 42.9635Z","fill","white"],["id","Vector_3","d","M63.313 48.5357C60.9304 44.0328 52.6566 39.1478 52.2923 38.9342C51.2304 38.329 50.1209 38.0099 49.0839 38.0099C47.5402 38.0099 46.2753 38.717 45.51 40.0033C44.2986 41.452 42.7964 43.1429 42.4345 43.4051C39.6129 45.3154 37.4071 45.1007 34.9652 42.6588L31.148 38.8416L21.9926 47.997L27.7189 53.7233C34.5356 60.5412 41.0367 63.9976 47.0371 63.9976C47.0383 63.9976 47.0383 63.9976 47.0383 63.9976C51.4534 63.9976 55.5672 62.1217 59.2669 58.4232L62.2771 55.413C64.1068 53.5845 64.5233 50.821 63.313 48.5357Z","fill","white"]],template:function(n,i){1&n&&(xe(0,"div",0),xe(1,"div",1),xe(2,"button",2),Kt("click",function(){return i.onToggleCamera()}),xe(3,"div",3),ri(),xe(4,"svg",4),xe(5,"g",5),xe(6,"g",6),xe(7,"g",7),ct(8,"path",8),Fe(),Fe(),Fe(),xe(9,"g",9),xe(10,"g",6),xe(11,"g",7),ct(12,"path",10),Fe(),Fe(),xe(13,"g",11),xe(14,"g",12),ct(15,"path",13),Fe(),Fe(),Fe(),Fe(),Fe(),$i(),xe(16,"p"),Mn(17,"Camera"),Fe(),Fe(),Fe(),xe(18,"div",1),xe(19,"button",2),Kt("click",function(){return i.onToggleMicrophone()}),xe(20,"div",3),ri(),xe(21,"svg",4),xe(22,"g",14),xe(23,"g",15),ct(24,"path",16),ct(25,"path",17),Fe(),Fe(),xe(26,"g",18),ct(27,"path",19),Fe(),Fe(),Fe(),$i(),xe(28,"p"),Mn(29,"Mic"),Fe(),Fe(),Fe(),xe(30,"div",1),xe(31,"button",2),Kt("click",function(){return i.onToggleFullScreen()}),xe(32,"div",3),ri(),xe(33,"svg",4),xe(34,"g",20),xe(35,"g",6),xe(36,"g",7),xe(37,"g",11),ct(38,"path",21),ct(39,"path",22),ct(40,"path",23),ct(41,"path",24),Fe(),Fe(),Fe(),Fe(),xe(42,"g",25),xe(43,"g",6),xe(44,"g",26),xe(45,"g",7),ct(46,"path",27),ct(47,"path",28),ct(48,"path",29),ct(49,"path",30),Fe(),Fe(),Fe(),Fe(),Fe(),Fe(),$i(),xe(50,"p"),Mn(51),Fe(),Fe(),Fe(),xe(52,"div",1),xe(53,"button",31),Kt("click",function(){return i.onEndCall()}),xe(54,"div",3),ri(),xe(55,"svg",4),xe(56,"g",32),xe(57,"g",6),ct(58,"path",33),ct(59,"path",34),ct(60,"path",35),Fe(),Fe(),Fe(),Fe(),$i(),xe(61,"p"),Mn(62,"End"),Fe(),Fe(),Fe(),Fe()),2&n&&(yt(2),Ht("controls__button--active",i.cameraEnabled),yt(3),Ht("controls__icon--shown",i.cameraEnabled),yt(4),Ht("controls__icon--shown",!i.cameraEnabled),yt(10),Ht("controls__button--active",i.microphoneEnabled),yt(3),Ht("controls__icon--shown",i.microphoneEnabled),yt(4),Ht("controls__icon--shown",!i.microphoneEnabled),yt(5),Ht("controls__button--active",i.fullScreenEnabled),yt(3),Ht("controls__icon--shown",!i.fullScreenEnabled),yt(8),Ht("controls__icon--shown",i.fullScreenEnabled),yt(9),Oo(i.fullScreenEnabled?"Exit fullscreen":"Fullscreen"))},styles:["[_nghost-%COMP%]{transition:.3s}.controls[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);bottom:0;display:flex;justify-content:center;padding:15px 0;position:absolute;left:0;width:100%}.controls__item[_ngcontent-%COMP%]{margin:0 5px;text-align:center}.controls__button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer}.controls__button[_ngcontent-%COMP%]:hover   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#101316}.controls__button--active[_ngcontent-%COMP%]   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#0b73c9}.controls__button--active[_ngcontent-%COMP%]:hover   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#158ef2}.controls__button--danger[_ngcontent-%COMP%]   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#d73b3d}.controls__button--danger[_ngcontent-%COMP%]:hover   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#e06567}.controls__button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;margin:8px 0 0}.controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#313a42;border-radius:50%;box-shadow:0 3px 8px #00000080;margin:auto;position:relative;height:60px;transition:.3s;width:60px}.controls__icon-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.controls__icon[_ngcontent-%COMP%]{opacity:0;transition:.3s}.controls__icon--shown[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0}),r})(),fj=(()=>{class r{constructor(n,i){this.renderer=n,this.el=i,this.subscription=new v,this.delay=5e3}onEnter(){this.subscription.unsubscribe(),this.setStyle(1)}onLeave(){this.hide()}ngOnInit(){this.hide()}hide(){this.subscription.unsubscribe(),this.subscription=uA(this.delay).pipe(ao(1)).subscribe(()=>this.setStyle(0))}setStyle(n){this.renderer.setStyle(this.el.nativeElement,"opacity",n)}}return r.\u0275fac=function(n){return new(n||r)(Ie(fi),Ie(Dt))},r.\u0275dir=Je({type:r,selectors:[["","ngxToggle",""]],hostBindings:function(n,i){1&n&&Kt("mouseenter",function(){return i.onEnter()})("mouseleave",function(){return i.onLeave()})}}),r})();function hj(r,t){if(1&r&&ct(0,"ngx-spinner",14),2&r){const n=_n().ngIf;Tt("text",n.statusText)("connected",n.connected)("ended",n.ended)}}function pj(r,t){1&r&&ct(0,"ngx-timer",15),2&r&&Tt("started",_n().ngIf.started)}function gj(r,t){if(1&r&&(ct(0,"div",16),ul(1,"async")),2&r){const n=t.$implicit;Ht("hidden",!1===ll(1,3,_n(2).remoteStreamVideoToggle$)),Tt("id",n)}}function mj(r,t){if(1&r){const n=Oh();ri(),$i(),xe(0,"ngx-controls",17),Kt("toggleCamera",function(o){return cs(n),_n(2).onToggleCamera(o)})("toggleMicrophone",function(o){return cs(n),_n(2).onToggleMicrophone(o)})("toggleFullScreen",function(o){return cs(n),_n(2).onToggleFullScreen(o)})("endCall",function(){return cs(n),_n(2).onEndCall()}),Fe()}if(2&r){const n=_n(2);Tt("cameraEnabled",n.cameraEnabled)("microphoneEnabled",n.microphoneEnabled)("fullScreenEnabled",n.fullScreenEnabled)}}function _j(r,t){if(1&r&&(xe(0,"div",1),mn(1,hj,1,3,"ngx-spinner",2),mn(2,pj,1,1,"ngx-timer",3),ct(3,"div",4),mn(4,gj,2,5,"div",5),xe(5,"div",6),ri(),xe(6,"svg",7),xe(7,"g",8),ct(8,"path",9),ct(9,"path",10),Fe(),xe(10,"defs"),xe(11,"clipPath",11),ct(12,"rect",12),Fe(),Fe(),Fe(),Fe(),mn(13,mj,1,3,"ngx-controls",13),Fe()),2&r){const n=t.ngIf,i=_n();yt(1),Tt("ngIf",n.loading),yt(1),Tt("ngIf",n.started),yt(1),Tt("id",i.localContainerId)("hidden",!i.cameraEnabled),yt(1),Tt("ngForOf",i.remoteCalls),yt(9),Tt("ngIf",n.connected&&!n.ended)}}let yj=(()=>{class r{constructor(n){this.webRtcService=n,this.debug=!1,this.callEnd=new jt,this.streamState$=this.webRtcService.streamState$,this.remoteStreamVideoToggle$=this.webRtcService.remoteStreamVideoToggle$}ngOnInit(){this.webRtcService.init(this.uid,this.channel,this.debug).pipe(ao(1)).subscribe(()=>this.callEnd.emit())}ngOnDestroy(){this.webRtcService.deinit()}get localContainerId(){return this.webRtcService.localContainerId}get remoteCalls(){return this.webRtcService.remoteCalls}get cameraEnabled(){return this.webRtcService.isVideoEnabled()}get microphoneEnabled(){return this.webRtcService.isAudioEnabled()}get fullScreenEnabled(){return!!document.fullscreenElement}onToggleCamera(n){this.webRtcService.toggleVideo(n)}onToggleMicrophone(n){this.webRtcService.toggleAudio(n)}onToggleFullScreen(n){this.webRtcService.toggleFullScreen(n)}onEndCall(){this.webRtcService.endCall()}}return r.\u0275fac=function(n){return new(n||r)(Ie(cj))},r.\u0275cmp=An({type:r,selectors:[["ngx-webrtc"]],inputs:{uid:"uid",channel:"channel",debug:"debug"},outputs:{callEnd:"callEnd"},decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[3,"text","connected","ended",4,"ngIf"],[3,"started",4,"ngIf"],[1,"container__local",3,"id","hidden"],["class","container__remote",3,"id","hidden",4,"ngFor","ngForOf"],[1,"container__user-icon"],["width","64","height","64","viewBox","0 0 64 64","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","user","clip-path","url(#clip0)"],["id","Vector","d","M31.5439 30.829C35.7793 30.829 39.4468 29.3099 42.4434 26.3129C45.4399 23.3163 46.959 19.6498 46.959 15.414C46.959 11.1796 45.4399 7.51267 42.4429 4.51512C39.4458 1.51904 35.7788 0 31.5439 0C27.3081 0 23.6416 1.51904 20.645 4.51561C17.6484 7.51218 16.1289 11.1792 16.1289 15.414C16.1289 19.6498 17.6484 23.3168 20.6455 26.3134C23.6426 29.3095 27.3096 30.829 31.5439 30.829V30.829Z","fill","#0B73C9"],["id","Vector_2","d","M58.5161 49.2127C58.4297 47.9656 58.2549 46.6053 57.9976 45.1688C57.7378 43.7215 57.4033 42.3533 57.0029 41.1029C56.5894 39.8104 56.0269 38.534 55.3315 37.3109C54.6099 36.0414 53.7622 34.9359 52.811 34.0262C51.8164 33.0746 50.5986 32.3094 49.1904 31.7513C47.7871 31.1962 46.2319 30.9149 44.5684 30.9149C43.915 30.9149 43.2832 31.183 42.063 31.9774C41.312 32.4672 40.4336 33.0336 39.4531 33.66C38.6147 34.1942 37.479 34.6947 36.0762 35.1478C34.7075 35.5907 33.3179 35.8153 31.9463 35.8153C30.5747 35.8153 29.1855 35.5907 27.8154 35.1478C26.4141 34.6952 25.2783 34.1947 24.4409 33.6605C23.4697 33.0399 22.5908 32.4735 21.8286 31.9769C20.6099 31.1825 19.9775 30.9144 19.3242 30.9144C17.6602 30.9144 16.1055 31.1962 14.7026 31.7518C13.2954 32.309 12.0771 33.0741 11.0815 34.0267C10.1309 34.9369 9.28271 36.0419 8.56201 37.3109C7.86719 38.534 7.30469 39.8099 6.89062 41.1034C6.49072 42.3538 6.15625 43.7215 5.89648 45.1688C5.63916 46.6033 5.46436 47.9642 5.37793 49.2142C5.29297 50.4388 5.25 51.7098 5.25 52.9934C5.25 56.3343 6.31201 59.0388 8.40625 61.0335C10.4746 63.0017 13.2114 64.0002 16.5396 64.0002H47.356C50.6841 64.0002 53.4199 63.0022 55.4888 61.0335C57.5835 59.0403 58.6455 56.3352 58.6455 52.993C58.645 51.7034 58.6016 50.4314 58.5161 49.2127V49.2127Z","fill","#0B73C9"],["id","clip0"],["width","64","height","64","fill","#0B73C9"],["ngxToggle","",3,"cameraEnabled","microphoneEnabled","fullScreenEnabled","toggleCamera","toggleMicrophone","toggleFullScreen","endCall",4,"ngIf"],[3,"text","connected","ended"],[3,"started"],[1,"container__remote",3,"id"],["ngxToggle","",3,"cameraEnabled","microphoneEnabled","fullScreenEnabled","toggleCamera","toggleMicrophone","toggleFullScreen","endCall"]],template:function(n,i){1&n&&(mn(0,_j,14,6,"div",0),ul(1,"async")),2&n&&Tt("ngIf",ll(1,1,i.streamState$))},directives:[Vl,kb,uj,lj,dj,fj],pipes:[Yp],styles:["ngx-timer[_ngcontent-%COMP%]{display:block;padding-top:25px}.container[_ngcontent-%COMP%]{background-color:#232a30;height:100vh}.container__local[_ngcontent-%COMP%]{border-radius:5px;height:20vh;overflow:hidden;position:fixed;right:1rem;top:1rem;width:20vw;z-index:1}.container__local[_ngcontent-%COMP%]:not(:empty){box-shadow:0 3px 8px #00000080}.container__remote[_ngcontent-%COMP%]{background-color:#232a30;height:100vh;left:0;position:fixed;top:0;width:100vw}.container__remote.hidden[_ngcontent-%COMP%]{display:none}.container__remote.hidden[_ngcontent-%COMP%] + .container__user-icon[_ngcontent-%COMP%]{display:block}.container__user-icon[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);border-radius:50%;box-shadow:0 3px 8px #00000080;display:none;left:50%;padding:20px;position:absolute;top:50%;transform:translate(-50%,-50%)}@media screen and (max-width: 769px){ngx-controls[_ngcontent-%COMP%]{opacity:1!important}}"],changeDetection:0}),r})();const vj=[{path:"",component:ij},{path:"conference",component:(()=>{class r{constructor(n,i){this.route=n,this.router=i,this.uid=String(Math.floor(100*Math.random()))}ngOnInit(){this.channel=this.route.snapshot.queryParams.channelId||"test-channel"}onCallEnd(){this.router.navigateByUrl("/")}}return r.\u0275fac=function(n){return new(n||r)(Ie(Ko),Ie(Ln))},r.\u0275cmp=An({type:r,selectors:[["app-conference"]],decls:1,vars:3,consts:[[3,"channel","debug","uid","callEnd"]],template:function(n,i){1&n&&(xe(0,"ngx-webrtc",0),Kt("callEnd",function(){return i.onCallEnd()}),Fe()),2&n&&Tt("channel",i.channel)("debug",!0)("uid",i.uid)},directives:[yj],styles:[""],changeDetection:0}),r})()},{path:"**",redirectTo:""}];let Ej=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Bt({type:r,bootstrap:[rj]}),r.\u0275inj=xt({providers:[],imports:[[ag,i6,nj.forRoot(cA_configs),rA,N8.forRoot(vj),Y9,Z9]]}),r})();(function(){if(B0)throw new Error("Cannot enable prod mode after platform setup.");U0=!1})(),Sx().bootstrapModule(Ej).catch(r=>console.error(r))}},le=>{le(le.s=344)}]);