(self.webpackChunkngx_webrtc=self.webpackChunkngx_webrtc||[]).push([[179],{255:ue=>{function ie(V){return Promise.resolve().then(()=>{var D=new Error("Cannot find module '"+V+"'");throw D.code="MODULE_NOT_FOUND",D})}ie.keys=()=>[],ie.resolve=ie,ie.id=255,ue.exports=ie},507:module=>{var ie;window,ie=function(){return function(ue){var ie={};function V(D){if(ie[D])return ie[D].exports;var w=ie[D]={i:D,l:!1,exports:{}};return ue[D].call(w.exports,w,w.exports,V),w.l=!0,w.exports}return V.m=ue,V.c=ie,V.d=function(D,w,O){V.o(D,w)||Object.defineProperty(D,w,{enumerable:!0,get:O})},V.r=function(D){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})},V.t=function(D,w){if(1&w&&(D=V(D)),8&w||4&w&&"object"==typeof D&&D&&D.__esModule)return D;var O=Object.create(null);if(V.r(O),Object.defineProperty(O,"default",{enumerable:!0,value:D}),2&w&&"string"!=typeof D)for(var T in D)V.d(O,T,function(N){return D[N]}.bind(null,T));return O},V.n=function(D){var w=D&&D.__esModule?function(){return D.default}:function(){return D};return V.d(w,"a",w),w},V.o=function(D,w){return Object.prototype.hasOwnProperty.call(D,w)},V.p="",V(V.s=96)}([function(ue,ie,V){"use strict";V.r(ie);var D,w=V(11),O=V.n(w),T=function(){var B=new Date;return B.toTimeString().split(" ")[0]+":"+B.getMilliseconds()},N=V(14),_=V(2),R=V(1),f=V(48),m=V.n(f),v=V(49),x=V.n(v),U=new Array(32).fill(void 0);function I(B){return U[B]}U.push(void 0,null,!0,!1);var E=U.length;function j(B){var K,H=I(B);return(K=B)<36||(U[K]=E,E=K),H}var P=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});P.decode();var G=null;function M(){return null!==G&&G.buffer===D.memory.buffer||(G=new Uint8Array(D.memory.buffer)),G}function Y(B,H){return P.decode(M().subarray(B,B+H))}function oe(B){E===U.length&&U.push(U.length+1);var H=E;return E=U[H],U[H]=B,H}var Q=0,te=new TextEncoder("utf-8"),z="function"==typeof te.encodeInto?function(B,H){return te.encodeInto(B,H)}:function(B,H){var K=te.encode(B);return H.set(K),{read:B.length,written:K.length}},b=null;function u(){return null!==b&&b.buffer===D.memory.buffer||(b=new Int32Array(D.memory.buffer)),b}var $,W=function(){function B(){m()(this,B)}return x()(B,[{key:"free",value:function(){var H=this.ptr;this.ptr=0,D.__wbg_signmanager_free(H)}},{key:"get_digest",value:function(H){return j(D.signmanager_get_digest(this.ptr,oe(H)))}}],[{key:"__wrap",value:function(H){var K=Object.create(B.prototype);return K.ptr=H,K}},{key:"new",value:function(){var H=D.signmanager_new();return B.__wrap(H)}}]),B}(),C=!1,l=null,p=0,S="free",L=[],ee=[],re=0;(l?Promise.resolve(l):new Promise(function(B){C||D||function H(){var K={wbg:{}};K.wbg.__wbindgen_object_drop_ref=function(pe){j(pe)},K.wbg.__wbindgen_string_new=function(pe,F){return oe(Y(pe,F))},K.wbg.__wbindgen_string_get=function(pe,F){var Ne=I(F),Ze="string"==typeof Ne?Ne:void 0,Ge=null==Ze?0:function(Je,ce,g){if(void 0===g){var ne=te.encode(Je),de=ce(ne.length);return M().subarray(de,de+ne.length).set(ne),Q=ne.length,de}for(var me=Je.length,ye=(de=ce(me),M()),X=0;X<me;X++){var _e=Je.charCodeAt(X);if(_e>127)break;ye[de+X]=_e}if(X!==me){0!==X&&(Je=Je.slice(X)),de=g(de,me,me=X+3*Je.length);var Ee=M().subarray(de+X,de+me);X+=z(Je,Ee).written}return Q=X,de}(Ze,D.__wbindgen_malloc,D.__wbindgen_realloc),qe=Q;u()[pe/4+1]=qe,u()[pe/4+0]=Ge},K.wbg.__wbindgen_throw=function(pe,F){throw new Error(Y(pe,F))};for(var ve=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),function(pe){return pe.charCodeAt(0)}),le=new Uint8Array([177,156,215,89,13,111,230,1]),ge=new Uint8Array(ve.length),Ce=new Uint8Array(256),Oe=0;Oe<256;Oe++)Ce[Oe]=Oe;var De=0;for(Oe=0;Oe<256;Oe++){var Re=[Ce[De=(De+Ce[Oe]+le[Oe%le.length])%256],Ce[Oe]];Ce[Oe]=Re[0],Ce[De]=Re[1]}Oe=0,De=0;for(var Ue=0;Ue<0+ve.length;Ue++){var h=[Ce[De=(De+Ce[Oe=(Oe+1)%256])%256],Ce[Oe]];Ce[Oe]=h[0],Ce[De]=h[1],Ue>=0&&(ge[Ue-0]=ve[Ue-0]^Ce[(Ce[Oe]+Ce[De])%256])}return C=!0,new Promise(function(pe){var F,Ne;(F=ge.buffer,Ne=K,WebAssembly.instantiate(F,Ne)).then(function(F){C=!1,D=F.instance.exports,H.__wbindgen_wasm_module=F.module,pe()})})}().then(function(){l=W.new(),B(l)})})).then(function(B){$=B});var fe=!0;setInterval(function(){Object(_.getParameter)("UPLOAD_LOG")&&se.info("console log upload")},9e5);var se=function(){var B,H,K,ve,le,ge,Ce=null,Oe=["DEBUG","INFO","WARNING","ERROR","NONE"],ke=0,Re=function(h,pe){if(Object(_.getParameter)("UPLOAD_LOG"))try{pe=Array.prototype.slice.call(pe);var F="";if(pe.forEach(function(Ne){"object"===O()(Ne)&&(Ne=JSON.stringify(Ne)),F=F+Ne+" "}),L.push({payload:F,log_level:h}),fe)return;"free"===S&&function Ne(Ze){S="uploading",setTimeout(function(){!function(h,pe,F){var Ne={};Array.isArray(h)||(h=[h]),h=h.map(function(qe){return{log_item_id:p++,log_level:qe.log_level,payload_str:qe.payload}}),Ne={timestamp:Date.now(),sdk_version:_.VERSION,process_id:Object(R.getProcessId)(),payload:JSON.stringify(h)},$?Ne.hash=$.get_digest("".concat(Ne.payload).concat(Ne.process_id).concat(Ne.timestamp)):F&&F();try{var Ze=Ce,Ge=Ce||"https://".concat(Object(_.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(N.post)(Ge,Ne,function(qe){"OK"===qe?pe&&pe():F&&F()},function(qe){F&&F()},Ze?{withCredentials:!0}:{withCredentials:!0,"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}catch(qe){F&&F()}}(Ze,function(){re=0,0!==L.length?(ee=L.splice(0,L.length<10?L.length:10),Ne(ee)):S="free"},function(){setTimeout(function(){Ne(ee)},re++<2?200:1e4)})},3e3)}(ee=L.splice(0,L.length<10?L.length:10))}catch(Ne){}};H=function(){for(var h=[0],pe=0;pe<arguments.length;pe++)h.push(arguments[pe]);B.apply(this,h)},K=function(){for(var h=[1],pe=0;pe<arguments.length;pe++)h.push(arguments[pe]);B.apply(this,h)},ve=function(){for(var h=[2],pe=0;pe<arguments.length;pe++)h.push(arguments[pe]);B.apply(this,h)},le=function(){for(var h=[3],pe=0;pe<arguments.length;pe++)h.push(arguments[pe]);B.apply(this,h)};var Ue={};return ge=function(h){Ue[h]||(ve.apply(void 0,arguments),Ue[h]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,stopWaitJoin:function(){fe=!1},enableLogUpload:function(){Object(_.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(_.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(h){Ce=h?"https://".concat(h,"/ls/?h=").concat(Object(_.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(_.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(h){h>4?h=4:h<0&&(h=0),ke=h},log:B=function(){var h=arguments[0],pe=arguments;if(pe[0]=T()+" Agora-SDK ["+(Oe[h]||"DEFAULT")+"]:",Re(h,pe),!(h<ke))switch(h){case 0:case 1:console.log.apply(console,pe);break;case 2:console.warn.apply(console,pe);break;case 3:console.log.apply(console,pe);break;default:return void console.log.apply(console,pe)}},debug:H,info:K,warning:ve,deprecate:ge,error:le}}();ie.default=se},function(ue,ie,V){"use strict";V.r(ie),V.d(ie,"report",function(){return b}),V.d(ie,"SESSION_INIT",function(){return j}),V.d(ie,"JOIN_CHOOSE_SERVER",function(){return P}),V.d(ie,"JOIN_GATEWAY",function(){return G}),V.d(ie,"PUBLISH",function(){return M}),V.d(ie,"SUBSCRIBE",function(){return Y}),V.d(ie,"getProcessId",function(){return z});var D=V(46),w=V.n(D),O=V(7),T=V.n(O),N=V(2),_=V(0),R=V(14),f=V(28),m=V.n(f),v=V(47);function x(u,W){var C=Object.keys(u);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(u);W&&(l=l.filter(function($){return Object.getOwnPropertyDescriptor(u,$).enumerable})),C.push.apply(C,l)}return C}function U(u){for(var W=1;W<arguments.length;W++){var C=null!=arguments[W]?arguments[W]:{};W%2?x(Object(C),!0).forEach(function(l){w()(u,l,C[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(C)):x(Object(C)).forEach(function(l){Object.defineProperty(u,l,Object.getOwnPropertyDescriptor(C,l))})}return u}var I,E,j="session_init",P="join_choose_server",G="join_gateway",M="publish",Y="subscribe",oe=new(V.n(v).a),Q={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},te=null,z=function(){return te||(te="process-"+m()(),_.default.info("processId: "+te)),te},b=(E=0,(I={list:{},setProxyServer:function(u){oe.setProxy(u),I.proxyServerURL=u},getUrl:function(){return I.proxyServerURL?"https://".concat(I.proxyServerURL,"/rs/?h=").concat(Object(N.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(N.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return I.proxyServerURL?"https://".concat(I.proxyServerURL,"/rs/?h=").concat(Object(N.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(N.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(u){return I.list[u]?I.list[u].startTime:(_.default.DEBUG("[getSessionStartTime]: session ".concat(u," no exit")),0)},sessionInit:function(u,W){var C=T()({},Q);C.startTime=+new Date,C.sid=u,C.cname=W.cname,I.list[u]=C;var l=T()({},{willUploadConsoleLog:Object(N.getParameter)("UPLOAD_LOG"),areaVersion:"global"},W.extend),$=T()({},C);$.eventType=j,$.appid=W.appid,$.browser=navigator.userAgent,$.build=N.BUILD,$.lts=+new Date,$.elapse=$.lts-$.startTime,$.extend=JSON.stringify(l),$.mode=W.mode,$.process=z(),$.success=W.succ,$.version=N.VERSION,delete $.startTime,I.send({type:"Session",data:$}),I._flushInvokeReport(u)},joinChooseServer2:function(u,W,C){if(I.list[u]){I.list[u].uid||(W.uid&&(I.list[u].uid=parseInt(W.uid)),W.cid&&(I.list[u].cid=parseInt(W.cid)),W.vid&&(I.list[u].vid=parseInt(W.vid)));var l=T()({},I.list[u]);l.eventType=P;var $=W.lts;l.lts=Date.now(),l.eventElapse=l.lts-$,l.chooseServerAddr=W.csAddr,l.errorCode=W.ec,l.elapse=l.lts-l.startTime,l.success=W.succ,l.chooseServerIp=W.chooseServerIp||"",l.chooseServerAddrList=JSON.stringify(W.serverList),delete l.startTime,I.send({type:"JoinChooseServer",data:l})}},joinChooseServer:function(u,W,C){if(I.list[u]){C&&(W.uid&&(I.list[u].uid=parseInt(W.uid)),W.cid&&(I.list[u].cid=parseInt(W.cid)),W.vid&&(I.list[u].vid=parseInt(W.vid)));var l=T()({},I.list[u]);l.eventType=P;var $=W.lts;l.lts=Date.now(),l.eventElapse=l.lts-$,l.chooseServerAddr=W.csAddr,l.errorCode=W.ec,l.elapse=l.lts-l.startTime,l.success=W.succ,l.chooseServerIp=W.chooseServerIp||"",l.chooseServerAddrList=JSON.stringify(W.serverList),delete l.startTime,I.send({type:"JoinChooseServer",data:l})}},reqUserAccount:function(u,W){W.vid&&(I.list[u].vid=parseInt(W.vid));var C=T()({},I.list[u]),l=W.lts;C.eventType="req_user_account",C.lts=Date.now(),C.success=W.success,C.serverAddress=W.serverAddress,C.stringUid=W.stringUid,C.uid=W.uid,C.errorCode=W.errorCode,C.elapse=C.lts-C.startTime,C.eventElapse=C.lts-l,C.extend="string"==typeof W.extend?W.extend:JSON.stringify(W.extend),delete C.startTime,I.send({type:"ReqUserAccount",data:C})},joinGateway:function(u,W){W.vid&&(I.list[u].vid=parseInt(W.vid)),W.uid&&(I.list[u].uid=parseInt(W.uid));var C=T()({},I.list[u]),l=W.lts;C.eventType=G,C.firstSuccess=W.firstSuccess,C.lts=Date.now(),C.gatewayAddr=W.addr,C.success=W.succ,C.errorCode=W.ec,C.elapse=C.lts-C.startTime,C.eventElapse=C.lts-l,delete C.startTime,I.send({type:"JoinGateway",data:C})},publish:function(u,W){var C=T()({},I.list[u]);C.eventType=M;var l=W.lts;C.lts=Date.now(),C.eventElapse=C.lts-l,C.elapse=C.lts-C.startTime,C.success=W.succ,C.errorCode=W.ec,C.audio=W.audio,C.video=W.video,C.screenshare=W.screenshare,C.publishRequestid=W.publishRequestid,C.p2pid=W.p2pid,W.videoName&&(C.videoName=W.videoName),W.audioName&&(C.audioName=W.audioName),W.screenName&&(C.screenName=W.screenName),delete C.startTime,I.send({type:"Publish",data:C}),I._flushInvokeReport(u)},subscribe:function(u,W){var C=T()({},I.list[u]);C.eventType=Y;var l=W.lts;C.lts=Date.now(),C.eventElapse=C.lts-l,C.elapse=C.lts-C.startTime,C.errorCode=W.ec,C.success=W.succ,C.subscribeRequestid=W.subscribeRequestid,C.p2pid=W.p2pid,isFinite(W.peerid)?C.peer=W.peerid:C.peerSuid=""+W.peerid,"boolean"==typeof W.video&&(C.video=W.video),"boolean"==typeof W.audio&&(C.audio=W.audio),delete C.startTime,I.send({type:"Subscribe",data:C}),I._flushInvokeReport(u)},firstRemoteFrame:function(u,W){var C=T()({},I.list[u]);C.eventType="first_remote_frame";var l=W.lts;C.lts=Date.now(),C.eventElapse=C.lts-l,C.elapse=C.lts-C.startTime,C.width=W.width,C.height=W.height,C.success=W.succ,C.errorCode=W.ec,isFinite(W.peerid)?C.peer=W.peerid:C.peerSuid=""+W.peerid,delete C.startTime,I.send({type:"FirstFrame",data:C})},firstVideoReceived:function(u,W){var C=T()({},I.list[u]);C.eventType="first_video_received",C.lts=Date.now(),C.peer=W.peerid,C.uid=W.uid,C.elapse=W.elapse,C.subscribeElapse=W.subscribeElapse,C.subscribeRequestid=W.subscribeRequestid,C.p2pid=W.p2pid,I.send({type:"FirstVideoReceived",data:C})},firstAudioReceived:function(u,W){var C=T()({},I.list[u]);C.eventType="first_audio_received",C.lts=Date.now(),C.peer=W.peerid,C.uid=W.uid,C.elapse=W.elapse,C.subscribeElapse=W.subscribeElapse,C.subscribeRequestid=W.subscribeRequestid,C.p2pid=W.p2pid,I.send({type:"FirstAudioReceived",data:C})},firstVideoDecode:function(u,W){var C=T()({},I.list[u]);C.eventType="first_video_decode",C.lts=Date.now(),C.peer=W.peerid,C.uid=W.uid,C.elapse=W.elapse,C.videowidth=W.width,C.videoheight=W.height,C.subscribeElapse=W.subscribeElapse,C.subscribeRequestid=W.subscribeRequestid,C.p2pid=W.p2pid,I.send({type:"FirstVideoDecode",data:C})},firstAudioDecode:function(u,W){var C=T()({},I.list[u]);C.eventType="first_audio_decode",C.lts=Date.now(),C.uid=W.uid,C.peer=W.peerid,C.elapse=W.elapse,C.subscribeElapse=W.subscribeElapse,C.subscribeRequestid=W.subscribeRequestid,C.p2pid=W.p2pid,I.send({type:"FirstAudioDecode",data:C})},onAddAudioStream:function(u,W){var C=T()({},I.list[u]);C.eventType="on_add_audio_stream",C.lts=Date.now(),C.uid=W.uid,C.peer=W.peerid,I.send({type:"OnAddAudioStream",data:C})},onAddVideoStream:function(u,W){var C=T()({},I.list[u]);C.eventType="on_add_video_stream",C.lts=Date.now(),C.uid=W.uid,C.peer=W.peerid,I.send({type:"OnAddVideoStream",data:C})},onUpdateStream:function(u,W){var C=T()({},I.list[u]);C.eventType="on_update_stream",C.lts=Date.now(),C.uid=W.uid,C.peer=W.peerid,C.audio=W.audio,C.video=W.video,I.send({type:"OnUpdateStream",data:C})},onRemoveStream:function(u,W){var C=T()({},I.list[u]);C.eventType="on_remove_stream",C.lts=Date.now(),C.uid=W.uid,C.peer=W.peerid,I.send({type:"OnRemoveStream",data:C})},streamSwitch:function(u,W){var C=T()({},I.list[u]);C.eventType="stream_switch",C.lts=Date.now(),C.isDual=W.isdual,C.elapse=C.lts-C.startTime,C.success=C.succ,delete C.startTime,I.send({type:"StreamSwitch",data:C})},audioSendingStopped:function(u,W){var C=T()({},I.list[u]);C.eventType="audio_sending_stopped",C.lts=Date.now(),C.elapse=C.lts-C.startTime,C.reason=W.reason,C.success=W.succ,delete C.startTime,I.send({type:"AudioSendingStopped",data:C})},videoSendingStopped:function(u,W){var C=T()({},I.list[u]);C.eventType="video_sending_stopped",C.lts=Date.now(),C.elapse=C.lts-C.startTime,C.reson=W.reason,C.success=W.succ,delete C.startTime,I.send({type:"VideoSendingStopped",data:C})},requestProxyAppCenter:function(u,W){var C=T()({},I.list[u]),l=W.lts;C.eventType="request_proxy_appcenter",C.lts=Date.now(),C.eventElapse=C.lts-l,C.elapse=C.lts-C.startTime,C.extend=W.extend+"",C.APAddr=W.APAddr,C.workerManagerList=W.workerManagerList,C.response=W.response,C.errorCode=W.ec,C.success=W.succ,delete C.startTime,I.send({type:"RequestProxyAppCenter",data:C})},requestProxyWorkerManager:function(u,W){var C=T()({},I.list[u]),l=W.lts;C.eventType="request_proxy_worker_manager",C.lts=Date.now(),C.eventElapse=C.lts-l,C.elapse=C.lts-C.startTime,C.extend=W.extend,C.workerManagerAddr=W.workerManagerAddr,C.response=W.response,C.errorCode=W.ec,C.success=W.succ,delete C.startTime,I.send({type:"RequestProxyWorkerManager",data:C})},requestWorkerEvent:function(u,W){var C=T()({},I.list[u]),l=C.startTime,$=Date.now();delete(C=U({},C,{},W,{elapse:$-l,lts:$,productType:"WebRTC"})).startTime,I.send({type:"WorkerEvent",data:C})},requestApWorkerEvent:function(u,W){var C=T()({},I.list[u]),l=C.startTime,$=Date.now();C=U({},C,{},W,{elapse:$-l,lts:$}),I.send({type:"APWorkerEvent",data:C})},sendCustomReportMessage:function(u,W,C){var l={type:"UserAnalytics",data:U({sid:u},W)},$=I.getUrl(),p=!!I.proxyServerURL;Object(R.post)($,l,function(S){C&&C()},function(S){var L=I.getBackUrl();Object(R.post)(L,l,function(ee){C&&C()},function(ee){C&&C("Failed")},p?{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},p?{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(N.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},joinChannelTimeOut:function(u){I.send({type:"JoinChannelTimeout",data:U({},u)})},peerPublishStatus:function(u){I.send({type:"PeerPublishStatus",data:U({},u)})},joinWebProxyAP:function(u){I.send({type:"JoinWebProxyAP",data:U({},u)})},webSocketQuit:function(u){I.send({type:"WebSocketQuit",data:U({},u)})}}).reportApiInvoke=function(u,W){var C=W.tag,l=W.name,$=W.getStates,p=W.options,S=W.timeout,L=void 0===S?6e4:S,ee=W.callback,re=W.reportResult,fe=void 0===re||re,se=Date.now(),B=0,H=E++,K=function(){return U({tag:C,invokeId:H,sid:u,name:l,apiInvokeTime:se,options:p},$&&{states:(ge=$(),Object.keys(ge).reduce(function(Ce,Oe){var ke=Ce;return null!=ge[Oe]&&(ke[Oe]=ge[Oe]),ke},{}))});var ge},ve=!!Object(N.getParameter)("SHOW_REPORT_INVOKER_LOG");ve&&_.default.info("".concat(l," start"));var le=setTimeout(function(){b._sendApiInvoke(U({},K(),{error:"API_INVOKE_TIMEOUT",success:!1}))},L);return function(ge,Ce){if(clearTimeout(le),++B>1&&(ge="EXECUTOR_INVOKE_".concat(B)),ge)return b._sendApiInvoke(U({},K(),{success:!1,error:ge},$&&{states:$()})),ve&&_.default.info("".concat(l," onFailure"),ge),ee&&ee(ge);b._sendApiInvoke(U({},K(),{success:!0},fe&&{result:Ce},{},$&&{states:$()})),ve&&_.default.info("".concat(l," onSuccess")),ee&&ee(null,Ce)}},I._cachedItems=[],I._cacheInvokeReport=function(u){u.lts||(u.lts=Date.now()),I._cachedItems.push(u),I._cachedItems.length>50&&I._cachedItems.shift()},I._flushInvokeReport=function(u){if(I._cachedItems.length){var W=I._cachedItems;I._cachedItems=[],_.default.debug("Flush cached event reporting:",W.length),W.forEach(function(C,l){C.sid=u,setTimeout(function(){I._sendApiInvoke(C)},5e3+500*l)})}},I._sendApiInvoke=function(u){var W=u.tag,C=u.invokeId,l=u.sid,$=u.name,p=u.result,S=u.states,L=u.options,ee=u.error,re=u.success,fe=u.apiInvokeTime,se=u.lts,B=Object(N.getParameter)("NOT_REPORT_EVENT");if(!(W&&B instanceof Array&&-1!==B.indexOf(W)))if(I.list[l]){var H=I.list[l],K=H.startTime,ve=H.cname,le=H.uid,ge=H.cid,Ce=(se=se||Date.now())-K,Oe=se-fe,ke="";if(L)try{ke=JSON.stringify(L)}catch(Re){ke=L.toString()}var De=U({invokeId:C,sid:l,cname:ve,cid:ge,lts:se,uid:le,success:re,elapse:Ce,apiName:$,execElapse:Oe},void 0!==L&&{options:ke},{},void 0!==S&&{execStates:JSON.stringify(S)},{},void 0!==ee&&{errorCode:JSON.stringify(ee)},{},void 0!==p&&{execResult:JSON.stringify(p)});I.send({type:"ApiInvoke",data:De})}else I._cacheInvokeReport(arguments[0])},I.sendCache=[],I.sendTimer=null,I.send=function(u){if(u.data){var W=u.data;I._lastLts&&I._lastLts>=W.lts&&(W.lts=I._lastLts+1),I._lastLts=W.lts}if(I.sendCache.push(u),null===I.sendTimer)return function C(){I.sendTimer=setTimeout(function(){if(0!==I.sendCache.length){var l=I.sendCache.splice(0,I.sendCache.length<10?I.sendCache.length:10);return oe.sendReportList(l,I.list[l[0].data.sid].vid),C()}I.sendTimer=null},Object(N.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},I)},function(ue,ie,V){"use strict";Object.defineProperty(ie,"__esModule",{value:!0}),ie.BUILD="v3.6.9-0-g3107120",ie.VERSION="3.6.9";var D=0*Date.now()+11499+86604+5615+6547+846;ie.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},ie.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var w={AREA_SETTING:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"web-2.statscollector.sd-rtn.com",EVENT_REPORT_BACKUP_DOMAIN:"web-3.statscollector.sd-rtn.com",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,LIVE_STREAMING_TIMEOUT:12e4,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:D.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",NGINX:"webrtc-cloud-proxy.sd-rtn.com",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:"",CHOOSE_SERVER_FRAGEMENT_LENGTH:4,PLAN:"plan-b"};ie.setParameter=function(O,T){return void 0!==w[O]&&(w[O]=T,!0)},ie.getParameter=function(O){return void 0!==w[O]?w[O]:null}},function(ue,ie,V){"use strict";V.r(ie),V.d(ie,"checkValidObject",function(){return _}),V.d(ie,"checkValidString",function(){return R}),V.d(ie,"checkValidNumber",function(){return f}),V.d(ie,"checkValidArray",function(){return m}),V.d(ie,"checkValidFloatNumber",function(){return v}),V.d(ie,"checkValidBoolean",function(){return x}),V.d(ie,"checkValidEnum",function(){return N}),V.d(ie,"checkValidUID",function(){return U}),V.d(ie,"isValidString",function(){return I}),V.d(ie,"isValidNumber",function(){return E}),V.d(ie,"isValidBoolean",function(){return P}),V.d(ie,"isASCII",function(){return Y}),V.d(ie,"isInteger",function(){return oe}),V.d(ie,"isNumber",function(){return Q}),V.d(ie,"isString",function(){return te}),V.d(ie,"isArray",function(){return z}),V.d(ie,"isEmpty",function(){return b}),V.d(ie,"isValidToken",function(){return G}),V.d(ie,"isValidChannelName",function(){return M});var D=V(11),w=V.n(D),O=V(10),T=V(0),N=function(u,W,C){for(var l=0;l<C.length;l++)if(u===C[l])return!0;throw new Error("".concat(W," can only be set as ").concat(JSON.stringify(C)))},_=function(u,W){if(!u)throw new Error("Invalid param: ".concat(W||"param"," cannot be empty"));if("object"!==w()(u))throw new Error("".concat(W||"This paramter"," is of the object type"));return!0},R=function(u,W,C,l,$){if(b(C)&&(C=1),l=l||255,b($)&&($=!0),b(u))throw new Error("".concat(W||"param"," cannot be empty"));if(!I(u,C,l,$))throw new Error("Invalid ".concat(W||"string param",": Length of the string: [").concat(C,",").concat(l,"].").concat($?" ASCII characters only.":""))},f=function(u,W,C,l){if(b(C)&&(C=1),l=l||1e4,b(u))throw new Error("".concat(W||"param"," cannot be empty"));if(!E(u,C,l))throw new Error("Invalid ".concat(W||"number param",": The value range is [").concat(C,",").concat(l,"]. integer only"))},m=function(u,W){if(!Array.isArray(u))throw new Error("".concat(W," should be an array"))},v=function(u,W,C,l){if(null==u)throw new Error("".concat(W||"param"," cannot be null"));if(b(C)&&(C=0),l=l||1e4,b(u))throw new Error("".concat(W||"param"," cannot be empty"));if(!j(u,C,l))throw new Error("Invalid ".concat(W||"number param",": The value range is [").concat(C,",").concat(l,"]."))},x=function(u,W){if(b(u))throw new Error("".concat(W||"param"," cannot be empty"));if(!P(u))throw new Error("Invalid ".concat(W||"boolean param",": The value is of the boolean type."))},U=function(u){if(!Object(O.is32Uint)(u)&&!I(u,1,255))throw T.default.error("Invalid UID ".concat(u," ").concat(w()(u))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},I=function(u,W,C,l){return W||(W=0),C||(C=Number.MAX_SAFE_INTEGER),b(l)&&(l=!0),te(u)&&(!l||Y(u))&&u.length>=W&&u.length<=C},E=function(u,W,C){return oe(u)&&u>=W&&u<=C},j=function(u,W,C){return Q(u)&&u>=W&&u<=C},P=function(u){return"boolean"==typeof u},G=function(u){return I(u,1,2047)},M=function(u){return te(u)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(u)},Y=function(u){if("string"==typeof u){for(var W=0;W<u.length;W++){var C=u.charCodeAt(W);if(C<0||C>255)return!1}return!0}},oe=function(u){return"number"==typeof u&&u%1==0},Q=function(u){return"number"==typeof u},te=function(u){return"string"==typeof u},z=function(u){return u instanceof Array},b=function(u){return null==u}},function(ue,ie,V){"use strict";V.r(ie),V.d(ie,"APErrorCode",function(){return D}),V.d(ie,"GatewayErrorCode",function(){return w}),V.d(ie,"StringUidErrorCode",function(){return O}),V.d(ie,"JOIN_GS_TRYNEXT_LIST",function(){return T}),V.d(ie,"JOIN_CS_RETRY_LIST",function(){return N}),V.d(ie,"JOIN_PROXY_RETRY_LIST",function(){return _}),V.d(ie,"INJECT_STREAM_STATUS",function(){return R}),V.d(ie,"WEBSOCKET_CLOSE_REASON",function(){return f});var D={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},w={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",2028:"ILLEGAL_AES_PASSWORD",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},O={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},T=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],N=["NO_SERVICE_AVAILABLE"],_=["NO_SERVICE_AVAILABLE","REQUEST_PROXY_SERVER_FAILED","REQUEST_PROXY_SERVER_TIME_OUT"],R={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10},f={WS_DISCONNECT:"WS_DISCONNECT"};ie.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(ue,ie,V){"use strict";V.r(ie),V.d(ie,"getBrowserInfo",function(){return P}),V.d(ie,"getBrowserVersion",function(){return v}),V.d(ie,"getBrowserOS",function(){return x}),V.d(ie,"isChrome",function(){return D}),V.d(ie,"isSafari",function(){return w}),V.d(ie,"isFireFox",function(){return T}),V.d(ie,"isOpera",function(){return N}),V.d(ie,"isEdge",function(){return O}),V.d(ie,"isQQBrowser",function(){return _}),V.d(ie,"isWeChatBrowser",function(){return R}),V.d(ie,"isLegacyChrome",function(){return I}),V.d(ie,"isSupportedPC",function(){return f}),V.d(ie,"isSupportedMobile",function(){return m}),V.d(ie,"getChromeKernelVersion",function(){return j}),V.d(ie,"isChromeKernel",function(){return U});var D=function(){var G=P();return G.name&&"Chrome"===G.name},w=function(){var G=P();return G.name&&"Safari"===G.name},O=function(){var G=P();return G.name&&"Edge"===G.name},T=function(){var G=P();return G.name&&"Firefox"===G.name},N=function(){var G=P();return G.name&&"OPR"===G.name},_=function(){var G=P();return G.name&&"QQBrowser"===G.name},R=function(){var G=P();return G.name&&"MicroMessenger"===G.name},f=function(){var G=x();return"Linux"===G||"Mac OS X"===G||"Mac OS"===G||-1!==G.indexOf("Windows")},m=function(){var G=x();return"Android"===G||"iOS"===G},v=function(){return P().version},x=function(){return P().os},U=function(){return!!navigator.userAgent.match(/chrome\/[\d]+/i)};function I(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var E,j=function(){var G=navigator.userAgent.match(/chrome\/[\d]+/i);return G&&G[0]&&G[0].split("/")[1]},P=(E=function(){var G,M=navigator.userAgent,Y=M.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===Y[1]&&null!=(G=M.match(/(OPR(?=\/))\/?(\d+)/i))&&(Y=G),"Safari"===Y[1]&&null!=(G=M.match(/version\/(\d+)/i))&&(Y[2]=G[1]),~M.toLowerCase().indexOf("qqbrowser")&&null!=(G=M.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(Y=G),~M.toLowerCase().indexOf("micromessenger")&&null!=(G=M.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(Y=G),~M.toLowerCase().indexOf("edge")&&null!=(G=M.match(/(edge(?=\/))\/?(\d+)/i))&&(Y=G),~M.toLowerCase().indexOf("trident")&&null!=(G=/\brv[ :]+(\d+)/g.exec(M)||[])&&(Y=[null,"IE",G[1]]);var oe=void 0,Q=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var te in Q){var z=Q[te];if(z.r.test(navigator.userAgent)){oe=z.s;break}}return{name:Y[1],version:Y[2],os:oe}}(),function(){return E})},function(ue,ie,V){"use strict";V.d(ie,"b",function(){return D}),V.d(ie,"a",function(){return w}),V.d(ie,"c",function(){return O}),V(0);var D=function(T,N,_){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(N)>-1&&("string"==typeof _||isFinite(_)))return T[N]=""+_},w=function(T){var N={};return T.forEach(function(_){_.id&&_.type&&(-1===_.id.indexOf("send")&&-1===_.type.toLowerCase().indexOf("outbound")&&-1===_.id.indexOf("outbound_rtp")&&-1===_.id.indexOf("OutboundRTP")||("audio"===_.mediaType?(D(N,"audioSendBytes",_.bytesSent),D(N,"audioSendPackets",_.packetsSent),D(N,"audioSendPacketsLost",_.packetsLost)):(D(N,"videoSendBytes",_.bytesSent),D(N,"videoSendPackets",_.packetsSent),D(N,"videoSendPacketsLost",_.packetsLost),D(N,"videoSendFrameRate",_.googFrameRateSent),D(N,"videoSendResolutionWidth",_.googFrameWidthSent),D(N,"videoSendResolutionHeight",_.googFrameHeightSent))))}),N},O=function(T){var N={};return T.forEach(function(_){_.id&&_.type&&(-1===_.id.indexOf("recv")&&-1===_.type.toLowerCase().indexOf("inbound")&&-1===_.id.indexOf("inbound_rtp")&&-1===_.id.indexOf("inbound-rtp")&&-1===_.id.indexOf("InboundRTP")||("audio"===_.mediaType?(D(N,"audioReceiveBytes",_.bytesReceived),D(N,"audioReceivePackets",_.packetsReceived),D(N,"audioReceivePacketsLost",_.packetsLost)):(D(N,"videoReceiveBytes",_.bytesReceived),D(N,"videoReceivePacketsLost",_.packetsLost),D(N,"videoReceivePackets",_.packetsReceived),D(N,"videoReceiveFrameRate",_.googFrameRateReceived),D(N,"videoReceiveDecodeFrameRate",_.googFrameRateDecoded),D(N,"videoReceiveResolutionWidth",_.googFrameWidthReceived),D(N,"videoReceiveResolutionHeight",_.googFrameHeightReceived))))}),N}},function(ue,ie){function V(){return ue.exports=V=Object.assign||function(D){for(var w=1;w<arguments.length;w++){var O=arguments[w];for(var T in O)Object.prototype.hasOwnProperty.call(O,T)&&(D[T]=O[T])}return D},V.apply(this,arguments)}ue.exports=V},function(ue,ie,V){"use strict";V.d(ie,"b",function(){return w}),V.d(ie,"e",function(){return T}),V.d(ie,"a",function(){return N}),V.d(ie,"d",function(){return _}),V.d(ie,"c",function(){return R});var D=V(0),w=function(){var f={dispatcher:{}};return f.dispatcher.eventListeners={},f.addEventListener=function(m,v){void 0===f.dispatcher.eventListeners[m]&&(f.dispatcher.eventListeners[m]=[]),f.dispatcher.eventListeners[m].push(v)},f.hasListeners=function(m){return!(!f.dispatcher.eventListeners[m]||!f.dispatcher.eventListeners[m].length)},f.on=f.addEventListener,f.removeEventListener=function(m,v){var x;f.dispatcher.eventListeners[m]&&-1!==(x=f.dispatcher.eventListeners[m].indexOf(v))&&f.dispatcher.eventListeners[m].splice(x,1)},f.dispatchEvent=function(m){var v;for(v in f.dispatcher.eventListeners[m.type])if(f.dispatcher.eventListeners[m.type]&&f.dispatcher.eventListeners[m.type].hasOwnProperty(v)&&"function"==typeof f.dispatcher.eventListeners[m.type][v])try{f.dispatcher.eventListeners[m.type][v](m)}catch(x){D.default.debug("[".concat(f.clientId,"] Error in ").concat(m.type," event"),x)}},f.dispatchSocketEvent=function(m){var v;for(v in f.dispatcher.eventListeners[m.type])f.dispatcher.eventListeners[m.type]&&f.dispatcher.eventListeners[m.type].hasOwnProperty(v)&&"function"==typeof f.dispatcher.eventListeners[m.type][v]&&f.dispatcher.eventListeners[m.type][v](m.msg)},f},O=function(f){var m={};return m.type=f.type,m},T=function(f){var m=O(f);return m.stream=f.stream,m.reason=f.reason,m.msg=f.msg,m},N=function(f){var m=O(f);return m.uid=f.uid,m.attr=f.attr,m.stream=f.stream,m},_=function(f){var m=O(f);return m.msg=f.msg,m},R=function(f){var m=O(f);return m.url=f.url,m.uid=f.uid,m.status=f.status,m.reason=f.reason,m}},function(ue,ie,V){"use strict";var D,w=this&&this.__extends||(D=function(Q,te){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,b){z.__proto__=b}||function(z,b){for(var u in b)b.hasOwnProperty(u)&&(z[u]=b[u])})(Q,te)},function(Q,te){function z(){this.constructor=Q}D(Q,te),Q.prototype=null===te?Object.create(te):(z.prototype=te.prototype,new z)}),O=this&&this.__awaiter||function(Q,te,z,b){return new(z||(z=Promise))(function(u,W){function C(p){try{$(b.next(p))}catch(S){W(S)}}function l(p){try{$(b.throw(p))}catch(S){W(S)}}function $(p){var S;p.done?u(p.value):(S=p.value,S instanceof z?S:new z(function(L){L(S)})).then(C,l)}$((b=b.apply(Q,te||[])).next())})},T=this&&this.__generator||function(Q,te){var z,b,u,W,C={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return W={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function l($){return function(p){return function(S){if(z)throw new TypeError("Generator is already executing.");for(;C;)try{if(z=1,b&&(u=2&S[0]?b.return:S[0]?b.throw||((u=b.return)&&u.call(b),0):b.next)&&!(u=u.call(b,S[1])).done)return u;switch(b=0,u&&(S=[2&S[0],u.value]),S[0]){case 0:case 1:u=S;break;case 4:return C.label++,{value:S[1],done:!1};case 5:C.label++,b=S[1],S=[0];continue;case 7:S=C.ops.pop(),C.trys.pop();continue;default:if(!((u=(u=C.trys).length>0&&u[u.length-1])||6!==S[0]&&2!==S[0])){C=0;continue}if(3===S[0]&&(!u||S[1]>u[0]&&S[1]<u[3])){C.label=S[1];break}if(6===S[0]&&C.label<u[1]){C.label=u[1],u=S;break}if(u&&C.label<u[2]){C.label=u[2],C.ops.push(S);break}u[2]&&C.ops.pop(),C.trys.pop();continue}S=te.call(Q,C)}catch(L){S=[6,L],b=0}finally{z=u=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([$,p])}}},N=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(ie,"__esModule",{value:!0});var _=N(V(69)),R=V(2),f=N(V(0)),m=V(3),v=V(14),x=V(10),U=function(Q){function te(z,b){var u=Q.call(this)||this;return u._state=G.RELAY_STATE_IDLE,u._onStatus=function(W){f.default.debug("["+u.clientId+"] ChannelMediaStatus: "+JSON.stringify(W)),W&&W.command&&("onAudioPacketReceived"===W.command&&u.emit("event",P.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===W.command&&u.emit("event",P.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===W.command&&(u._state=G.RELAY_STATE_FAILURE,u.emit("state",G.RELAY_STATE_FAILURE,M.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===W.command&&(u._state=G.RELAY_STATE_FAILURE,u.emit("state",G.RELAY_STATE_FAILURE,M.DEST_TOKEN_EXPIRED,W.channelName?{came:W.channelName}:null)))},u._onClose=function(){return O(u,void 0,void 0,function(){var W;return T(this,function(C){switch(C.label){case 0:if(f.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",P.NETWORK_DISCONNECTED),this.state=G.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];C.label=1;case 1:return C.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return C.sent(),[3,4];case 3:return(W=C.sent())instanceof oe&&(W.message===E.WS_ABORT||W.message===E.AP_REQUEST_ABORT)?[2]:(this.emit("state",G.RELAY_STATE_FAILURE,M.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}})})},u.token=z.appId,u.appId=z.appId,u.cname=z.cname,u.uid=z.uid,u.sid=z.sid,u.clientId=b,u}return w(te,Q),Object.defineProperty(te.prototype,"state",{get:function(){return this._state},set:function(z){var b=this._state;this._state=z,b!==z&&this.emit("state",z)},enumerable:!0,configurable:!0}),te.prototype.startChannelMediaRelay=function(z){return O(this,void 0,void 0,function(){return T(this,function(b){switch(b.label){case 0:if(this.state!==G.RELAY_STATE_IDLE)throw new oe(E.BAD_STATE);return this.state=G.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return b.sent(),f.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(z)];case 2:return b.sent(),this._prevChannelMediaConfig=z,[2]}})})},te.prototype.updateChannelMediaRelay=function(z){return O(this,void 0,void 0,function(){return T(this,function(b){switch(b.label){case 0:if(this.state!==G.RELAY_STATE_RUNNING)throw new oe(E.BAD_STATE);return[4,this._sendUpdateMessage(z)];case 1:return b.sent(),this._prevChannelMediaConfig=z,[2]}})})},te.prototype.stopChannelMediaRelay=function(){return O(this,void 0,void 0,function(){return T(this,function(z){switch(z.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return z.sent(),f.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=G.RELAY_STATE_IDLE,this.dispose(),[2]}})})},te.prototype.dispose=function(){f.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=G.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},te.prototype._requestOneAP=function(z){var b=this;return new Promise(function(u,W){var C={command:"convergeAllocateEdge",sid:b.sid,appId:b.appId,token:"",ts:+new Date,version:R.VERSION,cname:b.cname,uid:b.uid+"",seq:1,requestId:1},l={service_name:"tele_channel",json_body:JSON.stringify(C)};v.post("https://"+z,l,function(p){var S=null,L=null;try{S=JSON.parse(p)}catch(ee){W(new oe(E.AP_JSON_PARSE_ERROR,ee))}0!==S.code&&W(new oe(E.AP_REQUEST_ERROR,S));try{L=JSON.parse(S.json_body)}catch(ee){W(new oe(E.AP_JSON_PARSE_ERROR,ee))}200!==L.code&&W(new oe(E.AP_REQUEST_ERROR,L)),L.servers?u(L.servers):W(new oe(E.AP_JSON_PARSE_ERROR,L))},function(p){return W(p)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})})},te.prototype._requestAP=function(){var z=this,b=R.getParameter("UAP_AP");return new Promise(function(u,W){setTimeout(function(){W(new oe(E.AP_REQUEST_TIMEOUT))},5e3),z.on("dispose",function(){W(new oe(E.AP_REQUEST_ABORT))}),b.forEach(function(C){z._requestOneAP(C+="/api/v1").then(function(l){f.default.debug("["+z.clientId+"] startChannelMediaRelay request AP "+C+" success: "+JSON.stringify(l));var $=l[0],p="wss://"+$.address.replace(/\./g,"-")+".edge.agora.io:"+$.wss;u(p)}).catch(function(l){f.default.debug("["+z.clientId+"] startChannelMediaRelay request AP "+C+" failed: "+JSON.stringify(l))})})})},te.prototype._connectWebsocket=function(z){return this._signal=new Y(this.appId,this.cname,this.uid,this.sid),this._signal.connect(z)},te.prototype._connect=function(){return O(this,void 0,void 0,function(){var z;return T(this,function(b){switch(b.label){case 0:return[4,this._requestAP()];case 1:return z=b.sent(),[4,this._connectWebsocket(z)];case 2:return b.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",P.NETWORK_CONNECTED),[2]}})})},te.prototype._sendStartRelayMessage=function(z){return O(this,void 0,void 0,function(){var b,u,W,C,l,$;return T(this,function(p){switch(p.label){case 0:return this._checkSignal(),b=this._genMessage(j.StopPacketTransfer),[4,this._signal.request(b)];case 1:return p.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return p.sent(),f.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),u=this._genMessage(j.SetSdkProfile,z),[4,this._signal.request(u)];case 3:return p.sent(),f.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),W=this._genMessage(j.SetSourceChannel,z),[4,this._signal.request(W)];case 4:return p.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return p.sent(),this.emit("event",P.PACKET_JOINED_SRC_CHANNEL),f.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),C=this._genMessage(j.SetSourceUserId,z),[4,this._signal.request(C)];case 6:return p.sent(),f.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),l=this._genMessage(j.SetDestChannel,z),[4,this._signal.request(l)];case 7:return p.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return p.sent(),this.emit("event",P.PACKET_JOINED_DEST_CHANNEL),f.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),$=this._genMessage(j.StartPacketTransfer,z),[4,this._signal.request($)];case 9:return p.sent(),this.emit("event",P.PACKET_SENT_TO_DEST_CHANNEL),this.state=G.RELAY_STATE_RUNNING,f.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}})})},te.prototype._sendReconnectMessage=function(z){return O(this,void 0,void 0,function(){var b;return T(this,function(u){switch(u.label){case 0:return this._checkSignal(),b=this._genMessage(j.Reconnect,z),[4,this._signal.request(b)];case 1:return u.sent(),[2]}})})},te.prototype._sendUpdateMessage=function(z){return O(this,void 0,void 0,function(){var b;return T(this,function(u){switch(u.label){case 0:return this._checkSignal(),b=this._genMessage(j.UpdateDestChannel,z),[4,this._signal.request(b)];case 1:return u.sent(),this.emit("event",P.PACKET_UPDATE_DEST_CHANNEL),f.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}})})},te.prototype._sendStopRelayMessage=function(){return O(this,void 0,void 0,function(){var z;return T(this,function(b){switch(b.label){case 0:return this._checkSignal(),z=this._genMessage(j.StopPacketTransfer),[4,this._signal.request(z)];case 1:return b.sent(),f.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}})})},te.prototype._genMessage=function(z,b){var u=this,W=[],C=[],l=[],$={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:R.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},p=null;switch(z){case j.SetSdkProfile:return $.clientRequest={command:"SetSdkProfile",type:"multi_channel"},$;case j.SetSourceChannel:return p=b.getSrcChannelMediaInfo(),$.clientRequest={command:"SetSourceChannel",uid:p.uid+"",channelName:p.channelName,token:p.token||this.appId},$;case j.SetSourceUserId:return p=b.getSrcChannelMediaInfo(),$.clientRequest={command:"SetSourceUserId",uid:this.uid+""},$;case j.SetDestChannel:return b.getDestChannelMediaInfos().forEach(function(S){W.push(S.channelName),C.push(S.uid+""),l.push(S.token||u.appId)}),$.clientRequest={command:"SetDestChannel",channelName:W,uid:C,token:l},$;case j.StartPacketTransfer:return $.clientRequest={command:"StartPacketTransfer"},$;case j.Reconnect:return $.clientRequest={command:"Reconnect"},$;case j.StopPacketTransfer:return $.clientRequest={command:"StopPacketTransfer"},$;case j.UpdateDestChannel:return b.getDestChannelMediaInfos().forEach(function(S){W.push(S.channelName),C.push(S.uid+""),l.push(S.token||u.appId)}),$.clientRequest={command:"UpdateDestChannel",channelName:W,uid:C,token:l},$}},te.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new oe(E.WS_DISCONNECTED)},te}(_.default);ie.default=U;var I=function(){function Q(){this.destChannelMediaInfos=new Map}return Q.prototype.setSrcChannelInfo=function(te){m.checkValidObject(te,"srcInfo");var z=te.uid,b=te.channelName,u=te.token;if(u&&!m.isValidToken(u))throw new Error("Invalid token in SrcChannelInfo");if(!m.isValidChannelName(b))throw new Error("Invalid channelName in SrcChannelInfo");if(!x.is32Uint(z))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=te},Q.prototype.setDestChannelInfo=function(te,z){if(!m.isValidChannelName(te))throw new Error("Invalid channelName in DestChannelInfo");m.checkValidObject(z,"destInfo");var b=z.uid,u=z.token,W=z.channelName;if(u&&!m.isValidToken(u))throw new Error("Invalid token in DestChannelInfo");if(!m.isValidChannelName(W))throw new Error("Invalid channelName in DestChannelInfo");if(!x.is32Uint(b))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(te,z)},Q.prototype.removeDestChannelInfo=function(te){if(!m.isValidChannelName(te))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(te)},Q.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},Q.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},Q}();ie.ChannelMediaRelayConfiguration=I;var E,j,P,G,M,Q,Y=function(Q){function te(z,b,u,W){var C=Q.call(this)||this;return C._onOpen=function(){C.emit("open")},C._onClose=function(l){C.emit("close"),C.dispose()},C._onMessage=function(l){var $=JSON.parse(l.data);if(!$||"serverResponse"!==$.command||!$.requestId)return $&&"serverStatus"===$.command&&$.serverStatus&&$.serverStatus.command?(C.emit("status",$.serverStatus),void C.emit($.serverStatus.command,$.serverStatus)):void 0;C.emit("req_"+$.requestId,$)},C._requestId=1,C.appId=z,C.cname=b,C.uid=u,C.sid=W,C}return w(te,Q),te.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},te.prototype.sendMessage=function(z){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new oe(E.WS_DISCONNECTED);var b=this._requestId++;return z.requestId=b,z.seq=b,this._ws.send(JSON.stringify(z)),b},te.prototype.waitStatus=function(z){var b=this;return new Promise(function(u,W){var C=window.setTimeout(function(){W(new oe(E.WAIT_STATUS_TIMEOUT,z))},5e3);b.once(z,function(l){clearTimeout(C),l.state&&0!==l.state?W(new oe(E.WAIT_STATUS_ERROR,z)):u()}),b.once("dispose",function(){clearTimeout(C),W(new oe(E.WS_ABORT))})})},te.prototype.request=function(z){var b=this;return new Promise(function(u,W){var C=b.sendMessage(z),l=window.setTimeout(function(){b.removeAllListeners("req_"+C),W(new oe(E.REQUEST_TIMEOUT))},3e3);b.once("req_"+C,function($){clearTimeout(l),$&&200===$.code?u($):W(new oe(E.REQUEST_FAILED,$))}),b.once("dispose",function(){clearTimeout(l),W(new oe(E.WS_ABORT))})})},te.prototype.connect=function(z){var b=this;return new Promise(function(u,W){b._ws=new WebSocket(z),b._ws.onopen=function(){b._onOpen(),b._prvUrl=z,b._ws.onmessage=b._onMessage,b._ws.onclose=b._onClose,b._startHeartBeatCheck(),u()},b._ws.onclose=function(C){b._ws=null,W(new oe(E.CONNECT_FAILED,"websocket error code: "+C.code))},setTimeout(function(){b._ws&&b._ws.readyState!==WebSocket.OPEN&&(b._ws.onopen=null,b._ws.onclose=null,b._ws.close(),b._ws=null,W(new oe(E.CONNECT_TIMEOUT)))},5e3),b.once("dispose",function(){W(new oe(E.WS_ABORT))})})},te.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},te.prototype._sendPing=function(z){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new oe(E.WS_DISCONNECTED);var b=this._requestId++;return z.requestId=b,this._ws.send(JSON.stringify(z)),b},te.prototype._startHeartBeatCheck=function(){var z=this;this._heartBeatTimer=window.setInterval(function(){z._sendPing({command:"ping",appId:z.appId,cname:z.cname,uid:z.uid+"",sid:z.sid,ts:+new Date,requestId:0})},3e3)},te.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},te}(_.default),oe=function(Q,te,z){void 0===Q&&(Q=""),this.code=z,this.data=te,this.message=Q};ie.ChannelMediaError=oe,(Q=E=ie.CHANNEL_MEDIA_ERROR||(ie.CHANNEL_MEDIA_ERROR={})).CONNECT_FAILED="connect failed",Q.CONNECT_TIMEOUT="connect timeout",Q.WS_DISCONNECTED="websocket disconnected",Q.REQUEST_TIMEOUT="request timeout",Q.REQUEST_FAILED="request failed",Q.WAIT_STATUS_TIMEOUT="wait status timeout",Q.WAIT_STATUS_ERROR="wait status error",Q.BAD_STATE="bad state",Q.WS_ABORT="ws abort",Q.AP_REQUEST_TIMEOUT="AP request timeout",Q.AP_JSON_PARSE_ERROR="AP json parse error",Q.AP_REQUEST_ERROR="AP request error",Q.AP_REQUEST_ABORT="AP request abort",function(Q){Q[Q.SetSdkProfile=0]="SetSdkProfile",Q[Q.SetSourceChannel=1]="SetSourceChannel",Q[Q.SetSourceUserId=2]="SetSourceUserId",Q[Q.SetDestChannel=3]="SetDestChannel",Q[Q.StartPacketTransfer=4]="StartPacketTransfer",Q[Q.StopPacketTransfer=5]="StopPacketTransfer",Q[Q.UpdateDestChannel=6]="UpdateDestChannel",Q[Q.Reconnect=7]="Reconnect",Q[Q.SetVideoProfile=8]="SetVideoProfile"}(j||(j={})),function(Q){Q[Q.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",Q[Q.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",Q[Q.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",Q[Q.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",Q[Q.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",Q[Q.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",Q[Q.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",Q[Q.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",Q[Q.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",Q[Q.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(P=ie.CHANNEL_MEDIA_RELAY_EVENT||(ie.CHANNEL_MEDIA_RELAY_EVENT={})),function(Q){Q[Q.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",Q[Q.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",Q[Q.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",Q[Q.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(G=ie.CHANNEL_MEDIA_RELAY_STATE||(ie.CHANNEL_MEDIA_RELAY_STATE={})),function(Q){Q[Q.RELAY_OK=0]="RELAY_OK",Q[Q.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",Q[Q.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",Q[Q.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",Q[Q.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",Q[Q.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",Q[Q.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",Q[Q.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",Q[Q.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",Q[Q.INTERNAL_ERROR=9]="INTERNAL_ERROR",Q[Q.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",Q[Q.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",Q[Q.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",Q[Q.RELAY_NOT_START=13]="RELAY_NOT_START",Q[Q.OPERATION_ABORT=14]="OPERATION_ABORT"}(M=ie.CHANNEL_MEDIA_RELAY_ERROR||(ie.CHANNEL_MEDIA_RELAY_ERROR={}))},function(ue,ie,V){"use strict";V.r(ie),V.d(ie,"isLiveTranscodingValid",function(){return M}),V.d(ie,"generateSessionId",function(){return j}),V.d(ie,"audioLevelHelper",function(){return U}),V.d(ie,"vsResHack",function(){return P}),V.d(ie,"is32Uint",function(){return G}),V.d(ie,"safeCall",function(){return m}),V.d(ie,"random",function(){return oe}),V.d(ie,"popBanTip",function(){return z}),V.d(ie,"lengthInUtf8Bytes",function(){return Q}),V.d(ie,"audioTimerLoop",function(){return te}),V.d(ie,"generateId",function(){return E}),V.d(ie,"uint8ArrayToBase64",function(){return v}),V.d(ie,"base64ToUint8Array",function(){return x});var D=V(11),w=V.n(D),O=V(5),T=V(0),N=V(28),_=V.n(N),R=V(25),f=V(15),m=function(){var b=arguments[0];if("function"==typeof b){var u=Array.prototype.slice.call(arguments,1);b.apply(null,u)}},v=function(b){for(var u="",W=0;W<b.length;W+=1)u+=String.fromCharCode(b[W]);return window.btoa(u)},x=function(b){for(var u=window.atob(b),W=new Uint8Array(new ArrayBuffer(u.length)),C=0;C<u.length;C+=1)W[C]=u.charCodeAt(C);return W},U=function(b){return this.audioContext=Object(R.a)(),this.sourceNode=b.otWebkitAudioSource||this.audioContext.createMediaStreamSource(b),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var u=0,W=0;W<this.timeDomainData.length;W++)u=Math.max(u,Math.abs(this.timeDomainData[W]-128));return u/128}return T.default.warning("can't find analyser in audioLevelHelper"),0},this},I=1e4;function E(){return++I}function j(){return _()().replace(/-/g,"").toUpperCase()}var P=function(b,u,W){try{T.default.debug("start vsResHack",b);var C=document.createElement("video");C.setAttribute("autoplay",""),C.setAttribute("muted",""),C.muted=!0,C.setAttribute("playsinline",""),C.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(C);var l=!1;C.addEventListener("playing",function($){O.isFireFox()?C.videoWidth&&(l=!0,T.default.debug("[vsResHack] get stream resolution: ","".concat(C.videoWidth," x ").concat(C.videoHeight),b),u(C.videoWidth,C.videoHeight),C.srcObject=null,C.remove()):(l=!0,T.default.debug("[vsResHack] get stream resolution: ","".concat(C.videoWidth," x ").concat(C.videoHeight),b),u(C.videoWidth,C.videoHeight),C.srcObject=null,C.remove())}),Object(f.setSrcObject)(C,b),C.play().catch(function(){}),setTimeout(function(){!l&&C&&(u(C.videoWidth,C.videoHeight),C.srcObject=null,C.remove())},4e3)}catch($){W($)}},G=function(b){return"number"==typeof b&&0<=b&&b<=4294967295},M=function(b){var u=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var W in b)if("lowLatency"===W&&"boolean"!=typeof b[W]||"userConfigExtraInfo"===W&&"object"!==w()(b[W])||"transcodingUsers"===W&&!Y(b[W])||!~u.indexOf(W)&&"number"!=typeof b[W])throw new Error("Param ["+W+"] is inValid");return!0},Y=function(b){for(var u=0;u<b.length;u++)for(var W in b[u])if("number"!=typeof b[u][W])throw new Error("Param user["+u+"] - ["+W+"] is inValid");return!0},oe=function(b){isNaN(b)&&(b=1e3);var u=+new Date,W=(u=(9301*u+49297)%233280)/233280;return Math.ceil(W*b)},Q=function(b){var u=encodeURIComponent(b).match(/%[89ABab]/g);return b.length+(u?u.length:0)},te=function(b,u){var W=1/u,C=Object(R.a)(),l=C.createGain();l.gain.value=0,l.connect(C.destination);var $=!1;return function p(){var S=C.createOscillator();S.onended=p,S.connect(l),S.start(0),S.stop(C.currentTime+W),b(C.currentTime),$&&(S.onended=function(){})}(),function(){$=!0}},z=function(){if(!document.getElementById("agora-ban-tip")){var b=document.createElement("div");b.id="agora-ban-tip",b.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(b);var u=document.createElement("div");u.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",b.append(u);var W=document.createElement("div");W.style="height: 76px; display: flex; justify-content: center; align-items: center;";var C=document.createElement("span");C.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",C.innerText="!";var l=document.createElement("span");l.innerText="This browser does not support webRTC",W.append(C),W.append(l);var $=document.createElement("div");$.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",$.innerText="OK",u.append(W),u.append($),$.onclick=function(){var p=document.getElementById("agora-ban-tip");p.parentNode.removeChild(p)}}}},function(ue,ie){function V(D){return ue.exports=V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(w){return typeof w}:function(w){return w&&"function"==typeof Symbol&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},V(D)}ue.exports=V},function(ue,ie,V){ue.exports=V(64)},function(ue,ie,V){"use strict";var D=V(12),w=V.n(D),O=V(17),T=V.n(O),N=V(11),_=V.n(N),R=V(32),f=V.n(R),m=V(7),v=V.n(m),x=V(22),U=V(8),I=function(B){B&&B.apply(this,[].slice.call(arguments,1))},E=V(0),j=V(1),P=V(10),G=V(14),M=V(2),Y=function(B){var H=Object(U.b)(B);H.needReconnect=!0,H.isTimeout=!1,H.isInit=!0,H.sendbytes=0,H.recvbytes=0,H.startTime=Date.now(),H.lastMsgTime=null,H.clientId=B.clientId,H.hostIndex=0,H.requestID=0,H.host=B.host instanceof Array?B.host:[B.host],H.getSendBytes=function(){return H.sendbytes},H.getRecvBytes=function(){return H.recvbytes},H.getDuration=function(){return Math.ceil((Date.now()-H.startTime)/1e3)},H.getURL=function(){return H.connection.url},H.reconnect=function(){H.isInit=!0,H.creatConnection()},H.connectNext=function(){H.isInit=!0,++H.hostIndex,E.default.debug("["+H.clientId+"] Gateway length:"+H.host.length+" current index:"+H.hostIndex),H.hostIndex>=H.host.length?H.dispatchEvent(Object(U.d)({type:"recover"})):H.creatConnection()},H.replaceHost=function(le){H.host=le||H.host,H.hostIndex=0,H.creatConnection()},H.creatConnection=function(){H.needReconnect=!0,H.lts=(new Date).getTime(),H.connection=new WebSocket("wss://"+H.host[H.hostIndex]),H.connection.binaryType="arraybuffer",H.turnConfig={};var le=B.proxyServerType;if(H.connection.url&&3!==le&&4!==le&&5!==le){var ge=H.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),Ce=H.host[H.hostIndex].split(":"),Oe=H.connection.url.match(/h=([^:]+)&p=(\d+)/);ge?(H.turnConfig.url=ge[1],Object(M.getParameter)("TURN_ENABLE_TCP")&&(H.turnConfig.tcpport=parseInt(ge[2])+30),Object(M.getParameter)("TURN_ENABLE_UDP")&&(H.turnConfig.udpport=parseInt(ge[2])+30)):Oe?(H.turnConfig.url=Oe[1],Object(M.getParameter)("TURN_ENABLE_TCP")&&(H.turnConfig.tcpport=parseInt(Oe[2])+30),Object(M.getParameter)("TURN_ENABLE_UDP")&&(H.turnConfig.udpport=parseInt(Oe[2])+30)):Ce&&(H.turnConfig.url=Ce[0],Object(M.getParameter)("TURN_ENABLE_TCP")&&(H.turnConfig.tcpport=parseInt(Ce[1])+30),Object(M.getParameter)("TURN_ENABLE_UDP")&&(H.turnConfig.udpport=parseInt(Ce[1])+30))}H.connection.onopen=function(ke){H.needReconnect=!0,H.isTimeout=!1,H.isInit=!1,H.sendbytes=0,H.recvbytes=0,H.startTime=Date.now(),Object(G.resetHTTPByetsCount)(),clearTimeout(H.timeoutCheck),H.dispatchEvent(Object(U.d)({type:"onopen",event:ke,socket:H}))},H.connection.onmessage=function(ke){if(ke.data instanceof ArrayBuffer)H.dispatchEvent({type:"onBinaryData",data:ke.data});else{H.recvbytes+=Object(P.lengthInUtf8Bytes)(ke.data);var De=JSON.parse(ke.data);H.lastMsgTime=Date.now(),De.hasOwnProperty("_id")?H.dispatchEvent(Object(U.d)({type:De._id,msg:De})):De.hasOwnProperty("_type")&&H.dispatchSocketEvent(Object(U.d)({type:De._type,msg:De._message}))}},H.connection.onclose=function(ke){H.needReconnect?H.isTimeout||H.isInit?(E.default.debug("["+H.clientId+"] websockect connect timeout"),j.report.joinGateway(B.sid,{lts:H.lts,succ:!1,ec:"timeout",addr:H.connection.url}),H.connectNext()):(H.dispatchEvent(Object(U.d)({type:"disconnect",event:ke})),H.requests&&H.requests instanceof Array&&(H.requests.map(function(De){De.callback("REQUEST_ABORT")}),H.requests=[])):(E.default.debug("["+H.clientId+"] websockect closeed"),I(B.onFailure,ke),clearTimeout(H.timeoutCheck),H.dispatchEvent(Object(U.d)({type:"close",event:ke})),H.connection.onopen=void 0,H.connection.onclose=void 0,H.connection.onerror=void 0,H.connection.onmessage=void 0,H.connection=void 0)},H.connection.onerror=function(ke){},setTimeout(function(){H.connection&&H.connection.readyState!=WebSocket.OPEN&&(H.isTimeout=!0,H.connection.close())},5e3)},H.creatConnection(),H.sendMessage=function(le,ge){if(H.connection&&H.connection.readyState==WebSocket.OPEN){var Ce=JSON.stringify(le);H.sendbytes+=Object(P.lengthInUtf8Bytes)(Ce),H.connection.send(Ce)}else ge({error:"Gateway not connected"})},H.disconnect=function(){H.needReconnect=!0,H.connection.close()},H.close=function(){H.needReconnect=!1,H.connection.onclose=void 0,H.connection.close(),clearInterval(H.requestTimer),H.requests&&H.requests instanceof Array&&(H.requests.map(function(le){le.callback("REQUEST_ABORT")}),H.requests=[])},H.sendSignalCommand=function(le,ge){le._id="_request_"+H.requestID,H.requestID+=1,"publish_stats"!==le._type&&"subscribe_stats"!==le._type&&"publish_stats_low"!==le._type&&H.on(le._id,function(Ce){Ce.msg&&ge&&ge(Ce.msg._result,Ce.msg.message),delete H.dispatcher.eventListeners[le._id]}),H.sendMessage(le,function(Ce){Ce.reason="NOT_CONNECTED",ge&&ge(Ce.reason,Ce)})},H.requests=[];var K=function(le){var ge=H.requests.findIndex(function(Oe){return Oe.id===le.type});if(ge>=0)var Ce=H.requests.splice(ge,1)[0];Ce&&H.dispatcher.eventListeners[le.type]?(delete H.dispatcher.eventListeners[le.type],le.msg&&Ce.callback&&Ce.callback(le.msg._result,le.msg._message)):E.default.warning("Detached Response",le.type,le.msg)},ve=function(le){var ge=this,Ce=H.requests.findIndex(function(Oe){return Oe.id===ge.id});Ce>=0&&(ge=H.requests.splice(Ce,1)[0]),ge&&H.dispatcher.eventListeners[le.type]?(delete H.dispatcher.eventListeners[le.type],le.reason="NOT_CONNECTED",ge.callback&&ge.callback(le.reason,le)):E.default.warning("handleSendError",ge)};return H.sendRequest=function(le,ge){le=v()({_id:"_request_"+H.requestID},le),H.requestID+=1;var Ce={id:le._id,timeoutCounter:0,stalledAt:Date.now(),message:le,callback:ge};H.requests.push(Ce),H.addEventListener(le._id,K),H.sendMessage(le,ve.bind(Ce))},H.checkRequestTimeout=function(){for(var le=Math.ceil(Object(M.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(M.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),ge=H.requests.length-1;ge>=0;ge--){var Ce=H.requests[ge];Ce.timeoutCounter>=le?(H.requests.splice(ge,1),E.default.error("Request Timeout",Ce.timeoutCounter,Ce.message),Ce.callback&&Ce.callback("TIMEOUT")):Ce.timeoutCounter++}},clearInterval(H.requestTimer),H.requestTimer=setInterval(H.checkRequestTimeout,Object(M.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),H.sendReport=function(le){H.sendMessage(le,function(){})},H},Q=V(23),te=V(4),z=V(20),b=V(5),u={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"tryNext",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},W={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},C={};for(var l in W){var $=W[l];C[$]&&E.default.error("Key Conflict: ".concat($,": ").concat(W[$],"| ").concat(l)),C[$]=l}var p=function(B){return W[B]||B},S=function(B){return C[B]||B},L=V(9),ee=V.n(L),re=V(54),fe=function B(H){var g,ne,K=!1,ve=function(g){return{_type:"control",_message:g}},le=function(g,ne){var de={};return Object.keys(ne).forEach(function(me){Object(M.getParameter)("STATS_FILTER")[me]||(de[p(me)]=ne[me])}),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:g,stats:de}}},ge=function(g){return{_type:"publish",_message:g}},Ce=function(g,ne){var de={};return Object.keys(ne).forEach(function(me){Object(M.getParameter)("STATS_FILTER")[me]||(de[p(me)]=ne[me])}),{_type:"subscribe_stats",_message:{stream_id:g,stats:de}}},Oe=B.DISCONNECTED,ke=B.CONNECTING,De=B.CONNECTED,Re=B.DISCONNECTING,Ue=Oe,h=Object(U.b)(H);Object.defineProperty(h,"state",{set:function(g){var ne=Ue;Ue=g,Object(z._setClientConnectionStateRecord)(h.clientId,g),g!==B.CONNECTED&&g!==B.DISCONNECTING&&(h.hasJoined=!1),ne!==g&&h.dispatchEvent({type:"connection-state-change",prevState:B.connetionStateMap[ne],curState:B.connetionStateMap[g]})},get:function(){return Ue}}),h.socket=void 0,h.state=Oe,h.mode=H.mode,h.role=H.role,h.codec=H.codec,h.config={},h.timers={},h.timer_counter={},h.localStreams={},h.remoteStreams={},h.remoteMuteState={},h.attemps=1,h.p2p_attemps=1,h.audioLevel={},h.activeSpeaker=void 0,h.reconnectMode="tryNext",h.rejoinAttempt=0,h.hasChangeBGPAddress=!1,h.traffic_stats={},h.clientId=H.clientId,h.pingpongCounter=0,h.hasInvokeLeave=!1,h.p2ps=new Map,h.liveStreams=new Map,h.injectLiveStreams=new Map,h.remoteStreamsInChannel=new Set,h.subscribeRequestId=new Map,h.publishRequestId=0,h.hasJoined=!1,h.isFirstSuccess=!0,h.peerPublishDurationMap=new Map,ne=I,(g=h).makeRequest=function(de,me,ye){if(void 0===g.socket)return E.default.debug("[".concat(g.clientId,"] No socket available")),void ne(ye,te.default.INVALID_OPERATION);try{g.socket.emitRequest(de,function(X,_e){var Ee;"success"===X?"function"==typeof me&&me(_e):"function"==typeof ye&&(Ee=_e&&_e.error_code&&te.GatewayErrorCode[_e.error_code]?te.GatewayErrorCode[_e.error_code]:_e&&_e.error_str?_e.error_str:_e&&_e.error_code?"UNKNOW_ERROR_".concat(_e.error_code):X,ye(Ee,_e))})}catch(X){E.default.debug("[".concat(g.clientId,"] Socket emit message failed ").concat(JSON.stringify(de))),E.default.debug("[".concat(g.clientId,"] "),X),ne(ye,te.default.SOCKET_ERROR)}},g.makeReport=function(de){void 0===g.socket&&E.default.debug("[".concat(g.clientId,"] No socket available"));try{g.socket.emitReport(de)}catch(me){E.default.debug("[".concat(g.clientId,"] Socket emit report failed ").concat(JSON.stringify(de)))}},h.inChannelInfo={joinAt:null,duration:0},h._sendMessage=function(g,ne){switch(g){case"SubscribeStats":h.makeReport(Ce.apply(void 0,f()(ne)));break;case"SubscribeRelatedStats":h.makeReport(le.apply(void 0,f()(ne)))}};var pe=I;h.p2pCounter=Object(P.random)(1e5),h.generateP2PId=function(){return++h.p2pCounter},h.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},h.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},h.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},h.configPublisher=function(g){h.config=g},h.getGatewayInfo=function(g,ne){h.makeRequest({_type:"gateway_info"},g,ne)},h.setClientRole=function(g,ne){E.default.debug("[".concat(h.clientId,"] setClientRole to ").concat(g));var de=j.report.reportApiInvoke(h.joinInfo.sid,{name:"_setClientRole",callback:ne});h.makeRequest({_type:"set_client_role",_message:{role:g}},function(){h.role=g,h.dispatchEvent({type:"client-role-changed",role:g}),de&&de(null,{role:g})},function(me,ye){if(ye&&ye.code&&(me=te.GatewayErrorCode[ye.code]||"UNKNOW_ERROR_"+ye.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===me)return de&&de(null);E.default.error("set Client role error to "+g+": "+me),de&&de(me)})},h.join=function(g,ne,de,me){h.hasInvokeLeave=!1,g.useProxyServer&&(h.hasChangeBGPAddress=!0);var ye=(new Date).getTime(),X=g.uid;if(h.inChannelInfo.joinAt&&(h.inChannelInfo.duration+=ye-h.inChannelInfo.joinAt),h.inChannelInfo.joinAt=ye,h.state!==ke)return E.default.error("[".concat(h.clientId,"] GatewayClient.join Failed: state "),h.state),me&&me(te.default.INVALID_OPERATION),void j.report.joinGateway(g.sid,{lts:ye,succ:!1,ec:te.default.INVALID_OPERATION,addr:null});if(null!=X&&parseInt(X)!==X)return E.default.error("[".concat(h.clientId,"] Input uid is invalid")),h.state=Oe,me&&me(te.default.INVALID_PARAMETER),void j.report.joinGateway(g.sid,{lts:ye,succ:!1,ec:te.default.INVALID_PARAMETER,addr:null});var _e=se.register(h,{uid:X,cname:g&&g.cname});if(_e)return h.state=Oe,me&&me(_e),void j.report.joinGateway(g.sid,{lts:ye,succ:!1,ec:_e,addr:null});h.joinInfo=v()({},g),h.uid=X,h.key=ne,h.pingpongCounter=0,Ge(g,function(Ee){if(g.useLocalAccessPoint)try{var Ie=h.socket.signal.connection.url.match(/wss\:\/\/([^:]+):(\d+)/)[1];Object(M.setParameter)("EVENT_REPORT_DOMAIN",Ie),Object(M.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",Ie),Object(M.setParameter)("LOG_UPLOAD_SERVER","".concat(Ie,":6444"))}catch(Te){E.default.debug("[".concat(h.clientId,"] LocalAccessPoint error: ").concat(Te))}if(h.state===Re||h.state===Oe)return me&&me("LEAVE_BEFORE_JOIN_SUCCESS");h.state=De,E.default.debug("[".concat(h.clientId,"] Connected to gateway server")),clearInterval(h.pingTimer),h.pingTimer=setInterval(function(){var Te=Object(M.getParameter)("PING_PONG_TIME_OUT");if(++h.pingpongCounter>=Te){var Ve=Date.now();h.socket&&E.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(Ve-h.socket.getLastMsgTime(),"ms")),h.socket&&h.socket.getLastMsgTime()&&Ve-h.socket.getLastMsgTime()>Object(M.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(h.pingpongCounter=0,h.socket.close(),h.socket.dispatchEvent(Object(U.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var He=Date.now();h.makeRequest({_type:"ping"},function(){h.pingpongCounter=0;var We=Date.now()-He;Object(M.getParameter)("REPORT_STATS")&&h.makeRequest({_type:"ping_back",_message:{pingpongElapse:We}})},function(We,it){"TIMEOUT"!==We&&(E.default.error("Ping Error ".concat(We," ").concat(JSON.stringify(it))),it&&it.error_code&&h.socket&&h.socket.signal&&h.socket.signal.connection&&h.socket.signal.connection.readyState===WebSocket.OPEN&&(E.default.info("Disconnecting websocket connection"),h.socket.signal.connection.close()))})},3e3),function(Te,Ve){var He=Te.role,We=v()({},h.joinInfo.apResponse),it={session_id:h.joinInfo.sid,app_id:H.appId,channel_key:h.key,channel_name:h.joinInfo.cname,sdk_version:M.VERSION,browser:navigator.userAgent,process_id:Object(j.getProcessId)(),mode:h.mode,codec:h.codec,role:He,has_changed_gateway:Object(M.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||h.hasChangeBGPAddress,ap_response:We,optionalInfo:h.joinInfo.optionalInfo,extend:Object(M.getParameter)("JOIN_EXTEND"),details:{}};if(h.joinInfo.hasOwnProperty("stringUid")&&(it.string_uid=h.joinInfo.stringUid),h.socket&&h.socket.signal&&h.socket.signal&&(We.addresses&&We.addresses[h.socket.signal.hostIndex]&&(it.ap_response.ticket=We.addresses[h.socket.signal.hostIndex].ticket,delete We.addresses),Object(M.getParameter)("SET_DEFAULT_TURNSERVER")&&h.socket.signal.turnConfig)){var Qe={username:h.joinInfo.uid.toString(),credential:h.joinInfo.token,forceturn:Object(M.getParameter)("FORCE_TURN")};Qe.url=h.socket.signal.turnConfig.url,h.socket.signal.turnConfig.tcpport&&(Qe.tcpport=""+h.socket.signal.turnConfig.tcpport),h.socket.signal.turnConfig.udpport&&(Qe.udpport=""+h.socket.signal.turnConfig.udpport),h.joinInfo.turnServers.find(function(Rt){if(Rt.url===Qe.url)return!0})||h.joinInfo.turnServers.push(Qe)}3===h.joinInfo.proxyServerType&&(it.plugin="web_cloud_proxy",it.details.cservice_map="1"),h.joinInfo.aesmode&&h.joinInfo.aespassword?(it.aes_mode=h.joinInfo.aesmode,it.aes_encrypt=!0,h.joinInfo.aes_salt&&(it.aes_salt=h.joinInfo.aes_salt),Object(re.encryptRSA)(h.joinInfo.aespassword).then(function(Rt){it.aes_secret=Rt,h.dispatchEvent({type:"join-message-hook",joinMessage:it}),Ve(null,{_type:"join",_message:it})}).catch(function(Rt){E.default.error("[".concat(h.clientId,"] encrypt password failed "),Rt),Ve("ENCRYPT_PASSWORD_FAILED")})):(h.dispatchEvent({type:"join-message-hook",joinMessage:it}),Ve(null,{_type:"join",_message:it}))}({role:h.role},function(Te,Ve){if(Te)return me&&me(Te);h.makeRequest(Ve,function(He){if(j.report.joinGateway(g.sid,{lts:ye,succ:!0,ec:null,vid:g.vid,uid:g.uid,addr:h.socket.getURL(),firstSuccess:h.isFirstSuccess}),h.joinSuccessLts=Date.now(),h.isFirstSuccess=!1,h.rejoinAttempt=0,h.hasJoined=!0,de&&de(He.uid),!0===He.return_vosip||!0===Object(M.getParameter)("ENABLE_LIVE_SERVER_LIST")){var We=null;try{We=h.socket.signal.connection.url}catch(it){E.default.debug("[".concat(h.clientId,"] Can not get gateway ip: ").concat(it))}We?Object(M.setParameter)("LIVE_SERVER_LIST",[We]):Object(M.setParameter)("LIVE_SERVER_LIST",[])}h.dispatchEvent({type:"join"}),clearInterval(h.timers.trafficStats),h.timers.trafficStats=setInterval(function(){h.makeRequest({_type:"traffic_stats"},function(it){var Qe={};for(var Rt in it)Qe[S(Rt)]=it[Rt];if(Qe.peer_delay&&Qe.peer_delay.length){var ct=[];Qe.peer_delay.forEach(function($n){var pt={};for(var eo in $n)pt[S(eo)]=$n[eo];ct.push(pt)}),Qe.peer_delay=ct}h.traffic_stats=Qe,h.traffic_stats.timestamp=Date.now();var ot=h.localStreams[X]||h.localStreams[h.joinInfo.stringUid];ot&&(ot.traffic_stats={access_delay:Qe.access_delay}),Qe.peer_delay&&Qe.peer_delay.forEach(function($n){var pt=h.remoteStreams[$n.peer_uid];pt&&(pt.traffic_stats={access_delay:Qe.access_delay,e2e_delay:$n.e2e_delay,audio_delay:$n.audio_delay,video_delay:$n.video_delay})}),h.dispatchEvent({type:"after-getTrafficStats",trafficStats:Qe})})},3e3)},function(He,We){if(E.default.error("[".concat(h.clientId,"] User join failed [").concat(He,"]")),"ERR_JOIN_BY_MULTI_IP"===He){try{j.report.joinGateway(g.sid,{lts:ye,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:h.socket.getURL()})}catch(it){}return h.dispatchEvent({type:"onMultiIP",option:We.option})}u[He]&&h.rejoinAttempt<4?h._doWithAction(u[He],de,me):me&&me(He),j.report.joinGateway(g.sid,{lts:ye,succ:!1,ec:He,addr:h.socket&&h.socket.getURL()})})})},function(Ee){E.default.error("[".concat(h.clientId,"] User join failed [").concat(Ee,"]")),me&&me(Ee),j.report.joinGateway(g.sid,{lts:ye,succ:!1,ec:Ee,addr:h.socket.getURL()})}),this.remoteMuteState={},h.resetAudioVolumeIndication()},h.leave=function(g,ne){var de=se.unregister(h);switch(de&&E.default.debug("[".concat(h.clientId,"] "),de),h.p2ps.clear(),h.state){case Oe:return E.default.debug("[".concat(h.clientId,"] Client Already in DISCONNECTED status")),void pe(g);case Re:return E.default.debug("[".concat(h.clientId,"] Client Already in DISCONNECTING status")),void pe(ne,te.default.INVALID_OPERATION);case ke:return h.socket&&h.socket.close(),h.socket=void 0,E.default.info("[".concat(h.clientId,"] Client connecting, Leave channel success")),h.state=Oe,g&&g()}for(var me in h.state=Re,h.channelMediaConfig&&(h.channelMediaRelayController&&h.channelMediaRelayController.dispose(),h.channelMediaRelayController=null),clearInterval(h.pingTimer),h.timers)h.timers.hasOwnProperty(me)&&clearInterval(h.timers[me]);for(var me in h.inChannelInfo.joinAt&&(h.inChannelInfo.duration+=Date.now()-h.inChannelInfo.joinAt,h.inChannelInfo.joinAt=null),h.hasJoined?h.makeRequest({_type:"leave"},function(_e){h.socket.close(),h.socket=void 0,E.default.info("[".concat(h.clientId,"] Leave channel success")),h.state=Oe,g&&g(_e)},function(_e){"TIMEOUT"!==_e&&"REQUEST_ABORT"!==_e&&(E.default.error("[".concat(h.clientId,"] Leave Channel Failed"),_e),h.state=De,ne&&ne(_e))}):(h.socket&&(h.socket.close(),h.socket=void 0),E.default.info("[".concat(h.clientId,"] Leave channel before joined")),h.state=Oe,g&&g()),h.localStreams)if(h.localStreams.hasOwnProperty(me)){var ye=h.localStreams[me];delete h.localStreams[me],void 0!==ye.pc&&(ye.pc.close(),ye.pc=void 0)}ce()},h.publish=function(g,ne,de,me){var ye=(new Date).getTime(),X=!1;if(g.publishLTS=ye,"object"!==_()(g)||null===g)return E.default.error("[".concat(h.clientId,"] Invalid local stream")),me&&me(te.default.INVALID_LOCAL_STREAM),void j.report.publish(h.joinInfo.sid,{lts:ye,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:te.default.INVALID_LOCAL_STREAM});if(!g.stream&&void 0===g.url)return E.default.error("[".concat(h.clientId,"] Invalid local media stream")),me&&me(te.default.INVALID_LOCAL_STREAM),void j.report.publish(h.joinInfo.sid,{lts:ye,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:te.default.INVALID_LOCAL_STREAM});if(h.state!==De)return E.default.error("[".concat(h.clientId,"] User is not in the session")),me&&me(te.default.INVALID_OPERATION),void j.report.publish(h.joinInfo.sid,{lts:ye,succ:!1,audio:g.hasAudio(),video:g.hasVideo(),screenshare:g.hasScreen(),audioName:g.hasAudio()&&g.audioName,videoName:g.hasVideo()&&g.videoName,screenName:g.hasScreen()&&g.screenName,ec:te.default.INVALID_OPERATION});var _e=g.getAttributes()||{};if(g.local&&void 0===h.localStreams[g.getId()]&&(g.hasAudio()||g.hasVideo()||g.hasScreen())){var Ee=h.generateP2PId();if(h.p2ps.set(Ee,g),g.p2pId=Ee,void 0!==g.url)qe(ge({state:"url",audio:g.hasAudio(),video:g.hasVideo(),attributes:g.getAttributes()}),function(Te,Ve){"success"===Te?(g.getUserId()!==Ve&&g.setUserId(Ve),h.localStreams[Ve]=g,g.onClose=function(){h.unpublish(g)}):E.default.error("[".concat(h.clientId,"] Publish local stream failed"),Te)});else{h.localStreams[g.getId()]=g,g.connectionSpec={callback:function(Te){Te||me&&me("CANNOT_GET_OFFER"),"motion"===g.optimizationMode&&g.pc.setRtpSenderParameters("maintain-framerate"),"detail"===g.optimizationMode&&g.pc.setRtpSenderParameters("maintain-resolution"),h.makeRequest(ge({state:"offer",stream_type:1==ne.streamType?"low":"high",p2p_id:Ee,sdp:Te,audio:g.audio||g.screenAudio,video:g.screen||g.video,screen:g.screen,attributes:g.getAttributes(),dtx:g.DTX,hq:g.highQuality,lq:g.lowQuality,stereo:g.stereo,speech:g.speech,codec:h.codec,extend:Object(M.getParameter)("PUB_EXTEND")}),function(Ve){g.getUserId()!==Ve.uid&&g.setUserId(Ve.uid),E.default.info("[".concat(h.clientId,"] Local stream published with uid"),Ve.uid),g.onClose=function(){h.unpublish(g)},g._onAudioUnmute=function(){h.makeReport(ve({action:"unmute_local_audio",stream_id:g.getId()}))},g._onVideoUnmute=function(){h.makeReport(ve({action:"unmute_local_video",stream_id:g.getId()}))},g._onAudioMute=function(){h.makeReport(ve({action:"mute_local_audio",stream_id:g.getId()}))},g._onVideoMute=function(){h.makeReport(ve({action:"mute_local_video",stream_id:g.getId()}))},g.getId()===g.getUserId()&&(g.isAudioOn()||g.hasAudio()&&(E.default.debug("[".concat(h.clientId,"] local stream audio mute")),g._onAudioMute()),g.isVideoOn()||(g.hasVideo()||g.hasScreen())&&(E.default.debug("[".concat(h.clientId,"] local stream video mute")),g._onVideoMute())),g.pc.oniceconnectionstatechange=function(He){if("failed"===He){if(null!=h.timers[g.getId()]&&(clearInterval(h.timers[g.getId()]),clearInterval(h.timers[g.getId()]+"_RelatedStats")),E.default.error("[".concat(h.clientId,"] Publisher connection is lost -- streamId: ").concat(g.getId(),", p2pId: ").concat(Ee)),h.p2ps.delete(Ee),E.default.debug("[".concat(h.clientId,"] publish p2p failed: "),h.p2ps),!X)return X=!0,j.report.publish(h.joinInfo.sid,{lts:ye,succ:!1,audio:g.hasAudio(),video:g.hasVideo(),screenshare:g.hasScreen(),audioName:g.hasAudio()&&g.audioName,videoName:g.hasVideo()&&g.videoName,screenName:g.hasScreen()&&g.screenName,ec:te.default.PEERCONNECTION_FAILED,publishRequestid:h.publishRequestId||0,p2pid:Ee}),h.dispatchEvent(Object(U.a)({type:"pubP2PLost",stream:g})),me&&me(te.default.PEERCONNECTION_FAILED);h.dispatchEvent(Object(U.a)({type:"pubP2PLost",stream:g}))}else if("connected"===He&&(E.default.debug("[".concat(h.clientId,"] publish p2p connected: "),h.p2ps),g.getId()===g.getUserId()&&(g._isAudioMuted()?h.makeReport(ve({action:"mute_local_audio",stream_id:g.getId()})):h.makeReport(ve({action:"unmute_local_audio",stream_id:g.getId()})),g._isVideoMuted()?h.makeReport(ve({action:"mute_local_video",stream_id:g.getId()})):h.makeReport(ve({action:"unmute_local_video",stream_id:g.getId()}))),!X))return X=!0,j.report.publish(h.joinInfo.sid,{lts:ye,succ:!0,audio:g.hasAudio(),video:g.hasVideo(),screenshare:g.hasScreen(),audioName:g.hasAudio()&&g.audioName,videoName:g.hasVideo()&&g.videoName,screenName:g.hasScreen()&&g.screenName,ec:null,publishRequestid:h.publishRequestId||0,p2pid:Ee}),de&&de()},g.pc.processSignalingMessage(Ve.sdp)},function(Ve,He){E.default.error("Publish Failed: ".concat(Ve)),j.report.publish(h.joinInfo.sid,{lts:ye,succ:!1,audio:g.hasAudio(),video:g.hasVideo(),screenshare:g.hasScreen(),audioName:g.hasAudio()&&g.audioName,videoName:g.hasVideo()&&g.videoName,screenName:g.hasScreen()&&g.screenName,ec:Ve,publishRequestid:h.publishRequestId||0,p2pid:Ee}),"TIMEOUT"!=Ve&&(h.processPublishFailure(g),me&&me(Ve))})},audio:g.hasAudio(),video:g.hasVideo(),screen:g.hasScreen(),optimizationMode:g.optimizationMode,isSubscriber:!1,stunServerUrl:h.stunServerUrl,turnServers:h.joinInfo.turnServers,maxAudioBW:_e.maxAudioBW,minVideoBW:_e.minVideoBW,maxVideoBW:_e.maxVideoBW,mode:h.mode,codec:h.codec,isVideoMute:g.userMuteVideo||g.peerMuteVideo,isAudioMute:g.userMuteAudio||g.peerMuteAudio,maxFrameRate:g.attributes.maxFrameRate,agoraStream:g,clientId:h.clientId,isCloudProxy3:3===h.joinInfo.proxyServerType,onNoIceCandidate:function(){h.dispatchEvent({type:"no_ice_candidate",stream:g})}},g.pc=Object(Q.a)(g.connectionSpec),g.pc.addStream(g.stream),E.default.debug("[".concat(h.clientId,"] PeerConnection add stream :"),g.stream),g.pc.onnegotiationneeded=function(Te){"motion"===g.optimizationMode&&g.pc.setRtpSenderParameters("maintain-framerate"),"detail"===g.optimizationMode&&g.pc.setRtpSenderParameters("maintain-resolution");var Ve={state:"negotiation",stream_type:1===ne.streamType?"low":"high",p2p_id:Ee,sdp:Te};h.makeRequest(ge(Ve),function(He){E.default.debug("Negotating Stream ".concat(g.getId())),g.pc.processSignalingMessage(He.sdp)},function(He,We){E.default.error("Negotiation failed ".concat(He),We,Ve)})},clearInterval(h.timers[g.getId()]),h.timers[g.getId()]=setInterval(function(){if(Object(M.getParameter)("REPORT_STATS")){var Te=0;g&&g.pc&&g.pc.getStats&&g.pc.getStatsRate(function(Ve){Ve.forEach(function(He){if(He&&He.id&&!(/_recv$/.test(He.id)||/^time$/.test(He.id)||~He.type.toLowerCase().indexOf("inbound"))&&g.getUserId()){if(-1===He.id.indexOf("outbound_rtp")&&-1===He.id.indexOf("OutboundRTP")&&-1===He.type.toLowerCase().indexOf("outbound")||"video"!==He.mediaType||(He.googFrameWidthSent=g.videoWidth+"",He.googFrameHeightSent=g.videoHeight+""),"video"===He.mediaType)try{var We=g.stream.getVideoTracks()[0];He.A_vstd=We.enabled?"0":"1"}catch(Rt){}if("audio"===He.mediaType)try{var it=g.stream.getAudioTracks()[0];He.A_astd=it.enabled?"0":"1"}catch(Rt){}if(g.getId()==g.getUserId()){var Qe=200*Te;Te++,setTimeout(function(){var ct,Xt,Rt=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();Rt>Object(M.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(Rt)):h.makeReport((ct=He,Xt={},Object.keys(ct).forEach(function(ot){Object(M.getParameter)("STATS_FILTER")[ot]||(Xt[p(ot)]=ct[ot])}),{_type:"publish_stats",_message:{stream_type:"high",stats:Xt}}))},Qe)}else Qe=200*Te,Te++,setTimeout(function(){var ct,Xt,Rt=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();Rt>Object(M.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(Rt)):h.makeReport((ct=He,Xt={},Object.keys(ct).forEach(function(ot){Object(M.getParameter)("STATS_FILTER")[ot]||(Xt[p(ot)]=ct[ot])}),{_type:"publish_stats",_message:{stream_type:"low",stats:Xt}}))},Qe)}})})}},3e3);var Ie=function(){Object(M.getParameter)("REPORT_STATS")&&g&&g.pc&&g.pc.getVideoRelatedStats&&g.pc.getVideoRelatedStats(function(Te){var Ve,He,it,Qe,We=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();We>Object(M.getParameter)("REPORT_STATS_TIMEOUT")?E.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(We)):g.getId()===g.getUserId()?h.makeReport((Ve=Te,He={},Object.keys(Ve).forEach(function(it){Object(M.getParameter)("STATS_FILTER")[it]||(He[p(it)]=Ve[it])}),{_type:"publish_related_stats",_message:{stream_type:"high",stats:He}})):h.makeReport((it=Te,Qe={},Object.keys(it).forEach(function(Rt){Object(M.getParameter)("STATS_FILTER")[Rt]||(Qe[p(Rt)]=it[Rt])}),{_type:"publish_related_stats",_message:{stream_type:"low",stats:Qe}}))})};Ie(),clearInterval(h.timers[g.getId()+"_RelatedStats"]),h.timers[g.getId()+"_RelatedStats"]=setInterval(Ie,1e3)}}},h.unpublish=function(g,ne,de,me){if("object"!==_()(g)||null===g)return E.default.error("[".concat(h.clientId,"] Invalid local stream")),void pe(me,te.default.INVALID_LOCAL_STREAM);if(h.state!==De)return E.default.error("[".concat(h.clientId,"] User not in the session")),void pe(me,te.default.INVALID_OPERATION);if(null!=h.timers[g.getId()]&&(clearInterval(h.timers[g.getId()]),clearInterval(h.timers[g.getId()+"_RelatedStats"])),void 0!==h.socket)if(g.local&&void 0!==h.localStreams[g.getId()]){delete h.localStreams[g.getId()];var ye={stream_id:g.getUserId(),stream_type:1===ne.streamType?"low":"high"};h.makeRequest({_type:"unpublish",_message:ye}),(g.hasAudio()||g.hasVideo()||g.hasScreen())&&void 0===g.url&&void 0!==g.pc&&(g.pc.close(),g.pc=void 0),g.onClose=void 0,g._onAudioMute=void 0,g._onAudioUnute=void 0,g._onVideoMute=void 0,g._onVideoUnmute=void 0,h.p2ps.delete(g.p2pId),de&&de()}else E.default.error("[".concat(h.clientId,"] Invalid local stream")),pe(me,te.default.INVALID_LOCAL_STREAM);else E.default.error("[".concat(h.clientId,"] User not in the session")),pe(me,te.default.INVALID_OPERATION)},h.subscribe=function(g,ne,de){var me=(new Date).getTime();g.subscribeLTS=me;var ye=!1;if(E.default.info("[".concat(h.clientId,"] Gatewayclient ").concat(h.uid," Subscribe ").concat(g.getId(),": ").concat(JSON.stringify(g.subscribeOptions))),"object"!==_()(g)||null===g)return E.default.error("[".concat(h.clientId,"] Invalid remote stream")),de&&de(te.default.INVALID_REMOTE_STREAM),void j.report.subscribe(h.joinInfo.sid,{lts:me,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:te.default.INVALID_REMOTE_STREAM});if(h.state!==De&&(E.default.error("[".concat(h.clientId,"] User is not in the session")),!ye))return ye=!0,j.report.subscribe(h.joinInfo.sid,{lts:me,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:te.default.INVALID_OPERATION}),de&&de(te.default.INVALID_OPERATION);if(!g.local&&h.remoteStreams.hasOwnProperty(g.getId()))if(g.hasAudio()||g.hasVideo()||g.hasScreen()){var X=h.generateP2PId();h.p2ps.set(X,g),g.p2pId=X,g.pc=Object(Q.a)({callback:function(_e){_e||de&&de("CANNOT_GET_OFFER");var Ee={stream_id:g.getId(),audio:!g.subscribeOptions||g.subscribeOptions.audio,video:!g.subscribeOptions||g.subscribeOptions.video,codec:h.codec,p2p_id:X,sdp:_e,tcc:Object(M.getParameter)("SUBSCRIBE_TCC"),extend:Object(M.getParameter)("SUB_EXTEND")};h.makeRequest({_type:"subscribe",_message:Ee},function(Ie){g.pc.processSignalingMessage(Ie.sdp)},function(Ie,Te){E.default.error("[".concat(h.clientId,"] Subscribe remote stream Failed: ").concat(Ie,", closing stream "),g.getId(),Te),j.report.subscribe(h.joinInfo.sid,{lts:me,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:Ie}),"TIMEOUT"!=Ie&&(h.processSubscribeFailure(g),de&&de(Ie))})},nop2p:!0,audio:!0,video:!0,screen:g.hasScreen(),isSubscriber:!0,stunServerUrl:h.stunServerUrl,turnServers:h.joinInfo.turnServers,isVideoMute:g.userMuteVideo,isAudioMute:g.userMuteAudio,uid:g.getId(),agoraStream:g,clientId:h.clientId}),g.pc.onaddstream=function(_e,Ee){if(g._onAudioUnmute=function(){h.makeReport(ve({action:"unmute_remote_audio",stream_id:g.getId()}),function(){},function(){})},g._onAudioMute=function(){h.makeReport(ve({action:"mute_remote_audio",stream_id:g.getId()}),function(){},function(){})},g._onVideoUnmute=function(){h.makeReport(ve({action:"unmute_remote_video",stream_id:g.getId()}),function(){},function(){})},g._onVideoMute=function(){h.makeReport(ve({action:"mute_remote_video",stream_id:g.getId()}),function(){},function(){})},"ontrack"===Ee&&"video"===_e.track.kind||"onaddstream"===Ee){E.default.info("[".concat(h.clientId,"] Remote stream subscribed with uid "),g.getId());var Ie=h.remoteStreams[g.getId()];if(h.remoteStreams[g.getId()].stream="onaddstream"===Ee?_e.stream:_e.streams[0],h.remoteStreams[g.getId()].hasVideo()){if(Object(b.isFireFox)()||Object(b.isSafari)()){var Te=h.remoteStreams[g.getId()].stream;Object(P.vsResHack)(Te,function(We,it){g.videoWidth=We,g.videoHeight=it},function(We){return E.default.warning("[".concat(h.clientId,"] vsResHack failed: ")+We)})}}else{var Ve=h.remoteStreams[g.getId()];Ve.peerMuteVideo=!0,h._adjustPCMuteStatus(Ve)}Ie&&Ie.isPlaying()&&Ie.elementID&&(E.default.debug("[".concat(h.clientId,"] Reload Player ").concat(Ie.elementID," StreamId ").concat(Ie.getId())),g.audioOutput=Ie.audioOutput,Ie.stop(),g.play(Ie.elementID,Ie.playOptions)),delete g.audioLevelHelper;var He=Object(U.e)({type:"stream-subscribed",stream:h.remoteStreams[g.getId()]});h.dispatchEvent(He)}},clearInterval(h.timers[g.getId()]),h.timers[g.getId()]=setInterval(function(){if(Object(M.getParameter)("REPORT_STATS")){var _e=0;g&&g.pc&&g.pc.getStats&&g.pc.getStatsRate(function(Ee){Ee.forEach(function(Ie){if(Ie&&Ie.id){if(/_send$/.test(Ie.id)||/^time$/.test(Ie.id)||/^bweforvideo$/.test(Ie.id))return;-1===Ie.id.indexOf("inbound_rtp")&&-1===Ie.id.indexOf("inbound-rtp")&&-1===Ie.type.toLowerCase().indexOf("inbound")||"video"!==Ie.mediaType||(Ie.googFrameWidthReceived=g.videoWidth+"",Ie.googFrameHeightReceived=g.videoHeight+"");var Te=200*_e;_e++;var Ve=g.getId();setTimeout(function(){var He=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();if(He>Object(M.getParameter)("REPORT_STATS_TIMEOUT"))E.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(He));else{if("video"===Ie.mediaType)try{var We=g.stream.getVideoTracks()[0];Ie.A_vrtd=We.enabled?"0":"1",g.player&&g.player.freezeTimeCounterList.length>0&&(Ie.A_vrft=g.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(Qe){}if("audio"===Ie.mediaType)try{var it=g.stream.getAudioTracks()[0];Ie.A_artd=it.enabled?"0":"1"}catch(Qe){}h.makeReport(Ce(Ve,Ie))}},Te)}})})}},3e3),clearInterval(h.timers[g.getId()+"_RelatedStats"]),h.timers[g.getId()+"_RelatedStats"]=setInterval(function(){if(Object(M.getParameter)("REPORT_STATS")&&g&&g.pc){var _e=h.socket&&h.socket.getLastMsgTime()&&Date.now()-h.socket.getLastMsgTime();if(_e>Object(M.getParameter)("REPORT_STATS_TIMEOUT"))return void E.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(_e));g.pc.getVideoRelatedStats&&g.pc.getVideoRelatedStats(function(Ee){g.player&&(g.hasVideo()&&!g.peerMuteVideo&&(Ee.isFreeze=g.player.freezeCount>g.player.lastFreezeCount),g.player.lastFreezeCount=g.player.freezeCount),h.makeReport(le(g.getId(),Ee))}),g.pc.getAudioRelatedStats&&g.pc.getAudioRelatedStats(function(Ee){h.makeReport(le(g.getId(),Ee))})}},1e3),h.audioLevel[g.getId()]=0,clearInterval(h.timers[g.getId()+"audio"]),h.timers[g.getId()+"audio"]=setInterval(function(){h.hasListeners("active-speaker")&&g&&g.pc&&"established"===g.pc.state&&g.pc.getStats&&g.pc.getStats(function(_e){_e.forEach(function(Ee){if("audio"===Ee.mediaType){if(Ee.audioOutputLevel>5e3)for(var Ie in h.audioLevel[g.getId()]<20&&(h.audioLevel[g.getId()]+=1),h.audioLevel)Ie!==""+g.getId()&&h.audioLevel[Ie]>0&&(h.audioLevel[Ie]-=1);var Te=Object.keys(h.audioLevel).sort(function(He,We){return h.audioLevel[We]-h.audioLevel[He]});if(h.activeSpeaker!==Te[0]){var Ve=Object(U.a)({type:"active-speaker",uid:Te[0]});h.dispatchEvent(Ve),h.activeSpeaker=Te[0],E.default.debug("[".concat(h.clientId,"] Update active speaker: ").concat(h.activeSpeaker))}}})},50)},50),g.pc.oniceconnectionstatechange=function(_e){if("failed"===_e)null!=h.timers[g.getId()]&&(clearInterval(h.timers[g.getId()]),clearInterval(h.timers[g.getId()]+"audio")),E.default.error("[".concat(h.clientId,"] Subscriber connection is lost -- streamId: ").concat(g.getId(),", p2pId: ").concat(X)),E.default.debug("[".concat(h.clientId,"] subscribe p2p failed: "),h.p2ps),ye||(ye=!0,de&&de(te.default.PEERCONNECTION_FAILED),j.report.subscribe(h.joinInfo.sid,{lts:me,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:te.default.PEERCONNECTION_FAILED,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:X})),h.remoteStreams[g.getId()]&&h.p2ps.has(X)&&(h.p2ps.delete(X),h.dispatchEvent(Object(U.a)({type:"subP2PLost",stream:g})));else if("connected"===_e&&(E.default.debug("[".concat(h.clientId,"] subscribe p2p connected: "),h.p2ps),!ye)){ye=!0,j.report.subscribe(h.joinInfo.sid,{lts:me,succ:!0,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:null,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:X}),h._adjustPCMuteStatus(g);var Ee=!1,Ie=!1,Te=!1,Ve=setInterval(function(){Ee&&Ie||(g.pc?g.pc.getStats(function(Rt){Rt.forEach(function(ct){if((-1!==ct.id.indexOf("recv")||ct.type&&-1!==ct.type.toLowerCase().indexOf("inbound")||-1!==ct.id.indexOf("inbound_rtp")||-1!==ct.id.indexOf("inbound-rtp")||-1!==ct.id.indexOf("InboundRTP"))&&"audio"===ct.mediaType){if((ct.googDecodingNormal>0||ct.audioOutputLevel>0)&&!Ee){Ee=!0,h.dispatchEvent({type:"first-audio-frame-decode",stream:g}),Ee&&Ie&&clearInterval(Ve);var Xt=Date.now(),ot=j.report.getSessionStartTime(h.joinInfo.sid);j.report.firstAudioDecode(h.joinInfo.sid,{peerid:g.uintId,uid:h.uid,elapse:Xt-ot,subscribeElapse:Xt-g.subscribeLTS,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:X})}parseInt(ct.packetsReceived)>0&&!Ie&&(Ie=!0,h.dispatchEvent({type:"first-audio-packet-received",stream:g}),Ee&&Ie&&clearInterval(Ve),Xt=Date.now(),ot=j.report.getSessionStartTime(h.joinInfo.sid),j.report.firstAudioReceived(h.joinInfo.sid,{peerid:g.uintId,uid:h.uid,elapse:Xt-ot,subscribeElapse:Xt-g.subscribeLTS,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:X}))}})},100):clearInterval(Ve))},100),He=!1,We=!1,it=setInterval(function(){He&&We||(g.pc?g.pc.getStats(function(Rt){Rt.forEach(function(ct){if((-1!==ct.id.indexOf("recv")||ct.type&&-1!==ct.type.toLowerCase().indexOf("inbound")||-1!==ct.id.indexOf("inbound_rtp")||-1!==ct.id.indexOf("inbound-rtp")||-1!==ct.id.indexOf("InboundRTP"))&&"video"===ct.mediaType){if((ct.framesDecoded>0||ct.googFramesDecoded>0)&&!He){He=!0,h.dispatchEvent({type:"first-video-frame-decode",stream:g}),He&&We&&clearInterval(it);var Xt=Date.now(),ot=j.report.getSessionStartTime(h.joinInfo.sid);g.firstFrameTime=(new Date).getTime()-g.subscribeLTS,j.report.firstVideoDecode(h.joinInfo.sid,{peerid:g.uintId,width:parseInt(ct.googFrameWidthReceived)||0,height:parseInt(ct.googFrameHeightReceived)||0,uid:h.uid,elapse:Xt-ot,subscribeElapse:Xt-g.subscribeLTS,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:X})}ct.packetsReceived>0&&!We&&(We=!0,h.dispatchEvent({type:"first-video-packet-received",stream:g}),He&&We&&clearInterval(it),Xt=Date.now(),ot=j.report.getSessionStartTime(h.joinInfo.sid),j.report.firstVideoReceived(h.joinInfo.sid,{peerid:g.uintId,uid:h.uid,elapse:Xt-ot,subscribeElapse:Xt-g.subscribeLTS,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:X}))}})},100):clearInterval(it))},100),Qe=setInterval(function(){if(!Te){var Rt=g.getId(),ct=h.traffic_stats;if(ct&&ct.peer_delay){var Xt=ct.peer_delay.find(function(Ut){return Ut.peer_uid==Rt});if(Xt){if(Te=!0,h.peerPublishDurationMap.get(g.getId()))return void clearInterval(Qe);var ot=Xt.peer_publish_audio_duration,$n=Xt.peer_publish_video_duration;if(void 0===ot||void 0===$n)return;h.peerPublishDurationMap.set(g.getId(),!0);var pt=j.report.getSessionStartTime(h.joinInfo.sid),eo=(ot||$n)+(Date.now()-ct.timestamp),Es=Date.now();j.report.peerPublishStatus({audiotag:ot?1:-1,videotag:$n?1:-1,lts:Es,sid:h.joinInfo.sid,cname:h.joinInfo.cname,cid:h.joinInfo.cid,uid:h.joinInfo.uid,elapse:Es-pt,peer:g.uintId,peerPublishDuration:eo,joinChannelSuccessElapse:Es-h.joinSuccessLts,subscribeElapse:Es-g.subscribeLTS}),clearInterval(Qe)}}}},1e3);return g.sid=h.joinInfo.sid,ne&&ne()}}}else E.default.error("[".concat(h.clientId,"] Invalid remote stream")),ye||(ye=!0,de&&de(te.default.INVALID_REMOTE_STREAM),j.report.subscribe(h.joinInfo.sid,{lts:me,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:te.default.INVALID_REMOTE_STREAM}));else E.default.error("[".concat(h.clientId,"] No such remote stream")),ye||(ye=!0,de&&de(te.default.NO_SUCH_REMOTE_STREAM),j.report.subscribe(h.joinInfo.sid,{lts:me,succ:!1,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:te.default.NO_SUCH_REMOTE_STREAM}))},h.subscribeChange=function(g,ne,de){var me=Date.now();E.default.info("[".concat(h.clientId,"] Gatewayclient ").concat(h.uid," SubscribeChange ").concat(g.getId(),": ").concat(JSON.stringify(g.subscribeOptions))),h._adjustPCMuteStatus(g);var ye={stream_id:g.getId(),audio:g.subscribeOptions.audio,video:g.subscribeOptions.video};h.makeRequest({_type:"subscribe_change",_message:ye},function(X){var _e=Object(U.e)({type:"stream-subscribe-changed",stream:h.remoteStreams[g.getId()]});j.report.subscribe(h.joinInfo.sid,{lts:me,succ:!0,video:g.subscribeOptions&&g.subscribeOptions.video,audio:g.subscribeOptions&&g.subscribeOptions.audio,peerid:g.getId(),ec:null,subscribeRequestid:h.subscribeRequestId.get(g.getId())||0,p2pid:h.p2ps.get(g.getId())}),h.dispatchEvent(_e),ne&&ne()},function(X,_e){E.default.error("[".concat(h.clientId,"] Subscribe Change Failed ").concat(g.getId()),X,_e),de&&de(X,_e)})},h.processPublishFailure=function(g){g.publishLTS=null,g.p2pId&&h.p2ps.get(g.p2pId)===g&&h.p2ps.delete(g.p2pId),h.localStreams[g.getUserId()]===g&&delete h.localStreams[g.getUserId()],h.localStreams[g.getId()]===g&&delete h.localStreams[g.getId()],g.pc&&(g.pc.processSignalingMessage=function(){},g.pc.oniceconnectionstatechange=function(){},g.pc.close(),delete g.pc),delete g.onClose,delete g._onAudioUnmute,delete g._onVideoUnmute,delete g._onAudioMute,delete g._onVideoMute,delete g._onAudioUnmute},h.processSubscribeFailure=function(g){g.p2pId&&h.p2ps.get(g.p2pId)===g&&h.p2ps.delete(g.p2pId),g.pc&&(g.pc.onaddstream=function(){},g.pc.processSignalingMessage=function(){},g.pc.oniceconnectionstatechange=function(){},g.pc.close(),delete g.pc),delete g.onClose,delete g._onAudioUnmute,delete g._onVideoUnmute,delete g._onAudioMute,delete g._onVideoMute,delete g._onAudioUnmute},h._adjustPCMuteStatus=function(g){E.default.debug("[".concat(h.clientId,"]: use _adjustPCMuteStatus: ").concat(g.getId())),E.default.debug("[".concat(h.clientId,"]: video: ").concat(g.video,", audio: ").concat(g.audio,", suboption: ").concat(JSON.stringify(g.subscribeOptions),",userMuteVideo: ").concat(g.userMuteVideo,", peerMuteVideo: ").concat(g.peerMuteVideo,", userMuteAudio: ").concat(g.userMuteAudio,", peerMuteAudio: ").concat(g.peerMuteAudio)),!g.local&&g.pc&&g.pc.peerConnection.getReceivers&&g.pc.peerConnection.getReceivers().forEach(function(ne){if(ne&&ne.track&&"audio"===ne.track.kind){var de=!g.userMuteAudio&&!g.peerMuteAudio;g.subscribeOptions&&!g.subscribeOptions.audio&&(de=!1),E.default.debug("[".concat(h.clientId,"]: set receiver audio track: ").concat(de)),ne.track.enabled=!!de}else if(ne&&ne.track&&"video"===ne.track.kind){var me=!g.userMuteVideo&&!g.peerMuteVideo;g.subscribeOptions&&!g.subscribeOptions.video&&(me=!1),E.default.debug("[".concat(h.clientId,"]: set receiver video track: ").concat(me)),ne.track.enabled=!!me}})},h.unsubscribe=function(g,ne,de){if("object"!==_()(g)||null===g)return E.default.error("[".concat(h.clientId,"] Invalid remote stream")),void pe(de,te.default.INVALID_REMOTE_STREAM);if(h.state!==De)return E.default.error("[".concat(h.clientId,"] User is not in the session")),void pe(de,te.default.INVALID_OPERATION);if(null!=h.timers[g.getId()]&&(clearInterval(h.timers[g.getId()]),clearInterval(h.timers[g.getId()]+"audio")),null!=h.audioLevel[g.getId()]&&delete h.audioLevel[g.getId()],null!=h.timer_counter[g.getId()]&&delete h.timer_counter[g.getId()],h.remoteStreams.hasOwnProperty(g.getId())){if(!h.socket)return E.default.error("[".concat(h.clientId,"] User is not in the session")),void pe(de,te.default.INVALID_OPERATION);if(g.local)return E.default.error("[".concat(h.clientId,"] Invalid remote stream")),void pe(de,te.default.INVALID_REMOTE_STREAM);g.close(),g.stop();var me={stream_id:g.getId()};h.makeRequest({_type:"unsubscribe",_message:me}),void 0!==g.pc&&(g.pc.close(),g.pc=void 0),g.onClose=void 0,g._onAudioMute=void 0,g._onAudioUnute=void 0,g._onVideoMute=void 0,g._onVideoUnmute=void 0,delete g.subscribeOptions,h.p2ps.delete(g.p2pId),E.default.info("[".concat(h.clientId,"] Unsubscribe stream success")),ne&&ne()}else pe(de,te.default.NO_SUCH_REMOTE_STREAM)},h.setRemoteVideoStreamType=function(g,ne){if(E.default.debug("[".concat(h.clientId,"] Switching remote video stream ").concat(g.getId()," to ").concat(ne)),"object"===_()(g)&&null!==g)if(h.state===De){if(!g.local){switch(ne){case h.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case h.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case h.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var de={stream_id:g.getId(),stream_type:ne};h.makeRequest({_type:"switch_video_stream",_message:de},function(){E.default.debug("SwitchVideoStream Success ".concat(de.stream_id," ").concat(de.stream_type))},function(me,ye){E.default.error("SwitchVideoStream Error ".concat(me," ").concat(de.stream_id," ").concat(de.stream_type),ye)})}}else E.default.error("[".concat(h.clientId,"] User is not in the session"));else E.default.error("[".concat(h.clientId,"] Invalid remote stream"))},h.renewToken=function(g,ne,de){g?h.key?h.state!==De?(E.default.debug("[".concat(h.clientId,"] Client is not connected. Trying to rejoin")),h.key=g,h.rejoin(),ne&&ne()):(E.default.debug("[".concat(h.clientId,"] renewToken from ").concat(h.key," to ").concat(g)),h.key=g,h.makeRequest({_type:"renew_token",_message:{token:g}},ne,de)):(E.default.error("[".concat(h.clientId,"] Client is previously joined without token")),de&&de(te.default.INVALID_PARAMETER)):(E.default.error("[".concat(h.clientId,"] Invalid Token ").concat(g)),de&&de(te.default.INVALID_PARAMETER))},h.setStreamFallbackOption=function(g,ne){if(E.default.debug("[".concat(h.clientId,"] Set stream fallback option ").concat(g.getId()," to ").concat(ne)),"object"===_()(g)&&null!==g)if(h.state===De){if(!g.local){switch(ne){case h.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case h.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case h.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var de={stream_id:g.getId(),fallback_type:ne};h.makeRequest({_type:"set_fallback_option",_message:de},function(){E.default.debug("SetStreamFallbackOption success ".concat(de.stream_id," ").concat(ne))},function(me,ye){E.default.error("Failed to SetStreamFallbackOption ".concat(de.stream_id," ").concat(ne," ").concat(me),ye)})}}else E.default.error("[".concat(h.clientId,"] User is not in the session"));else E.default.error("[".concat(h.clientId,"] Invalid remote stream"))},h.enableAudioVolumeIndicator=function(g,ne){h.audioVolumeIndication.enabled=!0,h.audioVolumeIndication.interval=g,h.audioVolumeIndication.smooth=ne,h.resetAudioVolumeIndication()},h.resetAudioVolumeIndication=function(){if(clearInterval(h.timers.audioVolumeIndication),clearInterval(h.timers.audioVolumeSampling),h.audioVolumeIndication.enabled&&h.audioVolumeIndication.interval){var g=Math.floor(1e3*h.audioVolumeIndication.smooth/100);clearInterval(h.timers.audioVolumeSampling),h.timers.audioVolumeSampling=setInterval(function(){h.audioVolumeSampling||(h.audioVolumeSampling={});var ne={};for(var de in h.remoteStreams){var me=h.remoteStreams[de];if(me.stream&&me.hasAudio()){var ye=me.getAudioLevel();ye>0&&ye<1&&(ye*=100);var X=h.audioVolumeSampling[de]||[];for(X.push(ye);X.length>g;)X.shift();ne[de]=X}}h.audioVolumeSampling=ne},100),clearInterval(h.timers.audioVolumeIndication),h.timers.audioVolumeIndication=setInterval(function(){if(h.socket&&h.socket.signal&&h.socket.signal.connection&&h.socket.signal.connection.readyState===WebSocket.OPEN){var ne=[];for(var de in h.remoteStreams)if(h.audioVolumeSampling&&h.audioVolumeSampling[de]){var me=h.audioVolumeSampling[de],ye=0;me.forEach(function(Ie){ye+=Ie});var X={uid:de,level:Math.floor(ye/me.length)};X.level&&ne.push(X)}var _e=ne.sort(function(Ie,Te){return Ie.level-Te.level});E.default.debug("[".concat(h.clientId,"] volume-indicator "),JSON.stringify(_e)),h.audioVolumeIndication.sortedAudioVolumes=_e;var Ee=Object(U.a)({type:"volume-indicator",attr:_e});h.dispatchEvent(Ee)}},h.audioVolumeIndication.interval)}},h.closeGateway=function(){E.default.debug("[".concat(h.clientId,"] close gateway")),h.state=Oe,h.socket.close(),Ne()},h.startChannelMediaRelay=function(){var g=T()(w.a.mark(function ne(de){var me,ye,_e;return w.a.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!h.channelMediaRelayController){Ee.next=2;break}throw new L.ChannelMediaError("RELAY_ALREADY_START","",L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return me=function(Ie){h.dispatchEvent({type:"channel-media-relay-event",code:Ie})},ye=function(Ie,Te,Ve){Ie===L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&Te===L.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(h.channelMediaRelayController.dispose(),h.channelMediaRelayController=null),h.dispatchEvent({type:"channel-media-relay-state",state:Ie,code:Te,data:Ve})},h.channelMediaRelayController=new ee.a(h.joinInfo,h.clientId),h.channelMediaRelayController.on("event",me),h.channelMediaRelayController.on("state",ye),Ee.prev=7,Ee.next=10,h.channelMediaRelayController.startChannelMediaRelay(de);case 10:Ee.next=22;break;case 12:throw Ee.prev=12,Ee.t0=Ee.catch(7),E.default.debug("[".concat(h.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(Ee.t0))),h.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[_e=Ee.t0 instanceof L.ChannelMediaError?"SetSourceChannelStatus"===Ee.t0.data||Ee.t0.data&&Ee.t0.data.serverResponse&&"SetSourceChannel"===Ee.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===Ee.t0.data||Ee.t0.data&&Ee.t0.data.serverResponse&&"SetDestChannel"===Ee.t0.data.serverResponse.command?"FAILED_JOIN_DEST":Ee.t0.data&&Ee.t0.data.serverResponse&&"StartPacketTransfer"===Ee.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":Ee.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||Ee.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":Ee.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||Ee.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":Ee.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":Ee.t0.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||Ee.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR"]}),h.channelMediaRelayController&&(h.channelMediaRelayController.dispose(),h.channelMediaConfig=null,h.channelMediaRelayController=null),h.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(_e,null,L.CHANNEL_MEDIA_RELAY_ERROR[_e]);case 22:h.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),h.channelMediaConfig=de;case 24:case"end":return Ee.stop()}},ne,null,[[7,12]])}));return function(ne){return g.apply(this,arguments)}}(),h.updateChannelMediaRelay=function(){var g=T()(w.a.mark(function ne(de){var me,ye;return w.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(h.channelMediaRelayController){X.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return X.prev=2,X.next=5,h.channelMediaRelayController.updateChannelMediaRelay(de);case 5:X.next=18;break;case 7:throw X.prev=7,X.t0=X.catch(2),E.default.debug("[".concat(h.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),me=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,ye=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",h.dispatchEvent({type:"channel-media-relay-event",code:L.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),h.dispatchEvent({type:"channel-media-relay-state",state:me,code:L.CHANNEL_MEDIA_RELAY_ERROR[ye]}),h.channelMediaRelayController&&(h.channelMediaRelayController.dispose(),h.channelMediaConfig=null,h.channelMediaRelayController=null),h.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(ye,null,L.CHANNEL_MEDIA_RELAY_ERROR[ye]);case 18:h.channelMediaConfig=de;case 19:case"end":return X.stop()}},ne,null,[[2,7]])}));return function(ne){return g.apply(this,arguments)}}(),h.stopChannelMediaRelay=T()(w.a.mark(function g(){var de;return w.a.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(h.channelMediaRelayController){me.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return me.prev=2,me.next=5,h.channelMediaRelayController.stopChannelMediaRelay();case 5:me.next=17;break;case 7:throw me.prev=7,me.t0=me.catch(2),E.default.debug("[".concat(h.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),de=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",h.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[de]}),h.channelMediaRelayController&&(h.channelMediaRelayController.dispose(),h.channelMediaConfig=null,h.channelMediaRelayController=null),h.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(de,null,L.CHANNEL_MEDIA_RELAY_ERROR[de]);case 17:h.channelMediaConfig=null,h.channelMediaRelayController=null;case 19:case"end":return me.stop()}},g,null,[[2,7]])})),h.sendMetadata=function(g,ne){h.makeRequest({_type:"send_metadata",_message:{session_id:h.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(g)))}},function(){E.default.debug("[".concat(h.clientId,'] send metadata "').concat(g,'" success')),ne&&ne(null)},function(de){E.default.error("[".concat(h.clientId,'] send metadata "').concat(g,'" failed'),de),ne&&ne(de)})},h._reportWebsocketCloseEvent=function(g,ne){try{var de=j.report.getSessionStartTime(h.joinInfo.sid),me=Date.now();j.report.webSocketQuit({lts:me,sid:h.joinInfo.sid,cname:h.joinInfo.cname,cid:h.joinInfo.cid,uid:h.joinInfo.uid,elapse:me-de,succ:g,errorCode:ne,ip:null})}catch(ye){E.default.debug("[".concat(h.clientId,"]: _reportWebsocketCloseEvent exception, ").concat(ye))}};var F=function(){E.default.debug("[".concat(h.clientId,"] Reconnect gateway")),h.state=Oe,h.socket.close(),Ne(),h.reconnectMode="recover",h.state=ke,Ze()};h.recover=F;var Ne=function(){for(var g in h.dispatchEvent({type:"before-clear-connection"}),h.timers)h.timers.hasOwnProperty(g)&&clearInterval(h.timers[g]);for(var g in h.remoteStreams)if(h.remoteStreams.hasOwnProperty(g)){var ne=h.remoteStreams[g],de=Object(U.a)({type:"stream-removed",uid:ne.getId(),stream:ne});h.dispatchEvent(de)}h.p2ps.clear(),ce(),Je(),clearInterval(h.pingTimer)};h.rejoin=function(){h.socket&&(clearInterval(h.pingTimer),h.socket.close(),h.socket=void 0),h.state=ke,Ze()};var Ze=function(g,ne){h.dispatchEvent(Object(U.a)({type:"rejoin-start"})),g=g||function(de){E.default.info("[".concat(h.clientId,"] User ").concat(de," is re-joined to ").concat(h.joinInfo.cname)),h.dispatchEvent(Object(U.a)({type:"rejoin"})),h.channelMediaConfig&&h.startChannelMediaRelay(h.channelMediaConfig).then(function(){E.default.debug("[".concat(h.clientId,"] restartChannelMediaRelay success"))}).catch(function(me){E.default.debug("[".concat(h.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(me)))}),h.liveStreams&&h.liveStreams.size&&h.liveStreams.forEach(function(me,ye){me&&h.setLiveTranscoding(h.transcoding),h.startLiveStreaming(ye,me)}),h.injectLiveStreams&&h.injectLiveStreams.size&&h.injectLiveStreams.forEach(function(me,ye){h.addInjectStreamUrl(ye,me)})},ne=ne||function(de){E.default.error("[".concat(h.clientId,"] Re-join to channel failed "),de),h.dispatchEvent(Object(U.e)({type:"error",reason:de}))},h.key?(++h.rejoinAttempt,h.join(h.joinInfo,h.key,g,ne)):E.default.error("[".concat(h.clientId,"] Connection recover failed [Invalid channel key]"))},Ge=function(g,ne,de){if(h.onConnect=ne,h.socket){if(h.dispatchEvent({type:"reconnect"}),"retry"===h.reconnectMode)E.default.debug("[".concat(h.clientId,"] Retry current gateway")),h.socket.reconnect();else if("tryNext"===h.reconnectMode)E.default.debug("[".concat(h.clientId,"] Try next gateway")),h.socket.connectNext();else if("recover"===h.reconnectMode){E.default.debug("[".concat(h.clientId,"] Recover gateway")),E.default.debug("[".concat(h.clientId,"] Try to reconnect choose server and get gateway list again ")),h.reconnectingCS=!0;var me=h.joinInfo&&h.joinInfo.sid;Object(z.getGatewayList)(h.joinInfo,function(X){E.default.debug("[".concat(h.clientId,"] session:  ").concat(me," get gateway list success")),h.joinInfo.apResponse=X.res,h.reconnectingCS?h.socket.replaceHost(X.gateway_addr):E.default.debug("[".concat(h.clientId,"] session:  ").concat(me," already leave"))})}}else h.socket=function(B,H){var K={connect:function(){H.host=B,K.signal=Y(H),K.on=K.signal.on,K.dispatchEvent=K.signal.dispatchEvent,K.signal.on("onopen",function(ve){K.signal.onEvent=function(le){K.dispatchEvent(Object(U.d)({type:le.event,msg:le}))},K.dispatchEvent(Object(U.d)({type:"connect",msg:ve}))}),K.signal.on("onError",function(ve){onError(ve.msg.code,"error")})},getLastMsgTime:function(){return K.signal&&K.signal.lastMsgTime},getSendBytes:function(){return K.signal.getSendBytes()},getRecvBytes:function(){return K.signal.getRecvBytes()},getDuration:function(){return K.signal.getDuration()},disconnect:function(){K.signal.disconnect()},close:function(){K.signal.close()},getURL:function(){return K.signal.getURL()},reconnect:function(){K.signal.reconnect()},connectNext:function(){K.signal.connectNext()},replaceHost:function(ve){K.signal.replaceHost(ve)},emitSimpleMessage:function(ve,le){K.signal.sendSignalCommand(ve,le)},emitRequest:function(ve,le){K.signal.sendRequest(ve,le)},emitReport:function(ve){K.signal.sendReport(ve)}};return K.connect(),K}(g.gatewayAddr,{sid:h.joinInfo.sid,clientId:h.clientId,proxyServerType:h.joinInfo.proxyServerType}),h.socket.on("start-connection",function(X){h.ticket=X&&X.msg&&X.msg.ticket}),h.socket.on("on_uplink_stats",function(X){var _e={};for(var Ee in X)_e[S(Ee)]=X[Ee];if(h.OutgoingAvailableBandwidth=_e.uplink_available_bandwidth,h.localStreams[h.uid]){var Ie=h.localStreams[h.uid].uplinkStats;Ie&&Ie.period_fir===_e.period_fir||E.default.debug("[".concat(h.clientId,"]: Period fir change to: ").concat(_e.period_fir)),h.localStreams[h.uid].uplinkStats=_e}}),h.socket.on("connect",function(){h.dispatchEvent({type:"connected"}),h.attemps=1,h.onConnect()}),h.socket.on("recover",function(){h.state=ke,E.default.debug("[".concat(h.clientId,"] Try to reconnect choose server and get gateway list again ")),h.reconnectingCS=!0;var X=h.joinInfo&&h.joinInfo.sid;Object(z.getGatewayList)(h.joinInfo,function(_e){E.default.debug("[".concat(h.clientId,"] session:  ").concat(X," get gateway list success")),h.reconnectingCS?h.socket.replaceHost(_e.gateway_addr):E.default.debug("[".concat(h.clientId,"] session:  ").concat(X," already leave"))})}),h.socket.on("disconnect",function(X){if(E.default.debug("[".concat(h.clientId,"] Receive disconnect message")),h.state!==Oe){h.state=Oe,h._reportWebsocketCloseEvent(-1,te.WEBSOCKET_CLOSE_REASON.WS_DISCONNECT);var _e=Object(U.e)({type:"error",reason:te.default.SOCKET_DISCONNECTED});if(h.dispatchEvent(_e),h.reconnectMode=0===h.p2ps.size?"tryNext":"retry",Ne(),h.channelMediaRelayController&&h.channelMediaRelayController.dispose(),h.channelMediaRelayController=null,1!=K){var Ie=1e3*Math.min(30,Math.pow(2,h.attemps)-1);if(E.default.error("[".concat(h.clientId,"] Disconnect from server [").concat(JSON.stringify(X),"], attempt to recover [#").concat(h.attemps,"] after ").concat(Ie/1e3," seconds")),h.hasInvokeLeave)return E.default.debug("[".concat(h.clientId,"] No reconnection because Client.leave has been invoked")),void(h.hasInvokeLeave=!1);setTimeout(function(){h.attemps++,h.state=ke,h.inChannelInfo&&Date.now()-h.inChannelInfo.joinAt>Object(M.getParameter)("TICKET_RENEW_TIMEOUT")?(E.default.debug("Recovering to renew ticket"),F()):Ze()},Ie)}else{var Te=se.unregister(h);Te&&E.default.debug("[".concat(h.clientId,"] "),Te)}}}),h.socket.on("on_add_audio_stream",function(X){if(E.default.info("[".concat(h.clientId,"] Newly added audio stream with uid ").concat(X.uid)),h.joinInfo.stringUid&&"string"!=typeof X.uid&&E.default.error("StringUID is Mixed with UintUID"),h.remoteStreamsInChannel.has(X.uid)||h.remoteStreamsInChannel.add(X.uid),void 0===h.remoteStreams[X.uid]){var _e=Object(x.a)({streamID:X.uid,local:!1,audio:X.audio,video:X.video,uintUID:X.uint_id||X.uid});_e.peerMuteVideo=!0,h.remoteStreams[X.uid]=_e;var Ee=Object(U.e)({type:"stream-added",stream:_e});h.dispatchEvent(Ee);var Ie=h.remoteMuteState[X.uid];Ie&&Ie.audio&&(Ee=Object(U.a)({type:"mute-audio",uid:X.uid}),h.dispatchEvent(Ee)),Ie&&Ie.video&&(Ee=Object(U.a)({type:"mute-video",uid:X.uid}),h.dispatchEvent(Ee))}j.report.onAddAudioStream(h.joinInfo.sid,{peerid:X.uint_id||X.uid,uid:h.uid})}),h.socket.on("on_update_stream",function(X){E.default.info("[".concat(h.clientId,"] on_update_stream:"),X);var _e=h.remoteStreams[X.uid];if(h.joinInfo.stringUid&&"string"!=typeof X.uid&&E.default.error("StringUID is Mixed with UintUID"),_e){_e.audio=X.audio,_e.video=X.video,_e.screen=X.screen,_e.pc&&h._adjustPCMuteStatus(_e);var Ee=Object(U.e)({type:"stream-updated",stream:_e});h.dispatchEvent(Ee)}else E.default.debug("[".concat(h.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(X.uid));j.report.onUpdateStream(h.joinInfo.sid,{peerid:X.uint_id||X.uid,audio:X.audio,video:X.video,uid:h.uid})}),h.socket.on("on_add_video_stream",function(X){if(E.default.info("[".concat(h.clientId,"] Newly added remote stream with uid ").concat(X.uid,".")),h.joinInfo.stringUid&&"string"!=typeof X.uid&&E.default.error("StringUID is Mixed with UintUID"),h.remoteStreamsInChannel.has(X.uid)||h.remoteStreamsInChannel.add(X.uid),void 0===h.remoteStreams[X.uid]){var _e=Object(x.a)({streamID:X.uid,local:!1,audio:X.audio,video:X.video,uintUID:X.uint_id||X.uid});h.remoteStreams[X.uid]=_e;var Ee=Object(U.e)({type:"stream-added",stream:_e});h.dispatchEvent(Ee);var Ie=h.remoteMuteState[X.uid];Ie&&Ie.audio&&(Ee=Object(U.a)({type:"mute-audio",uid:X.uid}),h.dispatchEvent(Ee)),Ie&&Ie.video&&(Ee=Object(U.a)({type:"mute-video",uid:X.uid}),h.dispatchEvent(Ee))}else{var Te=h.remoteStreams[X.uid];if(Te.video=!0,Te.peerMuteVideo=!1,Te.pc&&h._adjustPCMuteStatus(Te),E.default.info("[".concat(h.clientId,"] Stream changed: enable video ").concat(X.uid)),void 0!==Te.stream&&Te.isPlaying()){var Ve=Te.player.elementID;Te.stop(),Te.play(Ve,Te.playOptions)}}j.report.onAddVideoStream(h.joinInfo.sid,{peerid:X.uint_id||X.uid,uid:h.uid})}),h.socket.on("on_remove_stream",function(X){E.default.info("[".concat(h.clientId,"] on_remove_stream:"),X),h.remoteStreamsInChannel.has(X.uid)&&h.remoteStreamsInChannel.delete(X.uid);var _e=h.remoteStreams[X.uid];if(_e){delete h.remoteStreams[X.uid],delete h.remoteMuteState[X.uid];var Ee=Object(U.e)({type:"stream-removed",stream:_e});h.dispatchEvent(Ee),_e.close(),void 0!==_e.pc&&(_e.pc.close(),_e.pc=void 0,h.p2ps.delete(_e.p2pId)),j.report.onRemoveStream(h.joinInfo.sid,{peerid:X.uint_id||X.uid,uid:h.uid})}else E.default.error("ERROR stream ",X.uid," not found onRemoveStream ",X)}),h.socket.on("on_publish_stream",function(X){E.default.info("[".concat(h.clientId,"] on_publish_stream:"),X),h.dispatchEvent({type:"streamPublished",stream:h.localStreams[X.uid],proxy:X.proxy}),j.report.reportApiInvoke(h.joinInfo.sid,{name:"on_publish_stream",options:{proxy:X.proxy}})()}),h.socket.on("mute_audio",function(X){E.default.info("[".concat(h.clientId,"] rcv peer mute audio: ").concat(X.uid)),h.remoteMuteState[X.uid]=h.remoteMuteState[X.uid]||{audio:!1,video:!1},h.remoteMuteState[X.uid].audio=!0;var _e=Object(U.a)({type:"mute-audio",uid:X.uid}),Ee=h.remoteStreams[X.uid];Ee?(Ee.peerMuteAudio=!0,Ee.pc&&h._adjustPCMuteStatus(Ee),h.dispatchEvent(_e)):E.default.debug("Ignoring event ".concat(X.type),X)}),h.socket.on("unmute_audio",function(X){E.default.info("[".concat(h.clientId,"] rcv peer unmute audio: ").concat(X.uid)),h.remoteMuteState[X.uid]=h.remoteMuteState[X.uid]||{audio:!1,video:!1},h.remoteMuteState[X.uid].audio=!1;var _e=Object(U.a)({type:"unmute-audio",uid:X.uid}),Ee=h.remoteStreams[X.uid];Ee?(Ee.peerMuteAudio=!1,Ee.pc&&h._adjustPCMuteStatus(Ee),h.dispatchEvent(_e)):E.default.debug("Ignoring event ".concat(X.type),X)}),h.socket.on("mute_video",function(X){E.default.info("[".concat(h.clientId,"] rcv peer mute video: ").concat(X.uid)),h.remoteMuteState[X.uid]=h.remoteMuteState[X.uid]||{audio:!1,video:!1},h.remoteMuteState[X.uid].video=!0;var _e=Object(U.a)({type:"mute-video",uid:X.uid}),Ee=h.remoteStreams[X.uid];Ee?(Ee.peerMuteVideo=!0,Ee.player&&(Ee.player.peerVideoReady=!1),Ee.pc&&h._adjustPCMuteStatus(Ee),h.dispatchEvent(_e)):E.default.debug("Ignoring event ".concat(X.type),X)}),h.socket.on("unmute_video",function(X){E.default.info("[".concat(h.clientId,"] rcv peer unmute video: ").concat(X.uid)),h.remoteMuteState[X.uid]=h.remoteMuteState[X.uid]||{audio:!1,video:!1},h.remoteMuteState[X.uid].video=!1;var _e=Object(U.a)({type:"unmute-video",uid:X.uid}),Ee=h.remoteStreams[X.uid];Ee?(Ee.peerMuteVideo=!1,Ee.pc&&h._adjustPCMuteStatus(Ee),h.dispatchEvent(_e)):E.default.debug("Ignoring event ".concat(X.type),X)}),h.socket.on("on_crypt_error",function(X){E.default.warning("[".concat(h.clientId,"] stream crypt error"));var _e=Object(U.a)({type:"crypt-error",cryptType:X.crypt_type});h.dispatchEvent(_e)}),h.socket.on("on_user_banned",function(X){E.default.info("[".concat(h.clientId,"] user banned uid: ").concat(X.uid," error: ").concat(X.error_code));var _e=Object(U.a)({type:"client-banned",uid:X.uid,attr:X.error_code});h.dispatchEvent(_e),K=!0}),h.socket.on("on_stream_fallback_update",function(X){E.default.info("[".concat(h.clientId,"] stream fallback peerId: ").concat(X.stream_id," type: ").concat(X.stream_type));var _e=Object(U.a)({type:"stream-fallback",uid:X.stream_id,stream:X.stream_id,attr:X.stream_type});h.dispatchEvent(_e)}),h.socket.on("stream_recover",function(X){E.default.info("[".concat(h.clientId,"] stream recover uid: ").concat(X.id," peerId: ").concat(X.peerid," type: ").concat(X.type));var _e=Object(U.a)({type:"stream-recover",uid:X.id,stream:X.peerid,attr:X.type});h.dispatchEvent(_e)}),h.socket.on("on_p2p_lost",function(X){E.default.debug("[".concat(h.clientId,"] p2plost: "),X,"p2ps:",h.p2ps);var _e,Ee="DTLS failed";(_e=h.localStreams[X.uid]||h.remoteStreams[X.uid])?(_e.pc&&_e.pc.offerCandidates&&0===_e.pc.offerCandidates.length&&(Ee="NO_CANDIDATES_IN_OFFER"),"publish"===X.event&&j.report.publish(h.joinInfo.sid,{lts:_e.publishLTS,succ:!1,audio:_e.hasAudio(),video:_e.hasVideo(),screenshare:_e.hasScreen(),audioName:_e.hasAudio()&&_e.audioName,videoName:_e.hasVideo()&&_e.videoName,screenName:_e.hasScreen()&&_e.screenName,ec:Ee,publishRequestid:h.publishRequestId||0,p2pid:h.p2ps.get(_e.getId())}),"subscribe"===X.event&&j.report.subscribe(h.joinInfo.sid,{lts:_e.subscribeLTS,succ:!1,video:_e.subscribeOptions&&_e.subscribeOptions.video,audio:_e.subscribeOptions&&_e.subscribeOptions.audio,peerid:X.uid+"",ec:Ee,subscribeRequestid:h.subscribeRequestId.get(_e.getId())||0,p2pid:h.p2ps.get(_e.getId())})):E.default.warning("P2PLost Stream Not found",X),E.default.debug("[".concat(h.clientId,"] p2plost:"),X.p2pid),(_e=h.p2ps.get(X.p2pid))&&(h.p2ps.delete(X.p2pid),_e.local?h.dispatchEvent(Object(U.a)({type:"pubP2PLost",stream:_e,attr:Ee})):h.remoteStreams[_e.getId()]&&h.dispatchEvent(Object(U.a)({type:"subP2PLost",stream:_e,attr:Ee})))}),h.socket.on("on_token_privilege_will_expire",function(X){E.default.debug("[".concat(h.clientId,"] Received Message onTokenPrivilegeWillExpire")),h.dispatchEvent(Object(U.a)({type:"onTokenPrivilegeWillExpire"}))}),h.socket.on("on_token_privilege_did_expire",function(){E.default.warning("[".concat(h.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),h.closeGateway(),h.dispatchEvent(Object(U.a)({type:"onTokenPrivilegeDidExpire"}))}),h.socket.on("enable_local_video",function(X){E.default.info("[".concat(h.clientId,"] enable_local_video:"),X),h.dispatchEvent(Object(U.a)({type:"enable-local-video",uid:X.uid}))}),h.socket.on("disable_local_video",function(X){E.default.info("[".concat(h.clientId,"] disable_local_video:"),X),h.dispatchEvent(Object(U.a)({type:"disable-local-video",uid:X.uid}))}),h._doWithAction=function(X,_e,Ee){var Ie,Te;"tryNext"===X?(Ie=_e,Te=Ee,E.default.debug("[".concat(h.clientId,"] Connect next gateway")),h.state=Oe,h.socket.close(),Ne(),h.reconnectMode="tryNext",h.state=ke,Ze(Ie,Te)):"retry"===X?function(Ie,Te){E.default.debug("[".concat(h.clientId,"] Reconnect gateway")),h.state=Oe,h.socket.close(),Ne(),h.reconnectMode="retry",h.state=ke,Ze(Ie,Te)}(_e,Ee):"quit"===X?(E.default.debug("[".concat(h.clientId,"] quit gateway")),h.state=Oe,h.socket.close(),Ne()):"recover"===X&&F()},h.socket.on("on_notification",function(X){if(E.default.debug("[".concat(h.clientId,"] Receive notification: "),X),"ERR_JOIN_BY_MULTI_IP"===te.GatewayErrorCode[X.code])return h.dispatchEvent({type:"onMultiIP",option:X.option});X.detail?h._doWithAction(u[te.GatewayErrorCode[X.code]]):X.action&&h._doWithAction(X.action)}),h.socket.on("on_user_offline",function(X){E.default.info("[".concat(h.clientId,"] on_user_offline:"),X);var _e=Object(U.a)({type:"peer-leave",uid:X.uid});if(h.remoteStreamsInChannel.has(X.uid)&&h.remoteStreamsInChannel.delete(X.uid),h.remoteStreams.hasOwnProperty(X.uid)&&(_e.stream=h.remoteStreams[X.uid]),_e.reason=X.reason,h.dispatchEvent(_e),E.default.info("[".concat(h.clientId,"] remove remoteMuteState "),X.uid),delete h.remoteMuteState[X.uid],h.remoteStreams.hasOwnProperty(X.uid)){E.default.info("[".concat(h.clientId,"] closing stream on peer leave"),X.uid);var Ee=h.remoteStreams[X.uid];Ee.close(),delete h.remoteStreams[X.uid],j.report.onRemoveStream(h.joinInfo.sid,{peerid:X.uint_id||X.uid,uid:h.uid}),void 0!==Ee.pc&&(Ee.pc.close(),Ee.pc=void 0,h.p2ps.delete(Ee.p2pId))}h.timers.hasOwnProperty(X.uid)&&(clearInterval(h.timers[X.uid]),clearInterval(h.timers[X.uid]+"_RelatedStats"),delete h.timers[X.uid]),null!=h.audioLevel[X.uid]&&delete h.audioLevel[X.uid],null!=h.timer_counter[X.uid]&&delete h.timer_counter[X.uid]}),h.socket.on("onUplinkStats",function(X){}),h.socket.on("liveStreamingStarted",function(X){var _e=Object(U.c)({type:"liveStreamingStarted",url:X.url});h.dispatchEvent(_e)}),h.socket.on("liveStreamingFailed",function(X){var _e=Object(U.c)({type:"liveStreamingFailed",url:X.url});h.dispatchEvent(_e)}),h.socket.on("liveStreamingStopped",function(X){var _e=Object(U.c)({type:"liveStreamingStopped",url:X.url});h.dispatchEvent(_e)}),h.socket.on("liveTranscodingUpdated",function(X){var _e=Object(U.c)({type:"liveTranscodingUpdated",reason:X.reason});h.dispatchEvent(_e)}),h.socket.on("streamInjectedStatus",function(X){var _e=Object(U.c)({type:"streamInjectedStatus",url:X.url,uid:X.uid,status:X.status});h.dispatchEvent(_e)}),h.socket.on("on_user_online",function(X){h.joinInfo.stringUid&&"string"!=typeof X.uid&&E.default.error("StringUID is Mixed with UintUID"),h.dispatchEvent({type:"peer-online",uid:X.uid})}),h.socket.on("receive_metadata",function(X){h.joinInfo.stringUid&&"string"!=typeof X.uid&&E.default.error("StringUID is Mixed with UintUID");var _e=decodeURIComponent(escape(window.atob(X.metadata)));E.default.debug("[".concat(h.clientId,"] received ").concat(X.uid," metadata: ").concat(_e)),h.dispatchEvent({type:"receive-metadata",uid:X.uid,metadata:_e})})},qe=function(g,ne){if(void 0!==h.socket)try{h.socket.emitSimpleMessage(g,function(de,me){ne&&ne(de,me)})}catch(de){E.default.error("[".concat(h.clientId,"] Error in sendSimpleSdp [").concat(de,"]"))}else E.default.error("[".concat(h.clientId,"] Error in sendSimpleSdp [socket not ready]"))},Je=function(){for(var g in h.localStreams)if(void 0!==h.localStreams[g]){var ne=h.localStreams[g];delete h.localStreams[g],void 0!==ne.pc&&(ne.pc.close(),ne.pc=void 0)}},ce=function(){for(var g in h.remoteStreamsInChannel.clear(),h.remoteStreams)if(h.remoteStreams.hasOwnProperty(g)){var ne=h.remoteStreams[g];ne.isPlaying()&&ne.stop(),ne.close(),delete h.remoteStreams[g],void 0!==ne.pc&&(ne.pc.close(),ne.pc=void 0)}};return h},se={_gatewayClients:{},register:function(B,H){if(!H.uid){var K="NO_UID_PROVIDED";return E.default.error("[".concat(B.clientId,"] "),K,H),K}return H.cname?this._gatewayClients[H.cname]&&this._gatewayClients[H.cname][H.uid]&&this._gatewayClients[H.cname][H.uid]!==B?(K="UID_CONFLICT",E.default.error("[".concat(B.clientId,"] "),K,H),K):(E.default.debug("[".concat(B.clientId,"] register client Channel"),H.cname,"Uid",H.uid),this._gatewayClients[H.cname]||(this._gatewayClients[H.cname]={}),this._gatewayClients[H.cname][H.uid]=B,null):(K="NO_CHANNEL_PROVIDED",E.default.error("[".concat(B.clientId,"] "),K,H),K)},unregister:function(B){var H=B&&B.uid,K=B.joinInfo&&B.joinInfo.cname;if(!H||!K){var ve="INVALID_GATEWAYCLIENT";return E.default.error("[".concat(B.clientId,"] "),ve),ve}if(this._gatewayClients[K]&&this._gatewayClients[K][H])return this._gatewayClients[K][H]!==B?(ve="GATEWAYCLIENT_UID_CONFLICT",E.default.error("[".concat(B.clientId,"] "),ve),ve):(E.default.debug("[".concat(B.clientId,"] unregister client "),B.uid),delete this._gatewayClients[K][H],null);ve="GATEWEAY_CLIENT_UNREGISTERED",E.default.error("[".concat(B.clientId,"] "),ve)}};fe.DISCONNECTED=0,fe.CONNECTING=1,fe.CONNECTED=2,fe.DISCONNECTING=3,fe.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},ie.a=fe},function(ue,ie,V){"use strict";V.r(ie),V.d(ie,"post",function(){return m}),V.d(ie,"postFormData",function(){return f}),V.d(ie,"shouldUseHttps",function(){return v}),V.d(ie,"getHTTPSendBytes",function(){return N}),V.d(ie,"getHTTPRecvBytes",function(){return _}),V.d(ie,"resetHTTPByetsCount",function(){return R});var D=V(2),w=V(10),O=0,T=0,N=function(){return O},_=function(){return T},R=function(){O=0,T=0},f=function(x,U,I,E,j){var P=new XMLHttpRequest;if(P.timeout=U.timeout||Object(D.getParameter)("HTTP_CONNECT_TIMEOUT"),P.open("POST",x,!0),j)for(var G in j)"withCredentials"==G?P.withCredentials=!0:P.setRequestHeader(G,j[G]);P.onload=function(oe){T+=Object(w.lengthInUtf8Bytes)(P.responseText),200!==P.status?E&&E({httpErrorCode:"httpcode-xhr.status"},x):I&&I(P.responseText)},P.onerror=function(oe){E&&E(oe,x)},P.ontimeout=function(oe){E&&E(oe,x)};var M=JSON.stringify(U);O+=Object(w.lengthInUtf8Bytes)(M);var Y=new FormData;Y.append("request",M),P.send(Y)},m=function(x,U,I,E,j){var P=new XMLHttpRequest;if(P.timeout=U.timeout||Object(D.getParameter)("HTTP_CONNECT_TIMEOUT"),P.open("POST",x,!0),P.setRequestHeader("Content-type","application/json; charset=utf-8"),j)for(var G in j)"withCredentials"==G?P.withCredentials=!0:P.setRequestHeader(G,j[G]);P.onload=function(Y){T+=Object(w.lengthInUtf8Bytes)(P.responseText),200!==P.status?E&&E({httpErrorCode:"httpcode-xhr.status"},x):I&&I(P.responseText)},P.onerror=function(Y){E&&E(Y,x)},P.ontimeout=function(Y){E&&E(Y,x)};var M=JSON.stringify(U);O+=Object(w.lengthInUtf8Bytes)(M),P.send(M)},v=function(){return"https:"==document.location.protocol}},function(ue,ie,V){"use strict";V.r(ie),V.d(ie,"RTCPeerConnection",function(){return Q}),V.d(ie,"getUserMedia",function(){return T}),V.d(ie,"attachMediaStream",function(){return N}),V.d(ie,"reattachMediaStream",function(){return _}),V.d(ie,"setSrcObject",function(){return x}),V.d(ie,"getSrcObject",function(){return U}),V.d(ie,"webrtcDetectedBrowser",function(){return R}),V.d(ie,"webrtcDetectedVersion",function(){return f}),V.d(ie,"webrtcMinimumVersion",function(){return m}),V.d(ie,"webrtcTesting",function(){return te}),V.d(ie,"webrtcUtils",function(){return j});var D=V(11),w=V.n(D),O=V(5),T=null,N=null,_=null,R=null,f=null,m=null,v=null,x=null,U=null,I=null,E={addStream:null},j={log:function(){},extractVersion:function(z,b,u){var W=z.match(b);return W&&W.length>=u&&parseInt(W[u])}};if("object"==("undefined"==typeof window?"undefined":w()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(x=function(z,b){"mozSrcObject"in z?z.mozSrcObject=b:(z._srcObject=b,z.src=b?URL.createObjectURL(b):null)},U=function(z){return"mozSrcObject"in z?z.mozSrcObject:z._srcObject}):(x=function(z,b){z.srcObject=b},U=function(z){return z.srcObject}),T=window.navigator&&window.navigator.getUserMedia):(x=function(z,b){z.srcObject=b},U=function(z){return z.srcObject}),N=function(z,b){x(z,b)},_=function(z,b){x(z,U(b))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var P in j.log("This appears to be Firefox"),R="firefox",f=j.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),m=31,I=mozRTCPeerConnection,E)E[P]=I.prototype[P];if(v=function(z,b){if(f<38&&z&&z.iceServers){for(var u=[],W=0;W<z.iceServers.length;W++){var C=z.iceServers[W];if(C.hasOwnProperty("urls"))for(var l=0;l<C.urls.length;l++){var $={url:C.urls[l]};0===C.urls[l].indexOf("turn")&&($.username=C.username,$.credential=C.credential),u.push($)}else u.push(z.iceServers[W])}z.iceServers=u}var p=new I(z,b);for(var S in E)p[S]=E[S];return p},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),T=function(z,b,u){var W=function(C){if("object"!==w()(C)||C.require)return C;var l=[];return Object.keys(C).forEach(function($){if("require"!==$&&"advanced"!==$&&"mediaSource"!==$){var p=C[$]="object"===w()(C[$])?C[$]:{ideal:C[$]};if(void 0===p.min&&void 0===p.max&&void 0===p.exact||l.push($),void 0!==p.exact&&("number"==typeof p.exact?p.min=p.max=p.exact:C[$]=p.exact,delete p.exact),void 0!==p.ideal){C.advanced=C.advanced||[];var S={};S[$]="number"==typeof p.ideal?{min:p.ideal,max:p.ideal}:p.ideal,C.advanced.push(S),delete p.ideal,Object.keys(p).length||delete C[$]}}}),l.length&&(C.require=l),C};return f<38&&(j.log("spec: "+JSON.stringify(z)),z.audio&&(z.audio=W(z.audio)),z.video&&(z.video=W(z.video)),j.log("ff37: "+JSON.stringify(z))),navigator.mozGetUserMedia(z,b,u)},navigator.getUserMedia=T,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:oe,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(z){z([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},f<41){var G=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return G().then(void 0,function(z){if("NotFoundError"===z.name)return[];throw z})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var P in j.log("This appears to be Chrome"),R="chrome",f=j.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),m=38,I=webkitRTCPeerConnection,E)E[P]=I.prototype[P];v=function(z,b){z&&z.iceTransportPolicy&&(z.iceTransports=z.iceTransportPolicy);var u=new I(z,b);for(var W in E)u[W]=E[W];var C=u.getStats.bind(u);return u.getStats=function(l,$,p){var S=arguments;S.length>0&&"function"==typeof l&&($?(p=$,$=l,S=[l=null,$,p]):($=l,S=[l=null,$]));var L=function(re){var fe={};return re.result().forEach(function(se){var B={id:se.id,timestamp:se.timestamp,type:se.type};se.names().forEach(function(H){B[H]=se.stat(H)}),fe[B.id]=B}),fe};if(S.length>=2){var ee=function(re){S[1](L(re))};return C.apply(this,[ee,S[0]])}return C()},u},["createOffer","createAnswer"].forEach(function(z){var b=webkitRTCPeerConnection.prototype[z];webkitRTCPeerConnection.prototype[z]=function(){var u=this;if(arguments.length<1||1===arguments.length&&"object"===w()(arguments[0])){var W=1===arguments.length?arguments[0]:void 0;return new Promise(function(C,l){b.apply(u,[C,l,W])})}return b.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(z){var b=webkitRTCPeerConnection.prototype[z];webkitRTCPeerConnection.prototype[z]=function(){var u=arguments,W=this;return new Promise(function(C,l){b.apply(W,[u[0],function(){C(),u.length>=2&&u[1].apply(null,[])},function($){l($),u.length>=3&&u[2].apply(null,[$])}])})}});var M=function(z){if("object"!==w()(z)||z.mandatory||z.optional)return z;var b={};return Object.keys(z).forEach(function(u){if("require"!==u&&"advanced"!==u&&"mediaSource"!==u){var W="object"===w()(z[u])?z[u]:{ideal:z[u]};void 0!==W.exact&&"number"==typeof W.exact&&(W.min=W.max=W.exact);var C=function($,p){return $?$+p.charAt(0).toUpperCase()+p.slice(1):"deviceId"===p?"sourceId":p};if(void 0!==W.ideal){b.optional=b.optional||[];var l={};"number"==typeof W.ideal?(l[C("min",u)]=W.ideal,b.optional.push(l),(l={})[C("max",u)]=W.ideal,b.optional.push(l)):(l[C("",u)]=W.ideal,b.optional.push(l))}void 0!==W.exact&&"number"!=typeof W.exact?(b.mandatory=b.mandatory||{},b.mandatory[C("",u)]=W.exact):["min","max"].forEach(function($){void 0!==W[$]&&(b.mandatory=b.mandatory||{},b.mandatory[C($,u)]=W[$])})}}),z.advanced&&(b.optional=(b.optional||[]).concat(z.advanced)),b};if(T=function(z,b,u){return z.audio&&(z.audio=M(z.audio)),z.video&&(z.video=M(z.video)),j.log("chrome: "+JSON.stringify(z)),navigator.webkitGetUserMedia(z,b,u)},navigator.getUserMedia=T,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:oe,enumerateDevices:function(){return new Promise(function(z){var b={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(u){z(u.map(function(W){return{label:W.label,kind:b[W.kind],deviceId:W.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){if((Object(O.getBrowserVersion)()?Number(Object(O.getBrowserVersion)().split(".")[0]):void 0)<46){var Y=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(z){return j.log("spec:   "+JSON.stringify(z)),z.audio=M(z.audio),z.video=M(z.video),j.log("chrome: "+JSON.stringify(z)),Y(z)}}}else navigator.mediaDevices.getUserMedia=function(z){return oe(z)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){j.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){j.log("Dummy mediaDevices.removeEventListener called.")}),N=function(z,b){f>=43?x(z,b):void 0!==z.src?z.src=b?URL.createObjectURL(b):null:j.log("Error attaching stream to element.")},_=function(z,b){f>=43?x(z,U(b)):z.src=b.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(j.log("This appears to be Edge"),R="edge",f=j.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),m=12):j.log("Browser does not appear to be WebRTC-capable");else j.log("This does not appear to be a browser"),R="not a browser";function oe(z){return new Promise(function(b,u){T(z,b,u)})}var Q,te={};try{Object.defineProperty(te,"version",{set:function(z){f=z}})}catch(z){}v?Q=v:"undefined"!=typeof window&&(Q=window.RTCPeerConnection)},function(ue,ie,V){"use strict";var D=V(12),w=V.n(D),O=V(17),T=V.n(O),N=V(51),_=V.n(N),R=V(5),f=V(1),m=V(3),v=V(0),x=(V(25),V(2),V(4),V(52)),U=V.n(x),I=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function E(l){for(var $=new Uint8Array([99,114,121,112,116,105,105]),p=$.length,S=l,L=S.length,ee=new Uint8Array(L),re=new Uint8Array(256),fe=0;fe<256;fe++)re[fe]=fe;for(var se=0,B=0;B<256;B++){var H=[re[se=(se+re[B]+$[B%p])%256],re[B]];re[B]=H[0],re[se]=H[1]}var ve=0;se=0;for(var le=0;le<0+L;le++){var ge=[re[se=(se+re[ve=(ve+1)%256])%256],re[ve]];re[ve]=ge[0],re[se]=ge[1],le>=0&&(ee[le-0]=S[le-0]^re[(re[ve]+re[se])%256])}var Ce=String.fromCharCode.apply(null,ee);return Function("var winSize = 5; return `"+Ce+"`")()}function j(l,$){var p=E($),S=U.a.createProgramFromSources(l,[E(I),p]),L=l.getAttribLocation(S,"a_position"),ee=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,ee),l.bufferData(l.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),l.STATIC_DRAW),l.enableVertexAttribArray(L);var re=2,fe=l.FLOAT,se=!1,B=0,H=0;l.vertexAttribPointer(L,re,fe,se,B,H);var K=l.getAttribLocation(S,"a_texCoord"),ve=l.createBuffer();return l.bindBuffer(l.ARRAY_BUFFER,ve),l.bufferData(l.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),l.STATIC_DRAW),l.enableVertexAttribArray(K),l.vertexAttribPointer(K,re=2,fe=l.FLOAT,se=!1,B=0,H=0),S}var P=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function G(l,$,p){var S=l.gl;this.program=j(S,P),this.setUniforms=function(){S.getUniformLocation(this.program,"u_image");var L=S.getUniformLocation(this.program,"u_flipY");S.uniform1f(L,1)}}var M=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function Y(l,$,p){var S=l.gl,L=1/$,ee=1/p,re=5;this.program=j(S,M),this.setUniforms=function(){S.getUniformLocation(this.program,"u_image");var fe=S.getUniformLocation(this.program,"u_flipY"),se=S.getUniformLocation(this.program,"u_singleStepOffset"),B=S.getUniformLocation(this.program,"u_denoiseLevel");S.uniform2f(se,L,ee),S.uniform1f(B,re),S.uniform1f(fe,1)},this.setParameters=function(fe){void 0!==fe.denoiseLevel&&(re=fe.denoiseLevel)},this.setSize=function(fe,se){L=1/fe,ee=1/se}}var oe=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function Q(l,$,p){var S=l.gl,L=1/$,ee=1/p,re=5;this.program=j(S,oe),this.setUniforms=function(){S.getUniformLocation(this.program,"u_image");var fe=S.getUniformLocation(this.program,"u_flipY"),se=S.getUniformLocation(this.program,"u_singleStepOffset"),B=S.getUniformLocation(this.program,"u_denoiseLevel");S.uniform2f(se,L,ee),S.uniform1f(B,re),S.uniform1f(fe,1)},this.setParameters=function(fe){void 0!==fe.denoiseLevel&&(re=fe.denoiseLevel)},this.setSize=function(fe,se){L=1/fe,ee=1/se}}var te=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function z(l,$,p){var S=l.gl,L=1/$,ee=1/p,re=5;this.program=j(S,te),this.setUniforms=function(){S.getUniformLocation(this.program,"u_image");var fe=S.getUniformLocation(this.program,"u_flipY"),se=S.getUniformLocation(this.program,"u_singleStepOffset"),B=S.getUniformLocation(this.program,"u_denoiseLevel");S.uniform2f(se,L,ee),S.uniform1f(B,re),S.uniform1f(fe,1)},this.setParameters=function(fe){void 0!==fe.denoiseLevel&&(re=fe.denoiseLevel)},this.setSize=function(fe,se){L=1/fe,ee=1/se}}var b=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function u(l,$,p){var S=l.gl,L=5,ee=.1,re=.5,fe=175/180*3.141593,se=115/180*3.141593,B=173/180*3.141593,H=116/180*3.141593,K=2.04203545,ve=0,le=0,ge=0,Ce=[],Oe=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],ke=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],De=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=j(S,b),this.setUniforms=function(){var Re=S.getUniformLocation(this.program,"u_flipY"),Ue=S.getUniformLocation(this.program,"u_denoiseLevel");S.uniform1f(Ue,L),S.uniform1f(Re,1);var h=S.getUniformLocation(this.program,"light");S.uniform1f(h,ee);var pe=S.getUniformLocation(this.program,"redness");S.uniform1f(pe,re);var F=S.getUniformLocation(this.program,"skin_he_max"),Ne=S.getUniformLocation(this.program,"skin_he_min"),Ze=S.getUniformLocation(this.program,"skin_hc_max"),Ge=S.getUniformLocation(this.program,"skin_hc_min"),qe=S.getUniformLocation(this.program,"skin_hc_axis"),Je=S.getUniformLocation(this.program,"facts_rotate_c"),ce=S.getUniformLocation(this.program,"facts_rotate_le"),g=S.getUniformLocation(this.program,"facts_rotate_ge");S.uniform1f(F,fe),S.uniform1f(Ne,se),S.uniform1f(Ze,B),S.uniform1f(Ge,H),S.uniform1f(qe,K),S.uniform1f(Je,ve),S.uniform1f(ce,le),S.uniform1f(g,ge);var ne=S.getUniformLocation(this.program,"u_originImage");S.activeTexture(S.TEXTURE2),S.bindTexture(S.TEXTURE_2D,l.inputTexture),S.uniform1i(ne,2);for(var de=["lighten_lut"],me=[S.TEXTURE3],ye=0;ye<de.length;ye++){var X=S.getUniformLocation(this.program,de[ye]);S.activeTexture(me[ye]),S.bindTexture(S.TEXTURE_2D,Ce[ye]),S.uniform1i(X,ye+3)}},this.setParameters=function(Re){void 0!==Re.denoiseLevel&&(L=Re.denoiseLevel),void 0!==Re.lightLevel&&(ee=Re.lightLevel),void 0!==Re.rednessLevel&&this._updateRedness(re=Re.rednessLevel),void 0!==Re.lighteningContrastLevel&&this._updateLut(Re.lighteningContrastLevel)},this._updateRedness=function(Re){var Ue,h,pe=3.141593,F=Re,Ne=F;F>1&&(F=1),F<0&&(F=0),Ne>1&&(Ne=1),Ne<0&&(Ne=0),ve=.8*F,Ne<.8&&(Ne=0),(K=(117-4*Ne)/180*pe)<(H=(116-4*Ne)/180*pe)&&(K=H),H<pe/2&&(H=pe/2),K<pe/2&&(K=pe/2),(se=(115-4*Ne)/180*pe)<pe/2&&(se=pe/2),(B=173/180*pe)>pe&&(B=pe),K>pe&&(K=pe),(fe=175/180*pe)>pe&&(fe=pe),h=B-K,ge=(Ue=fe-B)>.01?ve*h/Ue:ve,h=K-H,le=(Ue=H-se)>.01?ve*h/Ue:ve},this._updateLut=function(Re){var Ue=null;0==Re&&(Ue=ke),1==Re&&(Ue=De),2==Re&&(Ue=Oe);for(var h=[new Uint8Array(Ue)],pe=[256],F=[1],Ne=0;Ne<h.length;Ne++)S.bindTexture(S.TEXTURE_2D,Ce[Ne]),S.texImage2D(S.TEXTURE_2D,0,S.LUMINANCE,pe[Ne],F[Ne],0,S.LUMINANCE,S.UNSIGNED_BYTE,h[Ne])},this._init=function(){for(var Ue=[new Uint8Array(ke)],h=[256],pe=[1],F=0;F<Ue.length;F++){var Ne=S.createTexture();S.bindTexture(S.TEXTURE_2D,Ne),S.texImage2D(S.TEXTURE_2D,0,S.LUMINANCE,h[F],pe[F],0,S.LUMINANCE,S.UNSIGNED_BYTE,Ue[F]),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR),Ce.push(Ne)}},this._init()}var W=!1;function C(){this.programs=[];var l=this,$=null,p=null;l.gl=null,l.inputTexture=null;var S=[],L=[],ee=0,re=0;l._initGl=function(fe,se){l.inputTexture=$.createTexture(),$.bindTexture($.TEXTURE_2D,l.inputTexture),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR);for(var B=0;B<4;B++){var H=$.createTexture();$.bindTexture($.TEXTURE_2D,H),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),B<2?$.texImage2D($.TEXTURE_2D,0,$.RGBA,fe,se,0,$.RGBA,$.UNSIGNED_BYTE,null):$.texImage2D($.TEXTURE_2D,0,$.RGBA,se,fe,0,$.RGBA,$.UNSIGNED_BYTE,null);var K=$.createFramebuffer();$.bindFramebuffer($.FRAMEBUFFER,K),$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,H,0),S.push(H),L.push(K)}$.viewport(0,0,fe,se),ee=fe,re=se},l.render=function(fe){if($){var se=0;re==fe.videoWidth&&ee===fe.videoHeight&&(se=2),$.viewport(0,0,fe.videoWidth,fe.videoHeight),$.bindTexture($.TEXTURE_2D,l.inputTexture),$.texImage2D($.TEXTURE_2D,0,$.RGBA,$.RGBA,$.UNSIGNED_BYTE,fe);for(var B=W?l.programs.length-1:0,H=0;H<=B;H++){var K=l.programs[H].program;$.useProgram(K);var ve=$.getUniformLocation(K,"u_image");l.programs[H].setUniforms(),$.bindFramebuffer($.FRAMEBUFFER,L[se+H%2]),$.clearColor(0,0,0,1),$.clear($.COLOR_BUFFER_BIT),$.drawArrays($.TRIANGLES,0,6),$.activeTexture($.TEXTURE0),$.bindTexture($.TEXTURE_2D,S[se+H%2]),$.uniform1i(ve,0)}$.useProgram(p);var le=$.getUniformLocation(p,"u_flipY");$.uniform1f(le,-1),$.bindFramebuffer($.FRAMEBUFFER,null),$.clearColor(0,0,0,1),$.clear($.COLOR_BUFFER_BIT),$.drawArrays($.TRIANGLES,0,6)}},l.setEnableBeauty=function(fe){W=fe},l.init=function(fe,se,B){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");$=B.getContext("webgl"),l.gl=$,l._initGl(fe,se),l.programs.push(new G(this,fe,se)),l.programs.push(new Y(this,fe,se)),l.programs.push(new Q(this,fe,se)),l.programs.push(new z(this,fe,se)),l.programs.push(new u(this,fe,se)),p=l.programs[0].program},l.release=function(){l.gl=null,$=null,p=null,l.inputTexture=null,l.programs=[],S=[],L=[]},l.setDenoiseLevel=function(fe){l.programs.forEach(function(se){se.setParameters&&se.setParameters({denoiseLevel:fe})})},l.setLightLevel=function(fe){l.programs.forEach(function(se){se.setParameters&&se.setParameters({lightLevel:fe})})},l.setRednessLevel=function(fe){l.programs.forEach(function(se){se.setParameters&&se.setParameters({rednessLevel:fe})})},l.setContrastLevel=function(fe){l.programs.forEach(function(se){se.setParameters&&se.setParameters({lighteningContrastLevel:fe})})},l.setSize=function(fe,se){l.programs.forEach(function(B){B.setSize&&B.setSize(fe,se)})}}C._instance=null,C.getInstance=function(){return C._instance||(C._instance=new C),C._instance},ie.a={addVideoEffectCapability:function(l){var $;l.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},l._initVideoContext=function(){if(l.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!l.stream)throw new Error("Failed to init video context. Local Stream not initialized");l.videoEffect.originVideoTrack=l.stream.getVideoTracks()[0],l.attributes&&l.attributes.maxFrameRate&&(l.videoEffect.fps=l.attributes.maxFrameRate),l.videoEffect.videoContextInited=!0},l._renderWithWebGL=function($){return new Promise(function(p){l.videoEffect.canvas||(l.videoEffect.canvas=document.createElement("canvas")),l.videoEffect.video||(l.videoEffect.video=document.createElement("video")),l.videoEffect.video.setAttribute("autoplay",""),l.videoEffect.video.setAttribute("muted",""),l.videoEffect.video.muted=!0,l.videoEffect.video.setAttribute("playsinline",""),l.videoEffect.video.setAttribute("style","display:none"),l.videoEffect.video.srcObject=$;var S=$.getVideoTracks()[0].getSettings(),L=S.width,ee=S.height;console.log("Width: ".concat(L,", Height: ").concat(ee)),l.videoEffect.canvas.setAttribute("width",L),l.videoEffect.canvas.setAttribute("height",ee),l.videoEffect.video.setAttribute("width",L),l.videoEffect.video.setAttribute("height",ee);var re=C.getInstance();re.init(l.videoEffect.video.width,l.videoEffect.video.height,l.videoEffect.canvas),re.setDenoiseLevel(l.videoEffect.denoiseLevel),re.setLightLevel(l.videoEffect.lightLevel),re.setRednessLevel(l.videoEffect.rednessLevel),re.setContrastLevel(l.videoEffect.lighteningContrastLevel),l.videoEffect.video.addEventListener("playing",function fe(){var se=l.videoEffect.canvas.captureStream(l.videoEffect.fps);l.videoEffect.video.removeEventListener("playing",fe,!0),p([se.getVideoTracks()[0],l.videoEffect.video])},!0),l.videoEffect.video.play()})},l._disableEffect=function(){l.videoEffect.videoContextInited||l._initVideoContext();var $=l.videoEffect.originVideoTrack;if(!$)return v.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(l.pc&&l.pc.peerConnection&&l.pc.peerConnection){var p=(l.pc.peerConnection&&l.pc.peerConnection.getSenders()).find(function(S){return S&&S.track&&"video"==S.track.kind});if(p&&p.replaceTrack&&$)return p.replaceTrack($)}return Promise.resolve()},l._releaseEffect=function(){var $;return $=l.videoEffect.enableBeauty?l._disableEffect():Promise.resolve(),C.getInstance().release(),l.videoEffect.videoContextInited=!1,l.videoEffect.canvasVideoTrack=null,$},l._enableEffect=function(){return l.videoEffect.videoContextInited||l._initVideoContext(),l.videoEffect.originVideoTrack?l.videoEffect.canvasVideoTrack?(l._showEffectInLocalPlayer(),l._replaceWithCanvasTrack()):l._renderWithWebGL(l.stream).then(function($){var p=_()($,2),L=p[1];l.videoEffect.canvasVideoTrack=p[0];var ee=C.getInstance();return requestAnimationFrame(function re(){l.videoEffect.enableBeauty&&ee.render(L),l.videoEffect.videoContextInited&&requestAnimationFrame(re)}),R.isChrome()&&document.addEventListener("visibilitychange",function(){document,document.hidden?l.videoEffect.stopChromeBackgroundLoop=function(re,fe){var se=1/fe,B=new AudioContext,H=B.createGain();H.gain.value=0,H.connect(B.destination),function ve(){var le=B.createOscillator();le.onended=ve,le.connect(H),le.start(0),le.stop(B.currentTime+se),l.videoEffect.enableBeauty&&ee.render(L),K&&(le.onended=function(){B.close()})}();var K=!1;return function(){K=!0}}(0,l.videoEffect.fps):l.videoEffect.stopChromeBackgroundLoop&&(l.videoEffect.stopChromeBackgroundLoop(),l.videoEffect.stopChromeBackgroundLoop=null)},!1),l._showEffectInLocalPlayer(),l._replaceWithCanvasTrack()}):(v.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},l._showEffectInLocalPlayer=function(){if(l.player){var $=l.player.div.children[0];if("none"!==$.style.display&&(l.player.div.appendChild(l.videoEffect.canvas),"video"===$.tagName.toLowerCase())){var p=$.getAttribute("style");l.videoEffect.canvas.setAttribute("style",p),"none"!==$.style.display&&($.style.display="none")}}},l._removeEffectFromLocalPlayer=function(){if(l.player&&l.player.div&&l.videoEffect.enableBeauty&&l.videoEffect.canvas){l.player.div.removeChild(l.videoEffect.canvas);var $=l.player.div.children[0];"video"===$.tagName.toLowerCase()&&(l.videoEffect.canvas.style.display="none",$.style.display="block")}},l._replaceWithCanvasTrack=function(){var $=null;return l.pc&&l.pc.peerConnection&&l.pc.peerConnection&&($=(l.pc.peerConnection&&l.pc.peerConnection.getSenders()).find(function(p){return p&&p.track&&"video"==p.track.kind})),$&&$.replaceTrack&&l.videoEffect.canvasVideoTrack?$.replaceTrack(l.videoEffect.canvasVideoTrack):Promise.resolve()},l.setBeautyEffectOptions=($=T()(w.a.mark(function p(S,L){var ee,re=arguments;return w.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(Object(m.checkValidBoolean)(S,"enabled"),ee=C.getInstance(),l.videoEffect.enableBeauty==S){fe.next=14;break}if(ee.setEnableBeauty(S),!S){fe.next=9;break}return fe.next=7,l._enableEffect();case 7:fe.next=12;break;case 9:return l._removeEffectFromLocalPlayer(),fe.next=12,l._releaseEffect();case 12:l.videoEffect.enableBeauty=S,f.report.reportApiInvoke(l.sid,{callback:null,options:re,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(S){fe.next=16;break}return fe.abrupt("return");case 16:if(!L){fe.next=20;break}Object(m.checkValidObject)(L,"options"),fe.next=21;break;case 20:return fe.abrupt("return");case 21:if(void 0!==L.smoothnessLevel&&(Object(m.checkValidFloatNumber)(L.smoothnessLevel,"smoothnessLevel",0,1),l.videoEffect.denoiseLevel=10*L.smoothnessLevel,l.videoEffect.denoiseLevel<.1&&(l.videoEffect.denoiseLevel=.1),ee.setDenoiseLevel(l.videoEffect.denoiseLevel)),void 0!==L.lighteningLevel&&(Object(m.checkValidFloatNumber)(L.lighteningLevel,"lighteningLevel",0,1),l.videoEffect.lightLevel=L.lighteningLevel/2,l.videoEffect.lightLevel<.01&&(l.videoEffect.lightLevel=.01),ee.setLightLevel(l.videoEffect.lightLevel)),void 0!==L.rednessLevel&&(Object(m.checkValidFloatNumber)(L.rednessLevel,"rednessLevel",0,1),l.videoEffect.rednessLevel=L.rednessLevel,l.videoEffect.rednessLevel<.01&&(l.videoEffect.rednessLevel=.01),ee.setRednessLevel(l.videoEffect.rednessLevel)),void 0===L.lighteningContrastLevel){fe.next=29;break}if(0===L.lighteningContrastLevel||1===L.lighteningContrastLevel||2===L.lighteningContrastLevel){fe.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:l.videoEffect.lighteningContrastLevel=parseFloat(L.lighteningContrastLevel),ee.setContrastLevel(l.videoEffect.lighteningContrastLevel);case 29:case"end":return fe.stop()}},p)})),function(p,S){return $.apply(this,arguments)})},restoreVideoEffect:function(l){return l.videoEffect.enableBeauty?l._enableEffect():Promise.resolve()},disableVideoEffect:function(l){return l._releaseEffect?l._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(l){l.videoEffect.enableBeauty&&l.videoEffect.canvas&&l._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(l){l._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(l){return l.videoEffect.enableBeauty?l._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(l){return!!(l.videoEffect.enableBeauty&&l.videoEffect&&l.videoEffect.videoContextInited)&&(v.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(ue,ie){function V(D,w,O,T,N,_,R){try{var f=D[_](R),m=f.value}catch(v){return void O(v)}f.done?w(m):Promise.resolve(m).then(T,N)}ue.exports=function(D){return function(){var w=this,O=arguments;return new Promise(function(T,N){var _=D.apply(w,O);function R(m){V(_,T,N,R,f,"next",m)}function f(m){V(_,T,N,R,f,"throw",m)}R(void 0)})}}},function(ue,ie,V){"use strict";var D=V(38),w=Object.prototype.toString;function O(f){return"[object Array]"===w.call(f)}function T(f){return void 0===f}function N(f){return null!==f&&"object"==typeof f}function _(f){return"[object Function]"===w.call(f)}function R(f,m){if(null!=f)if("object"!=typeof f&&(f=[f]),O(f))for(var v=0,x=f.length;v<x;v++)m.call(null,f[v],v,f);else for(var U in f)Object.prototype.hasOwnProperty.call(f,U)&&m.call(null,f[U],U,f)}ue.exports={isArray:O,isArrayBuffer:function(f){return"[object ArrayBuffer]"===w.call(f)},isBuffer:function(f){return null!==f&&!T(f)&&null!==f.constructor&&!T(f.constructor)&&"function"==typeof f.constructor.isBuffer&&f.constructor.isBuffer(f)},isFormData:function(f){return"undefined"!=typeof FormData&&f instanceof FormData},isArrayBufferView:function(f){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(f):f&&f.buffer&&f.buffer instanceof ArrayBuffer},isString:function(f){return"string"==typeof f},isNumber:function(f){return"number"==typeof f},isObject:N,isUndefined:T,isDate:function(f){return"[object Date]"===w.call(f)},isFile:function(f){return"[object File]"===w.call(f)},isBlob:function(f){return"[object Blob]"===w.call(f)},isFunction:_,isStream:function(f){return N(f)&&_(f.pipe)},isURLSearchParams:function(f){return"undefined"!=typeof URLSearchParams&&f instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:R,merge:function f(){var m={};function v(I,E){m[E]="object"==typeof m[E]&&"object"==typeof I?f(m[E],I):I}for(var x=0,U=arguments.length;x<U;x++)R(arguments[x],v);return m},deepMerge:function f(){var m={};function v(I,E){m[E]="object"==typeof m[E]&&"object"==typeof I?f(m[E],I):"object"==typeof I?f({},I):I}for(var x=0,U=arguments.length;x<U;x++)R(arguments[x],v);return m},extend:function(f,m,v){return R(m,function(x,U){f[U]=v&&"function"==typeof x?D(x,v):x}),f},trim:function(f){return f.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(ue,ie,V){"use strict";V.d(ie,"a",function(){return f});var D=V(7),w=V.n(D),O=V(8),T=V(0),N=V(4);function R(m,v){(null==v||v>m.length)&&(v=m.length);for(var x=0,U=new Array(v);x<v;x++)U[x]=m[x];return U}var f=new function(){var m=Object(O.b)();return m.devicesHistory={},m.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},m.state=m.states.UNINIT,m.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},m.deviceReloadTimer=null,m._init=function(v,x){m.state=m.states.INITING,m.devicesHistory={},m._reloadDevicesInfo(function(){m.state=m.states.INITED,m.dispatchEvent({type:"inited"}),v&&v()},function(U){T.default.warning("Device Detection functionality cannot start properly."),m.state=m.states.UNINIT,x&&x(U)})},m._enumerateDevices=function(v,x){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return T.default.warning("enumerateDevices() not supported."),x&&x("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then(function(U){v&&setTimeout(function(){v(U)},0)}).catch(function(U){x&&x(U)})},m._reloadDevicesInfo=function(v,x){var U=[];m._enumerateDevices(function(I){var E=Date.now();for(var j in I.forEach(function(G){var M=m.devicesHistory[G.deviceId];if((M?M.state:m.deviceStates.INACTIVE)!=m.deviceStates.ACTIVE){var Y=M||{initAt:E};Y.device=G,Y.state=m.deviceStates.ACTIVE,U.push(Y),m.devicesHistory[G.deviceId]=Y}m.devicesHistory[G.deviceId].lastReloadAt=E}),m.devicesHistory){var P=m.devicesHistory[j];P&&P.state==m.deviceStates.ACTIVE&&P.lastReloadAt!==E&&(P.state=m.deviceStates.INACTIVE,U.push(P)),P.lastReloadAt=E}m.state==m.states.INITED&&U.forEach(function(G){var M=w()({},G);switch(G.device.kind){case"audioinput":M.type="recordingDeviceChanged";break;case"audiooutput":M.type="playoutDeviceChanged";break;case"videoinput":M.type="cameraChanged";break;default:T.default.warning("Unknown device change",M),M.type="unknownDeviceChanged"}m.dispatchEvent(M)}),v&&v()},x)},m.getDeviceById=function(v,x,U){m.getDevices(function(I){for(var E=0;E<I.length;E++){var j=I[E];if(j&&j.deviceId===v)return x&&x(j)}return U&&U()})},m.searchDeviceNameById=function(v){var x=m.devicesHistory[v];return x?x.device.label||x.device.deviceId:null},m.getDevices=function(v,x){m._enumerateDevices(v,function(U){x&&x(U.name+": "+U.message)})},m.getVideoCameraIdByLabel=function(v,x,U){m.getCameras(function(I){var E,j=function(m){if("undefined"==typeof Symbol||null==m[Symbol.iterator]){if(Array.isArray(m)||(m=function(P,G){if(P){if("string"==typeof P)return R(P,G);var M=Object.prototype.toString.call(P).slice(8,-1);if("Object"===M&&P.constructor&&(M=P.constructor.name),"Map"===M||"Set"===M)return Array.from(M);if("Arguments"===M||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return R(P,G)}}(m))){var v=0,x=function(){};return{s:x,n:function(){return v>=m.length?{done:!0}:{done:!1,value:m[v++]}},e:function(P){throw P},f:x}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var U,I,E=!0,j=!1;return{s:function(){U=m[Symbol.iterator]()},n:function(){var P=U.next();return E=P.done,P},e:function(P){j=!0,I=P},f:function(){try{E||null==U.return||U.return()}finally{if(j)throw I}}}}(I);try{for(j.s();!(E=j.n()).done;){var P=E.value;if(P.label===v)return x&&x(P.deviceId)}}catch(G){j.e(G)}finally{j.f()}return U&&U(N.default.NOT_FIND_DEVICE_BY_LABEL)},U)},m.getRecordingDevices=function(v,x){return m._enumerateDevices(function(U){var I=U.filter(function(E){return"audioinput"==E.kind});v&&v(I)},function(U){x&&x(U)})},m.getPlayoutDevices=function(v,x){return m._enumerateDevices(function(U){var I=U.filter(function(E){return"audiooutput"==E.kind});v&&v(I)},function(U){x&&x(U)})},m.getCameras=function(v,x){return m._enumerateDevices(function(U){var I=U.filter(function(E){return"videoinput"==E.kind});v&&v(I)},function(U){x&&x(U)})},m._init(function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",function(){m._reloadDevicesInfo()}),m.deviceReloadTimer=setInterval(m._reloadDevicesInfo,5e3)}),m}},function(ue,ie,V){"use strict";V.r(ie),V.d(ie,"_getReconnectCSTimer",function(){return b}),V.d(ie,"_setClientConnectionStateRecord",function(){return u}),V.d(ie,"getGatewayList",function(){return C}),V.d(ie,"getUserAccount",function(){return $});var D=V(11),w=V.n(D),O=V(12),T=V.n(O),N=V(17),_=V.n(N),R=V(2),f=(V(5),V(0)),m=V(14),v=V(1),x=V(4),U=function(p,S){var L=!1,ee=0,re=Object(R.getParameter)("PROXY_CS"),fe=Object(R.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),se=0,B={command:"convergeAllocateEdge",sid:p.sid,appId:p.appId,token:p.token,uid:p.uid,cname:p.cname,ts:Math.floor(Date.now()/1e3),version:R.VERSION,seq:0,requestId:1},H=function(ve){var le=(new Date).getTime();I("https://"+ve+"/api/v1",B,function(ge,Ce){if(ge)return f.default.debug("["+p.clientId+"] Request proxy server failed: ",ge),ee++,v.report.requestProxyAppCenter(p.sid,{lts:le,succ:!1,APAddr:ve,workerManagerList:null,ec:JSON.stringify(ge),response:JSON.stringify({err:ge,res:Ce})}),ee>=re.length&&S&&S("Get proxy server failed: request all failed"),void(!(ee%fe)&&ee<re.length&&(se++,K()));if(!L)if((Ce=JSON.parse(Ce)).json_body){var Oe=JSON.parse(Ce.json_body);if(f.default.debug("["+p.clientId+"] App return:",Oe.servers),200!==Oe.code)ee++,f.default.debug("["+p.clientId+"] "+(ge="Get proxy server failed: response code ["+Oe.code+"], reason [ "+Oe.reason+"]")),v.report.requestProxyAppCenter(p.sid,{lts:le,succ:!1,APAddr:ve,workerManagerList:null,ec:ge,response:JSON.stringify({err:ge,res:Ce})}),ee>=re.length&&S&&S(ge),!(ee%fe)&&ee<re.length&&(se++,K());else{L=!0;var ke=j(Oe.servers);v.report.requestProxyAppCenter(p.sid,{lts:le,succ:!0,APAddr:ve,workerManagerList:JSON.stringify(ke),ec:null,response:JSON.stringify({res:Ce})}),S&&S(null,ke)}}else f.default.debug("["+p.clientId+"] Get proxy server failed: no json_body"),v.report.requestProxyAppCenter(p.sid,{lts:le,succ:!1,APAddr:ve,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:Ce})})})},K=function(){for(var ve=se*fe,le=ve;le<Math.min(re.length,ve+fe);le++)H(re[le])};K()},I=function(p,S,L){var ee={service_name:"webrtc_proxy",json_body:JSON.stringify(S)};Object(m.post)(p,ee,function(re){L&&L(null,re)},function(re){L&&L(re)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})},j=function(p){if(!(p&&[]instanceof Array))return[];var S=[];return p.forEach(function(L){var ee;L.address&&L.tcp?(L.address.match(/^[\.\:\d]+$/)?ee="".concat(L.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(f.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(L.address,". Used As Host instead")),ee="".concat(L.address,":").concat(L.tcp)),S.push(ee)):f.default.error("["+joinInfo.clientId+"] Invalid address format ",L)}),S},P=V(21),G=function(p,S,L,ee){var re=Object(R.getParameter)("WEBCS_DOMAIN").concat(Object(R.getParameter)("WEBCS_DOMAIN_BACKUP_LIST")),fe=Object(R.getParameter)("PROXY_SERVER_TYPE3");re=re.map(function(Ce,Oe){return"".concat(fe[(Oe+1)%fe.length],"/ap/?url=").concat(Ce)});var se,B=0,H=!0,K=Object(R.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),ve=0,le=function(Ce){var Oe,ke,De,Re,Ue,h,pe,F,Ne,Ze;Oe=p,ke=Ce,De=S,Re=function(Oe,ke){Oe?(B++,f.default.error("[".concat(S.clientId,"] request ").concat(Ce," failed: ").concat(Oe)),Oe&&-1===x.JOIN_PROXY_RETRY_LIST.indexOf(Oe)&&(se=Oe),B===re.length&&(se||(se="RETRYABLE_ERROR"),L(se)),!(B%K)&&B<re.length&&(ve++,ge())):H&&(/sd-rtn/.test(ke.gatewayServers.gateway_addr[0])?Object(R.setParameter)("NGINX",fe[0]):Object(R.setParameter)("NGINX",fe[1]),H=!1,L(null,ke))},Ue=ee,h=Date.now(),pe=function(Ge,qe){try{v.report.joinChooseServer2(De.sid,{lts:h,succ:!Ge,csAddr:ke,serverList:qe&&qe.gateway_addr,cid:qe&&qe.cid+"",uid:qe&&qe.uid+"",ec:Ge,chooseServerIp:qe&&qe.detail&&qe.detail[502]})}catch(Je){}},F=function(Ge,qe){var Je=Date.now();try{v.report.joinWebProxyAP({lts:Je,sid:De.sid,cname:De.cname,cid:De.cid,uid:De.uid,sucess:Ge?-1:1,elapse:Je-h,eventType:Oe,apServerAddr:ke,turnServerAddrList:JSON.stringify(qe),errorCode:Ge||"0"})}catch(ce){}},Ne=Object(R.getParameter)("AREA_SETTING").reduce(function(Ge,qe,Je){var ce=Object(P.getAreaCodeByArea)(qe);return ce?0===Je?ce:"".concat(Ge,",").concat(ce):Ge},""),Ze={appid:De.token,client_ts:Date.now(),opid:133,sid:De.sid,request_bodies:[{uri:22,buffer:{cname:De.cname,detail:{11:Ne,6:De.stringUid},key:De.token,service_ids:[11,Ue?20:18],uid:De.uid||0}}]},ke="https://".concat(ke,"/api/v2/transpond/webrtc?v=2"),Object(m.postFormData)(ke,Ze,function(Ge){var qe=function(Ee){return new RegExp(/10102\d{2}$/).test(Ee)?"NO_SERVICE_AVAILABLE":x.APErrorCode[Ee]||Ee};try{var Je,ce,g=JSON.parse(Ge);if(30===(g=g.response_body)[0].uri&&0!==g[0].buffer.code){var ne=qe(g[0].buffer.code);return F(ne,g),Re(ne)}if(4096===g[0].buffer.flag?(ce=g[0].buffer,Je=g[1].buffer):(ce=g[1].buffer,Je=g[0].buffer),0!==Je.code)return ne=qe(Je.code),f.default.error("[".concat(De.clientId,"] requestProxyServer failed: ").concat(ne)),F(ne,Je),Re(ne);if(!Je.edges_services||!Je.edges_services instanceof Array)return F("UNEXPECTED_ERROR",Je),Re("UNEXPECTED_ERROR");var de=Object(R.getParameter)("GATEWAY_DOMAINS"),me=0;if(ke.indexOf(de[1])>-1&&(me=1),0===Je.edges_services.length)return F("EMPTY_PROXY_LIST",Je),Re("EMPTY_PROXY_LIST");var ye=Je.edges_services.map(function(Ee){if(Ee.ip)return Ee.ip=Ue?"".concat(Ee.ip.replace(/[^\d]/g,"-"),".").concat(de[me++%de.length]):"".concat(Ee.ip),Ee});if(F(null,ye),0!==ce.code)return ne=qe(ce.code),f.default.error("[".concat(De.clientId,"] requestChooseServer failed: ").concat(ne)),pe(ne),Re(ne);var X=[];if(de=Object(R.getParameter)("GATEWAY_DOMAINS"),me=0,ke.indexOf(de[1])>-1&&(me=1),ce.edges_services.forEach(function(Ee){var Ie;if(Ee.ip&&Ee.port){if(!Ee.ip.match(/^[\.\:\d]+$/))return f.default.info("["+De.clientId+"] "+"Cannot recognized as IP address ".concat(Ee.ip,". Used As Host instead")),void pe("UNEXPECTED_IP");Ie="".concat(Ee.ip.replace(/[^\d]/g,"-"),".").concat(de[me++%de.length]);var Te=Object(R.getParameter)("PROXY_SERVER_TYPE3");Ie=/sd-rtn/.test(ke)?"".concat(Te[0],"/ws/?h=").concat(Ie,"&p=").concat(Ee.port):"".concat(Te[1],"/ws/?h=").concat(Ie,"&p=").concat(Ee.port),X.push(Ie)}else f.default.error("["+De.clientId+"] Invalid address format ",Ee)}),!X.length)return f.default.error("["+De.clientId+"] Empty Address response",g),pe("EMPTY_ADDRESS_RESPONSE"),Re("EMPTY_ADDRESS_RESPONSE");ce.ticket=ce.cert;var _e={gateway_addr:X,uid:ce.uid,cid:ce.cid,vid:ce.detail&&ce.detail[8],res:ce,detail:g.detail};pe(null,_e),Re(null,{gatewayServers:_e,turnServers:ye})}catch(Ee){return f.default.error("[".concat(De.clientId,"] requestProxyServer failed with unexpected body "),Ee),F("UNEXPECTED_ERROR"),Re("UNEXPECTED_ERROR")}},function(Ge,qe){"timeout"===Ge.type?(F("REQUEST_PROXY_SERVER_TIME_OUT"),Re("REQUEST_PROXY_SERVER_TIME_OUT")):(F("REQUEST_PROXY_SERVER_FAILED"),Re("REQUEST_PROXY_SERVER_FAILED"))})},ge=function(){for(var Ce=ve*K,Oe=Ce;Oe<Math.min(re.length,Ce+K);Oe++)le(re[Oe])};ge()},M=V(13),Y=V(29),oe=V.n(Y),Q=V(30),te={},z={},b=function(p){return te[p]},u=function(p,S){z[p]=S},W=function(p,S,L,ee,re,fe){var se=(new Date).getTime(),B=S,H="";S.multiIP&&S.multiIP.gateway_ip&&(H={vocs_ip:[S.multiIP.uni_lbs_ip],vos_ip:[S.multiIP.gateway_ip]});var K=Object(R.getParameter)("AREA_SETTING").reduce(function(le,ge,Ce){var Oe=Object(P.getAreaCodeByArea)(ge);return Oe?0===Ce?Oe:"".concat(le,",").concat(Oe):le},""),ve={appid:S.token,opid:133,client_ts:+new Date,sid:S.sid,request_bodies:[{uri:22,buffer:{cname:S.cname,detail:{5:H?JSON.stringify(H):void 0,6:S.stringUid,11:K},key:S.token,service_ids:[11],uid:S.uid||0}}]};Object(m.postFormData)(p,ve,function(le){try{var ge=JSON.parse(le),Ce=(ge=ge.response_body[0].buffer).code}catch(pe){var Oe="requestChooseServer failed with unexpected body "+le;return f.default.error("["+B.clientId+"]",Oe),ee(Oe,void 0,void 0,fe)}if(Ce)return Ue=new RegExp(/10102\d{2}$/).test(Ce)?"NO_SERVICE_AVAILABLE":x.APErrorCode[ge.code]||Ce,v.report.joinChooseServer(S.sid,{lts:se,succ:!1,csAddr:p,serverList:null,ec:Ue,chooseServerIp:ge&&ge.detail&&ge.detail[502]}),ee("Get server node failed ["+Ue+"]",p,Ue,fe);var ke=[],De=Object(R.getParameter)("GATEWAY_DOMAINS"),Re=0;if(p.indexOf(De[1])>-1&&(Re=1),ge.edges_services.forEach(function(pe){var F;pe.ip&&pe.port?(pe.ip.match(/^[\.\:\d]+$/)?F="".concat(pe.ip.replace(/[^\d]/g,"-"),".").concat(De[Re++%De.length],":").concat(pe.port):(f.default.info("["+B.clientId+"] "+"Cannot recognized as IP address ".concat(pe.ip,". Used As Host instead")),F="".concat(pe.ip,":").concat(pe.port)),ke.push(F)):f.default.error("["+B.clientId+"] Invalid address format ",pe)}),!ke.length){f.default.error("["+B.clientId+"] Empty Address response",ge);var Ue="EMPTY_ADDRESS_RESPONSE";return v.report.joinChooseServer(S.sid,{lts:se,succ:!1,csAddr:p,serverList:null,ec:Ue,chooseServerIp:ge&&ge.detail&&ge.detail[502]}),ee("Get server node failed ["+Ue+"]",p,Ue,fe)}return ge.ticket=ge.cert,L({gateway_addr:ke,uid:ge.uid,cid:ge.cid,vid:ge.detail&&ge.detail[8],res:ge,uni_lbs_ip:ge.detail},p)},function(le,ge){"timeout"===le.type?(v.report.joinChooseServer(S.sid,{lts:se,succ:!1,csAddr:ge,serverList:null,ec:"timeout"}),ee("Connect choose server timeout",ge,void 0,fe)):(v.report.joinChooseServer(S.sid,{lts:se,succ:!1,csAddr:ge,serverList:null,ec:le.httpErrorCode||"server_wrong"}),ee("Connect choose server error",ge,void 0,fe))})},C=function(p,S,L){var ee=!1,re=null,fe=1,se=1,B=p.clientId,H=function ve(le,ge){if(!ee){var Ce=[];!function(Oe,ke,De){var Re,Ue=(new Date).getTime(),h=!1,pe=0,F=0,Ne=Object(R.getParameter)("WEBCS_DOMAIN"),Ze=Ne.length,Ge=Object(R.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),qe=Ge.length,Je=Object(R.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),ce=0,g=0,ne=function(_e,Ee){var Ie;try{Ie=_e.res.detail[8]}catch(We){f.default.debug("["+Oe.clientId+"] get vid failed",We)}if(h)v.report.joinChooseServer(Oe.sid,{lts:Ue,succ:!0,csAddr:Ee,serverList:_e.gateway_addr,cid:_e.cid+"",uid:_e.uid+"",ec:null,vid:Ie,chooseServerIp:_e.res&&_e.res.detail&&_e.res.detail[502]},!1);else{if(clearTimeout(X),h=!0,Oe.proxyServer)for(var Te=_e.gateway_addr,Ve=0;Ve<Te.length;Ve++){var He=Te[Ve].split(":");_e.gateway_addr[Ve]=Oe.proxyServer+"/ws/?h="+He[0]+"&p="+He[1]}(function(Oe){ee=!0,Ce=Oe,clearTimeout(re),z[B]!==M.a.DISCONNECTED&&z[B]!==M.a.DISCONNECTING?ge&&ge(Ce,null):f.default.debug("[".concat(p.clientId,"] Request gateway list success when connection state is ").concat(z[B]))})(_e),v.report.joinChooseServer(Oe.sid,{lts:Ue,succ:!0,csAddr:Ee,serverList:_e.gateway_addr,cid:_e.cid+"",uid:_e.uid+"",ec:null,vid:Ie,chooseServerIp:_e.res&&_e.res.detail&&_e.res.detail[502]},!0)}},de=function(_e,Ee,Ie,Te){"domain"===Te&&pe++,"backup"===Te&&F++,f.default.error("["+Oe.clientId+"]",_e,Ee,Ie),Ie&&-1===x.JOIN_CS_RETRY_LIST.indexOf(Ie)&&(Re=Ie),pe===Ze&&F===qe&&function(Oe){if(Oe)return f.default.info("["+p.clientId+"] Join failed: "+Oe),void(L&&L(Oe));if(z[B]===M.a.DISCONNECTED||z[B]===M.a.DISCONNECTING)return f.default.debug("[".concat(p.clientId,"] Request gateway list falied when connection state is ").concat(z[B])),void(L&&L("OPERATION_ABORT"));f.default.debug("["+p.clientId+"] Request gateway list will be restart in "+fe+"s"),re=setTimeout(function(){ve(le,ge)},1e3*fe),te[B]=re;var ke=Object(R.getParameter)("AP_BACKOFF_MAX_TIME");fe=fe>=ke?ke:2*fe}(Re),"domain"===Te&&!(pe%Je)&&pe<Ze&&(ce++,me()),"backup"===Te&&!(F%Je)&&F<qe&&(g++,ye())},me=function _e(){for(var Ee=ce*Je,Ie=Ee;Ie<Math.min(Ze,Ee+Je);++Ie){var Te;if("string"==typeof Ne[Ie]){var Ve=Ne[Ie];Te=Oe.proxyServer?"https://".concat(Oe.proxyServer,"/ap/?url=").concat(Ve+"/api/v2/transpond/webrtc?v=2"):"https://".concat(Ve,"/api/v2/transpond/webrtc?v=2");var He=Object(P.getAreaCodeByWebCS)(Ve);f.default.debug("["+Oe.clientId+"] "+"Connect to choose_server: ".concat(Te,", ").concat(He)),W(Te,Oe,ne,de,0,"domain")}else pe++,f.default.error("["+Oe.clientId+"] Invalid Host",Ne[Ie]),Ie===Ee+Je-1&&Ie<Ze-1-1&&(ce++,_e())}};me();var ye=function _e(){if(!h)for(var Ee=g*Je,Ie=Ee;Ie<Math.min(qe,Ee+Je);Ie++){var Te;if("string"==typeof Ge[Ie]){var Ve=Ge[Ie];Te=Oe.proxyServer?"https://".concat(Oe.proxyServer,"/ap/?url=").concat(Ve+"/api/v2/transpond/webrtc?v=2"):"https://".concat(Ve,"/api/v2/transpond/webrtc?v=2");var He=Object(P.getAreaCodeByWebCS)(Ve);f.default.debug("["+Oe.clientId+"] "+"Connect to backup_choose_server: ".concat(Te,", ").concat(He)),W(Te,Oe,ne,de,0,"backup")}else F++,f.default.error("["+Oe.clientId+"] Invalid Host",Ge[Ie]),Ie===Ee+Je-1&&Ie<Ge-1-1&&(ce++,_e())}},X=setTimeout(ye,1e3)}(p)}},K=function ve(){var le,ge;ge=function(le,ge){if(le){f.default.debug("["+p.clientId+"]",le),f.default.debug("["+p.clientId+"] Request proxy will be restart in "+se+"s"),re=setTimeout(function(){ve()},1e3*se),te[B]=re;var Ce=Object(R.getParameter)("AP_BACKOFF_MAX_TIME");se=se>=Ce?Ce:2*se}else{clearTimeout(re);var Oe=ge.address;p.proxyServer=Oe;var ke={mode:"manual",url:ge.address,tcpport:ge.serverResponse.tcpport||"3433",udpport:ge.serverResponse.udpport||"3478",username:ge.serverResponse.username||"test",credential:ge.serverResponse.password||Object(R.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};ke.tcpport+="",ke.udpport+="",p.turnServers=[],p.turnServers.push(ke),v.report.setProxyServer(Oe),f.default.setProxyServer(Oe),H(Oe,S)}},U(le=p,function(Ce,Oe){if(Ce)return ge&&ge(Ce);f.default.debug("["+le.clientId+"] getProxyServerList: ",Oe),function(p,S,L){var ee=!1,re=0,fe={command:"request",gatewayType:"http",appId:p.appId,cname:p.cname,uid:p.uid+"",sdkVersion:"2.3.1",sid:p.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:p.appId,cname:p.cname,uid:p.uid+"",sid:p.sid}};S.map(function(se){var H,K,ve,B=(new Date).getTime();H="https://"+se+":4000/v2/machine",K=fe,ve=function(H,K){if(H)return f.default.debug("["+p.clientId+"] Request worker manager failed: ",H),re++,v.report.requestProxyWorkerManager(p.sid,{lts:B,succ:!1,workerManagerAddr:se,ec:JSON.stringify(H),response:JSON.stringify({res:K})}),void(re>=S.length&&L&&L("requeet worker manager server failed: request failed"));if(!ee){if(!(K=JSON.parse(K)).serverResponse)return L&&L("requeet worker manager server failed: serverResponse is undefined");ee=!0,v.report.requestProxyWorkerManager(p.sid,{lts:B,succ:!0,workerManagerAddr:se,ec:JSON.stringify(H),response:JSON.stringify({res:K})}),L&&L(null,{address:se,serverResponse:K.serverResponse})}},Object(m.post)(H,K,function(le){ve&&ve(null,le)},function(le){ve&&ve(le)})})}(le,Oe,ge)})};p.useProxyServer?1==p.proxyServerType?K():2==p.proxyServerType?function ve(){var le,ge;ge=function(le,ge){if(le)return f.default.debug("["+p.clientId+"]",le),f.default.debug("["+p.clientId+"] Request proxy will be restart in "+se+"s"),re=setTimeout(function(){ve()},1e3*se),te[B]=re,void(se=se>=3600?3600:2*se);clearTimeout(re);var Ce=Object(R.getParameter)("PROXY_SERVER_TYPE2");p.proxyServer=Ce;var Oe={mode:"manual",url:ge.address,tcpport:ge.serverResponse.tcpport||"3433",udpport:ge.serverResponse.udpport||"3478",username:ge.serverResponse.username||"test",credential:ge.serverResponse.password||"111111",forceturn:!0};Oe.tcpport+="",Oe.udpport+="",p.turnServers=[],p.turnServers.push(Oe),v.report.setProxyServer(Ce),f.default.setProxyServer(Ce),H(Ce,S)},U(le=p,function(Ce,Oe){return Ce?ge&&ge(Ce):(f.default.debug("["+le.clientId+"] getProxyServerList: ",Oe),ge&&ge(null,{address:Oe[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))})}():3==p.proxyServerType?function ve(){G("proxy3",p,function(le,ge){if(le)return"RETRYABLE_ERROR"!==le?L&&L(le):(f.default.debug("["+p.clientId+"]",le),f.default.debug("["+p.clientId+"] Request proxy will be restart in "+se+"s"),re=setTimeout(function(){ve()},1e3*se),te[B]=re,void(se=se>=3600?3600:2*se));var Ce=ge.gatewayServers,Oe=ge.turnServers;clearTimeout(re);var ke=Object(R.getParameter)("NGINX");p.proxyServer=ke,p.turnServers=[];var De=Object(Q.randomString)();Oe.map(function(Re){var Ue={mode:"manual",url:Re.ip,tcpport:"",udpport:Re.port||"3478",username:Re.username||De,credential:Re.password||oe()(De).toString(),forceturn:!0};Ue.tcpport+="",Ue.udpport+="",p.turnServers.push(Ue)}),v.report.setProxyServer(ke),f.default.setProxyServer(ke),S(Ce)})}():4==p.proxyServerType?function ve(){G("proxy4",p,function(le,ge){if(le)return"RETRYABLE_ERROR"!==le?L&&L(le):(f.default.debug("["+p.clientId+"]",le),f.default.debug("["+p.clientId+"] Request proxy will be restart in "+se+"s"),re=setTimeout(function(){ve()},1e3*se),te[B]=re,void(se=se>=3600?3600:2*se));var Ce=ge.gatewayServers,Oe=ge.turnServers;clearTimeout(re);var ke=Object(R.getParameter)("NGINX");p.proxyServer=ke,p.turnServers=[];var De=Object(Q.randomString)();Oe.map(function(Re){var Ue={mode:"manual",url:Re.ip,tcpport:Re.port||"443",udpport:"",username:Re.username||De,credential:Re.password||oe()(De).toString(),forceturn:!1};Ue.tcpport+="",Ue.udpport+="",p.turnServers.push(Ue)}),v.report.setProxyServer(ke),f.default.setProxyServer(ke),S(Ce)})}():5==p.proxyServerType?function ve(){G("proxy5",p,function(le,ge){if(le)return"RETRYABLE_ERROR"!==le?L&&L(le):(f.default.debug("["+p.clientId+"]",le),f.default.debug("["+p.clientId+"] Request proxy will be restart in "+se+"s"),re=setTimeout(function(){ve()},1e3*se),te[B]=re,void(se=se>=3600?3600:2*se));var Ce=ge.gatewayServers,Oe=ge.turnServers;clearTimeout(re);var ke=Object(R.getParameter)("NGINX");p.proxyServer=ke,p.turnServers=[];var De=Object(Q.randomString)();Oe.map(function(Re){var Ue={mode:"manual",url:Re.ip,tcpport:Re.port||"443",udpport:"",username:Re.username||De,credential:Re.password||oe()(De).toString(),forceturn:!1,useTurns:!0};Ue.tcpport+="",Ue.udpport+="",p.turnServers.push(Ue)}),v.report.setProxyServer(ke),f.default.setProxyServer(ke),S(Ce)},!0)}():K():H(null,S)},l=function(p,S,L,ee,re){var fe=Date.now(),se={sid:S.sid,opid:10,appid:S.appId,string_uid:ee=ee||S.stringUid};return new Promise(function(B,H){Object(m.post)(p+"".concat(-1===p.indexOf("?")?"?":"&","action=stringuid"),se,function(K){try{var ve=JSON.parse(K),le=ve.code}catch(De){var ge="requestUserAccount failed with unexpected body "+K;return f.default.error("["+S.clientId+"]",ge),H({retryable:!0,info:ge,url:p,error:"UNEXPECTED_ERROR"}),L&&L.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void v.report.reqUserAccount(se.sid,{lts:fe,success:!1,serverAddress:p,stringUid:ee,uid:null,extend:K,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(le){var Ce=!1;return"INTERNAL_SERVER_ERROR"===(ke=x.StringUidErrorCode[ve.code%1e4]||"REQ_ACCOUNT_ERR_".concat(le))&&(Ce=!0),L&&L.dispatchEvent({type:"error",reason:ke}),v.report.reqUserAccount(se.sid,{lts:fe,success:!1,serverAddress:p,stringUid:ee,uid:null,errorCode:ke,extend:se}),H({retryable:Ce,info:ge="Get String Uid Failed ["+ke+"]",url:p,error:ke})}var Oe=ve.uid;if(!(Oe>0&&Oe<Math.pow(2,32))){f.default.error("["+S.clientId+"] "+"Invalid Uint Uid ".concat(ee," => ").concat(Oe),ve);var ke="INVALID_UINT_UID_".concat(Oe);return L&&L.dispatchEvent({type:"error",reason:ke}),v.report.reqUserAccount(se.sid,{lts:fe,success:!1,serverAddress:p,stringUid:ee,uid:null,errorCode:ke,extend:se}),H({retryable:!0,error:ke,info:"Get String Uid failed ["+ke+"]",url:p})}B({uid:Oe,url:p}),v.report.reqUserAccount(se.sid,{lts:fe,success:!0,serverAddress:p,stringUid:ee,uid:Oe,errorCode:null,extend:se})},function(K,ve){if("timeout"===K.type){var le="USER_ACCOUNT_TIMEOUT";L&&L.dispatchEvent({type:"error",reason:le}),v.report.reqUserAccount(se.sid,{lts:fe,success:!1,serverAddress:ve,stringUid:ee,uid:null,errorCode:le,extend:se}),H({retryable:!0,info:le,url:ve,error:le})}else{var ge="USER_ACCOUNT_SERVER_WRONG_".concat(K.type);L&&L.dispatchEvent({type:"error",reason:ge}),v.report.reqUserAccount(se.sid,{lts:fe,success:!1,serverAddress:ve,stringUid:ee,uid:null,errorCode:ge,extend:se}),H({retryable:!0,info:ge,url:ve,error:ge})}},{"X-Packet-Service-Type":0,"X-Packet-URI":72})})},$=function(p,S,L){Date.now();var ee,ve,re=Object(R.getParameter)("ACCOUNT_REGISTER"),fe=!1,se=Object(R.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),B=null,H=null,K=new Promise((ve=_()(T.a.mark(function le(ge,Ce){var Oe,ke,De;return T.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:B=ge,H=Ce,ee=0;case 3:if(!(ee<Object(R.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){Re.next=33;break}if(!fe){Re.next=6;break}return Re.abrupt("return");case 6:return Oe=re[ee%re.length],ke=p.proxyServer?"https://".concat(p.proxyServer,"/ap/?url=").concat(Oe+"/api/v1"):"https://".concat(Oe,"/api/v1"),Re.prev=8,Re.delegateYield(T.a.mark(function Ue(){var h;return T.a.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=3,l(ke,p,S,L);case 3:if(h=pe.sent,!fe){pe.next=6;break}return pe.abrupt("return",{v:void 0});case 6:fe=!0,setTimeout(function(){f.default.debug("Get UserAccount Successfully",h),B(h)},0);case 8:case"end":return pe.stop()}},Ue)})(),"t0",10);case 10:if(De=Re.t0,"object"!==w()(De)){Re.next=13;break}return Re.abrupt("return",De.v);case 13:Re.next=30;break;case 15:if(Re.prev=15,Re.t1=Re.catch(8),!fe){Re.next=19;break}return Re.abrupt("return");case 19:if(!Re.t1.retryable){Re.next=27;break}return(se=Math.ceil(se*Object(R.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(R.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(se=Object(R.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),f.default.error("".concat(Re.t1.info," ").concat(Re.t1.url," Will Fetch User Account in ").concat(se/1e3," seconds")),Re.next=25,new Promise(function(Ue){setTimeout(Ue,se)});case 25:Re.next=30;break;case 27:f.default.error("Get UserAccount Error: ".concat(Re.t1.info," ").concat(Re.t1.url),Re.t1.error),fe=!0,H(Re.t1.error);case 30:ee++,Re.next=3;break;case 33:case"end":return Re.stop()}},le,null,[[8,15]])})),function(le,ge){return ve.apply(this,arguments)}));return K.cancel=function(){fe||(fe=!0,H({info:"Request Cancelled",retryable:!1}))},K.isFinished=function(){return fe},K}},function(ue,ie,V){"use strict";var D=this&&this.__spreadArrays||function(){for(var x=0,U=0,I=arguments.length;U<I;U++)x+=arguments[U].length;var E=Array(x),j=0;for(U=0;U<I;U++)for(var P=arguments[U],G=0,M=P.length;G<M;G++,j++)E[j]=P[G];return E},w=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(ie,"__esModule",{value:!0});var O,T,x,N=w(V(0));(x=O||(O={})).CHINA="CHINA",x.ASIA="ASIA",x.NORTH_AMERICA="NORTH_AMERICA",x.EUROPE="EUROPE",x.JAPAN="JAPAN",x.INDIA="INDIA",x.OCEANIA="OCEANIA",x.SOUTH_AMERICA="SOUTH_AMERICA",x.AFRICA="AFRICA",x.OVERSEA="OVERSEA",x.GLOBAL="GLOBAL",ie.AREAS=O,function(x){x.CHINA="CN",x.ASIA="AS",x.NORTH_AMERICA="NA",x.EUROPE="EU",x.JAPAN="JP",x.INDIA="IN",x.OCEANIA="OC",x.SOUTH_AMERICA="SA",x.AFRICA="AF",x.OVERSEA="OVERSEA",x.GLOBAL="GLOBAL"}(T||(T={}));var _={ASIA:{CODE:T.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:T.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:T.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:T.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:T.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:T.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],NGINX:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:T.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],NGINX:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:T.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:T.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:T.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};ie.AREA_DOMAIN_MAP=_;var R={GLOBAL:{ASIA:[O.CHINA,O.JAPAN,O.INDIA],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},f=Object.keys(R[O.GLOBAL]),m=[O.CHINA,O.NORTH_AMERICA,O.EUROPE,O.ASIA,O.JAPAN,O.INDIA,O.OCEANIA,O.SOUTH_AMERICA,O.AFRICA];ie.getAreaCodeByConfig=function(x){var U=x.areaCode,I=x.excludedArea;return I?function(x,U){var Q,E=[];if("string"==typeof x&&(x=[x]),U&&!x.includes(O.GLOBAL)&&(E=x),U||(E=x),U&&x.includes(O.GLOBAL)){var j=[O.GLOBAL,O.OVERSEA],P=Object.keys(_);if(U===O.GLOBAL)throw new Error("Can not set excludedArea to 'GLOBAL'");if(U===O.CHINA)E=[O.OVERSEA];else if(f.includes(U)){var G=(void 0===(Q=U)&&(Q=""),R[O.GLOBAL][Q]||[]),M=D(j,[U],G);E=P.filter(function(Q){return!M.includes(Q)})}else if(function(Q){var te=!1;return f.forEach(function(z){R.GLOBAL[z].includes(Q)&&(te=!0)}),te}(U)){var Y=function(Q){void 0===Q&&(Q="");var te="";return f.forEach(function(z){R.GLOBAL[z].includes(Q)&&(te=z)}),te}(U),oe=D(j,[Y,U]);E=P.filter(function(Q){return!oe.includes(Q)})}else E=x;E=function(Q){var te=[];return m.forEach(function(z){Q.includes(z)&&te.push(z)}),te.concat(Q.filter(function(z){return!m.includes(z)}))}(E)}return console.log("getAreaCodeAfterCalculation result",E),E}(U,I):U},_.CHINA={CODE:T.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]},ie.getAreaCodeByWebCS=function(x){for(var U=Object.keys(_),I=0;I<U.length;I++){var j=_[U[I]];if(j.WEBCS_DOMAIN.includes(x)||j.WEBCS_DOMAIN_BACKUP_LIST.includes(x))return j.CODE===T.OVERSEA?T.ASIA+","+T.EUROPE+","+T.AFRICA+","+T.NORTH_AMERICA+","+T.SOUTH_AMERICA+","+T.OCEANIA:j.CODE}},ie.getAreaCodeByArea=function(x){return x===O.OVERSEA?T.ASIA+","+T.EUROPE+","+T.AFRICA+","+T.NORTH_AMERICA+","+T.SOUTH_AMERICA+","+T.OCEANIA:T[x]},ie.getAreaDomainConfig=function(x){var U={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],NGINX:[]};return x.map(function(I){var E=_[I];if(E){var j=Object.keys(E);j?j.map(function(P){"CODE"!==P&&(U[P]=U[P].concat(E[P]))}):N.default.info(I+" is not exist")}else N.default.info(I+" is not exist")}),U}},function(ue,ie,V){"use strict";V.d(ie,"a",function(){return u}),V.d(ie,"b",function(){return W});var D=V(7),w=V.n(D),O=V(5),T=V(8),_=V(0),R=V(15),f=V(4),m=V(2),v=V(1),x=0,U=function(C){var l=function(C){var l=Object(T.b)({});return l.url=".",l}();l.id=C.id,l.playerId=x++,l.destroyed=!1,l.fit=C.options&&C.options.fit,"contain"!==l.fit&&"cover"!==l.fit&&(l.fit=null),l.url=C.url,l.stream=C.stream.stream,l.peerVideoReady=!1,l.isFreeze=!1,l.freezeTimeCounterList=[],l.freezeCount=0,l.lastFreezeCount=0,l.lastTimeupdateTime=0,l.elementID=C.elementID,l.setAudioOutput=function(ke,De,Re){var Ue=l.video||l.audio;return Ue?Ue.setSinkId?void Ue.setSinkId(ke).then(function(){return _.default.debug("["+l.id+"] "+"video ".concat(l.id," setAudioOutput ").concat(ke," SUCCESS")),Ue==l.video&&l.audio?l.audio.setSinkId(ke):Promise.resolve()}).then(function(){return _.default.debug("["+l.id+"] "+"audio ".concat(l.id," setAudioOutput ").concat(ke," SUCCESS")),De&&De()}).catch(function(h){return _.default.error("["+l.id+"] VideoPlayer.setAudioOutput",h),Re&&Re(h)}):(_.default.error("["+l.id+"] ",f.default.WEB_API_NOT_SUPPORTED),Re&&Re(f.default.WEB_API_NOT_SUPPORTED)):(_.default.error("["+l.id+"] ",f.default.PLAYER_NOT_FOUND),Re&&Re(f.default.PLAYER_NOT_FOUND))},l.destroy=function(){_.default.debug("[".concat(l.id,"] destroy ").concat(C.stream.local?"local":"remote"," Player ").concat(l.id)),Object(R.setSrcObject)(l.video,null),Object(R.setSrcObject)(l.audio,null),l.video.load(),l.audio.load(),l.video.pause(),l.video.remove(),l.audio.remove(),l.freezeCheckInterval&&clearInterval(l.freezeCheckInterval),l.destroyed=!0,delete l.resizer,document.getElementById(l.div.id)&&l.parentNode.contains(l.div)&&l.div.remove()&&l.parentNode.removeChild(l.div),["video","audio"].forEach(function(ke){var De=S[ke];clearTimeout(De.playDeferTimeout),De.formerMediaState=null;var Re={playerId:l.playerId,stateId:De.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};S[ke]=Re;var Ue={type:"player-status-change",playerId:l.playerId,mediaType:ke,status:Re.status,reason:Re.reason,isErrorState:!1,streamId:l.id};_.default.debug("[".concat(l.id,"] Media Player Status Change Triggered by destroy()"),Ue),C.stream.dispatchEvent(Ue),v.report.reportApiInvoke(C.stream.sid,{name:"Stream.playerStatusChange",options:Ue,tag:"tracer"})()})},l.div=document.createElement("div"),l.div.setAttribute("id","player_"+l.id),l.div.setAttribute("style",C.stream.video?"width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;":"width: 100%; height: 100%; position: relative; overflow: hidden;"),l.video=document.createElement("video"),l.video.setAttribute("id","video"+l.id),l.video.setAttribute("style",C.stream.local&&!C.stream.screen?C.stream.mirror?"width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(l.fit||"cover",";"):"width: 100%; height: 100%; position: absolute; object-fit: ".concat(l.fit||"cover",";"):C.stream.video?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(l.fit||"cover",";"):C.stream.screen?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(l.fit||"contain"):"width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(l.fit||"cover"));var $={autoplay:!0,muted:!!C.stream.local||!(!O.isSafari()&&"iOS"!==O.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},p=w()({},$,C.options);!0!==p.muted||p.volume||(p.volume=0),l.video.setAttribute("autoplay",""),l.video.setAttribute("muted",""),l.video.muted=!0,l.video.autoplay=!0,p.playsinline&&l.video.setAttribute("playsinline",""),p.controls&&l.video.setAttribute("controls",""),p.contains&&(l.video.controls=!0),Number.isFinite(p.volume)&&(l.video.volume=p.volume),l.audio=document.createElement("audio"),l.audio.setAttribute("id","audio"+l.id),!0===p.muted&&l.audio.setAttribute("muted",""),!0===p.muted&&(l.audio.muted=!0),p.playsinline&&l.audio.setAttribute("playsinline",""),Number.isFinite(p.volume)&&(l.audio.volume=p.volume),void 0!==l.elementID?(document.getElementById(l.elementID).appendChild(l.div),l.container=document.getElementById(l.elementID)):(document.body.appendChild(l.div),l.container=document.body),l.parentNode=l.div.parentNode;var S={video:{playerId:l.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:l.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};l.mediaElemExists=function(ke){for(var De=ke,Re=0;Re<Object(m.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&De;Re++)De=De.parentNode;return!!De};var L=function(ke){return l.mediaElemExists(ke)?ke.paused?"paused":"play":"aborted"},ee=function(ke,De,Re){var Ue=L(ke),h=!0;return"paused"===Ue?("audio"===De&&!0===Re.muted&&(h=!1),Re.autoplay||(h=!1)):"play"===Ue?"video"===De?h=!1:!0===Re.muted?ke.muted&&(h=!1):ke.muted||(h=!1):"aborted"===Ue&&(h=!1),h},re=function(ke){var De,Re=this;if(Re===l.video?De="video":Re===l.audio&&(De="audio"),De){if(ke.type||_.default.error("[".concat(l.id,"] Unexpected evt"),ke),"video"===De&&Re.muted&&Re.paused)return _.default.debug("[".concat(l.id,"] auto resume video element")),void Re.play();var Ue=L(Re);clearTimeout(S[De].playDeferTimeout),S[De].playDeferTimeout=setTimeout(function(){S[De].playDeferTimeout=null;var h=S[De],pe=L(Re);if(Ue===pe){var F={playerId:l.playerId,stateId:h.stateId+1,playDeferTimeout:null,error:ee(Re,De,p),status:L(Re),reason:ke.type,updatedAt:Date.now()};if(h.status!==F.status){S[De]=F;var Ne={type:"player-status-change",playerId:l.playerId,mediaType:De,status:F.status,reason:F.reason,isErrorState:F.error,streamId:l.id};_.default.debug("[".concat(l.id,"] Media Player Status Change"),Ne),C.stream.dispatchEvent(Ne),v.report.reportApiInvoke(C.stream.sid,{name:"Stream.playerStatusChange",options:Ne,tag:"tracer"})()}}else _.default.debug("[".concat(l.id,"] Status Change after event Triggered.")+"Stream ".concat(l.id," PlayerId ").concat(l.playerId," mediaType ").concat(De," Status ").concat(Ue,"=>").concat(pe))},Object(m.getParameter)("PLAYER_STATE_DEFER"))}else _.default.error("[".concat(l.id,"] Unknown media element"),Re)};l.video.addEventListener("playing",function(ke){!function De(){l.video.videoWidth*l.video.videoHeight>4?_.default.debug("["+l.id+"] video dimensions:",l.video.videoWidth,l.video.videoHeight):setTimeout(De,50)}()});var fe=0,se=0,B=0;l.freezeCheckInterval=setInterval(function(){Date.now()-l.lastTimeupdateTime>500&&l.peerVideoReady?(l.isFreeze=!0,l.freezeCount+=1):l.isFreeze=!1},500),l.video.addEventListener("playing",re),l.video.addEventListener("canplay",re),l.video.addEventListener("abort",re),l.video.addEventListener("onerror",re),l.video.addEventListener("suspend",re),l.video.addEventListener("stalled",re),l.video.addEventListener("pause",re),l.audio.addEventListener("playing",re),l.audio.addEventListener("canplay",re),l.audio.addEventListener("abort",re),l.audio.addEventListener("onerror",re),l.audio.addEventListener("suspend",re),l.audio.addEventListener("stalled",re),l.audio.addEventListener("pause",re);var H=l.audio,K="audio";if(C.stream.hasVideo()||C.stream.hasScreen())l.div.appendChild(l.video),l.div.appendChild(l.audio),O.isEdge()?l.video.srcObject=C.stream.stream:(Object(R.attachMediaStream)(l.video,C.stream.stream),Object(R.attachMediaStream)(l.audio,C.stream.stream)),l.video.addEventListener("timeupdate",function(){var ke=Date.now();if((fe+=1)<10)l.lastTimeupdateTime=ke;else for(ke-l.lastTimeupdateTime>500&&(l.peerVideoReady?se+=ke-l.lastTimeupdateTime:l.peerVideoReady=!0),B+=ke-l.lastTimeupdateTime,l.lastTimeupdateTime=ke;B>=6e3;)B-=6e3,l.freezeTimeCounterList.push(Math.min(6e3,se)),se-=6e3,se=Math.max(se,0)});else{!1!==p.muted&&"video_element_muted"!==p.muted||(l.video.removeAttribute("muted"),l.video.muted=!1),l.video.removeAttribute("autoplay"),l.video.autoplay=!1,l.div.appendChild(l.video),H=l.video,K="video";var le={playerId:l.playerId,stateId:S.audio.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};S.audio=le;var ge={type:"player-status-change",playerId:l.playerId,mediaType:"audio",status:le.status,reason:le.reason,isErrorState:le.error,streamId:l.id};if(_.default.debug("[".concat(l.id,"] Media Player Status Change"),ge),Promise.resolve().then(function(){return C.stream.dispatchEvent(ge)}),v.report.reportApiInvoke(C.stream.sid,{name:"Stream.playerStatusChange",options:ge,tag:"tracer"})(),window.MediaStream&&(O.isSafari()||"iOS"===O.getBrowserOS())){var Ce=new MediaStream(C.stream.stream.getAudioTracks());Object(R.setSrcObject)(l.video,Ce)}else Object(R.setSrcObject)(l.video,C.stream.stream)}if(p.autoplay&&H){var Oe=H.play();Oe&&Oe.catch&&Oe.catch(function(ke){if(!l.destroyed&&H){var De=S[K],Re={playerId:l.playerId,stateId:De.stateId+1,playDeferTimeout:null,error:ee(H,K,p),status:L(H),reason:"error",updatedAt:Date.now()};if(De.status!==Re.status){_.default.debug("[".concat(l.id,"] Player ").concat(l.playerId," Status Changed Detected by promise error: ").concat(De.status,"=>").concat(Re.status),ke),S[K]=Re;var Ue={type:"player-status-change",playerId:l.playerId,mediaType:K,status:Re.status,reason:Re.reason,isErrorState:Re.error,streamId:l.id};_.default.debug("[".concat(l.id,"] Media Player Status Change"),Ue),C.stream.dispatchEvent(Ue),v.report.reportApiInvoke(C.stream.sid,{name:"Stream.playerStatusChange",options:Ue,tag:"tracer"})()}}})}return l.setAudioVolume=function(ke){var De=parseInt(ke)/100;isFinite(De)&&(De<0?De=0:De>1&&(De=1),l.video&&(l.video.volume=De),l.audio&&(l.audio.volume=De))},l},I=V(23),E=V(10),j=V(6),P=V(19),G=V(3),M=V(25),Y=V(16),oe=V(11),Q=V.n(oe),te=function(C){Object(G.checkValidString)(C,"profileName"),-1===(C=C.toLowerCase()).indexOf("_")&&(C+="_1"),Object(G.checkValidEnum)(C,"profileName",Object.keys(m.SUPPORT_RESOLUTION_LIST));var l=m.SUPPORT_RESOLUTION_LIST[C];l||(C=Object(m.getParameter)("DEFAULT_PROFILE"),l=m.SUPPORT_RESOLUTION_LIST[C]);var $={profileName:C,video:{width:l[0],height:l[1]},attributes:{resolution:"".concat(l[0],"x").concat(l[1]),minFrameRate:l[2],maxFrameRate:l[3],minVideoBW:l[4],maxVideoBW:l[5]}};return l[2]&&($.video.frameRate=l[2]),l[6]&&l[7]&&($.screen={width:l[0],height:l[1],frameRate:{min:l[6],max:l[7]}}),$},z=function(C){return Object.keys(m.SUPPORT_RESOLUTION_LIST).filter(function(l){var $=m.SUPPORT_RESOLUTION_LIST[l],p=["width","height","frameRate"];for(var S in p){var L=p[S];if(C[L]&&$[S]&&("number"==typeof C[L].max&&C[L].max<$[S]||"number"==typeof C[L].min&&C[L].min>$[S]))return!1}return!0}).reverse()},b=function(C){var l=m.AUDIO_PROFILE_SETTINGS[C]||m.AUDIO_PROFILE_SETTINGS.default;return{highQuality:l[0],stereo:l[1],speech:l[2],lowQuality:l[3]}},u=function(C){var p,l=Object(T.b)();if(l.params=w()({},C),l.stream=C.stream,l.url=C.url,l.onClose=void 0,l.local=!1,l.videoSource=C.videoSource,l.audioSource=C.audioSource,C.video=!(!C.videoSource&&!C.video),l.video=C.video,C.audio=!(!C.audioSource&&!C.audio),l.audio=C.audio,l.screen=!!C.screen,l.screenAudio=!!C.screenAudio,l.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},l.videoSize=C.videoSize,l.player=void 0,l.audioLevelHelper=null,C.attributes=C.attributes||{},l.attributes=C.attributes,l.microphoneId=C.microphoneId,l.cameraId=C.cameraId,l.facingMode=C.facingMode,l.inSwitchDevice=!1,l.userMuteVideo=!1,l.userMuteAudio=!1,l.peerMuteVideo=!1,l.peerMuteAudio=!1,l.lowStream=null,l.videoWidth=0,l.videoHeight=0,l.streamId=C.streamID,l.userId=null,l.uintId=C.uintUID||null,l.mirror=!1!==C.mirror,l.DTX=C.audioProcessing&&C.audioProcessing.DTX,l.audioProcessing=C.audioProcessing,l.optimizationMode=C.optimizationMode,l.highQuality=!1,l.stereo=!1,l.speech=!1,l.screen||delete l.screen,!(void 0===l.videoSize||l.videoSize instanceof Array&&4===l.videoSize.length))throw Error("Invalid Video Size");function $(){var p={};l.getVideoTrack()===this?(_.default.debug("Video Track Ended"),p.type="videoTrackEnded",p.track=this):l.getAudioTrack()===this?(_.default.debug("Audio Track Ended"),p.type="audioTrackEnded",p.track=this):_.default.debug("Detached Track ended",this.kind,this.label,this),p.type&&l.dispatchEvent(p)}return l.videoSize=[640,480,640,480],void 0!==C.local&&!0!==C.local||(l.local=!0),l.initialized=!l.local,l._streamInitID=null,(p=l).audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},p._initSoundIfNotExists=function(S,L){p.audioMixing.sounds[S]||(p.audioMixing.sounds[S]={soundId:S,state:"IDLE",muted:p.userMuteAudio,filePath:L,volume:p.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},p._initSoundIfNotExists(-1),p.loadAudioBuffer=function(S,L,ee){var re=v.report.reportApiInvoke(p.sid,{callback:ee,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(G.checkValidString)(L,"url",1,1024,!1),Object(G.checkValidString)(S,"id",1,1024,!1);var fe=function(B){_.default.error("[".concat(p.streamId,"] loadAudioBuffer Failed: ")+B),re(f.default.LOAD_AUDIO_FAILED)},se=new XMLHttpRequest;se.open("GET",L,!0),se.responseType="arraybuffer",se.onload=function(){if(se.status>400)fe("".concat(se.status," ").concat(se.statusText));else{var B=se.response;p.audioMixing.audioContextInited||p._initAudioContext(),p.audioMixing.ctx.decodeAudioData(B,function(H){p.audioMixing.buffer[S]=H,re(null)},function(H){_.default.error("[".concat(p.streamId,"] decodeAudioData Failed: "),H),re(H)})}},se.onerror=function(){return fe("load error")},se.ontimeout=function(){return fe("timeout")},se.send()},p.createAudioBufferSource=function(S){var L=v.report.reportApiInvoke(p.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(p.audioMixing.buffer[S.id]){var ee=p.audioMixing.buffer[S.id],re=p.audioMixing.ctx.createBufferSource();re.buffer=ee;var fe=p.audioMixing.ctx.createGain();if(re.connect(fe),fe.connect(p.audioMixing.mediaStreamDest),re.gainNode=fe,S.loop)re.loop=!0,re.start(0,S.playTime/1e3);else if(S.cycle>1)if(Object(O.isChrome)()){re.loop=!0;var se=S.cycle*ee.duration*1e3-(S.playTime||0);re.start(0,S.playTime/1e3,se/1e3)}else _.default.warning("[".concat(p.streamId,"] Cycle Param is ignored by current browser")),re.start(0,S.playTime/1e3);else re.start(0,S.playTime/1e3);var B=p.audioMixing.sounds[S.soundId];return B.source=re,p._flushAudioMixingMuteStatus(),re.addEventListener("ended",function(){re===B.source&&p.dispatchEvent({type:"audioSourceEnded",soundId:S.soundId,source:re,sound:B})}),L(),re}var H="AUDIOBUFFER_NOT_FOUND";return _.default.error("[".concat(p.streamId,"] "),H,S.id),L(!1),!1},p.on("audioSourceEnded",function(S){var L=S.source,ee=S.sound;ee&&ee.state===p.audioMixing.states.BUSY&&!ee.pauseAt&&(ee.state=p.audioMixing.states.IDLE,ee.startAt=null,ee.startOffset=null,ee.resumeAt=null,ee.resumeOffset=null,L.gainNode&&L.gainNode.disconnect&&L.gainNode.disconnect(),L.buffer=null,p.audioMixing.mediaStreamSource.connect(p.audioMixing.mediaStreamDest))}),p.clearAudioBufferSource=function(){p.audioBufferSource.forEach(function(S){S.stop()})},p._isSoundExists=function(S){return!!p.audioMixing.sounds[S.soundId]||(_.default.error("SoundId not exists. #".concat(S.soundId)),!1)},p._initAudioContext=function(){if(p.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!p.stream)throw new Error("Failed to init audio context. Local Stream not initialized");p.audioMixing.ctx=Object(M.a)(),p.audioMixing.mediaStreamSource=p.audioMixing.ctx.createMediaStreamSource(p.stream),p.audioMixing.mediaStreamDest=p.audioMixing.ctx.createMediaStreamDestination(),p.audioMixing.mediaStreamSource.connect(p.audioMixing.mediaStreamDest);var S=p.stream.getVideoTracks()[0];if(S&&p.audioMixing.mediaStreamDest.stream.addTrack(S),p._originStream=p.stream,p._isAudioMuted()?(p._unmuteAudio(),p.stream=p.audioMixing.mediaStreamDest.stream,p._muteAudio()):p.stream=p.audioMixing.mediaStreamDest.stream,p.audioLevelHelper=null,p.pc&&p.pc.peerConnection&&p.pc.peerConnection){var L=(p.pc.peerConnection&&p.pc.peerConnection.getSenders()).find(function(re){return re&&re.track&&"audio"==re.track.kind}),ee=p.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];L&&L.replaceTrack&&ee&&L.replaceTrack(ee)}p.audioMixing.audioContextInited=!0},p._cleanupAudioMixing=function(){if(p.audioMixing.audioContextInited){for(var S in p.audioMixing.sounds){var L=p.audioMixing.sounds[S];L.state!==p.audioMixing.states.BUSY&&L.state!==p.audioMixing.states.PAUSED||p._stopOneEffect({soundId:S})}p.audioLevelHelper=null,p.audioMixing.audioContextInited=!1}},p._reloadInEarMonitoringMode=function(S){if(S){if(!p.audioMixing.inEarMonitoringModes[S])return _.default.error("[".concat(p.streamId,"] Invalid InEarMonitoringMode ").concat(S));p.audioMixing.inEarMonitoring=S}switch(p.audioMixing.audioContextInited||p._initAudioContext(),p.audioMixing.inEarMonitoring){case p.audioMixing.inEarMonitoringModes.FILE:p.audioMixing.mediaStreamSource.connectedToDestination&&(p.audioMixing.mediaStreamSource.disconnect(p.audioMixing.ctx.destination),p.audioMixing.mediaStreamSource.connectedToDestination=!1);case p.audioMixing.inEarMonitoringModes.ALL:for(var L in p.audioMixing.sounds){var ee=p.audioMixing.sounds[L];ee&&ee.source&&!ee.source.connectedToDestination&&(ee.source.gainNode.connect(p.audioMixing.ctx.destination),ee.source.connectedToDestination=!0)}}switch(p.audioMixing.inEarMonitoring){case p.audioMixing.inEarMonitoringModes.MICROPHONE:p.audioMixing.source.forEach(function(re){re.connectedToDestination&&(re.gainNode.disconnect(p.audioMixing.ctx.destination),re.connectedToDestination=!1)});case p.audioMixing.inEarMonitoringModes.ALL:p.audioMixing.mediaStreamSource.connectedToDestination||(p.audioMixing.mediaStreamSource.connect(p.audioMixing.ctx.destination),p.audioMixing.mediaStreamSource.connectedToDestination=!0)}},p._startAudioMixingBufferSource=function(S){p.audioMixing.audioContextInited||p._initAudioContext();var ee=S.replace,re=p.createAudioBufferSource({soundId:S.soundId,id:S.filePath,loop:S.loop,cycle:S.cycle,playTime:S.playTime||0});return re.sound=p.audioMixing.sounds[S.soundId],re?(re.addEventListener("ended",p._audioMixingFinishedListener,{once:!0}),p._reloadInEarMonitoringMode(),ee&&p.audioMixing.mediaStreamSource.disconnect(p.audioMixing.mediaStreamDest),re):null},p._stopAudioMixingBufferSource=function(S){var L=p.audioMixing.sounds[S.soundId].source;return L?(L.removeEventListener("ended",p._audioMixingFinishedListener),p.audioMixing.mediaStreamSource.connect(p.audioMixing.mediaStreamDest),L.stop(),L.gainNode&&L.gainNode.disconnect&&L.gainNode.disconnect(),L.buffer=null,L):null},p._flushAudioMixingMuteStatus=function(S){for(var L in p.audioMixing.sounds){var ee=p.audioMixing.sounds[L];ee&&(void 0!==S&&(ee.muted=!!S),ee.source&&(ee.source.gainNode.gain.value=ee.muted?0:ee.volume/100))}},p._handleAudioMixingInvalidStateError=function(S,L,ee){var re=p.audioMixing.sounds[L.soundId],fe=-1===L.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";_.default.error("[".concat(p.streamId,"] Cannot ").concat(S,": ").concat(fe,", state is ").concat(re.state)),ee&&ee(fe)},p._handleAudioMixingNoSourceError=function(S,L,ee){p.audioMixing.sounds[L.soundId].state=p.audioMixing.states.IDLE;var re=-1===L.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";_.default.error("[".concat(p.streamId,"] Cannot ").concat(S,": ").concat(re)),ee&&ee(re)},p._getOneEffectStates=function(S){var L=p.audioMixing.sounds[S.soundId];return function(){return L?{state:L.state,startAt:L.startAt,resumeAt:L.resumeAt,pauseOffset:L.pauseOffset,pauseAt:L.pauseAt,resumeOffset:L.resumeOffset,stopAt:L.stopAt,duration:p._getOneEffectDuration(S),position:p._getOneEffectCurrentPosition(S)}:{}}},p._audioMixingFinishedListener=function(){var S=this.sound;S.state===p.audioMixing.states.IDLE&&p.audioMixing.buffer[S.options.filePath]&&!S.options.cacheResource&&(_.default.debug("Recycled buffer ".concat(S.options.filePath)),delete p.audioMixing.buffer[S.options.filePath]),-1===S.soundId&&p.dispatchEvent({type:"audioMixingFinished"})},p._playOneEffect=function(S,L){Object(G.checkValidObject)(S,"options");var ee=S.soundId,re=S.cacheResource;if(Object(O.isSafari)()&&Object(O.getBrowserVersion)()<12){var fe="BROWSER_NOT_SUPPORT";return _.default.error("[".concat(p.streamId,"] Cannot _playOneEffect: "),fe),L(fe)}p.audioMixing.audioContextInited||p._initAudioContext(),p._initSoundIfNotExists(ee);var se=p.audioMixing.sounds[ee];if(se.state===p.audioMixing.states.IDLE){if(void 0!==S.cycle&&!S.cycle>0)return fe="Invalid Parmeter cycle: "+S.cycle,_.default.error("[".concat(p.streamId,"] ").concat(ee),fe),L(fe);if(Object(G.isEmpty)(re)&&(S.cacheResource=!0),se.state=p.audioMixing.states.STARTING,se.options=S,p.audioMixing.buffer[S.filePath]){var B=p._startAudioMixingBufferSource(S);if(B)return se.source=B,se.startAt=Date.now(),se.resumeAt=null,se.pauseOffset=null,se.pauseAt=null,se.resumeOffset=null,se.stopAt=null,se.startOffset=S.playTime||0,se.state=p.audioMixing.states.BUSY,p._flushAudioMixingMuteStatus(),L(null);se.state=p.audioMixing.states.IDLE;var H="CREATE_BUFFERSOURCE_FAILED";if(L)return L(H);_.default.error("[".concat(p.streamId,"] "),H)}else p.loadAudioBuffer(S.filePath,S.filePath,function(K){if(K)se.state=p.audioMixing.states.IDLE,L?L(K):_.default.error("[".concat(p.streamId,"] "),K);else{var ve=p._startAudioMixingBufferSource(S);if(ve)return se.source=ve,se.startAt=Date.now(),se.resumeAt=null,se.pauseOffset=null,se.pauseAt=null,se.resumeOffset=null,se.stopAt=null,se.startOffset=S.playTime||0,se.state=p.audioMixing.states.BUSY,p._flushAudioMixingMuteStatus(),L(null);if(se.state=p.audioMixing.states.IDLE,K="CREATE_BUFFERSOURCE_FAILED",L)return L(K);_.default.error("[".concat(p.streamId,"] "),K)}})}else p._handleAudioMixingInvalidStateError("_playEffect",S,L)},p._stopOneEffect=function(S,L){var ee=p.audioMixing.sounds[S.soundId];return p._isSoundExists(S)?ee.state===p.audioMixing.states.BUSY||ee.state===p.audioMixing.states.PAUSED?(p._stopAudioMixingBufferSource(S),ee.stopAt=Date.now(),ee.state=p.audioMixing.states.IDLE,p.audioMixing.buffer[ee.options.filePath]&&!ee.options.cacheResource&&(_.default.debug("Recycled buffer ".concat(ee.options.filePath)),delete p.audioMixing.buffer[ee.options.filePath]),void(L&&L(null))):void p._handleAudioMixingInvalidStateError("_stopOneEffect",S,L):L("SOUND_NOT_EXISTS")},p._pauseOneEffect=function(S,L){var ee=p.audioMixing.sounds[S.soundId];if(ee.state===p.audioMixing.states.BUSY)return p._stopAudioMixingBufferSource(S)?(ee.pauseAt=Date.now(),ee.state=p.audioMixing.states.PAUSED,ee.pauseOffset=ee.resumeAt?ee.pauseAt-ee.resumeAt+ee.resumeOffset:ee.pauseAt-ee.startAt+ee.startOffset,L&&L(null)):void p._handleAudioMixingNoSourceError("_pauseOneEffect",S,L);p._handleAudioMixingInvalidStateError("_pauseOneEffect",S,L)},p._resumeOneEffect=function(S,L){var ee=p.audioMixing.sounds[S.soundId];if(ee.state===p.audioMixing.states.PAUSED){var fe=p._startAudioMixingBufferSource({soundId:S.soundId,filePath:ee.options.filePath,cycle:ee.options.cycle,loop:ee.options.loop,playTime:ee.pauseOffset,replace:ee.options.replace});if(!fe){var se="CREATE_BUFFERSOURCE_FAILED";return L(se),void _.default.error("[".concat(p.streamId,"] "),se)}ee.source=fe,ee.resumeAt=Date.now(),ee.resumeOffset=ee.pauseOffset,ee.state=p.audioMixing.states.BUSY,ee.pauseAt=null,ee.pauseOffset=null,L(null)}else p._handleAudioMixingInvalidStateError("_resumeOneEffect",S,L)},p._getOneEffectDuration=function(S){var L=p.audioMixing.sounds[S.soundId];return L.options&&L.options.filePath&&p.audioMixing.buffer[L.options.filePath]?1e3*p.audioMixing.buffer[L.options.filePath].duration:null},p._getOneEffectCurrentPosition=function(S,L){var ee=p.audioMixing.sounds[S.soundId];return ee.state===p.audioMixing.states.PAUSED?ee.pauseOffset%p._getOneEffectDuration(S):ee.state===p.audioMixing.states.BUSY?ee.resumeAt?(Date.now()-ee.resumeAt+ee.resumeOffset)%p._getOneEffectDuration(S):(Date.now()-ee.startAt+ee.startOffset)%p._getOneEffectDuration(S):void(L&&p._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",S))},p._setOneEffectPosition=function(S,L,ee){var re=p.audioMixing.sounds[S.soundId];if(re.state===p.audioMixing.states.BUSY){if(!p._stopAudioMixingBufferSource(S))return void p._handleAudioMixingNoSourceError("_setOneEffectPosition",S,ee);var se=p._startAudioMixingBufferSource({soundId:S.soundId,filePath:re.options.filePath,loop:re.options.loop,cycle:re.options.cycle,playTime:L});if(!se){var B="CREATE_BUFFERSOURCE_FAILED";return ee&&ee(B),void _.default.error("[".concat(p.streamId,"] "),B)}re.source=se,re.startAt=Date.now(),re.startOffset=L,re.resumeAt=null,re.resumeOffset=null,re.pauseOffset=null,re.pauseAt=null}else{if(re.state!==p.audioMixing.states.PAUSED)return void p._handleAudioMixingInvalidStateError("_setOneEffectPosition",S,ee);re.pauseOffset=L}ee&&ee(null)},p.startAudioMixing=function(S,L){var ee=v.report.reportApiInvoke(p.sid,{callback:function(le){if(le)return L&&L(le);p.dispatchEvent({type:"audioMixingPlayed"}),L&&L(null)},getStates:p._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:S});Object(G.checkValidObject)(S,"options");var re=S.filePath,fe=S.cacheResource,se=S.cycle,B=S.loop,H=S.playTime,K=S.replace;Object(G.checkValidString)(re,"filePath",1,Object(m.getParameter)("FILEPATH_LENMAX"),!1),Object(G.checkValidNumber)(H,"playTime",0,1e8),!Object(G.isEmpty)(se)&&Object(G.checkValidNumber)(se,"cycle"),!Object(G.isEmpty)(B)&&Object(G.checkValidBoolean)(B,"loop"),!Object(G.isEmpty)(K)&&Object(G.checkValidBoolean)(K,"replace"),!Object(G.isEmpty)(fe)&&Object(G.checkValidBoolean)(fe,"cacheResource");var ve=w()({soundId:-1},S);p._playOneEffect(ve,ee)},p.stopAudioMixing=function(S){var L=v.report.reportApiInvoke(p.sid,{callback:S,getStates:p._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});p._stopOneEffect({soundId:-1},L)},p.pauseAudioMixing=function(S){var L=v.report.reportApiInvoke(p.sid,{callback:S,getStates:p._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return p._pauseOneEffect({soundId:-1},L)},p.resumeAudioMixing=function(S){var L=v.report.reportApiInvoke(p.sid,{callback:function(ee,re){if(ee)return S&&S(ee);p.dispatchEvent({type:"audioMixingPlayed"}),S&&S(null)},getStates:p._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});p._resumeOneEffect({soundId:-1},L)},p.adjustAudioMixingVolume=function(S){var L=v.report.reportApiInvoke(p.sid,{getStates:p._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(G.checkValidNumber)(S,"volume",0,100),p.audioMixing.sounds[-1].volume=S,p._flushAudioMixingMuteStatus(),L()},p.getAudioMixingDuration=function(){var S=v.report.reportApiInvoke(p.sid,{getStates:p._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),L=p._getOneEffectDuration({soundId:-1});return S(null,L),L},p.getAudioMixingCurrentPosition=function(){var S=v.report.reportApiInvoke(p.sid,{getStates:p._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),L=p._getOneEffectCurrentPosition({soundId:-1},!0);return S(null,L),L},p.setAudioMixingPosition=function(S,L){var ee=v.report.reportApiInvoke(p.sid,{callback:L,options:arguments,tag:"tracer",getStates:p._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(G.checkValidNumber)(S,"position",0,1e8),p._setOneEffectPosition({soundId:-1},S,ee)},p.playEffect=function(S,L){var ee=v.report.reportApiInvoke(p.sid,{callback:function(B){if(B)return L&&L(B);p.dispatchEvent({type:"effectPlayed"}),L&&L(null)},name:"Stream.playEffect",options:S});Object(G.checkValidObject)(S,"options");var re=S.soundId,fe=S.filePath,se=S.cycle;Object(G.checkValidNumber)(re,"soundId",1,1e4),Object(G.checkValidString)(fe,"filePath",0,Object(m.getParameter)("FILEPATH_LENMAX"),!1),!Object(G.isEmpty)(se)&&Object(G.checkValidNumber)(se,"cycle"),p._playOneEffect(S,ee)},p.stopEffect=function(S,L){var ee=v.report.reportApiInvoke(p.sid,{callback:L,getStates:p._getOneEffectStates({soundId:S}),name:"Stream.stopEffect"});Object(G.checkValidNumber)(S,"soundId",1,1e4),p._stopOneEffect({soundId:S},ee)},p.stopAllEffects=function(S){var L=v.report.reportApiInvoke(p.sid,{callback:S,name:"Stream.stopAllEffect"}),ee=!1,re=0,fe=0,se=function(K){ee||(K?(L(K),ee=!0):re+=1,re===fe&&(L(null),ee=!0))};for(var B in p.audioMixing.sounds){var H=p.audioMixing.sounds[B];-1!==H.soundId&&(H.state!==p.audioMixing.states.BUSY&&H.state!==p.audioMixing.states.PAUSED||(fe++,p._stopOneEffect({soundId:B},se)))}fe||L(null)},p.preloadEffect=function(S,L,ee){var re=v.report.reportApiInvoke(p.sid,{callback:ee,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(G.checkValidNumber)(S,"soundId",1,1e4),Object(G.checkValidString)(L,"filePath",1,Object(m.getParameter)("FILEPATH_LENMAX"),!1),p._initSoundIfNotExists(S,L),p.audioMixing.buffer[L]?re(null):p.loadAudioBuffer(L,L,re)},p.unloadEffect=function(S,L){var ee=v.report.reportApiInvoke(p.sid,{callback:L,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(G.checkValidNumber)(S,"soundId",1,1e4);var re=p.audioMixing.sounds[S];if(!re){var fe="SOUND_NOT_EXISTS";return _.default.error(fe,S),void ee(fe)}var se=re.options?re.options.filePath:re.filePath;if(se)delete p.audioMixing.buffer[se],delete p.audioMixing.sounds[S],ee(null);else{var B="SOUND_BUFFER_NOT_FOUND";_.default.error(B,S),ee(B)}},p.pauseEffect=function(S,L){var ee=v.report.reportApiInvoke(p.sid,{callback:L,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return p._pauseOneEffect({soundId:S},ee)},p.pauseAllEffects=function(S){var L=v.report.reportApiInvoke(p.sid,{callback:S,name:"Stream.pauseAllEffects"}),ee=!1,re=0,fe=0,se=function(H){ee||(H?(L(H),ee=!0):re+=1,re===fe&&(L(null),ee=!0))};for(var B in p.audioMixing.sounds)"-1"!==B&&p.audioMixing.sounds[B].state===p.audioMixing.states.BUSY&&(fe++,p._pauseOneEffect({soundId:B},se));fe||L(null)},p.resumeEffect=function(S,L){Object(G.checkValidNumber)(S,"soundId",1,1e4);var ee=v.report.reportApiInvoke(p.sid,{callback:L,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return p._resumeOneEffect({soundId:S},ee)},p.resumeAllEffects=function(S){var L=v.report.reportApiInvoke(p.sid,{callback:S,name:"Stream.resumeAllEffects"}),ee=!1,re=0,fe=0,se=function(H){ee||(H?(L(H),ee=!0):re+=1,re===fe&&(L(null),ee=!0))};for(var B in p.audioMixing.sounds)"-1"!==B&&p.audioMixing.sounds[B].state===p.audioMixing.states.PAUSED&&(fe++,p._resumeOneEffect({soundId:B},se));fe||L(null)},p.getEffectsVolume=function(){var S=[];for(var L in p.audioMixing.sounds){var ee=p.audioMixing.sounds[L];ee&&"-1"!==L&&S.push({soundId:parseInt(L),volume:ee.volume})}return S},p.setEffectsVolume=function(S,L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:L});for(var re in Object(G.checkValidNumber)(S,"volume",0,100),p.audioMixing.defaultVolume=S,p.audioMixing.sounds){var fe=p.audioMixing.sounds[re];"-1"!==re&&(fe.volume=S)}p._flushAudioMixingMuteStatus(),ee(null)},p.setVolumeOfEffect=function(S,L,ee){var re=v.report.reportApiInvoke(p.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:ee});Object(G.checkValidNumber)(S,"soundId",0,1e4),Object(G.checkValidNumber)(L,"volume",0,100),p._initSoundIfNotExists(S);var fe=p.audioMixing.sounds[S];fe.volume=L,p._flushAudioMixingMuteStatus(),re(null)},Y.a.addVideoEffectCapability(l),function(p,S){p.videoConstraint={},S.cameraId&&(p.videoConstraint.deviceId={exact:S.cameraId}),S.facingMode&&(p.videoConstraint.facingMode=S.facingMode),p.videoSize&&(p.videoConstraint.width=p.videoSize[0],p.videoConstraint.height=p.videoSize[1]),Object(O.isLegacyChrome)()||(p.videoConstraint.frameRate=30),p.audioConstraint={},S.microphoneId&&(p.audioConstraint.deviceId={exact:S.microphoneId}),Object(O.isLegacyChrome)()||p.audioProcessing&&(void 0!==p.audioProcessing.AGC&&(Object(O.isFireFox)()?p.audioConstraint.autoGainControl=p.audioProcessing.AGC:Object(O.isChrome)()&&(p.audioConstraint.googAutoGainControl=p.audioProcessing.AGC,p.audioConstraint.googAutoGainControl2=p.audioProcessing.AGC)),void 0!==p.audioProcessing.AEC&&(p.audioConstraint.echoCancellation=p.audioProcessing.AEC),void 0!==p.audioProcessing.ANS&&(Object(O.isFireFox)()?p.audioConstraint.noiseSuppression=p.audioProcessing.ANS:Object(O.isChrome)()&&(p.audioConstraint.googNoiseSuppression=p.audioProcessing.ANS))),p.screenConstraint={},S.sourceId&&(p.screenConstraint.sourceId=S.sourceId),S.extensionId&&Object(O.isChrome)()?(p.screenConstraint.extensionId=S.extensionId,p.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:p.screenAttributes.width,maxHeight:p.screenAttributes.height,maxFrameRate:p.screenAttributes.maxFr,minFrameRate:p.screenAttributes.minFr}):(p.screenConstraint.mediaSource="screen",p.screenConstraint.width=p.screenAttributes.width,p.screenConstraint.height=p.screenAttributes.height,p.screenConstraint.frameRate={ideal:p.screenAttributes.maxFr,max:p.screenAttributes.maxFr}),S.mediaSource&&(p.screenConstraint.mediaSource=S.mediaSource),p.setVideoResolution=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(L instanceof Array)){var re=te(L+="");return re&&re.video?(p.videoConstraint=w()(p.videoConstraint,{width:{ideal:re.video.width},height:{ideal:re.video.height}}),S.attributes.resolution=re.attributes.resolution,(fe=p.stream&&p.stream.getVideoTracks&&p.stream.getVideoTracks()[0])&&fe.applyConstraints?(_.default.debug("setVideoResolution applyConstraints",p.videoConstraint),fe.applyConstraints(p.videoConstraint).then(ee).catch(ee)):ee(),!0):(ee("NO_PROFILE_".concat(L)),!1)}var fe,se=L[0],B=L[1];p.videoConstraint=w()(p.videoConstraint,{width:{ideal:se},height:{ideal:B}}),S.attributes.resolution="".concat(se,"x").concat(B),(fe=p.stream&&p.stream.getVideoTracks&&p.stream.getVideoTracks()[0])&&fe.applyConstraints?(_.default.debug("setVideoResolution applyConstraints",p.videoConstraint),Y.a.disableVideoEffect(p).then(function(){return fe.applyConstraints(p.videoConstraint).then(ee).catch(ee)}).then(function(){return Y.a.restoreVideoEffect(p)})):ee()},p.setVideoFrameRate=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(O.isFireFox)())return ee("FIREFOX_NOT_SUPPORTED"),!1;if("object"===Q()(L)&&L instanceof Array&&L.length>1){p.videoConstraint=w()(p.videoConstraint,{frameRate:L[0]}),p.attributes.minFrameRate=L[0],p.attributes.maxFrameRate=L[1];var re=p.stream&&p.stream.getVideoTracks&&p.stream.getVideoTracks()[0];return re&&re.applyConstraints?(_.default.debug("setVideoFrameRate applyConstraints",p.videoConstraint),re.applyConstraints(p.videoConstraint).then(ee).catch(ee)):ee(),!0}return ee("INVALID_PARAM_".concat(JSON.stringify(L))),!1},p.setVideoBitRate=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===Q()(L)&&L instanceof Array&&L.length>1?(S.attributes.minVideoBW=L[0],S.attributes.maxVideoBW=L[1],p.connectionSpec&&(p.connectionSpec.minVideoBW=L[0],p.connectionSpec.maxVideoBW=L[1]),p.pc&&p.pc.renegotiate&&p.pc.renegotiate(),ee(),!0):(ee("INVALID_PARAM_".concat(JSON.stringify(L))),!1)},p.setScreenBitRate=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===Q()(L)&&L instanceof Array&&L.length>1?(p.screenAttributes.minVideoBW=L[0],p.screenAttributes.maxVideoBW=L[1],ee(),!0):(ee("INVALID_PARAM_".concat(JSON.stringify(L))),!1)},p.setScreenProfile=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(G.checkValidEnum)(L,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var re=te(L);return re&&re.screen?(p.screenConstraint.mandatory?(p.screenConstraint.mandatory.maxWidth=re.screen.width,p.screenConstraint.mandatory.maxHeight=re.screen.height,re.screen.frameRate&&re.screen.frameRate.min&&re.screen.frameRate.max&&(p.screenConstraint.mandatory.minFrameRate=re.screen.frameRate.min,p.screenConstraint.mandatory.maxFrameRate=re.screen.frameRate.max)):p.screenConstraint=w()(p.screenConstraint,re.screen),p.screenAttributes.width=re.screen.width,p.screenAttributes.height=re.screen.height,p.screenAttributes.minFr=re.screen.frameRate.min,p.screenAttributes.maxFr=re.screen.frameRate.max,ee(),!0):(ee("NO_SCREEN_PROFILE_".concat(JSON.stringify(L))),!1)},p.setVideoProfileCustom=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});p.setVideoResolution(L[0]),p.setVideoFrameRate([L[1],L[1]]),p.setVideoBitRate([L[2],L[2]]),ee()},p.setVideoProfileCustomPlus=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});p.setVideoResolution([L.width,L.height]),S.attributes.resolution="".concat(L.width,"x").concat(L.height),p.setVideoFrameRate([L.framerate,L.framerate]),p.setVideoBitRate([L.bitrate,L.bitrate]),ee()},p.setVideoProfile=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),re=te(L);if(!re){var fe="Invalid Profile ".concat(L);throw new Error(fe)}if(p.profile=L,re&&re.video){p.profile=re.profileName,p.videoConstraint=w()(p.videoConstraint,re.video),p.connectionSpec&&re.attributes.maxVideoBW&&(p.connectionSpec.minVideoBW=re.attributes.minVideoBW,p.connectionSpec.maxVideoBW=re.attributes.maxVideoBW),Object(O.isEdge)()&&(p.videoConstraint.frameRate.max=60),Object(O.isFireFox)()&&(p.videoConstraint.frameRate=30),S.attributes=w()(S.attributes,re.attributes),p.pc&&p.pc.renegotiate&&p.pc.renegotiate();var se=p.stream&&p.stream.getVideoTracks&&p.stream.getVideoTracks()[0];return se&&se.applyConstraints?(_.default.debug("setVideoProfile applyConstraints",p.videoConstraint),Y.a.disableVideoEffect(p).then(function(){return se.applyConstraints(p.videoConstraint)}).then(function(){return Y.a.restoreVideoEffect(p)}).then(function(B){return new Promise(function(H,K){ee(B),setTimeout(function(){Object(E.vsResHack)(p.stream,function(ve,le){p.videoWidth=ve,p.videoHeight=le,H()},function(ve){_.default.warning("[".concat(p.streamId,"] vsResHack failed: "),ve),K()})},2500)})}).catch(ee)):ee(),!0}return ee("INVALID_VIDEO_PROFILE_".concat(L)),!1},p.setAudioProfile=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(G.checkValidEnum)(L,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),p.audioProfile=L;var re=b(L);return p.highQuality=re.highQuality,p.stereo=re.stereo,p.speech=re.speech,p.lowQuality=re.lowQuality,p.stereo&&Object(O.isChrome)()&&(p.audioConstraint.googAutoGainControl=!1,p.audioConstraint.googAutoGainControl2=!1,p.audioConstraint.echoCancellation=!1,p.audioConstraint.googNoiseSuppression=!1),ee(),!0},p.setVideoEncoderConfiguration=function(L){Object(G.checkValidObject)(L,"config");var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.setVideoEncoderConfiguration",options:L,tag:"tracer"});L.resolution&&(Object(G.checkValidNumber)(L.resolution.width,"config.resolution.width"),Object(G.checkValidNumber)(L.resolution.height,"config.resolution.height"),p.setVideoResolution([L.resolution.width,L.resolution.height])),L.frameRate&&(Object(G.checkValidNumber)(L.frameRate.min,"config.frameRate.min"),Object(G.checkValidNumber)(L.frameRate.max,"config.frameRate.max"),p.setVideoFrameRate([L.frameRate.min,L.frameRate.max])),L.bitrate&&(Object(G.checkValidNumber)(L.bitrate.min,"config.bitrate.min",1,1e7),Object(G.checkValidNumber)(L.bitrate.max,"config.bitrate.max",1,1e7),p.setVideoBitRate([L.bitrate.min,L.bitrate.max])),ee()},p.getSupportedProfile=function(L){var ee=v.report.reportApiInvoke(p.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:L});if(!p.local){var re="ONLY_LOCAL_STREAM_SUPPORTED";return _.default.error(re),ee(re)}if(!p.stream)return _.default.error(re="STREAM_NOT_INIT"),ee(re);if(!p.stream.getVideoTracks)return _.default.error(re="TRACK_NOT_SUPPORT"),ee(re);var fe=p.stream.getVideoTracks()[0];if(!fe)return _.default.error(re="NO_VIDEO_TRACK_FOUND"),ee(re);if(!fe.getCapabilities)return _.default.error(re="GETCAPABILITY_NOT_SUPPORT"),ee(re);var se=fe.getCapabilities(),B=z(se);return ee(null,B)}}(l,C),l.getId=function(){return l.streamId},l.getUserId=function(){return l.userId},l.checkDualStreamEnabled=function(){return!(!Object(m.getParameter)("DUALSTREAM_OPERATION_CHECK")||!l.isDualStream)&&(_.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},l.setUserId=function(p){var S=v.report.reportApiInvoke(l.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});l.userId&&_.default.warning("[".concat(l.streamId,"] Stream.userId ").concat(l.userId," => ").concat(p)),l.userId=p,S()},l.getAttributes=function(){return C.screen?l.screenAttributes:C.attributes},l.hasAudio=function(){return!!l.audio},l.hasVideo=function(){return!!l.video},l.hasScreen=function(){return!!l.screen},l.hasScreenAudio=function(){return!!l.screenAudio},l.isVideoOn=function(){return(l.hasVideo()||l.hasScreen())&&!l.userMuteVideo},l.isAudioOn=function(){return l.hasAudio()&&!l.userMuteAudio},l.init=function(p,S){var L=v.report.reportApiInvoke(l.sid,{callback:function(se,B){if(se)return S&&S(se);p&&p(B)},name:"Stream.init",options:arguments,tag:"tracer"}),ee=((new Date).getTime(),arguments[2]);if(void 0===ee&&(ee=2),!0===l.initialized)return L({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==l.local)return L({type:"warning",msg:"STREAM_NOT_LOCAL"});var re=Math.random().toString().slice(3);l._streamInitID=re,l.videoSource?l.videoName="videoSource":l.video&&(l.videoName=P.a.searchDeviceNameById(C.cameraId)||"default"),l.audioSource?l.audioName="audioSource":l.audio&&(l.audioName=P.a.searchDeviceNameById(C.microphoneId)||"default"),l.screen&&(l.screenName=C.extensionId||"default");try{if(C.audio||C.video||C.screen||C.screenAudio||C.videoSource||C.audioSource){_.default.debug("[".concat(l.streamId,"] Requested access to local media"));var fe={streamId:l.streamId};C.videoSource?fe.videoSource=C.videoSource:C.screen?fe.screen=l.screenConstraint:C.video&&(fe.video=l.videoConstraint),C.audioSource?fe.audioSource=C.audioSource:C.screenAudio?fe.screenAudio=C.screenAudio:C.audio&&(fe.audio=l.audioConstraint),Object(I.b)(fe,function(se){if(fe.screenAudio&&!se.getAudioTracks()[0]&&_.default.warning("[".concat(l.streamId,"] Audio sharing is not selected")),fe.screen&&_.default.debug("[".concat(l.streamId,"] User has granted access to screen sharing")),(fe.video||fe.audio)&&_.default.debug("[".concat(l.streamId,"] User has granted access to local media")),null===l._streamInitID){se.getTracks().forEach(function(H){H.stop()});var B={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return _.default.error(l.streamId,B.info),void L(B)}if(l._streamInitID!==re)return se.getTracks().forEach(function(H){H.stop()}),_.default.error(l.streamId,(B={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"}).info),void L(B);l.dispatchEvent({type:"accessAllowed"}),l.stream=se,l.initialized=!0,l.reloadDeviceName(),l.hasVideo()&&Object(E.vsResHack)(se,function(H,K){l.videoWidth=H,l.videoHeight=K},function(H){_.default.warning("[".concat(l.streamId,"] vsResHack failed: "),H)}),C.screen&&l.stream&&l.stream.getVideoTracks()[0]&&(l.stream.getVideoTracks()[0].onended=function(){l.dispatchEvent({type:"stopScreenSharing"})}),l.stream&&l.stream.getTracks&&l.stream.getTracks().forEach(function(H){H&&!H.onended&&(H.onended=$),"video"===H.kind&&C.optimizationMode&&(H.contentHint=C.optimizationMode,H.contentHint===C.optimizationMode&&_.default.debug("[".concat(l.streamId,"] set content hint to"),C.optimizationMode))}),L()},function(se){var B={type:"error",info:null};switch(se&&(B.msg=se.name||se.code||se,se.message&&(B.info=se.message),se.code&&(B.info?B.info+=". "+se.code:B.info=" "+se.code),se.constraint&&(B.info?B.info+=". Constraint: "+se.constraint:B.info="constraint: "+se.constraint)),B.msg){case"Starting video failed":case"TrackStartError":if(l.videoConstraint&&(delete l.videoConstraint.width,delete l.videoConstraint.height),ee>0)return void setTimeout(function(){l.init(function(K){return L(K)},L,ee-1)},1);B.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":B.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":B.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":B.msg="PERMISSION_DENIED",l.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":l.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":B.msg="CONSTRAINT_NOT_SATISFIED";break;default:B.msg||(B.msg="UNDEFINED")}var H="Media access ".concat(B.msg).concat(B.info?": "+B.info:"");_.default.error("[".concat(l.streamId,"] "),H),L(B)})}else L({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(se){_.default.error("[".concat(l.streamId,"] Stream init: "),se),L({type:"error",msg:se.message||se})}},l.reloadDeviceName=function(){if(l.stream){if(l.stream.getVideoTracks){var p=l.stream.getVideoTracks()[0];p&&p.label&&(l.videoName=p.label)}if(l.stream.getAudioTracks){var S=l.stream.getAudioTracks()[0];S&&S.label&&(l.audioName=S.label)}}},l.close=function(){var p=v.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(_.default.debug("[".concat(l.streamId,"] Close stream with id"),l.streamId),l._originStream)try{l._originStream.getTracks().map(function(re){return re.stop()})}catch(re){}if(void 0!==l.stream){var S=l.stream.getTracks();for(var L in S)S.hasOwnProperty(L)&&(S[L].stop(),S[L].onended=null);!l.isLowStream&&l.local?Y.a.disableVideoEffect(l).then(function(){l.stream=void 0}):(l.stream&&l.stream.clean&&l.stream.clean(),l.stream=void 0)}if(l._originStream){for(var L in console.log("clear _originStream"),S=l._originStream.getTracks())S.hasOwnProperty(L)&&(S[L].stop(),S[L].onended=null,console.log("clear onended"));!l.isLowStream&&l.local?Y.a.disableVideoEffect(l).then(function(){l._originStream=void 0}):(l._originStream&&l._originStream.clean&&l._originStream.clean(),l._originStream=void 0)}if(Object(O.isSafari)()&&l.pc&&l.pc.peerConnection&&l.pc.peerConnection.removeTrack&&l.pc.peerConnection.getSenders){var ee=l.pc.peerConnection.getSenders();ee.forEach(function(re){re&&(_.default.debug("[".concat(l.streamId,"] Remove Track"),re),l.pc.peerConnection.removeTrack(re))})}l.local&&(l.initialized=!1),l._streamInitID=null,l._onAudioMute=void 0,l._onAudioUnmute=void 0,l._onVideoMute=void 0,l._onVideoUnmute=void 0,l.lowStream&&l.lowStream.close(),l.player&&l.player.video&&l.player.video.srcObject&&(l.player.video.srcObject=null),l.player&&l.player.audio&&l.player.audio.srcObject&&(l.player.audio.srcObject=null),p()},l.enableAudio=function(){var p,S=v.report.reportApiInvoke(l.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return _.default.deprecate("[".concat(l.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),l.userMuteAudio||_.default.warning("[".concat(l.streamId,"] User already enableAudio")),l.userMuteAudio=!1,S(null,p=!l.peerMuteAudio&&l._unmuteAudio()),p},l.disableAudio=function(){var p=v.report.reportApiInvoke(l.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});_.default.deprecate("[".concat(l.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),l.userMuteAudio&&_.default.warning("[".concat(l.streamId,"] User already disableAudio")),l.userMuteAudio=!0;var S=l._muteAudio();return p(null,S),S},l.enableVideo=function(){var p,S=v.report.reportApiInvoke(l.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return _.default.deprecate("[".concat(l.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),l.userMuteVideo||_.default.warning("[".concat(l.streamId,"] User already enableVideo")),l.userMuteVideo=!1,l.lowStream&&(l.lowStream.userMuteVideo=!1),S(null,p=!l.peerMuteVideo&&l._unmuteVideo()),p},l.disableVideo=function(){var p=v.report.reportApiInvoke(l.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});_.default.deprecate("[".concat(l.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),l.userMuteVideo&&_.default.warning("[".concat(l.streamId,"] User already disableVideo")),l.userMuteVideo=!0,l.lowStream&&(l.lowStream.userMuteVideo=!0);var S=l._muteVideo();return p(null,S),S},l.unmuteAudio=function(){var p,S=v.report.reportApiInvoke(l.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return l.userMuteAudio||_.default.warning("[".concat(l.streamId,"] User already unmuteAudio")),l.userMuteAudio=!1,S(null,p=!l.peerMuteAudio&&l._unmuteAudio()),p},l.muteAudio=function(){var p=v.report.reportApiInvoke(l.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});l.userMuteAudio&&_.default.warning("[".concat(l.streamId,"] User already muteAudio")),l.userMuteAudio=!0;var S=l._muteAudio();return p(null,S),S},l.unmuteVideo=function(){var p,S=v.report.reportApiInvoke(l.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return l.userMuteVideo||_.default.warning("[".concat(l.streamId,"] User already unmuteVideo")),l.userMuteVideo=!1,l.lowStream&&(l.lowStream.userMuteVideo=!1),S(null,p=!l.peerMuteVideo&&l._unmuteVideo()),p},l.muteVideo=function(){var p=v.report.reportApiInvoke(l.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});l.userMuteVideo&&_.default.warning("[".concat(l.streamId,"] User already muteVideo")),l.userMuteVideo=!0,l.lowStream&&(l.lowStream.userMuteVideo=!0);var S=l._muteVideo();return p(null,S),S},l._unmuteAudio=function(){return _.default.debug("[".concat(l.streamId,"] Unmuted audio stream with id "),l.streamId),l._flushAudioMixingMuteStatus(!1),!(!l.hasAudio()||!l.initialized||void 0===l.stream||!0===l.stream.getAudioTracks()[0].enabled||(l._onAudioUnmute&&l._onAudioUnmute(),l.pc&&(l.pc.isAudioMute=!1),l.stream.getAudioTracks()[0].enabled=!0,0))},l._isAudioMuted=function(){if(l.stream&&l.hasAudio()){var p=l.stream.getAudioTracks();return p.length>0&&!p[0].enabled}return!1},l._isVideoMuted=function(){if(l.stream&&l.hasVideo()){var p=l.stream.getVideoTracks();return p.length>0&&!p[0].enabled}return!1},l._muteAudio=function(){return _.default.debug("[".concat(l.streamId,"] Muted audio stream with id "),l.streamId),l._flushAudioMixingMuteStatus(!0),!!(l.hasAudio()&&l.initialized&&void 0!==l.stream&&l.stream.getAudioTracks()[0].enabled)&&(l._onAudioMute&&l._onAudioMute(),l.pc&&(l.pc.isAudioMute=!0),l.stream.getAudioTracks()[0].enabled=!1,l.sid&&v.report.audioSendingStopped(l.sid,{succ:!0,reason:"muteAudio"}),!0)},l._unmuteVideo=function(){return _.default.debug("[".concat(l.streamId,"] Unmuted video stream with id"),l.streamId),!(!l.initialized||void 0===l.stream||!l.stream.getVideoTracks().length||!0===l.stream.getVideoTracks()[0].enabled||(l._onVideoUnmute&&l._onVideoUnmute(),l.pc&&(l.pc.isVideoMute=!1),l.stream.getVideoTracks()[0].enabled=!0,l.lowStream&&l.lowStream._unmuteVideo(),0))},l._muteVideo=function(){return _.default.debug("[".concat(l.streamId,"] Muted video stream with id"),l.streamId),!!(l.initialized&&void 0!==l.stream&&l.stream.getVideoTracks().length&&l.stream.getVideoTracks()[0].enabled)&&(l._onVideoMute&&l._onVideoMute(),l.pc&&(l.pc.isVideoMute=!0),l.stream.getVideoTracks()[0].enabled=!1,l.lowStream&&l.lowStream._muteVideo(),l.sid&&v.report.videoSendingStopped(l.sid,{succ:!0,reason:"muteVideo"}),!0)},l.addTrack=function(p){if(l.audio&&"audio"===p.kind)_.default.warning("already added audio track");else if(l.video&&"video"===p.kind)_.default.warning("already added video track");else{var S=v.report.reportApiInvoke(l.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(l.pc&&l.pc.addTrack(p,l.stream),"audio"==p.kind){l._cleanupAudioMixing();var L=new MediaStream;l.userMuteAudio&&(p.enabled=!1),L.addTrack(p);var ee=l.stream.getVideoTracks()[0];ee&&L.addTrack(ee),l.audio=!0,C.audio=!0,l.stream=L,l.audioLevelHelper=null,l.player&&l.player.video&&(l.player.video.srcObject=l.stream)}else l.userMuteVideo&&(p.enabled=!1),l.stream.addTrack(p),l.video=!0,C.video=!0;p.onended||(p.onended=$),S()}},l.removeTrack=function(p){if(p)if(l.audio||"audio"!==p.kind)if(l.video||"video"!==p.kind){var S=v.report.reportApiInvoke(l.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});l.pc&&l.pc.removeTrack(p,l.stream),l.stream.removeTrack(p),l._cleanupAudioMixing(),"audio"===p.kind?(l.audio=!1,C.audio=!1):(l.video=!1,C.video=!1),l.audioLevelHelper=null,"live"==p.readyState&&(p.stop(),_.default.debug("[".concat(l.streamId,"] Track ").concat(p.kind," Stopped"))),S()}else _.default.warning("already removed video track");else _.default.warning("already removed audio track");else _.default.warning("track doesn't exist.")},l.setAudioOutput=function(p,S,L){var ee=v.report.reportApiInvoke(l.sid,{callback:function(re,fe){if(re)return L&&L(re);S&&S(fe)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(G.isValidString)(p,1,255)?(l.audioOutput=p,l.player?void l.player.setAudioOutput(p,function(){return ee()},ee):ee()):(_.default.error("[".concat(l.streamId,"] setAudioOutput Invalid Parameter"),p),ee(f.default.INVALID_PARAMETER))},l.play=function(p,S,L){"function"==typeof S&&(L=S,S=null),_.default.debug("[".concat(l.streamId,"] play()."),p,S);var ee=v.report.reportApiInvoke(l.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:L});if(Object(G.checkValidString)(p,"elementID"),Object(G.isEmpty)(S)||(Object(G.isEmpty)(S.fit)||Object(G.checkValidEnum)(S.fit,"fit",["cover","contain"]),Object(G.isEmpty)(S.muted)||Object(G.checkValidBoolean)(S.muted,"muted")),l.player)_.default.warning("[".concat(l.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),l.resume().then(function(){ee(null)}).catch(ee);else{l.elementID=p,l.playOptions=S,!l.local||l.video||l.screen?(l.player=new U({id:l.getId(),stream:l,elementID:p,options:S}),l.local&&Y.a.applyEffectInPlayer(l)):l.hasAudio()&&(l.player=new U({id:l.getId(),stream:l,elementID:p,options:S}));var re={video:null,audio:null},fe=function se(B){if(re[B.mediaType]=B,re.video&&re.audio)if(l.removeEventListener("player-status-change",se),re.video.isErrorState||re.audio.isErrorState){var H=re.video.isErrorState?re.video:re.audio;ee({isErrorState:!0,status:H.status,reason:H.reason,video:re.video,audio:re.audio})}else ee("aborted"===re.video.status&&"aborted"===re.audio.status?{status:"aborted",reason:"stop",video:re.video,audio:re.audio}:null)};l.on("player-status-change",fe),l.audioOutput&&l.player.setAudioOutput(l.audioOutput),void 0!==l.audioLevel&&l.player.setAudioVolume(l.audioLevel),l._flushAudioMixingMuteStatus(!1)}},l.stop=function(){var p=v.report.reportApiInvoke(l.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});_.default.debug("[".concat(l.streamId,"] Stop stream player with id "),l.streamId),l.player?(Y.a.removeEffectFromLocalPlayer(l),l.player.destroy(),delete l.player):_.default.error("[".concat(l.streamId,"] Stream.stop(): Stream is not playing")),l._flushAudioMixingMuteStatus(!0),p()},l.isPlaying=function(){return!!l.player},l.isPaused=function(){return!(!l.player||!(l.player.video&&l.player.video.paused&&l.player.mediaElemExists(l.player.video)||l.player.audio&&l.player.audio.paused&&l.player.mediaElemExists(l.player.audio)))},l.resume=function(){var p,S;return l.player?(l.player.video&&l.player.video.play&&(p=l.player.video.play()),p=p||Promise.resolve(),l.player.audio&&l.player.audio.play&&(S=l.player.audio.play()),S=S||Promise.resolve(),Promise.all([p,S])):Promise.reject("NO_PLAYER_FOUND")},l.getVideoTrack=function(){var p=v.report.reportApiInvoke(l.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(l.stream&&l.stream.getVideoTracks){var S=l.stream.getVideoTracks()[0];if(S)return _.default.info("[".concat(l.streamId,"] getVideoTrack"),S),p(),S}_.default.info("[".concat(l.streamId,"] getVideoTrack None")),p(null,"getVideoTrack None")},l.getAudioTrack=function(){var p=v.report.reportApiInvoke(l.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(l.stream&&l.stream.getAudioTracks){var S=l.stream.getAudioTracks()[0];if(S)return _.default.info("[".concat(l.streamId,"] getAudioTracks"),S),p(),S}_.default.info("[".concat(l.streamId,"] getAudioTracks None")),p(null,"getAudioTracks None")},l._hasVideoTracks=function(){return!!(l.stream&&l.stream.getVideoTracks&&l.stream.getVideoTracks()[0])},l._hasAudioTracks=function(){return!!(l.stream&&l.stream.getAudioTracks&&l.stream.getAudioTracks()[0])},l._replaceMediaStreamTrack=function(p,S,L){if(l.stream){if("video"==p.kind){if(re=l.stream.getVideoTracks()[0])return l.userMuteVideo&&(p.enabled=!1),l.stream.removeTrack(re),l.stream.addTrack(p),_.default.debug("[".concat(l.streamId,"] _replaceMediaStreamTrack ").concat(p.kind," SUCCESS")),"live"==re.readyState&&(re.stop(),_.default.debug("[".concat(l.streamId,"] Track ").concat(re.kind," Stopped"))),S&&S();var ee="MEDIASTREAM_TRACK_NOT_FOUND";return _.default.error("[".concat(l.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(p.kind)),L(ee)}if("audio"==p.kind){var re;if(re=l.stream.getAudioTracks()[0]){l.userMuteAudio&&(p.enabled=!1);var fe=new MediaStream;fe.addTrack(p);var se=l.stream&&l.stream.getVideoTracks()[0];return se&&fe.addTrack(se),l.stream=fe,l.audioLevelHelper=null,l.player&&l.player.video&&(l.player.video.srcObject=l.stream),_.default.debug("[".concat(l.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==re.readyState&&(re.stop(),_.default.debug("[".concat(l.streamId,"] Track ").concat(re.kind," Stopped"))),S&&S()}return ee="MEDIASTREAM_TRACK_NOT_FOUND",_.default.error("[".concat(l.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(p.kind)),L(ee)}return ee="INVALID_TRACK_TYPE",_.default.error("[".concat(l.streamId,"] _replaceMediaStreamTrack ").concat(ee," ").concat(p.kind)),L&&L(ee)}return ee="NO_STREAM_FOUND",_.default.error("[".concat(l.streamId,"] _replaceMediaStreamTrack ").concat(ee)),L&&L(ee)},l.replaceTrack=function(p,S,L){var ee=v.report.reportApiInvoke(l.sid,{callback:function(re,fe){if(re)return L&&L(re);S&&S(fe)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return p&&p.kind?(l._cleanupAudioMixing(),p.onended||(p.onended=$),l.pc&&l.pc.hasSender&&l.pc.hasSender(p.kind)?void l.pc.replaceTrack(p,function(){return _.default.debug("[".concat(l.streamId,"] PeerConnection.replaceTrack ").concat(p.kind," SUCCESS")),l._replaceMediaStreamTrack(p,function(re){return ee(null,re)},ee)},function(re){return _.default.error("[".concat(l.streamId,"] PeerConnection.replaceTrack ").concat(p.kind," Failed ").concat(re)),ee(re)}):l._replaceMediaStreamTrack(p,function(re){return ee(null,re)},ee)):ee("INVALID_TRACK")},l.setAudioVolume=function(p){var S=v.report.reportApiInvoke(l.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(G.checkValidNumber)(p,"level",0,100),l.audioLevel=p,l.player&&l.player.setAudioVolume(p),S()},l.getStats=function(p,S,L){var ee=[];ee.push(l._getPCStats(L)),ee.push(new Promise(function(re){var fe={};l.pc&&l.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(j.b)(fe,"videoReceiveResolutionHeight",l.videoHeight),Object(j.b)(fe,"videoReceiveResolutionWidth",l.videoWidth)):l.pc&&!l.pc.isSubscriber&&((Object(O.isSafari)()||Object(O.isFireFox)())&&(Object(j.b)(fe,"videoSendResolutionHeight",l.videoHeight),Object(j.b)(fe,"videoSendResolutionWidth",l.videoWidth)),(Object(O.isSafari)()||Object(O.isFireFox)())&&l.uplinkStats&&Object(j.b)(fe,"videoSendPacketsLost",l.uplinkStats.uplink_cumulative_lost)),re(fe)})),ee.push(new Promise(function(re){var fe={};return l.traffic_stats&&l.pc&&l.pc.isSubscriber?(Object(j.b)(fe,"accessDelay",l.traffic_stats.access_delay),Object(j.b)(fe,"endToEndDelay",l.traffic_stats.e2e_delay),Object(j.b)(fe,"videoReceiveDelay",l.traffic_stats.video_delay),Object(j.b)(fe,"audioReceiveDelay",l.traffic_stats.audio_delay)):l.traffic_stats&&l.pc&&!l.pc.isSubscriber&&Object(j.b)(fe,"accessDelay",l.traffic_stats.access_delay),re(fe)})),Promise.all(ee).then(function(re){for(var fe={},se=re.length-1;se>=0;se--){var B=re[se];w()(fe,B)}p&&setTimeout(p.bind(l,fe),0)}).catch(function(re){S&&setTimeout(S.bind(l,re),0)})},l._getPCStats=function(p){return new Promise(function(S,L){if(!l.pc||"established"!==l.pc.state||!l.pc.getStats)return L("PEER_CONNECTION_NOT_ESTABLISHED");l.pc.getStats(function(ee){if(!l.pc||"established"!==l.pc.state||!l.pc.getStats)return L("PEER_CONNECTION_STATE_CHANGE");var re=l.pc.isSubscriber?Object(j.c)(ee):Object(j.a)(ee);return S(re)},p)}).then(function(S){return l.pc.isSubscriber?(Object(O.isFireFox)()||Object(O.isSafari)())&&(S.videoReceiveResolutionHeight&&"0"!==S.videoReceiveResolutionHeight||S.videoReceiveResolutionWidth&&"0"!==S.videoReceiveResolutionWidth||(Object(j.b)(S,"videoReceiveResolutionHeight",l.videoHeight),Object(j.b)(S,"videoReceiveResolutionWidth",l.videoWidth))):((Object(O.isSafari)()||Object(O.isFireFox)())&&(S.videoSendResolutionHeight&&"0"!==S.videoSendResolutionHeight||S.videoSendResolutionWidth&&"0"!==S.videoSendResolutionWidth||(Object(j.b)(S,"videoSendResolutionHeight",l.videoHeight),Object(j.b)(S,"videoSendResolutionWidth",l.videoWidth))),(Object(O.isSafari)()||Object(O.isFireFox)())&&l.uplinkStats&&Object(j.b)(S,"videoSendPacketsLost",l.uplinkStats.uplink_cumulative_lost)),Promise.resolve(S)})},l.getAudioLevel=function(){if(l.audioLevelHelper)return l.audioLevelHelper.getAudioLevel();if(l.stream){if(0!==l.stream.getAudioTracks().length)return l.audioLevelHelper=new E.audioLevelHelper(l.stream),l.audioLevelHelper.getAudioLevel();_.default.warning("[".concat(l.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else _.default.warning("[".concat(l.streamId,"] can't get audioLevel beacuse no stream exist"))},l.setVideoProfile("480p_1"),l._switchVideoDevice=function(p,S,L){if(p===l.cameraId)return S&&S();var ee={video:w()({},l.videoConstraint,{deviceId:{exact:p}}),audio:!1};_.default.debug("[".concat(l.streamId,"] ").concat(ee)),Object(I.b)(ee,function(re){try{var fe=function(){l.isPlaying()&&(l.stop(),l.elementID&&l.play(l.elementID,l.playOptions)),l.cameraId=p,l.videoConstraint.deviceId={exact:p},l.userMuteVideo&&(l.stream.getVideoTracks()[0].enabled=!1),Y.a.restoreVideoEffect(l).then(function(){S&&S()})};Y.a.disableVideoEffect(l).then(function(){var se=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(se=!0),se?l.replaceTrack(re.getVideoTracks()[0],fe,L):(l.removeTrack(l.stream.getVideoTracks()[0]),l.addTrack(re.getVideoTracks()[0]),fe())})}catch(se){return L&&L(se)}},function(re){return L&&L(re)})},l._switchAudioDevice=function(p,S,L){if(p===l.microphoneId)return S&&S();var ee={video:!1,audio:w()({},l.audioConstraint,{deviceId:{exact:p}})};_.default.debug("[".concat(l.streamId,"] "),ee);var re=l.stream.getAudioTracks()[0];re&&re.stop(),Object(I.b)(ee,function(fe){var se=function(){l._cleanupAudioMixing(),l.userMuteAudio&&(l.stream.getAudioTracks()[0].enabled=!1),l.isPlaying()&&(l.stop(),l.elementID&&l.play(l.elementID,l.playOptions)),l.microphoneId=p,l.audioConstraint.deviceId={exact:p},S&&S()};try{var B=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(B=!0),B?l.replaceTrack(fe.getAudioTracks()[0],se,L):(l.removeTrack(l.stream.getAudioTracks()[0]),l.addTrack(fe.getAudioTracks()[0]),se())}catch(H){return L&&L(H)}},function(fe){return L&&L(fe)})},l.switchDevice=function(p,S,L,ee){var re=v.report.reportApiInvoke(l.sid,{callback:function(le,ge){if(le)return ee&&ee(le);L&&L(ge)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(G.checkValidString)(S,"deviceId");var fe=function(){return l.inSwitchDevice=!1,re()},se=function(le){l.inSwitchDevice=!1,_.default.error("[".concat(l.streamId,"] "),le),re(le)};if(l.inSwitchDevice)return re("Device switch is in process.");if(l.inSwitchDevice=!0,!l.local)return se("Only the local stream can switch the device.");if(l.screen&&"video"===p)return se("The device cannot be switched during screen-sharing.");if(!l.video&&"video"===p)return se("Video track not exist.");if(!l.audio&&"audio"===p)return se("Audio track not exist.");if(l.videoSource||l.audioSource)return se("The device cannot be switched when using videoSource or audioSource.");var B=!1;for(var H in l.audioMixing.sounds){var K=l.audioMixing.sounds[H];if(K.state!==l.audioMixing.states.IDLE){B=!0;break}}var ve=l.audioMixing.audioContextInited;if(ve&&B)return se("The device cannot be switched when using audio Mixing.");P.a.getDeviceById(S,function(){if("video"===p)l._switchVideoDevice(S,fe,se);else{if("audio"!==p)return se("Invalid type.");l._switchAudioDevice(S,fe,se)}},function(){return se("The device does not exist.")})},l},W=function(C){var l=v.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:C&&C.audioSource?C.audioSource.enabled:null,videoTrackEnable:C&&C.videoSource?C.videoSource.enabled:null}}});Object(G.checkValidObject)(C,"StreamSpec");var $=C.streamID,p=C.audio,S=C.video,L=C.screen,ee=C.screenAudio,re=C.cameraId,fe=C.facingMode,se=C.microphoneId,B=C.mirror,H=C.extensionId,K=C.mediaSource,ve=C.audioProcessing,le=C.optimizationMode;if(!Object(G.isEmpty)($)&&!Object(E.is32Uint)($)&&!Object(G.isValidString)($,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(G.checkValidBoolean)(p,"audio"),Object(G.checkValidBoolean)(S,"video"),Object(G.isEmpty)(L)||Object(G.checkValidBoolean)(L,"screen"),Object(G.isEmpty)(ee)||Object(G.checkValidBoolean)(ee,"screenAudio"),Object(G.isEmpty)(re)||Object(G.checkValidString)(re,"cameraId",0,255,!1),Object(G.isEmpty)(fe)||Object(G.checkValidEnum)(fe,"facingMode",["user","environment","left","right"]),Object(G.isEmpty)(se)||Object(G.checkValidString)(se,"microphoneId",0,255,!1),Object(G.isEmpty)(H)||Object(G.checkValidString)(H,"extensionId"),Object(G.isEmpty)(K)||Object(G.checkValidEnum)(K,"mediaSource",["screen","application","window"]),Object(G.isEmpty)(B)||Object(G.checkValidBoolean)(B,"mirror"),!Object(G.isEmpty)(ve)){var ge=ve.AGC,Ce=ve.AEC,Oe=ve.ANS;Object(G.isEmpty)(ge)||Object(G.checkValidBoolean)(ge,"AGC"),Object(G.isEmpty)(Ce)||Object(G.checkValidBoolean)(Ce,"AEC"),Object(G.isEmpty)(Oe)||Object(G.checkValidBoolean)(Oe,"ANS")}Object(G.isEmpty)(le)||Object(G.checkValidEnum)(le,"optimizationMode",["detail","motion"]),_.default.debug("Create stream"),!0===ee&&!0===p&&_.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),C.screen&&!le&&(C.optimizationMode="detail");var ke=u(C);return l(),ke}},function(ue,ie,V){"use strict";V.d(ie,"a",function(){return te}),V.d(ie,"b",function(){return z});var D=V(5),w=V(7),O=V.n(w),T=V(12),N=V.n(T),_=V(17),R=V.n(_),f=V(0),m=V(15),v=V(2);function U(b,u){(null==u||u>b.length)&&(u=b.length);for(var W=0,C=new Array(u);W<u;W++)C[W]=b[W];return C}function j(b){if("undefined"==typeof Symbol||null==b[Symbol.iterator]){if(Array.isArray(b)||(b=function(S,L){if(S){if("string"==typeof S)return P(S,L);var ee=Object.prototype.toString.call(S).slice(8,-1);if("Object"===ee&&S.constructor&&(ee=S.constructor.name),"Map"===ee||"Set"===ee)return Array.from(ee);if("Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return P(S,L)}}(b))){var u=0,W=function(){};return{s:W,n:function(){return u>=b.length?{done:!0}:{done:!1,value:b[u++]}},e:function(S){throw S},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var C,l,$=!0,p=!1;return{s:function(){C=b[Symbol.iterator]()},n:function(){var S=C.next();return $=S.done,S},e:function(S){p=!0,l=S},f:function(){try{$||null==C.return||C.return()}finally{if(p)throw l}}}}function P(b,u){(null==u||u>b.length)&&(u=b.length);for(var W=0,C=new Array(u);W<u;W++)C[W]=b[W];return C}var M=V(50),Y=V.n(M),oe=V(26),Q=(V(4),103),te=function(b){var u={};if(u.clientId=b.clientId,b.session_id=Q+=1,"undefined"==typeof window||!window.navigator)throw f.default.error("["+u.streamId+"]["+u.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(u.browser="mozilla",u=function(b){var B,u={},W=(mozRTCPeerConnection,mozRTCSessionDescription),C=!1;u.uid=b.uid,u.isVideoMute=b.isVideoMute,u.isAudioMute=b.isAudioMute,u.isSubscriber=b.isSubscriber,u.clientId=b.clientId,u.filterStatsCache=[],u.originStatsCache=[],u.lastTimeGetStats=null,u.pc_config={iceServers:[]},b.iceServers instanceof Array?b.iceServers.map(function(B){0===B.url.indexOf("stun:")&&u.pc_config.iceServers.push({url:B.url})}):(b.stunServerUrl&&(b.stunServerUrl instanceof Array?b.stunServerUrl.map(function(B){"string"==typeof B&&""!==B&&u.pc_config.iceServers.push({url:B})}):"string"==typeof b.stunServerUrl&&""!==b.stunServerUrl&&u.pc_config.iceServers.push({url:b.stunServerUrl})),b.turnServers&&(b.turnServers instanceof Array?b.turnServers.map(function(B){B.udpport&&u.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.udpport+"?transport=udp"}),"string"==typeof B.tcpport&&""!==B.tcpport&&u.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.tcpport+"?transport=tcp"}),!0===B.forceturn&&(u.pc_config.iceTransportPolicy="relay")}):f.default.error("[".concat(u.clientId,"] turnServers is not a array")))),void 0===b.audio&&(b.audio=!0),void 0===b.video&&(b.video=!0),u.mediaConstraints={offerToReceiveAudio:b.audio,offerToReceiveVideo:b.video,mozDontOfferDataChannel:!0},u.roapSessionId=103,u.peerConnection=new m.RTCPeerConnection(u.pc_config),u.iceCandidateTimer=setTimeout(function(){u.iceCandidateTimer=null,f.default.debug("[".concat(u.clientId,"]Candidates collected: ").concat(u.iceCandidateCount)),u.moreIceComing&&(u.moreIceComing=!1,u.markActionNeeded())},Object(v.getParameter)("CANDIDATE_TIMEOUT")),u.peerConnection.onicecandidate=function(B){var H,K,ve,le;K=(H=u.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),ve=H.match(/a=candidate:.+typ\shost.+\r\n/),le=H.match(/a=candidate:.+typ\srelay.+\r\n/),null===K&&null===ve&&null===le||void 0!==u.ice||!u.iceCandidateTimer||(clearTimeout(u.iceCandidateTimer),u.iceCandidateTimer=null,u.ice=0,u.moreIceComing=!1,u.markActionNeeded()),u.iceCandidateCount=u.iceCandidateCount+1},u.checkMLineReverseInSDP=function(B){return!(!~B.indexOf("m=audio")||!~B.indexOf("m=video"))&&B.indexOf("m=audio")>B.indexOf("m=video")},u.reverseMLineInSDP=function(B){var H=B.split("m=audio"),K=H[1].split("m=video");return H[0]+"m=video"+K[1]+"m=audio"+K[0]},u.processSignalingMessage=function(B){var H,K=JSON.parse(B);u.incomingMessage=K,"new"===u.state?"OFFER"===K.messageType?(K.sdp=fe(K.sdp),u.peerConnection.setRemoteDescription(new W(H={sdp:K.sdp,type:"offer"}),function(){f.default.debug("["+u.clientId+"]setRemoteDescription succeeded")},function(ve){f.default.info("["+u.clientId+"]setRemoteDescription failed: "+ve.name)}),u.state="offer-received",u.markActionNeeded()):u.error("Illegal message for this state: "+K.messageType+" in state "+u.state):"offer-sent"===u.state?"ANSWER"===K.messageType?(K.sdp=fe(K.sdp),K.sdp=K.sdp.replace(/ generation 0/g,""),K.sdp=K.sdp.replace(/ udp /g," UDP "),-1!==K.sdp.indexOf("a=group:BUNDLE")?(K.sdp=K.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),K.sdp=K.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),K.sdp=K.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(K.sdp=K.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),K.sdp=K.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),H={sdp:K.sdp,type:"answer"},b.screen&&"detail"===b.optimizationMode&&(f.default.debug("[".concat(u.client,"] remove screen share abs ext")),K.sdp=se(H.sdp)),u.peerConnection.setRemoteDescription(new W(H),function(){f.default.debug("["+u.clientId+"]setRemoteDescription succeeded")},function(ve){f.default.info("["+u.clientId+"]setRemoteDescription failed: "+ve)}),u.state="established"):"pr-answer"===K.messageType?u.peerConnection.setRemoteDescription(new W(H={sdp:K.sdp,type:"pr-answer"}),function(){f.default.debug("["+u.clientId+"]setRemoteDescription succeeded")},function(ve){f.default.info("["+u.clientId+"]setRemoteDescription failed: "+ve.name)}):u.error("offer"===K.messageType?"Not written yet":"Illegal message for this state: "+K.messageType+" in state "+u.state):"established"===u.state&&("OFFER"===K.messageType?(u.peerConnection.setRemoteDescription(new W(H={sdp:K.sdp,type:"offer"}),function(){f.default.debug("["+u.clientId+"]setRemoteDescription succeeded")},function(ve){f.default.info("["+u.clientId+"]setRemoteDescription failed: "+ve.name)}),u.state="offer-received",u.markActionNeeded()):u.error("Illegal message for this state: "+K.messageType+" in state "+u.state))},u.setRtpSenderParameters=(B=R()(N.a.mark(function H(K){var ve,le,ge;return N.a.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(ve=u.peerConnection.getSenders(),le=ve.find(function(Oe){return"video"===Oe.track.kind})){Ce.next=4;break}return Ce.abrupt("return");case 4:return(ge=le.getParameters()).degradationPreference=K,Ce.prev=6,f.default.debug("[".concat(u.clientId,"] setParameters"),ge),Ce.next=10,le.setParameters(ge);case 10:Ce.next=15;break;case 12:Ce.prev=12,Ce.t0=Ce.catch(6),f.default.debug("[".concat(u.clientId,"] setParameters failed, ignore"));case 15:case"end":return Ce.stop()}},H,null,[[6,12]])})),function(H){return B.apply(this,arguments)});var l={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},$={id:"",type:"",mediaType:"",googCodecName:b.codec?b.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},p={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},S={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},L=0,ee=0,re=0;u.getVideoRelatedStats=function(B){u.peerConnection.getStats().then(function(H){var K,ve=j(H.values());try{for(ve.s();!(K=ve.n()).done;){var le=K.value;if(u.isSubscriber){if(("inbound-rtp"===le.type||"inboundrtp"===le.type)&&"video"===le.mediaType){if(!u.lastReport)return void(u.lastReport=le);B&&B({browser:"firefox",mediaType:"video",peerId:u.uid,isVideoMute:u.isVideoMute,frameRateReceived:Math.round(le.framerateMean)+"",frameRateDecoded:le.framesDecoded-u.lastReport.framesDecoded+"",bytesReceived:le.bytesReceived+"",packetsReceived:le.packetsReceived+"",packetsLost:le.packetsLost+""}),u.lastReport=le}}else if(("outbound-rtp"===le.type||"outboundrtp"===le.type)&&"video"===le.mediaType){if(!u.lastReport)return void(u.lastReport=le);B&&B({mediaType:"video",isVideoMute:u.isVideoMute,frameRateInput:Math.round(le.framerateMean)+"",frameRateSent:le.framesEncoded-u.lastReport.framesEncoded+""}),u.lastReport=le}}}catch(ge){ve.e(ge)}finally{ve.f()}})},u.getAudioRelatedStats=function(B){u.peerConnection.getStats().then(function(H){var K,ve=j(H.values());try{for(ve.s();!(K=ve.n()).done;){var le=K.value;u.isSubscriber&&("inbound-rtp"!==le.type&&"inboundrtp"!==le.type||"audio"!==le.mediaType||B&&B({browser:"firefox",mediaType:"audio",peerId:u.uid,isAudioMute:u.isAudioMute,frameDropped:le.packetsLost+"",frameReceived:le.packetsReceived+"",googJitterReceived:le.jitter+"",bytesReceived:le.bytesReceived+"",packetsReceived:le.packetsReceived+"",packetsLost:le.packetsLost+""}))}}catch(ge){ve.e(ge)}finally{ve.f()}})},u.getStatsRate=function(B){u.getStats(function(H){H.forEach(function(K){}),B(H)})},u.getStats=function(B,H){H=(H=H||500)>500?500:H,u.lastTimeGetStats&&Date.now()-u.lastTimeGetStats<H?B&&B(u.filterStatsCache,u.originStatsCache):this._getStats(function(K,ve){u.filterStatsCache=K,u.originStatsCache=ve,u.lastTimeGetStats=Date.now(),B&&B(K,ve)})},u._getStats=function(B){u.peerConnection.getStats().then(function(H){var K,ve=[],le=j(H.values());try{for(le.s();!(K=le.n()).done;){var ge=K.value;ve.push(ge),"outbound-rtp"!==ge.type&&"outboundrtp"!==ge.type||"video"!==ge.mediaType||-1!==ge.id.indexOf("rtcp")||($.id=ge.id,$.type=ge.type,$.mediaType=ge.mediaType,$.bytesSent=ge.bytesSent?ge.bytesSent+"":"0",$.packetsSent=ge.packetsSent?ge.packetsSent+"":"0",$.googPlisReceived=ge.pliCount?ge.pliCount+"":"0",$.googNacksReceived=ge.nackCount?ge.nackCount+"":"0",$.googFirsReceived=ge.firCount?ge.firCount+"":"0",$.googFrameRateSent=ge.framerateMean?Math.round(ge.framerateMean)+"":"0"),"outbound-rtp"!==ge.type&&"outboundrtp"!==ge.type||"audio"!==ge.mediaType||-1!==ge.id.indexOf("rtcp")||(l.id=ge.id,l.type=ge.type,l.mediaType=ge.mediaType,l.bytesSent=ge.bytesSent?ge.bytesSent+"":"0",l.packetsSent=ge.packetsSent?ge.packetsSent+"":"0",b.agoraStream.local&&(l.audioInputLevel=Math.round(32767*b.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==ge.type&&"inboundrtp"!==ge.type||"audio"!==ge.mediaType||ge.isRemote||-1!==ge.id.indexOf("rtcp")||(p.id=ge.id,p.type=ge.type,p.mediaType=ge.mediaType,p.bytesReceived=ge.bytesReceived?ge.bytesReceived+"":"0",p.packetsLost=ge.packetsLost?ge.packetsLost+"":"0",p.packetsReceived=ge.packetsReceived?ge.packetsReceived+"":"0",p.googJitterReceived=ge.jitter?ge.jitter+"":"0",b.agoraStream.local||(p.audioOutputLevel=Math.round(32767*b.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==ge.type&&"inboundrtp"!==ge.type||"video"!==ge.mediaType||ge.isRemote||-1!==ge.id.indexOf("rtcp")||(S.id=ge.id,S.type=ge.type,S.mediaType=ge.mediaType,S.bytesReceived=ge.bytesReceived?ge.bytesReceived+"":"0",S.googFrameRateReceived=ge.framerateMean?Math.round(ge.framerateMean)+"":"0",S.googFramesDecoded=ge.framesDecoded?ge.framesDecoded+"":"0",Date.now()-re>=1e3?(S.googFrameRateDecoded=(ge.framesDecoded-L)/((Date.now()-re)/1e3),S.googFrameRateDecoded=Math.round(Math.max(0,S.googFrameRateDecoded)),re=Date.now(),ee=S.googFrameRateDecoded,L=ge.framesDecoded,S.googFrameRateDecoded=S.googFrameRateDecoded.toString()):S.googFrameRateDecoded=ee.toString(),S.packetsLost=ge.packetsLost?ge.packetsLost+"":"0",S.packetsReceived=ge.packetsReceived?ge.packetsReceived+"":"0",S.googJitterBufferMs=ge.jitter?ge.jitter+"":"0",S.googNacksSent=ge.nackCount?ge.nackCount+"":"0",S.googPlisSent=ge.pliCount?ge.pliCount+"":"0",S.googFirsSent=ge.firCount?ge.firCount+"":"0"),-1!==ge.id.indexOf("outbound_rtcp_video")&&($.packetsLost=ge.packetsLost?ge.packetsLost+"":"0")}}catch(Oe){le.e(Oe)}finally{le.f()}var Ce=[$,l,p,S];Ce.push({id:"time",startTime:u.connectedTime,timestamp:new Date}),B(Ce,ve)},function(H){f.default.error("["+u.clientId+"]"+H)})},u.addStream=function(B){C=!0,u.peerConnection.addStream(B),u.markActionNeeded()},u.removeStream=function(){u.markActionNeeded()},u.close=function(){u.state="closed",u.peerConnection.close()},u.markActionNeeded=function(){u.actionNeeded=!0,u.doLater(function(){u.onstablestate()})},u.doLater=function(B){window.setTimeout(B,1)},u.onstablestate=function(){if(u.actionNeeded){if("new"===u.state||"established"===u.state)C&&(u.mediaConstraints=void 0),u.peerConnection.createOffer(function(H){if(H.sdp=fe(H.sdp),H.sdp=H.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),H.sdp!==u.prevOffer)return u.peerConnection.setLocalDescription(H),u.state="preparing-offer",void u.markActionNeeded();f.default.debug("["+u.clientId+"]Not sending a new offer")},function(H){f.default.debug("["+u.clientId+"]Ups! create offer failed ",H)},u.mediaConstraints);else if("preparing-offer"===u.state){if(u.moreIceComing)return;u.prevOffer=u.peerConnection.localDescription.sdp,u.offerCandidates=u.prevOffer.match(/a=candidate.+\r\n/g)||[],u.offerCandidates.length||(b.isCloudProxy3&&b.onNoIceCandidate&&b.onNoIceCandidate(),f.default.warning("[".concat(u.clientId,"]No Ice Candidate generated")),Object(v.getParameter)("SHIM_CANDIDATE")?(f.default.debug("Shimming fake candidate"),u.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):f.default.error("[".concat(u.clientId,"]None Ice Candidate not allowed"))),u.prevOffer=u.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),u.sendMessage("OFFER",u.prevOffer),u.state="offer-sent"}else if("offer-received"===u.state)u.peerConnection.createAnswer(function(H){if(u.peerConnection.setLocalDescription(H),u.state="offer-received-preparing-answer",u.iceStarted)u.markActionNeeded();else{var K=new Date;f.default.debug("["+u.clientId+"]"+K.getTime()+": Starting ICE in responder"),u.iceStarted=!0}},function(){f.default.debug("["+u.clientId+"]Ups! Something went wrong")});else if("offer-received-preparing-answer"===u.state){if(u.moreIceComing)return;u.sendMessage("ANSWER",u.peerConnection.localDescription.sdp),u.state="established"}else u.debug("Dazed and confused in state "+u.state+", stopping here");u.actionNeeded=!1}},u.sendMessage=function(B,H){var K={};K.messageType=B,K.sdp=H,"OFFER"===B?(K.offererSessionId=u.sessionId,K.answererSessionId=u.otherSessionId,K.seq=u.sequenceNumber+=1,K.tiebreaker=Math.floor(429496723*Math.random()+1)):(K.offererSessionId=u.incomingMessage.offererSessionId,K.answererSessionId=u.sessionId,K.seq=u.incomingMessage.seq),u.onsignalingmessage(JSON.stringify(K))},u._getSender=function(B){if(u.peerConnection&&u.peerConnection.getSenders){var H=u.peerConnection.getSenders().find(function(K){return K.track.kind==B});if(H)return H}return null},u.hasSender=function(B){return!!u._getSender(B)},u.replaceTrack=function(B,H,K){var ve=u._getSender(B.kind);if(!ve)return K("NO_SENDER_FOUND");try{ve.replaceTrack(B)}catch(le){return K&&K(le)}setTimeout(function(){return H&&H()},50)},u.error=function(B){throw"Error in RoapOnJsep: "+B},u.sessionId=u.roapSessionId+=1,u.sequenceNumber=0,u.actionNeeded=!1,u.iceStarted=!1,u.moreIceComing=!0,u.iceCandidateCount=0,u.onsignalingmessage=b.callback,u.peerConnection.ontrack=function(B){u.onaddstream&&u.onaddstream(B,"ontrack")},u.peerConnection.onremovestream=function(B){u.onremovestream&&u.onremovestream(B)},u.peerConnection.oniceconnectionstatechange=function(B){"connected"===B.currentTarget.iceConnectionState&&(u.connectedTime=new Date),u.oniceconnectionstatechange&&u.oniceconnectionstatechange(B.currentTarget.iceConnectionState)};var fe=function(B){var H;if(b.video&&b.maxVideoBW&&(null==(H=B.match(/m=video.*\r\n/))&&(H=B.match(/m=video.*\n/)),H&&H.length>0)){var K=H[0]+"b=TIAS:"+1e3*b.maxVideoBW+"\r\n";B=B.replace(H[0],K)}return b.audio&&b.maxAudioBW&&(null==(H=B.match(/m=audio.*\r\n/))&&(H=B.match(/m=audio.*\n/)),H&&H.length>0)&&(B=B.replace(H[0],K=H[0]+"b=TIAS:"+1e3*b.maxAudioBW+"\r\n")),B},se=function(B){return(B=B.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return u.onaddstream=null,u.onremovestream=null,u.state="new",u.markActionNeeded(),u}(b)):"iOS"===D.getBrowserOS()||D.isSafari()?(f.default.debug("["+u.streamId+"]["+u.clientId+"]Safari"),(u=function(b){var u={},W=m.RTCPeerConnection;u.uid=b.uid,u.isVideoMute=b.isVideoMute,u.isAudioMute=b.isAudioMute,u.isSubscriber=b.isSubscriber,u.clientId=b.clientId,u.filterStatsCache=[],u.originStatsCache=[],u.lastTimeGetStats=null,u.pc_config={iceServers:[],bundlePolicy:"max-bundle"},u.con={optional:[{DtlsSrtpKeyAgreement:!0}]},b.iceServers instanceof Array?u.pc_config.iceServers=b.iceServers:(b.stunServerUrl&&(b.stunServerUrl instanceof Array?b.stunServerUrl.map(function(B){"string"==typeof B&&""!==B&&u.pc_config.iceServers.push({url:B})}):"string"==typeof b.stunServerUrl&&""!==b.stunServerUrl&&u.pc_config.iceServers.push({url:b.stunServerUrl})),b.turnServers&&(b.turnServers instanceof Array?b.turnServers.map(function(B){B.udpport&&u.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.udpport+"?transport=udp"}),"string"==typeof B.tcpport&&""!==B.tcpport&&u.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.tcpport+"?transport=tcp"}),!0===B.forceturn&&(u.pc_config.iceTransportPolicy="relay")}):f.default.error("[".concat(u.clientId,"] turnServers is not a array")))),void 0===b.audio&&(b.audio=!0),void 0===b.video&&(b.video=!0),u.mediaConstraints={mandatory:{OfferToReceiveVideo:b.video,OfferToReceiveAudio:b.audio}},u.roapSessionId=103;try{u.pc_config.sdpSemantics=Object(v.getParameter)("PLAN"),u.peerConnection=new W(u.pc_config,u.con)}catch(B){delete u.pc_config.sdpSemantics,u.peerConnection=new W(u.pc_config,u.con)}u.iceCandidateTimer=setTimeout(function(){u.iceCandidateTimer=null,u.moreIceComing&&(u.moreIceComing=!1,u.markActionNeeded())},Object(v.getParameter)("CANDIDATE_TIMEOUT")),u.peerConnection.onicecandidate=function(B){var H,K,ve,le;K=(H=u.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),ve=H.match(/a=candidate:.+typ\shost.+\r\n/),le=H.match(/a=candidate:.+typ\srelay.+\r\n/),0===u.iceCandidateCount&&(u.timeout=setTimeout(function(){u.moreIceComing&&(u.moreIceComing=!1,u.markActionNeeded())},1e3)),null===K&&null===ve&&null===le||void 0!==u.ice||!u.iceCandidateTimer||(clearTimeout(u.iceCandidateTimer),u.iceCandidateTimer=null,u.ice=0,u.moreIceComing=!1,u.markActionNeeded()),u.iceCandidateCount=u.iceCandidateCount+1};var B,C=function(B){return b.screen&&(B=B.replace("a=x-google-flag:conference\r\n","")),B},l=function(B){var H;return(H=B.match(/m=video.*\r\n/))&&b.minVideoBW&&b.maxVideoBW&&(B=B.replace(H[0],H[0]+"b=AS:"+b.maxVideoBW+"\r\n"),f.default.debug("["+u.clientId+"]Set Video Bitrate - min:"+b.minVideoBW+" max:"+b.maxVideoBW)),(H=B.match(/m=audio.*\r\n/))&&b.maxAudioBW&&(B=B.replace(H[0],H[0]+"b=AS:"+b.maxAudioBW+"\r\n")),B};u.processSignalingMessage=function(B){var H,K=JSON.parse(B);u.incomingMessage=K,"new"===u.state?"OFFER"===K.messageType?(H={sdp:K.sdp,type:"offer"},u.peerConnection.setRemoteDescription(new RTCSessionDescription(H)),u.state="offer-received",u.markActionNeeded()):u.error("Illegal message for this state: "+K.messageType+" in state "+u.state):"offer-sent"===u.state?"ANSWER"===K.messageType?((H={sdp:K.sdp,type:"answer"}).sdp=C(H.sdp),H.sdp=l(H.sdp),H.sdp=H.sdp.replace(/a=x-google-flag:conference\r\n/g,""),b.screen&&"detail"===b.optimizationMode&&(f.default.debug("[".concat(u.client,"] remove screen share abs ext")),H.sdp=H.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),u.peerConnection.setRemoteDescription(new RTCSessionDescription(H)),u.state="established"):"pr-answer"===K.messageType?(H={sdp:K.sdp,type:"pr-answer"},u.peerConnection.setRemoteDescription(new RTCSessionDescription(H))):u.error("offer"===K.messageType?"Not written yet":"Illegal message for this state: "+K.messageType+" in state "+u.state):"established"===u.state&&("OFFER"===K.messageType?(H={sdp:K.sdp,type:"offer"},u.peerConnection.setRemoteDescription(new RTCSessionDescription(H)),u.state="offer-received",u.markActionNeeded()):"ANSWER"===K.messageType?((H={sdp:K.sdp,type:"answer"}).sdp=C(H.sdp),H.sdp=l(H.sdp),u.peerConnection.setRemoteDescription(new RTCSessionDescription(H))):u.error("Illegal message for this state: "+K.messageType+" in state "+u.state))},u.setRtpSenderParameters=(B=R()(N.a.mark(function H(K){return N.a.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:u.degradation=K;case 1:case"end":return ve.stop()}},H)})),function(H){return B.apply(this,arguments)}),u._setRtpSenderParameters=function(){var B=R()(N.a.mark(function H(K){var ve,le,ge;return N.a.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(ve=u.peerConnection.getSenders(),le=ve.find(function(Oe){return Oe&&Oe.track&&"video"===Oe.track.kind})){Ce.next=4;break}return Ce.abrupt("return");case 4:return(ge=le.getParameters()).degradationPreference=K,Ce.prev=6,f.default.debug("[".concat(u.clientId,"] setParameters"),ge),Ce.next=10,le.setParameters(ge);case 10:Ce.next=15;break;case 12:Ce.prev=12,Ce.t0=Ce.catch(6),f.default.debug("[".concat(u.clientId,"] setParameters failed, ignore"));case 15:case"end":return Ce.stop()}},H,null,[[6,12]])}));return function(H){return B.apply(this,arguments)}}();var $={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},p={id:"",type:"",mediaType:"",googCodecName:b.codec?b.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},S={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},L={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},ee={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},re=0,fe=0,se=0;return u.isRemoteVideoStats=function(B){return!!(B.frameHeight&&B.frameWidth&&B.remoteSource)},u.getVideoRelatedStats=function(B){u.peerConnection.getStats().then(function(H){H.forEach(function(K){if(u.isSubscriber){var ve={peerId:u.uid,mediaType:"video",isVideoMute:u.isVideoMute};if("track"===K.type&&(~K.id.indexOf("video")||~K.trackIdentifier.indexOf("v")||u.isRemoteVideoStats(K))){if(!u.lastReport)return void(u.lastReport=K);ve.frameRateReceived=K.framesReceived-u.lastReport.framesReceived+"",ve.frameRateDecoded=K.framesDecoded-u.lastReport.framesDecoded+"",u.lastReport=K}"inbound-rtp"===K.type&&~K.id.indexOf("Video")&&(ve.bytesReceived=K.bytesReceived+"",ve.packetsReceived=K.packetsReceived+"",ve.packetsLost=K.packetsLost+""),B&&B(ve)}else if("outbound-rtp"===K.type&&~K.id.indexOf("Video")){if(!u.lastReport)return void(u.lastReport=K);B&&B({mediaType:"video",isVideoMute:u.isVideoMute,frameRateInput:b.maxFrameRate+"",frameRateSent:K.framesEncoded-u.lastReport.framesEncoded+""}),u.lastReport=K}})})},u.getAudioRelatedStats=function(B){u.peerConnection.getStats().then(function(H){H.forEach(function(K){u.isSubscriber&&"inbound-rtp"===K.type&&~K.id.indexOf("Audio")&&B&&B({peerId:u.uid,mediaType:"audio",isAudioMute:u.isAudioMute,frameDropped:K.packetsLost+"",frameReceived:K.packetsReceived+"",googJitterReceived:K.jitter+"",bytesReceived:K.bytesReceived+"",packetsReceived:K.packetsReceived+"",packetsLost:K.packetsLost+""})})})},u.getStatsRate=function(B){u.getStats(function(H){H.forEach(function(K){"outbound-rtp"===K.type&&"video"===K.mediaType&&K.googFramesEncoded&&(K.googFrameRateSent=Math.ceil((K.googFramesEncoded-re)/3).toString(),re=K.googFramesEncoded),"inbound-rtp"===K.type&&-1!=K.id.indexOf("55543")&&(K.googFrameRateReceived&&(K.googFrameRateReceived=Math.ceil((K.googFrameReceived-se)/3).toString(),se=K.googFrameReceived),K.googFrameRateDecoded&&(K.googFrameRateDecoded=Math.ceil((K.googFramesDecoded-fe)/3).toString(),fe=K.googFramesDecoded))}),B(H)})},u.getStats=function(B,H){H=(H=H||500)>500?500:H,u.lastTimeGetStats&&Date.now()-u.lastTimeGetStats<H?B&&B(u.filterStatsCache,u.originStatsCache):this._getStats(function(K,ve){u.filterStatsCache=K,u.originStatsCache=ve,u.lastTimeGetStats=Date.now(),B&&B(K,ve)})},u._getStats=function(B){var H=[];u.peerConnection.getStats().then(function(K){K.forEach(function(le){var ge;H.push(le),"outbound-rtp"===le.type&&"audio"===le.mediaType&&($.id=le.id,$.type=le.type,$.mediaType=le.mediaType,$.bytesSent=le.bytesSent?le.bytesSent+"":"0",$.packetsSent=le.packetsSent?le.packetsSent+"":"0",b.agoraStream.local&&($.audioInputLevel=Math.round(32767*b.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===le.type&&"video"===le.mediaType&&(p.id=le.id,p.type=le.type,p.mediaType=le.mediaType,p.bytesSent=le.bytesSent?le.bytesSent+"":"0",p.packetsSent=le.packetsSent?le.packetsSent+"":"0",p.googPlisReceived=le.pliCount?le.pliCount+"":"0",p.googNacksReceived=le.nackCount?le.nackCount+"":"0",p.googFirsReceived=le.firCount?le.firCount+"":"0",p.googFramesEncoded=le.framesEncoded?le.framesEncoded+"":"0",(ge=K.get(le.trackId))&&(p.googFrameHeightSent=ge.frameHeight&&ge.frameHeight.toString(),p.googFrameWidthSent=ge.frameWidth&&ge.frameWidth.toString())),"inbound-rtp"!==le.type||-1==le.id.indexOf("44444")&&"audio"!==le.mediaType||(S.id=le.id,S.type=le.type,S.mediaType="audio",S.packetsReceived=le.packetsReceived?le.packetsReceived+"":"0",S.bytesReceived=le.bytesReceived?le.bytesReceived+"":"0",S.packetsLost=le.packetsLost?le.packetsLost+"":"0",S.packetsReceived=le.packetsReceived?le.packetsReceived+"":"0",S.googJitterReceived=le.jitter?le.jitter+"":"0",(ge=K.get(le.trackId))&&(S.audioOutputLevel=ge.audioLevel&&Math.round(32767*ge.audioLevel).toString()),b.agoraStream.local||S.audioOutputLevel||(S.audioOutputLevel=Math.round(32767*b.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==le.type||-1==le.id.indexOf("55543")&&"video"!==le.mediaType||(L.id=le.id,L.type=le.type,L.mediaType="video",L.packetsReceived=le.packetsReceived?le.packetsReceived+"":"0",L.bytesReceived=le.bytesReceived?le.bytesReceived+"":"0",L.packetsLost=le.packetsLost?le.packetsLost+"":"0",L.googJitterBufferMs=le.jitter?le.jitter+"":"0",L.googNacksSent=le.nackCount?le.nackCount+"":"0",L.googPlisSent=le.pliCount?le.pliCount+"":"0",L.googFirsSent=le.firCount?le.firCount+"":"0",(ge=K.get(le.trackId))&&(L.googFrameHeightReceived=ge.frameHeight&&ge.frameHeight.toString(),L.googFrameWidthReceived=ge.frameWidth&&ge.frameWidth.toString(),L.googFrameReceived=ge.framesReceived&&ge.framesReceived.toString(),L.googFramesDecoded=ge.framesDecoded&&ge.framesDecoded.toString())),"candidate-pair"===le.type&&(0==le.availableIncomingBitrate?ee.googAvailableSendBandwidth=le.availableOutgoingBitrate+"":ee.googAvailableReceiveBandwidth=le.availableIncomingBitrate+"")});var ve=[ee,$,p,S,L];ve.push({id:"time",startTime:u.connectedTime,timestamp:new Date}),B(ve,H)}).catch(function(K){f.default.error("["+u.clientId+"] ",K)})},u.addTrack=function(B,H){u.peerConnection.addTrack(B,H)},u.removeTrack=function(B,H){var K=u.peerConnection.getSenders().find(function(ve){return ve.track==B});K.replaceTrack(null),u.peerConnection.removeTrack(K)},u.addStream=function(B){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?B.getTracks().forEach(function(H){return u.peerConnection.addTrack(H,B)}):u.peerConnection.addStream(B),u.markActionNeeded()},u.removeStream=function(){u.markActionNeeded()},u.close=function(){u.state="closed",u.peerConnection.close()},u.markActionNeeded=function(){u.actionNeeded=!0,u.doLater(function(){u.onstablestate()})},u.doLater=function(B){window.setTimeout(B,1)},u.onstablestate=function(){if(u.actionNeeded){if("new"===u.state||"established"===u.state)b.isSubscriber&&(u.peerConnection.addTransceiver("audio",{direction:"recvonly"}),u.peerConnection.addTransceiver("video",{direction:"recvonly"})),u.peerConnection.createOffer(u.mediaConstraints).then(function(H){if(H.sdp=l(H.sdp),b.isSubscriber||(H.sdp=H.sdp.replace(/a=.*video-orientation\r\n/g,"")),H.sdp!==u.prevOffer)return u.peerConnection.setLocalDescription(H),u.state="preparing-offer",void u.markActionNeeded();f.default.debug("["+u.clientId+"]Not sending a new offer")}).catch(function(H){f.default.debug("["+u.clientId+"]peer connection create offer failed ",H)});else if("preparing-offer"===u.state){if(u.moreIceComing)return;u.prevOffer=u.peerConnection.localDescription.sdp,u.offerCandidates=u.prevOffer.match(/a=candidate.+\r\n/g)||[],u.offerCandidates.length||(f.default.warning("[".concat(u.clientId,"]No Ice Candidate generated")),b.isCloudProxy3&&b.onNoIceCandidate&&b.onNoIceCandidate(),Object(v.getParameter)("SHIM_CANDIDATE")?(f.default.debug("Shimming fake candidate"),u.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):f.default.error("[".concat(u.clientId,"]None Ice Candidate not allowed"))),u.prevOffer=u.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),u.sendMessage("OFFER",u.prevOffer),u.state="offer-sent"}else if("offer-received"===u.state)u.peerConnection.createAnswer(function(H){if(u.peerConnection.setLocalDescription(H),u.state="offer-received-preparing-answer",u.iceStarted)u.markActionNeeded();else{var K=new Date;f.default.debug("["+u.clientId+"]"+K.getTime()+": Starting ICE in responder"),u.iceStarted=!0}},function(H){f.default.debug("["+u.clientId+"]peer connection create answer failed ",H)},u.mediaConstraints);else if("offer-received-preparing-answer"===u.state){if(u.moreIceComing)return;u.sendMessage("ANSWER",u.peerConnection.localDescription.sdp),u.state="established"}else u.debug("Dazed and confused in state "+u.state+", stopping here");u.actionNeeded=!1}},u.sendMessage=function(B,H){var K={};K.messageType=B,K.sdp=H,"OFFER"===B?(K.offererSessionId=u.sessionId,K.answererSessionId=u.otherSessionId,K.seq=u.sequenceNumber+=1,K.tiebreaker=Math.floor(429496723*Math.random()+1)):(K.offererSessionId=u.incomingMessage.offererSessionId,K.answererSessionId=u.sessionId,K.seq=u.incomingMessage.seq),u.onsignalingmessage(JSON.stringify(K))},u._getSender=function(B){if(u.peerConnection&&u.peerConnection.getSenders){var H=u.peerConnection.getSenders().find(function(K){return K.track.kind==B});if(H)return H}return null},u.hasSender=function(B){return!!u._getSender(B)},u.replaceTrack=function(B,H,K){var ve=u._getSender(B.kind);if(!ve)return K("NO_SENDER_FOUND");try{ve.replaceTrack(B)}catch(le){return K&&K(le)}setTimeout(function(){return H&&H()},50)},u.error=function(B){throw"Error in RoapOnJsep: "+B},u.sessionId=u.roapSessionId+=1,u.sequenceNumber=0,u.actionNeeded=!1,u.iceStarted=!1,u.moreIceComing=!0,u.iceCandidateCount=0,u.onsignalingmessage=b.callback,u.peerConnection.ontrack=function(B){console.log("!!! ontrack, ",B.track.kind,B.track),u.onaddstream&&u.onaddstream(B,"ontrack")},u.peerConnection.onremovestream=function(B){u.onremovestream&&u.onremovestream(B)},u.peerConnection.oniceconnectionstatechange=function(B){"connected"===B.currentTarget.iceConnectionState&&(u.connectedTime=new Date,u._setRtpSenderParameters(u.degradation)),u.oniceconnectionstatechange&&u.oniceconnectionstatechange(B.currentTarget.iceConnectionState)},u.renegotiate=function(){u.isSubscriber||(f.default.debug("[".concat(u.uid,"]"),"renegotiating"),void 0!==u.prevOffer&&u.peerConnection.createOffer().then(function(B){return B.sdp=B.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),B.sdp=C(B.sdp),B.sdp=l(B.sdp),u.peerConnection.setLocalDescription(B)}).then(function(){u.onnegotiationneeded&&u.onnegotiationneeded(u.peerConnection.localDescription.sdp)}).catch(function(B){console.log("createOffer error: ",B)}))},u.isSubscriber||(u.peerConnection.onnegotiationneeded=u.renegotiate),u.onaddstream=null,u.onremovestream=null,u.state="new",u.markActionNeeded(),u}(b)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?u=new Y.a(b):(u=function(b){var u={},W=m.RTCPeerConnection;u.uid=b.uid,u.isVideoMute=b.isVideoMute,u.isAudioMute=b.isAudioMute,u.isSubscriber=b.isSubscriber,u.clientId=b.clientId,u.filterStatsCache=[],u.originStatsCache=[],u.lastTimeGetStats=null,u.pc_config={iceServers:[]};var C={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},l={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:b.codec?b.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},$={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},p={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},S={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};u.con={optional:[{DtlsSrtpKeyAgreement:!0}]},b.iceServers instanceof Array?u.pc_config.iceServers=b.iceServers:(b.stunServerUrl&&(b.stunServerUrl instanceof Array?b.stunServerUrl.map(function(B){"string"==typeof B&&""!==B&&u.pc_config.iceServers.push({url:B})}):"string"==typeof b.stunServerUrl&&""!==b.stunServerUrl&&u.pc_config.iceServers.push({url:b.stunServerUrl})),b.turnServers&&(b.turnServers instanceof Array?b.turnServers.map(function(B){B.udpport&&u.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.udpport+"?transport=udp"}),"string"==typeof B.tcpport&&""!==B.tcpport&&u.pc_config.iceServers.push({username:B.username,credential:B.credential,credentialType:"password",urls:(B.useTurns?"turns:":"turn:")+B.url+":"+B.tcpport+"?transport=tcp"}),!0===B.forceturn&&(u.pc_config.iceTransportPolicy="relay")}):f.default.error("[".concat(u.clientId,"] turnServers is not a array")))),void 0===b.audio&&(b.audio=!0),void 0===b.video&&(b.video=!0),u.mediaConstraints={mandatory:{OfferToReceiveVideo:b.video,OfferToReceiveAudio:b.audio}},u.roapSessionId=103;try{u.pc_config.sdpSemantics=Object(v.getParameter)("PLAN"),u.peerConnection=new W(u.pc_config,u.con)}catch(B){delete u.pc_config.sdpSemantics,u.peerConnection=new W(u.pc_config,u.con);var L=u.peerConnection.getConfiguration();L.sdpSemantics&&Object(v.setParameter)("PLAN",L.sdpSemantics)}u.iceCandidateTimer=setTimeout(function(){u.iceCandidateTimer=null,f.default.debug("[".concat(u.clientId,"]Candidates collected: ").concat(u.iceCandidateCount)),u.moreIceComing&&(u.moreIceComing=!1,u.markActionNeeded())},Object(v.getParameter)("CANDIDATE_TIMEOUT")),u.peerConnection.onicecandidate=function(B){var H,K,ve,le;K=(H=u.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),ve=H.match(/a=candidate:.+typ\shost.+\r\n/),le=H.match(/a=candidate:.+typ\srelay.+\r\n/),null===K&&null===ve&&null===le||void 0!==u.ice||!u.iceCandidateTimer||(clearTimeout(u.iceCandidateTimer),u.iceCandidateTimer=null,u.ice=0,u.moreIceComing=!1,u.markActionNeeded()),u.iceCandidateCount=u.iceCandidateCount+1};var B,ee=function(B){return B.replace("a=x-google-flag:conference\r\n","")},re=function(B){var H,K;if((H=B.match(/m=video.*\r\n/))&&b.minVideoBW&&b.maxVideoBW){K=H[0]+"b=AS:"+b.maxVideoBW+"\r\n";var ve=0,le=0;"h264"===b.codec?(ve=B.search(/a=rtpmap:(\d+) H264\/90000\r\n/),le=B.search(/H264\/90000\r\n/)):"vp8"===b.codec?(ve=B.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),le=B.search(/VP8\/90000\r\n/)):"vp9"===b.codec&&(ve=B.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),le=B.search(/VP9\/90000\r\n/)),-1!==ve&&-1!==le&&le-ve>10&&(K=K+"a=fmtp:"+B.slice(ve+9,le-1)+" x-google-min-bitrate="+b.minVideoBW+"\r\n"),B=(B=B.replace(H[0],K)).replace(/42001f/g,"42e01f"),f.default.debug("["+u.clientId+"]Set Video Bitrate - min:"+b.minVideoBW+" max:"+b.maxVideoBW)}return(H=B.match(/m=audio.*\r\n/))&&b.maxAudioBW&&(B=B.replace(H[0],K=H[0]+"b=AS:"+b.maxAudioBW+"\r\n")),B};u.processSignalingMessage=function(B){var H,K=JSON.parse(B);u.incomingMessage=K,"new"===u.state?"OFFER"===K.messageType?(H={sdp:K.sdp,type:"offer"},u.peerConnection.setRemoteDescription(new RTCSessionDescription(H)).catch(function(ve){}),u.state="offer-received",u.markActionNeeded()):u.error("Illegal message for this state: "+K.messageType+" in state "+u.state):"offer-sent"===u.state?"ANSWER"===K.messageType?((H={sdp:K.sdp,type:"answer"}).sdp=ee(H.sdp),H.sdp=re(H.sdp),b.screen&&"detail"===b.optimizationMode&&(f.default.debug("[".concat(u.client,"] remove screen share abs ext")),H.sdp=H.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),b.isSubscriber&&(H.sdp=H.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),u.peerConnection.setRemoteDescription(new RTCSessionDescription(H)).catch(function(ve){}),u.state="established"):"pr-answer"===K.messageType?(H={sdp:K.sdp,type:"pr-answer"},u.peerConnection.setRemoteDescription(new RTCSessionDescription(H)).catch(function(ve){})):u.error("offer"===K.messageType?"Not written yet":"Illegal message for this state: "+K.messageType+" in state "+u.state):"established"===u.state&&("OFFER"===K.messageType?(H={sdp:K.sdp,type:"offer"},u.peerConnection.setRemoteDescription(new RTCSessionDescription(H)).catch(function(ve){}),u.state="offer-received",u.markActionNeeded()):"ANSWER"===K.messageType?((H={sdp:K.sdp,type:"answer"}).sdp=ee(H.sdp),H.sdp=re(H.sdp),u.peerConnection.setRemoteDescription(new RTCSessionDescription(H)).catch(function(ve){})):u.error("Illegal message for this state: "+K.messageType+" in state "+u.state))},u.setRtpSenderParameters=(B=R()(N.a.mark(function H(K){var ve,le,ge;return N.a.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(ve=u.peerConnection.getSenders(),console.log("senders",ve),le=ve.find(function(Oe){return"video"===Oe.track.kind})){Ce.next=5;break}return Ce.abrupt("return");case 5:return(ge=le.getParameters()).degradationPreference=K,Ce.prev=7,f.default.debug("[".concat(u.clientId,"] setParameters"),ge),Ce.next=11,le.setParameters(ge);case 11:Ce.next=16;break;case 13:Ce.prev=13,Ce.t0=Ce.catch(7),f.default.debug("[".concat(u.clientId,"] setParameters failed, ignore"));case 16:case"end":return Ce.stop()}},H,null,[[7,13]])})),function(H){return B.apply(this,arguments)});var fe=0,se=0;return u.getVideoRelatedStats=function(B){u.getStats(function(H){H.forEach(function(K){if(u.isSubscriber){if("video"===K.mediaType&&K.id&&~K.id.indexOf("recv")){if(D.isChromeKernel()&&+D.getBrowserVersion()>=76){var le=+K.googFramesDecoded-se;u._setStat(p,"googFrameRateReceived",+K.googFramesReceived-fe),u._setStat(p,"googFrameRateDecoded",le),u._setStat(p,"googFrameRateOutput",le),fe=+K.googFramesReceived,se=+K.googFramesDecoded}B&&B({mediaType:"video",peerId:u.uid,isVideoMute:u.isVideoMute,frameRateReceived:K.googFrameRateReceived,frameRateDecoded:K.googFrameRateDecoded,bytesReceived:K.bytesReceived,packetsReceived:K.packetsReceived,packetsLost:K.packetsLost})}}else"video"===K.mediaType&&K.id&&~K.id.indexOf("send")&&B&&B({mediaType:"video",isVideoMute:u.isVideoMute,frameRateInput:K.googFrameRateInput,frameRateSent:K.googFrameRateSent,googRtt:K.googRtt})})})},u.getAudioRelatedStats=function(B){u.getStats(function(H){H.forEach(function(K){u.isSubscriber&&"audio"===K.mediaType&&K.id&&~K.id.indexOf("recv")&&B&&B({mediaType:"audio",peerId:u.uid,isAudioMute:u.isAudioMute,frameDropped:parseInt(K.googDecodingPLC)+parseInt(K.googDecodingPLCCNG)+"",frameReceived:K.googDecodingCTN,googJitterReceived:K.googJitterReceived,bytesReceived:K.bytesReceived,packetsReceived:K.packetsReceived,packetsLost:K.packetsLost})})})},u.getStatsRate=function(B){u.getStats(function(H){B(H)})},u.getStats=function(B,H){H=(H=H||500)>500?500:H,u.lastTimeGetStats&&Date.now()-u.lastTimeGetStats<H?B&&B(u.filterStatsCache,u.originStatsCache):(u.lastTimeGetStats=Date.now(),this._getStats(function(K,ve){u.filterStatsCache=K,u.originStatsCache=ve,B&&B(K,ve)}))},u._setStat=function(B,H,K){B.hasOwnProperty(H)&&(null!=K&&K!==1/0&&K==K||(K=0),B[H]=K+"")},u._processGetStatsAfterChrome76=function(B){var H=this;u.lastStats||(u.lastStats=new Map),u.peerConnection.getStats().then(function(K){var ve,le=[],ge=[],Ce=new Map,Oe=new Date,ke=function(b){if("undefined"==typeof Symbol||null==b[Symbol.iterator]){if(Array.isArray(b)||(b=function(S,L){if(S){if("string"==typeof S)return U(S,L);var ee=Object.prototype.toString.call(S).slice(8,-1);if("Object"===ee&&S.constructor&&(ee=S.constructor.name),"Map"===ee||"Set"===ee)return Array.from(ee);if("Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return U(S,L)}}(b))){var u=0,W=function(){};return{s:W,n:function(){return u>=b.length?{done:!0}:{done:!1,value:b[u++]}},e:function(S){throw S},f:W}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var C,l,$=!0,p=!1;return{s:function(){C=b[Symbol.iterator]()},n:function(){var S=C.next();return $=S.done,S},e:function(S){p=!0,l=S},f:function(){try{$||null==C.return||C.return()}finally{if(p)throw l}}}}(K.values());try{for(ke.s();!(ve=ke.n()).done;){var De=ve.value;"codec"!=De.type?"candidate-pair"!=De.type?("inbound-rtp"===De.type&&"video"===De.mediaType&&Ce.set("inbound-video",De),"inbound-rtp"===De.type&&"audio"===De.mediaType&&Ce.set("inbound-audio",De),"outbound-rtp"===De.type&&"audio"===De.mediaType&&Ce.set("outbound-audio",De),"outbound-rtp"===De.type&&"video"===De.mediaType&&Ce.set("outbound-video",De),"track"===De.type&&"video"===De.kind&&De.remoteSource&&Ce.set("remote-video-track",De),"track"===De.type&&"audio"===De.kind&&De.remoteSource&&Ce.set("remote-audio-track",De),"remote-inbound-rtp"===De.type&&"video"===De.mediaType&&Ce.set("remote-inbound-video",De),"remote-inbound-rtp"===De.type&&"audio"===De.mediaType&&Ce.set("remote-inbound-audio",De),"track"!==De.type||"video"!==De.kind||De.remoteSource||Ce.set("local-video-track",De),"track"!==De.type||"audio"!==De.kind||De.remoteSource||Ce.set("local-audio-track",De),"media-source"===De.type&&"video"===De.kind&&Ce.set("media-source-video",De),"media-source"===De.type&&"audio"===De.kind&&Ce.set("media-source-audio",De)):ge.push(De):le.push(De)}}catch(ce){ke.e(ce)}finally{ke.f()}Ce.set("codec",le),Ce.set("candidatePairs",ge),Ce.set("timestamp",+Oe);var Re=null,Ue=null;if(p.timestamp=Oe,$.timestamp=Oe,C.timestamp=Oe,C.timestamp=Oe,S.timestamp=Oe,H.isSubscriber)(Re=Ce.get("inbound-video"))&&(u._setStat(p,"id","inbound_video_ssrc_recv"),u._setStat(p,"mediaType",Re.mediaType),u._setStat(p,"packetsLost",Re.packetsLost),u._setStat(p,"googDecodeMs",null),u._setStat(p,"googMaxDecodeMs",null),u._setStat(p,"googRenderDelayMs",null),u._setStat(p,"googMinPlayoutDelayMs",null),u._setStat(p,"googNacksSent",Re.nackCount),u._setStat(p,"googPlisSent",Re.pliCount),u._setStat(p,"googFirsSent",Re.firCount),u._setStat(p,"bytesReceived",Re.bytesReceived),u._setStat(p,"packetsReceived",Re.packetsReceived)),(Re=Ce.get("inbound-audio"))&&(u._setStat($,"id","inbound_audio_ssrc_recv"),u._setStat($,"mediaType",Re.mediaType),u._setStat($,"bytesReceived",Re.bytesReceived),u._setStat($,"packetsLost",Re.packetsLost),u._setStat($,"packetsReceived",Re.packetsReceived),u._setStat($,"googAccelerateRate",Re.removedSamplesForAcceleration),u._setStat($,"googCurrentDelayMs",Re.jitterBufferDelay),u._setStat($,"googDecodingCNG",null),u._setStat($,"googDecodingCTN",null),u._setStat($,"googDecodingCTSG",null),u._setStat($,"googDecodingNormal",null),u._setStat($,"googDecodingPLC",null),u._setStat($,"googDecodingPLCCNG",null),u._setStat($,"googJitterReceived",Re.jitter),u._setStat($,"googPreferredJitterBufferMs",null),u._setStat($,"googSecondaryDecodedRate",null)),(Re=Ce.get("remote-video-track"))&&(u._setStat(p,"googTargetDelayMs",Re.jitterBufferDelay),u._setStat(p,"googFrameWidthReceived",Re.frameWidth),u._setStat(p,"googFrameHeightReceived",Re.frameHeight),u._setStat(p,"googJitterBufferMs",Re.jitterBufferDelay/Re.jitterBufferEmittedCount*1e3),u._setStat(p,"googCurrentDelayMs",Re.jitterBufferDelay),u._setStat(p,"googFramesDecoded",Re.framesDecoded),u._setStat(p,"googFramesReceived",Re.framesReceived)),(Re=Ce.get("remote-audio-track"))&&(u._setStat($,"audioOutputLevel",32767*Re.audioLevel),u._setStat($,"googJitterBufferMs",Re.jitterBufferDelay/Re.jitterBufferEmittedCount*1e3),u._setStat($,"googExpandRate",Re.concealedSamples),u._setStat($,"googPreemptiveExpandRate",Re.insertedSamplesForDeceleration),u._setStat($,"googSpeechExpandRate",Re.silentConcealedSamples));else{var h=u.lastStats.get("timestamp"),pe=u.lastStats.get("outbound-video");if((Re=Ce.get("outbound-audio"))&&(u._setStat(C,"id","outbound_audio_ssrc_send"),u._setStat(C,"mediaType",Re.mediaType),u._setStat(C,"aecDivergentFilterFraction",null),u._setStat(C,"bytesSent",Re.bytesSent),u._setStat(C,"packetsSent",Re.packetsSent),Ue=Re.transportId),Re=Ce.get("outbound-video")){if(u._setStat(l,"id","outbound_video_ssrc_send"),u._setStat(l,"mediaType",Re.mediaType),u._setStat(l,"bytesSent",Re.bytesSent),u._setStat(l,"packetsSent",Re.packetsSent),u._setStat(l,"googAdaptationChanges",Re.qualityLimitationDurations),u._setStat(l,"googAvgEncodeMs",null),u._setStat(l,"googEncodeUsagePercent",null),Ue=Re.transportId,Re.totalEncodedBytesTarget&&pe&&pe.totalEncodedBytesTarget){var F=(Re.totalEncodedBytesTarget-pe.totalEncodedBytesTarget)/(+new Date-h);u._setStat(S,"googTargetEncBitrate",Math.floor(8*F*1e3))}if(Re.retransmittedBytesSent&&pe&&pe.retransmittedBytesSent){var Ne=(Re.retransmittedBytesSent-pe.retransmittedBytesSent)/(+new Date-h);u._setStat(S,"googRetransmitBitrate",Math.floor(8*Ne*1e3))}if(Re.bytesSent&&pe&&pe.bytesSent){var Ze=(Re.bytesSent-pe.bytesSent)/(+new Date-h);u._setStat(S,"googTransmitBitrate",Math.floor(8*Ze*1e3)),u._setStat(S,"googActualEncBitrate",Math.floor(8*Ze*1e3))}if(Re.totalPacketSendDelay&&pe&&pe.totalPacketSendDelay){var Ge=(Re.totalPacketSendDelay-pe.totalPacketSendDelay)/(+new Date-h);u._setStat(S,"googBucketDelay",Math.floor(1e3*Ge))}}if((Re=Ce.get("remote-inbound-video"))&&(u._setStat(l,"packetsLost",Re.packetsLost),u._setStat(l,"googRtt",Re.roundTripTime)),(Re=Ce.get("local-video-track"))&&(u._setStat(l,"googFrameHeightSent",Re.frameHeight),u._setStat(l,"googFrameWidthSent",Re.frameWidth),void 0!==Re.framesPerSecond&&u._setStat(l,"googFrameRateSent",Re.framesPerSecond)),(Re=Ce.get("local-audio-track"))&&(u._setStat(C,"googEchoCancellationReturnLoss",Re.echoReturnLoss),u._setStat(C,"googEchoCancellationReturnLossEnhancement",Re.echoReturnLossEnhancement)),(Re=Ce.get("media-source-video"))&&(u._setStat(l,"googFrameHeightInput",Re.height),u._setStat(l,"googFrameWidthInput",Re.width),u._setStat(l,"googFrameRateInput",Re.framesPerSecond)),(Re=Ce.get("media-source-audio"))&&u._setStat(C,"audioInputLevel",32767*Re.totalAudioEnergy),(Re=Ce.get("inbound-video"))&&(u._setStat(l,"googFirsReceived",Re.firCount),u._setStat(l,"googNacksReceived",Re.nackCount),u._setStat(l,"googPlisReceived",Re.pliCount)),Ue)Ce.get("candidatePairs").map(function(ce){Ue==ce.transportId&&u._setStat(S,"googAvailableSendBandwidth",ce.availableOutgoingBitrate)});else{var qe=Ce.get("candidatePairs")[0];qe&&u._setStat(S,"googAvailableSendBandwidth",qe.availableOutgoingBitrate)}}u.lastStats=Ce;var Je=[O()({},l),O()({},C),O()({},p),O()({},$),O()({},S)];Je.push({id:"time",startTime:u.connectedTime,timestamp:new Date}),B(Je)})},u._processGetStatsBeforeChrome76=function(B){u.peerConnection.getStats(function(H){var K=[],ve=[],le=null;Object.keys(H).forEach(function(ge){var Ce=H[ge];Ce&&(ve.push(Ce),le=Ce.timestamp,"VideoBwe"===Ce.type?S=Ce:Ce.id.indexOf("_send")>-1&&"video"===Ce.mediaType?l=Ce:Ce.id.indexOf("_send")>-1&&"audio"===Ce.mediaType?C=Ce:Ce.id.indexOf("_recv")>-1&&"video"===Ce.mediaType?p=Ce:Ce.id.indexOf("_recv")>-1&&"audio"===Ce.mediaType&&($=Ce))}),(K=[O()({},l),O()({},C),O()({},p),O()({},$),O()({},S)]).push({id:"time",startTime:u.connectedTime,timestamp:le||new Date}),B(K,ve)})},u._getStats=function(B){Object(v.getParameter)("CHROME_NEW_STATS")&&D.isChromeKernel()&&+D.getBrowserVersion()>=76?u._processGetStatsAfterChrome76(B):u._processGetStatsBeforeChrome76(B)},u.addTrack=function(B,H){if("unified-plan"===Object(v.getParameter)("PLAN")){var K="audio"===B.kind?u._audioSender:u._videoSender;if(K){var ve=u.peerConnection.getTransceivers().find(function(le){return le.sender===K});K.replaceTrack(B).then(function(){ve.direction="sendrecv",u.renegotiate()})}else K=u.peerConnection.addTrack(B,H),"audio"===B.kind?u._audioSender=K:u._videoSender=K}else u.peerConnection.addTrack(B,H)},u.removeTrack=function(B,H){if("unified-plan"===Object(v.getParameter)("PLAN")){var K=u.peerConnection.getTransceivers().find(function(ve){return ve.sender.track===B});K&&(K.direction="inactive",u.peerConnection.removeTrack(K.sender))}else u.peerConnection.removeTrack(u.peerConnection.getSenders().find(function(ve){return ve.track==B}))},u.addStream=function(B){"unified-plan"===Object(v.getParameter)("PLAN")?B.getTracks().forEach(function(H){var K=u.peerConnection.addTrack(H,B);"audio"===H.kind?u._audioSender=K:u._videoSender=K}):(u.peerConnection.addStream(B),u.markActionNeeded())},u.removeStream=function(){u.markActionNeeded()},u.close=function(){u.state="closed",u.peerConnection.close()},u.markActionNeeded=function(){u.actionNeeded=!0,u.doLater(function(){u.onstablestate()})},u.doLater=function(B){window.setTimeout(B,1)},u.onstablestate=function(){if(u.actionNeeded){if("new"===u.state||"established"===u.state)u.peerConnection.createOffer(u.mediaConstraints).then(function(H){return H?H.sdp!==u.prevOffer?(b.isSubscriber&&(H.sdp=H.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),u.peerConnection.setLocalDescription(H),u.state="preparing-offer",void u.markActionNeeded()):void f.default.debug("["+u.clientId+"]Not sending a new offer"):(f.default.debug("["+u.clientId+"]sessionDescription is null"),void u.onsignalingmessage(null))}).catch(function(H){f.default.debug("["+u.clientId+"]peer connection create offer failed ",H)});else if("preparing-offer"===u.state){if(u.moreIceComing)return;u.prevOffer=u.peerConnection.localDescription.sdp,u.offerCandidates=u.prevOffer.match(/a=candidate.+\r\n/g)||[],u.offerCandidates.length||(b.isCloudProxy3&&b.onNoIceCandidate&&b.onNoIceCandidate(),f.default.warning("[".concat(u.clientId,"]No Ice Candidate generated")),Object(v.getParameter)("SHIM_CANDIDATE")?(f.default.debug("Shimming fake candidate"),u.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):f.default.error("[".concat(u.clientId,"]None Ice Candidate not allowed"))),u.prevOffer=u.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),u.sendMessage("OFFER",u.prevOffer),u.state="offer-sent"}else if("offer-received"===u.state)u.peerConnection.createAnswer(function(H){if(u.peerConnection.setLocalDescription(H),u.state="offer-received-preparing-answer",u.iceStarted)u.markActionNeeded();else{var K=new Date;f.default.debug("["+u.clientId+"]"+K.getTime()+": Starting ICE in responder"),u.iceStarted=!0}},function(H){f.default.debug("["+u.clientId+"]peer connection create answer failed ",H)},u.mediaConstraints);else if("offer-received-preparing-answer"===u.state){if(u.moreIceComing)return;u.sendMessage("ANSWER",u.peerConnection.localDescription.sdp),u.state="established"}else f.default.debug("[".concat(u.clientId,"] Dazed and confused in state ").concat(u.state,", stopping here'"));u.actionNeeded=!1}},u.sendMessage=function(B,H){var K={};K.messageType=B,K.sdp=H,"OFFER"===B?(K.offererSessionId=u.sessionId,K.answererSessionId=u.otherSessionId,K.seq=u.sequenceNumber+=1,K.tiebreaker=Math.floor(429496723*Math.random()+1)):(K.offererSessionId=u.incomingMessage.offererSessionId,K.answererSessionId=u.sessionId,K.seq=u.incomingMessage.seq),u.onsignalingmessage(JSON.stringify(K))},u._getSender=function(B){if(u.peerConnection&&u.peerConnection.getSenders){var H=u.peerConnection.getSenders().find(function(K){return K.track.kind==B});if(H)return H}return null},u.hasSender=function(B){return!!u._getSender(B)},u.replaceTrack=function(B,H,K){var ve=u._getSender(B.kind);if(!ve)return K("NO_SENDER_FOUND");try{ve.replaceTrack(B)}catch(le){return K&&K(le)}setTimeout(function(){return H&&H()},50)},u.error=function(B){throw"Error in RoapOnJsep: "+B},u.sessionId=u.roapSessionId+=1,u.sequenceNumber=0,u.actionNeeded=!1,u.iceStarted=!1,u.moreIceComing=!0,u.iceCandidateCount=0,u.onsignalingmessage=b.callback,u.peerConnection.ontrack=function(B){u.onaddstream&&(u.onaddstream(B,"ontrack"),u.peerConnection.onaddstream=null)},u.peerConnection.onaddstream=function(B){u.onaddstream&&(u.onaddstream(B,"onaddstream"),u.peerConnection.ontrack=null)},u.peerConnection.onremovestream=function(B){u.onremovestream&&u.onremovestream(B)},u.peerConnection.oniceconnectionstatechange=function(B){console.log(B),console.log(u.peerConnection.iceConnectionState),"connected"===B.currentTarget.iceConnectionState&&(u.connectedTime=new Date),u.oniceconnectionstatechange&&u.oniceconnectionstatechange(B.currentTarget.iceConnectionState)},u.renegotiate=function(){void 0!==u.prevOffer&&u.peerConnection.createOffer().then(function(B){return"unified-plan"!==Object(v.getParameter)("PLAN")&&(B.sdp=B.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n")),B.sdp=ee(B.sdp),B.sdp=re(B.sdp),u.peerConnection.setLocalDescription(B)}).then(function(){u.onnegotiationneeded&&u.onnegotiationneeded(u.peerConnection.localDescription.sdp)}).catch(function(B){console.log("createOffer error: ",B)})},u.peerConnection.onnegotiationneeded=u.renegotiate,u.onaddstream=null,u.onremovestream=null,u.onnegotiationneeded=null,u.state="new",u.markActionNeeded(),u}(b)).browser="chrome-stable",u},z=function(b,u,W){var C={};C.config=b,C.streamId=b.streamId,delete b.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var l=0,$=1,p=!1,S=null,L=function(se){if(l++,S)if(S===se)f.default.debug("Using Video Source/ Audio Source");else{var B=S.getVideoTracks()[0],H=S.getAudioTracks()[0],K=se.getVideoTracks()[0],ve=se.getAudioTracks()[0];K&&(B&&S.removeTrack(B),S.addTrack(K)),ve&&(H&&S.removeTrack(H),S.addTrack(ve))}else S=se;l!==$||p||(p=!0,setTimeout(function(){u(S)},0))},ee=function(se){f.default.error("Failed to GetUserMedia",se.name,se.code,se.message,se),l++,p||(p=!0,setTimeout(function(){W&&W(se)},0))},re=function(){var se={video:b.video,audio:b.audio};if(f.default.debug("GetUserMedia",JSON.stringify(se)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(se).then(L).catch(ee);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(b,L,ee);else{var B={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};f.default.error("["+C.streamId+"]"+B.message),W&&W(B)}};if((b.videoSource||b.audioSource)&&(S=new MediaStream,b.videoSource&&S.addTrack(b.videoSource),b.audioSource&&S.addTrack(b.audioSource)),b.video||b.audio||b.screen||b.screenAudio){if(!b.screen&&b.screenAudio)return W&&W({code:"Set screen to true before sharing the audio"});if(b.screen){if(oe.a.isElectron())return b.screen.sourceId?oe.a.getScreenStream(b.screen.sourceId,b.screen,function(se,B){se?ee(se):(b.audio&&($++,re()),L(B))}):oe.a.shareScreen(b.screen,function(se,B){se?ee(se):(b.audio&&($++,re()),L(B))});if(D.isFireFox()){if(f.default.debug("["+C.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(b.screen.mediaSource))return W&&W({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:b.screen},function(se){b.audio&&($++,re()),L(se)},ee)}else if(D.isChromeKernel()&&b.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void W({code:"This browser does not support screen sharing"});f.default.debug("["+C.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(b.screen.extensionId,{getStream:!0},function(se){void 0===se?(f.default.error("["+C.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),ee({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(b.screen.mandatory.chromeMediaSourceId=se.streamId,navigator.getMedia({video:b.screen},function(B){b.audio&&($++,re()),L(B)},ee))})}catch(se){return f.default.debug("["+C.streamId+"]AgoraRTC screensharing plugin is not accessible"),void W({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var fe={};return fe.video="number"==typeof b.screen.width&&"number"==typeof b.screen.height?{width:{ideal:b.screen.width},height:{ideal:b.screen.height}}:{width:b.screen.width,height:b.screen.height},fe.video.frameRate=b.screen.frameRate&&b.screen.frameRate.min?{ideal:b.screen.frameRate.max,max:b.screen.frameRate.max}:b.screen.frameRate,b.screenAudio&&(fe.audio=b.screenAudio),f.default.debug("use getDisplayMedia, constraints:",fe),window.navigator.mediaDevices.getDisplayMedia(fe).then(function(se){!b.screenAudio&&b.audio&&($++,re()),L(se)}).catch(ee)}f.default.error("["+C.streamId+"]This browser does not support screenSharing"),W({code:"This browser does not support screen sharing"})}}else re()}else L(S)}},function(ue,ie,V){"use strict";var D=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(ie,"__esModule",{value:!0});var T,w=D(V(0)),O=function(){function T(N,_,R){void 0===_&&(_=""),this.name="AgoraRTCException",this.code=N,this.message="AgoraRTCError "+this.code+": "+_,this.data=R}return T.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},T.prototype.throw=function(){throw w.default.error(this.toString()),this},T}();ie.AgoraRTCError=O,(T=ie.AgoraRTCErrorCode||(ie.AgoraRTCErrorCode={})).UNEXPECTED_ERROR="UNEXPECTED_ERROR",T.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",T.TIMEOUT="TIMEOUT",T.INVALID_PARAMS="INVALID_PARAMS",T.NOT_SUPPORT="NOT_SUPPORT",T.INVALID_OPERATION="INVALID_OPERATION",T.OPERATION_ABORT="OPERATION_ABORT",T.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",T.NETWORK_ERROR="NETWORK_ERROR",T.NETWORK_TIMEOUT="NETWORK_TIMEOUT",T.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",T.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",T.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",T.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",T.ELECTRON_IS_NULL="ELECTRON_IS_NULL",T.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",T.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",T.STREAM_IS_CLOSED="STREAM_IS_CLOSED",T.ABORT_OTHER_INIT="ABORT_OTHER_INIT",T.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",T.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",T.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",T.PERMISSION_DENIED="PERMISSION_DENIED",T.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",T.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",T.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",T.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",T.TRACK_IS_DISABLED="TRACK_IS_DISABLED",T.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",T.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",T.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",T.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",T.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",T.UID_CONFLICT="UID_CONFLICT",T.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",T.INVALID_TRACK="INVALID_TRACK",T.SENDER_NOT_FOUND="SENDER_NOT_FOUND",T.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",T.SET_ANSWER_FAILED="SET_ANSWER_FAILED",T.ICE_FAILED="ICE_FAILED",T.PC_CLOSED="PC_CLOSED",T.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",T.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",T.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",T.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",T.INVALID_REMOTE_USER="INVALID_REMOTE_USER",T.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",T.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",T.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",T.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",T.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",T.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",T.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",T.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",T.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",T.WS_ABORT="WS_ABORT",T.WS_DISCONNECT="WS_DISCONNECT",T.WS_ERR="WS_ERR",T.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",T.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",T.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",T.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",T.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",T.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",T.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",T.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",T.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",T.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",T.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",T.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",T.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",T.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",T.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",T.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",T.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",T.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",T.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"},function(ue,ie,V){"use strict";V.d(ie,"a",function(){return _});var D=V(0),w=window.AudioContext||window.webkitAudioContext,O=V(2),T=O.getParameter,N=O.setParameter,_=function(){return T("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),N("AUDIO_CONTEXT",function(){if(w){var R=new w;return window.ctx=R,new Promise(function(f){document.body?f():window.addEventListener("load",f)}).then(function(){var f=function m(){"suspended"==R.state?(D.default.debug("AudioContext is suspended, auto resume"),R.resume().then(function(){D.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",m,!0),document.body.removeEventListener("mousedown",m,!0)})):(D.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",m,!0),document.body.removeEventListener("mousedown",m,!0))};D.default.debug(">>> add event listener >>>>"),document.body.addEventListener("touchend",f,!0),document.body.addEventListener("mousedown",f,!0)}),R}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),T("AUDIO_CONTEXT")};_()},function(ue,ie,V){"use strict";var D=V(1),w=null,O=function(){try{w=window.require("electron")}catch(_){}return w},T=function(_){var R=D.report.reportApiInvoke(null,{callback:_,name:"getScreenSources",options:arguments,tag:"tracer"}),f=O();if(!f)return R&&R("electron is null");try{var m=f.desktopCapturer.getSources({types:["window","screen"]})}catch(v){console.log(v)}m instanceof Promise?(console.log("electron.desktopCapturer.getSources return type is Promise"),m.then(function(v){return R&&R(null,v)}).catch(function(v){return R&&R(v)})):m=f.desktopCapturer.getSources({types:["window","screen"]},function(v,x){console.log("electron.desktopCapturer.getSources return type is callback"),R&&R(null,x)})},N=function(_,R,f){R={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:_,maxHeight:R.height,maxWidth:R.width,maxFrameRate:R.frameRate&&R.frameRate.max,minFrameRate:R.frameRate&&R.frameRate.min}}},navigator.webkitGetUserMedia(R,function(v){f&&f(null,v)},function(v){f&&f(v)})};ie.a={isElectron:function(){return!!O()},getElectronInstance:O,getScreenSources:T,getScreenStream:N,shareScreen:function(_,R){T(function(f,m){if(f)return R&&R(f);!function(v,x){var U=document.createElement("div");U.innerText="share screen",U.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var I=document.createElement("div");I.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var E=document.createElement("div");E.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",E.setAttribute("style","height: 12%;");var j=document.createElement("div");j.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var P=document.createElement("div");P.setAttribute("style","text-align: right; padding: 16px 0;");var G=document.createElement("button");G.innerHTML="cancel",G.setAttribute("style","width: 85px;"),G.onclick=function(){document.body.removeChild(M),x&&x("NotAllowedError")},P.appendChild(G),I.appendChild(E),I.appendChild(j),I.appendChild(P);var M=document.createElement("div");M.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),M.appendChild(U),M.appendChild(I),document.body.appendChild(M),v.map(function(Y){if(Y.id){var oe=document.createElement("div");oe.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var Q=Y.thumbnail;Q.getSize().width>1920&&(Q=Q.resize({width:1920})),oe.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+Q.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+Y.name.replace(/[\u00A0-\u9999<>\&]/g,function(te){return"&#"+te.charCodeAt(0)+";"})+"</span>",oe.onclick=function(){document.body.removeChild(M),x&&x(null,Y.id)},j.appendChild(oe)}})}(m,function(v,x){if(v)return R&&R(v);N(x,_,R)})})}}},function(ue,ie,V){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var w,D=V(3);(w=ie.LiveStreamingServiceMode||(ie.LiveStreamingServiceMode={})).TRANSCODE="mix_streaming",w.RAW="raw_streaming",w.INJECT="inject_streaming",ie.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},ie.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},ie.isLiveStreamingTranscodingConfig=function(w){return D.isEmpty(w.width)||D.checkValidNumber(w.width,"config.width",0),D.isEmpty(w.height)||D.checkValidNumber(w.height,"config.height",0),D.isEmpty(w.videoBitrate)||D.checkValidNumber(w.videoBitrate,"config.videoBitrate",1,1e6),D.isEmpty(w.videoFramerate)||D.checkValidNumber(w.videoFramerate,"config.videoFramerate"),D.isEmpty(w.lowLatency)||D.checkValidBoolean(w.lowLatency,"config.lowLatency"),D.isEmpty(w.audioSampleRate)||D.checkValidEnum(w.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),D.isEmpty(w.audioBitrate)||D.checkValidNumber(w.audioBitrate,"config.audioBitrate",1,128),D.isEmpty(w.audioChannels)||D.checkValidEnum(w.audioChannels,"config.audioChannels",[1,2,3,4,5]),D.isEmpty(w.videoGop)||D.checkValidNumber(w.videoGop,"config.videoGop"),D.isEmpty(w.videoCodecProfile)||D.checkValidEnum(w.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),D.isEmpty(w.userCount)||D.checkValidNumber(w.userCount,"config.userCount",0,17),D.isEmpty(w.backgroundColor)||D.checkValidNumber(w.backgroundColor,"config.backgroundColor",0,16777215),w.transcodingUsers&&!D.isEmpty(w.transcodingUsers)&&(D.checkValidArray(w.transcodingUsers,"config.transcodingUsers"),w.transcodingUsers.forEach(function(O,T){D.checkValidUID(O.uid),D.isEmpty(O.x)||D.checkValidNumber(O.x,"transcodingUser["+T+"].x",0,1e4),D.isEmpty(O.y)||D.checkValidNumber(O.y,"transcodingUser["+T+"].y",0,1e4),D.isEmpty(O.width)||D.checkValidNumber(O.width,"transcodingUser["+T+"].width",0,1e4),D.isEmpty(O.height)||D.checkValidNumber(O.height,"transcodingUser["+T+"].height",0,1e4),D.isEmpty(O.zOrder)||D.checkValidNumber(O.zOrder-1,"transcodingUser["+T+"].zOrder",0,100),D.isEmpty(O.alpha)||D.checkValidFloatNumber(O.alpha,"transcodingUser["+T+"].alpha",0,1)})),w.images&&!D.isEmpty(w.images)&&(D.checkValidArray(w.images,"config.images"),w.images.forEach(function(O,T){D.checkValidString(O.url,"images["+T+"].url",1,1e3,!1),D.isEmpty(O.x)||D.checkValidNumber(O.x,"images["+T+"].x",0,1e4),D.isEmpty(O.y)||D.checkValidNumber(O.y,"images["+T+"].y",0,1e4),D.isEmpty(O.width)||D.checkValidNumber(O.width,"images["+T+"].width",0,1e4),D.isEmpty(O.height)||D.checkValidNumber(O.height,"images["+T+"].height",0,1e4),D.isEmpty(O.zOrder)||D.checkValidNumber(O.zOrder,"images["+T+"].zOrder",0,255),D.isEmpty(O.alpha)||D.checkValidFloatNumber(O.alpha,"images["+T+"].alpha",0,1)})),!0},ie.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},ie.isInjectStreamConfig=function(w){return D.isEmpty(w.audioVolume)||D.checkValidNumber(w.audioVolume,"config.audioVolume",0,1e3),D.isEmpty(w.audioBitrate)||D.checkValidNumber(w.audioBitrate,"config.audioBitrate",1,1e4),D.isEmpty(w.audioChannels)||D.checkValidEnum(w.audioChannels,"config.audioChannels",[1,2]),D.isEmpty(w.audioSampleRate)||D.checkValidEnum(w.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),D.isEmpty(w.width)||D.checkValidNumber(w.width,"config.width",0,1e4),D.isEmpty(w.height)||D.checkValidNumber(w.height,"config.height",0,1e4),D.isEmpty(w.videoBitrate)||D.checkValidNumber(w.videoBitrate,"config.videoBitrate",1,1e4),D.isEmpty(w.videoFramerate)||D.checkValidNumber(w.videoFramerate,"config.videoFramerate",1,1e4),D.isEmpty(w.videoGop)||D.checkValidNumber(w.videoGop,"config.videoGop",1,1e4),!0},ie.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(w){w.WARNING="@live_uap-warning",w.ERROR="@line_uap-error",w.PUBLISH_STREAM_STATUS="@live_uap-publish-status",w.INJECT_STREAM_STATUS="@live_uap-inject-status",w.WORKER_STATUS="@live_uap-worker-status",w.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(ie.LiveStreamingUapSignalEvents||(ie.LiveStreamingUapSignalEvents={})),function(w){w.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(ie.LiveStreamingInternalEvents||(ie.LiveStreamingInternalEvents={})),function(w){w[w.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",w[w.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",w[w.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",w[w.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",w[w.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",w[w.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",w[w.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",w[w.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",w[w.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",w[w.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",w[w.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",w[w.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",w[w.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",w[w.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",w[w.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",w[w.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",w[w.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",w[w.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE=505]="LIVE_STREAM_RESPONSE_INGNORE_MESSAGE",w[w.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",w[w.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",w[w.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",w[w.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(ie.LIVE_STREAM_ERROR_CODE||(ie.LIVE_STREAM_ERROR_CODE={})),function(w){w.CONNECTED="websocket:connected",w.RECONNECTING="websocket:reconnecting",w.WILL_RECONNECT="websocket:will_reconnect",w.CLOSED="websocket:closed",w.FAILED="websocket:failed",w.ON_MESSAGE="websocket:on_message",w.REQUEST_NEW_URLS="websocket:request_new_urls"}(ie.WebSocketManagerEvents||(ie.WebSocketManagerEvents={}))},function(ue,ie,V){var D=V(57),w=V(58);ue.exports=function(O,T,N){var _=T&&N||0;"string"==typeof O&&(T="binary"===O?new Array(16):null,O=null);var R=(O=O||{}).random||(O.rng||D)();if(R[6]=15&R[6]|64,R[8]=63&R[8]|128,T)for(var f=0;f<16;++f)T[_+f]=R[f];return T||w(R)}},function(ue,ie,V){var D;ue.exports=(D=V(73),function(w){var O=D,T=O.lib,N=T.WordArray,_=T.Hasher,R=O.algo,f=[],m=[];!function(){function U(P){for(var G=w.sqrt(P),M=2;M<=G;M++)if(!(P%M))return!1;return!0}function I(P){return 4294967296*(P-(0|P))|0}for(var E=2,j=0;j<64;)U(E)&&(j<8&&(f[j]=I(w.pow(E,.5))),m[j]=I(w.pow(E,1/3)),j++),E++}();var v=[],x=R.SHA256=_.extend({_doReset:function(){this._hash=new N.init(f.slice(0))},_doProcessBlock:function(U,I){for(var E=this._hash.words,j=E[0],P=E[1],G=E[2],M=E[3],Y=E[4],oe=E[5],Q=E[6],te=E[7],z=0;z<64;z++){if(z<16)v[z]=0|U[I+z];else{var b=v[z-15],W=v[z-2];v[z]=((b<<25|b>>>7)^(b<<14|b>>>18)^b>>>3)+v[z-7]+((W<<15|W>>>17)^(W<<13|W>>>19)^W>>>10)+v[z-16]}var l=j&P^j&G^P&G,p=te+((Y<<26|Y>>>6)^(Y<<21|Y>>>11)^(Y<<7|Y>>>25))+(Y&oe^~Y&Q)+m[z]+v[z];te=Q,Q=oe,oe=Y,Y=M+p|0,M=G,G=P,P=j,j=p+(((j<<30|j>>>2)^(j<<19|j>>>13)^(j<<10|j>>>22))+l)|0}E[0]=E[0]+j|0,E[1]=E[1]+P|0,E[2]=E[2]+G|0,E[3]=E[3]+M|0,E[4]=E[4]+Y|0,E[5]=E[5]+oe|0,E[6]=E[6]+Q|0,E[7]=E[7]+te|0},_doFinalize:function(){var U=this._data,I=U.words,E=8*this._nDataBytes,j=8*U.sigBytes;return I[j>>>5]|=128<<24-j%32,I[14+(j+64>>>9<<4)]=w.floor(E/4294967296),I[15+(j+64>>>9<<4)]=E,U.sigBytes=4*I.length,this._process(),this._hash},clone:function(){var U=_.clone.call(this);return U._hash=this._hash.clone(),U}});O.SHA256=_._createHelper(x),O.HmacSHA256=_._createHmacHelper(x)}(Math),D.SHA256)},function(ue,ie,V){"use strict";Object.defineProperty(ie,"__esModule",{value:!0}),ie.randomString=function(D){void 0===D&&(D=8);for(var w="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",O=w.length,T="",N=0;N<D;N++)T+=w.charAt(Math.floor(Math.random()*O));return T}},function(ue,ie,V){"use strict";var D=this&&this.__assign||function(){return(D=Object.assign||function(P){for(var G,M=1,Y=arguments.length;M<Y;M++)for(var oe in G=arguments[M])Object.prototype.hasOwnProperty.call(G,oe)&&(P[oe]=G[oe]);return P}).apply(this,arguments)},w=this&&this.__awaiter||function(P,G,M,Y){return new(M||(M=Promise))(function(oe,Q){function te(u){try{b(Y.next(u))}catch(W){Q(W)}}function z(u){try{b(Y.throw(u))}catch(W){Q(W)}}function b(u){var W;u.done?oe(u.value):(W=u.value,W instanceof M?W:new M(function(C){C(W)})).then(te,z)}b((Y=Y.apply(P,G||[])).next())})},O=this&&this.__generator||function(P,G){var M,Y,oe,Q,te={label:0,sent:function(){if(1&oe[0])throw oe[1];return oe[1]},trys:[],ops:[]};return Q={next:z(0),throw:z(1),return:z(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function z(b){return function(u){return function(W){if(M)throw new TypeError("Generator is already executing.");for(;te;)try{if(M=1,Y&&(oe=2&W[0]?Y.return:W[0]?Y.throw||((oe=Y.return)&&oe.call(Y),0):Y.next)&&!(oe=oe.call(Y,W[1])).done)return oe;switch(Y=0,oe&&(W=[2&W[0],oe.value]),W[0]){case 0:case 1:oe=W;break;case 4:return te.label++,{value:W[1],done:!1};case 5:te.label++,Y=W[1],W=[0];continue;case 7:W=te.ops.pop(),te.trys.pop();continue;default:if(!((oe=(oe=te.trys).length>0&&oe[oe.length-1])||6!==W[0]&&2!==W[0])){te=0;continue}if(3===W[0]&&(!oe||W[1]>oe[0]&&W[1]<oe[3])){te.label=W[1];break}if(6===W[0]&&te.label<oe[1]){te.label=oe[1],oe=W;break}if(oe&&te.label<oe[2]){te.label=oe[2],te.ops.push(W);break}oe[2]&&te.ops.pop(),te.trys.pop();continue}W=G.call(P,te)}catch(C){W=[6,C],Y=0}finally{M=oe=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([b,u])}}},T=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(ie,"__esModule",{value:!0});var N=V(2),_=T(V(37)),R=V(24),f=T(V(0)),m=V(1);function v(P){return new Promise(function(G){window.setTimeout(G,P)})}function x(P,G){return new Promise(function(M,Y){G.timeout=G.timeout||N.getParameter("HTTP_CONNECT_TIMEOUT"),G.responseType=G.responseType||"json",G.data&&(G.data=JSON.stringify(G.data)),G.headers=G.headers||{},G.headers["Content-Type"]="application/json",G.method="POST",G.url=P,_.default.request(G).then(function(oe){M(oe.data)}).catch(function(oe){_.default.isCancel(oe)?Y(new R.AgoraRTCError(R.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):Y("ECONNABORTED"===oe.code?new R.AgoraRTCError(R.AgoraRTCErrorCode.NETWORK_TIMEOUT,oe.message):oe.response?new R.AgoraRTCError(R.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,oe.response.status):new R.AgoraRTCError(R.AgoraRTCErrorCode.NETWORK_ERROR,oe.message))})})}function U(P,G,M,Y){var oe=this,Q=Object.assign({},ie.DEFAULT_RETRY_CONFIG,Y),te=Q.timeout,z=function(){return w(oe,void 0,void 0,function(){return O(this,function(W){switch(W.label){case 0:return[4,v(te)];case 1:return W.sent(),te*=Q.timeoutFactor,te=Math.min(Q.maxRetryTimeout,te),[2]}})})},b=!1,u=new Promise(function(W,C){return w(oe,void 0,void 0,function(){var l,$,p;return O(this,function(S){switch(S.label){case 0:G=G||function(){return!1},M=M||function(){return!0},l=0,S.label=1;case 1:if(!(l<Q.maxRetryCount))return[3,12];if(b)return[2,C(new R.AgoraRTCError(R.AgoraRTCErrorCode.OPERATION_ABORT))];S.label=2;case 2:return S.trys.push([2,7,,11]),[4,P()];case 3:return $=S.sent(),G($,l)?l+1===Q.maxRetryCount?[2,W($)]:[4,z()]:[3,5];case 4:return S.sent(),[3,6];case 5:return[2,W($)];case 6:return[3,11];case 7:return p=S.sent(),M(p,l)?l+1===Q.maxRetryCount?[2,C(p)]:[4,z()]:[3,9];case 8:return S.sent(),[3,10];case 9:return[2,C(p)];case 10:return[3,11];case 11:return l+=1,[3,1];case 12:return[2]}})})});return u.cancel=function(){return b=!0},u}function I(P,G){return{addressList:P.servers.map(function(M,Y){return"wss://"+M.address.replace(/\./g,"-")+".edge.agora.io:"+M.wss+"?serviceName="+encodeURIComponent(G)}),workerToken:P.workerToken,vid:P.vid}}ie.wait=v,ie.post=x,ie.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},ie.getRetryWaitTime=function(P,G){var M=G.timeout*Math.pow(G.timeoutFactor,P);return Math.min(G.maxRetryTimeout,M)},ie.retryable=U,ie.liveStreamingServerResponseToResult=I;var E=1;function j(P,G,M,Y,oe){var Q=this;void 0===oe&&(oe=ie.DEFAULT_RETRY_CONFIG),E+=1;var te,z,b={sid:M.sid,command:"convergeAllocateEdge",uid:"666",appId:M.appId,ts:Math.floor(Date.now()/1e3),seq:E,requestId:E,version:N.VERSION,cname:M.cname},u={service_name:G,json_body:JSON.stringify(b)},W=P[0];return U(function(){return w(Q,void 0,void 0,function(){var C,l,$,p,S;return O(this,function(L){switch(L.label){case 0:return te=Date.now(),[4,x(W,{data:u,cancelToken:Y,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(C=L.sent(),z=Date.now()-te,0!==C.code)throw $=new R.AgoraRTCError(R.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+C.code,{retry:!0}),f.default.error($.toString()),$;if(200!==(l=JSON.parse(C.json_body)).code)throw $=new R.AgoraRTCError(R.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+l.code+", reason: "+l.reason),f.default.error($.toString()),$;if(!l.servers||0===l.servers.length)throw $=new R.AgoraRTCError(R.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),f.default.error($.toString()),$;if(p=I(l,G),N.getParameter("LIVE_STREAMING_ADDRESS"))try{S=JSON.parse(N.getParameter("LIVE_STREAMING_ADDRESS")),p.addressList=S}catch(ee){p.addressList=[N.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,D(D({},p),{responseTime:z})]}})})},function(C,l){return m.report.requestApWorkerEvent(M.sid,{success:!0,sc:200,serviceName:G,responseDetail:JSON.stringify(C.addressList),firstSuccess:0===l,responseTime:z,serverIp:P[l%P.length]}),!1},function(C,l){return m.report.requestApWorkerEvent(M.sid,{success:!1,sc:C.data&&C.data.code||200,serviceName:G,responseTime:z,serverIp:P[l%P.length]}),!!(C.code!==R.AgoraRTCErrorCode.OPERATION_ABORT&&C.code!==R.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||C.data&&C.data.retry)&&(W=P[(l+1)%P.length],!0)},oe)}ie.requestLiveStreamingWorkerManager=j,ie.getLiveStreamingWorkerMangerResult=function(P,G,M){return w(this,void 0,void 0,function(){var Y,oe;return O(this,function(Q){switch(Q.label){case 0:Y=N.getParameter("UAP_AP").map(function(te){return G.proxyServer?"https://"+G.proxyServer+"/ap/?url="+te+"/api/v1?action=uap":"https://"+te+"/api/v1?action=uap"}),Q.label=1;case 1:return Q.trys.push([1,3,,4]),[4,j(Y,P,G,M)];case 2:return[2,Q.sent()];case 3:throw oe=Q.sent(),m.report.requestApWorkerEvent(G.sid,{success:!1,sc:oe.data&&oe.data.code||200,serviceName:P,responseTime:oe.data&&oe.data.responseTime}),oe;case 4:return[2]}})})}},function(ue,ie,V){var D=V(70),w=V(71),O=V(34),T=V(72);ue.exports=function(N){return D(N)||w(N)||O(N)||T()}},function(ue,ie){var V;V=function(){return this}();try{V=V||new Function("return this")()}catch(D){"object"==typeof window&&(V=window)}ue.exports=V},function(ue,ie,V){var D=V(35);ue.exports=function(w,O){if(w){if("string"==typeof w)return D(w,O);var T=Object.prototype.toString.call(w).slice(8,-1);return"Object"===T&&w.constructor&&(T=w.constructor.name),"Map"===T||"Set"===T?Array.from(T):"Arguments"===T||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T)?D(w,O):void 0}}},function(ue,ie){ue.exports=function(V,D){(null==D||D>V.length)&&(D=V.length);for(var w=0,O=new Array(D);w<D;w++)O[w]=V[w];return O}},function(ue,ie,V){"use strict";var D=this&&this.__spreadArrays||function(){for(var N=0,_=0,R=arguments.length;_<R;_++)N+=arguments[_].length;var f=Array(N),m=0;for(_=0;_<R;_++)for(var v=arguments[_],x=0,U=v.length;x<U;x++,m++)f[m]=v[x];return f};Object.defineProperty(ie,"__esModule",{value:!0});var w=V(24),O=function(){function N(){this._events={},this.addListener=this.on}return N.prototype.getListeners=function(_){return this._events[_]?this._events[_].map(function(R){return R.listener}):[]},N.prototype.on=function(_,R){this._events[_]||(this._events[_]=[]);var f=this._events[_];-1===this._indexOfListener(f,R)&&f.push({listener:R,once:!1})},N.prototype.once=function(_,R){this._events[_]||(this._events[_]=[]);var f=this._events[_];-1===this._indexOfListener(f,R)&&f.push({listener:R,once:!0})},N.prototype.off=function(_,R){if(this._events[_]){var f=this._events[_],m=this._indexOfListener(f,R);-1!==m&&f.splice(m,1),0===this._events[_].length&&delete this._events[_]}},N.prototype.removeAllListeners=function(_){_?delete this._events[_]:this._events={}},N.prototype.emit=function(_){for(var R=[],f=1;f<arguments.length;f++)R[f-1]=arguments[f];this._events[_]||(this._events[_]=[]);for(var m=this._events[_].map(function(U){return U}),v=0;v<m.length;v+=1){var x=m[v];x.once&&this.off(_,x.listener),x.listener.apply(this,R||[])}},N.prototype._indexOfListener=function(_,R){for(var f=_.length;f--;)if(_[f].listener===R)return f;return-1},N}();function T(N,_){for(var R=[],f=2;f<arguments.length;f++)R[f-2]=arguments[f];var m=null,v=null;if(N.emit.apply(N,D([_],R,[function(x){m=x},function(x){v=x}])),null!==v)throw v;if(null===m)throw new w.AgoraRTCError(w.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return m}ie.EventEmitter=O,ie.emitAsPromise=function(N,_){for(var R=[],f=2;f<arguments.length;f++)R[f-2]=arguments[f];return 0===N.getListeners(_).length?Promise.reject(new w.AgoraRTCError(w.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise(function(m,v){N.emit.apply(N,D([_],R,[m,v]))})},ie.emitAsInvokerNoResponse=function(N,_){for(var R=[],f=2;f<arguments.length;f++)R[f-2]=arguments[f];return 0===N.getListeners(_).length?null:T.apply(void 0,D([N,_],R))},ie.emitAsInvoker=T},function(ue,ie,V){ue.exports=V(78)},function(ue,ie,V){"use strict";ue.exports=function(D,w){return function(){for(var O=new Array(arguments.length),T=0;T<O.length;T++)O[T]=arguments[T];return D.apply(w,O)}}},function(ue,ie,V){"use strict";var D=V(18);function w(O){return encodeURIComponent(O).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}ue.exports=function(O,T,N){if(!T)return O;var _;if(N)_=N(T);else if(D.isURLSearchParams(T))_=T.toString();else{var R=[];D.forEach(T,function(m,v){null!=m&&(D.isArray(m)?v+="[]":m=[m],D.forEach(m,function(x){D.isDate(x)?x=x.toISOString():D.isObject(x)&&(x=JSON.stringify(x)),R.push(w(v)+"="+w(x))}))}),_=R.join("&")}if(_){var f=O.indexOf("#");-1!==f&&(O=O.slice(0,f)),O+=(-1===O.indexOf("?")?"?":"&")+_}return O}},function(ue,ie,V){"use strict";ue.exports=function(D){return!(!D||!D.__CANCEL__)}},function(ue,ie,V){"use strict";(function(D){var w=V(18),O=V(84),T={"Content-Type":"application/x-www-form-urlencoded"};function N(f,m){!w.isUndefined(f)&&w.isUndefined(f["Content-Type"])&&(f["Content-Type"]=m)}var _,R={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==D&&"[object process]"===Object.prototype.toString.call(D))&&(_=V(42)),_),transformRequest:[function(f,m){return O(m,"Accept"),O(m,"Content-Type"),w.isFormData(f)||w.isArrayBuffer(f)||w.isBuffer(f)||w.isStream(f)||w.isFile(f)||w.isBlob(f)?f:w.isArrayBufferView(f)?f.buffer:w.isURLSearchParams(f)?(N(m,"application/x-www-form-urlencoded;charset=utf-8"),f.toString()):w.isObject(f)?(N(m,"application/json;charset=utf-8"),JSON.stringify(f)):f}],transformResponse:[function(f){if("string"==typeof f)try{f=JSON.parse(f)}catch(m){}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(f){return f>=200&&f<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};w.forEach(["delete","get","head"],function(f){R.headers[f]={}}),w.forEach(["post","put","patch"],function(f){R.headers[f]=w.merge(T)}),ue.exports=R}).call(this,V(83))},function(ue,ie,V){"use strict";var D=V(18),w=V(85),O=V(39),T=V(87),N=V(90),_=V(91),R=V(43);ue.exports=function(f){return new Promise(function(m,v){var x=f.data,U=f.headers;D.isFormData(x)&&delete U["Content-Type"];var I=new XMLHttpRequest;f.auth&&(U.Authorization="Basic "+btoa((f.auth.username||"")+":"+(f.auth.password||"")));var P=T(f.baseURL,f.url);if(I.open(f.method.toUpperCase(),O(P,f.params,f.paramsSerializer),!0),I.timeout=f.timeout,I.onreadystatechange=function(){if(I&&4===I.readyState&&(0!==I.status||I.responseURL&&0===I.responseURL.indexOf("file:"))){var Y="getAllResponseHeaders"in I?N(I.getAllResponseHeaders()):null;w(m,v,{data:f.responseType&&"text"!==f.responseType?I.response:I.responseText,status:I.status,statusText:I.statusText,headers:Y,config:f,request:I}),I=null}},I.onabort=function(){I&&(v(R("Request aborted",f,"ECONNABORTED",I)),I=null)},I.onerror=function(){v(R("Network Error",f,null,I)),I=null},I.ontimeout=function(){var Y="timeout of "+f.timeout+"ms exceeded";f.timeoutErrorMessage&&(Y=f.timeoutErrorMessage),v(R(Y,f,"ECONNABORTED",I)),I=null},D.isStandardBrowserEnv()){var G=V(92),M=(f.withCredentials||_(P))&&f.xsrfCookieName?G.read(f.xsrfCookieName):void 0;M&&(U[f.xsrfHeaderName]=M)}if("setRequestHeader"in I&&D.forEach(U,function(Y,oe){void 0===x&&"content-type"===oe.toLowerCase()?delete U[oe]:I.setRequestHeader(oe,Y)}),D.isUndefined(f.withCredentials)||(I.withCredentials=!!f.withCredentials),f.responseType)try{I.responseType=f.responseType}catch(Y){if("json"!==f.responseType)throw Y}"function"==typeof f.onDownloadProgress&&I.addEventListener("progress",f.onDownloadProgress),"function"==typeof f.onUploadProgress&&I.upload&&I.upload.addEventListener("progress",f.onUploadProgress),f.cancelToken&&f.cancelToken.promise.then(function(Y){I&&(I.abort(),v(Y),I=null)}),void 0===x&&(x=null),I.send(x)})}},function(ue,ie,V){"use strict";var D=V(86);ue.exports=function(w,O,T,N,_){var R=new Error(w);return D(R,O,T,N,_)}},function(ue,ie,V){"use strict";var D=V(18);ue.exports=function(w,O){O=O||{};var T={},N=["url","method","params","data"],_=["headers","auth","proxy"],R=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];D.forEach(N,function(v){void 0!==O[v]&&(T[v]=O[v])}),D.forEach(_,function(v){D.isObject(O[v])?T[v]=D.deepMerge(w[v],O[v]):void 0!==O[v]?T[v]=O[v]:D.isObject(w[v])?T[v]=D.deepMerge(w[v]):void 0!==w[v]&&(T[v]=w[v])}),D.forEach(R,function(v){void 0!==O[v]?T[v]=O[v]:void 0!==w[v]&&(T[v]=w[v])});var f=N.concat(_).concat(R),m=Object.keys(O).filter(function(v){return-1===f.indexOf(v)});return D.forEach(m,function(v){void 0!==O[v]?T[v]=O[v]:void 0!==w[v]&&(T[v]=w[v])}),T}},function(ue,ie,V){"use strict";function D(w){this.message=w}D.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},D.prototype.__CANCEL__=!0,ue.exports=D},function(ue,ie){ue.exports=function(V,D,w){return D in V?Object.defineProperty(V,D,{value:w,enumerable:!0,configurable:!0,writable:!0}):V[D]=w,V}},function(ue,ie,V){"use strict";var D=this&&this.__awaiter||function(I,E,j,P){return new(j||(j=Promise))(function(G,M){function Y(te){try{Q(P.next(te))}catch(z){M(z)}}function oe(te){try{Q(P.throw(te))}catch(z){M(z)}}function Q(te){var z;te.done?G(te.value):(z=te.value,z instanceof j?z:new j(function(b){b(z)})).then(Y,oe)}Q((P=P.apply(I,E||[])).next())})},w=this&&this.__generator||function(I,E){var j,P,G,M,Y={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return M={next:oe(0),throw:oe(1),return:oe(2)},"function"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M;function oe(Q){return function(te){return function(z){if(j)throw new TypeError("Generator is already executing.");for(;Y;)try{if(j=1,P&&(G=2&z[0]?P.return:z[0]?P.throw||((G=P.return)&&G.call(P),0):P.next)&&!(G=G.call(P,z[1])).done)return G;switch(P=0,G&&(z=[2&z[0],G.value]),z[0]){case 0:case 1:G=z;break;case 4:return Y.label++,{value:z[1],done:!1};case 5:Y.label++,P=z[1],z=[0];continue;case 7:z=Y.ops.pop(),Y.trys.pop();continue;default:if(!((G=(G=Y.trys).length>0&&G[G.length-1])||6!==z[0]&&2!==z[0])){Y=0;continue}if(3===z[0]&&(!G||z[1]>G[0]&&z[1]<G[3])){Y.label=z[1];break}if(6===z[0]&&Y.label<G[1]){Y.label=G[1],G=z;break}if(G&&Y.label<G[2]){Y.label=G[2],Y.ops.push(z);break}G[2]&&Y.ops.pop(),Y.trys.pop();continue}z=E.call(I,Y)}catch(b){z=[6,b],P=0}finally{j=G=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([Q,te])}}},O=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}},T=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var E={};if(null!=I)for(var j in I)Object.hasOwnProperty.call(I,j)&&(E[j]=I[j]);return E.default=I,E};Object.defineProperty(ie,"__esModule",{value:!0});var N=O(V(59)),_=T(V(62)),R=T(V(63)),f=O(V(0)),m=V(2),v=N.default.Root.fromJSON(R),x=function(){function I(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return I.prototype.setProxy=function(E){this.proxyServer=E},I.prototype.sendReportList=function(E,j){var P=this,G=this._dataConvert("ProtoRaws",{vid:j,sendTs:Math.round(Date.now()/1e3),payloads:E.map(function(M){return{id:_[M.type],msg:P._dataConvert(M.type,M.data)}})});this.send(G)},I.prototype._dataConvert=function(E,j){var P;try{P=v.lookupType("protobuf."+E)}catch(M){f.default.error("[send-proto] invalid proto name "+E)}var G=P.create(j);return P.encode(G).finish()},I.prototype.send=function(E){0==this.state?this._send(E):this.requestArray.push(E)},I.prototype._send=function(E){return D(this,void 0,void 0,function(){return w(this,function(j){switch(j.label){case 0:return j.trys.push([0,2,,4]),this.state=1,[4,this.request(E)];case 1:return j.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return j.sent(),[4,U(this.retryBackoffCount++<2?200:1e4)];case 3:return j.sent(),this._send(E),[3,4];case 4:return[2]}})})},I.prototype.request=function(E){return D(this,void 0,void 0,function(){var j,P;return w(this,function(G){switch(G.label){case 0:j=this._getAddress(),P=this._getBackupAddress(),G.label=1;case 1:return G.trys.push([1,3,,5]),[4,this._request(j,E)];case 2:return G.sent(),[3,5];case 3:return G.sent(),[4,this._request(P,E)];case 4:return G.sent(),[3,5];case 5:return[2]}})})},I.prototype._request=function(E,j){return this._post(E,j)},I.prototype._post=function(E,j){var P=this;return new Promise(function(G,M){var Y=new XMLHttpRequest;Y.timeout=m.getParameter("HTTP_CONNECT_TIMEOUT"),Y.open("POST",E,!0),Y.setRequestHeader("Content-type","application/octet-stream"),P.proxyServer||(Y.setRequestHeader("Cache-Control","no-cache, no-store"),Y.setRequestHeader("Pragma","no-cache"),Y.setRequestHeader("Expires","0")),Y.onload=function(oe){G(Y.responseText)},Y.onerror=function(oe){M(oe)},Y.ontimeout=function(oe){M(oe)},Y.send(j)})},I.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+m.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+m.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},I.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+m.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+m.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},I}();ie.default=x;var U=function(I){return new Promise(function(E){window.setTimeout(E,I)})}},function(ue,ie){ue.exports=function(V,D){if(!(V instanceof D))throw new TypeError("Cannot call a class as a function")}},function(ue,ie){function V(D,w){for(var O=0;O<w.length;O++){var T=w[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(D,T.key,T)}}ue.exports=function(D,w,O){return w&&V(D.prototype,w),O&&V(D,O),D}},function(ue,ie,V){"use strict";var D=this&&this.__awaiter||function(f,m,v,x){return new(v||(v=Promise))(function(U,I){function E(G){try{P(x.next(G))}catch(M){I(M)}}function j(G){try{P(x.throw(G))}catch(M){I(M)}}function P(G){var M;G.done?U(G.value):(M=G.value,M instanceof v?M:new v(function(Y){Y(M)})).then(E,j)}P((x=x.apply(f,m||[])).next())})},w=this&&this.__generator||function(f,m){var v,x,U,I,E={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return I={next:j(0),throw:j(1),return:j(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function j(P){return function(G){return function(M){if(v)throw new TypeError("Generator is already executing.");for(;E;)try{if(v=1,x&&(U=2&M[0]?x.return:M[0]?x.throw||((U=x.return)&&U.call(x),0):x.next)&&!(U=U.call(x,M[1])).done)return U;switch(x=0,U&&(M=[2&M[0],U.value]),M[0]){case 0:case 1:U=M;break;case 4:return E.label++,{value:M[1],done:!1};case 5:E.label++,x=M[1],M=[0];continue;case 7:M=E.ops.pop(),E.trys.pop();continue;default:if(!((U=(U=E.trys).length>0&&U[U.length-1])||6!==M[0]&&2!==M[0])){E=0;continue}if(3===M[0]&&(!U||M[1]>U[0]&&M[1]<U[3])){E.label=M[1];break}if(6===M[0]&&E.label<U[1]){E.label=U[1],U=M;break}if(U&&E.label<U[2]){E.label=U[2],E.ops.push(M);break}U[2]&&E.ops.pop(),E.trys.pop();continue}M=m.call(f,E)}catch(Y){M=[6,Y],x=0}finally{v=U=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([P,G])}}},O=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ie,"__esModule",{value:!0});var T,f,N=O(V(0)),_=V(15);(f=T||(T={})).NEW="new",f.PREPARING_OFFER="preparing-offer",f.OFFER_SENT="offer-sent",f.ESTABLISHED="established",f.CLOSED="closed";var R=function(){function f(m){this.candidate=null,this.state=T.NEW,this.config=m,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(m),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:this.config.codec.toUpperCase(),bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return f.prototype.addStream=function(m){this.peerConnection.addStream(m)},f.prototype.setRtpSenderParameters=function(m){return D(this,void 0,void 0,function(){return w(this,function(v){return[2]})})},f.prototype.setAnswer=function(m){var v=JSON.parse(m);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:v.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},f.prototype.close=function(){this.peerConnection.close()},f.prototype.getStats=function(m,v){if(void 0===v&&(v=500),v=v>500?500:v,Date.now()-this.lastTimeGetStats<v){var x=[];this.config.isSubscriber?(x.push(this.receiveVideoStats),x.push(this.receiveAudioStats)):(x.push(this.sendAudioStats),x.push(this.sendVideoStats)),x.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),m&&m(x)}else this._getStats(m)},f.prototype._getStats=function(m){var v=this,x=[];this.peerConnection.getStats(null).then(function(U){v.lastTimeGetStats=Date.now(),Object.keys(U).map(function(I){var E=U[I];v.config.isSubscriber?E.type&&"inboundrtp"===E.type&&E.mediaType&&"audio"===E.mediaType?(v.receiveAudioStats.id=E.id+"recv",v.receiveAudioStats.type=E.type+"",v.receiveAudioStats.mediaType=E.mediaType+"",v.receiveAudioStats.packetsReceived=E.packetsReceived+"",v.receiveAudioStats.bytesReceived=E.bytesReceived+"",v.receiveAudioStats.packetsLost=E.packetsLost+"",v.receiveAudioStats.googJitterReceived=E.jitter+""):E.type&&"inboundrtp"===E.type&&E.mediaType&&"video"===E.mediaType?(v.receiveVideoStats.id=E.id+"recv",v.receiveVideoStats.type=E.type+"",v.receiveVideoStats.mediaType=E.mediaType+"",v.receiveVideoStats.packetsReceived=E.packetsReceived+"",v.receiveVideoStats.bytesReceived=E.bytesReceived+"",v.receiveVideoStats.packetsLost=E.packetsLost+"",v.receiveVideoStats.googJitterBufferMs=E.jitter+"",v.receiveVideoStats.googPlisSent=E.pliCount+"",v.receiveVideoStats.googFirsSent=E.firCount+"",v.receiveVideoStats.googNacksSent=E.nackCount+""):E.remoteSource&&E.type&&"track"===E.type&&E.trackIdentifier&&-1!==E.trackIdentifier.indexOf("v")?(v.receiveVideoStats.googFrameHeightReceived=E.frameHeight+"",v.receiveVideoStats.googFrameWidthReceived=E.frameWidth+"",v.receiveVideoStats.googFrameRateDecoded=E.framesPerSecond+"",v.receiveVideoStats.googFrameRateOutput=E.framesPerSecond+"",v.receiveVideoStats.googFrameRateReceived=E.framesPerSecond+"",v.receiveVideoStats.googFramesDecoded=E.framesDecoded+"",v.receiveVideoStats.googFrameReceived=E.framesReceived+""):E.remoteSource&&E.type&&"track"===E.type&&E.trackIdentifier&&-1!==E.trackIdentifier.indexOf("a")&&(v.receiveAudioStats.audioOutputLevel=E.audioLevel+""):!E.isRemote&&E.type&&"outboundrtp"===E.type&&E.mediaType&&"audio"===E.mediaType?(v.sendAudioStats.id=E.id+"send",v.sendAudioStats.type=E.type+"",v.sendAudioStats.mediaType=E.mediaType+"",v.sendAudioStats.packetsSent=E.packetsSent+"",v.sendAudioStats.bytesSent=E.bytesSent+""):!E.isRemote&&E.type&&"outboundrtp"===E.type&&E.mediaType&&"video"===E.mediaType?(v.sendVideoStats.id=E.id+"send",v.sendVideoStats.type=E.type+"",v.sendVideoStats.mediaType=E.mediaType+"",v.sendVideoStats.packetsSent=E.packetsSent+"",v.sendVideoStats.bytesSent=E.bytesSent+"",v.sendVideoStats.googRtt=E.roundTripTime+"",v.sendVideoStats.googPlisReceived=E.pliCount+"",v.sendVideoStats.googFirsReceived=E.firCount+"",v.sendVideoStats.googNacksReceived=E.nackCount+""):!E.remoteSource&&E.type&&"track"===E.type&&E.framesSent&&0!==E.framesSent&&(v.sendVideoStats.googFrameHeightSent=E.frameHeight+"",v.sendVideoStats.googFrameHeightInput=E.frameHeight+"",v.sendVideoStats.googFrameWidthSent=E.frameWidth+"",v.sendVideoStats.googFrameWidthInput=E.frameWidth+"",v.sendVideoStats.googFramesEncoded=E.framesSent+"",v.sendVideoStats.googFrameRateSent=E.framesPerSecond+"")}),v.config.isSubscriber?(x.push(v.receiveVideoStats),x.push(v.receiveAudioStats)):(x.push(v.sendAudioStats),x.push(v.sendVideoStats)),x.push({id:"time",startTime:v.connectedTime,timestamp:Date.now()}),m&&m(x)})},f.prototype.getStatsRate=function(m){this.getStats(m)},f.prototype.initPeecConnection=function(m){var v=m.stunServerUrl,x=m.turnServer,U=m.iceServers;return this.pcConfig={iceServers:[]},U instanceof Array?this.pcConfig.iceServers=m.iceServers:v&&(v instanceof Array?v.map(function(I){"string"==typeof I&&""!==I&&this.pcConfig.iceServers.push({urls:I})}):"string"==typeof v&&""!==v&&this.pcConfig.iceServers.push({urls:v})),x&&(x instanceof Array?x.map(function(I){"string"==typeof I.url&&""!==I.url&&this.pcConfig.iceServers.push({username:I.username,credential:I.credential,url:I.url})}):"auto"!==x.mode&&"manual"!==x.mode||(x.udpport&&this.pcConfig.iceServers.push({username:x.username,credential:x.credential,credentialType:"password",urls:"turn:"+x.url+":"+x.udpport+"?transport=udp"}),"string"==typeof x.tcpport&&""!==x.tcpport&&this.pcConfig.iceServers.push({username:x.username,credential:x.credential,credentialType:"password",urls:"turn:"+x.url+":"+x.tcpport+"?transport=tcp"}),!0===x.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new _.RTCPeerConnection(this.pcConfig)},f.prototype._ontrack=function(m){this.onaddstream&&this.onaddstream(m,"ontrack")},f.prototype._onaddstream=function(m){this.onaddstream&&this.onaddstream(m,"onaddstream")},f.prototype._oniceconnectionstatechange=function(m){"connected"===m.currentTarget.iceConnectionState&&(this.state=T.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(m.currentTarget.iceConnectionState)},f.prototype._onicecandidate=function(m){!this.candidate&&m&&(this.candidate=m.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},f.prototype.setLocalSDP=function(m){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:m.sdp,type:"offer"})),this.state=T.PREPARING_OFFER,m},f.prototype.editLocalSDP=function(m){return m.sdp=this.setBandWidth(m.sdp),m.sdp=this.reviseOpus(m.sdp),m.sdp=this.addCandidate(m.sdp),m},f.prototype.setSendRecv=function(m){return(m=(m=m.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},f.prototype.setBandWidth=function(m){var v,x,U=this.config,I=U.codec,E=U.minVideoBW,j=U.maxVideoBW,P=U.maxAudioBW,G=U.clientId;if((v=m.match(/m=video.*\r\n/))&&E&&j){x=v[0]+"b=AS:"+j+"\r\n";var M=0,Y=0;"h264"===I?(M=m.search(/a=rtpmap:(\d+) H264\/90000\r\n/),Y=m.search(/H264\/90000\r\n/)):"vp8"===I?(M=m.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),Y=m.search(/VP8\/90000\r\n/)):"vp9"===I&&(M=m.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),Y=m.search(/VP9\/90000\r\n/)),-1!==M&&-1!==Y&&Y-M>10&&(x=x+"a=fmtp:"+m.slice(M+9,Y-1)+" x-google-min-bitrate="+E+"\r\n"),m=m.replace(v[0],x),N.default.debug("["+G+"]Set Video Bitrate - min:"+E+" max:"+j)}return(v=m.match(/m=audio.*\r\n/))&&P&&(m=m.replace(v[0],x=v[0]+"b=AS:"+P+"\r\n")),m},f.prototype.reviseOpus=function(m){return(m=m.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},f.prototype.addCandidate=function(m){return m+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},f.prototype.sendOffer=function(m){this.config.callback(JSON.stringify({sdp:m.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=T.OFFER_SENT},f}();ie.default=R},function(ue,ie,V){var D=V(65),w=V(66),O=V(34),T=V(67);ue.exports=function(N,_){return D(N)||w(N,_)||O(N,_)||T()}},function(ue,ie,V){var D,w,O;w=this,O=function(){"use strict";var T,N=this;function _(x){N.console&&(N.console.error?N.console.error(x):N.console.log&&N.console.log(x))}function R(x,U,I,E){var j=E||_,P=x.createShader(I);return x.shaderSource(P,U),x.compileShader(P),x.getShaderParameter(P,x.COMPILE_STATUS)?P:(j("*** Error compiling shader '"+P+"':"+x.getShaderInfoLog(P)),x.deleteShader(P),null)}function f(x,U,I,E,j){var P=j||_,G=x.createProgram();return U.forEach(function(M){x.attachShader(G,M)}),I&&I.forEach(function(M,Y){x.bindAttribLocation(G,E?E[Y]:Y,M)}),x.linkProgram(G),x.getProgramParameter(G,x.LINK_STATUS)?G:(P("Error in program linking:"+x.getProgramInfoLog(G)),x.deleteProgram(G),null)}(T=T||N)===T.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var m,v=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(m=HTMLCanvasElement.prototype.getContext,function(){var x=arguments,U=x[0];return"webgl"===U&&((x=[].slice.call(arguments))[0]="experimental-webgl"),m.apply(this,x)})),{createProgram:f,createProgramFromSources:function(x,U,I,E,j){for(var P=[],G=0;G<U.length;++G)P.push(R(x,U[G],x[v[G]],j));return f(x,P,I,E,j)}}},void 0===(D=function(){return O.call(w)}.apply(ie,[]))||(ue.exports=D)},function(ue,ie,V){"use strict";var D=this&&this.__awaiter||function(f,m,v,x){return new(v||(v=Promise))(function(U,I){function E(G){try{P(x.next(G))}catch(M){I(M)}}function j(G){try{P(x.throw(G))}catch(M){I(M)}}function P(G){var M;G.done?U(G.value):(M=G.value,M instanceof v?M:new v(function(Y){Y(M)})).then(E,j)}P((x=x.apply(f,m||[])).next())})},w=this&&this.__generator||function(f,m){var v,x,U,I,E={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return I={next:j(0),throw:j(1),return:j(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function j(P){return function(G){return function(M){if(v)throw new TypeError("Generator is already executing.");for(;E;)try{if(v=1,x&&(U=2&M[0]?x.return:M[0]?x.throw||((U=x.return)&&U.call(x),0):x.next)&&!(U=U.call(x,M[1])).done)return U;switch(x=0,U&&(M=[2&M[0],U.value]),M[0]){case 0:case 1:U=M;break;case 4:return E.label++,{value:M[1],done:!1};case 5:E.label++,x=M[1],M=[0];continue;case 7:M=E.ops.pop(),E.trys.pop();continue;default:if(!((U=(U=E.trys).length>0&&U[U.length-1])||6!==M[0]&&2!==M[0])){E=0;continue}if(3===M[0]&&(!U||M[1]>U[0]&&M[1]<U[3])){E.label=M[1];break}if(6===M[0]&&E.label<U[1]){E.label=U[1],U=M;break}if(U&&E.label<U[2]){E.label=U[2],E.ops.push(M);break}U[2]&&E.ops.pop(),E.trys.pop();continue}M=m.call(f,E)}catch(Y){M=[6,Y],x=0}finally{v=U=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([P,G])}}},O=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ie,"__esModule",{value:!0});var T=V(68),N=V(5),_=O(V(0));ie.getSupportedCodec=function(f){return D(void 0,void 0,void 0,function(){var m,v,x,U;return w(this,function(E){switch(E.label){case 0:return m={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(_.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{v=T.createRTCPeerConnection({iceServers:[]})}catch(j){return _.default.error("Failed to init RTCPeerConnection",j),[2,Promise.reject(j)]}return v?[3,2]:(_.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(m)]);case 2:return f&&f.stream?[3,7]:(x={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},U=void 0,(N.isSafari()||N.isFireFox()||N.isWeChatBrowser())&&v.addTransceiver?(v.addTransceiver("audio"),v.addTransceiver("video"),[4,v.createOffer()]):[3,4]);case 3:return U=E.sent(),[3,6];case 4:return[4,new Promise(function(j,P){var G=setTimeout(function(){P("CREATEOFFER_TIMEOUT")},3e3);v.createOffer(function(M){clearTimeout(G),j(M)},function(M){clearTimeout(G),P(M)},x)})];case 5:U=E.sent(),E.label=6;case 6:return v.close(),[2,R(U.sdp)];case 7:return f.stream.getTracks&&v.addTrack?f.stream.getTracks().forEach(function(j){v.addTrack(j,f.stream)}):v.addStream(f.stream),U=void 0,N.isSafari()||N.isFireFox()?[4,v.createOffer()]:[3,9];case 8:return U=E.sent(),[3,11];case 9:return[4,new Promise(function(j,P){v.createOffer(j,P)})];case 10:U=E.sent(),E.label=11;case 11:return v.close(),[2,R(U.sdp)]}})})};var R=function(f){var m={video:[],audio:[]};return f.match(/ VP8/i)&&m.video.push("VP8"),f.match(/ VP9/i)&&m.video.push("VP9"),f.match(/ H264/i)&&m.video.push("H264"),f.match(/ opus/i)&&m.audio.push("OPUS"),Promise.resolve(m)}},function(ue,ie,V){"use strict";var D=this&&this.__awaiter||function(N,_,R,f){return new(R||(R=Promise))(function(m,v){function x(E){try{I(f.next(E))}catch(j){v(j)}}function U(E){try{I(f.throw(E))}catch(j){v(j)}}function I(E){var j;E.done?m(E.value):(j=E.value,j instanceof R?j:new R(function(P){P(j)})).then(x,U)}I((f=f.apply(N,_||[])).next())})},w=this&&this.__generator||function(N,_){var R,f,m,v,x={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return v={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(v[Symbol.iterator]=function(){return this}),v;function U(I){return function(E){return function(j){if(R)throw new TypeError("Generator is already executing.");for(;x;)try{if(R=1,f&&(m=2&j[0]?f.return:j[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,j[1])).done)return m;switch(f=0,m&&(j=[2&j[0],m.value]),j[0]){case 0:case 1:m=j;break;case 4:return x.label++,{value:j[1],done:!1};case 5:x.label++,f=j[1],j=[0];continue;case 7:j=x.ops.pop(),x.trys.pop();continue;default:if(!((m=(m=x.trys).length>0&&m[m.length-1])||6!==j[0]&&2!==j[0])){x=0;continue}if(3===j[0]&&(!m||j[1]>m[0]&&j[1]<m[3])){x.label=j[1];break}if(6===j[0]&&x.label<m[1]){x.label=m[1],m=j;break}if(m&&x.label<m[2]){x.label=m[2],x.ops.push(j);break}m[2]&&x.ops.pop(),x.trys.pop();continue}j=_.call(N,x)}catch(P){j=[6,P],f=0}finally{R=m=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([I,E])}}};Object.defineProperty(ie,"__esModule",{value:!0});var O=V(10);function T(N){for(var _="",R=0;R<N.length;R+=1)_+=String.fromCharCode(N[R]);return window.btoa(_)}ie.encryptRSA=function(N){return D(void 0,void 0,void 0,function(){var _,R,f,m;return w(this,function(v){switch(v.label){case 0:return _=O.base64ToUint8Array("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),[4,window.crypto.subtle.importKey("spki",_,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 1:return R=v.sent(),x=N,f=(new TextEncoder).encode(x),[4,window.crypto.subtle.encrypt({name:"RSA-OAEP"},R,f)];case 2:return m=v.sent(),[2,T(new Uint8Array(m))]}var x})})}},function(ue,ie,V){"use strict";var D=this&&this.__awaiter||function(m,v,x,U){return new(x||(x=Promise))(function(I,E){function j(M){try{G(U.next(M))}catch(Y){E(Y)}}function P(M){try{G(U.throw(M))}catch(Y){E(Y)}}function G(M){var Y;M.done?I(M.value):(Y=M.value,Y instanceof x?Y:new x(function(oe){oe(Y)})).then(j,P)}G((U=U.apply(m,v||[])).next())})},w=this&&this.__generator||function(m,v){var x,U,I,E,j={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return E={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function P(G){return function(M){return function(Y){if(x)throw new TypeError("Generator is already executing.");for(;j;)try{if(x=1,U&&(I=2&Y[0]?U.return:Y[0]?U.throw||((I=U.return)&&I.call(U),0):U.next)&&!(I=I.call(U,Y[1])).done)return I;switch(U=0,I&&(Y=[2&Y[0],I.value]),Y[0]){case 0:case 1:I=Y;break;case 4:return j.label++,{value:Y[1],done:!1};case 5:j.label++,U=Y[1],Y=[0];continue;case 7:Y=j.ops.pop(),j.trys.pop();continue;default:if(!((I=(I=j.trys).length>0&&I[I.length-1])||6!==Y[0]&&2!==Y[0])){j=0;continue}if(3===Y[0]&&(!I||Y[1]>I[0]&&Y[1]<I[3])){j.label=Y[1];break}if(6===Y[0]&&j.label<I[1]){j.label=I[1],I=Y;break}if(I&&j.label<I[2]){j.label=I[2],j.ops.push(Y);break}I[2]&&j.ops.pop(),j.trys.pop();continue}Y=v.call(m,j)}catch(oe){Y=[6,oe],U=0}finally{x=I=0}if(5&Y[0])throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}([G,M])}}},O=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(ie,"__esModule",{value:!0});var T=O(V(0)),N=V(75),_=V(24),R=V(1),f=V(27);ie.addLiveStreamingCapability=function(m,v){var x=this,U=function(I){var E=I.type;if(!m.joinInfo)return new _.AgoraRTCError(_.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(E){case f.LiveStreamingServiceMode.INJECT:return m._injectStreamingClient||(m._injectStreamingClient=new N.AgoraRTCLiveStreamingClient(m.joinInfo),m._injectStreamingClient.onInjectStatusChange=function(j,P,G){m.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:G,status:j})}),m._injectStreamingClient;case f.LiveStreamingServiceMode.RAW:return m._liveRawStreamingClient||(m._liveRawStreamingClient=new N.AgoraRTCLiveStreamingClient(m.joinInfo),m._liveRawStreamingClient.setGatewayConnectionState(m.getConnectionState()),m.on("connection-state-change",function(j){m._liveRawStreamingClient.setGatewayConnectionState(j.curState),"CONNECTING"===j.prevState&&"CONNECTED"===j.curState&&m._liveRawStreamingClient&&m._liveRawStreamingClient.resetAllTask()}),m._liveRawStreamingClient.onLiveStreamError=function(j,P){T.default.error("LIVE_STREAMING_ERROR",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:j,reason:P.code})},m._liveRawStreamingClient.onLiveStreamWarning=function(j,P){T.default.warning("LIVE_STREAMING_WARNING",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:j,reason:P.code})}),m._liveRawStreamingClient;case f.LiveStreamingServiceMode.TRANSCODE:return m._liveTranscodeStreamingClient||(m._liveTranscodeStreamingClient=new N.AgoraRTCLiveStreamingClient(m.joinInfo),m._liveTranscodeStreamingClient.setGatewayConnectionState(m.getConnectionState()),m.on("connection-state-change",function(j){m._liveTranscodeStreamingClient.setGatewayConnectionState(j.curState),"CONNECTING"===j.prevState&&"CONNECTED"===j.curState&&m._liveTranscodeStreamingClient&&m._liveTranscodeStreamingClient.resetAllTask()}),m._liveTranscodeStreamingClient.onLiveStreamError=function(j,P){T.default.error("LIVE_STREAMING_ERROR",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:j,reason:P.code})},m._liveTranscodeStreamingClient.onLiveStreamWarning=function(j,P){T.default.warning("LIVE_STREAMING_WARNING",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:j,reason:P})}),m._liveTranscodeStreamingClient}};m.gatewayClient.addEventListener("join",function(I){m._injectStreamingClient&&m._injectStreamingClient.resetAllTask()}),m.gatewayClient.addEventListener("stream-unpublished",function(I){I.options&&0===I.options.streamType&&(m._liveRawStreamingClient&&m._liveRawStreamingClient.resetAllTask(),m._liveTranscodeStreamingClient&&m._liveTranscodeStreamingClient.resetAllTask())}),m.gatewayClient.addEventListener("stream-published",function(I){}),m.startLiveStreaming=function(I,E){T.default.debug("startLiveStreaming");var j=R.report.reportApiInvoke(v.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(m.gatewayClient&&"audience"===m.gatewayClient.role){var P={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw j(P),P}var G=m._startLiveStreaming(I,E);return G.then(function(M){j(null,M)}).catch(function(M){T.default.error("LIVE_STREAMING_ERROR",M.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:I,reason:M.code}),j(M)}),G},m._startLiveStreaming=function(I,E){return D(x,void 0,void 0,function(){var j;return w(this,function(P){switch(P.label){case 0:return E||("vp8"===v.codec&&T.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"vp9"===v.codec&&T.default.warning("VP9 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===v.mode&&T.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(m._liveRawStreamingClient&&m._liveRawStreamingClient.haveUrl(I)||m._liveTranscodeStreamingClient&&m._liveTranscodeStreamingClient.haveUrl(I))&&new _.AgoraRTCError(_.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),[4,U({type:j=E?f.LiveStreamingServiceMode.TRANSCODE:f.LiveStreamingServiceMode.RAW}).startLiveStreamingTask(I,j)];case 1:return P.sent(),m.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:I}),[2]}})})},m.setLiveTranscoding=function(I){T.default.debug("setLiveTranscoding: "+JSON.stringify(I));var E=R.report.reportApiInvoke(v.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"}),j=U({type:f.LiveStreamingServiceMode.TRANSCODE});return j.setTranscodingConfig(I).then(function(){m.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),E(null)}).catch(function(P){T.default.error("SET_LIVE_TRANSCODING_ERROR",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:P.code}),E(P)})},m.stopLiveStreaming=function(I){var E=R.report.reportApiInvoke(v.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),j=m._stopLiveStreaming(I);return j.then(function(P){E(null,P)}).catch(function(P){T.default.error("STOP_LIVE_STREAMING_ERROR",P.toString()),m.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:I,reason:P.code}),E(P)}),j},m._stopLiveStreaming=function(I){return D(this,void 0,void 0,function(){return w(this,function(j){switch(j.label){case 0:return T.default.debug("stopLiveStreaming: "+JSON.stringify(I)),[4,Promise.all([m._liveRawStreamingClient,m._liveTranscodeStreamingClient].map(function(P){return P&&P.haveUrl(I)&&P.stopLiveStreamingTask(I)}))];case 1:return j.sent(),T.default.debug("stopLiveStreaming sucess: "+JSON.stringify(I)),m.gatewayClient.dispatchEvent({type:"liveStreamingStopped",url:I}),[2]}})})},m.addInjectStreamUrl=function(I,E){var j=R.report.reportApiInvoke(v.sessionId,{name:"Client.addInjectStreamUrl",options:[I,E],tag:"tracer"});if("audience"===m.gatewayClient.role){var P={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw j(P),P}var G=m._addInjectStreamUrl(I,E);return G.then(function(M){j(null,M)}).catch(function(M){T.default.error("ADD_INJECT_STREAM_ERROR",M.toString()),j(M)}),G},m._addInjectStreamUrl=function(I,E){return D(x,void 0,void 0,function(){var j;return w(this,function(P){switch(P.label){case 0:return(j=U({type:f.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(E,0),[4,j.startLiveStreamingTask(I,f.LiveStreamingServiceMode.INJECT)];case 1:return P.sent(),[2]}})})},m.removeInjectStreamUrl=function(I){return D(this,void 0,void 0,function(){var E,j;return w(this,function(P){return E=R.report.reportApiInvoke(v.sessionId,{name:"Client.removeInjectStreamUrl",options:[I],tag:"tracer"}),(j=m._removeInjectStreamUrl(I)).then(function(G){E(null,G)}).catch(function(G){T.default.error("REMOVE_INJECT_STREAM_ERROR",G.toString()),E(G)}),[2,j]})})},m._removeInjectStreamUrl=function(I){return D(x,void 0,void 0,function(){return w(this,function(E){switch(E.label){case 0:return[4,U({type:f.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(I)];case 1:return E.sent(),[2]}})})},m._terminateLiveStreaming=function(){return D(x,void 0,void 0,function(){return w(this,function(I){return[m._injectStreamingClient,m._liveRawStreamingClient,m._liveTranscodeStreamingClient].forEach(function(E){E&&E.terminate()}),[2]})})}}},function(ue,ie,V){"use strict";var D=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(ie,"__esModule",{value:!0});var w=D(V(4)),O=D(V(0)),T=V(10);ie.default=function(N,_){void 0===_&&(_={width:160,height:120,framerate:15});var R=_.width,f=_.height,m=_.framerate,v=N.stream;if(!v)throw w.default.INVALID_LOCAL_STREAM;if(!v.getVideoTracks()[0])throw w.default.HIGH_STREAM_NOT_VIDEO_TRACE;var x=v.getVideoTracks()[0];O.default.debug("Start getLowStream");var U=document.createElement("video"),I=document.createElement("canvas");U.setAttribute("style","display:none"),U.setAttribute("muted",""),U.muted=!0,U.setAttribute("autoplay",""),U.autoplay=!0,U.setAttribute("playsinline",""),I.setAttribute("style","display:none"),I.setAttribute("width",R.toString()),I.setAttribute("height",f.toString());var E=I.getContext("2d");if(!E)throw new Error("not get canvas context");U.srcObject=v,document.body.append(U),document.body.append(I),U.play(),O.default.debug("Start render lowStream");var j=T.audioTimerLoop(function(){return function(){if(U.paused&&U.play(),U.videoHeight>2&&U.videoWidth>2){var oe=I.width*(U.videoHeight/U.videoWidth);Math.abs(oe-I.height)>=2&&(O.default.debug("adjust low stream resolution",I.width+"x"+I.height+" -> "+I.width+"x"+oe),I.height=oe)}E.drawImage(U,0,0,I.width,I.height);var Q=N.stream;if(Q){var te=Q.getVideoTracks()[0];x!==te&&(O.default.debug("adjust low stream track"),U.srcObject=Q,x=te)}}()},m),P=I.captureStream(m),G=P.getVideoTracks()[0];return G.requestFrame&&G.requestFrame(),P.clean=function(){O.default.debug("Start clean lowStream"),j(),(U||U.parentNode||U.parentNode.removeChild)&&U.parentNode.removeChild(U),(I||I.parentNode||I.parentNode.removeChild)&&I.parentNode.removeChild(I),O.default.debug("Clean lowStream")},P}},function(ue,ie){var V="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(V){var D=new Uint8Array(16);ue.exports=function(){return V(D),D}}else{var w=new Array(16);ue.exports=function(){for(var O,T=0;T<16;T++)0==(3&T)&&(O=4294967296*Math.random()),w[T]=O>>>((3&T)<<3)&255;return w}}},function(ue,ie){for(var V=[],D=0;D<256;++D)V[D]=(D+256).toString(16).substr(1);ue.exports=function(w,O){var T=O||0;return[V[w[T++]],V[w[T++]],V[w[T++]],V[w[T++]],"-",V[w[T++]],V[w[T++]],"-",V[w[T++]],V[w[T++]],"-",V[w[T++]],V[w[T++]],"-",V[w[T++]],V[w[T++]],V[w[T++]],V[w[T++]],V[w[T++]],V[w[T++]]].join("")}},function(module,exports,__nested_webpack_require_639250__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(undefined){"use strict";var ue,ie,D;ue={1:[function(ue,ie,V){ie.exports=function(D,w){for(var O=new Array(arguments.length-1),T=0,N=2,_=!0;N<arguments.length;)O[T++]=arguments[N++];return new Promise(function(R,f){O[T]=function(m){if(_)if(_=!1,m)f(m);else{for(var v=new Array(arguments.length-1),x=0;x<v.length;)v[x++]=arguments[x];R.apply(null,v)}};try{D.apply(w||null,O)}catch(m){_&&(_=!1,f(m))}})}},{}],2:[function(ue,ie,V){var D=V;D.length=function(N){var _=N.length;if(!_)return 0;for(var R=0;--_%4>1&&"="===N.charAt(_);)++R;return Math.ceil(3*N.length)/4-R};for(var w=new Array(64),O=new Array(123),T=0;T<64;)O[w[T]=T<26?T+65:T<52?T+71:T<62?T-4:T-59|43]=T++;D.encode=function(N,_,R){for(var f,m=null,v=[],x=0,U=0;_<R;){var I=N[_++];switch(U){case 0:v[x++]=w[I>>2],f=(3&I)<<4,U=1;break;case 1:v[x++]=w[f|I>>4],f=(15&I)<<2,U=2;break;case 2:v[x++]=w[f|I>>6],v[x++]=w[63&I],U=0}x>8191&&((m||(m=[])).push(String.fromCharCode.apply(String,v)),x=0)}return U&&(v[x++]=w[f],v[x++]=61,1===U&&(v[x++]=61)),m?(x&&m.push(String.fromCharCode.apply(String,v.slice(0,x))),m.join("")):String.fromCharCode.apply(String,v.slice(0,x))},D.decode=function(N,_,R){for(var f,m=R,v=0,x=0;x<N.length;){var U=N.charCodeAt(x++);if(61===U&&v>1)break;if((U=O[U])===undefined)throw Error("invalid encoding");switch(v){case 0:f=U,v=1;break;case 1:_[R++]=f<<2|(48&U)>>4,f=U,v=2;break;case 2:_[R++]=(15&f)<<4|(60&U)>>2,f=U,v=3;break;case 3:_[R++]=(3&f)<<6|U,v=0}}if(1===v)throw Error("invalid encoding");return R-m},D.test=function(N){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(N)}},{}],3:[function(ue,ie,V){function D(w,O){"string"==typeof w&&(O=w,w=undefined);var T=[];function N(R){if("string"!=typeof R){var f=_();if(D.verbose&&console.log("codegen: "+f),f="return "+f,R){for(var m=Object.keys(R),v=new Array(m.length+1),x=new Array(m.length),U=0;U<m.length;)v[U]=m[U],x[U]=R[m[U++]];return v[U]=f,Function.apply(null,v).apply(null,x)}return Function(f)()}for(var I=new Array(arguments.length-1),E=0;E<I.length;)I[E]=arguments[++E];if(E=0,R=R.replace(/%([%dfijs])/g,function(j,P){var G=I[E++];switch(P){case"d":case"f":return String(Number(G));case"i":return String(Math.floor(G));case"j":return JSON.stringify(G);case"s":return String(G)}return"%"}),E!==I.length)throw Error("parameter count mismatch");return T.push(R),N}function _(R){return"function "+(R||O||"")+"("+(w&&w.join(",")||"")+"){\n  "+T.join("\n  ")+"\n}"}return N.toString=_,N}ie.exports=D,D.verbose=!1},{}],4:[function(ue,ie,V){function D(){this._listeners={}}ie.exports=D,D.prototype.on=function(w,O,T){return(this._listeners[w]||(this._listeners[w]=[])).push({fn:O,ctx:T||this}),this},D.prototype.off=function(w,O){if(w===undefined)this._listeners={};else if(O===undefined)this._listeners[w]=[];else for(var T=this._listeners[w],N=0;N<T.length;)T[N].fn===O?T.splice(N,1):++N;return this},D.prototype.emit=function(w){var O=this._listeners[w];if(O){for(var T=[],N=1;N<arguments.length;)T.push(arguments[N++]);for(N=0;N<O.length;)O[N].fn.apply(O[N++].ctx,T)}return this}},{}],5:[function(ue,ie,V){ie.exports=O;var D=ue(1),w=ue(7)("fs");function O(T,N,_){return"function"==typeof N?(_=N,N={}):N||(N={}),_?!N.xhr&&w&&w.readFile?w.readFile(T,function(R,f){return R&&"undefined"!=typeof XMLHttpRequest?O.xhr(T,N,_):R?_(R):_(null,N.binary?f:f.toString("utf8"))}):O.xhr(T,N,_):D(O,this,T,N)}O.xhr=function(T,N,_){var R=new XMLHttpRequest;R.onreadystatechange=function(){if(4!==R.readyState)return undefined;if(0!==R.status&&200!==R.status)return _(Error("status "+R.status));if(N.binary){var f=R.response;if(!f){f=[];for(var m=0;m<R.responseText.length;++m)f.push(255&R.responseText.charCodeAt(m))}return _(null,"undefined"!=typeof Uint8Array?new Uint8Array(f):f)}return _(null,R.responseText)},N.binary&&("overrideMimeType"in R&&R.overrideMimeType("text/plain; charset=x-user-defined"),R.responseType="arraybuffer"),R.open("GET",T),R.send()}},{1:1,7:7}],6:[function(ue,ie,V){function D(_){return"undefined"!=typeof Float32Array?function(){var R=new Float32Array([-0]),f=new Uint8Array(R.buffer),m=128===f[3];function v(E,j,P){R[0]=E,j[P]=f[0],j[P+1]=f[1],j[P+2]=f[2],j[P+3]=f[3]}function x(E,j,P){R[0]=E,j[P]=f[3],j[P+1]=f[2],j[P+2]=f[1],j[P+3]=f[0]}function U(E,j){return f[0]=E[j],f[1]=E[j+1],f[2]=E[j+2],f[3]=E[j+3],R[0]}function I(E,j){return f[3]=E[j],f[2]=E[j+1],f[1]=E[j+2],f[0]=E[j+3],R[0]}_.writeFloatLE=m?v:x,_.writeFloatBE=m?x:v,_.readFloatLE=m?U:I,_.readFloatBE=m?I:U}():function(){function R(m,v,x,U){var I=v<0?1:0;if(I&&(v=-v),0===v)m(1/v>0?0:2147483648,x,U);else if(isNaN(v))m(2143289344,x,U);else if(v>34028234663852886e22)m((I<<31|2139095040)>>>0,x,U);else if(v<11754943508222875e-54)m((I<<31|Math.round(v/1401298464324817e-60))>>>0,x,U);else{var E=Math.floor(Math.log(v)/Math.LN2);m((I<<31|E+127<<23|8388607&Math.round(v*Math.pow(2,-E)*8388608))>>>0,x,U)}}function f(m,v,x){var U=m(v,x),I=2*(U>>31)+1,E=U>>>23&255,j=8388607&U;return 255===E?j?NaN:I*(1/0):0===E?1401298464324817e-60*I*j:I*Math.pow(2,E-150)*(j+8388608)}_.writeFloatLE=R.bind(null,w),_.writeFloatBE=R.bind(null,O),_.readFloatLE=f.bind(null,T),_.readFloatBE=f.bind(null,N)}(),"undefined"!=typeof Float64Array?function(){var R=new Float64Array([-0]),f=new Uint8Array(R.buffer),m=128===f[7];function v(E,j,P){R[0]=E,j[P]=f[0],j[P+1]=f[1],j[P+2]=f[2],j[P+3]=f[3],j[P+4]=f[4],j[P+5]=f[5],j[P+6]=f[6],j[P+7]=f[7]}function x(E,j,P){R[0]=E,j[P]=f[7],j[P+1]=f[6],j[P+2]=f[5],j[P+3]=f[4],j[P+4]=f[3],j[P+5]=f[2],j[P+6]=f[1],j[P+7]=f[0]}function U(E,j){return f[0]=E[j],f[1]=E[j+1],f[2]=E[j+2],f[3]=E[j+3],f[4]=E[j+4],f[5]=E[j+5],f[6]=E[j+6],f[7]=E[j+7],R[0]}function I(E,j){return f[7]=E[j],f[6]=E[j+1],f[5]=E[j+2],f[4]=E[j+3],f[3]=E[j+4],f[2]=E[j+5],f[1]=E[j+6],f[0]=E[j+7],R[0]}_.writeDoubleLE=m?v:x,_.writeDoubleBE=m?x:v,_.readDoubleLE=m?U:I,_.readDoubleBE=m?I:U}():function(){function R(m,v,x,U,I,E){var j=U<0?1:0;if(j&&(U=-U),0===U)m(0,I,E+v),m(1/U>0?0:2147483648,I,E+x);else if(isNaN(U))m(0,I,E+v),m(2146959360,I,E+x);else if(U>17976931348623157e292)m(0,I,E+v),m((j<<31|2146435072)>>>0,I,E+x);else{var P;if(U<22250738585072014e-324)m((P=U/5e-324)>>>0,I,E+v),m((j<<31|P/4294967296)>>>0,I,E+x);else{var G=Math.floor(Math.log(U)/Math.LN2);1024===G&&(G=1023),m(4503599627370496*(P=U*Math.pow(2,-G))>>>0,I,E+v),m((j<<31|G+1023<<20|1048576*P&1048575)>>>0,I,E+x)}}}function f(m,v,x,U,I){var E=m(U,I+v),j=m(U,I+x),P=2*(j>>31)+1,G=j>>>20&2047,M=4294967296*(1048575&j)+E;return 2047===G?M?NaN:P*(1/0):0===G?5e-324*P*M:P*Math.pow(2,G-1075)*(M+4503599627370496)}_.writeDoubleLE=R.bind(null,w,0,4),_.writeDoubleBE=R.bind(null,O,4,0),_.readDoubleLE=f.bind(null,T,0,4),_.readDoubleBE=f.bind(null,N,4,0)}(),_}function w(_,R,f){R[f]=255&_,R[f+1]=_>>>8&255,R[f+2]=_>>>16&255,R[f+3]=_>>>24}function O(_,R,f){R[f]=_>>>24,R[f+1]=_>>>16&255,R[f+2]=_>>>8&255,R[f+3]=255&_}function T(_,R){return(_[R]|_[R+1]<<8|_[R+2]<<16|_[R+3]<<24)>>>0}function N(_,R){return(_[R]<<24|_[R+1]<<16|_[R+2]<<8|_[R+3])>>>0}ie.exports=D(D)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(ue){}return null}module.exports=inquire},{}],8:[function(ue,ie,V){var D=V,w=D.isAbsolute=function(T){return/^(?:\/|\w+:)/.test(T)},O=D.normalize=function(T){var N=(T=T.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),_=w(T),R="";_&&(R=N.shift()+"/");for(var f=0;f<N.length;)".."===N[f]?f>0&&".."!==N[f-1]?N.splice(--f,2):_?N.splice(f,1):++f:"."===N[f]?N.splice(f,1):++f;return R+N.join("/")};D.resolve=function(T,N,_){return _||(N=O(N)),w(N)?N:(_||(T=O(T)),(T=T.replace(/(?:\/|^)[^/]+$/,"")).length?O(T+"/"+N):N)}},{}],9:[function(ue,ie,V){ie.exports=function(D,w,O){var T=O||8192,N=T>>>1,_=null,R=T;return function(f){if(f<1||f>N)return D(f);R+f>T&&(_=D(T),R=0);var m=w.call(_,R,R+=f);return 7&R&&(R=1+(7|R)),m}}},{}],10:[function(ue,ie,V){var D=V;D.length=function(w){for(var O=0,T=0,N=0;N<w.length;++N)(T=w.charCodeAt(N))<128?O+=1:T<2048?O+=2:55296==(64512&T)&&56320==(64512&w.charCodeAt(N+1))?(++N,O+=4):O+=3;return O},D.read=function(w,O,T){if(T-O<1)return"";for(var N,_=null,R=[],f=0;O<T;)(N=w[O++])<128?R[f++]=N:N>191&&N<224?R[f++]=(31&N)<<6|63&w[O++]:N>239&&N<365?(N=((7&N)<<18|(63&w[O++])<<12|(63&w[O++])<<6|63&w[O++])-65536,R[f++]=55296+(N>>10),R[f++]=56320+(1023&N)):R[f++]=(15&N)<<12|(63&w[O++])<<6|63&w[O++],f>8191&&((_||(_=[])).push(String.fromCharCode.apply(String,R)),f=0);return _?(f&&_.push(String.fromCharCode.apply(String,R.slice(0,f))),_.join("")):String.fromCharCode.apply(String,R.slice(0,f))},D.write=function(w,O,T){for(var N,_,R=T,f=0;f<w.length;++f)(N=w.charCodeAt(f))<128?O[T++]=N:N<2048?(O[T++]=N>>6|192,O[T++]=63&N|128):55296==(64512&N)&&56320==(64512&(_=w.charCodeAt(f+1)))?(++f,O[T++]=(N=65536+((1023&N)<<10)+(1023&_))>>18|240,O[T++]=N>>12&63|128,O[T++]=N>>6&63|128,O[T++]=63&N|128):(O[T++]=N>>12|224,O[T++]=N>>6&63|128,O[T++]=63&N|128);return T-R}},{}],11:[function(ue,ie,V){var D=V,w=ue(14),O=ue(33);function T(_,R,f,m){if(R.resolvedType)if(R.resolvedType instanceof w){_("switch(d%s){",m);for(var v=R.resolvedType.values,x=Object.keys(v),U=0;U<x.length;++U)R.repeated&&v[x[U]]===R.typeDefault&&_("default:"),_("case%j:",x[U])("case %i:",v[x[U]])("m%s=%j",m,v[x[U]])("break");_("}")}else _('if(typeof d%s!=="object")',m)("throw TypeError(%j)",R.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",m,f,m);else{var I=!1;switch(R.type){case"double":case"float":_("m%s=Number(d%s)",m,m);break;case"uint32":case"fixed32":_("m%s=d%s>>>0",m,m);break;case"int32":case"sint32":case"sfixed32":_("m%s=d%s|0",m,m);break;case"uint64":I=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":_("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",m,m,I)('else if(typeof d%s==="string")',m)("m%s=parseInt(d%s,10)",m,m)('else if(typeof d%s==="number")',m)("m%s=d%s",m,m)('else if(typeof d%s==="object")',m)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",m,m,m,I?"true":"");break;case"bytes":_('if(typeof d%s==="string")',m)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",m,m,m)("else if(d%s.length)",m)("m%s=d%s",m,m);break;case"string":_("m%s=String(d%s)",m,m);break;case"bool":_("m%s=Boolean(d%s)",m,m)}}return _}function N(_,R,f,m){if(R.resolvedType)R.resolvedType instanceof w?_("d%s=o.enums===String?types[%i].values[m%s]:m%s",m,f,m,m):_("d%s=types[%i].toObject(m%s,o)",m,f,m);else{var v=!1;switch(R.type){case"double":case"float":_("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",m,m,m,m);break;case"uint64":v=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":_('if(typeof m%s==="number")',m)("d%s=o.longs===String?String(m%s):m%s",m,m,m)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",m,m,m,m,v?"true":"",m);break;case"bytes":_("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",m,m,m,m,m);break;default:_("d%s=m%s",m,m)}}return _}D.fromObject=function(_){var R=_.fieldsArray,f=O.codegen(["d"],_.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!R.length)return f("return new this.ctor");f("var m=new this.ctor");for(var m=0;m<R.length;++m){var v=R[m].resolve(),x=O.safeProp(v.name);v.map?(f("if(d%s){",x)('if(typeof d%s!=="object")',x)("throw TypeError(%j)",v.fullName+": object expected")("m%s={}",x)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",x),T(f,v,m,x+"[ks[i]]")("}")("}")):v.repeated?(f("if(d%s){",x)("if(!Array.isArray(d%s))",x)("throw TypeError(%j)",v.fullName+": array expected")("m%s=[]",x)("for(var i=0;i<d%s.length;++i){",x),T(f,v,m,x+"[i]")("}")("}")):(v.resolvedType instanceof w||f("if(d%s!=null){",x),T(f,v,m,x),v.resolvedType instanceof w||f("}"))}return f("return m")},D.toObject=function(_){var R=_.fieldsArray.slice().sort(O.compareFieldsById);if(!R.length)return O.codegen()("return {}");for(var f=O.codegen(["m","o"],_.name+"$toObject")("if(!o)")("o={}")("var d={}"),m=[],v=[],x=[],U=0;U<R.length;++U)R[U].partOf||(R[U].resolve().repeated?m:R[U].map?v:x).push(R[U]);if(m.length){for(f("if(o.arrays||o.defaults){"),U=0;U<m.length;++U)f("d%s=[]",O.safeProp(m[U].name));f("}")}if(v.length){for(f("if(o.objects||o.defaults){"),U=0;U<v.length;++U)f("d%s={}",O.safeProp(v[U].name));f("}")}if(x.length){for(f("if(o.defaults){"),U=0;U<x.length;++U){var I=x[U],E=O.safeProp(I.name);if(I.resolvedType instanceof w)f("d%s=o.enums===String?%j:%j",E,I.resolvedType.valuesById[I.typeDefault],I.typeDefault);else if(I.long)f("if(util.Long){")("var n=new util.Long(%i,%i,%j)",I.typeDefault.low,I.typeDefault.high,I.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",E)("}else")("d%s=o.longs===String?%j:%i",E,I.typeDefault.toString(),I.typeDefault.toNumber());else if(I.bytes){var j="["+Array.prototype.slice.call(I.typeDefault).join(",")+"]";f("if(o.bytes===String)d%s=%j",E,String.fromCharCode.apply(String,I.typeDefault))("else{")("d%s=%s",E,j)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",E,E)("}")}else f("d%s=%j",E,I.typeDefault)}f("}")}var P=!1;for(U=0;U<R.length;++U){var G=_._fieldsArray.indexOf(I=R[U]);E=O.safeProp(I.name),I.map?(P||(P=!0,f("var ks2")),f("if(m%s&&(ks2=Object.keys(m%s)).length){",E,E)("d%s={}",E)("for(var j=0;j<ks2.length;++j){"),N(f,I,G,E+"[ks2[j]]")("}")):I.repeated?(f("if(m%s&&m%s.length){",E,E)("d%s=[]",E)("for(var j=0;j<m%s.length;++j){",E),N(f,I,G,E+"[j]")("}")):(f("if(m%s!=null&&m.hasOwnProperty(%j)){",E,I.name),N(f,I,G,E),I.partOf&&f("if(o.oneofs)")("d%s=%j",O.safeProp(I.partOf.name),I.name)),f("}")}return f("return d")}},{14:14,33:33}],12:[function(ue,ie,V){ie.exports=function(N){var _=O.codegen(["r","l"],N.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(N.fieldsArray.filter(function(U){return U.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");N.group&&_("if((t&7)===4)")("break"),_("switch(t>>>3){");for(var R=0;R<N.fieldsArray.length;++R){var f=N._fieldsArray[R].resolve(),m=f.resolvedType instanceof D?"int32":f.type,v="m"+O.safeProp(f.name);_("case %i:",f.id),f.map?(_("if(%s===util.emptyObject)",v)("%s={}",v)("var c2 = r.uint32()+r.pos"),w.defaults[f.keyType]!==undefined?_("k=%j",w.defaults[f.keyType]):_("k=null"),w.defaults[m]!==undefined?_("value=%j",w.defaults[m]):_("value=null"),_("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",f.keyType)("case 2:"),w.basic[m]===undefined?_("value=types[%i].decode(r,r.uint32())",R):_("value=r.%s()",m),_("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),_(w.long[f.keyType]!==undefined?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",v)):f.repeated?(_("if(!(%s&&%s.length))",v,v)("%s=[]",v),w.packed[m]!==undefined&&_("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",v,m)("}else"),w.basic[m]===undefined?_(f.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",v,R):_("%s.push(r.%s())",v,m)):w.basic[m]===undefined?_(f.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",v,R):_("%s=r.%s()",v,m),_("break")}for(_("default:")("r.skipType(t&7)")("break")("}")("}"),R=0;R<N._fieldsArray.length;++R){var x=N._fieldsArray[R];x.required&&_("if(!m.hasOwnProperty(%j))",x.name)("throw util.ProtocolError(%j,{instance:m})",T(x))}return _("return m")};var D=ue(14),w=ue(32),O=ue(33);function T(N){return"missing required '"+N.name+"'"}},{14:14,32:32,33:33}],13:[function(ue,ie,V){ie.exports=function(N){for(var _,R=O.codegen(["m","w"],N.name+"$encode")("if(!w)")("w=Writer.create()"),f=N.fieldsArray.slice().sort(O.compareFieldsById),m=0;m<f.length;++m){var v=f[m].resolve(),x=N._fieldsArray.indexOf(v),U=v.resolvedType instanceof D?"int32":v.type,I=w.basic[U];_="m"+O.safeProp(v.name),v.map?(R("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",_,v.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",_)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(v.id<<3|2)>>>0,8|w.mapKey[v.keyType],v.keyType),I===undefined?R("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",x,_):R(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|I,U,_),R("}")("}")):v.repeated?(R("if(%s!=null&&%s.length){",_,_),v.packed&&w.packed[U]!==undefined?R("w.uint32(%i).fork()",(v.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",_)("w.%s(%s[i])",U,_)("w.ldelim()"):(R("for(var i=0;i<%s.length;++i)",_),I===undefined?T(R,v,x,_+"[i]"):R("w.uint32(%i).%s(%s[i])",(v.id<<3|I)>>>0,U,_)),R("}")):(v.optional&&R("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",_,v.name),I===undefined?T(R,v,x,_):R("w.uint32(%i).%s(%s)",(v.id<<3|I)>>>0,U,_))}return R("return w")};var D=ue(14),w=ue(32),O=ue(33);function T(N,_,R,f){return _.resolvedType.group?N("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",R,f,(_.id<<3|3)>>>0,(_.id<<3|4)>>>0):N("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",R,f,(_.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(ue,ie,V){ie.exports=T;var D=ue(22);((T.prototype=Object.create(D.prototype)).constructor=T).className="Enum";var w=ue(21),O=ue(33);function T(N,_,R,f,m){if(D.call(this,N,R),_&&"object"!=typeof _)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=f,this.comments=m||{},this.reserved=undefined,_)for(var v=Object.keys(_),x=0;x<v.length;++x)"number"==typeof _[v[x]]&&(this.valuesById[this.values[v[x]]=_[v[x]]]=v[x])}T.fromJSON=function(N,_){var R=new T(N,_.values,_.options,_.comment,_.comments);return R.reserved=_.reserved,R},T.prototype.toJSON=function(N){var _=!!N&&Boolean(N.keepComments);return O.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",_?this.comment:undefined,"comments",_?this.comments:undefined])},T.prototype.add=function(N,_,R){if(!O.isString(N))throw TypeError("name must be a string");if(!O.isInteger(_))throw TypeError("id must be an integer");if(this.values[N]!==undefined)throw Error("duplicate name '"+N+"' in "+this);if(this.isReservedId(_))throw Error("id "+_+" is reserved in "+this);if(this.isReservedName(N))throw Error("name '"+N+"' is reserved in "+this);if(this.valuesById[_]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+_+" in "+this);this.values[N]=_}else this.valuesById[this.values[N]=_]=N;return this.comments[N]=R||null,this},T.prototype.remove=function(N){if(!O.isString(N))throw TypeError("name must be a string");var _=this.values[N];if(null==_)throw Error("name '"+N+"' does not exist in "+this);return delete this.valuesById[_],delete this.values[N],delete this.comments[N],this},T.prototype.isReservedId=function(N){return w.isReservedId(this.reserved,N)},T.prototype.isReservedName=function(N){return w.isReservedName(this.reserved,N)}},{21:21,22:22,33:33}],15:[function(ue,ie,V){ie.exports=R;var D=ue(22);((R.prototype=Object.create(D.prototype)).constructor=R).className="Field";var w,O=ue(14),T=ue(32),N=ue(33),_=/^required|optional|repeated$/;function R(f,m,v,x,U,I,E){if(N.isObject(x)?(E=U,I=x,x=U=undefined):N.isObject(U)&&(E=I,I=U,U=undefined),D.call(this,f,I),!N.isInteger(m)||m<0)throw TypeError("id must be a non-negative integer");if(!N.isString(v))throw TypeError("type must be a string");if(x!==undefined&&!_.test(x=x.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(U!==undefined&&!N.isString(U))throw TypeError("extend must be a string");this.rule=x&&"optional"!==x?x:undefined,this.type=v,this.id=m,this.extend=U||undefined,this.required="required"===x,this.optional=!this.required,this.repeated="repeated"===x,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!N.Long&&T.long[v]!==undefined,this.bytes="bytes"===v,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=E}R.fromJSON=function(f,m){return new R(f,m.id,m.type,m.rule,m.extend,m.options,m.comment)},Object.defineProperty(R.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),R.prototype.setOption=function(f,m,v){return"packed"===f&&(this._packed=null),D.prototype.setOption.call(this,f,m,v)},R.prototype.toJSON=function(f){var m=!!f&&Boolean(f.keepComments);return N.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",m?this.comment:undefined])},R.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=T.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof w?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof O&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof O)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=N.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var f;N.base64.test(this.typeDefault)?N.base64.decode(this.typeDefault,f=N.newBuffer(N.base64.length(this.typeDefault)),0):N.utf8.write(this.typeDefault,f=N.newBuffer(N.utf8.length(this.typeDefault)),0),this.typeDefault=f}return this.defaultValue=this.map?N.emptyObject:this.repeated?N.emptyArray:this.typeDefault,this.parent instanceof w&&(this.parent.ctor.prototype[this.name]=this.defaultValue),D.prototype.resolve.call(this)},R.d=function(f,m,v,x){return"function"==typeof m?m=N.decorateType(m).name:m&&"object"==typeof m&&(m=N.decorateEnum(m).name),function(U,I){N.decorateType(U.constructor).add(new R(I,f,m,v,{default:x}))}},R._configure=function(f){w=f}},{14:14,22:22,32:32,33:33}],16:[function(ue,ie,V){var D=ie.exports=ue(17);D.build="light",D.load=function(w,O,T){return"function"==typeof O?(T=O,O=new D.Root):O||(O=new D.Root),O.load(w,T)},D.loadSync=function(w,O){return O||(O=new D.Root),O.loadSync(w)},D.encoder=ue(13),D.decoder=ue(12),D.verifier=ue(36),D.converter=ue(11),D.ReflectionObject=ue(22),D.Namespace=ue(21),D.Root=ue(26),D.Enum=ue(14),D.Type=ue(31),D.Field=ue(15),D.OneOf=ue(23),D.MapField=ue(18),D.Service=ue(30),D.Method=ue(20),D.Message=ue(19),D.wrappers=ue(37),D.types=ue(32),D.util=ue(33),D.ReflectionObject._configure(D.Root),D.Namespace._configure(D.Type,D.Service,D.Enum),D.Root._configure(D.Type),D.Field._configure(D.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(ue,ie,V){var D=V;function w(){D.util._configure(),D.Writer._configure(D.BufferWriter),D.Reader._configure(D.BufferReader)}D.build="minimal",D.Writer=ue(38),D.BufferWriter=ue(39),D.Reader=ue(24),D.BufferReader=ue(25),D.util=ue(35),D.rpc=ue(28),D.roots=ue(27),D.configure=w,w()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(ue,ie,V){ie.exports=T;var D=ue(15);((T.prototype=Object.create(D.prototype)).constructor=T).className="MapField";var w=ue(32),O=ue(33);function T(N,_,R,f,m,v){if(D.call(this,N,_,f,undefined,undefined,m,v),!O.isString(R))throw TypeError("keyType must be a string");this.keyType=R,this.resolvedKeyType=null,this.map=!0}T.fromJSON=function(N,_){return new T(N,_.id,_.keyType,_.type,_.options,_.comment)},T.prototype.toJSON=function(N){var _=!!N&&Boolean(N.keepComments);return O.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",_?this.comment:undefined])},T.prototype.resolve=function(){if(this.resolved)return this;if(w.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return D.prototype.resolve.call(this)},T.d=function(N,_,R){return"function"==typeof R?R=O.decorateType(R).name:R&&"object"==typeof R&&(R=O.decorateEnum(R).name),function(f,m){O.decorateType(f.constructor).add(new T(m,N,_,R))}}},{15:15,32:32,33:33}],19:[function(ue,ie,V){ie.exports=w;var D=ue(35);function w(O){if(O)for(var T=Object.keys(O),N=0;N<T.length;++N)this[T[N]]=O[T[N]]}w.create=function(O){return this.$type.create(O)},w.encode=function(O,T){return this.$type.encode(O,T)},w.encodeDelimited=function(O,T){return this.$type.encodeDelimited(O,T)},w.decode=function(O){return this.$type.decode(O)},w.decodeDelimited=function(O){return this.$type.decodeDelimited(O)},w.verify=function(O){return this.$type.verify(O)},w.fromObject=function(O){return this.$type.fromObject(O)},w.toObject=function(O,T){return this.$type.toObject(O,T)},w.prototype.toJSON=function(){return this.$type.toObject(this,D.toJSONOptions)}},{35:35}],20:[function(ue,ie,V){ie.exports=O;var D=ue(22);((O.prototype=Object.create(D.prototype)).constructor=O).className="Method";var w=ue(33);function O(T,N,_,R,f,m,v,x){if(w.isObject(f)?(v=f,f=m=undefined):w.isObject(m)&&(v=m,m=undefined),N!==undefined&&!w.isString(N))throw TypeError("type must be a string");if(!w.isString(_))throw TypeError("requestType must be a string");if(!w.isString(R))throw TypeError("responseType must be a string");D.call(this,T,v),this.type=N||"rpc",this.requestType=_,this.requestStream=!!f||undefined,this.responseType=R,this.responseStream=!!m||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=x}O.fromJSON=function(T,N){return new O(T,N.type,N.requestType,N.responseType,N.requestStream,N.responseStream,N.options,N.comment)},O.prototype.toJSON=function(T){var N=!!T&&Boolean(T.keepComments);return w.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",N?this.comment:undefined])},O.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),D.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(ue,ie,V){ie.exports=f;var D=ue(22);((f.prototype=Object.create(D.prototype)).constructor=f).className="Namespace";var w,O,T,N=ue(15),_=ue(33);function R(v,x){if(!v||!v.length)return undefined;for(var U={},I=0;I<v.length;++I)U[v[I].name]=v[I].toJSON(x);return U}function f(v,x){D.call(this,v,x),this.nested=undefined,this._nestedArray=null}function m(v){return v._nestedArray=null,v}f.fromJSON=function(v,x){return new f(v,x.options).addJSON(x.nested)},f.arrayToJSON=R,f.isReservedId=function(v,x){if(v)for(var U=0;U<v.length;++U)if("string"!=typeof v[U]&&v[U][0]<=x&&v[U][1]>x)return!0;return!1},f.isReservedName=function(v,x){if(v)for(var U=0;U<v.length;++U)if(v[U]===x)return!0;return!1},Object.defineProperty(f.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=_.toArray(this.nested))}}),f.prototype.toJSON=function(v){return _.toObject(["options",this.options,"nested",R(this.nestedArray,v)])},f.prototype.addJSON=function(v){if(v)for(var x,U=Object.keys(v),I=0;I<U.length;++I)this.add(((x=v[U[I]]).fields!==undefined?w.fromJSON:x.values!==undefined?T.fromJSON:x.methods!==undefined?O.fromJSON:x.id!==undefined?N.fromJSON:f.fromJSON)(U[I],x));return this},f.prototype.get=function(v){return this.nested&&this.nested[v]||null},f.prototype.getEnum=function(v){if(this.nested&&this.nested[v]instanceof T)return this.nested[v].values;throw Error("no such enum: "+v)},f.prototype.add=function(v){if(!(v instanceof N&&v.extend!==undefined||v instanceof w||v instanceof T||v instanceof O||v instanceof f))throw TypeError("object must be a valid nested object");if(this.nested){var x=this.get(v.name);if(x){if(!(x instanceof f&&v instanceof f)||x instanceof w||x instanceof O)throw Error("duplicate name '"+v.name+"' in "+this);for(var U=x.nestedArray,I=0;I<U.length;++I)v.add(U[I]);this.remove(x),this.nested||(this.nested={}),v.setOptions(x.options,!0)}}else this.nested={};return this.nested[v.name]=v,v.onAdd(this),m(this)},f.prototype.remove=function(v){if(!(v instanceof D))throw TypeError("object must be a ReflectionObject");if(v.parent!==this)throw Error(v+" is not a member of "+this);return delete this.nested[v.name],Object.keys(this.nested).length||(this.nested=undefined),v.onRemove(this),m(this)},f.prototype.define=function(v,x){if(_.isString(v))v=v.split(".");else if(!Array.isArray(v))throw TypeError("illegal path");if(v&&v.length&&""===v[0])throw Error("path must be relative");for(var U=this;v.length>0;){var I=v.shift();if(U.nested&&U.nested[I]){if(!((U=U.nested[I])instanceof f))throw Error("path conflicts with non-namespace objects")}else U.add(U=new f(I))}return x&&U.addJSON(x),U},f.prototype.resolveAll=function(){for(var v=this.nestedArray,x=0;x<v.length;)v[x]instanceof f?v[x++].resolveAll():v[x++].resolve();return this.resolve()},f.prototype.lookup=function(v,x,U){if("boolean"==typeof x?(U=x,x=undefined):x&&!Array.isArray(x)&&(x=[x]),_.isString(v)&&v.length){if("."===v)return this.root;v=v.split(".")}else if(!v.length)return this;if(""===v[0])return this.root.lookup(v.slice(1),x);var I=this.get(v[0]);if(I){if(1===v.length){if(!x||x.indexOf(I.constructor)>-1)return I}else if(I instanceof f&&(I=I.lookup(v.slice(1),x,!0)))return I}else for(var E=0;E<this.nestedArray.length;++E)if(this._nestedArray[E]instanceof f&&(I=this._nestedArray[E].lookup(v,x,!0)))return I;return null===this.parent||U?null:this.parent.lookup(v,x)},f.prototype.lookupType=function(v){var x=this.lookup(v,[w]);if(!x)throw Error("no such type: "+v);return x},f.prototype.lookupEnum=function(v){var x=this.lookup(v,[T]);if(!x)throw Error("no such Enum '"+v+"' in "+this);return x},f.prototype.lookupTypeOrEnum=function(v){var x=this.lookup(v,[w,T]);if(!x)throw Error("no such Type or Enum '"+v+"' in "+this);return x},f.prototype.lookupService=function(v){var x=this.lookup(v,[O]);if(!x)throw Error("no such Service '"+v+"' in "+this);return x},f._configure=function(v,x,U){w=v,O=x,T=U}},{15:15,22:22,33:33}],22:[function(ue,ie,V){ie.exports=O,O.className="ReflectionObject";var D,w=ue(33);function O(T,N){if(!w.isString(T))throw TypeError("name must be a string");if(N&&!w.isObject(N))throw TypeError("options must be an object");this.options=N,this.parsedOptions=null,this.name=T,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(O.prototype,{root:{get:function(){for(var T=this;null!==T.parent;)T=T.parent;return T}},fullName:{get:function(){for(var T=[this.name],N=this.parent;N;)T.unshift(N.name),N=N.parent;return T.join(".")}}}),O.prototype.toJSON=function(){throw Error()},O.prototype.onAdd=function(T){this.parent&&this.parent!==T&&this.parent.remove(this),this.parent=T,this.resolved=!1;var N=T.root;N instanceof D&&N._handleAdd(this)},O.prototype.onRemove=function(T){var N=T.root;N instanceof D&&N._handleRemove(this),this.parent=null,this.resolved=!1},O.prototype.resolve=function(){return this.resolved||this.root instanceof D&&(this.resolved=!0),this},O.prototype.getOption=function(T){return this.options?this.options[T]:undefined},O.prototype.setOption=function(T,N,_){return _&&this.options&&this.options[T]!==undefined||((this.options||(this.options={}))[T]=N),this},O.prototype.setParsedOption=function(T,N,_){this.parsedOptions||(this.parsedOptions=[]);var R=this.parsedOptions;if(_){var f=R.find(function(x){return Object.prototype.hasOwnProperty.call(x,T)});f?w.setProperty(f[T],_,N):((f={})[T]=w.setProperty({},_,N),R.push(f))}else{var v={};v[T]=N,R.push(v)}return this},O.prototype.setOptions=function(T,N){if(T)for(var _=Object.keys(T),R=0;R<_.length;++R)this.setOption(_[R],T[_[R]],N);return this},O.prototype.toString=function(){var T=this.constructor.className,N=this.fullName;return N.length?T+" "+N:T},O._configure=function(T){D=T}},{33:33}],23:[function(ue,ie,V){ie.exports=T;var D=ue(22);((T.prototype=Object.create(D.prototype)).constructor=T).className="OneOf";var w=ue(15),O=ue(33);function T(_,R,f,m){if(Array.isArray(R)||(f=R,R=undefined),D.call(this,_,f),R!==undefined&&!Array.isArray(R))throw TypeError("fieldNames must be an Array");this.oneof=R||[],this.fieldsArray=[],this.comment=m}function N(_){if(_.parent)for(var R=0;R<_.fieldsArray.length;++R)_.fieldsArray[R].parent||_.parent.add(_.fieldsArray[R])}T.fromJSON=function(_,R){return new T(_,R.oneof,R.options,R.comment)},T.prototype.toJSON=function(_){var R=!!_&&Boolean(_.keepComments);return O.toObject(["options",this.options,"oneof",this.oneof,"comment",R?this.comment:undefined])},T.prototype.add=function(_){if(!(_ instanceof w))throw TypeError("field must be a Field");return _.parent&&_.parent!==this.parent&&_.parent.remove(_),this.oneof.push(_.name),this.fieldsArray.push(_),_.partOf=this,N(this),this},T.prototype.remove=function(_){if(!(_ instanceof w))throw TypeError("field must be a Field");var R=this.fieldsArray.indexOf(_);if(R<0)throw Error(_+" is not a member of "+this);return this.fieldsArray.splice(R,1),(R=this.oneof.indexOf(_.name))>-1&&this.oneof.splice(R,1),_.partOf=null,this},T.prototype.onAdd=function(_){D.prototype.onAdd.call(this,_);for(var R=0;R<this.oneof.length;++R){var f=_.get(this.oneof[R]);f&&!f.partOf&&(f.partOf=this,this.fieldsArray.push(f))}N(this)},T.prototype.onRemove=function(_){for(var R,f=0;f<this.fieldsArray.length;++f)(R=this.fieldsArray[f]).parent&&R.parent.remove(R);D.prototype.onRemove.call(this,_)},T.d=function(){for(var _=new Array(arguments.length),R=0;R<arguments.length;)_[R]=arguments[R++];return function(f,m){O.decorateType(f.constructor).add(new T(m,_)),Object.defineProperty(f,m,{get:O.oneOfGetter(_),set:O.oneOfSetter(_)})}}},{15:15,22:22,33:33}],24:[function(ue,ie,V){ie.exports=_;var D,w=ue(35),O=w.LongBits,T=w.utf8;function N(I,E){return RangeError("index out of range: "+I.pos+" + "+(E||1)+" > "+I.len)}function _(I){this.buf=I,this.pos=0,this.len=I.length}var R,f="undefined"!=typeof Uint8Array?function(I){if(I instanceof Uint8Array||Array.isArray(I))return new _(I);throw Error("illegal buffer")}:function(I){if(Array.isArray(I))return new _(I);throw Error("illegal buffer")},m=function(){return w.Buffer?function(I){return(_.create=function(E){return w.Buffer.isBuffer(E)?new D(E):f(E)})(I)}:f};function v(){var I=new O(0,0),E=0;if(!(this.len-this.pos>4)){for(;E<3;++E){if(this.pos>=this.len)throw N(this);if(I.lo=(I.lo|(127&this.buf[this.pos])<<7*E)>>>0,this.buf[this.pos++]<128)return I}return I.lo=(I.lo|(127&this.buf[this.pos++])<<7*E)>>>0,I}for(;E<4;++E)if(I.lo=(I.lo|(127&this.buf[this.pos])<<7*E)>>>0,this.buf[this.pos++]<128)return I;if(I.lo=(I.lo|(127&this.buf[this.pos])<<28)>>>0,I.hi=(I.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return I;if(E=0,this.len-this.pos>4){for(;E<5;++E)if(I.hi=(I.hi|(127&this.buf[this.pos])<<7*E+3)>>>0,this.buf[this.pos++]<128)return I}else for(;E<5;++E){if(this.pos>=this.len)throw N(this);if(I.hi=(I.hi|(127&this.buf[this.pos])<<7*E+3)>>>0,this.buf[this.pos++]<128)return I}throw Error("invalid varint encoding")}function x(I,E){return(I[E-4]|I[E-3]<<8|I[E-2]<<16|I[E-1]<<24)>>>0}function U(){if(this.pos+8>this.len)throw N(this,8);return new O(x(this.buf,this.pos+=4),x(this.buf,this.pos+=4))}_.create=m(),_.prototype._slice=w.Array.prototype.subarray||w.Array.prototype.slice,_.prototype.uint32=(R=4294967295,function(){if(R=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(R=(R|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(R=(R|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(R=(R|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(R=(R|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return R;if((this.pos+=5)>this.len)throw this.pos=this.len,N(this,10);return R}),_.prototype.int32=function(){return 0|this.uint32()},_.prototype.sint32=function(){var I=this.uint32();return I>>>1^-(1&I)|0},_.prototype.bool=function(){return 0!==this.uint32()},_.prototype.fixed32=function(){if(this.pos+4>this.len)throw N(this,4);return x(this.buf,this.pos+=4)},_.prototype.sfixed32=function(){if(this.pos+4>this.len)throw N(this,4);return 0|x(this.buf,this.pos+=4)},_.prototype.float=function(){if(this.pos+4>this.len)throw N(this,4);var I=w.float.readFloatLE(this.buf,this.pos);return this.pos+=4,I},_.prototype.double=function(){if(this.pos+8>this.len)throw N(this,4);var I=w.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,I},_.prototype.bytes=function(){var I=this.uint32(),E=this.pos,j=this.pos+I;if(j>this.len)throw N(this,I);return this.pos+=I,Array.isArray(this.buf)?this.buf.slice(E,j):E===j?new this.buf.constructor(0):this._slice.call(this.buf,E,j)},_.prototype.string=function(){var I=this.bytes();return T.read(I,0,I.length)},_.prototype.skip=function(I){if("number"==typeof I){if(this.pos+I>this.len)throw N(this,I);this.pos+=I}else do{if(this.pos>=this.len)throw N(this)}while(128&this.buf[this.pos++]);return this},_.prototype.skipType=function(I){switch(I){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(I=7&this.uint32());)this.skipType(I);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+I+" at offset "+this.pos)}return this},_._configure=function(I){D=I,_.create=m(),D._configure();var E=w.Long?"toLong":"toNumber";w.merge(_.prototype,{int64:function(){return v.call(this)[E](!1)},uint64:function(){return v.call(this)[E](!0)},sint64:function(){return v.call(this).zzDecode()[E](!1)},fixed64:function(){return U.call(this)[E](!0)},sfixed64:function(){return U.call(this)[E](!1)}})}},{35:35}],25:[function(ue,ie,V){ie.exports=O;var D=ue(24);(O.prototype=Object.create(D.prototype)).constructor=O;var w=ue(35);function O(T){D.call(this,T)}O._configure=function(){w.Buffer&&(O.prototype._slice=w.Buffer.prototype.slice)},O.prototype.string=function(){var T=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+T,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+T,this.len))},O._configure()},{24:24,35:35}],26:[function(ue,ie,V){ie.exports=m;var D=ue(21);((m.prototype=Object.create(D.prototype)).constructor=m).className="Root";var w,O,T,N=ue(15),_=ue(14),R=ue(23),f=ue(33);function m(I){D.call(this,"",I),this.deferred=[],this.files=[]}function v(){}m.fromJSON=function(I,E){return E||(E=new m),I.options&&E.setOptions(I.options),E.addJSON(I.nested)},m.prototype.resolvePath=f.path.resolve,m.prototype.fetch=f.fetch,m.prototype.load=function I(E,j,P){"function"==typeof j&&(P=j,j=undefined);var G=this;if(!P)return f.asPromise(I,G,E,j);var M=P===v;function Y(W,C){if(P){var l=P;if(P=null,M)throw W;l(W,C)}}function oe(W){var C=W.lastIndexOf("google/protobuf/");if(C>-1){var l=W.substring(C);if(l in T)return l}return null}function Q(W,C){try{if(f.isString(C)&&"{"===C.charAt(0)&&(C=JSON.parse(C)),f.isString(C)){O.filename=W;var l,$=O(C,G,j),p=0;if($.imports)for(;p<$.imports.length;++p)(l=oe($.imports[p])||G.resolvePath(W,$.imports[p]))&&te(l);if($.weakImports)for(p=0;p<$.weakImports.length;++p)(l=oe($.weakImports[p])||G.resolvePath(W,$.weakImports[p]))&&te(l,!0)}else G.setOptions(C.options).addJSON(C.nested)}catch(S){Y(S)}M||z||Y(null,G)}function te(W,C){if(!(G.files.indexOf(W)>-1))if(G.files.push(W),W in T)M?Q(W,T[W]):(++z,setTimeout(function(){--z,Q(W,T[W])}));else if(M){var l;try{l=f.fs.readFileSync(W).toString("utf8")}catch($){return void(C||Y($))}Q(W,l)}else++z,G.fetch(W,function($,p){--z,P&&($?C?z||Y(null,G):Y($):Q(W,p))})}var z=0;f.isString(E)&&(E=[E]);for(var b,u=0;u<E.length;++u)(b=G.resolvePath("",E[u]))&&te(b);return M?G:(z||Y(null,G),undefined)},m.prototype.loadSync=function(I,E){if(!f.isNode)throw Error("not supported");return this.load(I,E,v)},m.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(I){return"'extend "+I.extend+"' in "+I.parent.fullName}).join(", "));return D.prototype.resolveAll.call(this)};var x=/^[A-Z]/;function U(I,E){var j=E.parent.lookup(E.extend);if(j){var P=new N(E.fullName,E.id,E.type,E.rule,undefined,E.options);return P.declaringField=E,E.extensionField=P,j.add(P),!0}return!1}m.prototype._handleAdd=function(I){if(I instanceof N)I.extend===undefined||I.extensionField||U(0,I)||this.deferred.push(I);else if(I instanceof _)x.test(I.name)&&(I.parent[I.name]=I.values);else if(!(I instanceof R)){if(I instanceof w)for(var E=0;E<this.deferred.length;)U(0,this.deferred[E])?this.deferred.splice(E,1):++E;for(var j=0;j<I.nestedArray.length;++j)this._handleAdd(I._nestedArray[j]);x.test(I.name)&&(I.parent[I.name]=I)}},m.prototype._handleRemove=function(I){if(I instanceof N){if(I.extend!==undefined)if(I.extensionField)I.extensionField.parent.remove(I.extensionField),I.extensionField=null;else{var E=this.deferred.indexOf(I);E>-1&&this.deferred.splice(E,1)}}else if(I instanceof _)x.test(I.name)&&delete I.parent[I.name];else if(I instanceof D){for(var j=0;j<I.nestedArray.length;++j)this._handleRemove(I._nestedArray[j]);x.test(I.name)&&delete I.parent[I.name]}},m._configure=function(I,E,j){w=I,O=E,T=j}},{14:14,15:15,21:21,23:23,33:33}],27:[function(ue,ie,V){ie.exports={}},{}],28:[function(ue,ie,V){V.Service=ue(29)},{29:29}],29:[function(ue,ie,V){ie.exports=w;var D=ue(35);function w(O,T,N){if("function"!=typeof O)throw TypeError("rpcImpl must be a function");D.EventEmitter.call(this),this.rpcImpl=O,this.requestDelimited=Boolean(T),this.responseDelimited=Boolean(N)}(w.prototype=Object.create(D.EventEmitter.prototype)).constructor=w,w.prototype.rpcCall=function O(T,N,_,R,f){if(!R)throw TypeError("request must be specified");var m=this;if(!f)return D.asPromise(O,m,T,N,_,R);if(!m.rpcImpl)return setTimeout(function(){f(Error("already ended"))},0),undefined;try{return m.rpcImpl(T,N[m.requestDelimited?"encodeDelimited":"encode"](R).finish(),function(v,x){if(v)return m.emit("error",v,T),f(v);if(null===x)return m.end(!0),undefined;if(!(x instanceof _))try{x=_[m.responseDelimited?"decodeDelimited":"decode"](x)}catch(U){return m.emit("error",U,T),f(U)}return m.emit("data",x,T),f(null,x)})}catch(v){return m.emit("error",v,T),setTimeout(function(){f(v)},0),undefined}},w.prototype.end=function(O){return this.rpcImpl&&(O||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(ue,ie,V){ie.exports=N;var D=ue(21);((N.prototype=Object.create(D.prototype)).constructor=N).className="Service";var w=ue(20),O=ue(33),T=ue(28);function N(R,f){D.call(this,R,f),this.methods={},this._methodsArray=null}function _(R){return R._methodsArray=null,R}N.fromJSON=function(R,f){var m=new N(R,f.options);if(f.methods)for(var v=Object.keys(f.methods),x=0;x<v.length;++x)m.add(w.fromJSON(v[x],f.methods[v[x]]));return f.nested&&m.addJSON(f.nested),m.comment=f.comment,m},N.prototype.toJSON=function(R){var f=D.prototype.toJSON.call(this,R),m=!!R&&Boolean(R.keepComments);return O.toObject(["options",f&&f.options||undefined,"methods",D.arrayToJSON(this.methodsArray,R)||{},"nested",f&&f.nested||undefined,"comment",m?this.comment:undefined])},Object.defineProperty(N.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=O.toArray(this.methods))}}),N.prototype.get=function(R){return this.methods[R]||D.prototype.get.call(this,R)},N.prototype.resolveAll=function(){for(var R=this.methodsArray,f=0;f<R.length;++f)R[f].resolve();return D.prototype.resolve.call(this)},N.prototype.add=function(R){if(this.get(R.name))throw Error("duplicate name '"+R.name+"' in "+this);return R instanceof w?(this.methods[R.name]=R,R.parent=this,_(this)):D.prototype.add.call(this,R)},N.prototype.remove=function(R){if(R instanceof w){if(this.methods[R.name]!==R)throw Error(R+" is not a member of "+this);return delete this.methods[R.name],R.parent=null,_(this)}return D.prototype.remove.call(this,R)},N.prototype.create=function(R,f,m){for(var v,x=new T.Service(R,f,m),U=0;U<this.methodsArray.length;++U){var I=O.lcFirst((v=this._methodsArray[U]).resolve().name).replace(/[^$\w_]/g,"");x[I]=O.codegen(["r","c"],O.isReserved(I)?I+"_":I)("return this.rpcCall(m,q,s,r,c)")({m:v,q:v.resolvedRequestType.ctor,s:v.resolvedResponseType.ctor})}return x}},{20:20,21:21,28:28,33:33}],31:[function(ue,ie,V){ie.exports=P;var D=ue(21);((P.prototype=Object.create(D.prototype)).constructor=P).className="Type";var w=ue(14),O=ue(23),T=ue(15),N=ue(18),_=ue(30),R=ue(19),f=ue(24),m=ue(38),v=ue(33),x=ue(13),U=ue(12),I=ue(36),E=ue(11),j=ue(37);function P(M,Y){D.call(this,M,Y),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function G(M){return M._fieldsById=M._fieldsArray=M._oneofsArray=null,delete M.encode,delete M.decode,delete M.verify,M}Object.defineProperties(P.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var M=Object.keys(this.fields),Y=0;Y<M.length;++Y){var oe=this.fields[M[Y]],Q=oe.id;if(this._fieldsById[Q])throw Error("duplicate id "+Q+" in "+this);this._fieldsById[Q]=oe}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=v.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=v.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=P.generateConstructor(this)())},set:function(M){var Y=M.prototype;Y instanceof R||((M.prototype=new R).constructor=M,v.merge(M.prototype,Y)),M.$type=M.prototype.$type=this,v.merge(M,R,!0),this._ctor=M;for(var oe=0;oe<this.fieldsArray.length;++oe)this._fieldsArray[oe].resolve();var Q={};for(oe=0;oe<this.oneofsArray.length;++oe)Q[this._oneofsArray[oe].resolve().name]={get:v.oneOfGetter(this._oneofsArray[oe].oneof),set:v.oneOfSetter(this._oneofsArray[oe].oneof)};oe&&Object.defineProperties(M.prototype,Q)}}}),P.generateConstructor=function(M){for(var Y,oe=v.codegen(["p"],M.name),Q=0;Q<M.fieldsArray.length;++Q)(Y=M._fieldsArray[Q]).map?oe("this%s={}",v.safeProp(Y.name)):Y.repeated&&oe("this%s=[]",v.safeProp(Y.name));return oe("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},P.fromJSON=function(M,Y){var oe=new P(M,Y.options);oe.extensions=Y.extensions,oe.reserved=Y.reserved;for(var Q=Object.keys(Y.fields),te=0;te<Q.length;++te)oe.add((void 0!==Y.fields[Q[te]].keyType?N.fromJSON:T.fromJSON)(Q[te],Y.fields[Q[te]]));if(Y.oneofs)for(Q=Object.keys(Y.oneofs),te=0;te<Q.length;++te)oe.add(O.fromJSON(Q[te],Y.oneofs[Q[te]]));if(Y.nested)for(Q=Object.keys(Y.nested),te=0;te<Q.length;++te){var z=Y.nested[Q[te]];oe.add((z.id!==undefined?T.fromJSON:z.fields!==undefined?P.fromJSON:z.values!==undefined?w.fromJSON:z.methods!==undefined?_.fromJSON:D.fromJSON)(Q[te],z))}return Y.extensions&&Y.extensions.length&&(oe.extensions=Y.extensions),Y.reserved&&Y.reserved.length&&(oe.reserved=Y.reserved),Y.group&&(oe.group=!0),Y.comment&&(oe.comment=Y.comment),oe},P.prototype.toJSON=function(M){var Y=D.prototype.toJSON.call(this,M),oe=!!M&&Boolean(M.keepComments);return v.toObject(["options",Y&&Y.options||undefined,"oneofs",D.arrayToJSON(this.oneofsArray,M),"fields",D.arrayToJSON(this.fieldsArray.filter(function(Q){return!Q.declaringField}),M)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",Y&&Y.nested||undefined,"comment",oe?this.comment:undefined])},P.prototype.resolveAll=function(){for(var M=this.fieldsArray,Y=0;Y<M.length;)M[Y++].resolve();var oe=this.oneofsArray;for(Y=0;Y<oe.length;)oe[Y++].resolve();return D.prototype.resolveAll.call(this)},P.prototype.get=function(M){return this.fields[M]||this.oneofs&&this.oneofs[M]||this.nested&&this.nested[M]||null},P.prototype.add=function(M){if(this.get(M.name))throw Error("duplicate name '"+M.name+"' in "+this);if(M instanceof T&&M.extend===undefined){if(this._fieldsById?this._fieldsById[M.id]:this.fieldsById[M.id])throw Error("duplicate id "+M.id+" in "+this);if(this.isReservedId(M.id))throw Error("id "+M.id+" is reserved in "+this);if(this.isReservedName(M.name))throw Error("name '"+M.name+"' is reserved in "+this);return M.parent&&M.parent.remove(M),this.fields[M.name]=M,M.message=this,M.onAdd(this),G(this)}return M instanceof O?(this.oneofs||(this.oneofs={}),this.oneofs[M.name]=M,M.onAdd(this),G(this)):D.prototype.add.call(this,M)},P.prototype.remove=function(M){if(M instanceof T&&M.extend===undefined){if(!this.fields||this.fields[M.name]!==M)throw Error(M+" is not a member of "+this);return delete this.fields[M.name],M.parent=null,M.onRemove(this),G(this)}if(M instanceof O){if(!this.oneofs||this.oneofs[M.name]!==M)throw Error(M+" is not a member of "+this);return delete this.oneofs[M.name],M.parent=null,M.onRemove(this),G(this)}return D.prototype.remove.call(this,M)},P.prototype.isReservedId=function(M){return D.isReservedId(this.reserved,M)},P.prototype.isReservedName=function(M){return D.isReservedName(this.reserved,M)},P.prototype.create=function(M){return new this.ctor(M)},P.prototype.setup=function(){for(var M=this.fullName,Y=[],oe=0;oe<this.fieldsArray.length;++oe)Y.push(this._fieldsArray[oe].resolve().resolvedType);this.encode=x(this)({Writer:m,types:Y,util:v}),this.decode=U(this)({Reader:f,types:Y,util:v}),this.verify=I(this)({types:Y,util:v}),this.fromObject=E.fromObject(this)({types:Y,util:v}),this.toObject=E.toObject(this)({types:Y,util:v});var Q=j[M];if(Q){var te=Object.create(this);te.fromObject=this.fromObject,this.fromObject=Q.fromObject.bind(te),te.toObject=this.toObject,this.toObject=Q.toObject.bind(te)}return this},P.prototype.encode=function(M,Y){return this.setup().encode(M,Y)},P.prototype.encodeDelimited=function(M,Y){return this.encode(M,Y&&Y.len?Y.fork():Y).ldelim()},P.prototype.decode=function(M,Y){return this.setup().decode(M,Y)},P.prototype.decodeDelimited=function(M){return M instanceof f||(M=f.create(M)),this.decode(M,M.uint32())},P.prototype.verify=function(M){return this.setup().verify(M)},P.prototype.fromObject=function(M){return this.setup().fromObject(M)},P.prototype.toObject=function(M,Y){return this.setup().toObject(M,Y)},P.d=function(M){return function(Y){v.decorateType(Y,M)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(ue,ie,V){var D=V,w=ue(33),O=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function T(N,_){var R=0,f={};for(_|=0;R<N.length;)f[O[R+_]]=N[R++];return f}D.basic=T([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),D.defaults=T([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",w.emptyArray,null]),D.long=T([0,0,0,1,1],7),D.mapKey=T([0,0,0,5,5,0,0,0,1,1,0,2],2),D.packed=T([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(ue,ie,V){var D,w,O=ie.exports=ue(35),T=ue(27);O.codegen=ue(3),O.fetch=ue(5),O.path=ue(8),O.fs=O.inquire("fs"),O.toArray=function(m){if(m){for(var v=Object.keys(m),x=new Array(v.length),U=0;U<v.length;)x[U]=m[v[U++]];return x}return[]},O.toObject=function(m){for(var v={},x=0;x<m.length;){var U=m[x++],I=m[x++];I!==undefined&&(v[U]=I)}return v};var N=/\\/g,_=/"/g;O.isReserved=function(m){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(m)},O.safeProp=function(m){return!/^[$\w_]+$/.test(m)||O.isReserved(m)?'["'+m.replace(N,"\\\\").replace(_,'\\"')+'"]':"."+m},O.ucFirst=function(m){return m.charAt(0).toUpperCase()+m.substring(1)};var R=/_([a-z])/g;O.camelCase=function(m){return m.substring(0,1)+m.substring(1).replace(R,function(v,x){return x.toUpperCase()})},O.compareFieldsById=function(m,v){return m.id-v.id},O.decorateType=function(m,v){if(m.$type)return v&&m.$type.name!==v&&(O.decorateRoot.remove(m.$type),m.$type.name=v,O.decorateRoot.add(m.$type)),m.$type;D||(D=ue(31));var x=new D(v||m.name);return O.decorateRoot.add(x),x.ctor=m,Object.defineProperty(m,"$type",{value:x,enumerable:!1}),Object.defineProperty(m.prototype,"$type",{value:x,enumerable:!1}),x};var f=0;O.decorateEnum=function(m){if(m.$type)return m.$type;w||(w=ue(14));var v=new w("Enum"+f++,m);return O.decorateRoot.add(v),Object.defineProperty(m,"$type",{value:v,enumerable:!1}),v},O.setProperty=function(m,v,x){if("object"!=typeof m)throw TypeError("dst must be an object");if(!v)throw TypeError("path must be specified");return function U(I,E,j){var P=E.shift();if(E.length>0)I[P]=U(I[P]||{},E,j);else{var G=I[P];G&&(j=[].concat(G).concat(j)),I[P]=j}return I}(m,v=v.split("."),x)},Object.defineProperty(O,"decorateRoot",{get:function(){return T.decorated||(T.decorated=new(ue(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(ue,ie,V){ie.exports=w;var D=ue(35);function w(_,R){this.lo=_>>>0,this.hi=R>>>0}var O=w.zero=new w(0,0);O.toNumber=function(){return 0},O.zzEncode=O.zzDecode=function(){return this},O.length=function(){return 1};var T=w.zeroHash="\0\0\0\0\0\0\0\0";w.fromNumber=function(_){if(0===_)return O;var R=_<0;R&&(_=-_);var f=_>>>0,m=(_-f)/4294967296>>>0;return R&&(m=~m>>>0,f=~f>>>0,++f>4294967295&&(f=0,++m>4294967295&&(m=0))),new w(f,m)},w.from=function(_){if("number"==typeof _)return w.fromNumber(_);if(D.isString(_)){if(!D.Long)return w.fromNumber(parseInt(_,10));_=D.Long.fromString(_)}return _.low||_.high?new w(_.low>>>0,_.high>>>0):O},w.prototype.toNumber=function(_){if(!_&&this.hi>>>31){var R=1+~this.lo>>>0,f=~this.hi>>>0;return R||(f=f+1>>>0),-(R+4294967296*f)}return this.lo+4294967296*this.hi},w.prototype.toLong=function(_){return D.Long?new D.Long(0|this.lo,0|this.hi,Boolean(_)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(_)}};var N=String.prototype.charCodeAt;w.fromHash=function(_){return _===T?O:new w((N.call(_,0)|N.call(_,1)<<8|N.call(_,2)<<16|N.call(_,3)<<24)>>>0,(N.call(_,4)|N.call(_,5)<<8|N.call(_,6)<<16|N.call(_,7)<<24)>>>0)},w.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},w.prototype.zzEncode=function(){var _=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^_)>>>0,this.lo=(this.lo<<1^_)>>>0,this},w.prototype.zzDecode=function(){var _=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^_)>>>0,this.hi=(this.hi>>>1^_)>>>0,this},w.prototype.length=function(){var _=this.lo,R=(this.lo>>>28|this.hi<<4)>>>0,f=this.hi>>>24;return 0===f?0===R?_<16384?_<128?1:2:_<2097152?3:4:R<16384?R<128?5:6:R<2097152?7:8:f<128?9:10}},{35:35}],35:[function(ue,ie,V){var D=V;function w(T,N,_){for(var R=Object.keys(N),f=0;f<R.length;++f)T[R[f]]!==undefined&&_||(T[R[f]]=N[R[f]]);return T}function O(T){function N(_,R){if(!(this instanceof N))return new N(_,R);Object.defineProperty(this,"message",{get:function(){return _}}),Error.captureStackTrace?Error.captureStackTrace(this,N):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),R&&w(this,R)}return(N.prototype=Object.create(Error.prototype)).constructor=N,Object.defineProperty(N.prototype,"name",{get:function(){return T}}),N.prototype.toString=function(){return this.name+": "+this.message},N}D.asPromise=ue(1),D.base64=ue(2),D.EventEmitter=ue(4),D.float=ue(6),D.inquire=ue(7),D.utf8=ue(10),D.pool=ue(9),D.LongBits=ue(34),D.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),D.global=D.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,D.emptyArray=Object.freeze?Object.freeze([]):[],D.emptyObject=Object.freeze?Object.freeze({}):{},D.isInteger=Number.isInteger||function(T){return"number"==typeof T&&isFinite(T)&&Math.floor(T)===T},D.isString=function(T){return"string"==typeof T||T instanceof String},D.isObject=function(T){return T&&"object"==typeof T},D.isset=D.isSet=function(T,N){var _=T[N];return!(null==_||!T.hasOwnProperty(N))&&("object"!=typeof _||(Array.isArray(_)?_.length:Object.keys(_).length)>0)},D.Buffer=function(){try{var T=D.inquire("buffer").Buffer;return T.prototype.utf8Write?T:null}catch(N){return null}}(),D._Buffer_from=null,D._Buffer_allocUnsafe=null,D.newBuffer=function(T){return"number"==typeof T?D.Buffer?D._Buffer_allocUnsafe(T):new D.Array(T):D.Buffer?D._Buffer_from(T):"undefined"==typeof Uint8Array?T:new Uint8Array(T)},D.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,D.Long=D.global.dcodeIO&&D.global.dcodeIO.Long||D.global.Long||D.inquire("long"),D.key2Re=/^true|false|0|1$/,D.key32Re=/^-?(?:0|[1-9][0-9]*)$/,D.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,D.longToHash=function(T){return T?D.LongBits.from(T).toHash():D.LongBits.zeroHash},D.longFromHash=function(T,N){var _=D.LongBits.fromHash(T);return D.Long?D.Long.fromBits(_.lo,_.hi,N):_.toNumber(Boolean(N))},D.merge=w,D.lcFirst=function(T){return T.charAt(0).toLowerCase()+T.substring(1)},D.newError=O,D.ProtocolError=O("ProtocolError"),D.oneOfGetter=function(T){for(var N={},_=0;_<T.length;++_)N[T[_]]=1;return function(){for(var R=Object.keys(this),f=R.length-1;f>-1;--f)if(1===N[R[f]]&&this[R[f]]!==undefined&&null!==this[R[f]])return R[f]}},D.oneOfSetter=function(T){return function(N){for(var _=0;_<T.length;++_)T[_]!==N&&delete this[T[_]]}},D.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},D._configure=function(){var T=D.Buffer;T?(D._Buffer_from=T.from!==Uint8Array.from&&T.from||function(N,_){return new T(N,_)},D._Buffer_allocUnsafe=T.allocUnsafe||function(N){return new T(N)}):D._Buffer_from=D._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(ue,ie,V){ie.exports=function(_){var R=w.codegen(["m"],_.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),m={};_.oneofsArray.length&&R("var p={}");for(var v=0;v<_.fieldsArray.length;++v){var x=_._fieldsArray[v].resolve(),U="m"+w.safeProp(x.name);if(x.optional&&R("if(%s!=null&&m.hasOwnProperty(%j)){",U,x.name),x.map)R("if(!util.isObject(%s))",U)("return%j",O(x,"object"))("var k=Object.keys(%s)",U)("for(var i=0;i<k.length;++i){"),N(R,x,"k[i]"),T(R,x,v,U+"[k[i]]")("}");else if(x.repeated)R("if(!Array.isArray(%s))",U)("return%j",O(x,"array"))("for(var i=0;i<%s.length;++i){",U),T(R,x,v,U+"[i]")("}");else{if(x.partOf){var I=w.safeProp(x.partOf.name);1===m[x.partOf.name]&&R("if(p%s===1)",I)("return%j",x.partOf.name+": multiple values"),m[x.partOf.name]=1,R("p%s=1",I)}T(R,x,v,U)}x.optional&&R("}")}return R("return null")};var D=ue(14),w=ue(33);function O(_,R){return _.name+": "+R+(_.repeated&&"array"!==R?"[]":_.map&&"object"!==R?"{k:"+_.keyType+"}":"")+" expected"}function T(_,R,f,m){if(R.resolvedType)if(R.resolvedType instanceof D){_("switch(%s){",m)("default:")("return%j",O(R,"enum value"));for(var v=Object.keys(R.resolvedType.values),x=0;x<v.length;++x)_("case %i:",R.resolvedType.values[v[x]]);_("break")("}")}else _("{")("var e=types[%i].verify(%s);",f,m)("if(e)")("return%j+e",R.name+".")("}");else switch(R.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":_("if(!util.isInteger(%s))",m)("return%j",O(R,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":_("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",m,m,m,m)("return%j",O(R,"integer|Long"));break;case"float":case"double":_('if(typeof %s!=="number")',m)("return%j",O(R,"number"));break;case"bool":_('if(typeof %s!=="boolean")',m)("return%j",O(R,"boolean"));break;case"string":_("if(!util.isString(%s))",m)("return%j",O(R,"string"));break;case"bytes":_('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',m,m,m)("return%j",O(R,"buffer"))}return _}function N(_,R,f){switch(R.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":_("if(!util.key32Re.test(%s))",f)("return%j",O(R,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":_("if(!util.key64Re.test(%s))",f)("return%j",O(R,"integer|Long key"));break;case"bool":_("if(!util.key2Re.test(%s))",f)("return%j",O(R,"boolean key"))}return _}},{14:14,33:33}],37:[function(ue,ie,V){var D=V,w=ue(19);D[".google.protobuf.Any"]={fromObject:function(O){if(O&&O["@type"]){var T=O["@type"].substring(O["@type"].lastIndexOf("/")+1),N=this.lookup(T);if(N){var _="."===O["@type"].charAt(0)?O["@type"].substr(1):O["@type"];return-1===_.indexOf("/")&&(_="/"+_),this.create({type_url:_,value:N.encode(N.fromObject(O)).finish()})}}return this.fromObject(O)},toObject:function(O,T){var N="",_="";if(T&&T.json&&O.type_url&&O.value){_=O.type_url.substring(O.type_url.lastIndexOf("/")+1),N=O.type_url.substring(0,O.type_url.lastIndexOf("/")+1);var R=this.lookup(_);R&&(O=R.decode(O.value))}if(!(O instanceof this.ctor)&&O instanceof w){var f=O.$type.toObject(O,T);return""===N&&(N="type.googleapis.com/"),_=N+("."===O.$type.fullName[0]?O.$type.fullName.substr(1):O.$type.fullName),f["@type"]=_,f}return this.toObject(O,T)}}},{19:19}],38:[function(ue,ie,V){ie.exports=m;var D,w=ue(35),O=w.LongBits,T=w.base64,N=w.utf8;function _(P,G,M){this.fn=P,this.len=G,this.next=undefined,this.val=M}function R(){}function f(P){this.head=P.head,this.tail=P.tail,this.len=P.len,this.next=P.states}function m(){this.len=0,this.head=new _(R,0,0),this.tail=this.head,this.states=null}var v=function(){return w.Buffer?function(){return(m.create=function(){return new D})()}:function(){return new m}};function x(P,G,M){G[M]=255&P}function U(P,G){this.len=P,this.next=undefined,this.val=G}function I(P,G,M){for(;P.hi;)G[M++]=127&P.lo|128,P.lo=(P.lo>>>7|P.hi<<25)>>>0,P.hi>>>=7;for(;P.lo>127;)G[M++]=127&P.lo|128,P.lo=P.lo>>>7;G[M++]=P.lo}function E(P,G,M){G[M]=255&P,G[M+1]=P>>>8&255,G[M+2]=P>>>16&255,G[M+3]=P>>>24}m.create=v(),m.alloc=function(P){return new w.Array(P)},w.Array!==Array&&(m.alloc=w.pool(m.alloc,w.Array.prototype.subarray)),m.prototype._push=function(P,G,M){return this.tail=this.tail.next=new _(P,G,M),this.len+=G,this},(U.prototype=Object.create(_.prototype)).fn=function(P,G,M){for(;P>127;)G[M++]=127&P|128,P>>>=7;G[M]=P},m.prototype.uint32=function(P){return this.len+=(this.tail=this.tail.next=new U((P>>>=0)<128?1:P<16384?2:P<2097152?3:P<268435456?4:5,P)).len,this},m.prototype.int32=function(P){return P<0?this._push(I,10,O.fromNumber(P)):this.uint32(P)},m.prototype.sint32=function(P){return this.uint32((P<<1^P>>31)>>>0)},m.prototype.int64=m.prototype.uint64=function(P){var G=O.from(P);return this._push(I,G.length(),G)},m.prototype.sint64=function(P){var G=O.from(P).zzEncode();return this._push(I,G.length(),G)},m.prototype.bool=function(P){return this._push(x,1,P?1:0)},m.prototype.sfixed32=m.prototype.fixed32=function(P){return this._push(E,4,P>>>0)},m.prototype.sfixed64=m.prototype.fixed64=function(P){var G=O.from(P);return this._push(E,4,G.lo)._push(E,4,G.hi)},m.prototype.float=function(P){return this._push(w.float.writeFloatLE,4,P)},m.prototype.double=function(P){return this._push(w.float.writeDoubleLE,8,P)};var j=w.Array.prototype.set?function(P,G,M){G.set(P,M)}:function(P,G,M){for(var Y=0;Y<P.length;++Y)G[M+Y]=P[Y]};m.prototype.bytes=function(P){var G=P.length>>>0;if(!G)return this._push(x,1,0);if(w.isString(P)){var M=m.alloc(G=T.length(P));T.decode(P,M,0),P=M}return this.uint32(G)._push(j,G,P)},m.prototype.string=function(P){var G=N.length(P);return G?this.uint32(G)._push(N.write,G,P):this._push(x,1,0)},m.prototype.fork=function(){return this.states=new f(this),this.head=this.tail=new _(R,0,0),this.len=0,this},m.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new _(R,0,0),this.len=0),this},m.prototype.ldelim=function(){var P=this.head,G=this.tail,M=this.len;return this.reset().uint32(M),M&&(this.tail.next=P.next,this.tail=G,this.len+=M),this},m.prototype.finish=function(){for(var P=this.head.next,G=this.constructor.alloc(this.len),M=0;P;)P.fn(P.val,G,M),M+=P.len,P=P.next;return G},m._configure=function(P){D=P,m.create=v(),D._configure()}},{35:35}],39:[function(ue,ie,V){ie.exports=O;var D=ue(38);(O.prototype=Object.create(D.prototype)).constructor=O;var w=ue(35);function O(){D.call(this)}function T(N,_,R){N.length<40?w.utf8.write(N,_,R):_.utf8Write?_.utf8Write(N,R):_.write(N,R)}O._configure=function(){O.alloc=w._Buffer_allocUnsafe,O.writeBytesBuffer=w.Buffer&&w.Buffer.prototype instanceof Uint8Array&&"set"===w.Buffer.prototype.set.name?function(N,_,R){_.set(N,R)}:function(N,_,R){if(N.copy)N.copy(_,R,0,N.length);else for(var f=0;f<N.length;)_[R++]=N[f++]}},O.prototype.bytes=function(N){w.isString(N)&&(N=w._Buffer_from(N,"base64"));var _=N.length>>>0;return this.uint32(_),_&&this._push(O.writeBytesBuffer,_,N),this},O.prototype.string=function(N){var _=w.Buffer.byteLength(N);return this.uint32(_),_&&this._push(T,_,N),this},O._configure()},{35:35,38:38}]},ie={},D=function w(O){var T=ie[O];return T||ue[O][0].call(T=ie[O]={exports:{}},w,T,T.exports),T.exports}(16),D.util.global.protobuf=D,__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_639250__(61)],(__WEBPACK_AMD_DEFINE_RESULT__=function(w){return w&&w.isLong&&(D.util.Long=w,D.configure()),D}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=D)})()}).call(this,__nested_webpack_require_639250__(33),__nested_webpack_require_639250__(60)(module))},function(ue,ie){ue.exports=function(V){return V.webpackPolyfill||(V.deprecate=function(){},V.paths=[],V.children||(V.children=[]),Object.defineProperty(V,"loaded",{enumerable:!0,get:function(){return V.l}}),Object.defineProperty(V,"id",{enumerable:!0,get:function(){return V.i}}),V.webpackPolyfill=1),V}},function(ue,ie){ue.exports=D;var V=null;try{V=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(b){}function D(b,u,W){this.low=0|b,this.high=0|u,this.unsigned=!!W}function w(b){return!0===(b&&b.__isLong__)}Object.defineProperty(D.prototype,"__isLong__",{value:!0}),D.isLong=w;var O={},T={};function N(b,u){var W,C,l;return u?(l=0<=(b>>>=0)&&b<256)&&(C=T[b])?C:(W=R(b,(0|b)<0?-1:0,!0),l&&(T[b]=W),W):(l=-128<=(b|=0)&&b<128)&&(C=O[b])?C:(W=R(b,b<0?-1:0,!1),l&&(O[b]=W),W)}function _(b,u){if(isNaN(b))return u?P:j;if(u){if(b<0)return P;if(b>=U)return Q}else{if(b<=-I)return te;if(b+1>=I)return oe}return b<0?_(-b,u).neg():R(b%x|0,b/x|0,u)}function R(b,u,W){return new D(b,u,W)}D.fromInt=N,D.fromNumber=_,D.fromBits=R;var f=Math.pow;function m(b,u,W){if(0===b.length)throw Error("empty string");if("NaN"===b||"Infinity"===b||"+Infinity"===b||"-Infinity"===b)return j;if("number"==typeof u?(W=u,u=!1):u=!!u,(W=W||10)<2||36<W)throw RangeError("radix");var C;if((C=b.indexOf("-"))>0)throw Error("interior hyphen");if(0===C)return m(b.substring(1),u,W).neg();for(var l=_(f(W,8)),$=j,p=0;p<b.length;p+=8){var S=Math.min(8,b.length-p),L=parseInt(b.substring(p,p+S),W);if(S<8){var ee=_(f(W,S));$=$.mul(ee).add(_(L))}else $=($=$.mul(l)).add(_(L))}return $.unsigned=u,$}function v(b,u){return"number"==typeof b?_(b,u):"string"==typeof b?m(b,u):R(b.low,b.high,"boolean"==typeof u?u:b.unsigned)}D.fromString=m,D.fromValue=v;var x=4294967296,U=x*x,I=U/2,E=N(1<<24),j=N(0);D.ZERO=j;var P=N(0,!0);D.UZERO=P;var G=N(1);D.ONE=G;var M=N(1,!0);D.UONE=M;var Y=N(-1);D.NEG_ONE=Y;var oe=R(-1,2147483647,!1);D.MAX_VALUE=oe;var Q=R(-1,-1,!0);D.MAX_UNSIGNED_VALUE=Q;var te=R(0,-2147483648,!1);D.MIN_VALUE=te;var z=D.prototype;z.toInt=function(){return this.unsigned?this.low>>>0:this.low},z.toNumber=function(){return this.unsigned?(this.high>>>0)*x+(this.low>>>0):this.high*x+(this.low>>>0)},z.toString=function(b){if((b=b||10)<2||36<b)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(te)){var u=_(b),W=this.div(u),C=W.mul(u).sub(this);return W.toString(b)+C.toInt().toString(b)}return"-"+this.neg().toString(b)}for(var l=_(f(b,6),this.unsigned),$=this,p="";;){var S=$.div(l),L=($.sub(S.mul(l)).toInt()>>>0).toString(b);if(($=S).isZero())return L+p;for(;L.length<6;)L="0"+L;p=""+L+p}},z.getHighBits=function(){return this.high},z.getHighBitsUnsigned=function(){return this.high>>>0},z.getLowBits=function(){return this.low},z.getLowBitsUnsigned=function(){return this.low>>>0},z.getNumBitsAbs=function(){if(this.isNegative())return this.eq(te)?64:this.neg().getNumBitsAbs();for(var b=0!=this.high?this.high:this.low,u=31;u>0&&0==(b&1<<u);u--);return 0!=this.high?u+33:u+1},z.isZero=function(){return 0===this.high&&0===this.low},z.eqz=z.isZero,z.isNegative=function(){return!this.unsigned&&this.high<0},z.isPositive=function(){return this.unsigned||this.high>=0},z.isOdd=function(){return 1==(1&this.low)},z.isEven=function(){return 0==(1&this.low)},z.equals=function(b){return w(b)||(b=v(b)),(this.unsigned===b.unsigned||this.high>>>31!=1||b.high>>>31!=1)&&this.high===b.high&&this.low===b.low},z.eq=z.equals,z.notEquals=function(b){return!this.eq(b)},z.neq=z.notEquals,z.ne=z.notEquals,z.lessThan=function(b){return this.comp(b)<0},z.lt=z.lessThan,z.lessThanOrEqual=function(b){return this.comp(b)<=0},z.lte=z.lessThanOrEqual,z.le=z.lessThanOrEqual,z.greaterThan=function(b){return this.comp(b)>0},z.gt=z.greaterThan,z.greaterThanOrEqual=function(b){return this.comp(b)>=0},z.gte=z.greaterThanOrEqual,z.ge=z.greaterThanOrEqual,z.compare=function(b){if(w(b)||(b=v(b)),this.eq(b))return 0;var u=this.isNegative(),W=b.isNegative();return u&&!W?-1:!u&&W?1:this.unsigned?b.high>>>0>this.high>>>0||b.high===this.high&&b.low>>>0>this.low>>>0?-1:1:this.sub(b).isNegative()?-1:1},z.comp=z.compare,z.negate=function(){return!this.unsigned&&this.eq(te)?te:this.not().add(G)},z.neg=z.negate,z.add=function(b){w(b)||(b=v(b));var L=0,ee=0,re=0,fe=0;return re+=(fe+=(65535&this.low)+(65535&b.low))>>>16,ee+=(re+=(this.low>>>16)+(b.low>>>16))>>>16,L+=(ee+=(65535&this.high)+(65535&b.high))>>>16,L+=(this.high>>>16)+(b.high>>>16),R((re&=65535)<<16|(fe&=65535),(L&=65535)<<16|(ee&=65535),this.unsigned)},z.subtract=function(b){return w(b)||(b=v(b)),this.add(b.neg())},z.sub=z.subtract,z.multiply=function(b){if(this.isZero())return j;if(w(b)||(b=v(b)),V)return R(V.mul(this.low,this.high,b.low,b.high),V.get_high(),this.unsigned);if(b.isZero())return j;if(this.eq(te))return b.isOdd()?te:j;if(b.eq(te))return this.isOdd()?te:j;if(this.isNegative())return b.isNegative()?this.neg().mul(b.neg()):this.neg().mul(b).neg();if(b.isNegative())return this.mul(b.neg()).neg();if(this.lt(E)&&b.lt(E))return _(this.toNumber()*b.toNumber(),this.unsigned);var W=65535&this.high,C=this.low>>>16,l=65535&this.low,p=65535&b.high,S=b.low>>>16,L=65535&b.low,ee=0,re=0,fe=0,se=0;return fe+=(se+=l*L)>>>16,re+=(fe+=C*L)>>>16,fe&=65535,re+=(fe+=l*S)>>>16,ee+=(re+=W*L)>>>16,re&=65535,ee+=(re+=C*S)>>>16,re&=65535,ee+=(re+=l*p)>>>16,ee+=(this.high>>>16)*L+W*S+C*p+l*(b.high>>>16),R((fe&=65535)<<16|(se&=65535),(ee&=65535)<<16|(re&=65535),this.unsigned)},z.mul=z.multiply,z.divide=function(b){if(w(b)||(b=v(b)),b.isZero())throw Error("division by zero");var u,W,C;if(V)return this.unsigned||-2147483648!==this.high||-1!==b.low||-1!==b.high?R((this.unsigned?V.div_u:V.div_s)(this.low,this.high,b.low,b.high),V.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?P:j;if(this.unsigned){if(b.unsigned||(b=b.toUnsigned()),b.gt(this))return P;if(b.gt(this.shru(1)))return M;C=P}else{if(this.eq(te))return b.eq(G)||b.eq(Y)?te:b.eq(te)?G:(u=this.shr(1).div(b).shl(1)).eq(j)?b.isNegative()?G:Y:(W=this.sub(b.mul(u)),C=u.add(W.div(b)));if(b.eq(te))return this.unsigned?P:j;if(this.isNegative())return b.isNegative()?this.neg().div(b.neg()):this.neg().div(b).neg();if(b.isNegative())return this.div(b.neg()).neg();C=j}for(W=this;W.gte(b);){u=Math.max(1,Math.floor(W.toNumber()/b.toNumber()));for(var l=Math.ceil(Math.log(u)/Math.LN2),$=l<=48?1:f(2,l-48),p=_(u),S=p.mul(b);S.isNegative()||S.gt(W);)S=(p=_(u-=$,this.unsigned)).mul(b);p.isZero()&&(p=G),C=C.add(p),W=W.sub(S)}return C},z.div=z.divide,z.modulo=function(b){return w(b)||(b=v(b)),V?R((this.unsigned?V.rem_u:V.rem_s)(this.low,this.high,b.low,b.high),V.get_high(),this.unsigned):this.sub(this.div(b).mul(b))},z.mod=z.modulo,z.rem=z.modulo,z.not=function(){return R(~this.low,~this.high,this.unsigned)},z.and=function(b){return w(b)||(b=v(b)),R(this.low&b.low,this.high&b.high,this.unsigned)},z.or=function(b){return w(b)||(b=v(b)),R(this.low|b.low,this.high|b.high,this.unsigned)},z.xor=function(b){return w(b)||(b=v(b)),R(this.low^b.low,this.high^b.high,this.unsigned)},z.shiftLeft=function(b){return w(b)&&(b=b.toInt()),0==(b&=63)?this:b<32?R(this.low<<b,this.high<<b|this.low>>>32-b,this.unsigned):R(0,this.low<<b-32,this.unsigned)},z.shl=z.shiftLeft,z.shiftRight=function(b){return w(b)&&(b=b.toInt()),0==(b&=63)?this:b<32?R(this.low>>>b|this.high<<32-b,this.high>>b,this.unsigned):R(this.high>>b-32,this.high>=0?0:-1,this.unsigned)},z.shr=z.shiftRight,z.shiftRightUnsigned=function(b){if(w(b)&&(b=b.toInt()),0==(b&=63))return this;var u=this.high;return b<32?R(this.low>>>b|u<<32-b,u>>>b,this.unsigned):R(32===b?u:u>>>b-32,0,this.unsigned)},z.shru=z.shiftRightUnsigned,z.shr_u=z.shiftRightUnsigned,z.toSigned=function(){return this.unsigned?R(this.low,this.high,!1):this},z.toUnsigned=function(){return this.unsigned?this:R(this.low,this.high,!0)},z.toBytes=function(b){return b?this.toBytesLE():this.toBytesBE()},z.toBytesLE=function(){var b=this.high,u=this.low;return[255&u,u>>>8&255,u>>>16&255,u>>>24,255&b,b>>>8&255,b>>>16&255,b>>>24]},z.toBytesBE=function(){var b=this.high,u=this.low;return[b>>>24,b>>>16&255,b>>>8&255,255&b,u>>>24,u>>>16&255,u>>>8&255,255&u]},D.fromBytes=function(b,u,W){return W?D.fromBytesLE(b,u):D.fromBytesBE(b,u)},D.fromBytesLE=function(b,u){return new D(b[0]|b[1]<<8|b[2]<<16|b[3]<<24,b[4]|b[5]<<8|b[6]<<16|b[7]<<24,u)},D.fromBytesBE=function(b,u){return new D(b[4]<<24|b[5]<<16|b[6]<<8|b[7],b[0]<<24|b[1]<<16|b[2]<<8|b[3],u)}},function(ue){ue.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156,"JoinWebProxyAP":700,"WebSocketQuit":671}')},function(ue){ue.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"chooseServerIp":{"type":"string","id":15}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"WebSocketQuit":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"succ":{"type":"int32","id":7},"errorCode":{"type":"string","id":8},"ip":{"type":"string","id":9}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2},"vid":{"type":"int32","id":3}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}},"JoinWebProxyAP":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"sucess":{"type":"int32","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"apServerAddr":{"type":"string","id":10},"turnServerAddrList":{"type":"string","id":11},"errorCode":{"type":"string","id":12}}}}}}}')},function(ue,ie,V){var D=function(w){"use strict";var O=Object.prototype,T=O.hasOwnProperty,N="function"==typeof Symbol?Symbol:{},_=N.iterator||"@@iterator",R=N.asyncIterator||"@@asyncIterator",f=N.toStringTag||"@@toStringTag";function m(C,l,$,p){var re,fe,se,B,L=Object.create((l&&l.prototype instanceof U?l:U).prototype),ee=new b(p||[]);return L._invoke=(re=C,fe=$,se=ee,B="suspendedStart",function(H,K){if("executing"===B)throw new Error("Generator is already running");if("completed"===B){if("throw"===H)throw K;return{value:void 0,done:!0}}for(se.method=H,se.arg=K;;){var ve=se.delegate;if(ve){var le=Q(ve,se);if(le){if(le===x)continue;return le}}if("next"===se.method)se.sent=se._sent=se.arg;else if("throw"===se.method){if("suspendedStart"===B)throw B="completed",se.arg;se.dispatchException(se.arg)}else"return"===se.method&&se.abrupt("return",se.arg);B="executing";var ge=v(re,fe,se);if("normal"===ge.type){if(B=se.done?"completed":"suspendedYield",ge.arg===x)continue;return{value:ge.arg,done:se.done}}"throw"===ge.type&&(B="completed",se.method="throw",se.arg=ge.arg)}}),L}function v(C,l,$){try{return{type:"normal",arg:C.call(l,$)}}catch(p){return{type:"throw",arg:p}}}w.wrap=m;var x={};function U(){}function I(){}function E(){}var j={};j[_]=function(){return this};var P=Object.getPrototypeOf,G=P&&P(P(u([])));G&&G!==O&&T.call(G,_)&&(j=G);var M=E.prototype=U.prototype=Object.create(j);function Y(C){["next","throw","return"].forEach(function(l){C[l]=function($){return this._invoke(l,$)}})}function oe(C,l){var $;this._invoke=function(p,S){function L(){return new l(function(ee,re){!function fe(se,B,H,K){var ve=v(C[se],C,B);if("throw"!==ve.type){var le=ve.arg,ge=le.value;return ge&&"object"==typeof ge&&T.call(ge,"__await")?l.resolve(ge.__await).then(function(Ce){fe("next",Ce,H,K)},function(Ce){fe("throw",Ce,H,K)}):l.resolve(ge).then(function(Ce){le.value=Ce,H(le)},function(Ce){return fe("throw",Ce,H,K)})}K(ve.arg)}(p,S,ee,re)})}return $=$?$.then(L,L):L()}}function Q(C,l){var $=C.iterator[l.method];if(void 0===$){if(l.delegate=null,"throw"===l.method){if(C.iterator.return&&(l.method="return",l.arg=void 0,Q(C,l),"throw"===l.method))return x;l.method="throw",l.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}var p=v($,C.iterator,l.arg);if("throw"===p.type)return l.method="throw",l.arg=p.arg,l.delegate=null,x;var S=p.arg;return S?S.done?(l[C.resultName]=S.value,l.next=C.nextLoc,"return"!==l.method&&(l.method="next",l.arg=void 0),l.delegate=null,x):S:(l.method="throw",l.arg=new TypeError("iterator result is not an object"),l.delegate=null,x)}function te(C){var l={tryLoc:C[0]};1 in C&&(l.catchLoc=C[1]),2 in C&&(l.finallyLoc=C[2],l.afterLoc=C[3]),this.tryEntries.push(l)}function z(C){var l=C.completion||{};l.type="normal",delete l.arg,C.completion=l}function b(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(te,this),this.reset(!0)}function u(C){if(C){var l=C[_];if(l)return l.call(C);if("function"==typeof C.next)return C;if(!isNaN(C.length)){var $=-1,p=function S(){for(;++$<C.length;)if(T.call(C,$))return S.value=C[$],S.done=!1,S;return S.value=void 0,S.done=!0,S};return p.next=p}}return{next:W}}function W(){return{value:void 0,done:!0}}return I.prototype=M.constructor=E,E.constructor=I,E[f]=I.displayName="GeneratorFunction",w.isGeneratorFunction=function(C){var l="function"==typeof C&&C.constructor;return!!l&&(l===I||"GeneratorFunction"===(l.displayName||l.name))},w.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,E):(C.__proto__=E,f in C||(C[f]="GeneratorFunction")),C.prototype=Object.create(M),C},w.awrap=function(C){return{__await:C}},Y(oe.prototype),oe.prototype[R]=function(){return this},w.AsyncIterator=oe,w.async=function(C,l,$,p,S){void 0===S&&(S=Promise);var L=new oe(m(C,l,$,p),S);return w.isGeneratorFunction(l)?L:L.next().then(function(ee){return ee.done?ee.value:L.next()})},Y(M),M[f]="Generator",M[_]=function(){return this},M.toString=function(){return"[object Generator]"},w.keys=function(C){var l=[];for(var $ in C)l.push($);return l.reverse(),function p(){for(;l.length;){var S=l.pop();if(S in C)return p.value=S,p.done=!1,p}return p.done=!0,p}},w.values=u,b.prototype={constructor:b,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!C)for(var l in this)"t"===l.charAt(0)&&T.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if("throw"===C.type)throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var l=this;function $(fe,se){return L.type="throw",L.arg=C,l.next=fe,se&&(l.method="next",l.arg=void 0),!!se}for(var p=this.tryEntries.length-1;p>=0;--p){var S=this.tryEntries[p],L=S.completion;if("root"===S.tryLoc)return $("end");if(S.tryLoc<=this.prev){var ee=T.call(S,"catchLoc"),re=T.call(S,"finallyLoc");if(ee&&re){if(this.prev<S.catchLoc)return $(S.catchLoc,!0);if(this.prev<S.finallyLoc)return $(S.finallyLoc)}else if(ee){if(this.prev<S.catchLoc)return $(S.catchLoc,!0)}else{if(!re)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return $(S.finallyLoc)}}}},abrupt:function(C,l){for(var $=this.tryEntries.length-1;$>=0;--$){var p=this.tryEntries[$];if(p.tryLoc<=this.prev&&T.call(p,"finallyLoc")&&this.prev<p.finallyLoc){var S=p;break}}S&&("break"===C||"continue"===C)&&S.tryLoc<=l&&l<=S.finallyLoc&&(S=null);var L=S?S.completion:{};return L.type=C,L.arg=l,S?(this.method="next",this.next=S.finallyLoc,x):this.complete(L)},complete:function(C,l){if("throw"===C.type)throw C.arg;return"break"===C.type||"continue"===C.type?this.next=C.arg:"return"===C.type?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):"normal"===C.type&&l&&(this.next=l),x},finish:function(C){for(var l=this.tryEntries.length-1;l>=0;--l){var $=this.tryEntries[l];if($.finallyLoc===C)return this.complete($.completion,$.afterLoc),z($),x}},catch:function(C){for(var l=this.tryEntries.length-1;l>=0;--l){var $=this.tryEntries[l];if($.tryLoc===C){var p=$.completion;if("throw"===p.type){var S=p.arg;z($)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(C,l,$){return this.delegate={iterator:u(C),resultName:l,nextLoc:$},"next"===this.method&&(this.arg=void 0),x}},w}(ue.exports);try{regeneratorRuntime=D}catch(w){Function("r","regeneratorRuntime = r")(D)}},function(ue,ie){ue.exports=function(V){if(Array.isArray(V))return V}},function(ue,ie){ue.exports=function(V,D){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(V)){var w=[],O=!0,T=!1,N=void 0;try{for(var _,R=V[Symbol.iterator]();!(O=(_=R.next()).done)&&(w.push(_.value),!D||w.length!==D);O=!0);}catch(f){T=!0,N=f}finally{try{O||null==R.return||R.return()}finally{if(T)throw N}}return w}}},function(ue,ie){ue.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(ue,ie,V){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var D="object"==typeof window&&window.RTCPeerConnection,w="object"==typeof window&&window.webkitRTCPeerConnection,O="object"==typeof window&&window.mozRTCPeerConnection;ie.createRTCPeerConnection=function(T){var N=D||w||O;return N?new N(T):null}},function(ue,ie,V){var D;!function(w){"use strict";function O(){}var T=O.prototype,N=w.EventEmitter;function _(f,m){for(var v=f.length;v--;)if(f[v].listener===m)return v;return-1}function R(f){return function(){return this[f].apply(this,arguments)}}T.getListeners=function(f){var m,v,x=this._getEvents();if(f instanceof RegExp)for(v in m={},x)x.hasOwnProperty(v)&&f.test(v)&&(m[v]=x[v]);else m=x[f]||(x[f]=[]);return m},T.flattenListeners=function(f){var m,v=[];for(m=0;m<f.length;m+=1)v.push(f[m].listener);return v},T.getListenersAsObject=function(f){var m,v=this.getListeners(f);return v instanceof Array&&((m={})[f]=v),m||v},T.addListener=function(f,m){if(!function I(E){return"function"==typeof E||E instanceof RegExp||!(!E||"object"!=typeof E)&&I(E.listener)}(m))throw new TypeError("listener must be a function");var v,x=this.getListenersAsObject(f),U="object"==typeof m;for(v in x)x.hasOwnProperty(v)&&-1===_(x[v],m)&&x[v].push(U?m:{listener:m,once:!1});return this},T.on=R("addListener"),T.addOnceListener=function(f,m){return this.addListener(f,{listener:m,once:!0})},T.once=R("addOnceListener"),T.defineEvent=function(f){return this.getListeners(f),this},T.defineEvents=function(f){for(var m=0;m<f.length;m+=1)this.defineEvent(f[m]);return this},T.removeListener=function(f,m){var v,x,U=this.getListenersAsObject(f);for(x in U)U.hasOwnProperty(x)&&-1!==(v=_(U[x],m))&&U[x].splice(v,1);return this},T.off=R("removeListener"),T.addListeners=function(f,m){return this.manipulateListeners(!1,f,m)},T.removeListeners=function(f,m){return this.manipulateListeners(!0,f,m)},T.manipulateListeners=function(f,m,v){var x,U,I=f?this.removeListener:this.addListener,E=f?this.removeListeners:this.addListeners;if("object"!=typeof m||m instanceof RegExp)for(x=v.length;x--;)I.call(this,m,v[x]);else for(x in m)m.hasOwnProperty(x)&&(U=m[x])&&("function"==typeof U?I.call(this,x,U):E.call(this,x,U));return this},T.removeEvent=function(f){var m,v=typeof f,x=this._getEvents();if("string"===v)delete x[f];else if(f instanceof RegExp)for(m in x)x.hasOwnProperty(m)&&f.test(m)&&delete x[m];else delete this._events;return this},T.removeAllListeners=R("removeEvent"),T.emitEvent=function(f,m){var v,x,U,I,E=this.getListenersAsObject(f);for(I in E)if(E.hasOwnProperty(I))for(v=E[I].slice(0),U=0;U<v.length;U++)!0===(x=v[U]).once&&this.removeListener(f,x.listener),x.listener.apply(this,m||[])===this._getOnceReturnValue()&&this.removeListener(f,x.listener);return this},T.trigger=R("emitEvent"),T.emit=function(f){var m=Array.prototype.slice.call(arguments,1);return this.emitEvent(f,m)},T.setOnceReturnValue=function(f){return this._onceReturnValue=f,this},T._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},T._getEvents=function(){return this._events||(this._events={})},O.noConflict=function(){return w.EventEmitter=N,O},void 0===(D=function(){return O}.call(w,V,w,ue))||(ue.exports=D)}("undefined"!=typeof window?window:this||{})},function(ue,ie,V){var D=V(35);ue.exports=function(w){if(Array.isArray(w))return D(w)}},function(ue,ie){ue.exports=function(V){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(V))return Array.from(V)}},function(ue,ie){ue.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(ue,ie,V){(function(D){var w;ue.exports=w=w||function(O,T){var N;if("undefined"!=typeof window&&window.crypto&&(N=window.crypto),"undefined"!=typeof self&&self.crypto&&(N=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(N=globalThis.crypto),!N&&"undefined"!=typeof window&&window.msCrypto&&(N=window.msCrypto),!N&&void 0!==D&&D.crypto&&(N=D.crypto),!N)try{N=V(74)}catch(M){}var _=function(){if(N){if("function"==typeof N.getRandomValues)try{return N.getRandomValues(new Uint32Array(1))[0]}catch(M){}if("function"==typeof N.randomBytes)try{return N.randomBytes(4).readInt32LE()}catch(M){}}throw new Error("Native crypto module could not be used to get secure random number.")},R=Object.create||function(){function M(){}return function(Y){var oe;return M.prototype=Y,oe=new M,M.prototype=null,oe}}(),f={},m=f.lib={},v=m.Base={extend:function(M){var Y=R(this);return M&&Y.mixIn(M),Y.hasOwnProperty("init")&&this.init!==Y.init||(Y.init=function(){Y.$super.init.apply(this,arguments)}),Y.init.prototype=Y,Y.$super=this,Y},create:function(){var M=this.extend();return M.init.apply(M,arguments),M},init:function(){},mixIn:function(M){for(var Y in M)M.hasOwnProperty(Y)&&(this[Y]=M[Y]);M.hasOwnProperty("toString")&&(this.toString=M.toString)},clone:function(){return this.init.prototype.extend(this)}},x=m.WordArray=v.extend({init:function(M,Y){M=this.words=M||[],this.sigBytes=null!=Y?Y:4*M.length},toString:function(M){return(M||I).stringify(this)},concat:function(M){var Y=this.words,oe=M.words,Q=this.sigBytes,te=M.sigBytes;if(this.clamp(),Q%4)for(var z=0;z<te;z++)Y[Q+z>>>2]|=(oe[z>>>2]>>>24-z%4*8&255)<<24-(Q+z)%4*8;else for(var u=0;u<te;u+=4)Y[Q+u>>>2]=oe[u>>>2];return this.sigBytes+=te,this},clamp:function(){var M=this.words,Y=this.sigBytes;M[Y>>>2]&=4294967295<<32-Y%4*8,M.length=O.ceil(Y/4)},clone:function(){var M=v.clone.call(this);return M.words=this.words.slice(0),M},random:function(M){for(var Y=[],oe=0;oe<M;oe+=4)Y.push(_());return new x.init(Y,M)}}),U=f.enc={},I=U.Hex={stringify:function(M){for(var Y=M.words,oe=M.sigBytes,Q=[],te=0;te<oe;te++){var z=Y[te>>>2]>>>24-te%4*8&255;Q.push((z>>>4).toString(16)),Q.push((15&z).toString(16))}return Q.join("")},parse:function(M){for(var Y=M.length,oe=[],Q=0;Q<Y;Q+=2)oe[Q>>>3]|=parseInt(M.substr(Q,2),16)<<24-Q%8*4;return new x.init(oe,Y/2)}},E=U.Latin1={stringify:function(M){for(var Y=M.words,oe=M.sigBytes,Q=[],te=0;te<oe;te++)Q.push(String.fromCharCode(Y[te>>>2]>>>24-te%4*8&255));return Q.join("")},parse:function(M){for(var Y=M.length,oe=[],Q=0;Q<Y;Q++)oe[Q>>>2]|=(255&M.charCodeAt(Q))<<24-Q%4*8;return new x.init(oe,Y)}},j=U.Utf8={stringify:function(M){try{return decodeURIComponent(escape(E.stringify(M)))}catch(Y){throw new Error("Malformed UTF-8 data")}},parse:function(M){return E.parse(unescape(encodeURIComponent(M)))}},P=m.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new x.init,this._nDataBytes=0},_append:function(M){"string"==typeof M&&(M=j.parse(M)),this._data.concat(M),this._nDataBytes+=M.sigBytes},_process:function(M){var Y,oe=this._data,Q=oe.words,te=oe.sigBytes,z=this.blockSize,b=te/(4*z),u=(b=M?O.ceil(b):O.max((0|b)-this._minBufferSize,0))*z,W=O.min(4*u,te);if(u){for(var C=0;C<u;C+=z)this._doProcessBlock(Q,C);Y=Q.splice(0,u),oe.sigBytes-=W}return new x.init(Y,W)},clone:function(){var M=v.clone.call(this);return M._data=this._data.clone(),M},_minBufferSize:0}),G=(m.Hasher=P.extend({cfg:v.extend(),init:function(M){this.cfg=this.cfg.extend(M),this.reset()},reset:function(){P.reset.call(this),this._doReset()},update:function(M){return this._append(M),this._process(),this},finalize:function(M){return M&&this._append(M),this._doFinalize()},blockSize:16,_createHelper:function(M){return function(Y,oe){return new M.init(oe).finalize(Y)}},_createHmacHelper:function(M){return function(Y,oe){return new G.HMAC.init(M,oe).finalize(Y)}}}),f.algo={});return f}(Math)}).call(this,V(33))},function(ue,ie){},function(ue,ie,V){"use strict";var D=this&&this.__assign||function(){return(D=Object.assign||function(E){for(var j,P=1,G=arguments.length;P<G;P++)for(var M in j=arguments[P])Object.prototype.hasOwnProperty.call(j,M)&&(E[M]=j[M]);return E}).apply(this,arguments)},w=this&&this.__awaiter||function(E,j,P,G){return new(P||(P=Promise))(function(M,Y){function oe(z){try{te(G.next(z))}catch(b){Y(b)}}function Q(z){try{te(G.throw(z))}catch(b){Y(b)}}function te(z){var b;z.done?M(z.value):(b=z.value,b instanceof P?b:new P(function(u){u(b)})).then(oe,Q)}te((G=G.apply(E,j||[])).next())})},O=this&&this.__generator||function(E,j){var P,G,M,Y,oe={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return Y={next:Q(0),throw:Q(1),return:Q(2)},"function"==typeof Symbol&&(Y[Symbol.iterator]=function(){return this}),Y;function Q(te){return function(z){return function(b){if(P)throw new TypeError("Generator is already executing.");for(;oe;)try{if(P=1,G&&(M=2&b[0]?G.return:b[0]?G.throw||((M=G.return)&&M.call(G),0):G.next)&&!(M=M.call(G,b[1])).done)return M;switch(G=0,M&&(b=[2&b[0],M.value]),b[0]){case 0:case 1:M=b;break;case 4:return oe.label++,{value:b[1],done:!1};case 5:oe.label++,G=b[1],b=[0];continue;case 7:b=oe.ops.pop(),oe.trys.pop();continue;default:if(!((M=(M=oe.trys).length>0&&M[M.length-1])||6!==b[0]&&2!==b[0])){oe=0;continue}if(3===b[0]&&(!M||b[1]>M[0]&&b[1]<M[3])){oe.label=b[1];break}if(6===b[0]&&oe.label<M[1]){oe.label=M[1],M=b;break}if(M&&oe.label<M[2]){oe.label=M[2],oe.ops.push(b);break}M[2]&&oe.ops.pop(),oe.trys.pop();continue}b=j.call(E,oe)}catch(u){b=[6,u],G=0}finally{P=M=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([te,z])}}},T=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(ie,"__esModule",{value:!0});var N=V(76),_=V(27),R=V(95),f=V(20),m=V(24),v=V(31),x=T(V(0)),U=T(V(37)),I=function(){function E(j){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new R.PromiseMutex("LS"),this.cancelToken=U.default.CancelToken.source(),this.injectConfig=D({},_.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=j}return Object.defineProperty(E.prototype,"isNeedReset",{get:function(){for(var j=this,P=0,G=Array.from(this.streamingTasks.values());P<G.length;P++){var M=G[P];if(M.mode===_.LiveStreamingServiceMode.INJECT||M.mode===_.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find(function(Y){return Y.uid===j.spec.uid}))return!0}return!1},enumerable:!0,configurable:!0}),E.prototype.setTranscodingConfig=function(j){return w(this,void 0,void 0,function(){var P,G,M,Y,oe,Q=this;return O(this,function(te){switch(te.label){case 0:(P=D(D({},_.DEFAULT_TRANSCODING_CONFIG),j)).transcodingUsers||(P.transcodingUsers=P.userConfigs),66!==P.videoCodecProfile&&77!==P.videoCodecProfile&&100!==P.videoCodecProfile&&(x.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+P.videoCodecProfile+" -> 100"),P.videoCodecProfile=100),P.transcodingUsers&&(P.transcodingUsers=P.transcodingUsers.map(function(z){return D(D(D({},_.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),z),{zOrder:z.zOrder?z.zOrder+1:1})})),P.images&&(P.images=P.images.map(function(z){return D(D({},_.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),z)}));try{_.isLiveStreamingTranscodingConfig(P)}catch(z){throw z}return P.transcodingUsers&&(P.userConfigs=P.transcodingUsers.map(function(z){return D({},z)}),P.userCount=P.transcodingUsers.length,delete P.transcodingUsers),G=(P.userConfigs||[]).map(function(z){return"number"==typeof z.uid?Promise.resolve(z.uid):f.getUserAccount(Q.spec,null,z.uid)}),[4,this.taskMutex.lock()];case 1:return M=te.sent(),[4,Promise.all(G)];case 2:if(te.sent().forEach(function(z,b){P.userConfigs&&P.userConfigs[b]&&(P.userConfigs[b].uid=z&&z.uid||z)}),this.transcodingConfig=P,!this.connection)return M(),[2];te.label=3;case 3:return te.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map(function(z){return z.taskId}).join("#")})];case 4:return Y=te.sent(),M(),x.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+Y.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(oe=te.sent(),M(),!oe.data||!oe.data.retry)throw oe;return oe.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(function(z){x.default.warning("["+Q.spec.clientId+"] live streaming receive error",oe.toString(),"try to republish",z.url),Q.startLiveStreamingTask(z.url,z.mode,oe).then(function(){x.default.debug("["+Q.spec.clientId+"] live streaming republish "+z.url+" success")}).catch(function(b){x.default.error("["+Q.spec.clientId+"] live streaming republish failed",z.url,b.toString()),Q.onLiveStreamError&&Q.onLiveStreamError(z.url,b)})}),[3,6];case 6:return[2]}})})},E.prototype.setInjectStreamConfig=function(j,P){this.injectConfig=Object.assign({},this.injectConfig,j),this.injectLoopTimes=P},E.prototype.startLiveStreamingTask=function(j,P,G){return w(this,void 0,void 0,function(){var M,Y,oe,Q,te,z,b,u,W=this;return O(this,function(C){switch(C.label){case 0:return Array.from(this.streamingTasks.values()).find(function(l){return l.mode===_.LiveStreamingServiceMode.INJECT})&&P===_.LiveStreamingServiceMode.INJECT?[2,new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()]:(M={command:"PublishStream",ts:Date.now(),url:j,uid:this.spec.uid.toString(),autoDestroyTime:30},x.default.debug("["+this.spec.clientId+"] start live streaming "+j+", mode: "+P),[4,this.taskMutex.lock()]);case 1:if(Y=C.sent(),!this.transcodingConfig&&P===_.LiveStreamingServiceMode.TRANSCODE)throw Y(),new m.AgoraRTCError(m.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(!this.connection&&G)return Y(),[2];if(this.streamingTasks.get(j)&&!G)return Y(),[2,new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&P===_.LiveStreamingServiceMode.TRANSCODE)throw Y(),new m.AgoraRTCError(m.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");C.label=2;case 2:return C.trys.push([2,5,,6]),this.connection?[3,4]:(oe=this,[4,this.connect(P)]);case 3:oe.connection=C.sent(),C.label=4;case 4:return[3,6];case 5:throw Q=C.sent(),Y(),Q;case 6:switch(P){case _.LiveStreamingServiceMode.TRANSCODE:M.transcodingConfig=D({},this.transcodingConfig);break;case _.LiveStreamingServiceMode.RAW:break;case _.LiveStreamingServiceMode.INJECT:M={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:j,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(M.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,te=this.lastTaskId++,C.label=7;case 7:return C.trys.push([7,9,,14]),z=new Promise(function(l,$){v.wait(W.retryTimeout).then(function(){if(G)return $(G);var p=W.statusError.get(j);return p?(W.statusError.delete(j),$(p)):void 0})}),[4,Promise.race([this.connection.request("request",{clientRequest:M},!0,{url:j,command:"PublishStream",workerType:P===_.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!G,tid:te.toString()}),z])];case 8:return b=C.sent(),this.isStartingStreamingTask=!1,x.default.debug("["+this.spec.clientId+"] live streaming started, code: "+b.code),this.streamingTasks.set(j,{clientRequest:M,mode:P,url:j,taskId:te}),Y(),[3,14];case 9:if(u=C.sent(),Y(),this.isStartingStreamingTask=!1,!u.data||!u.data.retry||G)throw u;return u.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(j,P,u)];case 10:return[2,C.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(j,P,u)];case 12:return[2,C.sent()];case 13:return[3,14];case 14:return[2]}})})},E.prototype.stopLiveStreamingTask=function(j){var P=this;return new Promise(function(G,M){var Y=P.streamingTasks.get(j);if(!Y||!P.connection)return new m.AgoraRTCError(m.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var oe=Y.mode;Y.abortTask=function(){x.default.debug("["+P.spec.clientId+"] stop live streaming success(worker exception)"),P.streamingTasks.delete(j),G()},x.default.debug("stop live streaming task request: "+JSON.stringify(j)),P.connection.request("request",{clientRequest:{command:oe===_.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:Y.url}},!1,{url:j,command:"UnPublishStream",workerType:oe===_.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(P.lastTaskId++).toString()}).then(function(Q){x.default.debug("["+P.spec.clientId+"] stop live streaming success, code: "+Q.code),P.streamingTasks.delete(j),0===P.streamingTasks.size&&oe!==_.LiveStreamingServiceMode.INJECT&&(P.connection.close(),P.connection=void 0),G()}).catch(M)})},E.prototype.controlInjectStream=function(j,P,G,M){return w(this,void 0,void 0,function(){var Y;return O(this,function(oe){switch(oe.label){case 0:if(!(Y=this.streamingTasks.get(j))||!this.connection||Y.mode!==_.LiveStreamingServiceMode.INJECT)throw new m.AgoraRTCError(m.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:j,control:P,audioVolume:G,position:M}})];case 1:return[2,oe.sent().serverResponse]}})})},E.prototype.resetAllTask=function(){var j=this,P=Array.from(this.streamingTasks.values());this.terminate();for(var G=function(Q){M.startLiveStreamingTask(Q.url,Q.mode).catch(function(te){j.onLiveStreamError&&j.onLiveStreamError(Q.url,te)})},M=this,Y=0,oe=P;Y<oe.length;Y++)G(oe[Y])},E.prototype.setGatewayConnectionState=function(j){this.connection&&(this.connection.gatewayConnectionState=j)},E.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=U.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},E.prototype.connect=function(j){return w(this,void 0,void 0,function(){var P,G=this;return O(this,function(M){switch(M.label){case 0:if(this.connection)throw new m.AgoraRTCError(m.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,v.getLiveStreamingWorkerMangerResult(j,this.spec,this.cancelToken.token)];case 1:return P=M.sent(),this.uapResponse=P,this.connection=new N.AgoraLiveStreamingUapSignal(P.workerToken,this.spec,j),this.connection.on(_.LiveStreamingUapSignalEvents.WARNING,function(Y,oe){return G.onLiveStreamWarning&&G.onLiveStreamWarning(oe,Y)}),this.connection.on(_.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,function(Y){return G.handlePublishStreamServer(Y)}),this.connection.on(_.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,function(Y){return G.handleInjectStreamServerStatus(Y)}),this.connection.on(_.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,function(Y,oe){if(!G.connection)return oe(new m.AgoraRTCError(m.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));v.getLiveStreamingWorkerMangerResult(j,G.spec,G.cancelToken.token).then(function(Q){G.uapResponse=Q,Y(Q.addressList)}).catch(oe)}),[4,this.connection.init(P.addressList)];case 2:return M.sent(),[2,this.connection]}})})},E.prototype.handlePublishStreamServer=function(j){var P=this,G=j.serverStatus&&j.serverStatus.url;if(!G)throw new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"empty url",{code:j.code});var M=this.streamingTasks.get(G);switch(j.code){case _.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case _.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case _.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case _.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var Y=new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:j.code});if(M)return x.default.error(Y.toString()),this.onLiveStreamError&&this.onLiveStreamError(G,Y);if(!this.isStartingStreamingTask)return;this.statusError.set(G,Y);case _.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case _.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var oe=Array.from(this.streamingTasks.values()),Q=function(u){if(u.abortTask)return u.abortTask(),"continue";x.default.warning("["+te.spec.clientId+"] publish stream status code",j.code,"try to republish",u.url),te.startLiveStreamingTask(u.url,u.mode,new m.AgoraRTCError(m.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:j.code})).then(function(){x.default.debug("["+P.spec.clientId+"] republish live stream success",u.url)}).catch(function(W){x.default.error(W.toString()),P.onLiveStreamError&&P.onLiveStreamError(u.url,W)})},te=this,z=0,b=oe;z<b.length;z++)Q(b[z]);return}},E.prototype.handleInjectStreamServerStatus=function(j){var P=Number(j.uid),G=j.serverStatus&&j.serverStatus.url;switch(j.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,P,G));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,P,G),void this.streamingTasks.delete(G);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,P,G),void this.streamingTasks.delete(G);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,P,G),void this.streamingTasks.delete(G);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,P,G),void this.streamingTasks.delete(G);default:return void x.default.debug("inject stream server status",j)}},E.prototype.haveUrl=function(j){return this.streamingTasks.has(j)||void 0},E}();ie.AgoraRTCLiveStreamingClient=I},function(ue,ie,V){"use strict";var D,w=this&&this.__extends||(D=function(P,G){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,Y){M.__proto__=Y}||function(M,Y){for(var oe in Y)Y.hasOwnProperty(oe)&&(M[oe]=Y[oe])})(P,G)},function(P,G){function M(){this.constructor=P}D(P,G),P.prototype=null===G?Object.create(G):(M.prototype=G.prototype,new M)}),O=this&&this.__assign||function(){return(O=Object.assign||function(P){for(var G,M=1,Y=arguments.length;M<Y;M++)for(var oe in G=arguments[M])Object.prototype.hasOwnProperty.call(G,oe)&&(P[oe]=G[oe]);return P}).apply(this,arguments)},T=this&&this.__awaiter||function(P,G,M,Y){return new(M||(M=Promise))(function(oe,Q){function te(u){try{b(Y.next(u))}catch(W){Q(W)}}function z(u){try{b(Y.throw(u))}catch(W){Q(W)}}function b(u){var W;u.done?oe(u.value):(W=u.value,W instanceof M?W:new M(function(C){C(W)})).then(te,z)}b((Y=Y.apply(P,G||[])).next())})},N=this&&this.__generator||function(P,G){var M,Y,oe,Q,te={label:0,sent:function(){if(1&oe[0])throw oe[1];return oe[1]},trys:[],ops:[]};return Q={next:z(0),throw:z(1),return:z(2)},"function"==typeof Symbol&&(Q[Symbol.iterator]=function(){return this}),Q;function z(b){return function(u){return function(W){if(M)throw new TypeError("Generator is already executing.");for(;te;)try{if(M=1,Y&&(oe=2&W[0]?Y.return:W[0]?Y.throw||((oe=Y.return)&&oe.call(Y),0):Y.next)&&!(oe=oe.call(Y,W[1])).done)return oe;switch(Y=0,oe&&(W=[2&W[0],oe.value]),W[0]){case 0:case 1:oe=W;break;case 4:return te.label++,{value:W[1],done:!1};case 5:te.label++,Y=W[1],W=[0];continue;case 7:W=te.ops.pop(),te.trys.pop();continue;default:if(!((oe=(oe=te.trys).length>0&&oe[oe.length-1])||6!==W[0]&&2!==W[0])){te=0;continue}if(3===W[0]&&(!oe||W[1]>oe[0]&&W[1]<oe[3])){te.label=W[1];break}if(6===W[0]&&te.label<oe[1]){te.label=oe[1],oe=W;break}if(oe&&te.label<oe[2]){te.label=oe[2],te.ops.push(W);break}oe[2]&&te.ops.pop(),te.trys.pop();continue}W=G.call(P,te)}catch(C){W=[6,C],Y=0}finally{M=oe=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([b,u])}}},_=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(ie,"__esModule",{value:!0});var R=V(27),f=V(77),m=V(36),v=V(24),x=V(2),U=_(V(0)),I=V(1),E=V(31),j=function(P){function G(M,Y,oe){var Q=P.call(this)||this;return Q._gatewayConnectionState="CONNECTED",Q.reconnectMode="retry",Q.reqId=0,Q.commandReqId=0,Q.waitingResponseList=[],Q.handleWebSocketOpen=function(){Q.reconnectMode="retry",Q.startPingPong()},Q.handleWebSocketMessage=function(te){if(te.data){var z=JSON.parse(te.data);if(z.requestId)Q.emit("@"+z.requestId,z);else if(Q.serviceMode===R.LiveStreamingServiceMode.INJECT)Q.emit(R.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,z);else{I.report.requestWorkerEvent(Q.spec.sid,{actionType:"status",serverCode:z.code,workerType:Q.serviceMode===R.LiveStreamingServiceMode.TRANSCODE?1:2});var b=z.serverStatus&&z.serverStatus.url;b&&Q.waitingResponseList.includes(b)&&200===z.code&&Q.emit(b),Q.emit(R.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,z)}}},Q.spec=Y,Q.token=M,Q.serviceMode=oe,Q.websocket=new f.AgoraWebSocketManager("live-streaming"),Q.websocket.on(R.WebSocketManagerEvents.CONNECTED,Q.handleWebSocketOpen),Q.websocket.on(R.WebSocketManagerEvents.ON_MESSAGE,Q.handleWebSocketMessage),Q.websocket.on(R.WebSocketManagerEvents.REQUEST_NEW_URLS,function(te,z){m.emitAsPromise(Q,R.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(te).catch(z)}),Q.websocket.on(R.WebSocketManagerEvents.RECONNECTING,function(){Q.websocket.reconnectMode=Q.reconnectMode}),Q}return w(G,P),Object.defineProperty(G.prototype,"gatewayConnectionState",{get:function(){return this._gatewayConnectionState},set:function(M){this._gatewayConnectionState=M,"CONNECTED"===M&&this.emit("gateway-connected",M)},enumerable:!0,configurable:!0}),G.prototype.init=function(M){return this.websocket.init(M)},G.prototype.request=function(M,Y,oe,Q){return T(this,void 0,void 0,function(){var te,z,b,u,W,C,l,$,p,S,L=this;return N(this,function(ee){switch(ee.label){case 0:if(this.reqId+=1,te=this.reqId,"request"===M&&(this.commandReqId+=1),z=this.commandReqId,!te||!this.websocket)throw new v.AgoraRTCError(v.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(b=x.VERSION,"closed"===this.websocket.state)throw new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_DISCONNECT);return u=function(){return new Promise(function(re,fe){var se=function(){"CONNECTED"===L.gatewayConnectionState&&"connected"===L.websocket.state&&(L.off("gateway-connected",se),L.websocket.off(R.WebSocketManagerEvents.CONNECTED,se),re(void 0))};L.on("gateway-connected",se),L.websocket.once(R.WebSocketManagerEvents.CLOSED,function(){return fe(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ABORT))}),L.websocket.on(R.WebSocketManagerEvents.CONNECTED,se)})},"connected"===this.websocket.state&&"CONNECTED"===this.gatewayConnectionState?[3,2]:[4,u()];case 1:ee.sent(),ee.label=2;case 2:W=Promise.race([new Promise(function(re,fe){var se=function(){fe(new v.AgoraRTCError(v.AgoraRTCErrorCode.WS_ABORT))};L.websocket.once(R.WebSocketManagerEvents.RECONNECTING,se),L.websocket.once(R.WebSocketManagerEvents.CLOSED,se),L.once("@"+te,function(B){re(B)})}),E.wait(x.getParameter("LIVE_STREAMING_TIMEOUT")).then(function(){return!1})]),(C=O({command:M,sdkVersion:b,seq:te,requestId:te,allocate:oe,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},Y)).clientRequest&&(C.clientRequest.workerToken=this.token),Q&&I.report.requestWorkerEvent(this.spec.sid,O(O({},Q),{requestId:z,actionType:"request",payload:JSON.stringify(Y.clientRequest),serverCode:0,code:0})),l=Date.now(),this.websocket.sendMessage(C),$=null,ee.label=3;case 3:return ee.trys.push([3,5,,8]),[4,W];case 4:return $=ee.sent(),[3,8];case 5:if(p=ee.sent(),"closed"===this.websocket.state)throw p;return[4,u()];case 6:return ee.sent(),[4,this.request(M,Y,oe,Q)];case 7:return[2,ee.sent()];case 8:if(!1===$)throw S=new v.AgoraRTCError(v.AgoraRTCErrorCode.NETWORK_TIMEOUT,(Y&&Y.clientRequest&&Y.clientRequest.command)+" timeout",{changeAddress:!0,retry:!0}),this.emit(R.LiveStreamingUapSignalEvents.WARNING,S,Q&&Q.url||"unknown url"),Q&&I.report.requestWorkerEvent(this.spec.sid,O(O({},Q),{requestId:z,actionType:"response",payload:"TIMEOUT",serverCode:0,success:0,responseTime:Date.now()-l})),S;return Q&&I.report.requestWorkerEvent(this.spec.sid,O(O({},Q),{requestId:z,actionType:"response",payload:JSON.stringify($.serverResponse),serverCode:$.code,success:200===$.code,responseTime:Date.now()-l})),200===$.code?[3,10]:[4,this.handleResponseError($)];case 9:ee.sent(),ee.label=10;case 10:return[2,$]}})})},G.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},G.prototype.close=function(){var M="__VERSION__"===x.VERSION?"0.0.1":x.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:M,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},G.prototype.handleResponseError=function(M){return T(this,void 0,void 0,function(){var Y,oe,Q,te,z=this;return N(this,function(b){switch(U.default.debug("[live-streaming] receive response error "+M.code),M.code){case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return U.default.warning("live stream response already exists stream"),this.emit(R.LiveStreamingUapSignalEvents.WARNING,"live stream response already exists stream, code 454",Y=M.serverResponse.url),this.waitingResponseList.includes(Y)||this.waitingResponseList.push(Y),[2,new Promise(function(u,W){z.once(Y,function(){z.waitingResponseList.splice(z.waitingResponseList.indexOf(Y),1),u()}),setTimeout(function(){z.waitingResponseList.splice(z.waitingResponseList.indexOf(Y),1),W(new v.AgoraRTCError(v.AgoraRTCErrorCode.TIMEOUT,"live stream timeout waiting 454",{code:M.code}))},1e4)})];case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:M.code}).throw()];case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE:throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{retry:!0,changeAddress:!0});case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===M.serverResponse.command||"UninjectStream"===M.serverResponse.command)return[2];throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:M.code}).throw()];case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return oe=new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE),[2,this.emit(R.LiveStreamingUapSignalEvents.WARNING,oe,M.serverResponse.url)];case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return oe=new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),[2,this.emit(R.LiveStreamingUapSignalEvents.WARNING,oe,M.serverResponse.url)];case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:M.code}).throw()];case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return oe=new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),[2,this.emit(R.LiveStreamingUapSignalEvents.WARNING,oe,M.serverResponse.url)];case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:M.code}).throw()];case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case R.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===M.serverResponse.command||"UninjectStream"===M.serverResponse.command)return[2];throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case R.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===M.serverResponse.command||"UninjectStream"===M.serverResponse.command)return[2];if("UpdateTranscoding"===M.serverResponse.command||"ControlStream"===M.serverResponse.command)return[2,new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:M.code}).throw()];throw new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case R.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case R.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case R.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case R.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return this.waitingResponseList.includes(Q=M.serverResponse.url)||this.waitingResponseList.push(Q),te=new v.AgoraRTCError(v.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:M.code}),this.emit(R.LiveStreamingUapSignalEvents.WARNING,te,Q),[2,new Promise(function(u,W){z.once(Q,function(){z.waitingResponseList.splice(z.waitingResponseList.indexOf(Q),1),u()}),setTimeout(function(){z.waitingResponseList.splice(z.waitingResponseList.indexOf(Q),1),W(te)},1e4)})]}return[2]})})},G.prototype.startPingPong=function(){var M=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(function(){"connected"===M.websocket.state&&M.request("ping",{}).catch(function(){})},6e3)},G}(m.EventEmitter);ie.AgoraLiveStreamingUapSignal=j},function(ue,ie,V){"use strict";var D,w=this&&this.__extends||(D=function(U,I){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,j){E.__proto__=j}||function(E,j){for(var P in j)j.hasOwnProperty(P)&&(E[P]=j[P])})(U,I)},function(U,I){function E(){this.constructor=U}D(U,I),U.prototype=null===I?Object.create(I):(E.prototype=I.prototype,new E)}),O=this&&this.__awaiter||function(U,I,E,j){return new(E||(E=Promise))(function(P,G){function M(Q){try{oe(j.next(Q))}catch(te){G(te)}}function Y(Q){try{oe(j.throw(Q))}catch(te){G(te)}}function oe(Q){var te;Q.done?P(Q.value):(te=Q.value,te instanceof E?te:new E(function(z){z(te)})).then(M,Y)}oe((j=j.apply(U,I||[])).next())})},T=this&&this.__generator||function(U,I){var E,j,P,G,M={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return G={next:Y(0),throw:Y(1),return:Y(2)},"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G;function Y(oe){return function(Q){return function(te){if(E)throw new TypeError("Generator is already executing.");for(;M;)try{if(E=1,j&&(P=2&te[0]?j.return:te[0]?j.throw||((P=j.return)&&P.call(j),0):j.next)&&!(P=P.call(j,te[1])).done)return P;switch(j=0,P&&(te=[2&te[0],P.value]),te[0]){case 0:case 1:P=te;break;case 4:return M.label++,{value:te[1],done:!1};case 5:M.label++,j=te[1],te=[0];continue;case 7:te=M.ops.pop(),M.trys.pop();continue;default:if(!((P=(P=M.trys).length>0&&P[P.length-1])||6!==te[0]&&2!==te[0])){M=0;continue}if(3===te[0]&&(!P||te[1]>P[0]&&te[1]<P[3])){M.label=te[1];break}if(6===te[0]&&M.label<P[1]){M.label=P[1],P=te;break}if(P&&M.label<P[2]){M.label=P[2],M.ops.push(te);break}P[2]&&M.ops.pop(),M.trys.pop();continue}te=I.call(U,M)}catch(z){te=[6,z],j=0}finally{E=P=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}([oe,Q])}}},N=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(ie,"__esModule",{value:!0});var _=V(24),R=V(36),f=V(31),m=V(27),v=N(V(0)),x=function(U){function I(E){var j=U.call(this)||this;return j.connectionID=0,j.currentURLIndex=0,j.reconnectMode="tryNext",j._state="closed",j.retryConfig=f.DEFAULT_RETRY_CONFIG,j.reconnectCount=0,j.name=E,j}return w(I,U),Object.defineProperty(I.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"state",{get:function(){return this._state},set:function(E){E!==this._state&&(this._state=E,"reconnecting"===this._state?this.emit(m.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(m.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(m.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(m.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),I.prototype.init=function(E){var j=this;return new Promise(function(P,G){j.urls=E;var M=j.urls[j.currentURLIndex];j.state="connecting",j.createWebSocketConnection(M).then(P).catch(G),j.once(m.WebSocketManagerEvents.CLOSED,function(){return G(new _.AgoraRTCError(_.AgoraRTCErrorCode.WS_DISCONNECT))}),j.once(m.WebSocketManagerEvents.CONNECTED,function(){return P()})})},I.prototype.close=function(E,j){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var P=this.websocket;j?setTimeout(function(){return P.close()},500):P.close(),this.websocket=void 0}this.state=E?"failed":"closed"},I.prototype.reconnect=function(E){if(this.websocket){void 0!==E&&(this.reconnectMode=E);var j=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),j&&j.bind(this.websocket)({code:9999})}else v.default.warning("["+this.name+"] can not reconnect, no websocket")},I.prototype.sendMessage=function(E){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new _.AgoraRTCError(_.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var j=JSON.stringify(E);try{this.websocket.send(j)}catch(P){throw new _.AgoraRTCError(_.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+P.toString())}},I.prototype.createWebSocketConnection=function(E){return O(this,void 0,void 0,function(){var j,P=this;return T(this,function(G){return this.connectionID+=1,j=this.connectionID,[2,new Promise(function(M,Y){P.websocket&&(P.websocket.onclose=null,P.websocket.close()),v.default.debug("["+P.name+"] start connect, url: "+E);try{P.websocket=new WebSocket(E),P.websocket.binaryType="arraybuffer"}catch(Q){var oe=new _.AgoraRTCError(_.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+Q.toString());return v.default.error("["+P.name+"]"+oe),void Y(oe)}f.wait(5e3).then(function(){j===P.connectionID&&P.websocket&&P.websocket.readyState!==WebSocket.OPEN&&P.websocket&&P.websocket.close()}),P.websocket.onopen=function(){v.default.debug("["+P.name+"] websockect opened:",E),P.reconnectMode="retry",P.state="connected",P.reconnectCount=0,M()},P.websocket.onclose=function(Q){return O(P,void 0,void 0,function(){var te,z;return T(this,function(b){switch(b.label){case 0:return v.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+Q.code+", reason: "+Q.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),te=R.emitAsInvokerNoResponse(this,m.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(te)]):[3,2];case 1:return z=b.sent(),"closed"===this.state?(v.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):z?(M(),[3,3]):(Y(new _.AgoraRTCError(_.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+Q.code)),this.close(!0),[2]);case 2:Y(new _.AgoraRTCError(_.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+Q.code)),this.close(),b.label=3;case 3:return[2]}})})},P.websocket.onmessage=function(Q){P.emit(m.WebSocketManagerEvents.ON_MESSAGE,Q)}})]})})},I.prototype.reconnectWithAction=function(E,j){return O(this,void 0,void 0,function(){var P,G,Y;return T(this,function(oe){switch(oe.label){case 0:return!j&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(P=f.getRetryWaitTime(this.reconnectCount,this.retryConfig),v.default.debug("["+this.name+"] wait "+P+"ms to reconnect websocket, mode: "+E),[4,f.wait(P)]):[2,!1];case 1:if(oe.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,oe.label=2;case 2:return oe.trys.push([2,12,,14]),"retry"!==E?[3,4]:[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 3:return oe.sent(),[3,11];case 4:return"tryNext"!==E?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,oe.sent()];case 6:return v.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 7:return oe.sent(),[3,11];case 8:return"recover"!==E?[3,11]:(v.default.debug("["+this.name+"] request new urls"),G=this,[4,R.emitAsPromise(this,m.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return G.urls=oe.sent(),this.currentURLIndex=0,[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 10:oe.sent(),oe.label=11;case 11:return[2,!0];case 12:return Y=oe.sent(),v.default.error("["+this.name+"] reconnect failed",Y.toString()),[4,this.reconnectWithAction(E)];case 13:return[2,oe.sent()];case 14:return[2]}})})},I}(R.EventEmitter);ie.AgoraWebSocketManager=x},function(ue,ie,V){"use strict";var D=V(18),w=V(38),O=V(79),T=V(44);function N(R){var f=new O(R),m=w(O.prototype.request,f);return D.extend(m,O.prototype,f),D.extend(m,f),m}var _=N(V(41));_.Axios=O,_.create=function(R){return N(T(_.defaults,R))},_.Cancel=V(45),_.CancelToken=V(93),_.isCancel=V(40),_.all=function(R){return Promise.all(R)},_.spread=V(94),ue.exports=_,ue.exports.default=_},function(ue,ie,V){"use strict";var D=V(18),w=V(39),O=V(80),T=V(81),N=V(44);function _(R){this.defaults=R,this.interceptors={request:new O,response:new O}}_.prototype.request=function(R){"string"==typeof R?(R=arguments[1]||{}).url=arguments[0]:R=R||{},R.method=(R=N(this.defaults,R)).method?R.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var f=[T,void 0],m=Promise.resolve(R);for(this.interceptors.request.forEach(function(v){f.unshift(v.fulfilled,v.rejected)}),this.interceptors.response.forEach(function(v){f.push(v.fulfilled,v.rejected)});f.length;)m=m.then(f.shift(),f.shift());return m},_.prototype.getUri=function(R){return R=N(this.defaults,R),w(R.url,R.params,R.paramsSerializer).replace(/^\?/,"")},D.forEach(["delete","get","head","options"],function(R){_.prototype[R]=function(f,m){return this.request(D.merge(m||{},{method:R,url:f}))}}),D.forEach(["post","put","patch"],function(R){_.prototype[R]=function(f,m,v){return this.request(D.merge(v||{},{method:R,url:f,data:m}))}}),ue.exports=_},function(ue,ie,V){"use strict";var D=V(18);function w(){this.handlers=[]}w.prototype.use=function(O,T){return this.handlers.push({fulfilled:O,rejected:T}),this.handlers.length-1},w.prototype.eject=function(O){this.handlers[O]&&(this.handlers[O]=null)},w.prototype.forEach=function(O){D.forEach(this.handlers,function(T){null!==T&&O(T)})},ue.exports=w},function(ue,ie,V){"use strict";var D=V(18),w=V(82),O=V(40),T=V(41);function N(_){_.cancelToken&&_.cancelToken.throwIfRequested()}ue.exports=function(_){return N(_),_.headers=_.headers||{},_.data=w(_.data,_.headers,_.transformRequest),_.headers=D.merge(_.headers.common||{},_.headers[_.method]||{},_.headers),D.forEach(["delete","get","head","post","put","patch","common"],function(R){delete _.headers[R]}),(_.adapter||T.adapter)(_).then(function(R){return N(_),R.data=w(R.data,R.headers,_.transformResponse),R},function(R){return O(R)||(N(_),R&&R.response&&(R.response.data=w(R.response.data,R.response.headers,_.transformResponse))),Promise.reject(R)})}},function(ue,ie,V){"use strict";var D=V(18);ue.exports=function(w,O,T){return D.forEach(T,function(N){w=N(w,O)}),w}},function(ue,ie){var V,D,w=ue.exports={};function O(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function N(E){if(V===setTimeout)return setTimeout(E,0);if((V===O||!V)&&setTimeout)return V=setTimeout,setTimeout(E,0);try{return V(E,0)}catch(j){try{return V.call(null,E,0)}catch(P){return V.call(this,E,0)}}}!function(){try{V="function"==typeof setTimeout?setTimeout:O}catch(E){V=O}try{D="function"==typeof clearTimeout?clearTimeout:T}catch(E){D=T}}();var _,R=[],f=!1,m=-1;function v(){f&&_&&(f=!1,_.length?R=_.concat(R):m=-1,R.length&&x())}function x(){if(!f){var E=N(v);f=!0;for(var j=R.length;j;){for(_=R,R=[];++m<j;)_&&_[m].run();m=-1,j=R.length}_=null,f=!1,function(P){if(D===clearTimeout)return clearTimeout(P);if((D===T||!D)&&clearTimeout)return D=clearTimeout,clearTimeout(P);try{D(P)}catch(G){try{return D.call(null,P)}catch(M){return D.call(this,P)}}}(E)}}function U(E,j){this.fun=E,this.array=j}function I(){}w.nextTick=function(E){var j=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)j[P-1]=arguments[P];R.push(new U(E,j)),1!==R.length||f||N(x)},U.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={},w.on=I,w.addListener=I,w.once=I,w.off=I,w.removeListener=I,w.removeAllListeners=I,w.emit=I,w.prependListener=I,w.prependOnceListener=I,w.listeners=function(E){return[]},w.binding=function(E){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(E){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},function(ue,ie,V){"use strict";var D=V(18);ue.exports=function(w,O){D.forEach(w,function(T,N){N!==O&&N.toUpperCase()===O.toUpperCase()&&(w[O]=T,delete w[N])})}},function(ue,ie,V){"use strict";var D=V(43);ue.exports=function(w,O,T){var N=T.config.validateStatus;!N||N(T.status)?w(T):O(D("Request failed with status code "+T.status,T.config,null,T.request,T))}},function(ue,ie,V){"use strict";ue.exports=function(D,w,O,T,N){return D.config=w,O&&(D.code=O),D.request=T,D.response=N,D.isAxiosError=!0,D.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},D}},function(ue,ie,V){"use strict";var D=V(88),w=V(89);ue.exports=function(O,T){return O&&!D(T)?w(O,T):T}},function(ue,ie,V){"use strict";ue.exports=function(D){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(D)}},function(ue,ie,V){"use strict";ue.exports=function(D,w){return w?D.replace(/\/+$/,"")+"/"+w.replace(/^\/+/,""):D}},function(ue,ie,V){"use strict";var D=V(18),w=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];ue.exports=function(O){var T,N,_,R={};return O&&D.forEach(O.split("\n"),function(f){if(_=f.indexOf(":"),T=D.trim(f.substr(0,_)).toLowerCase(),N=D.trim(f.substr(_+1)),T){if(R[T]&&w.indexOf(T)>=0)return;R[T]="set-cookie"===T?(R[T]?R[T]:[]).concat([N]):R[T]?R[T]+", "+N:N}}),R}},function(ue,ie,V){"use strict";var D=V(18);ue.exports=D.isStandardBrowserEnv()?function(){var w,O=/(msie|trident)/i.test(navigator.userAgent),T=document.createElement("a");function N(_){var R=_;return O&&(T.setAttribute("href",R),R=T.href),T.setAttribute("href",R),{href:T.href,protocol:T.protocol?T.protocol.replace(/:$/,""):"",host:T.host,search:T.search?T.search.replace(/^\?/,""):"",hash:T.hash?T.hash.replace(/^#/,""):"",hostname:T.hostname,port:T.port,pathname:"/"===T.pathname.charAt(0)?T.pathname:"/"+T.pathname}}return w=N(window.location.href),function(_){var R=D.isString(_)?N(_):_;return R.protocol===w.protocol&&R.host===w.host}}():function(){return!0}},function(ue,ie,V){"use strict";var D=V(18);ue.exports=D.isStandardBrowserEnv()?{write:function(w,O,T,N,_,R){var f=[];f.push(w+"="+encodeURIComponent(O)),D.isNumber(T)&&f.push("expires="+new Date(T).toGMTString()),D.isString(N)&&f.push("path="+N),D.isString(_)&&f.push("domain="+_),!0===R&&f.push("secure"),document.cookie=f.join("; ")},read:function(w){var O=document.cookie.match(new RegExp("(^|;\\s*)("+w+")=([^;]*)"));return O?decodeURIComponent(O[3]):null},remove:function(w){this.write(w,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(ue,ie,V){"use strict";var D=V(45);function w(O){if("function"!=typeof O)throw new TypeError("executor must be a function.");var T;this.promise=new Promise(function(_){T=_});var N=this;O(function(_){N.reason||(N.reason=new D(_),T(N.reason))})}w.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},w.source=function(){var O;return{token:new w(function(T){O=T}),cancel:O}},ue.exports=w},function(ue,ie,V){"use strict";ue.exports=function(D){return function(w){return D.apply(null,w)}}},function(ue,ie,V){"use strict";var D=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(ie,"__esModule",{value:!0});var w=D(V(0)),O=1,T=function(){function N(_){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=O++,_&&(this.name=_),w.default.debug("[lock-"+this.name+"-"+this.lockId+"] is created.")}return Object.defineProperty(N.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),N.prototype.lock=function(){var _,R=this;this.locks+=1,w.default.debug("[lock-"+this.name+"-"+this.lockId+"] is locked, current queue "+this.locks+".");var f=new Promise(function(v){_=function(){R.locks-=1,w.default.debug("[lock-"+R.name+"-"+R.lockId+"] is not locked, current queue "+R.locks+"."),v()}}),m=this.lockingPromise.then(function(){return _});return this.lockingPromise=this.lockingPromise.then(function(){return f}),m},N}();ie.PromiseMutex=T},function(ue,ie,V){"use strict";V.r(ie);var D=V(2),w=V(0),O=V(1),T=V(8),N=V(5),_=function(){};_.prototype.set=function(pe,F){["BatteryLevel"].indexOf(pe)>-1&&(this[pe]=F)};var R=new function(){var pe=Object(T.b)();return pe.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},pe.state=pe.states.UNINIT,pe.batteryManager=null,pe._init=function(F,Ne){pe.state=pe.states.INITING,navigator.getBattery?navigator.getBattery().then(function(Ze){pe.batteryManager=Ze,F&&setTimeout(function(){F()},0)}).catch(function(Ze){w.default.debug("navigator.getBattery is disabled",Ze),F&&F()}):(pe.state=pe.states.INITED,F&&F())},pe._getBatteryStats=function(){var F={};return F.BatteryLevel=pe.batteryManager&&pe.batteryManager.level?Math.floor(100*pe.batteryManager.level):"UNSUPPORTED",F},pe.getStats=function(F,Ne){var Ze=new _,Ge=pe._getBatteryStats();Ge&&Ge.BatteryLevel&&Ze.set("BatteryLevel",Ge.BatteryLevel),F&&F(Ze)},pe._init(),pe},f=V(22),m=V(19),v=V(26),x=V(53),U=V(9),I=["live","rtc","web","interop","h264_interop","web-only"],E=["vp8","vp9","h264"],j=["aes-128-gcm","aes-256-gcm","aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-256-gcm2","aes-128-gcm2"],P=V(11),G=V.n(P),M=V(7),Y=V.n(M),oe=V(13),Q=V(4),te=V(10),z=V(20),b=V(6),u=V(14),W={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},C={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},l=function(pe){var F={remoteStreamStorage:{},localStreamStorage:{}};return F.gatewayClient=pe,F.checkAudioOutputLevel=function(Ne){return!(Ne&&parseInt(Ne.audioRecvBytesDelta)>0&&parseInt(Ne.audioDecodingNormalDelta)>0&&0===parseInt(Ne.audioOutputLevel))},F.checkAudioIntputLevel=function(Ne){return!Ne||0!==parseInt(Ne.audioInputLevel)},F.checkFramerateInput=function(Ne,Ze){if(!Ne||!Ze.attributes)return!0;var Ge=parseInt(Ze.attributes.maxFrameRate),qe=parseInt(Ne.googFrameRateInput);return!Ge||!qe||!(Ge>10&&qe<5||Ge<10&&Ge>=5&&qe<=1)},F.checkFramerateSent=function(Ne){return!(Ne&&parseInt(Ne.googFrameRateInput)>5&&parseInt(Ne.googFrameRateSent)<=1)},F.checkSendVideoBitrate=function(Ne){return!Ne||0!==parseInt(Ne.videoSendBytesDelta)},F.checkSendAudioBitrate=function(Ne){return!Ne||0!==parseInt(Ne.audioSendBytesDelta)},F.checkVideoDecode=function(Ne){return!Ne||0===parseInt(Ne.videoRecvBytesDelta)||0!==parseInt(Ne.googFrameRateDecoded)},F.checkAudioDecode=function(Ne){return!Ne||0===parseInt(Ne.audioRecvBytesDelta)||0!==parseInt(Ne.audioDecodingNormalDelta)},F.record=function(Ne,Ze,Ge,qe,Je){Ge[Ne]||(Ge[Ne]={isPrevNormal:!0,record:[]});var ce=Ge[Ne],g=F["check"+Ne](Ze,Je);if(ce.record.push(g),ce.record.length>=5){ce.isCurNormal=-1!==ce.record.indexOf(!0);var ne=C[Ne];ce.isPrevNormal&&!ce.isCurNormal&&F.gatewayClient.dispatchEvent({type:"exception",code:ne,msg:W[ne],uid:qe}),!ce.isPrevNormal&&ce.isCurNormal&&F.gatewayClient.dispatchEvent({type:"exception",code:ne+2e3,msg:W[ne+2e3],uid:qe}),ce.isPrevNormal=ce.isCurNormal,ce.record=[]}},F.setLocalStats=function(Ne){var Ze={};Object.keys(Ne).map(function(Ge){var qe=Ne[Ge],Je=F.gatewayClient.localStreams[parseInt(Ge)],ce=F.localStreamStorage[Ge]||{};Je&&Je.hasVideo()&&(F.record("SendVideoBitrate",qe.videoStats,ce,Ge),F.record("FramerateInput",qe.videoStats,ce,Ge,Je),F.record("FramerateSent",qe.videoStats,ce,Ge)),Je&&Je.hasAudio()&&(F.record("AudioIntputLevel",qe.audioStats,ce,Ge),F.record("SendAudioBitrate",qe.audioStats,ce,Ge)),Ze[Ge]=ce}),F.localStreamStorage=Ze},F.setRemoteStats=function(Ne){var Ze={};Object.keys(Ne).map(function(Ge){var qe=Ne[Ge],Je=pe.remoteStreams[Ge],ce=F.remoteStreamStorage[Ge]||{};Je&&Je.hasVideo()&&Je.isPlaying()&&F.record("VideoDecode",qe.videoStats,ce,Ge),Je&&Je.hasAudio()&&Je.isPlaying()&&(F.record("AudioOutputLevel",qe.audioStats,ce,Ge),F.record("AudioDecode",qe.audioStats,ce,Ge)),Ze[Ge]=ce}),F.remoteStreamStorage=Ze},F};function p(pe,F){(null==F||F>pe.length)&&(F=pe.length);for(var Ne=0,Ze=new Array(F);Ne<F;Ne++)Ze[Ne]=pe[Ne];return Ze}var S,L=V(3),ee=new function(){var pe=Object(T.b)();return pe.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},pe.state=pe.states.UNINIT,pe.type=null,pe.lastConnectedAt=null,pe.lastDisconnectedAt=null,pe.lastTypeChangedAt=null,pe.networkChangeTimer=null,pe._init=function(F,Ne){if(pe.state=pe.states.INITING,navigator.connection&&navigator.connection.addEventListener){var Ze=pe._getNetworkInfo();pe.type=Ze&&Ze.type,pe.state=pe.states.INITED,F&&F()}else pe.state=pe.states.UNINIT,Ne&&Ne("DO_NOT_SUPPORT")},pe._getNetworkInfo=function(){return navigator.connection},pe._reloadNetworkInfo=function(){var F=pe._getNetworkInfo(),Ne=F&&F.type||"UNSUPPORTED",Ze=Date.now();Ne!==pe.type&&(pe.lastTypeChangedAt=Ze,"none"==Ne?pe.lastDisconnectedAt=Ze:"none"==pe.type&&(pe.lastConnectedAt=Ze),pe.type=Ne,pe.dispatchEvent({type:"networkTypeChanged",networkType:Ne}))},pe.getStats=function(F,Ne){var Ze={},Ge=pe._getNetworkInfo();Ge&&(Ze.NetworkType=Ge.type||"UNSUPPORTED"),setTimeout(function(){F(Ze)},0)},pe._init(function(){navigator.connection.addEventListener("change",function(){pe._reloadNetworkInfo()}),pe.networkChangeTimer=setInterval(function(){pe._reloadNetworkInfo()},5e3)},function(F){}),pe},re=V(55),fe=V(16),se=V(56),B=V.n(se),H=V(21),K=function(){return"HTTPS"===(S||S||(S=(window.location.protocol.split(":")[0]||"").toUpperCase()))},ve=function(){return void 0!==window.isSecureContext},le="host",ge=function(pe){var ce,g,F={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1,useLocalAccessPoint:!1};if(F.mode=pe.mode,F.codec=pe.codec,F.clientId=Object(te.generateSessionId)().slice(0,5),F.uintUid=null,F.customReportCount=0,pe=Y()({},pe),F.aespassword=null,F.aesmode="none",F.hasPublished=!1,F.getSessionId=function(){return pe.sessionId},F.startChannelMediaRelay=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{callback:function(ye){if(ye)return g&&g(ye);g&&g()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(ce instanceof U.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var de=ce.getSrcChannelMediaInfo(),me=ce.getDestChannelMediaInfos();if(Object(L.isEmpty)(de))throw"srcChannelMediaInfo should not be empty";if(Object(L.isEmpty)(me)||0===me.length)throw"destChannelMediaInfos should not be empty";if(!Object(te.is32Uint)(de.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(L.isValidChannelName)(de.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(de.token&&!Object(L.isValidToken)(de.token))throw"Invalid token in srcChannelMediaInfo";if(me.forEach(function(ye){if(!Object(te.is32Uint)(ye.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(L.isValidChannelName)(ye.channelName))throw"Invalid channelName in destChannelMediaInfo";if(ye.token&&!Object(L.isValidToken)(ye.token))throw"Invalid token in destChannelMediaInfo"}),F.gatewayClient.state!==oe.a.CONNECTED)throw"startChannelMediaRelay should be used after join";F.gatewayClient.startChannelMediaRelay(ce).then(function(){ne&&ne()}).catch(function(ye){ne&&ne(ye)})},F.updateChannelMediaRelay=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{callback:function(ye){if(ye)return g&&g(ye);g&&g()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(ce instanceof U.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var de=ce.getSrcChannelMediaInfo(),me=ce.getDestChannelMediaInfos();if(Object(L.isEmpty)(de))throw"srcChannelMediaInfo should not be empty";if(Object(L.isEmpty)(me)||0===me.length)throw"destChannelMediaInfos should not be empty";if(!Object(te.is32Uint)(de.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(L.isValidChannelName)(de.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(de.token&&!Object(L.isValidToken)(de.token))throw"Invalid token in srcChannelMediaInfo";if(me.forEach(function(ye){if(!Object(te.is32Uint)(ye.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(L.isValidChannelName)(ye.channelName))throw"Invalid channelName in destChannelMediaInfo";if(ye.token&&!Object(L.isValidToken)(ye.token))throw"Invalid token in destChannelMediaInfo"}),F.gatewayClient.state!==oe.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";F.gatewayClient.updateChannelMediaRelay(ce).then(function(){ne&&ne()}).catch(function(ye){ne&&ne(ye)})},F.stopChannelMediaRelay=function(ce){var g=O.report.reportApiInvoke(pe.sessionId,{callback:function(ne){if(ne)return ce&&ce(ne);ce&&ce()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});F.gatewayClient.stopChannelMediaRelay().then(function(){g&&g()}).catch(function(ne){g&&g(ne)})},F.getConnectionState=function(){var ce=O.report.reportApiInvoke(pe.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),g=oe.a.connetionStateMap[F.gatewayClient.state];return ce(),g},F.setClientRole=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{callback:g,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(L.checkValidEnum)(ce,"setClientRole",[le,"audience"]),"rtc"===F.mode){var de="RTC mode can not use setClientRole";return w.default.warning("[".concat(F.clientId,"] ").concat(de)),ne&&ne(de)}F.gatewayClient&&F.gatewayClient.state===oe.a.CONNECTED?("audience"===ce&&(0===this.highStreamState?this._unpublish(this.highStream,function(){ne&&ne(null,{role:ce})},function(me){ne&&ne(me)}):F.gatewayClient.setClientRole("audience",ne)),ce===le&&F.gatewayClient.setClientRole(le,ne)):(F.gatewayClient.role=ce,ne&&ne(null,{role:ce}))},F.getGatewayInfo=function(ce){if(F.gatewayClient.state!==oe.a.CONNECTED){var g="Client is not in connected state";return w.default.error("[".concat(F.clientId,"] ").concat(g)),void ce(g)}F.gatewayClient.getGatewayInfo(function(ne){ce(null,ne)},ce)},F.renewToken=function(ce,g,ne){var de=O.report.reportApiInvoke(pe.sessionId,{callback:function(me,ye){if(me)return w.default.error("Failed to renew token ".concat(me),ye),ne&&ne(me);g&&g(ye)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(L.isValidToken)(ce))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return F.gatewayClient?F.key?(F.key=ce,void F.gatewayClient.renewToken(ce,function(me){return de(null,me)},de)):(w.default.error("[".concat(F.clientId,"] renewToken should not be called before user join")),de(Q.default.INVALID_OPERATION)):(w.default.error("[".concat(F.clientId,"] renewToken Failed. GatewayClient not Exist")),de(Q.default.INVALID_OPERATION))},F.setLowStreamParameter=function(ce){var g=O.report.reportApiInvoke(pe.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(L.checkValidObject)(ce,"param");var ne=ce.width,de=ce.height,me=ce.framerate,ye=ce.bitrate;Object(L.isEmpty)(ne)||Object(L.checkValidNumber)(ne,"width"),Object(L.isEmpty)(de)||Object(L.checkValidNumber)(de,"height"),Object(L.isEmpty)(me)||Object(L.checkValidNumber)(me,"framerate"),Object(L.isEmpty)(ye)||Object(L.checkValidNumber)(ye,"bitrate",1,1e7),(!ne&&de||ne&&!de)&&w.default.warning("[".concat(F.clientId,"] The width and height parameters take effect only when both are set")),F.lowStreamParameter=ce,g()},F.init=function(ce,g,ne){var de=O.report.reportApiInvoke(pe.sessionId,{callback:function(me,ye){if(me)return ne&&ne(me);g&&g(ye)},name:"Client.init",options:arguments,tag:"tracer"});Object(L.checkValidString)(ce),Object(N.isChromeKernel)()&&Object(N.getChromeKernelVersion)()<=48?ne?de(Q.default.BAD_ENVIRONMENT):Object(te.popBanTip)():(pe.appId=ce,pe.sessionId=Object(te.generateSessionId)(),de())},F.setTurnServer=function(ce){var g=O.report.reportApiInvoke(pe.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(F.gatewayClient&&F.gatewayClient.state!==oe.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(F.useProxyServer)throw new Error("You have already set the proxy");if(F.useLocalAccessPoint)throw new Error("You have already set the local proxy");ce instanceof Array||(ce=[ce]);var ne=[];ce.map(function(de,me){Object(L.checkValidObject)(de,"turnServer");var ye=de.turnServerURL,X=de.username,_e=de.password,Ee=de.udpport,Ie=de.forceturn,Te=de.tcpport;if(Object(L.checkValidString)(ye,"turnServerURL"),Object(L.checkValidString)(X,"username"),Object(L.checkValidString)(_e,"password"),Object(L.checkValidString)(Ee,"udpport"),0===parseInt(Ee))throw new Error("udpport should not be ".concat(Ee));Object(L.isEmpty)(Ie)||Object(L.checkValidBoolean)(Ie,"forceturn");var Ve={mode:"manual"};if(Ve.url=ye,Ve.udpport=Ee,Ve.username=X,Ve.credential=_e,Ve.forceturn=Ie||!1,!Object(L.isEmpty)(Te)){if(Object(L.checkValidString)(Te,"tcpport"),0===parseInt(Te))throw new Error("tcpport should not be ".concat(Te));Ve.tcpport=Te,w.default.info("[".concat(F.clientId,"] Set turnserver[").concat(me,"] tcpurl. ").concat(Ve.url,":").concat(Ve.tcpport))}w.default.info("[".concat(F.clientId,"] Set turnserver[").concat(me,"] udpurl. ").concat(Ve.url,":").concat(Ve.udpport,",username: ").concat(Ve.username)),ne.push(Ve)}),F.turnServers=ne,g()},F.setProxyServer=function(ce){var g=O.report.reportApiInvoke(pe.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(F.gatewayClient&&F.gatewayClient.state!==oe.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!ce)throw new Error("Do not set the proxyServer parameter as empty");if(F.useProxyServer)throw new Error("You have already set the proxy");if(F.useLocalAccessPoint)throw new Error("You have already set the local proxy");Object(L.checkValidString)(ce,"proxyServer"),F.proxyServer=ce,O.report.setProxyServer(ce),w.default.setProxyServer(ce),g()},F.startProxyServer=function(ce){var g=O.report.reportApiInvoke(pe.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(F.gatewayClient&&F.gatewayClient.state!==oe.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(F.proxyServer)throw new Error("You have already set the proxy");if(F.useLocalAccessPoint)throw new Error("You have already set the local proxy");F.useProxyServer=!0,F.proxyServerType=ce||1,g()},F.stopProxyServer=function(){var ce=O.report.reportApiInvoke(pe.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(F.gatewayClient&&F.gatewayClient.state!==oe.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");O.report.setProxyServer(),w.default.setProxyServer(),F.turnServers=[],F.proxyServer=null,F.useProxyServer=!1,F.proxyServerType=null,ce()},F.setEncryptionSecret=function(ce){var g=O.report.reportApiInvoke(pe.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(L.checkValidString)(ce,"password");var ne=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");ne.test(ce)||console.warn("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer,\n      "),F.aespassword=ce,g()},F.setEncryptionMode=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(L.checkValidString)(ce,"encryptionMode"),-1===j.indexOf(ce))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb" | "aes-128-gcm" | "aes-256-gcm" | "aes-128-gcm2" | "aes-256-gcm2"');var de=["aes-128-gcm2","aes-256-gcm2"];if(-1!==de.indexOf(ce)){if(!g||!(g instanceof Uint8Array&&32===g.length))throw Error("salt must be an Uint8Array and exactly equal to 32 bytes")}else if(g)throw new Error("Only ".concat("aes-128-gcm2"," and ").concat("aes-256-gcm2"," support use salt"));g&&(F.aesSalt=Object(te.uint8ArrayToBase64)(g)),F.aesmode=ce,ne()},F.configPublisher=function(ce){var g=O.report.reportApiInvoke(pe.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(L.checkValidObject)(ce,"config");var ne=ce.width,de=ce.height,me=ce.framerate,ye=ce.bitrate,X=ce.publisherUrl;Object(L.checkValidNumber)(ne,"width"),Object(L.checkValidNumber)(de,"height"),Object(L.checkValidNumber)(me,"framerate"),Object(L.checkValidNumber)(ye,"bitrate",1,1e7),X&&Object(L.checkValidString)(X,"publisherUrl"),F.gatewayClient.configPublisher(ce),g()},F.enableDualStream=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{callback:function(de,me){if(de)return g&&g(de);ce&&ce(me)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(N.getBrowserOS)()?(O.report.streamSwitch(pe.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),ne(Q.default.IOS_NOT_SUPPORT)):Object(N.isWeChatBrowser)()?(O.report.streamSwitch(pe.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),ne(Q.default.WECHAT_NOT_SUPPORT)):(O.report.streamSwitch(pe.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),F.isDualStream=!0,F.highStream&&(F.highStream.isDualStream=!0),void(0===F.highStreamState?F._publishLowStream(function(de){return ne(null,de)},function(de){w.default.warning("[".concat(F.clientId,"]"),de),ne(Q.default.ENABLE_DUALSTREAM_FAILED)}):ne(1===F.highStreamState?Q.default.STILL_ON_PUBLISHING:null)))},F.disableDualStream=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{callback:function(de,me){if(de)return g&&g(de);ce&&ce(me)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});O.report.streamSwitch(pe.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),F.isDualStream=!1,F.highStream&&(F.highStream.isDualStream=!1),0===F.highStreamState?F._unpublishLowStream(function(){F.highStream.lowStream=null,ne()},function(de){w.default.warning("[".concat(F.clientId,"]"),de),ne(Q.default.DISABLE_DUALSTREAM_FAILED)}):1===F.highStreamState?ne(Q.default.STILL_ON_PUBLISHING):ne()},F._getLowStream=function(ce,g){F.lowStream?ce(F.lowStream):F._createLowStream(function(ne){F.lowStream=ne,ce(F.lowStream)},g)},F._createLowStream=function(ce,g){if(F.highStream&&F.highStream.stream){var ne=Y()({},F.highStream.params);if(ne.streamID+=1,ne.audio=!1,ne.video)if(F.highStream.stream.getVideoTracks()[0]){var de=new f.a(ne);de.isLowStream=!0,de.streamId=F.highStream.getId()+1;var me={};F.lowStreamParameter&&(me=Y()({},F.lowStreamParameter)),me.width&&me.height||(me.width=160,me.height=120),me.framerate=me.framerate||15,me.bitrate=me.bitrate||50,de.setVideoProfileCustomPlus(me);try{var ye=B()(F.highStream,{width:de.videoConstraint.width.ideal,height:de.videoConstraint.height.ideal,framerate:de.videoConstraint.frameRate});return de.stream=ye,F.highStream.lowStream=de,F.highStream.userMuteVideo&&de.muteVideo(),ce&&ce(de)}catch(X){return g&&g(X)}}else g&&g(Q.default.HIGH_STREAM_NOT_VIDEO_TRACE);else g&&g(Q.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else g&&g(Q.default.HIGH_STREAM_NOT_VIDEO_TRACE)},F._publishLowStream=function(ce,g){return 2!==F.lowStreamState?g&&g(Q.default.LOW_STREAM_ALREADY_PUBLISHED):F.highStream&&F.highStream.hasScreen()?g&&g(Q.default.SHARING_SCREEN_NOT_SUPPORT):void F._getLowStream(function(ne){F.lowStreamState=1,F.gatewayClient.publish(ne,{streamType:1},function(){F.lowStreamState=0,ce&&ce()},function(de){1===F.lowStreamState&&(F.lowStreamState=2),w.default.debug("[".concat(F.clientId,"] publish low stream failed")),g&&g(de)})},g)},F._unpublishLowStream=function(ce,g){if(0!==F.lowStreamState)return g&&g(Q.default.LOW_STREAM_NOT_YET_PUBLISHED);F.lowStream&&(F.gatewayClient.unpublish(F.lowStream,{streamType:1},function(){},function(ne){w.default.debug("[".concat(F.clientId,"] unpublish low stream failed")),g&&g(ne)}),F.lowStream.close(),F.lowStream=null,F.lowStreamState=2,ce&&ce())},F.join=function(ce,g,ne,de,me,ye){de&&"function"==typeof de&&(ye=me,me=de,de=null);var X=K(),_e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser",Ee=ve()?window.isSecureContext:"Browser Not Support",Ie=function(){w.default.warning(_e)};ve()?window.isSecureContext||Ie():X||Ie();var Te=O.report.reportApiInvoke(pe.sessionId,{callback:function(Qe,Rt){if(Qe)return ye&&ye(Qe);me&&me(Rt)},name:"Client.join",options:arguments,getStates:function(){return{isHttps:X,isSecureContext:Ee}},tag:"tracer"});if(ce&&!Object(L.isValidToken)(ce))return w.default.warning("[".concat(F.clientId,"] Param channelKey should be string")),Te(Q.default.INVALID_PARAMETER);if(!Object(L.isValidChannelName)(g))return w.default.error("Invalid Channel Name ".concat(g)),w.default.warning("[".concat(F.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),Te(Q.default.INVALID_PARAMETER);if("string"==typeof g&&""===g)return w.default.warning("[".concat(F.clientId,"] Param channel should not be empty")),Te(Q.default.INVALID_PARAMETER);if(de&&!Object(L.isValidString)(de))return w.default.warning("[".concat(F.clientId,"] optionalInfo should be string")),Te(Q.default.INVALID_PARAMETER);if(ne&&!Object(te.is32Uint)(ne)&&!Object(L.isValidString)(ne,1,255))return w.default.error("Invalid UID ".concat(ne," ").concat(G()(ne))),w.default.warning("[".concat(F.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is 32Uint")),Te(Q.default.INVALID_PARAMETER);if("string"==typeof ne&&0==ne.length)return w.default.warning("[".concat(F.clientId,"] String uid should not be empty")),Te(Q.default.INVALID_PARAMETER);if("string"==typeof ne&&ne.length>256)return w.default.warning("[".concat(F.clientId,"] Length of string uid should be less than 255")),Te(Q.default.INVALID_PARAMETER);w.default.stopWaitJoin(),F.highStream=null,F.lowStream=null,F.lowStreamParameter=null,F.isDualStream=!1,F.highStreamState=2,F.lowStreamState=2;var Ve=Date.now(),He=setTimeout(function(){if(1!=F.gatewayClient.hasJoined){w.default.debug("[".concat(F.clientId,"] The time to join the channel is greater than 5 seconds "));var Qe=Date.now();O.report.joinChannelTimeOut({lts:Qe,sid:pe.sessionId,cname:g,cid:We&&We.cid,uid:We.uid||("string"==typeof ne?void 0:ne),elapse:Qe-Ve,timeout:5})}},5e3),We={clientId:F.clientId,appId:pe.appId,sid:pe.sessionId,cname:g,uid:ne,turnServers:F.turnServers.concat(),proxyServer:F.proxyServer,token:ce||pe.appId,useProxyServer:F.useProxyServer,useLocalAccessPoint:F.useLocalAccessPoint,proxyServerType:F.proxyServerType,optionalInfo:de};if("string"==typeof ne&&(We.stringUid=ne,F.uintUid?(We.uid=F.uintUid,delete F.uintUid):We.uid=0),F.aespassword&&"none"!==F.aesmode&&Y()(We,{aespassword:F.aespassword,aesmode:F.aesmode}),F.aesSalt&&(We.aes_salt=F.aesSalt),O.report.sessionInit(pe.sessionId,{lts:(new Date).getTime(),cname:g,appid:pe.appId,mode:pe.mode,succ:!0}),F.onSuccess=function(Qe){clearTimeout(He),F.rtcStatsCollector.startNetworkQualityTimer(),F.onSuccess=null,Te(null,Qe)},F.onFailure=function(Qe){return Te(Qe)},F.channel=g,F.gatewayClient.state!==oe.a.DISCONNECTED)return w.default.error("[".concat(F.clientId,"] Client already in connecting/connected state")),Te(Q.default.INVALID_OPERATION),void O.report.joinGateway(pe.sessionId,{lts:Date.now(),succ:!1,ec:Q.default.INVALID_OPERATION,addr:null});F.gatewayClient.state=oe.a.CONNECTING;var it=function(Qe,Rt){w.default.info("[".concat(F.clientId,"] Joining channel: ").concat(g)),F.gatewayClient.dispatchEvent({type:"config-distribute",config:Rt,joinInfo:We}),F.key=ce||pe.appId,We.cid=Qe.cid,We.uid||(We.uid=Qe.uid),We.vid=Qe.vid,We.clientId=F.clientId,We.apResponse=Qe.res,Qe.uni_lbs_ip&&Qe.uni_lbs_ip[1]&&(We.uni_lbs_ip=Qe.uni_lbs_ip[1]),We.gatewayAddr=Qe.gateway_addr,F.joinInfo=We,F.gatewayClient.join(We,F.key,function(ct){w.default.info("[".concat(F.clientId,"] Join channel ").concat(g," success, join with uid: ").concat(ct,".")),F.onSuccess=null,F.rtcStatsCollector.startNetworkQualityTimer(),Te(null,ct)},function(ct){return Te(ct)})};We.stringUid&&!We.uid?(F.userAccountReq&&!F.userAccountReq.isFinished()&&F.userAccountReq.cancel(),F.userAccountReq=Object(z.getUserAccount)(We,F.gatewayClient),F.userAccountReq.then(function(Qe){w.default.debug("getUserAccount Success ".concat(Qe.url," ").concat(We.stringUid," => ").concat(Qe.uid)),We.uid=Qe.uid,Object(z.getGatewayList)(We,it,function(Rt){return Te(Rt)})}).catch(function(Qe){w.default.error("getUserAccount rejected",Qe),Te(Qe)})):Object(z.getGatewayList)(We,it,function(Qe){return Te(Qe)})},F.renewChannelKey=function(ce,g,ne){var de=O.report.reportApiInvoke(pe.sessionId,{callback:function(me,ye){if(me)return ne&&ne(me);g&&g(ye)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(L.checkValidString)(ce,"key",1,2047),void 0===F.key?(w.default.error("[".concat(F.clientId,"] renewChannelKey should not be called before user join")),de(Q.default.INVALID_OPERATION)):(F.key=ce,F.gatewayClient.joinInfo.token=ce,F.gatewayClient.key=ce,F.gatewayClient.recover(),de())},F.leave=function(ce,g){F.gatewayClient.isFirstSuccess=!0,F.gatewayClient.hasInvokeLeave=!0;var ne=!1,de=O.report.reportApiInvoke(pe.sessionId,{callback:function(me,ye){if(me)return g&&g(me);F.gatewayClient.reconnectingCS=!1,F.gatewayClient.state=oe.a.DISCONNECTED,clearTimeout(Object(z._getReconnectCSTimer)(F.clientId)),F._renewSession(),F.rtcStatsCollector.clearNetworkQualityTimer(),ce&&ce(ye)},name:"Client.leave",options:arguments,tag:"tracer"});w.default.info("[".concat(F.clientId,"] Leaving channel")),F.userAccountReq&&!F.userAccountReq.isFinished()&&(F.userAccountReq.cancel(),F.gatewayClient.state===oe.a.CONNECTING&&(F.gatewayClient.state=oe.a.DISCONNECTED)),F._terminateLiveStreaming(),F.gatewayClient.leave(function(me){ne=!0,de(null,me)},de),setTimeout(function(){ne||(F.gatewayClient.socket&&(F.gatewayClient.socket.close(),F.gatewayClient.socket=null),F.gatewayClient.state=oe.a.DISCONNECTED,de(null,"LEAVE_MSG_TIMEOUT"))},Object(D.getParameter)("LEAVE_MSG_TIMEOUT"))},F._renewSession=function(){var ce=Object(te.generateSessionId)();if(w.default.debug("renewSession ".concat(pe.sessionId," => ").concat(ce)),pe.sessionId=ce,F.gatewayClient.peerPublishDurationMap.clear(),F.joinInfo&&(F.joinInfo.sid=ce),F.gatewayClient&&(F.gatewayClient.joinInfo&&(F.gatewayClient.joinInfo.sid=ce),F.gatewayClient.localStreams))for(var g in F.gatewayClient.localStreams){var ne=F.gatewayClient.localStreams[g];ne&&(ne.sid=ce)}},F._publish=function(ce,g,ne,de){if(2!==F.highStreamState)return w.default.warning("[".concat(F.clientId,"] Can't publish stream when stream already publish ").concat(ce.getId())),ne&&ne(Q.default.STREAM_ALREADY_PUBLISHED);if(0===F.turnServers.length&&Object(D.getParameter)("FORCE_TURN")&&!Object(D.getParameter)("TURN_ENABLE_TCP")&&!Object(D.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");w.default.info("[".concat(F.clientId,"] Publishing stream, uid ").concat(ce.getId())),F.highStream=ce,F.highStreamState=1,F.highStream.streamId=F.joinInfo.stringUid||F.joinInfo.uid,F.hasPublished=!1;var me=function(ye,X,_e){F.gatewayClient.publish(ye,{streamType:0},function(){ye.sid=pe.sessionId,F.highStreamState=0,w.default.info("[".concat(F.clientId,"] Publish success, uid: ").concat(ye.getId())),F.highStream&&(F.highStream.isDualStream=F.isDualStream),F.isDualStream?F._publishLowStream(function(){X&&X()},function(Ee){w.default.warning("[".concat(F.clientId,"] "),Ee),fe.a.replaceWithCanvasTrack(ye).then(function(){X&&X()})}):fe.a.replaceWithCanvasTrack(ye).then(function(){X&&X()})},_e)};"audience"!==F.gatewayClient.role||"live"!==F.mode||de?me(ce,g,ne):F.gatewayClient.setClientRole(le,function(ye){if(ye)return ne&&ne(ye);me(ce,g,ne)})},F._unpublish=function(ce,g,ne,de){if(0!==F.highStreamState)return w.default.warning("[".concat(F.clientId,"] Can't unpublish stream when stream not publish")),ne&&ne(Q.default.STREAM_NOT_YET_PUBLISHED);w.default.info("[".concat(F.clientId,"] Unpublish stream, uid ").concat(ce.getId()));var me=function(ye,X,_e){F.isDualStream&&F.lowStream&&F._unpublishLowStream(null,_e),F.gatewayClient.unpublish(ye,{streamType:0},function(){F.highStreamState=2,w.default.info("[".concat(F.clientId,"] Unpublish stream success, uid: ").concat(ye.getId())),F.gatewayClient.dispatchEvent({type:"stream-unpublished",stream:ye}),X&&X()},function(Ee){w.default.info("[".concat(F.clientId,"] Unpublish stream fail, uid: ").concat(ye.getId())),_e&&_e(Ee)})};F.gatewayClient.role!==le||"live"!==F.mode||de?me(ce,g,ne):F.gatewayClient.setClientRole("audience",function(ye){if(ye)return ne&&ne(ye);me(ce,g,ne)})},F.publish=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{callback:function(de,me){if(de)return 1===F.highStreamState&&"REQUEST_ABORT"!==de&&(F.highStreamState=2),g&&g(de)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!g}});2===F.highStreamState?ce._hasVideoTracks()||ce._hasAudioTracks()?(F.gatewayClient.publishRequestId=Object(te.generateId)(),F._publish(ce,function(de){return ne(null,de)},function(de){return ne(de)})):ne(Q.default.NO_TRACK_IN_STREAM):ne(Q.default.STREAM_ALREADY_PUBLISHED)},F.unpublish=function(ce,g,ne){var de=O.report.reportApiInvoke(pe.sessionId,{callback:function(me,ye){if(me)return g&&g(me);ne&&ne(ye)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!g}});0===F.highStreamState?(F.gatewayClient.publishRequestId=null,F._unpublish(ce,function(me){return de(null,me)},function(me){return de(me)})):de(Q.default.STREAM_NOT_YET_PUBLISHED)},F.subscribe=function(ce,g,ne){var de=O.report.reportApiInvoke(pe.sessionId,{callback:function(X,_e){if(X)return ne&&ne(X)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:g,onFailure:!!ne}});"function"==typeof g&&(ne=g,g=null),Object(L.checkValidObject)(ce,"stream"),Object(L.isEmpty)(g)||(Object(L.checkValidObject)(g,"options"),Object(L.isEmpty)(g.video)||Object(L.checkValidBoolean)(g.video,"options.video"),Object(L.isEmpty)(g.audio)||Object(L.checkValidBoolean)(g.audio,"options.audio"));var me={video:!0,audio:!0};if(!Object(L.isEmpty)(g)){if(Object(N.isSafari)()&&(!g.video||!g.audio)){var ye="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return w.default.error("[".concat(F.clientId,"] "),ye),void de(ye)}if(!Object(L.isEmpty)(g.video)&&!Object(L.isValidBoolean)(g.video)||!Object(L.isEmpty)(g.audio)&&!Object(L.isValidBoolean)(g.audio)||!1===g.audio&&!1===g.video)return ye="INVALID_PARAMETER ".concat(JSON.stringify(g)),w.default.error("[".concat(F.clientId,"] "),ye),void de(ye)}ce.subscribeOptions?(Y()(ce.subscribeOptions,me,g),F.gatewayClient.subscribeChange(ce,function(X){return de(null,X)},de)):(F.gatewayClient.subscribeRequestId.set(ce.getId(),Object(te.generateId)()),ce.subscribeOptions=Y()({},me,g),F.gatewayClient.subscribe(ce,function(X){return de(null,X)},de))},F.unsubscribe=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{callback:function(de,me){if(de)return g&&g(de)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!g}});w.default.info("[".concat(F.clientId,"] Unsubscribe stream, uid: ").concat(ce.getId())),F.gatewayClient.subscribeRequestId.delete(ce.getId()),F.gatewayClient.unsubscribe(ce,function(de){return ne(null,de)},ne)},F.setRemoteVideoStreamType=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:g}});Object(L.checkValidEnum)(g,"streamType",[0,1]),F.gatewayClient.setRemoteVideoStreamType(ce,g),ne()},F.setStreamFallbackOption=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:g}});Object(L.checkValidEnum)(g,"fallbackType",[0,1,2]),F.gatewayClient.setStreamFallbackOption(ce,g),ne()},F.enableAudioVolumeIndicator=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});ce=ce||2e3,g=g||3,Object(L.checkValidNumber)(g,"smooth",1,100),Object(L.checkValidNumber)(ce,"interval",50,1e5),F.audioVolumeIndication=F.audioVolumeIndication||{enabled:!0},F.audioVolumeIndication.interval=ce,F.audioVolumeIndication.smooth=g,F.audioVolumeIndication={interval:ce,smooth:g},w.default.info("[".concat(F.clientId,"] enableAudioVolumeIndicator interval ").concat(ce," smooth ").concat(g)),F.gatewayClient.enableAudioVolumeIndicator(ce,g),ne()},F.getNetworkStats=function(ce,g){return w.default.deprecate("[".concat(F.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),ee.getStats(ce,g)},F.getSystemStats=function(ce,g){return R.getStats(ce,g)},F.getRecordingDevices=function(ce,g){return m.a.getRecordingDevices(ce,g)},F.getPlayoutDevices=function(ce,g){return m.a.getPlayoutDevices(ce,g)},F.getCameras=function(ce,g){return m.a.getCameras(ce,g)},F.getRemoteAudioStats=function(ce,g){return F.rtcStatsCollector.getRemoteAudioStats(ce,g)},F.getLocalAudioStats=function(ce,g){return F.rtcStatsCollector.getLocalAudioStats(ce,g)},F.getRemoteVideoStats=function(ce,g){return F.rtcStatsCollector.getRemoteVideoStats(ce,g)},F.getLocalVideoStats=function(ce,g){return F.rtcStatsCollector.getLocalVideoStats(ce,g)},F._getRemoteVideoQualityStats=function(ce,g){return F.rtcStatsCollector.getRemoteVideoQualityStats(ce,g)},F._getRemoteAudioQualityStats=function(ce,g){return F.rtcStatsCollector.getRemoteAudioQualityStats(ce,g)},F.getTransportStats=function(ce,g){return F.rtcStatsCollector.getTransportStats(function(ne){return ee.getStats(function(de){var me=Y()({},ne,de);ce&&ce(me)},g)},g)},F.getSessionStats=function(ce,g){return F.rtcStatsCollector.getSessionStats(ce,g)},F.onNetworkQuality=function(){return F.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},F.sendMetadata=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(de){if(de)return g&&g(de);g&&g()}});F.gatewayClient.sendMetadata(ce,ne)},F.sendCustomReportMessage=function(ce,g,ne,de,me,ye){Object(D.getParameter)("CR")?F.customReportCount>Object(D.getParameter)("CRL")?ye&&ye("REPORT_LIMITED"):(F.gatewayClient.hasJoined||(w.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),ye&&ye("REPORT_BEFORE_JOINED")),F.customReportTimer||(F.customReportTimer=setInterval(function(){F.customReportCount=0},Object(D.getParameter)("CRI"))),Object(L.checkValidString)(ce,"reportId",0,100,!1),Object(L.checkValidString)(g,"category",0,100,!1),Object(L.checkValidString)(ne,"event",0,100,!1),Object(L.checkValidString)(de,"label",0,100,!1),Object(L.checkValidNumber)(me,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),F.customReportCount++,O.report.sendCustomReportMessage(pe.sessionId,{reportId:ce,category:g,event:ne,label:de,value:me,lts:Date.now()},function(X){X?ye&&ye("REPORT_FAILED"):ye&&ye()})):ye&&ye("REPORT_FORBIDDEN")},F.setLocalAccessPoints=function(ce,g){var ne=O.report.reportApiInvoke(pe.sessionId,{name:"Client.setLocalAccessPoints",tag:"tracer"});if(Object(L.checkValidArray)(ce,"serverList"),Object(L.checkValidString)(g,"domain"),F.useProxyServer)throw new Error("You have already set the proxy");var de=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;ce=ce.map(function(me){return de.test(me)?"".concat(me.replace(/\./g,"-"),".").concat(g):me}),F.useLocalAccessPoint=!0,Object(D.setParameter)("WEBCS_DOMAIN",ce),Object(D.setParameter)("WEBCS_DOMAIN_BACKUP_LIST",ce),Object(D.setParameter)("GATEWAY_DOMAINS",[g]),Object(D.setParameter)("EVENT_REPORT_DOMAIN",ce[Math.floor(Math.random()*ce.length)]),Object(D.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",ce[Math.floor(Math.random()*ce.length)]),Object(D.setParameter)("LOG_UPLOAD_SERVER","".concat(ce[Math.floor(Math.random()*ce.length)],":6444")),ne()},pe.clientId=F.clientId,F.gatewayClient=Object(oe.a)(pe),F.listenerLoggerTimer=null,F.listenerLoggerCache=[],F.on=function(ce,g){F.gatewayClient.on(ce,g),F.listenerLoggerCache.push("".concat(ce).concat(g.name?":"+g.name:"")),F.listenerLoggerTimer?clearTimeout(F.listenerLoggerTimer):w.default.info("[".concat(F.clientId,"] Adding event handler on ").concat(ce)),F.listenerLoggerTimer=setTimeout(function(){F.listenerLoggerCache.length&&(F.listenerLoggerTimer=null,w.default.info("[".concat(F.clientId,"] Added event handler on ").concat(F.listenerLoggerCache.join(", "))),F.listenerLoggerCache=[])},0)},F.off=function(ce,g){w.default.info("remove event handler from [".concat(ce,"]")),F.gatewayClient.removeEventListener(ce,g)},F.rtcStatsCollector=(ce=F.gatewayClient,(g=Object(T.b)()).gatewayClient=ce,g.exceptionMonitor=new l(ce),g.localStats={},g.remoteStats={},g.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},g.getRemoteAudioStats=function(ne){var de=g.gatewayClient.traffic_stats,me={};for(var ye in g.remoteStats){var X={},_e=g.remoteStats[ye];if(Object(b.b)(X,"End2EndDelay",_e.peer_delay&&_e.peer_delay.audio_delay),Object(b.b)(X,"TransportDelay",_e.peer_delay&&_e.peer_delay.e2e_delay),Object(b.b)(X,"PacketLossRate",_e.peer_delay&&_e.peer_delay.e2e_audio_lost_ratio_400ms),Object(b.b)(X,"RecvLevel",_e.audioStats&&_e.audioStats.audioOutputLevel),Object(b.b)(X,"RecvBitrate",_e.audioRecvBitrate),Object(b.b)(X,"CodecType",_e.audioStats&&_e.audioStats.googCodecName),Object(b.b)(X,"MuteState",_e.audioDisabled),Object(b.b)(X,"TotalFreezeTime",_e.audioStats&&_e.audioStats.audioTotalFreezeTime),Object(b.b)(X,"TotalPlayDuration",_e.audioStats&&_e.audioStats.audioTotalPlayDuration),de&&de.peer_delay){var Ee=de.peer_delay.find(function(Te){return Te.peer_uid==ye});if(Ee){var Ie=Ee.peer_publish_audio_duration+(Date.now()-de.timestamp);Object(b.b)(X,"AudioPublishDuration",Ie)}else Object(b.b)(X,"AudioPublishDuration",-1)}me[ye]=X}ne&&ne(me)},g.getLocalAudioStats=function(ne){var de={};for(var me in g.localStats){var ye={},X=g.localStats[me];Object(b.b)(ye,"RecordingLevel",X.audioStats&&X.audioStats.audioInputLevel),Object(b.b)(ye,"SendLevel",X.audioStats&&X.audioStats.totalAudioEnergy),Object(b.b)(ye,"SamplingRate",X.audioStats&&X.audioStats.totalSamplesDuration),Object(b.b)(ye,"SendBitrate",X.audioSendBitrate),Object(b.b)(ye,"CodecType",X.audioStats&&X.audioStats.googCodecName),Object(b.b)(ye,"MuteState",X.audioDisabled),Object(b.b)(ye,"audioSendPacketsLost",X.audioStats&&X.audioStats.packetsLost);var _e=g.gatewayClient.localStreams[me];_e&&_e.isPlaying()&&Object(b.b)(ye,"MuteState",_e.userMuteAudio?"1":"0"),de[me]=ye}ne&&ne(de)},g.getRemoteVideoStats=function(ne){var de=g.gatewayClient.traffic_stats,me={};for(var ye in g.remoteStats){var X={},_e=g.remoteStats[ye];if(Object(b.b)(X,"End2EndDelay",_e.peer_delay&&_e.peer_delay.video_delay),Object(b.b)(X,"TransportDelay",_e.peer_delay&&_e.peer_delay.e2e_delay),Object(b.b)(X,"PacketLossRate",_e.peer_delay&&_e.peer_delay.e2e_video_lost_ratio_400ms),Object(b.b)(X,"RecvBitrate",_e.videoRecvBitrate),Object(b.b)(X,"RecvResolutionWidth",_e.videoStats&&_e.videoStats.googFrameWidthReceived),Object(b.b)(X,"RecvResolutionHeight",_e.videoStats&&_e.videoStats.googFrameHeightReceived),Object(b.b)(X,"RenderResolutionWidth",_e.videoStats&&_e.videoStats.renderRemoteWidth),Object(b.b)(X,"RenderResolutionHeight",_e.videoStats&&_e.videoStats.renderRemoteHeight),Object(b.b)(X,"RenderFrameRate",_e.videoStats&&_e.videoStats.googFrameRateOutput),Object(b.b)(X,"MuteState",_e.videoDisabled),Object(b.b)(X,"TotalFreezeTime",_e.videoStats&&_e.videoStats.videoTotalFreezeTime),Object(b.b)(X,"TotalPlayDuration",_e.videoStats&&_e.videoStats.videoTotalPlayDuration),de&&de.peer_delay){var Ee=de.peer_delay.find(function(Te){return Te.peer_uid==ye});if(Ee){var Ie=Ee.peer_publish_video_duration+(Date.now()-de.timestamp);Object(b.b)(X,"VideoPublishDuration",Ie)}else Object(b.b)(X,"VideoPublishDuration",-1)}me[ye]=X}ne&&ne(me)},g.getLocalVideoStats=function(ne){var de={};for(var me in g.localStats){var ye={},X=g.localStats[me];Object(b.b)(ye,"TargetSendBitrate",X.videoTargetSendBitrate),Object(b.b)(ye,"SendFrameRate",X.videoStats&&X.videoStats.googFrameRateSent),Object(b.b)(ye,"SendBitrate",X.videoSendBitrate),Object(b.b)(ye,"SendResolutionWidth",X.videoStats&&X.videoStats.googFrameWidthSent),Object(b.b)(ye,"SendResolutionHeight",X.videoStats&&X.videoStats.googFrameHeightSent),Object(b.b)(ye,"CaptureResolutionWidth",X.videoStats&&X.videoStats.googFrameWidthInput),Object(b.b)(ye,"CaptureResolutionHeight",X.videoStats&&X.videoStats.googFrameHeightInput),Object(b.b)(ye,"EncodeDelay",X.videoStats&&X.videoStats.googAvgEncodeMs),Object(b.b)(ye,"MuteState",X.videoDisabled),Object(b.b)(ye,"TotalFreezeTime",X.videoStats&&X.videoStats.videoTotalFreezeTime),Object(b.b)(ye,"TotalDuration",X.videoStats&&X.videoStats.videoTotalPlayDuration),Object(b.b)(ye,"CaptureFrameRate",X.videoStats&&X.videoStats.googFrameRateSent),Object(b.b)(ye,"videoSendPacketsLost",X.videoStats&&X.videoStats.packetsLost),X.videoStats&&!X.videoStats.googFrameWidthInput&&Object(b.b)(ye,"CaptureResolutionWidth",X.videoStats&&X.videoStats.renderLocalWidth),X.videoStats&&!X.videoStats.googFrameHeightInput&&Object(b.b)(ye,"CaptureResolutionHeight",X.videoStats&&X.videoStats.renderLocalHeight),de[me]=ye}ne&&ne(de)},g.getRemoteVideoQualityStats=function(ne){var de={};for(var me in g.remoteStats){var ye={},X=g.remoteStats[me];Object(b.b)(ye,"videoReceiveDelay",X.videoStats&&X.videoStats.googCurrentDelayMs),Object(b.b)(ye,"VideoFreezeRate",X.videoStats&&X.videoStats.videoFreezeRate),Object(b.b)(ye,"FirstFrameTime",X.firstFrameTime),de[me]=ye}ne&&ne(de)},g.getRemoteAudioQualityStats=function(ne){var de={};for(var me in g.remoteStats){var ye={},X=g.remoteStats[me];Object(b.b)(ye,"audioReceiveDelay",X.audioStats&&X.audioStats.googCurrentDelayMs),Object(b.b)(ye,"AudioFreezeRate",X.videoStats&&X.videoStats.videoFreezeRate),de[me]=ye}ne&&ne(de)},g.getTransportStats=function(ne){var de={},me={},ye=g.gatewayClient.traffic_stats,X=ye.peer_delay;if(Object(b.b)(de,"OutgoingAvailableBandwidth",g.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(b.b)(de,"RTT",ye&&2*ye.access_delay),X){var _e,Ee=function(pe){if("undefined"==typeof Symbol||null==pe[Symbol.iterator]){if(Array.isArray(pe)||(pe=function(ce,g){if(ce){if("string"==typeof ce)return p(ce,g);var ne=Object.prototype.toString.call(ce).slice(8,-1);if("Object"===ne&&ce.constructor&&(ne=ce.constructor.name),"Map"===ne||"Set"===ne)return Array.from(ne);if("Arguments"===ne||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return p(ce,g)}}(pe))){var F=0,Ne=function(){};return{s:Ne,n:function(){return F>=pe.length?{done:!0}:{done:!1,value:pe[F++]}},e:function(ce){throw ce},f:Ne}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ze,Ge,qe=!0,Je=!1;return{s:function(){Ze=pe[Symbol.iterator]()},n:function(){var ce=Ze.next();return qe=ce.done,ce},e:function(ce){Je=!0,Ge=ce},f:function(){try{qe||null==Ze.return||Ze.return()}finally{if(Je)throw Ge}}}}(X);try{for(Ee.s();!(_e=Ee.n()).done;){var Ie=_e.value;Ie.downlink_estimate_bandwidth&&(me[Ie.peer_uid]=Ie.downlink_estimate_bandwidth/1e3+"")}}catch(Te){Ee.e(Te)}finally{Ee.f()}}de.IncomingAvailableBandwidth=me,ne&&ne(de)},g.getSessionStats=function(ne){var de={},me=g.gatewayClient.traffic_stats,ye=g.gatewayClient.socket,X=0,_e=0;for(var Ee in g.remoteStats)(Ie=g.remoteStats[Ee])&&Ie.videoStats&&Ie.videoStats.videoRecvBytesDelta&&(_e+=parseInt(Ie.videoStats.videoRecvBytesDelta)),Ie&&Ie.audioStats&&Ie.audioStats.audioRecvBytesDelta&&(_e+=parseInt(Ie.audioStats.audioRecvBytesDelta));for(var Ee in g.localStats){var Ie;(Ie=g.localStats[Ee])&&Ie.videoStats&&Ie.videoStats.videoSendBytesDelta&&(X+=parseInt(Ie.videoStats.videoSendBytesDelta)),Ie&&Ie.audioStats&&Ie.audioStats.audioSendBytesDelta&&(X+=parseInt(Ie.audioStats.audioSendBytesDelta))}var Te=X+g.session.WSSendBytesDelta+g.session.HTTPSendBytesDelta,Ve=_e+g.session.WSRecvBytesDelta+g.session.HTTPRecvBytesDelta,He=g.session.sendBytes+Object(u.getHTTPSendBytes)(),We=g.session.recvBytes+Object(u.getHTTPRecvBytes)();g.gatewayClient.socket&&g.gatewayClient.socket.state===g.gatewayClient.CONNECTED&&(He+=ye.getSendBytes(),We+=ye.getRecvBytes());var it=1;me.peer_delay&&(it=me.peer_delay.length,it+=1),ye?Object(b.b)(de,"Duration",ye.getDuration()):Object(b.b)(de,"Duration",0),Object(b.b)(de,"UserCount",it),Object(b.b)(de,"SendBytes",He),Object(b.b)(de,"RecvBytes",We),Object(b.b)(de,"SendBitrate",8*Te/1e3),Object(b.b)(de,"RecvBitrate",8*Ve/1e3),ne&&ne(de)},g.isLocalVideoFreeze=function(ne,de){var me=0,ye=0;if(!ne||!de)return!1;if(Object(N.isChrome)()||Object(N.isOpera)())me=ne.googFrameRateInput,ye=ne.googFrameRateSent;else if(Object(N.isSafari)())me=parseInt(ne.framerateMean),ye=parseInt(ne.framesEncoded)-parseInt(de.framesEncoded);else{if(!Object(N.isFireFox)())return!1;me=parseInt(ne.framerateMean),ye=parseInt(ne.framesEncoded)-parseInt(de.framesEncoded)}return me>5&&ye<3},g.isRemoteVideoFreeze=function(ne,de){var me=0,ye=0;if(!ne||!de)return!1;if(Object(N.isChrome)()||Object(N.isOpera)())me=ne.googFrameRateReceived,ye=ne.googFrameRateDecoded;else if(Object(N.isSafari)())me=ne.framerateMean,ye=parseInt(ne.framesDecoded)-parseInt(de.framesDecoded);else{if(!Object(N.isFireFox)())return!1;me=parseInt(ne.framesReceived)-parseInt(de.framesReceived),ye=parseInt(ne.framesDecoded)-parseInt(de.framesDecoded)}return me>5&&me<10&&ye<3||me>10&&me<20&&ye<4||me>20&&ye<5},g.isAudioFreeze=function(ne){if(Object(N.isChrome)()&&ne){if(ne.googDecodingPLC&&ne.googDecodingPLCCNG&&ne.googDecodingCTN)return(parseInt(ne.googDecodingPLC)+parseInt(ne.googDecodingPLCCNG))/parseInt(ne.googDecodingCTN)>.2}else if((Object(N.isSafari)()||Object(N.isFireFox)())&&ne.packetsLost&&ne.packetsReceived)return parseInt(ne.packetsLost)/(parseInt(ne.packetsLost)+parseInt(ne.packetsReceived))>.2;return!1},g.isAudioDecodeFailed=function(ne){return!!((Object(N.isChrome)()||Object(N.isOpera)())&&ne&&parseInt(ne.bytesReceived)>0&&0===parseInt(ne.googDecodingNormal))},g.startNetworkQualityTimer=function(){g.clearNetworkQualityTimer(),g.networkQualityTimer=setInterval(function(){if(g.gatewayClient.state===oe.a.CONNECTED&&navigator.onLine){var ne=g.gatewayClient.traffic_stats;g.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:g.networkQualityTrans(ne.uplink_network_quality),downlinkNetworkQuality:g.networkQualityTrans(ne.downlink_network_quality)})}else g.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3)},g.clearNetworkQualityTimer=function(){g.networkQualityTimer&&clearInterval(g.networkQualityTimer)},g.networkQualityTrans=function(ne){return ne>=0&&ne<.17?1:ne>=.17&&ne<.36?2:ne>=.36&&ne<.59?3:ne>=.59&&ne<=1?4:ne>1?5:0},g.getStatsTimer=setInterval(function(){var ne=g.gatewayClient.traffic_stats,de=Date.now();g.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(g.localStats).length&&g.exceptionMonitor.setLocalStats(g.localStats),Object.keys(g.remoteStats).length&&g.exceptionMonitor.setRemoteStats(g.remoteStats);var me={};Object.keys(g.gatewayClient.remoteStreams).forEach(function(_e){var Ee=g.gatewayClient.remoteStreams[_e],Ie=g.remoteStats[_e],Te={id:_e,updatedAt:de};me[_e]=Te,Te.firstFrameTime=Ee.firstFrameTime,Ie?(Te.audioTotalPlayDuration=Ie.audioTotalPlayDuration+1,Te.audioTotalFreezeTime=Ie.audioTotalFreezeTime,Te.isAudioFreeze=!1,Te.isAudioDecodeFailed=!1,Te.videoTotalPlayDuration=Ie.videoTotalPlayDuration+1,Te.videoTotalFreezeTime=Ie.videoTotalFreezeTime,Te.isVideoFreeze=!1):(Te.audioTotalPlayDuration=1,Te.audioTotalFreezeTime=0,Te.videoTotalPlayDuration=1,Te.videoTotalFreezeTime=0);var Ve=ne&&ne.peer_delay&&ne.peer_delay.find(function(He){return He.peer_uid==_e});Ve&&(Te.peer_delay=Ve),Ee&&(Ee.isPlaying()&&(Te.audioDisabled=Ee.userMuteAudio||Ee.peerMuteAudio?"1":"0",Te.videoDisabled=Ee.userMuteVideo||Ee.peerMuteVideo?"1":"0"),Ie&&Ie.peer_delay&&Ve&&Ie.peer_delay.stream_type!==Ve.stream_type&&g.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:_e,streamType:Ve.stream_type}),Ee.pc&&"established"==Ee.pc.state&&Ee.pc.getStats(function(He){if(Te.pcStats=He,Te.audioStats=He.find(function(ct){return"audio"==ct.mediaType&&(ct.id.indexOf("_recv")>-1||ct.id.toLowerCase().indexOf("inbound")>-1)}),Te.videoStats=He.find(function(ct){return"video"==ct.mediaType&&(ct.id.indexOf("_recv")>-1||ct.id.toLowerCase().indexOf("inbound")>-1)}),Ie&&Ie.audioStats&&Te.audioStats){var We=parseInt(Te.audioStats.bytesReceived)-parseInt(Ie.audioStats.bytesReceived),it=parseInt(Te.audioStats.googDecodingNormal)-parseInt(Ie.audioStats.googDecodingNormal);if(Te.audioStats.audioRecvBytesDelta=We,Te.audioStats.audioDecodingNormalDelta=it,g.session.recvBytes+=We,isFinite(We)&&Te.audioStats.timestamp){var Qe=Te.audioStats.timestamp.getTime()-Ie.audioStats.timestamp.getTime();Te.audioRecvBitrate=Math.floor(8*We/Qe)}g.isAudioFreeze(Te.audioStats)&&Te.audioTotalPlayDuration>10&&(Te.audioTotalFreezeTime++,Te.isAudioFreeze=!0),g.isAudioDecodeFailed(Te.audioStats)&&Te.audioTotalPlayDuration>10&&(Te.isAudioDecodeFailed=!0),Te.audioStats.audioTotalFreezeTime=Te.audioTotalFreezeTime,Te.audioStats.audioTotalPlayDuration=Te.audioTotalPlayDuration,Te.audioStats.audioFreezeRate=Math.ceil(100*Te.audioTotalFreezeTime/Te.audioTotalPlayDuration)}if(Ie&&Ie.videoStats&&Te.videoStats){var Rt=parseInt(Te.videoStats.bytesReceived)-parseInt(Ie.videoStats.bytesReceived);Te.videoStats.videoRecvBytesDelta=Rt,g.session.recvBytes+=Rt,isFinite(Rt)&&Te.videoStats.timestamp&&(Qe=Te.videoStats.timestamp.getTime()-Ie.videoStats.timestamp.getTime(),Te.videoRecvBitrate=Math.floor(8*Rt/Qe)),g.isRemoteVideoFreeze(Te.videoStats,Ie.videoStats)&&(Te.videoTotalFreezeTime++,Te.isVideoFreeze=!0),Te.videoStats.videoTotalFreezeTime=Te.videoTotalFreezeTime,Te.videoStats.videoTotalPlayDuration=Te.videoTotalPlayDuration,Te.videoStats.videoFreezeRate=Math.ceil(100*Te.videoTotalFreezeTime/Te.videoTotalPlayDuration),Ee.player&&Ee.player.video&&Ee.player.video.videoWidth&&Ee.player.video.videoHeight?(Te.videoStats.renderRemoteWidth=Ee.player.video.videoWidth,Te.videoStats.renderRemoteHeight=Ee.player.video.videoHeight):(Te.videoStats.renderRemoteWidth=Ee.videoWidth||Te.videoStats.googFrameWidthReceived,Te.videoStats.renderRemoteHeight=Ee.videoHeight||Te.videoStats.googFrameHeightReceived)}}))}),g.remoteStats=me;var ye={};if(Object.keys(g.gatewayClient.localStreams).forEach(function(_e){var Ee=g.gatewayClient.localStreams[_e],Ie=g.localStats[_e],Te={id:_e,updatedAt:de};ye[_e]=Te,Ie?(Te.videoTotalPlayDuration=Ie.videoTotalPlayDuration+1,Te.videoTotalFreezeTime=Ie.videoTotalFreezeTime,Te.isVideoFreeze=!1):(Te.videoTotalPlayDuration=1,Te.videoTotalFreezeTime=0),Ee&&(Ee.isPlaying()&&(Te.audioDisabled=Ee.userMuteAudio?"1":"0",Te.videoDisabled=Ee.userMuteVideo?"1":"0"),Ee.video&&Ee.attributes.maxVideoBW?Te.videoTargetSendBitrate=Ee.attributes.maxVideoBW:Ee.video&&Ee.screenAttributes&&(Te.videoTargetSendBitrate=Ee.screenAttributes.maxVideoBW),Ee.pc&&"established"==Ee.pc.state&&Ee.pc.getStats(function(Ve){if(Te.pcStats=Ve.reverse(),Te.audioStats=Ve.find(function(Qe){return"audio"==Qe.mediaType&&(Qe.id.indexOf("_send")>-1||Qe.id.toLowerCase().indexOf("outbound")>-1)}),Te.videoStats=Ve.find(function(Qe){return"video"==Qe.mediaType&&(Qe.id.indexOf("_send")>-1||Qe.id.toLowerCase().indexOf("outbound")>-1)}),Te.audioStats&&Ie&&Ie.audioStats){var He=parseInt(Te.audioStats.bytesSent)-parseInt(Ie.audioStats.bytesSent);if(Te.audioStats.audioSendBytesDelta=He,g.session.sendBytes+=He,isFinite(He)&&Te.audioStats.timestamp){var We=Te.audioStats.timestamp.getTime()-Ie.audioStats.timestamp.getTime();Te.audioSendBitrate=Math.floor(8*He/We)}}if(Te.videoStats&&Ie&&Ie.videoStats){var it=parseInt(Te.videoStats.bytesSent)-parseInt(Ie.videoStats.bytesSent);Te.videoStats.videoSendBytesDelta=it,g.session.sendBytes+=it,isFinite(it)&&Te.videoStats.timestamp&&(We=Te.videoStats.timestamp.getTime()-Ie.videoStats.timestamp.getTime(),Te.videoSendBitrate=Math.floor(8*it/We)),g.isLocalVideoFreeze(Te.videoStats,Ie.videoStats)&&(Te.videoTotalFreezeTime++,Te.isVideoFreeze=!0),Te.videoStats.videoTotalFreezeTime=Te.videoTotalFreezeTime,Te.videoStats.videoTotalPlayDuration=Te.videoTotalPlayDuration,Te.videoStats.videoFreezeRate=Math.ceil(100*Te.videoTotalFreezeTime/Te.videoTotalPlayDuration),Te.videoStats.renderLocalWidth=Ee.videoWidth||Te.videoStats.googFrameWidthSent,Te.videoStats.renderLocalHeight=Ee.videoHeight||Te.videoStats.googFrameHeightSent}}))}),g.localStats=ye,g.session.HTTPSendBytesDelta=Object(u.getHTTPSendBytes)()-g.session.HTTPSendBytes,g.session.HTTPSendBytes=Object(u.getHTTPSendBytes)(),g.session.HTTPRecvBytesDelta=Object(u.getHTTPRecvBytes)()-g.session.HTTPRecvBytes,g.session.HTTPRecvBytes=Object(u.getHTTPRecvBytes)(),g.gatewayClient.socket&&g.gatewayClient.socket.state===g.gatewayClient.CONNECTED){var X=g.gatewayClient.socket;g.session.WSSendBytesDelta=X.getSendBytes()-g.session.WSSendBytes,g.session.WSSendBytes=X.getSendBytes(),g.session.WSRecvBytesDelta=X.getRecvBytes()-g.session.WSRecvBytes,g.session.WSRecvBytes=X.getRecvBytes()}},1e3),g.gatewayClient.on("join",function(){g.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}}),g),F.configDistributManager=function(ce){var g={};return g.client=ce,g.client.gatewayClient&&g.client.gatewayClient.on("config-distribute",function(ne){var de=ne.joinInfo,me=ne.config;if(me){Object(L.isEmpty)(me.uploadLog)||(Object(D.setParameter)("UPLOAD_LOG",me.uploadLog),O.report.reportApiInvoke(de.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:me.uploadLog}})()),Object(L.isEmpty)(me.dualStream)||(ce.isDualStream=me.dualStream,O.report.reportApiInvoke(de.sid,{name:"_configDistribute",options:{feature:"dualStream",value:me.dualStream}})()),Object(L.isEmpty)(me.streamFallbackOption)||g.client.gatewayClient&&g.client.gatewayClient.on("stream-subscribed",function(ye){var X=ye.stream;X?(g.client.gatewayClient.setStreamFallbackOption(X,me.streamFallbackOption),O.report.reportApiInvoke(de.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:me.streamFallbackOption,streamId:X.getId()}})()):O.report.reportApiInvoke(de.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:me.streamFallbackOption,streamId:X.getId(),err:"invalid stream"}})()});try{w.default.debug("[".concat(ce.clientId,"] setParameter in distribution: ").concat(JSON.stringify(me))),Object.keys(me).map(function(ye){return Object(D.setParameter)(ye,me[ye])})}catch(ye){w.default.debug("[".concat(ce.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(me)))}}}),g}(F),Object(re.addLiveStreamingCapability)(F,pe),pe.areaCode){var Ze=pe.areaCode,Ge=pe.excludedArea,qe=Object(H.getAreaCodeByConfig)({areaCode:Ze,excludedArea:Ge});Object(D.setParameter)("AREA_SETTING",qe);var Je=Object(H.getAreaDomainConfig)(qe);Object.keys(Je).map(function(ce){var g=Je[ce];"LOG_UPLOAD_SERVER"==ce||"EVENT_REPORT_DOMAIN"==ce||"EVENT_REPORT_BACKUP_DOMAIN"==ce||"NGINX"==ce?Object(D.setParameter)(ce,g[0]):Object(D.setParameter)(ce,g)})}return Object(L.isEmpty)(pe.turnServer)||F.setTurnServer(pe.turnServer),Object(L.isEmpty)(pe.proxyServer)||F.setProxyServer(pe.proxyServer),"live"===F.mode&&(F.gatewayClient.role="audience"),"rtc"===F.mode&&(F.gatewayClient.role=le),F.gatewayClient.on("onMultiIP",function(ce){F.gatewayClient.closeGateway(),F.gatewayClient.socket=void 0,F.gatewayClient.hasChangeBGPAddress=!0,F.joinInfo.multiIP=ce.option,F.gatewayClient.state=oe.a.CONNECTING;var g=function(ne){w.default.info("[".concat(F.clientId,"] Joining channel: ").concat(F.channel)),F.joinInfo.cid=ne.cid,F.joinInfo.uid||(F.joinInfo.uid=ne.uid),F.joinInfo.uni_lbs_ip=ne.uni_lbs_ip,F.joinInfo.gatewayAddr=ne.gateway_addr,F.onSuccess?F.gatewayClient.join(F.joinInfo,F.key,function(de){w.default.info("[".concat(F.clientId,"] Join channel ").concat(F.channel," success"));var me=F.onSuccess;F.onSuccess=null,F.onFailure=null,me(de)},F.onFailure):(F.gatewayClient.joinInfo=Y()({},F.joinInfo),F.gatewayClient.rejoin())};F.joinInfo.stringUid&&!F.joinInfo.uid?(F.userAccountReq&&!F.userAccountReq.isFinished()&&F.userAccountReq.cancel(),F.userAccountReq=Object(z.getUserAccount)(joinInfo,F.gatewayClient),F.userAccountReq.then(function(ne){w.default.error("getUserAccount Success ".concat(ne.url," ").concat(joinInfo.stringUid," => ").concat(ne.uid)),F.joinInfo.uid=ne.uid,Object(z.getGatewayList)(F.joinInfo,g,F.onFailure)}).catch(function(ne){w.default.error("getUserAccount rejected",ne),F.onFailure(ne)})):Object(z.getGatewayList)(F.joinInfo,g,F.onFailure)}),F.gatewayClient.on("rejoin-start",function(){F._renewSession(),O.report.sessionInit(pe.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:F.channel,appid:pe.appId,mode:pe.mode,succ:!0})}),F.gatewayClient.on("recover",function(){F._renewSession(),console.log("recover",pe.sessionId),O.report.sessionInit(pe.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:F.channel,appid:pe.appId,mode:pe.mode,succ:!0})}),F.gatewayClient.on("rejoin",function(){var ce=F.highStreamState;if(w.default.debug("[".concat(F.clientId,"] Client local stream preState: ").concat(ce)),F.onSuccess){var g=F.onSuccess;F.onSuccess=null,F.onFailure=null,g(F.joinInfo.uid)}!F.highStream||0!==ce&&1!==ce||(w.default.info("[".concat(F.clientId,"] publish after rejoin")),F.highStreamState=2,F.lowStreamState=2,F.publish(F.highStream,function(ne){ne&&w.default.info("[".concat(F.clientId,"] "),ne)}))}),F.gatewayClient.on("streamPublished",function(ce){F.hasPublished||(F.hasPublished=!0,F.gatewayClient.dispatchEvent({type:"stream-published",stream:ce.stream,proxy:ce.proxy}))}),F.gatewayClient.on("pubP2PLost",function(ce){w.default.debug("[".concat(F.clientId,"] Start reconnect local peerConnection: ").concat(F.highStream.getId())),F.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:F.highStream.getId()}),1===F.highStreamState&&(F.highStreamState=0,F.lowStreamState=0),F._unpublish(F.highStream,function(){F._publish(F.highStream,function(){w.default.debug("[".concat(F.clientId,"] Reconnect local peerConnection success: ").concat(F.highStream.getId())),F.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:F.highStream.getId(),success:!0,reason:""})},function(g){w.default.debug("[".concat(F.clientId,"] Reconnect local peerConnection failed: ").concat(g)),F.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:F.highStream.getId(),success:!1,reason:g})},!0)},function(g){w.default.debug("[".concat(F.clientId,"] Reconnect local peerConnection failed: ").concat(g)),F.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:F.highStream.getId(),success:!1,reason:g})},!0)}),F.gatewayClient.on("subP2PLost",function(ce){w.default.debug("[".concat(F.clientId,"] Start reconnect remote peerConnection: ").concat(ce.stream.getId()," ").concat(ce.stream.subscribeOptions)),F.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:ce.stream.getId()});var g=ce.stream.subscribeOptions;console.log("Re-subscribe stream",g,ce.stream),F.gatewayClient.unsubscribe(ce.stream,function(){ce.stream.subscribeOptions=g,F.gatewayClient.subscribe(ce.stream,function(){w.default.debug("[".concat(F.clientId,"] Reconnect remote peerConnection success: ").concat(ce.stream.getId())),F.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:ce.stream.getId(),success:!0,reason:""})},function(ne){w.default.debug("[".concat(F.clientId,"] Reconnect remote peerConnection failed: "),ne),F.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:ce.stream.getId(),success:!1,reason:ne})})},function(ne){w.default.debug("[".concat(F.clientId,"] Reconnect remote peerConnection failed: "),ne),F.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:ce.stream.getId(),success:!1,reason:ne})})}),ee.on("networkTypeChanged",function(ce){F.gatewayClient&&F.gatewayClient.dispatchEvent(ce);var g=Y()({},ce,{type:"network-type-changed"});F.gatewayClient.dispatchEvent(g)}),m.a.on("recordingDeviceChanged",function(ce){F.gatewayClient&&F.gatewayClient.dispatchEvent(ce);var g=Y()({},ce,{type:"recording-device-changed"});F.gatewayClient.dispatchEvent(g)}),m.a.on("playoutDeviceChanged",function(ce){F.gatewayClient&&F.gatewayClient.dispatchEvent(ce);var g=Y()({},ce,{type:"playout-device-changed"});F.gatewayClient.dispatchEvent(g)}),m.a.on("cameraChanged",function(ce){F.gatewayClient&&F.gatewayClient.dispatchEvent(ce);var g=Y()({},ce,{type:"camera-changed"});F.gatewayClient.dispatchEvent(g)}),F.gatewayClient.on("streamTypeChange",function(ce){var g=Y()({},ce,{type:"stream-type-changed"});F.gatewayClient.dispatchEvent(g),O.report.reportApiInvoke(pe.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(ce))}),F},Oe=function(pe){switch(pe){case"h264_interop":return"h264";default:return"vp8"}},ke=function(pe){return-1===I.indexOf(pe.mode)?Q.default.INVALID_CLIENT_MODE:-1===E.indexOf(pe.codec)?Q.default.INVALID_CLIENT_CODEC:"h264_interop"==pe.mode&&"h264"!==pe.codec&&Q.default.CLIENT_MODE_CODEC_MISMATCH},De=function(pe){switch(pe.mode){case"interop":case"h264_interop":pe.mode="live";break;case"web-only":pe.mode="rtc"}},Re=m.a.getDevices,Ue=v.a.getScreenSources,h=JSON.parse(JSON.stringify(D.SUPPORT_RESOLUTION_LIST));ie.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function(pe){var F=O.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(pe=Y()({},pe||{})).codec||(pe.codec=Oe(pe.mode));var Ne=ke(pe);if(Ne)throw w.default.error("Invalid parameter setting MODE: ".concat(pe.mode," CODEC: ").concat(pe.codec," ERROR ").concat(Ne)),F(Ne),new Error(Ne);return w.default.info("Creating client, MODE: ".concat(pe.mode," CODEC: ").concat(pe.codec)),De(pe),F(null,pe),ge(pe)},createStream:f.b,Logger:w.default,report:O.report,getDevices:Re,getScreenSources:Ue,getParameter:D.getParameter,setParameter:D.setParameter,checkSystemRequirements:function(){var pe=O.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),F=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,Ne=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,Ze=window.WebSocket,Ge=!!F&&!!Ne&&!!Ze,qe=!1;N.isChrome()&&N.getBrowserVersion()>=58&&"iOS"!==N.getBrowserOS()&&(qe=!0),N.isFireFox()&&N.getBrowserVersion()>=56&&(qe=!0),N.isOpera()&&N.getBrowserVersion()>=45&&(qe=!0),N.isSafari()&&N.getBrowserVersion()>=11&&(qe=!0),N.isEdge()&&(qe=!0),(N.isWeChatBrowser()||N.isQQBrowser())&&"iOS"!==N.getBrowserOS()&&(qe=!0),N.isSupportedPC()||N.isSupportedMobile()||(qe=!1),w.default.debug(N.getBrowserInfo(),"isAPISupport: "+Ge+", isVendorAndVersionSupport: "+qe);var Je=Ge&&qe;return pe(null,Je),Je},getSupportedCodec:x.getSupportedCodec,ChannelMediaRelayConfiguration:U.ChannelMediaRelayConfiguration,VERSION:D.VERSION,BUILD:D.BUILD,PROFILE_TABLE:h,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:H.AREAS,AREA_VERSION:"global"}}]).default},module.exports=ie()},570:(ue,ie,V)=>{"use strict";function D(i){return"function"==typeof i}let w=!1;const O={Promise:void 0,set useDeprecatedSynchronousErrorHandling(i){if(i){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else w&&console.log("RxJS: Back to a better error behavior. Thank you. <3");w=i},get useDeprecatedSynchronousErrorHandling(){return w}};function T(i){setTimeout(()=>{throw i},0)}const N={closed:!0,next(i){},error(i){if(O.useDeprecatedSynchronousErrorHandling)throw i;T(i)},complete(){}},_=Array.isArray||(i=>i&&"number"==typeof i.length);function R(i){return null!==i&&"object"==typeof i}const m=(()=>{function i(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return i.prototype=Object.create(Error.prototype),i})();class v{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof v)n.remove(this);else if(null!==n)for(let a=0;a<n.length;++a)n[a].remove(this);if(D(o)){r&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){t=a instanceof m?x(a.errors):[a]}}if(_(s)){let a=-1,c=s.length;for(;++a<c;){const d=s[a];if(R(d))try{d.unsubscribe()}catch(y){t=t||[],y instanceof m?t=t.concat(x(y.errors)):t.push(y)}}}if(t)throw new m(t)}add(t){let n=t;if(!t)return v.EMPTY;switch(typeof t){case"function":n=new v(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof v)){const s=n;n=new v,n._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof v){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}remove(t){const n=this._subscriptions;if(n){const r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}var i;function x(i){return i.reduce((t,n)=>t.concat(n instanceof m?n.errors:n),[])}v.EMPTY=((i=new v).closed=!0,i);const U="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class E extends v{constructor(t,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=N;break;case 1:if(!t){this.destination=N;break}if("object"==typeof t){t instanceof E?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new j(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new j(this,t,n,r)}}[U](){return this}static create(t,n,r){const o=new E(t,n,r);return o.syncErrorThrowable=!1,o}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class j extends E{constructor(t,n,r,o){super(),this._parentSubscriber=t;let s,a=this;D(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==N&&(a=Object.create(n),D(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=r,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;O.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=O;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=t,n.syncErrorThrown=!0):T(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;T(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const n=()=>this._complete.call(this._context);O.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,n){try{t.call(this._context,n)}catch(r){if(this.unsubscribe(),O.useDeprecatedSynchronousErrorHandling)throw r;T(r)}}__tryOrSetError(t,n,r){if(!O.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(o){return O.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=o,t.syncErrorThrown=!0,!0):(T(o),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const M="function"==typeof Symbol&&Symbol.observable||"@@observable";function Y(i){return i}let te=(()=>{class i{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new i;return r.source=this,r.operator=n,r}subscribe(n,r,o){const{operator:s}=this,a=function(i,t,n){if(i){if(i instanceof E)return i;if(i[U])return i[U]()}return i||t||n?new E(i,t,n):new E(N)}(n,r,o);if(a.add(s?s.call(a,this.source):this.source||O.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),O.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(n){try{return this._subscribe(n)}catch(r){O.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(i){for(;i;){const{closed:t,destination:n,isStopped:r}=i;if(t||r)return!1;i=n&&n instanceof E?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=z(r))((o,s)=>{let a;a=this.subscribe(c=>{try{n(c)}catch(d){s(d),a&&a.unsubscribe()}},s,o)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[M](){return this}pipe(...n){return 0===n.length?this:function(i){return 0===i.length?Y:1===i.length?i[0]:function(n){return i.reduce((r,o)=>o(r),n)}}(n)(this)}toPromise(n){return new(n=z(n))((r,o)=>{let s;this.subscribe(a=>s=a,a=>o(a),()=>r(s))})}}return i.create=t=>new i(t),i})();function z(i){if(i||(i=O.Promise||Promise),!i)throw new Error("no Promise impl found");return i}const u=(()=>{function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return i.prototype=Object.create(Error.prototype),i})();class W extends v{constructor(t,n){super(),this.subject=t,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,n=t.observers;if(this.subject=null,!n||0===n.length||t.isStopped||t.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class C extends E{constructor(t){super(t),this.destination=t}}let l=(()=>{class i extends te{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[U](){return new C(this)}lift(n){const r=new $(this,this);return r.operator=n,r}next(n){if(this.closed)throw new u;if(!this.isStopped){const{observers:r}=this,o=r.length,s=r.slice();for(let a=0;a<o;a++)s[a].next(n)}}error(n){if(this.closed)throw new u;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,o=r.length,s=r.slice();for(let a=0;a<o;a++)s[a].error(n);this.observers.length=0}complete(){if(this.closed)throw new u;this.isStopped=!0;const{observers:n}=this,r=n.length,o=n.slice();for(let s=0;s<r;s++)o[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new u;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new u;return this.hasError?(n.error(this.thrownError),v.EMPTY):this.isStopped?(n.complete(),v.EMPTY):(this.observers.push(n),new W(this,n))}asObservable(){const n=new te;return n.source=this,n}}return i.create=(t,n)=>new $(t,n),i})();class $ extends l{constructor(t,n){super(),this.destination=t,this.source=n}next(t){const{destination:n}=this;n&&n.next&&n.next(t)}error(t){const{destination:n}=this;n&&n.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:n}=this;return n?this.source.subscribe(t):v.EMPTY}}function p(i){return i&&"function"==typeof i.schedule}function S(i,t){return function(r){if("function"!=typeof i)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new L(i,t))}}class L{constructor(t,n){this.project=t,this.thisArg=n}call(t,n){return n.subscribe(new ee(t,this.project,this.thisArg))}}class ee extends E{constructor(t,n,r){super(t),this.project=n,this.count=0,this.thisArg=r||this}_next(t){let n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const re=i=>t=>{for(let n=0,r=i.length;n<r&&!t.closed;n++)t.next(i[n]);t.complete()},B="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",le=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function ge(i){return!!i&&"function"!=typeof i.subscribe&&"function"==typeof i.then}const Ce=i=>{if(i&&"function"==typeof i[M])return(i=>t=>{const n=i[M]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(i);if(le(i))return re(i);if(ge(i))return(i=>t=>(i.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,T),t))(i);if(i&&"function"==typeof i[B])return(i=>t=>{const n=i[B]();for(;;){let r;try{r=n.next()}catch(o){return t.error(o),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(i);{const n=`You provided ${R(i)?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function De(i,t){return new te(n=>{const r=new v;let o=0;return r.add(t.schedule(function(){o!==i.length?(n.next(i[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function F(i,t){return t?function(i,t){if(null!=i){if(function(i){return i&&"function"==typeof i[M]}(i))return function(i,t){return new te(n=>{const r=new v;return r.add(t.schedule(()=>{const o=i[M]();r.add(o.subscribe({next(s){r.add(t.schedule(()=>n.next(s)))},error(s){r.add(t.schedule(()=>n.error(s)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(i,t);if(ge(i))return function(i,t){return new te(n=>{const r=new v;return r.add(t.schedule(()=>i.then(o=>{r.add(t.schedule(()=>{n.next(o),r.add(t.schedule(()=>n.complete()))}))},o=>{r.add(t.schedule(()=>n.error(o)))}))),r})}(i,t);if(le(i))return De(i,t);if(function(i){return i&&"function"==typeof i[B]}(i)||"string"==typeof i)return function(i,t){if(!i)throw new Error("Iterable cannot be null");return new te(n=>{const r=new v;let o;return r.add(()=>{o&&"function"==typeof o.return&&o.return()}),r.add(t.schedule(()=>{o=i[B](),r.add(t.schedule(function(){if(n.closed)return;let s,a;try{const c=o.next();s=c.value,a=c.done}catch(c){return void n.error(c)}a?n.complete():(n.next(s),this.schedule())}))})),r})}(i,t)}throw new TypeError((null!==i&&typeof i||i)+" is not observable")}(i,t):i instanceof te?i:new te(Ce(i))}class Ne extends E{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ge extends E{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function Je(i,t){if(t.closed)return;if(i instanceof te)return i.subscribe(t);let n;try{n=Ce(i)(t)}catch(r){t.error(r)}return n}function ce(i,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(ce((o,s)=>F(i(o,s)).pipe(S((a,c)=>t(o,a,s,c))),n)):("number"==typeof t&&(n=t),r=>r.lift(new g(i,n)))}class g{constructor(t,n=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=n}call(t,n){return n.subscribe(new ne(t,this.project,this.concurrent))}}class ne extends Ge{constructor(t,n,r=Number.POSITIVE_INFINITY){super(t),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let n;const r=this.index++;try{n=this.project(t,r)}catch(o){return void this.destination.error(o)}this.active++,this._innerSub(n)}_innerSub(t){const n=new Ne(this),r=this.destination;r.add(n);const o=Je(t,n);o!==n&&r.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function me(i=Number.POSITIVE_INFINITY){return ce(Y,i)}function ye(i,t){return t?De(i,t):new te(re(i))}function X(...i){let t=Number.POSITIVE_INFINITY,n=null,r=i[i.length-1];return p(r)?(n=i.pop(),i.length>1&&"number"==typeof i[i.length-1]&&(t=i.pop())):"number"==typeof r&&(t=i.pop()),null===n&&1===i.length&&i[0]instanceof te?i[0]:me(t)(ye(i,n))}function _e(){return function(t){return t.lift(new Ee(t))}}class Ee{constructor(t){this.connectable=t}call(t,n){const{connectable:r}=this;r._refCount++;const o=new Ie(t,r),s=n.subscribe(o);return o.closed||(o.connection=r.connect()),s}}class Ie extends E{constructor(t,n){super(t),this.connectable=n}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const n=t._refCount;if(n<=0)return void(this.connection=null);if(t._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,o=t._connection;this.connection=null,o&&(!r||o===r)&&o.unsubscribe()}}class Te extends te{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new v,t.add(this.source.subscribe(new He(this.getSubject(),this))),t.closed&&(this._connection=null,t=v.EMPTY)),t}refCount(){return _e()(this)}}const Ve=(()=>{const i=Te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:i._subscribe},_isComplete:{value:i._isComplete,writable:!0},getSubject:{value:i.getSubject},connect:{value:i.connect},refCount:{value:i.refCount}}})();class He extends C{constructor(t,n){super(t),this.connectable=n}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const n=t._connection;t._refCount=0,t._subject=null,t._connection=null,n&&n.unsubscribe()}}}function ct(){return new l}function ot(i){for(let t in i)if(i[t]===ot)return t;throw Error("Could not find renamed property on target object.")}function $n(i,t){for(const n in t)t.hasOwnProperty(n)&&!i.hasOwnProperty(n)&&(i[n]=t[n])}function pt(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(pt).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function eo(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const Es=ot({__forward_ref__:ot});function Ut(i){return i.__forward_ref__=Ut,i.toString=function(){return pt(this())},i}function rt(i){return A_(i)?i():i}function A_(i){return"function"==typeof i&&i.hasOwnProperty(Es)&&i.__forward_ref__===Ut}class Mo extends Error{constructor(t,n){super(function(i,t){return`${i?`NG0${i}: `:""}${t}`}(t,n)),this.code=t}}function St(i){return"string"==typeof i?i:null==i?"":String(i)}function Kn(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():St(i)}function Ol(i,t){const n=t?` in ${t}`:"";throw new Mo("201",`No provider for ${Kn(i)} found${n}`)}function gi(i,t){null==i&&function(i,t,n,r){throw new Error(`ASSERTION ERROR: ${i}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,i,null,"!=")}function ze(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ot(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pr(i){return R_(i,Ml)||R_(i,D_)}function R_(i,t){return i.hasOwnProperty(t)?i[t]:null}function I_(i){return i&&(i.hasOwnProperty(wf)||i.hasOwnProperty(HA))?i[wf]:null}const Ml=ot({\u0275prov:ot}),wf=ot({\u0275inj:ot}),D_=ot({ngInjectableDef:ot}),HA=ot({ngInjectorDef:ot});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let Af;function to(i){const t=Af;return Af=i,t}function O_(i,t,n){const r=Pr(i);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&lt.Optional?null:void 0!==t?t:void Ol(pt(i),"Injector")}function no(i){return{toString:i}.toString()}var Ai=(()=>((Ai=Ai||{})[Ai.OnPush=0]="OnPush",Ai[Ai.Default=1]="Default",Ai))(),_n=(()=>((_n=_n||{})[_n.Emulated=0]="Emulated",_n[_n.None=2]="None",_n[_n.ShadowDom=3]="ShadowDom",_n))();const GA="undefined"!=typeof globalThis&&globalThis,qA="undefined"!=typeof window&&window,zA="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=GA||"undefined"!=typeof global&&global||qA||zA,bs={},zt=[],Nl=ot({\u0275cmp:ot}),Rf=ot({\u0275dir:ot}),If=ot({\u0275pipe:ot}),M_=ot({\u0275mod:ot}),$A=ot({\u0275loc:ot}),xr=ot({\u0275fac:ot}),Ha=ot({__NG_ELEMENT_ID__:ot});let KA=0;function dn(i){return no(()=>{const n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Ai.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||zt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||_n.Emulated,id:"c",styles:i.styles||zt,_:null,setInput:null,schemas:i.schemas||null,tView:null},o=i.directives,s=i.features,a=i.pipes;return r.id+=KA++,r.inputs=x_(i.inputs,n),r.outputs=x_(i.outputs),s&&s.forEach(c=>c(r)),r.directiveDefs=o?()=>("function"==typeof o?o():o).map(N_):null,r.pipeDefs=a?()=>("function"==typeof a?a():a).map(k_):null,r})}function N_(i){return Yn(i)||function(i){return i[Rf]||null}(i)}function k_(i){return function(i){return i[If]||null}(i)}const P_={};function Pt(i){return no(()=>{const t={type:i.type,bootstrap:i.bootstrap||zt,declarations:i.declarations||zt,imports:i.imports||zt,exports:i.exports||zt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(P_[i.id]=i.type),t})}function x_(i,t){if(null==i)return bs;const n={};for(const r in i)if(i.hasOwnProperty(r)){let o=i[r],s=o;Array.isArray(o)&&(s=o[1],o=o[0]),n[o]=r,t&&(t[o]=s)}return n}const Be=dn;function ai(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Yn(i){return i[Nl]||null}function Ri(i,t){const n=i[M_]||null;if(!n&&!0===t)throw new Error(`Type ${pt(i)} does not have '\u0275mod' property.`);return n}function ur(i){return Array.isArray(i)&&"object"==typeof i[1]}function qi(i){return Array.isArray(i)&&!0===i[1]}function Mf(i){return 0!=(8&i.flags)}function Ll(i){return 2==(2&i.flags)}function Fl(i){return 1==(1&i.flags)}function zi(i){return null!==i.template}function tR(i){return 0!=(512&i[2])}function Lo(i,t){return i.hasOwnProperty(xr)?i[xr]:null}class F_{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function yn(){return V_}function V_(i){return i.type.prototype.ngOnChanges&&(i.setInput=oR),rR}function rR(){const i=U_(this),t=null==i?void 0:i.current;if(t){const n=i.previous;if(n===bs)i.previous=t;else for(let r in t)n[r]=t[r];i.current=null,this.ngOnChanges(t)}}function oR(i,t,n,r){const o=U_(i)||function(i,t){return i[j_]=t}(i,{previous:bs,current:null}),s=o.current||(o.current={}),a=o.previous,c=this.declaredInputs[n],d=a[c];s[c]=new F_(d&&d.currentValue,t,a===bs),i[r]=t}yn.ngInherit=!0;const j_="__ngSimpleChanges__";function U_(i){return i[j_]||null}const B_="http://www.w3.org/2000/svg";let Pf;function an(i){return!!i.listen}const W_={createRenderer:(i,t)=>void 0!==Pf?Pf:"undefined"!=typeof document?document:void 0};function vn(i){for(;Array.isArray(i);)i=i[0];return i}function Vl(i,t){return vn(t[i])}function Oi(i,t){return vn(t[i.index])}function Lf(i,t){return i.data[t]}function As(i,t){return i[t]}function _i(i,t){const n=t[i];return ur(n)?n:n[0]}function G_(i){return 4==(4&i[2])}function Ff(i){return 128==(128&i[2])}function ro(i,t){return null==t?null:i[t]}function q_(i){i[18]=0}function Vf(i,t){i[5]+=t;let n=i,r=i[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const _t={lFrame:Z_(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function z_(){return _t.bindingsEnabled}function Fe(){return _t.lFrame.lView}function Lt(){return _t.lFrame.tView}function oo(i){return _t.lFrame.contextLView=i,i[8]}function Tn(){let i=$_();for(;null!==i&&64===i.type;)i=i.parent;return i}function $_(){return _t.lFrame.currentTNode}function dr(i,t){const n=_t.lFrame;n.currentTNode=i,n.isParent=t}function jf(){return _t.lFrame.isParent}function Uf(){_t.lFrame.isParent=!1}function jl(){return _t.isInCheckNoChangesMode}function Ul(i){_t.isInCheckNoChangesMode=i}function Jn(){const i=_t.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function Rs(){return _t.lFrame.bindingIndex++}function ER(i,t){const n=_t.lFrame;n.bindingIndex=n.bindingRootIndex=i,Bf(t)}function Bf(i){_t.lFrame.currentDirectiveIndex=i}function J_(){return _t.lFrame.currentQueryIndex}function Wf(i){_t.lFrame.currentQueryIndex=i}function SR(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function Q_(i,t,n){if(n&lt.SkipSelf){let o=t,s=i;for(;!(o=o.parent,null!==o||n&lt.Host||(o=SR(s),null===o||(s=s[15],10&o.type))););if(null===o)return!1;t=o,i=s}const r=_t.lFrame=X_();return r.currentTNode=t,r.lView=i,!0}function Bl(i){const t=X_(),n=i[1];_t.lFrame=t,t.currentTNode=n.firstChild,t.lView=i,t.tView=n,t.contextLView=i,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function X_(){const i=_t.lFrame,t=null===i?null:i.child;return null===t?Z_(i):t}function Z_(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function e1(){const i=_t.lFrame;return _t.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const t1=e1;function Hl(){const i=e1();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Qn(){return _t.lFrame.selectedIndex}function so(i){_t.lFrame.selectedIndex=i}function cn(){const i=_t.lFrame;return Lf(i.tView,i.selectedIndex)}function hr(){_t.lFrame.currentNamespace=B_}function ao(){_t.lFrame.currentNamespace=null}function Wl(i,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=i.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:d,ngAfterViewChecked:y,ngOnDestroy:k}=s;a&&(i.contentHooks||(i.contentHooks=[])).push(-n,a),c&&((i.contentHooks||(i.contentHooks=[])).push(n,c),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(n,c)),d&&(i.viewHooks||(i.viewHooks=[])).push(-n,d),y&&((i.viewHooks||(i.viewHooks=[])).push(n,y),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(n,y)),null!=k&&(i.destroyHooks||(i.destroyHooks=[])).push(n,k)}}function Gl(i,t,n){n1(i,t,3,n)}function ql(i,t,n,r){(3&i[2])===n&&n1(i,t,n,r)}function Gf(i,t){let n=i[2];(3&n)===t&&(n&=2047,n+=1,i[2]=n)}function n1(i,t,n,r){const s=null!=r?r:-1,a=t.length-1;let c=0;for(let d=void 0!==r?65535&i[18]:0;d<a;d++)if("number"==typeof t[d+1]){if(c=t[d],null!=r&&c>=r)break}else t[d]<0&&(i[18]+=65536),(c<s||-1==s)&&(DR(i,n,t,d),i[18]=(4294901760&i[18])+d+2),d++}function DR(i,t,n,r){const o=n[r]<0,s=n[r+1],c=i[o?-n[r]:n[r]];if(o){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(c)}finally{}}}else try{s.call(c)}finally{}}class $a{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function zl(i,t,n){const r=an(i);let o=0;for(;o<n.length;){const s=n[o];if("number"==typeof s){if(0!==s)break;o++;const a=n[o++],c=n[o++],d=n[o++];r?i.setAttribute(t,c,d,a):t.setAttributeNS(a,c,d)}else{const a=s,c=n[++o];zf(a)?r&&i.setProperty(t,a,c):r?i.setAttribute(t,a,c):t.setAttribute(a,c),o++}}return o}function i1(i){return 3===i||4===i||6===i}function zf(i){return 64===i.charCodeAt(0)}function $l(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?n=o:0===n||r1(i,n,o,null,-1===n||2===n?t[++r]:null)}}return i}function r1(i,t,n,r,o){let s=0,a=i.length;if(-1===t)a=-1;else for(;s<i.length;){const c=i[s++];if("number"==typeof c){if(c===t){a=-1;break}if(c>t){a=s-1;break}}}for(;s<i.length;){const c=i[s];if("number"==typeof c)break;if(c===n){if(null===r)return void(null!==o&&(i[s+1]=o));if(r===i[s+1])return void(i[s+2]=o)}s++,null!==r&&s++,null!==o&&s++}-1!==a&&(i.splice(a,0,t),s=a+1),i.splice(s++,0,n),null!==r&&i.splice(s++,0,r),null!==o&&i.splice(s++,0,o)}function o1(i){return-1!==i}function Is(i){return 32767&i}function Ds(i,t){let n=function(i){return i>>16}(i),r=t;for(;n>0;)r=r[15],n--;return r}let $f=!0;function Kl(i){const t=$f;return $f=i,t}let xR=0;function Ya(i,t){const n=Yf(i,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(i.injectorIndex=t.length,Kf(r.data,i),Kf(t,null),Kf(r.blueprint,null));const o=Yl(i,t),s=i.injectorIndex;if(o1(o)){const a=Is(o),c=Ds(o,t),d=c[1].data;for(let y=0;y<8;y++)t[s+y]=c[a+y]|d[a+y]}return t[s+8]=o,s}function Kf(i,t){i.push(0,0,0,0,0,0,0,0,t)}function Yf(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function Yl(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let n=0,r=null,o=t;for(;null!==o;){const s=o[1],a=s.type;if(r=2===a?s.declTNode:1===a?o[6]:null,null===r)return-1;if(n++,o=o[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Jl(i,t,n){!function(i,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ha)&&(r=n[Ha]),null==r&&(r=n[Ha]=xR++);const o=255&r;t.data[i+(o>>5)]|=1<<o}(i,t,n)}function c1(i,t,n){if(n&lt.Optional)return i;Ol(t,"NodeInjector")}function l1(i,t,n,r){if(n&lt.Optional&&void 0===r&&(r=null),0==(n&(lt.Self|lt.Host))){const o=i[9],s=to(void 0);try{return o?o.get(t,r,n&lt.Optional):O_(t,r,n&lt.Optional)}finally{to(s)}}return c1(r,t,n)}function u1(i,t,n,r=lt.Default,o){if(null!==i){const s=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(Ha)?i[Ha]:void 0;return"number"==typeof t?t>=0?255&t:VR:t}(n);if("function"==typeof s){if(!Q_(t,i,r))return r&lt.Host?c1(o,n,r):l1(t,n,r,o);try{const a=s(r);if(null!=a||r&lt.Optional)return a;Ol(n)}finally{t1()}}else if("number"==typeof s){let a=null,c=Yf(i,t),d=-1,y=r&lt.Host?t[16][6]:null;for((-1===c||r&lt.SkipSelf)&&(d=-1===c?Yl(i,t):t[c+8],-1!==d&&h1(r,!1)?(a=t[1],c=Is(d),t=Ds(d,t)):c=-1);-1!==c;){const k=t[1];if(f1(s,c,k.data)){const q=jR(c,t,n,a,r,y);if(q!==d1)return q}d=t[c+8],-1!==d&&h1(r,t[1].data[c+8]===y)&&f1(s,c,t)?(a=k,c=Is(d),t=Ds(d,t)):c=-1}}}return l1(t,n,r,o)}const d1={};function VR(){return new Os(Tn(),Fe())}function jR(i,t,n,r,o,s){const a=t[1],c=a.data[i+8],k=Ql(c,a,n,null==r?Ll(c)&&$f:r!=a&&0!=(3&c.type),o&lt.Host&&s===c);return null!==k?Ja(t,a,k,c):d1}function Ql(i,t,n,r,o){const s=i.providerIndexes,a=t.data,c=1048575&s,d=i.directiveStart,k=s>>20,J=o?c+k:i.directiveEnd;for(let ae=r?c:c+k;ae<J;ae++){const he=a[ae];if(ae<d&&n===he||ae>=d&&he.type===n)return ae}if(o){const ae=a[d];if(ae&&zi(ae)&&ae.type===n)return d}return null}function Ja(i,t,n,r){let o=i[n];const s=t.data;if(function(i){return i instanceof $a}(o)){const a=o;a.resolving&&function(i,t){throw new Mo("200",`Circular dependency in DI detected for ${i}`)}(Kn(s[n]));const c=Kl(a.canSeeViewProviders);a.resolving=!0;const d=a.injectImpl?to(a.injectImpl):null;Q_(i,r,lt.Default);try{o=i[n]=a.factory(void 0,s,i,r),t.firstCreatePass&&n>=r.directiveStart&&function(i,t,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:s}=t.type.prototype;if(r){const a=V_(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(i,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(i,a)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-i,o),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(i,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(i,s))}(n,s[n],t)}finally{null!==d&&to(d),Kl(c),a.resolving=!1,t1()}}return o}function f1(i,t,n){return!!(n[t+(i>>5)]&1<<i)}function h1(i,t){return!(i&lt.Self||i&lt.Host&&t)}class Os{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return u1(this._tNode,this._lView,t,r,n)}}function Nn(i){return no(()=>{const t=i.prototype.constructor,n=t[xr]||Jf(t),r=Object.prototype;let o=Object.getPrototypeOf(i.prototype).constructor;for(;o&&o!==r;){const s=o[xr]||Jf(o);if(s&&s!==n)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function Jf(i){return A_(i)?()=>{const t=Jf(rt(i));return t&&t()}:Lo(i)}function Fo(i){return function(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const n=i.attrs;if(n){const r=n.length;let o=0;for(;o<r;){const s=n[o];if(i1(s))break;if(0===s)o+=2;else if("number"==typeof s)for(o++;o<r&&"string"==typeof n[o];)o++;else{if(s===t)return n[o+1];o+=2}}}return null}(Tn(),i)}const Ns="__parameters__";function Vo(i,t,n){return no(()=>{const r=function(i){return function(...n){if(i){const r=i(...n);for(const o in r)this[o]=r[o]}}}(t);function o(...s){if(this instanceof o)return r.apply(this,s),this;const a=new o(...s);return c.annotation=a,c;function c(d,y,k){const q=d.hasOwnProperty(Ns)?d[Ns]:Object.defineProperty(d,Ns,{value:[]})[Ns];for(;q.length<=k;)q.push(null);return(q[k]=q[k]||[]).push(a),d}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=i,o.annotationCls=o,o})}class et{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ze({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const WR=new et("AnalyzeForEntryComponents"),Xl=Function;function Mi(i,t){void 0===t&&(t=i);for(let n=0;n<i.length;n++){let r=i[n];Array.isArray(r)?(t===i&&(t=i.slice(0,n)),Mi(r,t)):t!==i&&t.push(r)}return t}function pr(i,t){i.forEach(n=>Array.isArray(n)?pr(n,t):t(n))}function eu(i,t,n){t>=i.length?i.push(n):i.splice(t,0,n)}function jo(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function lo(i,t){const n=[];for(let r=0;r<i;r++)n.push(t);return n}function yi(i,t,n){let r=Ps(i,t);return r>=0?i[1|r]=n:(r=~r,function(i,t,n,r){let o=i.length;if(o==t)i.push(n,r);else if(1===o)i.push(r,i[0]),i[0]=n;else{for(o--,i.push(i[o-1],i[o]);o>t;)i[o]=i[o-2],o--;i[t]=n,i[t+1]=r}}(i,r,t,n)),r}function Xf(i,t){const n=Ps(i,t);if(n>=0)return i[1|n]}function Ps(i,t){return function(i,t,n){let r=0,o=i.length>>n;for(;o!==r;){const s=r+(o-r>>1),a=i[s<<n];if(t===a)return s<<n;a>t?o=s:r=s+1}return~(o<<n)}(i,t,1)}const ec={},eh="__NG_DI_FLAG__",xs="ngTempTokenPath",ZR=/\n/gm,th="__source",nh=ot({provide:String,useValue:ot});let tc;function Ls(i){const t=tc;return tc=i,t}function tI(i,t=lt.Default){if(void 0===tc)throw new Error("inject() must be called from an injection context");return null===tc?O_(i,void 0,t):tc.get(i,t&lt.Optional?null:void 0,t)}function Ae(i,t=lt.Default){return(Af||tI)(rt(i),t)}const v1=Ae;function Uo(i){const t=[];for(let n=0;n<i.length;n++){const r=rt(i[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let o,s=lt.Default;for(let a=0;a<r.length;a++){const c=r[a],d=nI(c);"number"==typeof d?-1===d?o=c.token:s|=d:o=c}t.push(Ae(o,s))}else t.push(Ae(r))}return t}function nc(i,t){return i[eh]=t,i.prototype[eh]=t,i}function nI(i){return i[eh]}function E1(i,t,n,r){const o=i[xs];throw t[th]&&o.unshift(t[th]),i.message=function(i,t,n,r=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let o=pt(t);if(Array.isArray(t))o=t.map(pt).join(" -> ");else if("object"==typeof t){let s=[];for(let a in t)if(t.hasOwnProperty(a)){let c=t[a];s.push(a+":"+("string"==typeof c?JSON.stringify(c):pt(c)))}o=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${i.replace(ZR,"\n  ")}`}("\n"+i.message,o,n,r),i.ngTokenPath=o,i[xs]=null,i}const Fs=nc(Vo("Inject",i=>({token:i})),-1),li=nc(Vo("Optional"),8),uo=nc(Vo("SkipSelf"),4);class Bo{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function vi(i){return i instanceof Bo?i.changingThisBreaksApplicationSecurity:i}function gr(i,t){const n=function(i){return i instanceof Bo&&i.getTypeName()||null}(i);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}const AI=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,RI=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Yt=(()=>((Yt=Yt||{})[Yt.NONE=0]="NONE",Yt[Yt.HTML=1]="HTML",Yt[Yt.STYLE=2]="STYLE",Yt[Yt.SCRIPT=3]="SCRIPT",Yt[Yt.URL=4]="URL",Yt[Yt.RESOURCE_URL=5]="RESOURCE_URL",Yt))();function au(i){const t=function(){const i=Fe();return i&&i[12]}();return t?t.sanitize(Yt.URL,i)||"":gr(i,"URL")?vi(i):function(i){return(i=String(i)).match(AI)||i.match(RI)?i:"unsafe:"+i}(St(i))}const j1="__ngContext__";function jn(i,t){i[j1]=t}function dh(i){const t=function(i){return i[j1]||null}(i);return t?Array.isArray(t)?t:t.lView:null}function cu(i){return i.ngOriginalError}function YI(i,...t){i.error(...t)}class Ho{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),r=this._findContext(t),o=function(i){return i&&i.ngErrorLogger||YI}(t);o(this._console,"ERROR",t),n&&o(this._console,"ORIGINAL ERROR",n),r&&o(this._console,"ERROR CONTEXT",r)}_findContext(t){return t?function(i){return i.ngDebugContext}(t)||this._findContext(cu(t)):null}_findOriginalError(t){let n=t&&cu(t);for(;n&&cu(n);)n=cu(n);return n||null}}const K1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function _r(i){return i instanceof Function?i():i}var Ei=(()=>((Ei=Ei||{})[Ei.Important=1]="Important",Ei[Ei.DashCase=2]="DashCase",Ei))();function ph(i,t){return undefined(i,t)}function cc(i){const t=i[3];return qi(t)?t[3]:t}function gh(i){return Z1(i[13])}function mh(i){return Z1(i[4])}function Z1(i){for(;null!==i&&!qi(i);)i=i[4];return i}function Bs(i,t,n,r,o){if(null!=r){let s,a=!1;qi(r)?s=r:ur(r)&&(a=!0,r=r[0]);const c=vn(r);0===i&&null!==n?null==o?oy(t,n,c):Wo(t,n,c,o||null,!0):1===i&&null!==n?Wo(t,n,c,o||null,!0):2===i?function(i,t,n){const r=uu(i,t);r&&function(i,t,n,r){an(i)?i.removeChild(t,n,r):t.removeChild(n)}(i,r,t,n)}(t,c,a):3===i&&t.destroyNode(c),null!=s&&function(i,t,n,r,o){const s=n[7];s!==vn(n)&&Bs(t,i,r,s,o);for(let c=10;c<n.length;c++){const d=n[c];lc(d[1],d,i,t,r,s)}}(t,i,s,n,o)}}function yh(i,t,n){return an(i)?i.createElement(t,n):null===n?i.createElement(t):i.createElementNS(n,t)}function ty(i,t){const n=i[9],r=n.indexOf(t),o=t[3];1024&t[2]&&(t[2]&=-1025,Vf(o,-1)),n.splice(r,1)}function vh(i,t){if(i.length<=10)return;const n=10+t,r=i[n];if(r){const o=r[17];null!==o&&o!==i&&ty(o,r),t>0&&(i[n-1][4]=r[4]);const s=jo(i,10+t);!function(i,t){lc(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function ny(i,t){if(!(256&t[2])){const n=t[11];an(n)&&n.destroyNode&&lc(i,t,n,3,null,null),function(i){let t=i[13];if(!t)return Eh(i[1],i);for(;t;){let n=null;if(ur(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==i;)ur(t)&&Eh(t[1],t),t=t[3];null===t&&(t=i),ur(t)&&Eh(t[1],t),n=t&&t[4]}t=n}}(t)}}function Eh(i,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(i,t){let n;if(null!=i&&null!=(n=i.destroyHooks))for(let r=0;r<n.length;r+=2){const o=t[n[r]];if(!(o instanceof $a)){const s=n[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const c=o[s[a]],d=s[a+1];try{d.call(c)}finally{}}else try{s.call(o)}finally{}}}}(i,t),function(i,t){const n=i.cleanup,r=t[7];let o=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+1],c="function"==typeof a?a(t):vn(t[a]),d=r[o=n[s+2]],y=n[s+3];"boolean"==typeof y?c.removeEventListener(n[s],d,y):y>=0?r[o=y]():r[o=-y].unsubscribe(),s+=2}else{const a=r[o=n[s+1]];n[s].call(a)}if(null!==r){for(let s=o+1;s<r.length;s++)r[s]();t[7]=null}}(i,t),1===t[1].type&&an(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&qi(t[3])){n!==t[3]&&ty(n,t);const r=t[19];null!==r&&r.detachView(i)}}}function iy(i,t,n){return function(i,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const o=i.data[r.directiveStart].encapsulation;if(o===_n.None||o===_n.Emulated)return null}return Oi(r,n)}(i,t.parent,n)}function Wo(i,t,n,r,o){an(i)?i.insertBefore(t,n,r,o):t.insertBefore(n,r,o)}function oy(i,t,n){an(i)?i.appendChild(t,n):t.appendChild(n)}function sy(i,t,n,r,o){null!==r?Wo(i,t,n,r,o):oy(i,t,n)}function uu(i,t){return an(i)?i.parentNode(t):t.parentNode}function ay(i,t,n){return ly(i,t,n)}let ly=function(i,t,n){return 40&i.type?Oi(i,n):null};function du(i,t,n,r){const o=iy(i,r,t),s=t[11],c=ay(r.parent||t[6],r,t);if(null!=o)if(Array.isArray(n))for(let d=0;d<n.length;d++)sy(s,o,n[d],c,!1);else sy(s,o,n,c,!1)}function fu(i,t){if(null!==t){const n=t.type;if(3&n)return Oi(t,i);if(4&n)return Sh(-1,i[t.index]);if(8&n){const r=t.child;if(null!==r)return fu(i,r);{const o=i[t.index];return qi(o)?Sh(-1,o):vn(o)}}if(32&n)return ph(t,i)()||vn(i[t.index]);{const r=dy(i,t);return null!==r?Array.isArray(r)?r[0]:fu(cc(i[16]),r):fu(i,t.next)}}return null}function dy(i,t){return null!==t?i[16][6].projection[t.projection]:null}function Sh(i,t){const n=10+i+1;if(n<t.length){const r=t[n],o=r[1].firstChild;if(null!==o)return fu(r,o)}return t[7]}function Ch(i,t,n,r,o,s,a){for(;null!=n;){const c=r[n.index],d=n.type;if(a&&0===t&&(c&&jn(vn(c),r),n.flags|=4),64!=(64&n.flags))if(8&d)Ch(i,t,n.child,r,o,s,!1),Bs(t,i,o,c,s);else if(32&d){const y=ph(n,r);let k;for(;k=y();)Bs(t,i,o,k,s);Bs(t,i,o,c,s)}else 16&d?hy(i,t,r,n,o,s):Bs(t,i,o,c,s);n=a?n.projectionNext:n.next}}function lc(i,t,n,r,o,s){Ch(n,r,i.firstChild,t,o,s,!1)}function hy(i,t,n,r,o,s){const a=n[16],d=a[6].projection[r.projection];if(Array.isArray(d))for(let y=0;y<d.length;y++)Bs(t,i,o,d[y],s);else Ch(i,t,d,a[3],o,s,!0)}function py(i,t,n){an(i)?i.setAttribute(t,"style",n):t.style.cssText=n}function Th(i,t,n){an(i)?""===n?i.removeAttribute(t,"class"):i.setAttribute(t,"class",n):t.className=n}function gy(i,t,n){let r=i.length;for(;;){const o=i.indexOf(t,n);if(-1===o)return o;if(0===o||i.charCodeAt(o-1)<=32){const s=t.length;if(o+s===r||i.charCodeAt(o+s)<=32)return o}n=o+1}}const my="ng-template";function bD(i,t,n){let r=0;for(;r<i.length;){let o=i[r++];if(n&&"class"===o){if(o=i[r],-1!==gy(o.toLowerCase(),t,0))return!0}else if(1===o){for(;r<i.length&&"string"==typeof(o=i[r++]);)if(o.toLowerCase()===t)return!0;return!1}}return!1}function _y(i){return 4===i.type&&i.value!==my}function SD(i,t,n){return t===(4!==i.type||n?i.value:my)}function CD(i,t,n){let r=4;const o=i.attrs||[],s=function(i){for(let t=0;t<i.length;t++)if(i1(i[t]))return t;return i.length}(o);let a=!1;for(let c=0;c<t.length;c++){const d=t[c];if("number"!=typeof d){if(!a)if(4&r){if(r=2|1&r,""!==d&&!SD(i,d,n)||""===d&&1===t.length){if($i(r))return!1;a=!0}}else{const y=8&r?d:t[++c];if(8&r&&null!==i.attrs){if(!bD(i.attrs,y,n)){if($i(r))return!1;a=!0}continue}const q=TD(8&r?"class":d,o,_y(i),n);if(-1===q){if($i(r))return!1;a=!0;continue}if(""!==y){let J;J=q>s?"":o[q+1].toLowerCase();const ae=8&r?J:null;if(ae&&-1!==gy(ae,y,0)||2&r&&y!==J){if($i(r))return!1;a=!0}}}}else{if(!a&&!$i(r)&&!$i(d))return!1;if(a&&$i(d))continue;a=!1,r=d|1&r}}return $i(r)||a}function $i(i){return 0==(1&i)}function TD(i,t,n,r){if(null===t)return-1;let o=0;if(r||!n){let s=!1;for(;o<t.length;){const a=t[o];if(a===i)return o;if(3===a||6===a)s=!0;else{if(1===a||2===a){let c=t[++o];for(;"string"==typeof c;)c=t[++o];continue}if(4===a)break;if(0===a){o+=4;continue}}o+=s?1:2}return-1}return function(i,t){let n=i.indexOf(4);if(n>-1)for(n++;n<i.length;){const r=i[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,i)}function yy(i,t,n=!1){for(let r=0;r<t.length;r++)if(CD(i,t[r],n))return!0;return!1}function ID(i,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(i.length===r.length){for(let o=0;o<i.length;o++)if(i[o]!==r[o])continue e;return!0}}return!1}function vy(i,t){return i?":not("+t.trim()+")":t}function DD(i){let t=i[0],n=1,r=2,o="",s=!1;for(;n<i.length;){let a=i[n];if("string"==typeof a)if(2&r){const c=i[++n];o+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else 8&r?o+="."+a:4&r&&(o+=" "+a);else""!==o&&!$i(a)&&(t+=vy(s,o),o=""),r=a,s=s||!$i(r);n++}return""!==o&&(t+=vy(s,o)),t}const vt={};function nt(i){Ey(Lt(),Fe(),Qn()+i,jl())}function Ey(i,t,n,r){if(!r)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&Gl(t,s,n)}else{const s=i.preOrderHooks;null!==s&&ql(t,s,0,n)}so(n)}function hu(i,t){return i<<17|t<<2}function Ki(i){return i>>17&32767}function wh(i){return 2|i}function Fr(i){return(131068&i)>>2}function Ah(i,t){return-131069&i|t<<2}function Rh(i){return 1|i}function Oy(i,t){const n=i.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r],s=n[r+1];if(-1!==s){const a=i.data[s];Wf(o),a.contentQueries(2,t[s],s)}}}function uc(i,t,n,r,o,s,a,c,d,y){const k=t.blueprint.slice();return k[0]=o,k[2]=140|r,q_(k),k[3]=k[15]=i,k[8]=n,k[10]=a||i&&i[10],k[11]=c||i&&i[11],k[12]=d||i&&i[12]||null,k[9]=y||i&&i[9]||null,k[6]=s,k[16]=2==t.type?i[16]:k,k}function Hs(i,t,n,r,o){let s=i.data[t];if(null===s)s=function(i,t,n,r,o){const s=$_(),a=jf(),d=i.data[t]=function(i,t,n,r,o,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,n,t,r,o);return null===i.firstChild&&(i.firstChild=d),null!==s&&(a?null==s.child&&null!==d.parent&&(s.child=d):null===s.next&&(s.next=d)),d}(i,t,n,r,o),_t.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=o;const a=function(){const i=_t.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return dr(s,!0),s}function Ws(i,t,n,r){if(0===n)return-1;const o=t.length;for(let s=0;s<n;s++)t.push(r),i.blueprint.push(r),i.data.push(null);return o}function dc(i,t,n){Bl(t);try{const r=i.viewQuery;null!==r&&Wh(1,r,n);const o=i.template;null!==o&&My(i,t,o,1,n),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Oy(i,t),i.staticViewQueries&&Wh(2,i.viewQuery,n);const s=i.components;null!==s&&function(i,t){for(let n=0;n<t.length;n++)cO(i,t[n])}(t,s)}catch(r){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),r}finally{t[2]&=-5,Hl()}}function Gs(i,t,n,r){const o=t[2];if(256==(256&o))return;Bl(t);const s=jl();try{q_(t),function(i){_t.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==n&&My(i,t,n,2,r);const a=3==(3&o);if(!s)if(a){const y=i.preOrderCheckHooks;null!==y&&Gl(t,y,null)}else{const y=i.preOrderHooks;null!==y&&ql(t,y,0,null),Gf(t,0)}if(function(i){for(let t=gh(i);null!==t;t=mh(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const o=n[r],s=o[3];0==(1024&o[2])&&Vf(s,1),o[2]|=1024}}}(t),function(i){for(let t=gh(i);null!==t;t=mh(t))for(let n=10;n<t.length;n++){const r=t[n],o=r[1];Ff(r)&&Gs(o,r,o.template,r[8])}}(t),null!==i.contentQueries&&Oy(i,t),!s)if(a){const y=i.contentCheckHooks;null!==y&&Gl(t,y)}else{const y=i.contentHooks;null!==y&&ql(t,y,1),Gf(t,1)}!function(i,t){const n=i.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)so(~o);else{const s=o,a=n[++r],c=n[++r];ER(a,s),c(2,t[s])}}}finally{so(-1)}}(i,t);const c=i.components;null!==c&&function(i,t){for(let n=0;n<t.length;n++)aO(i,t[n])}(t,c);const d=i.viewQuery;if(null!==d&&Wh(2,d,r),!s)if(a){const y=i.viewCheckHooks;null!==y&&Gl(t,y)}else{const y=i.viewHooks;null!==y&&ql(t,y,2),Gf(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Vf(t[3],-1))}finally{Hl()}}function HD(i,t,n,r){const o=t[10],s=!jl(),a=G_(t);try{s&&!a&&o.begin&&o.begin(),a&&dc(i,t,r),Gs(i,t,n,r)}finally{s&&!a&&o.end&&o.end()}}function My(i,t,n,r,o){const s=Qn(),a=2&r;try{so(-1),a&&t.length>20&&Ey(i,t,20,jl()),n(r,o)}finally{so(s)}}function Ny(i,t,n){if(Mf(t)){const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=i.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}}function xh(i,t,n){!z_()||(function(i,t,n,r){const o=n.directiveStart,s=n.directiveEnd;i.firstCreatePass||Ya(n,t),jn(r,t);const a=n.initialInputs;for(let c=o;c<s;c++){const d=i.data[c],y=zi(d);y&&nO(t,n,d);const k=Ja(t,i,c,n);jn(k,t),null!==a&&iO(0,c-o,k,d,0,a),y&&(_i(n.index,t)[8]=k)}}(i,t,n,Oi(n,t)),128==(128&n.flags)&&function(i,t,n){const r=n.directiveStart,o=n.directiveEnd,a=n.index,c=_t.lFrame.currentDirectiveIndex;try{so(a);for(let d=r;d<o;d++){const y=i.data[d],k=t[d];Bf(d),(null!==y.hostBindings||0!==y.hostVars||null!==y.hostAttrs)&&Uy(y,k)}}finally{so(-1),Bf(c)}}(i,t,n))}function Lh(i,t,n=Oi){const r=t.localNames;if(null!==r){let o=t.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],c=-1===a?n(t,i):i[a];i[o++]=c}}}function ky(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=mu(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function mu(i,t,n,r,o,s,a,c,d,y){const k=20+r,q=k+o,J=function(i,t){const n=[];for(let r=0;r<t;r++)n.push(r<i?null:vt);return n}(k,q),ae="function"==typeof y?y():y;return J[1]={type:i,blueprint:J,template:n,queries:null,viewQuery:c,declTNode:t,data:J.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:d,consts:ae,incompleteFirstPass:!1}}function Ly(i,t,n,r){const o=zy(t);null===n?o.push(r):(o.push(n),i.firstCreatePass&&$y(i).push(r,o.length-1))}function Fy(i,t,n){for(let r in i)if(i.hasOwnProperty(r)){const o=i[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,o):n[r]=[t,o]}return n}function bi(i,t,n,r,o,s,a,c){const d=Oi(t,n);let k,y=t.inputs;!c&&null!=y&&(k=y[r])?(Jy(i,n,k,r,o),Ll(t)&&function(i,t){const n=_i(t,i);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(r),o=null!=a?a(o,t.value||"",r):o,an(s)?s.setProperty(d,r,o):zf(r)||(d.setProperty?d.setProperty(r,o):d[r]=o))}function Fh(i,t,n,r){let o=!1;if(z_()){const s=function(i,t,n){const r=i.directiveRegistry;let o=null;if(r)for(let s=0;s<r.length;s++){const a=r[s];yy(n,a.selectors,!1)&&(o||(o=[]),Jl(Ya(n,t),i,a.type),zi(a)?(By(i,n),o.unshift(a)):o.push(a))}return o}(i,t,n),a=null===r?null:{"":-1};if(null!==s){o=!0,Hy(n,i.data.length,s.length);for(let k=0;k<s.length;k++){const q=s[k];q.providersResolver&&q.providersResolver(q)}let c=!1,d=!1,y=Ws(i,t,s.length,null);for(let k=0;k<s.length;k++){const q=s[k];n.mergedAttrs=$l(n.mergedAttrs,q.hostAttrs),Wy(i,n,t,y,q),tO(y,q,a),null!==q.contentQueries&&(n.flags|=8),(null!==q.hostBindings||null!==q.hostAttrs||0!==q.hostVars)&&(n.flags|=128);const J=q.type.prototype;!c&&(J.ngOnChanges||J.ngOnInit||J.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(n.index),c=!0),!d&&(J.ngOnChanges||J.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(n.index),d=!0),y++}!function(i,t){const r=t.directiveEnd,o=i.data,s=t.attrs,a=[];let c=null,d=null;for(let y=t.directiveStart;y<r;y++){const k=o[y],q=k.inputs,J=null===s||_y(t)?null:rO(q,s);a.push(J),c=Fy(q,y,c),d=Fy(k.outputs,y,d)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=16),c.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=c,t.outputs=d}(i,n)}a&&function(i,t,n){if(t){const r=i.localNames=[];for(let o=0;o<t.length;o+=2){const s=n[t[o+1]];if(null==s)throw new Mo("301",`Export of name '${t[o+1]}' not found!`);r.push(t[o],s)}}}(n,r,a)}return n.mergedAttrs=$l(n.mergedAttrs,n.attrs),o}function jy(i,t,n,r,o,s){const a=s.hostBindings;if(a){let c=i.hostBindingOpCodes;null===c&&(c=i.hostBindingOpCodes=[]);const d=~t.index;(function(i){let t=i.length;for(;t>0;){const n=i[--t];if("number"==typeof n&&n<0)return n}return 0})(c)!=d&&c.push(d),c.push(r,o,a)}}function Uy(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function By(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function tO(i,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=i;zi(t)&&(n[""]=i)}}function Hy(i,t,n){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+n,i.providerIndexes=t}function Wy(i,t,n,r,o){i.data[r]=o;const s=o.factory||(o.factory=Lo(o.type)),a=new $a(s,zi(o),null);i.blueprint[r]=a,n[r]=a,jy(i,t,0,r,Ws(i,n,o.hostVars,vt),o)}function nO(i,t,n){const r=Oi(t,i),o=ky(n),s=i[10],a=_u(i,uc(i,o,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));i[t.index]=a}function yr(i,t,n,r,o,s){const a=Oi(i,t);!function(i,t,n,r,o,s,a){if(null==s)an(i)?i.removeAttribute(t,o,n):t.removeAttribute(o);else{const c=null==a?St(s):a(s,r||"",o);an(i)?i.setAttribute(t,o,c,n):n?t.setAttributeNS(n,o,c):t.setAttribute(o,c)}}(t[11],a,s,i.value,n,r,o)}function iO(i,t,n,r,o,s){const a=s[t];if(null!==a){const c=r.setInput;for(let d=0;d<a.length;){const y=a[d++],k=a[d++],q=a[d++];null!==c?r.setInput(n,q,y,k):n[k]=q}}}function rO(i,t){let n=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;i.hasOwnProperty(o)&&(null===n&&(n=[]),n.push(o,i[o],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Gy(i,t,n,r){return new Array(i,!0,!1,t,null,0,r,n,null,null)}function aO(i,t){const n=_i(t,i);if(Ff(n)){const r=n[1];80&n[2]?Gs(r,n,r.template,n[8]):n[5]>0&&jh(n)}}function jh(i){for(let r=gh(i);null!==r;r=mh(r))for(let o=10;o<r.length;o++){const s=r[o];if(1024&s[2]){const a=s[1];Gs(a,s,a.template,s[8])}else s[5]>0&&jh(s)}const n=i[1].components;if(null!==n)for(let r=0;r<n.length;r++){const o=_i(n[r],i);Ff(o)&&o[5]>0&&jh(o)}}function cO(i,t){const n=_i(t,i),r=n[1];(function(i,t){for(let n=t.length;n<i.blueprint.length;n++)t.push(i.blueprint[n])})(r,n),dc(r,n,n[8])}function _u(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function Uh(i){for(;i;){i[2]|=64;const t=cc(i);if(tR(i)&&!t)return i;i=t}return null}function Hh(i,t,n){const r=t[10];r.begin&&r.begin();try{Gs(i,t,i.template,n)}catch(o){throw Yy(t,o),o}finally{r.end&&r.end()}}function qy(i){!function(i){for(let t=0;t<i.components.length;t++){const n=i.components[t],r=dh(n),o=r[1];HD(o,r,o.template,n)}}(i[8])}function Wh(i,t,n){Wf(0),t(i,n)}const hO=(()=>Promise.resolve(null))();function zy(i){return i[7]||(i[7]=[])}function $y(i){return i.cleanup||(i.cleanup=[])}function Yy(i,t){const n=i[9],r=n?n.get(Ho,null):null;r&&r.handleError(t)}function Jy(i,t,n,r,o){for(let s=0;s<n.length;){const a=n[s++],c=n[s++],d=t[a],y=i.data[a];null!==y.setInput?y.setInput(d,o,r,c):d[c]=o}}function jr(i,t,n){const r=Vl(t,i);!function(i,t,n){an(i)?i.setValue(t,n):t.textContent=n}(i[11],r,n)}function yu(i,t,n){let r=n?i.styles:null,o=n?i.classes:null,s=0;if(null!==t)for(let a=0;a<t.length;a++){const c=t[a];"number"==typeof c?s=c:1==s?o=eo(o,c):2==s&&(r=eo(r,c+": "+t[++a]+";"))}n?i.styles=r:i.stylesWithoutHost=r,n?i.classes=o:i.classesWithoutHost=o}const Go=new et("INJECTOR",-1);class Qy{get(t,n=ec){if(n===ec){const r=new Error(`NullInjectorError: No provider for ${pt(t)}!`);throw r.name="NullInjectorError",r}return n}}const fc=new et("Set Injector scope."),hc={},mO={};let Gh;function Xy(){return void 0===Gh&&(Gh=new Qy),Gh}function Zy(i,t=null,n=null,r){return new yO(i,n,t||Xy(),r)}class yO{constructor(t,n,r,o=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&pr(n,c=>this.processProvider(c,t,n)),pr([t],c=>this.processInjectorType(c,[],s)),this.records.set(Go,qs(void 0,this));const a=this.records.get(fc);this.scope=null!=a?a.value:null,this.source=o||("object"==typeof t?null:pt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=ec,r=lt.Default){this.assertNotDestroyed();const o=Ls(this),s=to(void 0);try{if(!(r&lt.SkipSelf)){let c=this.records.get(t);if(void 0===c){const d=function(i){return"function"==typeof i||"object"==typeof i&&i instanceof et}(t)&&Pr(t);c=d&&this.injectableDefInScope(d)?qs(qh(t),hc):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(r&lt.Self?Xy():this.parent).get(t,n=r&lt.Optional&&n===ec?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[xs]=a[xs]||[]).unshift(pt(t)),o)throw a;return E1(a,t,"R3InjectorError",this.source)}throw a}finally{to(s),Ls(o)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,o)=>t.push(pt(o))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,n,r){if(!(t=rt(t)))return!1;let o=I_(t);const s=null==o&&t.ngModule||void 0,a=void 0===s?t:s,c=-1!==r.indexOf(a);if(void 0!==s&&(o=I_(s)),null==o)return!1;if(null!=o.imports&&!c){let k;r.push(a);try{pr(o.imports,q=>{this.processInjectorType(q,n,r)&&(void 0===k&&(k=[]),k.push(q))})}finally{}if(void 0!==k)for(let q=0;q<k.length;q++){const{ngModule:J,providers:ae}=k[q];pr(ae,he=>this.processProvider(he,J,ae||zt))}}this.injectorDefTypes.add(a);const d=Lo(a)||(()=>new a);this.records.set(a,qs(d,hc));const y=o.providers;if(null!=y&&!c){const k=t;pr(y,q=>this.processProvider(q,k,y))}return void 0!==s&&void 0!==t.providers}processProvider(t,n,r){let o=zs(t=rt(t))?t:rt(t&&t.provide);const s=function(i,t,n){return tv(i)?qs(void 0,i.useValue):qs(ev(i),hc)}(t);if(zs(t)||!0!==t.multi)this.records.get(o);else{let a=this.records.get(o);a||(a=qs(void 0,hc,!0),a.factory=()=>Uo(a.multi),this.records.set(o,a)),o=t,a.multi.push(t)}this.records.set(o,s)}hydrate(t,n){return n.value===hc&&(n.value=mO,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=rt(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function qh(i){const t=Pr(i),n=null!==t?t.factory:Lo(i);if(null!==n)return n;if(i instanceof et)throw new Error(`Token ${pt(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const t=i.length;if(t>0){const r=lo(t,"?");throw new Error(`Can't resolve all parameters for ${pt(i)}: (${r.join(", ")}).`)}const n=function(i){const t=i&&(i[Ml]||i[D_]);if(t){const n=function(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(i);return null!==n?()=>n.factory(i):()=>new i}(i);throw new Error("unreachable")}function ev(i,t,n){let r;if(zs(i)){const o=rt(i);return Lo(o)||qh(o)}if(tv(i))r=()=>rt(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))r=()=>i.useFactory(...Uo(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))r=()=>Ae(rt(i.useExisting));else{const o=rt(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Lo(o)||qh(o);r=()=>new o(...Uo(i.deps))}return r}function qs(i,t,n=!1){return{factory:i,value:t,multi:n?[]:void 0}}function tv(i){return null!==i&&"object"==typeof i&&nh in i}function zs(i){return"function"==typeof i}const nv=function(i,t,n){return function(i,t=null,n=null,r){const o=Zy(i,t,n,r);return o._resolveInjectorDefTypes(),o}({name:n},t,i,n)};let Bt=(()=>{class i{static create(n,r){return Array.isArray(n)?nv(n,r,""):nv(n.providers,n.parent,n.name||"")}}return i.THROW_IF_NOT_FOUND=ec,i.NULL=new Qy,i.\u0275prov=ze({token:i,providedIn:"any",factory:()=>Ae(Go)}),i.__NG_ELEMENT_ID__=-1,i})();function jO(i,t){Wl(dh(i)[1],Tn())}function Ct(i){let t=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),n=!0;const r=[i];for(;t;){let o;if(zi(i))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");o=t.\u0275dir}if(o){if(n){r.push(o);const a=i;a.inputs=Qh(i.inputs),a.declaredInputs=Qh(i.declaredInputs),a.outputs=Qh(i.outputs);const c=o.hostBindings;c&&WO(i,c);const d=o.viewQuery,y=o.contentQueries;if(d&&BO(i,d),y&&HO(i,y),$n(i.inputs,o.inputs),$n(i.declaredInputs,o.declaredInputs),$n(i.outputs,o.outputs),zi(o)&&o.data.animation){const k=i.data;k.animation=(k.animation||[]).concat(o.data.animation)}}const s=o.features;if(s)for(let a=0;a<s.length;a++){const c=s[a];c&&c.ngInherit&&c(i),c===Ct&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(i){let t=0,n=null;for(let r=i.length-1;r>=0;r--){const o=i[r];o.hostVars=t+=o.hostVars,o.hostAttrs=$l(o.hostAttrs,n=$l(n,o.hostAttrs))}}(r)}function Qh(i){return i===bs?{}:i===zt?[]:i}function BO(i,t){const n=i.viewQuery;i.viewQuery=n?(r,o)=>{t(r,o),n(r,o)}:t}function HO(i,t){const n=i.contentQueries;i.contentQueries=n?(r,o,s)=>{t(r,o,s),n(r,o,s)}:t}function WO(i,t){const n=i.hostBindings;i.hostBindings=n?(r,o)=>{t(r,o),n(r,o)}:t}let vu=null;function $s(){if(!vu){const i=Ht.Symbol;if(i&&i.iterator)vu=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(vu=r)}}}return vu}class Ji{constructor(t){this.wrapped=t}static wrap(t){return new Ji(t)}static unwrap(t){return Ji.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ji}}function gc(i){return!!Xh(i)&&(Array.isArray(i)||!(i instanceof Map)&&$s()in i)}function Xh(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Un(i,t,n){return!Object.is(i[t],n)&&(i[t]=n,!0)}function nn(i,t,n,r){const o=Fe();return Un(o,Rs(),t)&&(Lt(),yr(cn(),o,i,t,n,r)),nn}function rn(i,t,n,r,o,s,a,c){const d=Fe(),y=Lt(),k=i+20,q=y.firstCreatePass?function(i,t,n,r,o,s,a,c,d){const y=t.consts,k=Hs(t,i,4,a||null,ro(y,c));Fh(t,n,k,ro(y,d)),Wl(t,k);const q=k.tViews=mu(2,k,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,y);return null!==t.queries&&(t.queries.template(t,k),q.queries=t.queries.embeddedTView(k)),k}(k,y,d,t,n,r,o,s,a):y.data[k];dr(q,!1);const J=d[11].createComment("");du(y,d,J,q),jn(J,d),_u(d,d[k]=Gy(J,d,J,q)),Fl(q)&&xh(y,d,q),null!=a&&Lh(d,q,c)}function bu(i){return As(_t.lFrame.contextLView,20+i)}function Se(i,t=lt.Default){const n=Fe();return null===n?Ae(i,t):u1(Tn(),n,rt(i),t)}function ft(i,t,n){const r=Fe();return Un(r,Rs(),t)&&bi(Lt(),cn(),r,i,t,r[11],n,!1),ft}function ip(i,t,n,r,o){const a=o?"class":"style";Jy(i,n,t.inputs[a],a,r)}function xe(i,t,n,r){const o=Fe(),s=Lt(),a=20+i,c=o[11],d=o[a]=yh(c,t,_t.lFrame.currentNamespace),y=s.firstCreatePass?function(i,t,n,r,o,s,a){const c=t.consts,y=Hs(t,i,2,o,ro(c,s));return Fh(t,n,y,ro(c,a)),null!==y.attrs&&yu(y,y.attrs,!1),null!==y.mergedAttrs&&yu(y,y.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,y),y}(a,s,o,0,t,n,r):s.data[a];dr(y,!0);const k=y.mergedAttrs;null!==k&&zl(c,d,k);const q=y.classes;null!==q&&Th(c,d,q);const J=y.styles;null!==J&&py(c,d,J),64!=(64&y.flags)&&du(s,o,d,y),0===_t.lFrame.elementDepthCount&&jn(d,o),_t.lFrame.elementDepthCount++,Fl(y)&&(xh(s,o,y),Ny(s,y,o)),null!==r&&Lh(o,y)}function Le(){let i=Tn();jf()?Uf():(i=i.parent,dr(i,!1));const t=i;_t.lFrame.elementDepthCount--;const n=Lt();n.firstCreatePass&&(Wl(n,i),Mf(i)&&n.queries.elementEnd(i)),null!=t.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(t)&&ip(n,t,Fe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(t)&&ip(n,t,Fe(),t.stylesWithoutHost,!1)}function st(i,t,n,r){xe(i,t,n,r),Le()}function ra(i,t,n){const r=Fe(),o=Lt(),s=i+20,a=o.firstCreatePass?function(i,t,n,r,o){const s=t.consts,a=ro(s,r),c=Hs(t,i,8,"ng-container",a);return null!==a&&yu(c,a,!0),Fh(t,n,c,ro(s,o)),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,r,t,n):o.data[s];dr(a,!0);const c=r[s]=r[11].createComment("");du(o,r,c,a),jn(c,r),Fl(a)&&(xh(o,r,a),Ny(o,a,r)),null!=n&&Lh(r,a)}function oa(){let i=Tn();const t=Lt();jf()?Uf():(i=i.parent,dr(i,!1)),t.firstCreatePass&&(Wl(t,i),Mf(i)&&t.queries.elementEnd(i))}function _c(){return Fe()}function yc(i){return!!i&&"function"==typeof i.then}function Uv(i){return!!i&&"function"==typeof i.subscribe}const Cu=Uv;function Ft(i,t,n,r){const o=Fe(),s=Lt(),a=Tn();return function(i,t,n,r,o,s,a,c){const d=Fl(r),k=i.firstCreatePass&&$y(i),q=t[8],J=zy(t);let ae=!0;if(3&r.type||c){const be=Oi(r,t),Pe=c?c(be):be,Me=J.length,je=c?$e=>c(vn($e[r.index])):r.index;if(an(n)){let $e=null;if(!c&&d&&($e=function(i,t,n,r){const o=i.cleanup;if(null!=o)for(let s=0;s<o.length-1;s+=2){const a=o[s];if(a===n&&o[s+1]===r){const c=t[7],d=o[s+2];return c.length>d?c[d]:null}"string"==typeof a&&(s+=2)}return null}(i,t,o,r.index)),null!==$e)($e.__ngLastListenerFn__||$e).__ngNextListenerFn__=s,$e.__ngLastListenerFn__=s,ae=!1;else{s=rp(r,t,q,s,!1);const mt=n.listen(Pe,o,s);J.push(s,mt),k&&k.push(o,je,Me,Me+1)}}else s=rp(r,t,q,s,!0),Pe.addEventListener(o,s,a),J.push(s),k&&k.push(o,je,Me,a)}else s=rp(r,t,q,s,!1);const he=r.outputs;let we;if(ae&&null!==he&&(we=he[o])){const be=we.length;if(be)for(let Pe=0;Pe<be;Pe+=2){const Gt=t[we[Pe]][we[Pe+1]].subscribe(s),Kt=J.length;J.push(s,Gt),k&&k.push(o,r.index,Kt,-(Kt+1))}}}(s,o,o[11],a,i,t,!!n,r),Ft}function Wv(i,t,n,r){try{return!1!==n(r)}catch(o){return Yy(i,o),!1}}function rp(i,t,n,r,o){return function s(a){if(a===Function)return r;const c=2&i.flags?_i(i.index,t):t;0==(32&t[2])&&Uh(c);let d=Wv(t,0,r,a),y=s.__ngNextListenerFn__;for(;y;)d=Wv(t,0,y,a)&&d,y=y.__ngNextListenerFn__;return o&&!1===d&&(a.preventDefault(),a.returnValue=!1),d}}function en(i=1){return function(i){return(_t.lFrame.contextLView=function(i,t){for(;i>0;)t=t[15],i--;return t}(i,_t.lFrame.contextLView))[8]}(i)}function TM(i,t){let n=null;const r=function(i){const t=i.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(i);for(let o=0;o<t.length;o++){const s=t[o];if("*"!==s){if(null===r?yy(i,s,!0):ID(r,s))return o}else n=o}return n}function po(i){const t=Fe()[16][6];if(!t.projection){const r=t.projection=lo(i?i.length:1,null),o=r.slice();let s=t.child;for(;null!==s;){const a=i?TM(s,i):0;null!==a&&(o[a]?o[a].projectionNext=s:r[a]=s,o[a]=s),s=s.next}}}function Bn(i,t=0,n){const r=Fe(),o=Lt(),s=Hs(o,20+i,16,null,n||null);null===s.projection&&(s.projection=t),Uf(),64!=(64&s.flags)&&function(i,t,n){hy(t[11],0,t,n,iy(i,n,t),ay(n.parent||t[6],n,t))}(o,r,s)}function Zv(i,t,n,r,o){const s=i[n+1],a=null===t;let c=r?Ki(s):Fr(s),d=!1;for(;0!==c&&(!1===d||a);){const k=i[c+1];RM(i[c],t)&&(d=!0,i[c+1]=r?Rh(k):wh(k)),c=r?Ki(k):Fr(k)}d&&(i[n+1]=r?wh(s):Rh(s))}function RM(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Ps(i,t)>=0}function Tu(i,t,n){return Qi(i,t,n,!1),Tu}function Vt(i,t){return Qi(i,t,null,!0),Vt}function Qi(i,t,n,r){const o=Fe(),s=Lt(),a=function(i){const t=_t.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,n}(2);s.firstUpdatePass&&function(i,t,n,r){const o=i.data;if(null===o[n+1]){const s=o[Qn()],a=function(i,t){return t>=i.expandoStartIndex}(i,n);(function(i,t){return 0!=(i.flags&(t?16:32))})(s,r)&&null===t&&!a&&(t=!1),t=function(i,t,n,r){const o=function(i){const t=_t.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}(i);let s=r?t.residualClasses:t.residualStyles;if(null===o)0===(r?t.classBindings:t.styleBindings)&&(n=vc(n=sp(null,i,t,n,r),t.attrs,r),s=null);else{const a=t.directiveStylingLast;if(-1===a||i[a]!==o)if(n=sp(o,i,t,n,r),null===s){let d=function(i,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Fr(r))return i[Ki(r)]}(i,t,r);void 0!==d&&Array.isArray(d)&&(d=sp(null,i,t,d[1],r),d=vc(d,t.attrs,r),function(i,t,n,r){i[Ki(n?t.classBindings:t.styleBindings)]=r}(i,t,r,d))}else s=function(i,t,n){let r;const o=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<o;s++)r=vc(r,i[s].hostAttrs,n);return vc(r,t.attrs,n)}(i,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(o,s,t,r),function(i,t,n,r,o,s){let a=s?t.classBindings:t.styleBindings,c=Ki(a),d=Fr(a);i[r]=n;let k,y=!1;if(Array.isArray(n)){const q=n;k=q[1],(null===k||Ps(q,k)>0)&&(y=!0)}else k=n;if(o)if(0!==d){const J=Ki(i[c+1]);i[r+1]=hu(J,c),0!==J&&(i[J+1]=Ah(i[J+1],r)),i[c+1]=function(i,t){return 131071&i|t<<17}(i[c+1],r)}else i[r+1]=hu(c,0),0!==c&&(i[c+1]=Ah(i[c+1],r)),c=r;else i[r+1]=hu(d,0),0===c?c=r:i[d+1]=Ah(i[d+1],r),d=r;y&&(i[r+1]=wh(i[r+1])),Zv(i,k,r,!0),Zv(i,k,r,!1),function(i,t,n,r,o){const s=o?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Ps(s,t)>=0&&(n[r+1]=Rh(n[r+1]))}(t,k,i,r,s),a=hu(c,d),s?t.classBindings=a:t.styleBindings=a}(o,s,t,n,a,r)}}(s,i,a,r),t!==vt&&Un(o,a,t)&&function(i,t,n,r,o,s,a,c){if(!(3&t.type))return;const d=i.data,y=d[c+1];wu(function(i){return 1==(1&i)}(y)?uE(d,t,n,o,Fr(y),a):void 0)||(wu(s)||function(i){return 2==(2&i)}(y)&&(s=uE(d,null,n,o,c,a)),function(i,t,n,r,o){const s=an(i);if(t)o?s?i.addClass(n,r):n.classList.add(r):s?i.removeClass(n,r):n.classList.remove(r);else{let a=-1===r.indexOf("-")?void 0:Ei.DashCase;if(null==o)s?i.removeStyle(n,r,a):n.style.removeProperty(r);else{const c="string"==typeof o&&o.endsWith("!important");c&&(o=o.slice(0,-10),a|=Ei.Important),s?i.setStyle(n,r,o,a):n.style.setProperty(r,o,c?"important":"")}}}(r,a,Vl(Qn(),n),o,s))}(s,s.data[Qn()],o,o[11],i,o[a+1]=function(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=pt(vi(i)))),i}(t,n),r,a)}function sp(i,t,n,r,o){let s=null;const a=n.directiveEnd;let c=n.directiveStylingLast;for(-1===c?c=n.directiveStart:c++;c<a&&(s=t[c],r=vc(r,s.hostAttrs,o),s!==i);)c++;return null!==i&&(n.directiveStylingLast=c),r}function vc(i,t,n){const r=n?1:2;let o=-1;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:o===r&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),yi(i,a,!!n||t[++s]))}return void 0===i?null:i}function uE(i,t,n,r,o,s){const a=null===t;let c;for(;o>0;){const d=i[o],y=Array.isArray(d),k=y?d[1]:d,q=null===k;let J=n[o+1];J===vt&&(J=q?zt:void 0);let ae=q?Xf(J,r):k===r?J:void 0;if(y&&!wu(ae)&&(ae=Xf(d,r)),wu(ae)&&(c=ae,a))return c;const he=i[o+1];o=a?Ki(he):Fr(he)}if(null!==t){let d=s?t.residualClasses:t.residualStyles;null!=d&&(c=Xf(d,r))}return c}function wu(i){return void 0!==i}function hn(i,t=""){const n=Fe(),r=Lt(),o=i+20,s=r.firstCreatePass?Hs(r,o,1,t,null):r.data[o],a=n[o]=function(i,t){return an(i)?i.createText(t):i.createTextNode(t)}(n[11],t);du(r,n,a,s),dr(s,!1)}function go(i){return zo("",i,""),go}function zo(i,t,n){const r=Fe(),o=function(i,t,n,r){return Un(i,Rs(),n)?t+St(n)+r:vt}(r,i,t,n);return o!==vt&&jr(r,Qn(),o),zo}function aa(i,t,n){const r=Fe();return Un(r,Rs(),t)&&bi(Lt(),cn(),r,i,t,r[11],n,!0),aa}const $o=void 0;var cN=["en",[["a","p"],["AM","PM"],$o],[["AM","PM"],$o,$o],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$o,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$o,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$o,"{1} 'at' {0}",$o],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const t=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let ca={};function ME(i){return i in ca||(ca[i]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[i]),ca[i]}var Ye=(()=>((Ye=Ye||{})[Ye.LocaleId=0]="LocaleId",Ye[Ye.DayPeriodsFormat=1]="DayPeriodsFormat",Ye[Ye.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ye[Ye.DaysFormat=3]="DaysFormat",Ye[Ye.DaysStandalone=4]="DaysStandalone",Ye[Ye.MonthsFormat=5]="MonthsFormat",Ye[Ye.MonthsStandalone=6]="MonthsStandalone",Ye[Ye.Eras=7]="Eras",Ye[Ye.FirstDayOfWeek=8]="FirstDayOfWeek",Ye[Ye.WeekendRange=9]="WeekendRange",Ye[Ye.DateFormat=10]="DateFormat",Ye[Ye.TimeFormat=11]="TimeFormat",Ye[Ye.DateTimeFormat=12]="DateTimeFormat",Ye[Ye.NumberSymbols=13]="NumberSymbols",Ye[Ye.NumberFormats=14]="NumberFormats",Ye[Ye.CurrencyCode=15]="CurrencyCode",Ye[Ye.CurrencySymbol=16]="CurrencySymbol",Ye[Ye.CurrencyName=17]="CurrencyName",Ye[Ye.Currencies=18]="Currencies",Ye[Ye.Directionality=19]="Directionality",Ye[Ye.PluralCase=20]="PluralCase",Ye[Ye.ExtraData=21]="ExtraData",Ye))();const Au="en-US";let NE=Au;function ap(i){gi(i,"Expected localeId to be defined"),"string"==typeof i&&(NE=i.toLowerCase().replace(/_/g,"-"))}function up(i,t,n,r,o){if(i=rt(i),Array.isArray(i))for(let s=0;s<i.length;s++)up(i[s],t,n,r,o);else{const s=Lt(),a=Fe();let c=zs(i)?i:rt(i.provide),d=ev(i);const y=Tn(),k=1048575&y.providerIndexes,q=y.directiveStart,J=y.providerIndexes>>20;if(zs(i)||!i.multi){const ae=new $a(d,o,Se),he=fp(c,t,o?k:k+J,q);-1===he?(Jl(Ya(y,a),s,c),dp(s,i,t.length),t.push(c),y.directiveStart++,y.directiveEnd++,o&&(y.providerIndexes+=1048576),n.push(ae),a.push(ae)):(n[he]=ae,a[he]=ae)}else{const ae=fp(c,t,k+J,q),he=fp(c,t,k,k+J),we=ae>=0&&n[ae],be=he>=0&&n[he];if(o&&!be||!o&&!we){Jl(Ya(y,a),s,c);const Pe=function(i,t,n,r,o){const s=new $a(i,n,Se);return s.multi=[],s.index=t,s.componentProviders=0,n0(s,o,r&&!n),s}(o?o3:r3,n.length,o,r,d);!o&&be&&(n[he].providerFactory=Pe),dp(s,i,t.length,0),t.push(c),y.directiveStart++,y.directiveEnd++,o&&(y.providerIndexes+=1048576),n.push(Pe),a.push(Pe)}else dp(s,i,ae>-1?ae:he,n0(n[o?he:ae],d,!o&&r));!o&&r&&be&&n[he].componentProviders++}}}function dp(i,t,n,r){const o=zs(t);if(o||function(i){return!!i.useClass}(t)){const a=(t.useClass||t).prototype.ngOnDestroy;if(a){const c=i.destroyHooks||(i.destroyHooks=[]);if(!o&&t.multi){const d=c.indexOf(n);-1===d?c.push(n,[r,a]):c[d+1].push(r,a)}else c.push(n,a)}}}function n0(i,t,n){return n&&i.componentProviders++,i.multi.push(t)-1}function fp(i,t,n,r){for(let o=n;o<r;o++)if(t[o]===i)return o;return-1}function r3(i,t,n,r){return hp(this.multi,[])}function o3(i,t,n,r){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=Ja(n,n[1],this.providerFactory.index,r);s=c.slice(0,a),hp(o,s);for(let d=a;d<c.length;d++)s.push(c[d])}else s=[],hp(o,s);return s}function hp(i,t){for(let n=0;n<i.length;n++)t.push((0,i[n])());return t}function It(i,t=[]){return n=>{n.providersResolver=(r,o)=>function(i,t,n){const r=Lt();if(r.firstCreatePass){const o=zi(i);up(n,r.data,r.blueprint,o,!0),up(t,r.data,r.blueprint,o,!1)}}(r,o?o(i):i,t)}}class r0{}const s0="ngComponent";class c3{resolveComponentFactory(t){throw function(i){const t=Error(`No component factory found for ${pt(i)}. Did you add it to @NgModule.entryComponents?`);return t[s0]=i,t}(t)}}let Zi=(()=>{class i{}return i.NULL=new c3,i})();function Mu(...i){}function ua(i,t){return new Tt(Oi(i,t))}const d3=function(){return ua(Tn(),Fe())};let Tt=(()=>{class i{constructor(n){this.nativeElement=n}}return i.__NG_ELEMENT_ID__=d3,i})();function a0(i){return i instanceof Tt?i.nativeElement:i}class Ko{}let Sr=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>h3(),i})();const h3=function(){const i=Fe(),n=_i(Tn().index,i);return function(i){return i[11]}(ur(n)?n:i)};let gp=(()=>{class i{}return i.\u0275prov=ze({token:i,providedIn:"root",factory:()=>null}),i})();class mo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const c0=new mo("12.2.15");class l0{constructor(){}supports(t){return gc(t)}create(t){return new _3(t)}}const m3=(i,t)=>t;class _3{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||m3}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,s=null;for(;n||r;){const a=!r||n&&n.currentIndex<d0(r,o,s)?n:r,c=d0(a,o,s),d=a.currentIndex;if(a===r)o--,r=r._nextRemoved;else if(n=n._next,null==a.previousIndex)o++;else{s||(s=[]);const y=c-o,k=d-o;if(y!=k){for(let J=0;J<y;J++){const ae=J<s.length?s[J]:s[J]=0,he=ae+J;k<=he&&he<y&&(s[J]=ae+1)}s[a.previousIndex]=k-y}}c!==d&&t(a,c,d)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!gc(t))throw new Error(`Error trying to diff '${pt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,s,a,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)s=t[c],a=this._trackByFn(c,s),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,s,a,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,a,c),r=!0),n=n._next}else o=0,function(i,t){if(Array.isArray(i))for(let n=0;n<i.length;n++)t(i[n]);else{const n=i[$s()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,c=>{a=this._trackByFn(o,c),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,c,a,o)),Object.is(n.item,c)||this._addIdentityChange(n,c)):(n=this._mismatch(n,c,a,o),r=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,o)):t=this._addAfter(new y3(n,r),s,o),t}_verifyReinsertion(t,n,r,o){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,s=t._nextRemoved;return null===o?this._removalsHead=s:o._nextRemoved=s,null===s?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const o=null===n?this._itHead:n._next;return t._next=o,t._prev=n,null===o?this._itTail=t:o._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new u0),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new u0),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class y3{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class v3{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class u0{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new v3,this.map.set(n,r)),r.add(t)}get(t,n){const o=this.map.get(t);return o?o.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function d0(i,t,n){const r=i.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}class f0{constructor(){}supports(t){return t instanceof Map||Xh(t)}create(){return new E3}}class E3{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Xh(t)))throw new Error(`Error trying to diff '${pt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,o)=>{if(n&&n.key===o)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(o,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const o=this._records.get(t);this._maybeAddToChanges(o,n);const s=o._prev,a=o._next;return s&&(s._next=a),a&&(a._prev=s),o._next=null,o._prev=null,o}const r=new b3(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class b3{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function h0(){return new da([new l0])}let da=(()=>{class i{constructor(n){this.factories=n}static create(n,r){if(null!=r){const o=r.factories.slice();n=n.concat(o)}return new i(n)}static extend(n){return{provide:i,useFactory:r=>i.create(n,r||h0()),deps:[[i,new uo,new li]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(i){return i.name||typeof i}(n)}'`)}}return i.\u0275prov=ze({token:i,providedIn:"root",factory:h0}),i})();function p0(){return new fa([new f0])}let fa=(()=>{class i{constructor(n){this.factories=n}static create(n,r){if(r){const o=r.factories.slice();n=n.concat(o)}return new i(n)}static extend(n){return{provide:i,useFactory:r=>i.create(n,r||p0()),deps:[[i,new uo,new li]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return i.\u0275prov=ze({token:i,providedIn:"root",factory:p0}),i})();function Nu(i,t,n,r,o=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(vn(s)),qi(s))for(let c=10;c<s.length;c++){const d=s[c],y=d[1].firstChild;null!==y&&Nu(d[1],d,y,r)}const a=n.type;if(8&a)Nu(i,t,n.child,r);else if(32&a){const c=ph(n,t);let d;for(;d=c();)r.push(d)}else if(16&a){const c=dy(t,n);if(Array.isArray(c))r.push(...c);else{const d=cc(t[16]);Nu(d[1],d,c,r,!0)}}n=o?n.projectionNext:n.next}return r}class Tc{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return Nu(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(qi(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(vh(t,r),jo(n,r))}this._attachedToViewContainer=!1}ny(this._lView[1],this._lView)}onDestroy(t){Ly(this._lView[1],this._lView,null,t)}markForCheck(){Uh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,t,n){Ul(!0);try{Hh(i,t,n)}finally{Ul(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(i,t){lc(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class C3 extends Tc{constructor(t){super(t),this._view=t}detectChanges(){qy(this._view)}checkNoChanges(){!function(i){Ul(!0);try{qy(i)}finally{Ul(!1)}}(this._view)}get context(){return null}}const w3=function(i){return function(i,t,n){if(Ll(i)&&!n){const r=_i(i.index,t);return new Tc(r,r)}return 47&i.type?new Tc(t[16],t):null}(Tn(),Fe(),16==(16&i))};let Pi=(()=>{class i{}return i.__NG_ELEMENT_ID__=w3,i})();const I3=[new f0],O3=new da([new l0]),M3=new fa(I3),k3=function(){return ku(Tn(),Fe())};let xi=(()=>{class i{}return i.__NG_ELEMENT_ID__=k3,i})();const P3=xi,x3=class extends P3{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t){const n=this._declarationTContainer.tViews,r=uc(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(n)),dc(n,r,t),new Tc(r)}};function ku(i,t){return 4&i.type?new x3(t,i,ua(i,t)):null}class Cr{}class g0{}const V3=function(){return y0(Tn(),Fe())};let kn=(()=>{class i{}return i.__NG_ELEMENT_ID__=V3,i})();const U3=kn,m0=class extends U3{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ua(this._hostTNode,this._hostLView)}get injector(){return new Os(this._hostTNode,this._hostLView)}get parentInjector(){const t=Yl(this._hostTNode,this._hostLView);if(o1(t)){const n=Ds(t,this._hostLView),r=Is(t);return new Os(n[1].data[r+8],n)}return new Os(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=_0(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){const o=t.createEmbeddedView(n||{});return this.insert(o,r),o}createComponent(t,n,r,o,s){const a=r||this.parentInjector;if(!s&&null==t.ngModule&&a){const d=a.get(Cr,null);d&&(s=d)}const c=t.create(a,o,void 0,s);return this.insert(c.hostView,n),c}insert(t,n){const r=t._lView,o=r[1];if(function(i){return qi(i[3])}(r)){const k=this.indexOf(t);if(-1!==k)this.detach(k);else{const q=r[3],J=new m0(q,q[6],q[3]);J.detach(J.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;!function(i,t,n,r){const o=10+r,s=n.length;r>0&&(n[o-1][4]=t),r<s-10?(t[4]=n[o],eu(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const a=t[17];null!==a&&n!==a&&function(i,t){const n=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===n?i[9]=[t]:n.push(t)}(a,t);const c=t[19];null!==c&&c.insertView(i),t[2]|=128}(o,r,a,s);const c=Sh(s,a),d=r[11],y=uu(d,a[7]);return null!==y&&function(i,t,n,r,o,s){r[0]=o,r[6]=t,lc(i,r,n,1,o,s)}(o,a[6],d,r,y,c),t.attachToViewContainerRef(),eu(mp(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=_0(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=vh(this._lContainer,n);r&&(jo(mp(this._lContainer),n),ny(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=vh(this._lContainer,n);return r&&null!=jo(mp(this._lContainer),n)?new Tc(r):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function _0(i){return i[8]}function mp(i){return i[8]||(i[8]=[])}function y0(i,t){let n;const r=t[i.index];if(qi(r))n=r;else{let o;if(8&i.type)o=vn(r);else{const s=t[11];o=s.createComment("");const a=Oi(i,t);Wo(s,uu(s,a),o,function(i,t){return an(i)?i.nextSibling(t):t.nextSibling}(s,a),!1)}t[i.index]=n=Gy(r,t,o,i),_u(t,n)}return new m0(n,i,t)}const ma={};class V0 extends Zi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Yn(t);return new U0(n,this.ngModule)}}function j0(i){const t=[];for(let n in i)i.hasOwnProperty(n)&&t.push({propName:i[n],templateName:n});return t}const Lk=new et("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>K1});class U0 extends r0{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function(i){return i.map(DD).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return j0(this.componentDef.inputs)}get outputs(){return j0(this.componentDef.outputs)}create(t,n,r,o){const s=(o=o||this.ngModule)?function(i,t){return{get:(n,r,o)=>{const s=i.get(n,ma,o);return s!==ma||r===ma?s:t.get(n,r,o)}}}(t,o.injector):t,a=s.get(Ko,W_),c=s.get(gp,null),d=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",k=r?function(i,t,n){if(an(i))return i.selectRootElement(t,n===_n.ShadowDom);let r="string"==typeof t?i.querySelector(t):t;return r.textContent="",r}(d,r,this.componentDef.encapsulation):yh(a.createRenderer(null,this.componentDef),y,function(i){const t=i.toLowerCase();return"svg"===t?B_:"math"===t?"http://www.w3.org/1998/MathML/":null}(y)),q=this.componentDef.onPush?576:528,J=function(i,t){return{components:[],scheduler:i||K1,clean:hO,playerHandler:t||null,flags:0}}(),ae=mu(0,null,null,1,0,null,null,null,null,null),he=uc(null,ae,J,q,null,null,a,d,c,s);let we,be;Bl(he);try{const Pe=function(i,t,n,r,o,s){const a=n[1];n[20]=i;const d=Hs(a,20,2,"#host",null),y=d.mergedAttrs=t.hostAttrs;null!==y&&(yu(d,y,!0),null!==i&&(zl(o,i,y),null!==d.classes&&Th(o,i,d.classes),null!==d.styles&&py(o,i,d.styles)));const k=r.createRenderer(i,t),q=uc(n,ky(t),null,t.onPush?64:16,n[20],d,r,k,s||null,null);return a.firstCreatePass&&(Jl(Ya(d,n),a,t.type),By(a,d),Hy(d,n.length,1)),_u(n,q),n[20]=q}(k,this.componentDef,he,a,d);if(k)if(r)zl(d,k,["ng-version",c0.full]);else{const{attrs:Me,classes:je}=function(i){const t=[],n=[];let r=1,o=2;for(;r<i.length;){let s=i[r];if("string"==typeof s)2===o?""!==s&&t.push(s,i[++r]):8===o&&n.push(s);else{if(!$i(o))break;o=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);Me&&zl(d,k,Me),je&&je.length>0&&Th(d,k,je.join(" "))}if(be=Lf(ae,20),void 0!==n){const Me=be.projection=[];for(let je=0;je<this.ngContentSelectors.length;je++){const $e=n[je];Me.push(null!=$e?Array.from($e):null)}}we=function(i,t,n,r,o){const s=n[1],a=function(i,t,n){const r=Tn();i.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Wy(i,r,t,Ws(i,t,1,null),n));const o=Ja(t,i,r.directiveStart,r);jn(o,t);const s=Oi(r,t);return s&&jn(s,t),o}(s,n,t);if(r.components.push(a),i[8]=a,o&&o.forEach(d=>d(a,t)),t.contentQueries){const d=Tn();t.contentQueries(1,a,d.directiveStart)}const c=Tn();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(so(c.index),jy(n[1],c,0,c.directiveStart,c.directiveEnd,t),Uy(t,a)),a}(Pe,this.componentDef,he,J,[jO]),dc(ae,he,null)}finally{Hl()}return new jk(this.componentType,we,ua(be,he),he,be)}}class jk extends class{}{constructor(t,n,r,o,s){super(),this.location=r,this._rootLView=o,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new C3(o),this.componentType=t}get injector(){return new Os(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const _a=new Map;class Hk extends Cr{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new V0(this);const r=Ri(t),o=function(i){return i[$A]||null}(t);o&&ap(o),this._bootstrapComponents=_r(r.bootstrap),this._r3Injector=Zy(t,n,[{provide:Cr,useValue:this},{provide:Zi,useValue:this.componentFactoryResolver}],pt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=Bt.THROW_IF_NOT_FOUND,r=lt.Default){return t===Bt||t===Cr||t===Go?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Dp extends g0{constructor(t){super(),this.moduleType=t,null!==Ri(t)&&function(i){const t=new Set;!function n(r){const o=Ri(r,!0),s=o.id;null!==s&&(function(i,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${i} - ${pt(t)} vs ${pt(t.name)}`)}(s,_a.get(s),r),_a.set(s,r));const a=_r(o.imports);for(const c of a)t.has(c)||(t.add(c),n(c))}(i)}(t)}create(t){return new Hk(this.moduleType,t)}}function G0(i,t,n,r,o,s){const a=t+n;return Un(i,a,o)?function(i,t,n){return i[t]=n}(i,a+1,s?r.call(s,o):r(o)):function(i,t){const n=i[t];return n===vt?void 0:n}(i,a+1)}function kc(i,t){const n=Lt();let r;const o=i+20;n.firstCreatePass?(r=function(i,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(i===r.name)return r}throw new Mo("302",`The pipe '${i}' could not be found!`)}(t,n.pipeRegistry),n.data[o]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(o,r.onDestroy)):r=n.data[o];const s=r.factory||(r.factory=Lo(r.type)),a=to(Se);try{const c=Kl(!1),d=s();return Kl(c),function(i,t,n,r){n>=i.data.length&&(i.data[n]=null,i.blueprint[n]=null),t[n]=r}(n,Fe(),o,d),d}finally{to(a)}}function Pc(i,t,n){const r=i+20,o=Fe(),s=As(o,r);return function(i,t){Ji.isWrapped(t)&&(t=Ji.unwrap(t),i[_t.lFrame.bindingIndex]=vt);return t}(o,function(i,t){return i[1].data[t].pure}(o,r)?G0(o,Jn(),t,s.transform,n,s):s.transform(n))}function Op(i){return t=>{setTimeout(i,void 0,t)}}const Dt=class extends l{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){var o,s,a;let c=t,d=n||(()=>null),y=r;if(t&&"object"==typeof t){const q=t;c=null===(o=q.next)||void 0===o?void 0:o.bind(q),d=null===(s=q.error)||void 0===s?void 0:s.bind(q),y=null===(a=q.complete)||void 0===a?void 0:a.bind(q)}this.__isAsync&&(d=Op(d),c&&(c=Op(c)),y&&(y=Op(y)));const k=super.subscribe({next:c,error:d,complete:y});return t instanceof v&&t.add(k),k}};function rP(){return this._results[$s()]()}class Vu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=$s(),r=Vu.prototype;r[n]||(r[n]=rP)}get changes(){return this._changes||(this._changes=new Dt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const o=Mi(t);(this._changesDetected=!function(i,t,n){if(i.length!==t.length)return!1;for(let r=0;r<i.length;r++){let o=i[r],s=t[r];if(n&&(o=n(o),s=n(s)),s!==o)return!1}return!0}(r._results,o,n))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Mp{constructor(t){this.queryList=t,this.matches=null}clone(){return new Mp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Np{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,o=[];for(let s=0;s<r;s++){const a=n.getByIndex(s);o.push(this.queries[a.indexInDeclarationView].clone())}return new Np(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==Z0(t,n).matches&&this.queries[n].setDirty()}}class Y0{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class kp{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const o=null!==n?n.length:0,s=this.getByIndex(r).embeddedTView(t,o);s&&(s.indexInDeclarationView=r,null!==n?n.push(s):n=[s])}return null!==n?new kp(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Pp{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new Pp(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const s=r[o];this.matchTNodeWithReadOption(t,n,aP(n,s)),this.matchTNodeWithReadOption(t,n,Ql(n,t,s,!1,!1))}else r===xi?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Ql(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===Tt||o===kn||o===xi&&4&n.type)this.addMatch(n.index,-2);else{const s=Ql(n,t,o,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function aP(i,t){const n=i.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function lP(i,t,n,r){return-1===n?function(i,t){return 11&i.type?ua(i,t):4&i.type?ku(i,t):null}(t,i):-2===n?function(i,t,n){return n===Tt?ua(t,i):n===xi?ku(t,i):n===kn?y0(t,i):void 0}(i,t,r):Ja(i,i[1],n,t)}function J0(i,t,n,r){const o=t[19].queries[r];if(null===o.matches){const s=i.data,a=n.matches,c=[];for(let d=0;d<a.length;d+=2){const y=a[d];c.push(y<0?null:lP(t,s[y],a[d+1],n.metadata.read))}o.matches=c}return o.matches}function xp(i,t,n,r){const o=i.queries.getByIndex(n),s=o.matches;if(null!==s){const a=J0(i,t,o,n);for(let c=0;c<s.length;c+=2){const d=s[c];if(d>0)r.push(a[c/2]);else{const y=s[c+1],k=t[-d];for(let q=10;q<k.length;q++){const J=k[q];J[17]===J[3]&&xp(J[1],J,y,r)}if(null!==k[9]){const q=k[9];for(let J=0;J<q.length;J++){const ae=q[J];xp(ae[1],ae,y,r)}}}}}return r}function pn(i){const t=Fe(),n=Lt(),r=J_();Wf(r+1);const o=Z0(n,r);if(i.dirty&&G_(t)===(2==(2&o.metadata.flags))){if(null===o.matches)i.reset([]);else{const s=o.crossesNgTemplate?xp(n,t,r,[]):J0(n,t,o,r);i.reset(s,a0),i.notifyOnChanges()}return!0}return!1}function Tr(i,t,n){const r=Lt();r.firstCreatePass&&(X0(r,new Y0(i,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Q0(r,Fe(),t)}function Vi(i,t,n,r){const o=Lt();if(o.firstCreatePass){const s=Tn();X0(o,new Y0(t,n,r),s.index),function(i,t){const n=i.contentQueries||(i.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(i.queries.length-1,t)}(o,i),2==(2&n)&&(o.staticContentQueries=!0)}Q0(o,Fe(),n)}function gn(){return function(i,t){return i[19].queries[t].queryList}(Fe(),J_())}function Q0(i,t,n){const r=new Vu(4==(4&n));Ly(i,t,r,r.destroy),null===t[19]&&(t[19]=new Np),t[19].queries.push(new Mp(r))}function X0(i,t,n){null===i.queries&&(i.queries=new kp),i.queries.track(new Pp(t,n))}function Z0(i,t){return i.queries.getByIndex(t)}function eb(i,t){return ku(i,t)}const Vc=new et("Application Initializer");let va=(()=>{class i{constructor(n){this.appInits=n,this.resolve=Mu,this.reject=Mu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const s=this.appInits[o]();if(yc(s))n.push(s);else if(Cu(s)){const a=new Promise((c,d)=>{s.subscribe({complete:c,error:d})});n.push(a)}}Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}}return i.\u0275fac=function(n){return new(n||i)(Ae(Vc,8))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();const jc=new et("AppId"),jP={provide:jc,useFactory:function(){return`${Bp()}${Bp()}${Bp()}`},deps:[]};function Bp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yb=new et("Platform Initializer"),Uc=new et("Platform ID"),vb=new et("appBootstrapListener");let Bu=(()=>{class i{log(n){console.log(n)}warn(n){console.warn(n)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();const Br=new et("LocaleId"),Eb=new et("DefaultCurrencyCode");class BP{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}const Hp=function(i){return new Dp(i)},HP=Hp,WP=function(i){return Promise.resolve(Hp(i))},bb=function(i){const t=Hp(i),r=_r(Ri(i).declarations).reduce((o,s)=>{const a=Yn(s);return a&&o.push(new U0(a)),o},[]);return new BP(t,r)},GP=bb,qP=function(i){return Promise.resolve(bb(i))};let Qo=(()=>{class i{constructor(){this.compileModuleSync=HP,this.compileModuleAsync=WP,this.compileModuleAndAllComponentsSync=GP,this.compileModuleAndAllComponentsAsync=qP}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();const KP=(()=>Promise.resolve(0))();function Wp(i){"undefined"==typeof Zone?KP.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ut{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dt(!1),this.onMicrotaskEmpty=new Dt(!1),this.onStable=new Dt(!1),this.onError=new Dt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function(){let i=Ht.requestAnimationFrame,t=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&t){const n=i[Zone.__symbol__("OriginalDelegate")];n&&(i=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(i){const t=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ht,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,qp(i),i.isCheckStableRunning=!0,Gp(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),qp(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,s,a,c)=>{try{return Sb(i),n.invokeTask(o,s,a,c)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),Cb(i)}},onInvoke:(n,r,o,s,a,c,d)=>{try{return Sb(i),n.invoke(o,s,a,c,d)}finally{i.shouldCoalesceRunChangeDetection&&t(),Cb(i)}},onHasTask:(n,r,o,s)=>{n.hasTask(o,s),r===o&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,qp(i),Gp(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,o,s)=>(n.handleError(o,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(o)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ut.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ut.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+o,t,JP,Mu,Mu);try{return s.runTask(a,n,r)}finally{s.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const JP={};function Gp(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function qp(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Sb(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Cb(i){i._nesting--,Gp(i)}class ZP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dt,this.onMicrotaskEmpty=new Dt,this.onStable=new Dt,this.onError=new Dt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}}let zp=(()=>{class i{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ut.assertNotInAngularZone(),Wp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wp(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:o})}whenStable(n,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,o){return[]}}return i.\u0275fac=function(n){return new(n||i)(Ae(ut))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})(),Tb=(()=>{class i{constructor(){this._applications=new Map,$p.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return $p.findTestabilityInTree(this,n,r)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();class ex{addToWindow(t){}findTestabilityInTree(t,n,r){return null}}let $p=new ex,wb=!0,Ab=!1;function Kp(){return Ab=!0,wb}let nr;const Rb=new et("AllowMultipleToken");class Yp{constructor(t,n){this.name=t,this.token=n}}function Ib(i,t,n=[]){const r=`Platform: ${t}`,o=new et(r);return(s=[])=>{let a=Db();if(!a||a.injector.get(Rb,!1))if(i)i(n.concat(s).concat({provide:o,useValue:!0}));else{const c=n.concat(s).concat({provide:o,useValue:!0},{provide:fc,useValue:"platform"});!function(i){if(nr&&!nr.destroyed&&!nr.injector.get(Rb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");nr=i.get(Ob);const t=i.get(yb,null);t&&t.forEach(n=>n())}(Bt.create({providers:c,name:r}))}return function(i){const t=Db();if(!t)throw new Error("No platform exists!");if(!t.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(o)}}function Db(){return nr&&!nr.destroyed?nr:null}let Ob=(()=>{class i{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const c=function(i,t){let n;return n="noop"===i?new ZP:("zone.js"===i?void 0:i)||new ut({enableLongStackTrace:Kp(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),d=[{provide:ut,useValue:c}];return c.run(()=>{const y=Bt.create({providers:d,parent:this.injector,name:n.moduleType.name}),k=n.create(y),q=k.injector.get(Ho,null);if(!q)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return c.runOutsideAngular(()=>{const J=c.onError.subscribe({next:ae=>{q.handleError(ae)}});k.onDestroy(()=>{Jp(this._modules,k),J.unsubscribe()})}),function(i,t,n){try{const r=n();return yc(r)?r.catch(o=>{throw t.runOutsideAngular(()=>i.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>i.handleError(r)),r}}(q,c,()=>{const J=k.injector.get(va);return J.runInitializers(),J.donePromise.then(()=>(ap(k.injector.get(Br,Au)||Au),this._moduleDoBootstrap(k),k))})})}bootstrapModule(n,r=[]){const o=Mb({},r);return function(i,t,n){const r=new Dp(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(n){const r=n.injector.get(Hr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${pt(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(n){return new(n||i)(Ae(Bt))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();function Mb(i,t){return Array.isArray(t)?t.reduce(Mb,i):Object.assign(Object.assign({},i),t)}let Hr=(()=>{class i{constructor(n,r,o,s,a){this._zone=n,this._injector=r,this._exceptionHandler=o,this._componentFactoryResolver=s,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new te(y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{y.next(this._stable),y.complete()})}),d=new te(y=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{ut.assertNotInAngularZone(),Wp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,y.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{ut.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{y.next(!1)}))});return()=>{k.unsubscribe(),q.unsubscribe()}});this.isStable=X(c,d.pipe(i=>_e()(function(i,t){return function(r){let o;o="function"==typeof i?i:function(){return i};const s=Object.create(r,Ve);return s.source=r,s.subjectFactory=o,s}}(ct)(i))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let o;o=n instanceof r0?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(o.componentType);const s=function(i){return i.isBoundToModule}(o)?void 0:this._injector.get(Cr),c=o.create(Bt.NULL,[],r||o.selector,s),d=c.location.nativeElement,y=c.injector.get(zp,null),k=y&&c.injector.get(Tb);return y&&k&&k.registerApplication(d,y),c.onDestroy(()=>{this.detachView(c.hostView),Jp(this.components,c),k&&k.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Jp(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(vb,[]).concat(this._bootstrapListeners).forEach(o=>o(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(n){return new(n||i)(Ae(ut),Ae(Bt),Ae(Ho),Ae(Zi),Ae(va))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();function Jp(i,t){const n=i.indexOf(t);n>-1&&i.splice(n,1)}class Wu{}class gx{}const mx={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let _x=(()=>{class i{constructor(n,r){this._compiler=n,this._config=r||mx}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[r,o]=n.split("#");return void 0===o&&(o="default"),V(255)(r).then(s=>s[o]).then(s=>xb(s,r,o)).then(s=>this._compiler.compileModuleAsync(s))}loadFactory(n){let[r,o]=n.split("#"),s="NgFactory";return void 0===o&&(o="default",s=""),V(255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(a=>a[o+s]).then(a=>xb(a,r,o))}}return i.\u0275fac=function(n){return new(n||i)(Ae(Qo),Ae(gx,8))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();function xb(i,t,n){if(!i)throw new Error(`Cannot find '${n}' in '${t}'`);return i}const Rx=Ib(null,"core",[{provide:Uc,useValue:"unknown"},{provide:Ob,deps:[Bt]},{provide:Tb,deps:[]},{provide:Bu,deps:[]}]),Nx=[{provide:Hr,useClass:Hr,deps:[ut,Bt,Ho,Zi,va]},{provide:Lk,deps:[ut],useFactory:function(i){let t=[];return i.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:va,useClass:va,deps:[[new li,Vc]]},{provide:Qo,useClass:Qo,deps:[]},jP,{provide:da,useFactory:function(){return O3},deps:[]},{provide:fa,useFactory:function(){return M3},deps:[]},{provide:Br,useFactory:function(i){return ap(i=i||"undefined"!=typeof $localize&&$localize.locale||Au),i},deps:[[new Fs(Br),new li,new uo]]},{provide:Eb,useValue:"USD"}];let Px=(()=>{class i{constructor(n){}}return i.\u0275fac=function(n){return new(n||i)(Ae(Hr))},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({providers:Nx}),i})(),Zu=null;function wr(){return Zu}const tt=new et("DocumentToken");let es=(()=>{class i{historyGo(n){throw new Error("Not implemented")}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({factory:k4,token:i,providedIn:"platform"}),i})();function k4(){return Ae(oS)}const P4=new et("Location Initialized");let oS=(()=>{class i extends es{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wr().getBaseHref(this._doc)}onPopState(n){const r=wr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=wr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,o){sS()?this._history.pushState(n,r,o):this.location.hash=o}replaceState(n,r,o){sS()?this._history.replaceState(n,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt))},i.\u0275prov=ze({factory:x4,token:i,providedIn:"platform"}),i})();function sS(){return!!window.history.pushState}function x4(){return new oS(Ae(tt))}function dg(i,t){if(0==i.length)return t;if(0==t.length)return i;let n=0;return i.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?i+t.substring(1):1==n?i+t:i+"/"+t}function aS(i){const t=i.match(/#|\?|$/),n=t&&t.index||i.length;return i.slice(0,n-("/"===i[n-1]?1:0))+i.slice(n)}function Gr(i){return i&&"?"!==i[0]?"?"+i:i}let Sa=(()=>{class i{historyGo(n){throw new Error("Not implemented")}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({factory:L4,token:i,providedIn:"root"}),i})();function L4(i){const t=Ae(tt).location;return new cS(Ae(es),t&&t.origin||"")}const fg=new et("appBaseHref");let cS=(()=>{class i extends Sa{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return dg(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Gr(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,s){const a=this.prepareExternalUrl(o+Gr(s));this._platformLocation.pushState(n,r,a)}replaceState(n,r,o,s){const a=this.prepareExternalUrl(o+Gr(s));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,n)}}return i.\u0275fac=function(n){return new(n||i)(Ae(es),Ae(fg,8))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})(),F4=(()=>{class i extends Sa{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=dg(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,s){let a=this.prepareExternalUrl(o+Gr(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,r,a)}replaceState(n,r,o,s){let a=this.prepareExternalUrl(o+Gr(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,n)}}return i.\u0275fac=function(n){return new(n||i)(Ae(es),Ae(fg,8))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})(),qc=(()=>{class i{constructor(n,r){this._subject=new Dt,this._urlChangeListeners=[],this._platformStrategy=n;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=aS(lS(o)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Gr(r))}normalize(n){return i.stripTrailingSlash(function(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,lS(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._platformStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Gr(r)),o)}replaceState(n,r="",o=null){this._platformStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Gr(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}}return i.\u0275fac=function(n){return new(n||i)(Ae(Sa),Ae(es))},i.normalizeQueryParams=Gr,i.joinWithSlash=dg,i.stripTrailingSlash=aS,i.\u0275prov=ze({factory:V4,token:i,providedIn:"root"}),i})();function V4(){return new qc(Ae(Sa),Ae(es))}function lS(i){return i.replace(/\/index.html$/,"")}var En=(()=>((En=En||{})[En.Zero=0]="Zero",En[En.One=1]="One",En[En.Two=2]="Two",En[En.Few=3]="Few",En[En.Many=4]="Many",En[En.Other=5]="Other",En))();const z4=function(i){return function(i){const t=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let n=ME(t);if(n)return n;const r=t.split("-")[0];if(n=ME(r),n)return n;if("en"===r)return cN;throw new Error(`Missing locale data for the locale "${i}".`)}(i)[Ye.PluralCase]};class ld{}let bL=(()=>{class i extends ld{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(z4(r||this.locale)(n)){case En.Zero:return"zero";case En.One:return"one";case En.Two:return"two";case En.Few:return"few";case En.Many:return"many";default:return"other"}}}return i.\u0275fac=function(n){return new(n||i)(Ae(Br))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})(),yS=(()=>{class i{constructor(n,r,o,s){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=o,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&(gc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),n.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),n.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${pt(r.item)}`);this._toggleClass(r.item,!0)}),n.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(r=>this._toggleClass(r,!0)):Object.keys(n).forEach(r=>this._toggleClass(r,!!n[r])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(r=>this._toggleClass(r,!1)):Object.keys(n).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(n,r){(n=n.trim())&&n.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return i.\u0275fac=function(n){return new(n||i)(Se(da),Se(fa),Se(Tt),Se(Sr))},i.\u0275dir=Be({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i})();class TL{constructor(t,n,r,o){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vS=(()=>{class i{constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(i){return i.name||typeof i}(n)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=[];n.forEachOperation((o,s,a)=>{if(null==o.previousIndex){const c=this._viewContainer.createEmbeddedView(this._template,new TL(null,this._ngForOf,-1,-1),null===a?void 0:a),d=new ES(o,c);r.push(d)}else if(null==a)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const c=this._viewContainer.get(s);this._viewContainer.move(c,a);const d=new ES(o,c);r.push(d)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,s=this._viewContainer.length;o<s;o++){const a=this._viewContainer.get(o);a.context.index=o,a.context.count=s,a.context.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(n,r){n.context.$implicit=r.item}static ngTemplateContextGuard(n,r){return!0}}return i.\u0275fac=function(n){return new(n||i)(Se(kn),Se(xi),Se(da))},i.\u0275dir=Be({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();class ES{constructor(t,n){this.record=t,this.view=n}}let Kc=(()=>{class i{constructor(n,r){this._viewContainer=n,this._context=new AL,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){bS("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){bS("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return i.\u0275fac=function(n){return new(n||i)(Se(kn),Se(xi))},i.\u0275dir=Be({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class AL{constructor(){this.$implicit=null,this.ngIf=null}}function bS(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${pt(t)}'.`)}class bg{constructor(t,n){this._viewContainerRef=t,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ud=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(n){this._ngSwitch=n,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(n){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(n)}_matchCase(n){const r=n==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(n){if(this._defaultViews&&n!==this._defaultUsed){this._defaultUsed=n;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(n)}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=Be({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),i})(),SS=(()=>{class i{constructor(n,r,o){this.ngSwitch=o,o._addCase(),this._view=new bg(n,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(n){return new(n||i)(Se(kn),Se(xi),Se(ud,9))},i.\u0275dir=Be({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),i})();class ML{createSubscription(t,n){return t.subscribe({next:n,error:r=>{throw r}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class NL{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}onDestroy(t){}}const kL=new NL,PL=new ML;let dd=(()=>{class i{constructor(n){this._ref=n,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(yc(n))return kL;if(Uv(n))return PL;throw function(i,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${pt(i)}'`)}(i,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return i.\u0275fac=function(n){return new(n||i)(Se(Pi,16))},i.\u0275pipe=ai({name:"async",type:i,pure:!1}),i})(),Yc=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({providers:[{provide:ld,useClass:bL}]}),i})();const wS="browser";let AS=(()=>{class i{}return i.\u0275prov=ze({token:i,providedIn:"root",factory:()=>new e5(Ae(tt),window)}),i})();class e5{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function(i,t){const n=i.getElementById(t)||i.getElementsByName(t)[0];if(n)return n;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const r=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const s=o.shadowRoot;if(s){const a=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(a)return a}o=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],o-s[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=RS(this.window.history)||RS(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function RS(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Tg extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(i){Zu||(Zu=i)}(new Tg)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=(Jc=Jc||document.querySelector("base"),Jc?Jc.getAttribute("href"):null);return null==n?null:function(i){fd=fd||document.createElement("a"),fd.setAttribute("href",i);const t=fd.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Jc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(i,t){t=encodeURIComponent(t);for(const n of i.split(";")){const r=n.indexOf("="),[o,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let fd,Jc=null;const IS=new et("TRANSITION_ID"),a5=[{provide:Vc,useFactory:function(i,t,n){return()=>{n.get(va).donePromise.then(()=>{const r=wr(),o=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<o.length;s++)r.remove(o[s])})}},deps:[IS,tt,Bt],multi:!0}];class wg{static init(){!function(i){$p=i}(new wg)}addToWindow(t){Ht.getAngularTestability=(r,o=!0)=>{const s=t.findTestabilityInTree(r,o);if(null==s)throw new Error("Could not find testability for element.");return s},Ht.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ht.getAllAngularRootElements=()=>t.getAllRootElements(),Ht.frameworkStabilizers||(Ht.frameworkStabilizers=[]),Ht.frameworkStabilizers.push(r=>{const o=Ht.getAllAngularTestabilities();let s=o.length,a=!1;const c=function(d){a=a||d,s--,0==s&&r(a)};o.forEach(function(d){d.whenStable(c)})})}findTestabilityInTree(t,n,r){if(null==n)return null;const o=t.getTestability(n);return null!=o?o:r?wr().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let c5=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();const Qc=new et("EventManagerPlugins");let pd=(()=>{class i{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>o.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}addGlobalEventListener(n,r,o){return this._findPluginFor(r).addGlobalEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const o=this._plugins;for(let s=0;s<o.length;s++){const a=o[s];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return i.\u0275fac=function(n){return new(n||i)(Ae(Qc),Ae(ut))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();class Ag{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const o=wr().getGlobalEventTarget(this._doc,t);if(!o)throw new Error(`Unsupported event target ${o} for event ${n}`);return this.addEventListener(o,n,r)}}let OS=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})(),Xc=(()=>{class i extends OS{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,o){n.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,o.push(r.appendChild(a))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(MS),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(n,o,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(MS))}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();function MS(i){wr().remove(i)}const Rg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ig=/%COMP%/g;function gd(i,t,n){for(let r=0;r<t.length;r++){let o=t[r];Array.isArray(o)?gd(i,o,n):(o=o.replace(Ig,i),n.push(o))}return n}function PS(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let md=(()=>{class i{constructor(n,r,o){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Dg(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case _n.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new C5(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(n),o}case 1:case _n.ShadowDom:return new T5(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const o=gd(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(n){return new(n||i)(Ae(pd),Ae(Xc),Ae(jc))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();class Dg{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,n){return n?document.createElementNS(Rg[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,r){t&&t.insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;const s=Rg[o];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const o=Rg[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(Ei.DashCase|Ei.Important)?t.style.setProperty(n,r,o&Ei.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Ei.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,PS(r)):this.eventManager.addEventListener(t,n,PS(r))}}class C5 extends Dg{constructor(t,n,r,o){super(t),this.component=r;const s=gd(o+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function(i){return"_ngcontent-%COMP%".replace(Ig,i)}(o+"-"+r.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(Ig,i)}(o+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class T5 extends Dg{constructor(t,n,r,o){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=gd(o.id,o.styles,[]);for(let a=0;a<s.length;a++){const c=document.createElement("style");c.textContent=s[a],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let w5=(()=>{class i extends Ag{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();const FS=["alt","control","meta","shift"],N5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},VS={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},k5={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let P5=(()=>{class i extends Ag{constructor(n){super(n)}supports(n){return null!=i.parseEventName(n)}addEventListener(n,r,o){const s=i.parseEventName(r),a=i.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wr().onAndCancel(n,s.domEventName,a))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const s=i._normalizeKey(r.pop());let a="";if(FS.forEach(d=>{const y=r.indexOf(d);y>-1&&(r.splice(y,1),a+=d+".")}),a+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=o,c.fullKey=a,c}static getEventFullKey(n){let r="",o=function(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&VS.hasOwnProperty(t)&&(t=VS[t]))}return N5[t]||t}(n);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),FS.forEach(s=>{s!=o&&k5[s](n)&&(r+=s+".")}),r+=o,r}static eventCallback(n,r,o){return s=>{i.getEventFullKey(s)===n&&o.runGuarded(()=>r(s))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();const H5=Ib(Rx,"browser",[{provide:Uc,useValue:wS},{provide:yb,useValue:function(){Tg.makeCurrent(),wg.init()},multi:!0},{provide:tt,useFactory:function(){return function(i){Pf=i}(document),document},deps:[]}]),W5=[[],{provide:fc,useValue:"root"},{provide:Ho,useFactory:function(){return new Ho},deps:[]},{provide:Qc,useClass:w5,multi:!0,deps:[tt,ut,Uc]},{provide:Qc,useClass:P5,multi:!0,deps:[tt]},[],{provide:md,useClass:md,deps:[pd,Xc,jc]},{provide:Ko,useExisting:md},{provide:OS,useExisting:Xc},{provide:Xc,useClass:Xc,deps:[tt]},{provide:zp,useClass:zp,deps:[ut]},{provide:pd,useClass:pd,deps:[Qc,ut]},{provide:class{},useClass:c5,deps:[]},[]];let kg=(()=>{class i{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:i,providers:[{provide:jc,useValue:n.appId},{provide:IS,useExisting:jc},a5]}}}return i.\u0275fac=function(n){return new(n||i)(Ae(i,12))},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({providers:W5,imports:[Yc,Px]}),i})();"undefined"!=typeof window&&window;class US{}const zr="*";function xg(i,t){return{type:7,name:i,definitions:t,options:{}}}function Zc(i,t=null){return{type:4,styles:t,timings:i}}function BS(i,t=null){return{type:2,steps:i,options:t}}function di(i){return{type:6,styles:i,offset:null}}function Lg(i,t,n){return{type:0,name:i,styles:t,options:n}}function X5(i){return{type:5,steps:i}}function el(i,t,n=null){return{type:1,expr:i,animation:t,options:n}}function HS(i){Promise.resolve(null).then(i)}class Ca{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){HS(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class WS{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,r=0,o=0;const s=this.players.length;0==s?HS(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++n==s&&this._onFinish()}),a.onDestroy(()=>{++r==s&&this._onDestroy()}),a.onStart(()=>{++o==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,c)=>Math.max(a,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(o)})}getPosition(){const t=this.players.reduce((n,r)=>null===n||r.totalTime>n.totalTime?r:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}function GS(){return"undefined"!=typeof window&&void 0!==window.document}function Vg(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Eo(i){switch(i.length){case 0:return new Ca;case 1:return i[0];default:return new WS(i)}}function qS(i,t,n,r,o={},s={}){const a=[],c=[];let d=-1,y=null;if(r.forEach(k=>{const q=k.offset,J=q==d,ae=J&&y||{};Object.keys(k).forEach(he=>{let we=he,be=k[he];if("offset"!==he)switch(we=t.normalizePropertyName(we,a),be){case"!":be=o[he];break;case zr:be=s[he];break;default:be=t.normalizeStyleValue(he,we,be,a)}ae[we]=be}),J||c.push(ae),y=ae,d=q}),a.length){const k="\n - ";throw new Error(`Unable to animate due to the following errors:${k}${a.join(k)}`)}return c}function jg(i,t,n,r){switch(t){case"start":i.onStart(()=>r(n&&Ug(n,"start",i)));break;case"done":i.onDone(()=>r(n&&Ug(n,"done",i)));break;case"destroy":i.onDestroy(()=>r(n&&Ug(n,"destroy",i)))}}function Ug(i,t,n){const r=n.totalTime,s=Bg(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,null==r?i.totalTime:r,!!n.disabled),a=i._data;return null!=a&&(s._data=a),s}function Bg(i,t,n,r,o="",s=0,a){return{element:i,triggerName:t,fromState:n,toState:r,phaseName:o,totalTime:s,disabled:!!a}}function Si(i,t,n){let r;return i instanceof Map?(r=i.get(t),r||i.set(t,r=n)):(r=i[t],r||(r=i[t]=n)),r}function zS(i){const t=i.indexOf(":");return[i.substring(1,t),i.substr(t+1)]}let Hg=(i,t)=>!1,Wg=(i,t)=>!1,$S=(i,t,n)=>[];const KS=Vg();(KS||"undefined"!=typeof Element)&&(Hg=GS()?(i,t)=>{for(;t&&t!==document.documentElement;){if(t===i)return!0;t=t.parentNode||t.host}return!1}:(i,t)=>i.contains(t),Wg=(()=>{if(KS||Element.prototype.matches)return(i,t)=>i.matches(t);{const i=Element.prototype,t=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return t?(n,r)=>t.apply(n,[r]):Wg}})(),$S=(i,t,n)=>{let r=[];if(n){const o=i.querySelectorAll(t);for(let s=0;s<o.length;s++)r.push(o[s])}else{const o=i.querySelector(t);o&&r.push(o)}return r});let ts=null,YS=!1;function Gg(i){ts||(ts=("undefined"!=typeof document?document.body:null)||{},YS=!!ts.style&&"WebkitAppearance"in ts.style);let t=!0;return ts.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in ts.style,!t&&YS&&(t="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in ts.style)),t}const qg=Wg,zg=Hg,$g=$S;function JS(i){const t={};return Object.keys(i).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=i[n]}),t}let QS=(()=>{class i{validateStyleProperty(n){return Gg(n)}matchesElement(n,r){return qg(n,r)}containsElement(n,r){return zg(n,r)}query(n,r,o){return $g(n,r,o)}computeStyle(n,r,o){return o||""}animate(n,r,o,s,a,c=[],d){return new Ca(o,s)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})(),Kg=(()=>{class i{}return i.NOOP=new QS,i})();const Yg="ng-enter",_d="ng-leave",yd="ng-trigger",vd=".ng-trigger",ZS="ng-animating",Jg=".ng-animating";function ns(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Qg(parseFloat(t[1]),t[2])}function Qg(i,t){switch(t){case"s":return 1e3*i;default:return i}}function Ed(i,t,n){return i.hasOwnProperty("duration")?i:function(i,t,n){let o,s=0,a="";if("string"==typeof i){const c=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return t.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};o=Qg(parseFloat(c[1]),c[2]);const d=c[3];null!=d&&(s=Qg(parseFloat(d),c[4]));const y=c[5];y&&(a=y)}else o=i;if(!n){let c=!1,d=t.length;o<0&&(t.push("Duration values below 0 are not allowed for this animation step."),c=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&t.splice(d,0,`The provided timing value "${i}" is invalid.`)}return{duration:o,delay:s,easing:a}}(i,t,n)}function Ta(i,t={}){return Object.keys(i).forEach(n=>{t[n]=i[n]}),t}function bo(i,t,n={}){if(t)for(let r in i)n[r]=i[r];else Ta(i,n);return n}function tC(i,t,n){return n?t+":"+n+";":""}function nC(i){let t="";for(let n=0;n<i.style.length;n++){const r=i.style.item(n);t+=tC(0,r,i.style.getPropertyValue(r))}for(const n in i.style)i.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=tC(0,s6(n),i.style[n]));i.setAttribute("style",t)}function Ar(i,t,n){i.style&&(Object.keys(t).forEach(r=>{const o=Zg(r);n&&!n.hasOwnProperty(r)&&(n[r]=i.style[o]),i.style[o]=t[r]}),Vg()&&nC(i))}function is(i,t){i.style&&(Object.keys(t).forEach(n=>{const r=Zg(n);i.style[r]=""}),Vg()&&nC(i))}function tl(i){return Array.isArray(i)?1==i.length?i[0]:BS(i):i}const Xg=new RegExp("{{\\s*(.+?)\\s*}}","g");function iC(i){let t=[];if("string"==typeof i){let n;for(;n=Xg.exec(i);)t.push(n[1]);Xg.lastIndex=0}return t}function bd(i,t,n){const r=i.toString(),o=r.replace(Xg,(s,a)=>{let c=t[a];return t.hasOwnProperty(a)||(n.push(`Please provide a value for the animation param ${a}`),c=""),c.toString()});return o==r?i:o}function Sd(i){const t=[];let n=i.next();for(;!n.done;)t.push(n.value),n=i.next();return t}const o6=/-+([a-z0-9])/g;function Zg(i){return i.replace(o6,(...t)=>t[1].toUpperCase())}function s6(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function rC(i,t){return 0===i||0===t}function oC(i,t,n){const r=Object.keys(n);if(r.length&&t.length){let s=t[0],a=[];if(r.forEach(c=>{s.hasOwnProperty(c)||a.push(c),s[c]=n[c]}),a.length)for(var o=1;o<t.length;o++){let c=t[o];a.forEach(function(d){c[d]=em(i,d)})}}return t}function Ci(i,t,n){switch(t.type){case 7:return i.visitTrigger(t,n);case 0:return i.visitState(t,n);case 1:return i.visitTransition(t,n);case 2:return i.visitSequence(t,n);case 3:return i.visitGroup(t,n);case 4:return i.visitAnimate(t,n);case 5:return i.visitKeyframes(t,n);case 6:return i.visitStyle(t,n);case 8:return i.visitReference(t,n);case 9:return i.visitAnimateChild(t,n);case 10:return i.visitAnimateRef(t,n);case 11:return i.visitQuery(t,n);case 12:return i.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function em(i,t){return window.getComputedStyle(i)[t]}function a6(i,t){const n=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(r=>function(i,t,n){if(":"==i[0]){const d=function(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return t.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,n);if("function"==typeof d)return void t.push(d);i=d}const r=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${i}" is not supported`),t;const o=r[1],s=r[2],a=r[3];t.push(sC(o,a));"<"==s[0]&&!("*"==o&&"*"==a)&&t.push(sC(a,o))}(r,n,t)):n.push(i),n}const Td=new Set(["true","1"]),wd=new Set(["false","0"]);function sC(i,t){const n=Td.has(i)||wd.has(i),r=Td.has(t)||wd.has(t);return(o,s)=>{let a="*"==i||i==o,c="*"==t||t==s;return!a&&n&&"boolean"==typeof o&&(a=o?Td.has(i):wd.has(i)),!c&&r&&"boolean"==typeof s&&(c=s?Td.has(t):wd.has(t)),a&&c}}const u6=new RegExp("s*:selfs*,?","g");function tm(i,t,n){return new d6(i).build(t,n)}class d6{constructor(t){this._driver=t}build(t,n){const r=new p6(n);return this._resetContextStyleTimingState(r),Ci(this,tl(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,n){let r=n.queryCount=0,o=n.depCount=0;const s=[],a=[];return"@"==t.name.charAt(0)&&n.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(c=>{if(this._resetContextStyleTimingState(n),0==c.type){const d=c,y=d.name;y.toString().split(/\s*,\s*/).forEach(k=>{d.name=k,s.push(this.visitState(d,n))}),d.name=y}else if(1==c.type){const d=this.visitTransition(c,n);r+=d.queryCount,o+=d.depCount,a.push(d)}else n.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:s,transitions:a,queryCount:r,depCount:o,options:null}}visitState(t,n){const r=this.visitStyle(t.styles,n),o=t.options&&t.options.params||null;if(r.containsDynamicStyles){const s=new Set,a=o||{};if(r.styles.forEach(c=>{if(Ad(c)){const d=c;Object.keys(d).forEach(y=>{iC(d[y]).forEach(k=>{a.hasOwnProperty(k)||s.add(k)})})}}),s.size){const c=Sd(s.values());n.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${c.join(", ")}`)}}return{type:0,name:t.name,style:r,options:o?{params:o}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const r=Ci(this,tl(t.animation),n);return{type:1,matchers:a6(t.expr,n.errors),animation:r,queryCount:n.queryCount,depCount:n.depCount,options:rs(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(r=>Ci(this,r,n)),options:rs(t.options)}}visitGroup(t,n){const r=n.currentTime;let o=0;const s=t.steps.map(a=>{n.currentTime=r;const c=Ci(this,a,n);return o=Math.max(o,n.currentTime),c});return n.currentTime=o,{type:3,steps:s,options:rs(t.options)}}visitAnimate(t,n){const r=function(i,t){let n=null;if(i.hasOwnProperty("duration"))n=i;else if("number"==typeof i)return nm(Ed(i,t).duration,0,"");const r=i;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=nm(0,0,"");return s.dynamic=!0,s.strValue=r,s}return n=n||Ed(r,t),nm(n.duration,n.delay,n.easing)}(t.timings,n.errors);n.currentAnimateTimings=r;let o,s=t.styles?t.styles:di({});if(5==s.type)o=this.visitKeyframes(s,n);else{let a=t.styles,c=!1;if(!a){c=!0;const y={};r.easing&&(y.easing=r.easing),a=di(y)}n.currentTime+=r.duration+r.delay;const d=this.visitStyle(a,n);d.isEmptyStep=c,o=d}return n.currentAnimateTimings=null,{type:4,timings:r,style:o,options:null}}visitStyle(t,n){const r=this._makeStyleAst(t,n);return this._validateStyleAst(r,n),r}_makeStyleAst(t,n){const r=[];Array.isArray(t.styles)?t.styles.forEach(a=>{"string"==typeof a?a==zr?r.push(a):n.errors.push(`The provided style string value ${a} is not allowed.`):r.push(a)}):r.push(t.styles);let o=!1,s=null;return r.forEach(a=>{if(Ad(a)){const c=a,d=c.easing;if(d&&(s=d,delete c.easing),!o)for(let y in c)if(c[y].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:r,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,n){const r=n.currentAnimateTimings;let o=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),t.styles.forEach(a=>{"string"!=typeof a&&Object.keys(a).forEach(c=>{if(!this._driver.validateStyleProperty(c))return void n.errors.push(`The provided animation property "${c}" is not a supported CSS property for animations`);const d=n.collectedStyles[n.currentQuerySelector],y=d[c];let k=!0;y&&(s!=o&&s>=y.startTime&&o<=y.endTime&&(n.errors.push(`The CSS property "${c}" that exists between the times of "${y.startTime}ms" and "${y.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${o}ms"`),k=!1),s=y.startTime),k&&(d[c]={startTime:s,endTime:o}),n.options&&function(i,t,n){const r=t.params||{},o=iC(i);o.length&&o.forEach(s=>{r.hasOwnProperty(s)||n.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(a[c],n.options,n.errors)})})}visitKeyframes(t,n){const r={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const a=[];let c=!1,d=!1,y=0;const k=t.steps.map(Pe=>{const Me=this._makeStyleAst(Pe,n);let je=null!=Me.offset?Me.offset:function(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(n=>{if(Ad(n)&&n.hasOwnProperty("offset")){const r=n;t=parseFloat(r.offset),delete r.offset}});else if(Ad(i)&&i.hasOwnProperty("offset")){const n=i;t=parseFloat(n.offset),delete n.offset}return t}(Me.styles),$e=0;return null!=je&&(s++,$e=Me.offset=je),d=d||$e<0||$e>1,c=c||$e<y,y=$e,a.push($e),Me});d&&n.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),c&&n.errors.push("Please ensure that all keyframe offsets are in order");const q=t.steps.length;let J=0;s>0&&s<q?n.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(J=1/(q-1));const ae=q-1,he=n.currentTime,we=n.currentAnimateTimings,be=we.duration;return k.forEach((Pe,Me)=>{const je=J>0?Me==ae?1:J*Me:a[Me],$e=je*be;n.currentTime=he+we.delay+$e,we.duration=$e,this._validateStyleAst(Pe,n),Pe.offset=je,r.styles.push(Pe)}),r}visitReference(t,n){return{type:8,animation:Ci(this,tl(t.animation),n),options:rs(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:rs(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:rs(t.options)}}visitQuery(t,n){const r=n.currentQuerySelector,o=t.options||{};n.queryCount++,n.currentQuery=t;const[s,a]=function(i){const t=!!i.split(/\s*,\s*/).find(n=>":self"==n);return t&&(i=i.replace(u6,"")),[i=i.replace(/@\*/g,vd).replace(/@\w+/g,n=>vd+"-"+n.substr(1)).replace(/:animating/g,Jg),t]}(t.selector);n.currentQuerySelector=r.length?r+" "+s:s,Si(n.collectedStyles,n.currentQuerySelector,{});const c=Ci(this,tl(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:s,limit:o.limit||0,optional:!!o.optional,includeSelf:a,animation:c,originalSelector:t.selector,options:rs(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push("stagger() can only be used inside of query()");const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:Ed(t.timings,n.errors,!0);return{type:12,animation:Ci(this,tl(t.animation),n),timings:r,options:null}}}class p6{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ad(i){return!Array.isArray(i)&&"object"==typeof i}function rs(i){return i?(i=Ta(i)).params&&(i.params=function(i){return i?Ta(i):null}(i.params)):i={},i}function nm(i,t,n){return{duration:i,delay:t,easing:n}}function im(i,t,n,r,o,s,a=null,c=!1){return{type:1,element:i,keyframes:t,preStyleProps:n,postStyleProps:r,duration:o,delay:s,totalTime:o+s,easing:a,subTimeline:c}}class Rd{constructor(){this._map=new Map}consume(t){let n=this._map.get(t);return n?this._map.delete(t):n=[],n}append(t,n){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const v6=new RegExp(":enter","g"),b6=new RegExp(":leave","g");function rm(i,t,n,r,o,s={},a={},c,d,y=[]){return(new S6).buildKeyframes(i,t,n,r,o,s,a,c,d,y)}class S6{buildKeyframes(t,n,r,o,s,a,c,d,y,k=[]){y=y||new Rd;const q=new om(t,n,y,o,s,k,[]);q.options=d,q.currentTimeline.setStyles([a],null,q.errors,d),Ci(this,r,q);const J=q.timelines.filter(ae=>ae.containsAnimation());if(J.length&&Object.keys(c).length){const ae=J[J.length-1];ae.allowOnlyTimelineStyles()||ae.setStyles([c],null,q.errors,d)}return J.length?J.map(ae=>ae.buildKeyframes()):[im(n,[],[],[],0,0,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const r=n.subInstructions.consume(n.element);if(r){const o=n.createSubContext(t.options),s=n.currentTimeline.currentTime,a=this._visitSubInstructions(r,o,o.options);s!=a&&n.transformIntoNewTimeline(a)}n.previousNode=t}visitAnimateRef(t,n){const r=n.createSubContext(t.options);r.transformIntoNewTimeline(),this.visitReference(t.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=t}_visitSubInstructions(t,n,r){let s=n.currentTimeline.currentTime;const a=null!=r.duration?ns(r.duration):null,c=null!=r.delay?ns(r.delay):null;return 0!==a&&t.forEach(d=>{const y=n.appendInstructionToTimeline(d,a,c);s=Math.max(s,y.duration+y.delay)}),s}visitReference(t,n){n.updateOptions(t.options,!0),Ci(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const r=n.subContextCount;let o=n;const s=t.options;if(s&&(s.params||s.delay)&&(o=n.createSubContext(s),o.transformIntoNewTimeline(),null!=s.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Id);const a=ns(s.delay);o.delayNextStep(a)}t.steps.length&&(t.steps.forEach(a=>Ci(this,a,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const r=[];let o=n.currentTimeline.currentTime;const s=t.options&&t.options.delay?ns(t.options.delay):0;t.steps.forEach(a=>{const c=n.createSubContext(t.options);s&&c.delayNextStep(s),Ci(this,a,c),o=Math.max(o,c.currentTimeline.currentTime),r.push(c.currentTimeline)}),r.forEach(a=>n.currentTimeline.mergeTimelineCollectedStyles(a)),n.transformIntoNewTimeline(o),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const r=t.strValue;return Ed(n.params?bd(r,n.params,n.errors):r,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const r=n.currentAnimateTimings=this._visitTiming(t.timings,n),o=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),o.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),o.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const r=n.currentTimeline,o=n.currentAnimateTimings;!o&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=o&&o.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(s):r.setStyles(t.styles,s,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const r=n.currentAnimateTimings,o=n.currentTimeline.duration,s=r.duration,c=n.createSubContext().currentTimeline;c.easing=r.easing,t.styles.forEach(d=>{c.forwardTime((d.offset||0)*s),c.setStyles(d.styles,d.easing,n.errors,n.options),c.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(c),n.transformIntoNewTimeline(o+s),n.previousNode=t}visitQuery(t,n){const r=n.currentTimeline.currentTime,o=t.options||{},s=o.delay?ns(o.delay):0;s&&(6===n.previousNode.type||0==r&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Id);let a=r;const c=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!o.optional,n.errors);n.currentQueryTotal=c.length;let d=null;c.forEach((y,k)=>{n.currentQueryIndex=k;const q=n.createSubContext(t.options,y);s&&q.delayNextStep(s),y===n.element&&(d=q.currentTimeline),Ci(this,t.animation,q),q.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,q.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(a),d&&(n.currentTimeline.mergeTimelineCollectedStyles(d),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const r=n.parentContext,o=n.currentTimeline,s=t.timings,a=Math.abs(s.duration),c=a*(n.currentQueryTotal-1);let d=a*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":d=c-d;break;case"full":d=r.currentStaggerTime}const k=n.currentTimeline;d&&k.delayNextStep(d);const q=k.currentTime;Ci(this,t.animation,n),n.previousNode=t,r.currentStaggerTime=o.currentTime-q+(o.startTime-r.currentTimeline.startTime)}}const Id={};class om{constructor(t,n,r,o,s,a,c,d){this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=s,this.errors=a,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Id,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=d||new Dd(this._driver,n,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const r=t;let o=this.options;null!=r.duration&&(o.duration=ns(r.duration)),null!=r.delay&&(o.delay=ns(r.delay));const s=r.params;if(s){let a=o.params;a||(a=this.options.params={}),Object.keys(s).forEach(c=>{(!n||!a.hasOwnProperty(c))&&(a[c]=bd(s[c],a,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const r=t.params={};Object.keys(n).forEach(o=>{r[o]=n[o]})}}return t}createSubContext(t=null,n,r){const o=n||this.element,s=new om(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Id,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,r){const o={duration:null!=n?n:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},s=new C6(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,o,t.stretchStartingKeyframe);return this.timelines.push(s),o}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,r,o,s,a){let c=[];if(o&&c.push(this.element),t.length>0){t=(t=t.replace(v6,"."+this._enterClassName)).replace(b6,"."+this._leaveClassName);let y=this._driver.query(this.element,t,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),c.push(...y)}return!s&&0==c.length&&a.push(`\`query("${n}")\` returned zero elements. (Use \`query("${n}", { optional: true })\` if you wish to allow this.)`),c}}class Dd{constructor(t,n,r,o){this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new Dd(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles[t]=n,this._globalTimelineStyles[t]=n,this._styleSummary[t]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(n=>{this._backFill[n]=this._globalTimelineStyles[n]||zr,this._currentKeyframe[n]=zr}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,r,o){n&&(this._previousKeyframe.easing=n);const s=o&&o.params||{},a=function(i,t){const n={};let r;return i.forEach(o=>{"*"===o?(r=r||Object.keys(t),r.forEach(s=>{n[s]=zr})):bo(o,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(a).forEach(c=>{const d=bd(a[c],s,r);this._pendingStyles[c]=d,this._localTimelineStyles.hasOwnProperty(c)||(this._backFill[c]=this._globalTimelineStyles.hasOwnProperty(c)?this._globalTimelineStyles[c]:zr),this._updateStyle(c,d)})}applyStylesToKeyframe(){const t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(r=>{this._currentKeyframe[r]=t[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const n=this._localTimelineStyles[t];this._pendingStyles[t]=n,this._updateStyle(t,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(n=>{const r=this._styleSummary[n],o=t._styleSummary[n];(!r||o.time>r.time)&&this._updateStyle(n,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((c,d)=>{const y=bo(c,!0);Object.keys(y).forEach(k=>{const q=y[k];"!"==q?t.add(k):q==zr&&n.add(k)}),r||(y.offset=d/this.duration),o.push(y)});const s=t.size?Sd(t.values()):[],a=n.size?Sd(n.values()):[];if(r){const c=o[0],d=Ta(c);c.offset=0,d.offset=1,o=[c,d]}return im(this.element,o,s,a,this.duration,this.startTime,this.easing,!1)}}class C6 extends Dd{constructor(t,n,r,o,s,a,c=!1){super(t,n,a.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=s,this._stretchStartingKeyframe=c,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],a=r+n,c=n/a,d=bo(t[0],!1);d.offset=0,s.push(d);const y=bo(t[0],!1);y.offset=lC(c),s.push(y);const k=t.length-1;for(let q=1;q<=k;q++){let J=bo(t[q],!1);J.offset=lC((n+J.offset*r)/a),s.push(J)}r=a,n=0,o="",t=s}return im(this.element,t,this.preStyleProps,this.postStyleProps,r,n,o,!0)}}function lC(i,t=3){const n=Math.pow(10,t-1);return Math.round(i*n)/n}class sm{}class w6 extends sm{normalizePropertyName(t,n){return Zg(t)}normalizeStyleValue(t,n,r,o){let s="";const a=r.toString().trim();if(A6[n]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const c=r.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&o.push(`Please provide a CSS unit value for ${t}:${r}`)}return a+s}}const A6=(()=>function(i){const t={};return i.forEach(n=>t[n]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function uC(i,t,n,r,o,s,a,c,d,y,k,q,J){return{type:0,element:i,triggerName:t,isRemovalTransition:o,fromState:n,fromStyles:s,toState:r,toStyles:a,timelines:c,queriedElements:d,preStyleProps:y,postStyleProps:k,totalTime:q,errors:J}}const am={};class dC{constructor(t,n,r){this._triggerName=t,this.ast=n,this._stateStyles=r}match(t,n,r,o){return function(i,t,n,r,o){return i.some(s=>s(t,n,r,o))}(this.ast.matchers,t,n,r,o)}buildStyles(t,n,r){const o=this._stateStyles["*"],s=this._stateStyles[t],a=o?o.buildStyles(n,r):{};return s?s.buildStyles(n,r):a}build(t,n,r,o,s,a,c,d,y,k){const q=[],J=this.ast.options&&this.ast.options.params||am,he=this.buildStyles(r,c&&c.params||am,q),we=d&&d.params||am,be=this.buildStyles(o,we,q),Pe=new Set,Me=new Map,je=new Map,$e="void"===o,mt={params:Object.assign(Object.assign({},J),we)},Gt=k?[]:rm(t,n,this.ast.animation,s,a,he,be,mt,y,q);let Kt=0;if(Gt.forEach(qn=>{Kt=Math.max(qn.duration+qn.delay,Kt)}),q.length)return uC(n,this._triggerName,r,o,$e,he,be,[],[],Me,je,Kt,q);Gt.forEach(qn=>{const zn=qn.element,Xr=Si(Me,zn,{});qn.preStyleProps.forEach(lr=>Xr[lr]=!0);const Zr=Si(je,zn,{});qn.postStyleProps.forEach(lr=>Zr[lr]=!0),zn!==n&&Pe.add(zn)});const si=Sd(Pe.values());return uC(n,this._triggerName,r,o,$e,he,be,Gt,si,Me,je,Kt)}}class D6{constructor(t,n,r){this.styles=t,this.defaultParams=n,this.normalizer=r}buildStyles(t,n){const r={},o=Ta(this.defaultParams);return Object.keys(t).forEach(s=>{const a=t[s];null!=a&&(o[s]=a)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const a=s;Object.keys(a).forEach(c=>{let d=a[c];d.length>1&&(d=bd(d,o,n));const y=this.normalizer.normalizePropertyName(c,n);d=this.normalizer.normalizeStyleValue(c,y,d,n),r[y]=d})}}),r}}class M6{constructor(t,n,r){this.name=t,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states={},n.states.forEach(o=>{this.states[o.name]=new D6(o.style,o.options&&o.options.params||{},r)}),fC(this.states,"true","1"),fC(this.states,"false","0"),n.transitions.forEach(o=>{this.transitionFactories.push(new dC(t,o,this.states))}),this.fallbackTransition=function(i,t,n){return new dC(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,c)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,r,o){return this.transitionFactories.find(a=>a.match(t,n,r,o))||null}matchStyles(t,n,r){return this.fallbackTransition.buildStyles(t,n,r)}}function fC(i,t,n){i.hasOwnProperty(t)?i.hasOwnProperty(n)||(i[n]=i[t]):i.hasOwnProperty(n)&&(i[t]=i[n])}const k6=new Rd;class P6{constructor(t,n,r){this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(t,n){const r=[],o=tm(this._driver,n,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[t]=o}_buildPlayer(t,n,r){const o=t.element,s=qS(0,this._normalizer,0,t.keyframes,n,r);return this._driver.animate(o,s,t.duration,t.delay,t.easing,[],!0)}create(t,n,r={}){const o=[],s=this._animations[t];let a;const c=new Map;if(s?(a=rm(this._driver,n,s,Yg,_d,{},{},r,k6,o),a.forEach(k=>{const q=Si(c,k.element,{});k.postStyleProps.forEach(J=>q[J]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),a=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);c.forEach((k,q)=>{Object.keys(k).forEach(J=>{k[J]=this._driver.computeStyle(q,J,zr)})});const y=Eo(a.map(k=>{const q=c.get(k.element);return this._buildPlayer(k,{},q)}));return this._playersById[t]=y,y.onDestroy(()=>this.destroy(t)),this.players.push(y),y}destroy(t){const n=this._getPlayer(t);n.destroy(),delete this._playersById[t];const r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(t){const n=this._playersById[t];if(!n)throw new Error(`Unable to find the timeline player referenced by ${t}`);return n}listen(t,n,r,o){const s=Bg(n,"","","");return jg(this._getPlayer(t),r,s,o),()=>{}}command(t,n,r,o){if("register"==r)return void this.register(t,o[0]);if("create"==r)return void this.create(t,n,o[0]||{});const s=this._getPlayer(t);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(t)}}}const hC="ng-animate-queued",pC="ng-animate-disabled",gC=".ng-animate-disabled",V6=[],mC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},j6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Bi="__ng_removed";class cm{constructor(t,n=""){this.namespaceId=n;const r=t&&t.hasOwnProperty("value");if(this.value=function(i){return null!=i?i:null}(r?t.value:t),r){const s=Ta(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const n=t.params;if(n){const r=this.options.params;Object.keys(n).forEach(o=>{null==r[o]&&(r[o]=n[o])})}}}const nl="void",lm=new cm(nl);class U6{constructor(t,n,r){this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Hi(n,this._hostClassName)}listen(t,n,r,o){if(!this._triggers.hasOwnProperty(n))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${n}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${n}" because the provided event is undefined!`);if(!function(i){return"start"==i||"done"==i}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${n}" is not supported!`);const s=Si(this._elementListeners,t,[]),a={name:n,phase:r,callback:o};s.push(a);const c=Si(this._engine.statesByElement,t,{});return c.hasOwnProperty(n)||(Hi(t,yd),Hi(t,yd+"-"+n),c[n]=lm),()=>{this._engine.afterFlush(()=>{const d=s.indexOf(a);d>=0&&s.splice(d,1),this._triggers[n]||delete c[n]})}}register(t,n){return!this._triggers[t]&&(this._triggers[t]=n,!0)}_getTrigger(t){const n=this._triggers[t];if(!n)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return n}trigger(t,n,r,o=!0){const s=this._getTrigger(n),a=new um(this.id,n,t);let c=this._engine.statesByElement.get(t);c||(Hi(t,yd),Hi(t,yd+"-"+n),this._engine.statesByElement.set(t,c={}));let d=c[n];const y=new cm(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&d&&y.absorbOptions(d.options),c[n]=y,d||(d=lm),y.value!==nl&&d.value===y.value){if(!function(i,t){const n=Object.keys(i),r=Object.keys(t);if(n.length!=r.length)return!1;for(let o=0;o<n.length;o++){const s=n[o];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(d.params,y.params)){const we=[],be=s.matchStyles(d.value,d.params,we),Pe=s.matchStyles(y.value,y.params,we);we.length?this._engine.reportError(we):this._engine.afterFlush(()=>{is(t,be),Ar(t,Pe)})}return}const J=Si(this._engine.playersByElement,t,[]);J.forEach(we=>{we.namespaceId==this.id&&we.triggerName==n&&we.queued&&we.destroy()});let ae=s.matchTransition(d.value,y.value,t,y.params),he=!1;if(!ae){if(!o)return;ae=s.fallbackTransition,he=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:ae,fromState:d,toState:y,player:a,isFallbackTransition:he}),he||(Hi(t,hC),a.onStart(()=>{wa(t,hC)})),a.onDone(()=>{let we=this.players.indexOf(a);we>=0&&this.players.splice(we,1);const be=this._engine.playersByElement.get(t);if(be){let Pe=be.indexOf(a);Pe>=0&&be.splice(Pe,1)}}),this.players.push(a),J.push(a),a}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((n,r)=>{delete n[t]}),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(o=>o.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const r=this._engine.driver.query(t,vd,!0);r.forEach(o=>{if(o[Bi])return;const s=this._engine.fetchNamespacesByElement(o);s.size?s.forEach(a=>a.triggerLeaveAnimation(o,n,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(t,n,r,o){const s=this._engine.statesByElement.get(t);if(s){const a=[];if(Object.keys(s).forEach(c=>{if(this._triggers[c]){const d=this.trigger(t,c,nl,o);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n),r&&Eo(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(n&&r){const o=new Set;n.forEach(s=>{const a=s.name;if(o.has(a))return;o.add(a);const d=this._triggers[a].fallbackTransition,y=r[a]||lm,k=new cm(nl),q=new um(this.id,a,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:a,transition:d,fromState:y,toState:k,player:q,isFallbackTransition:!0})})}}removeNode(t,n){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let o=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(t):[];if(s&&s.length)o=!0;else{let a=t;for(;a=a.parentNode;)if(r.statesByElement.get(a)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(t),o)r.markElementAsRemoved(this.id,t,!1,n);else{const s=t[Bi];(!s||s===mC)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,n))}}insertNode(t,n){Hi(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const s=r.element,a=this._elementListeners.get(s);a&&a.forEach(c=>{if(c.name==r.triggerName){const d=Bg(s,r.triggerName,r.fromState.value,r.toState.value);d._data=t,jg(r.player,c.phase,d,c.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):n.push(r)}),this._queue=[],n.sort((r,o)=>{const s=r.transition.ast.depCount,a=o.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let n=!1;return this._elementListeners.has(t)&&(n=!0),n=!!this._queue.find(r=>r.element===t)||n,n}}class B6{constructor(t,n,r){this.bodyNode=t,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,n){const r=new U6(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,n){const r=this._namespaceList.length-1;if(r>=0){let o=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,n)){this._namespaceList.splice(s+1,0,t),o=!0;break}o||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(n,t),t}register(t,n){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,n)),r}registerTrigger(t,n,r){let o=this._namespaceLookup[t];o&&o.register(n,r)&&this.totalAnimations++}destroy(t,n){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>r.destroy(n))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,r=this.statesByElement.get(t);if(r){const o=Object.keys(r);for(let s=0;s<o.length;s++){const a=r[o[s]].namespaceId;if(a){const c=this._fetchNamespace(a);c&&n.add(c)}}}return n}trigger(t,n,r,o){if(Od(n)){const s=this._fetchNamespace(t);if(s)return s.trigger(n,r,o),!0}return!1}insertNode(t,n,r,o){if(!Od(n))return;const s=n[Bi];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(n);a>=0&&this.collectedLeaveElements.splice(a,1)}if(t){const a=this._fetchNamespace(t);a&&a.insertNode(n,r)}o&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Hi(t,pC)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),wa(t,pC))}removeNode(t,n,r,o){if(Od(n)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(n,o):this.markElementAsRemoved(t,n,!1,o),r){const a=this.namespacesByHostElement.get(n);a&&a.id!==t&&a.removeNode(n,o)}}else this._onRemovalComplete(n,o)}markElementAsRemoved(t,n,r,o){this.collectedLeaveElements.push(n),n[Bi]={namespaceId:t,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1}}listen(t,n,r,o,s){return Od(n)?this._fetchNamespace(t).listen(n,r,o,s):()=>{}}_buildInstruction(t,n,r,o,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,o,t.fromState.options,t.toState.options,n,s)}destroyInnerAnimations(t){let n=this.driver.query(t,vd,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,Jg,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Eo(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[Bi];if(n&&n.setForRemoval){if(t[Bi]=mC,n.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,gC)&&this.markElementAsDisabled(t,!1),this.driver.query(t,gC,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Hi(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{n=this._flushAnimations(r,t)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],n.length?Eo(n).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,n){const r=new Rd,o=[],s=new Map,a=[],c=new Map,d=new Map,y=new Map,k=new Set;this.disabledNodes.forEach(Xe=>{k.add(Xe);const at=this.driver.query(Xe,".ng-animate-queued",!0);for(let bt=0;bt<at.length;bt++)k.add(at[bt])});const q=this.bodyNode,J=Array.from(this.statesByElement.keys()),ae=vC(J,this.collectedEnterElements),he=new Map;let we=0;ae.forEach((Xe,at)=>{const bt=Yg+we++;he.set(at,bt),Xe.forEach(jt=>Hi(jt,bt))});const be=[],Pe=new Set,Me=new Set;for(let Xe=0;Xe<this.collectedLeaveElements.length;Xe++){const at=this.collectedLeaveElements[Xe],bt=at[Bi];bt&&bt.setForRemoval&&(be.push(at),Pe.add(at),bt.hasAnimation?this.driver.query(at,".ng-star-inserted",!0).forEach(jt=>Pe.add(jt)):Me.add(at))}const je=new Map,$e=vC(J,Array.from(Pe));$e.forEach((Xe,at)=>{const bt=_d+we++;je.set(at,bt),Xe.forEach(jt=>Hi(jt,bt))}),t.push(()=>{ae.forEach((Xe,at)=>{const bt=he.get(at);Xe.forEach(jt=>wa(jt,bt))}),$e.forEach((Xe,at)=>{const bt=je.get(at);Xe.forEach(jt=>wa(jt,bt))}),be.forEach(Xe=>{this.processLeaveNode(Xe)})});const mt=[],Gt=[];for(let Xe=this._namespaceList.length-1;Xe>=0;Xe--)this._namespaceList[Xe].drainQueuedTransitions(n).forEach(bt=>{const jt=bt.player,Mn=bt.element;if(mt.push(jt),this.collectedEnterElements.length){const Nr=Mn[Bi];if(Nr&&Nr.setForMove)return void jt.destroy()}const Mr=!q||!this.driver.containsElement(q,Mn),wi=je.get(Mn),Oo=he.get(Mn),un=this._buildInstruction(bt,r,Oo,wi,Mr);if(un.errors&&un.errors.length)Gt.push(un);else{if(Mr)return jt.onStart(()=>is(Mn,un.fromStyles)),jt.onDestroy(()=>Ar(Mn,un.toStyles)),void o.push(jt);if(bt.isFallbackTransition)return jt.onStart(()=>is(Mn,un.fromStyles)),jt.onDestroy(()=>Ar(Mn,un.toStyles)),void o.push(jt);un.timelines.forEach(Nr=>Nr.stretchStartingKeyframe=!0),r.append(Mn,un.timelines),a.push({instruction:un,player:jt,element:Mn}),un.queriedElements.forEach(Nr=>Si(c,Nr,[]).push(jt)),un.preStyleProps.forEach((Nr,Dl)=>{const Cf=Object.keys(Nr);if(Cf.length){let vs=d.get(Dl);vs||d.set(Dl,vs=new Set),Cf.forEach(w_=>vs.add(w_))}}),un.postStyleProps.forEach((Nr,Dl)=>{const Cf=Object.keys(Nr);let vs=y.get(Dl);vs||y.set(Dl,vs=new Set),Cf.forEach(w_=>vs.add(w_))})}});if(Gt.length){const Xe=[];Gt.forEach(at=>{Xe.push(`@${at.triggerName} has failed due to:\n`),at.errors.forEach(bt=>Xe.push(`- ${bt}\n`))}),mt.forEach(at=>at.destroy()),this.reportError(Xe)}const Kt=new Map,si=new Map;a.forEach(Xe=>{const at=Xe.element;r.has(at)&&(si.set(at,at),this._beforeAnimationBuild(Xe.player.namespaceId,Xe.instruction,Kt))}),o.forEach(Xe=>{const at=Xe.element;this._getPreviousPlayers(at,!1,Xe.namespaceId,Xe.triggerName,null).forEach(jt=>{Si(Kt,at,[]).push(jt),jt.destroy()})});const qn=be.filter(Xe=>bC(Xe,d,y)),zn=new Map;yC(zn,this.driver,Me,y,zr).forEach(Xe=>{bC(Xe,d,y)&&qn.push(Xe)});const Zr=new Map;ae.forEach((Xe,at)=>{yC(Zr,this.driver,new Set(Xe),d,"!")}),qn.forEach(Xe=>{const at=zn.get(Xe),bt=Zr.get(Xe);zn.set(Xe,Object.assign(Object.assign({},at),bt))});const lr=[],Ua=[],Ba={};a.forEach(Xe=>{const{element:at,player:bt,instruction:jt}=Xe;if(r.has(at)){if(k.has(at))return bt.onDestroy(()=>Ar(at,jt.toStyles)),bt.disabled=!0,bt.overrideTotalTime(jt.totalTime),void o.push(bt);let Mn=Ba;if(si.size>1){let wi=at;const Oo=[];for(;wi=wi.parentNode;){const un=si.get(wi);if(un){Mn=un;break}Oo.push(wi)}Oo.forEach(un=>si.set(un,Mn))}const Mr=this._buildAnimation(bt.namespaceId,jt,Kt,s,Zr,zn);if(bt.setRealPlayer(Mr),Mn===Ba)lr.push(bt);else{const wi=this.playersByElement.get(Mn);wi&&wi.length&&(bt.parentPlayer=Eo(wi)),o.push(bt)}}else is(at,jt.fromStyles),bt.onDestroy(()=>Ar(at,jt.toStyles)),Ua.push(bt),k.has(at)&&o.push(bt)}),Ua.forEach(Xe=>{const at=s.get(Xe.element);if(at&&at.length){const bt=Eo(at);Xe.setRealPlayer(bt)}}),o.forEach(Xe=>{Xe.parentPlayer?Xe.syncPlayerEvents(Xe.parentPlayer):Xe.destroy()});for(let Xe=0;Xe<be.length;Xe++){const at=be[Xe],bt=at[Bi];if(wa(at,_d),bt&&bt.hasAnimation)continue;let jt=[];if(c.size){let Mr=c.get(at);Mr&&Mr.length&&jt.push(...Mr);let wi=this.driver.query(at,Jg,!0);for(let Oo=0;Oo<wi.length;Oo++){let un=c.get(wi[Oo]);un&&un.length&&jt.push(...un)}}const Mn=jt.filter(Mr=>!Mr.destroyed);Mn.length?q6(this,at,Mn):this.processLeaveNode(at)}return be.length=0,lr.forEach(Xe=>{this.players.push(Xe),Xe.onDone(()=>{Xe.destroy();const at=this.players.indexOf(Xe);this.players.splice(at,1)}),Xe.play()}),lr}elementContainsData(t,n){let r=!1;const o=n[Bi];return o&&o.setForRemoval&&(r=!0),this.playersByElement.has(n)&&(r=!0),this.playersByQueriedElement.has(n)&&(r=!0),this.statesByElement.has(n)&&(r=!0),this._fetchNamespace(t).elementContainsData(n)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,r,o,s){let a=[];if(n){const c=this.playersByQueriedElement.get(t);c&&(a=c)}else{const c=this.playersByElement.get(t);if(c){const d=!s||s==nl;c.forEach(y=>{y.queued||!d&&y.triggerName!=o||a.push(y)})}}return(r||o)&&(a=a.filter(c=>!(r&&r!=c.namespaceId||o&&o!=c.triggerName))),a}_beforeAnimationBuild(t,n,r){const s=n.element,a=n.isRemovalTransition?void 0:t,c=n.isRemovalTransition?void 0:n.triggerName;for(const d of n.timelines){const y=d.element,k=y!==s,q=Si(r,y,[]);this._getPreviousPlayers(y,k,a,c,n.toState).forEach(ae=>{const he=ae.getRealPlayer();he.beforeDestroy&&he.beforeDestroy(),ae.destroy(),q.push(ae)})}is(s,n.fromStyles)}_buildAnimation(t,n,r,o,s,a){const c=n.triggerName,d=n.element,y=[],k=new Set,q=new Set,J=n.timelines.map(he=>{const we=he.element;k.add(we);const be=we[Bi];if(be&&be.removedBeforeQueried)return new Ca(he.duration,he.delay);const Pe=we!==d,Me=function(i){const t=[];return EC(i,t),t}((r.get(we)||V6).map(Kt=>Kt.getRealPlayer())).filter(Kt=>!!Kt.element&&Kt.element===we),je=s.get(we),$e=a.get(we),mt=qS(0,this._normalizer,0,he.keyframes,je,$e),Gt=this._buildPlayer(he,mt,Me);if(he.subTimeline&&o&&q.add(we),Pe){const Kt=new um(t,c,we);Kt.setRealPlayer(Gt),y.push(Kt)}return Gt});y.forEach(he=>{Si(this.playersByQueriedElement,he.element,[]).push(he),he.onDone(()=>function(i,t,n){let r;if(i instanceof Map){if(r=i.get(t),r){if(r.length){const o=r.indexOf(n);r.splice(o,1)}0==r.length&&i.delete(t)}}else if(r=i[t],r){if(r.length){const o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete i[t]}return r}(this.playersByQueriedElement,he.element,he))}),k.forEach(he=>Hi(he,ZS));const ae=Eo(J);return ae.onDestroy(()=>{k.forEach(he=>wa(he,ZS)),Ar(d,n.toStyles)}),q.forEach(he=>{Si(o,he,[]).push(ae)}),ae}_buildPlayer(t,n,r){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,r):new Ca(t.duration,t.delay)}}class um{constructor(t,n,r){this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new Ca,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(r=>jg(t,n,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){Si(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function Od(i){return i&&1===i.nodeType}function _C(i,t){const n=i.style.display;return i.style.display=null!=t?t:"none",n}function yC(i,t,n,r,o){const s=[];n.forEach(d=>s.push(_C(d)));const a=[];r.forEach((d,y)=>{const k={};d.forEach(q=>{const J=k[q]=t.computeStyle(y,q,o);(!J||0==J.length)&&(y[Bi]=j6,a.push(y))}),i.set(y,k)});let c=0;return n.forEach(d=>_C(d,s[c++])),a}function vC(i,t){const n=new Map;if(i.forEach(c=>n.set(c,[])),0==t.length)return n;const o=new Set(t),s=new Map;function a(c){if(!c)return 1;let d=s.get(c);if(d)return d;const y=c.parentNode;return d=n.has(y)?y:o.has(y)?1:a(y),s.set(c,d),d}return t.forEach(c=>{const d=a(c);1!==d&&n.get(d).push(c)}),n}const Md="$$classes";function Hi(i,t){if(i.classList)i.classList.add(t);else{let n=i[Md];n||(n=i[Md]={}),n[t]=!0}}function wa(i,t){if(i.classList)i.classList.remove(t);else{let n=i[Md];n&&delete n[t]}}function q6(i,t,n){Eo(n).onDone(()=>i.processLeaveNode(t))}function EC(i,t){for(let n=0;n<i.length;n++){const r=i[n];r instanceof WS?EC(r.players,t):t.push(r)}}function bC(i,t,n){const r=n.get(i);if(!r)return!1;let o=t.get(i);return o?r.forEach(s=>o.add(s)):t.set(i,r),n.delete(i),!0}class Nd{constructor(t,n,r){this.bodyNode=t,this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new B6(t,n,r),this._timelineEngine=new P6(t,n,r),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(t,n,r,o,s){const a=t+"-"+o;let c=this._triggerCache[a];if(!c){const d=[],y=tm(this._driver,s,d);if(d.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${d.join("\n - ")}`);c=function(i,t,n){return new M6(i,t,n)}(o,y,this._normalizer),this._triggerCache[a]=c}this._transitionEngine.registerTrigger(n,o,c)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,r,o){this._transitionEngine.insertNode(t,n,r,o)}onRemove(t,n,r,o){this._transitionEngine.removeNode(t,n,o||!1,r)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,r,o){if("@"==r.charAt(0)){const[s,a]=zS(r);this._timelineEngine.command(s,n,a,o)}else this._transitionEngine.trigger(t,n,r,o)}listen(t,n,r,o,s){if("@"==r.charAt(0)){const[a,c]=zS(r);return this._timelineEngine.listen(a,n,c,s)}return this._transitionEngine.listen(t,n,r,o,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function SC(i,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=dm(t[0]),t.length>1&&(r=dm(t[t.length-1]))):t&&(n=dm(t)),n||r?new K6(i,n,r):null}let K6=(()=>{class i{constructor(n,r,o){this._element=n,this._startStyles=r,this._endStyles=o,this._state=0;let s=i.initialStylesByElement.get(n);s||i.initialStylesByElement.set(n,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ar(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ar(this._element,this._initialStyles),this._endStyles&&(Ar(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(is(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(is(this._element,this._endStyles),this._endStyles=null),Ar(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function dm(i){let t=null;const n=Object.keys(i);for(let r=0;r<n.length;r++){const o=n[r];Y6(o)&&(t=t||{},t[o]=i[o])}return t}function Y6(i){return"display"===i||"position"===i}const CC="animation",TC="animationend";class X6{constructor(t,n,r,o,s,a,c){this._element=t,this._name=n,this._duration=r,this._delay=o,this._easing=s,this._fillMode=a,this._onDoneFn=c,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=d=>this._handleCallback(d)}apply(){(function(i,t){const n=hm(i,"").trim();let r=0;n.length&&(function(i,t){let n=0;for(let r=0;r<i.length;r++)","===i.charAt(r)&&n++;return n}(n)+1,t=`${n}, ${t}`),kd(i,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),RC(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){wC(this._element,this._name,"paused")}resume(){wC(this._element,this._name,"running")}setPosition(t){const n=AC(this._element,this._name);this._position=t*this._duration,kd(this._element,"Delay",`-${this._position}ms`,n)}getPosition(){return this._position}_handleCallback(t){const n=t._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(n-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),RC(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(i,t){const r=hm(i,"").split(","),o=fm(r,t);o>=0&&(r.splice(o,1),kd(i,"",r.join(",")))}(this._element,this._name))}}function wC(i,t,n){kd(i,"PlayState",n,AC(i,t))}function AC(i,t){const n=hm(i,"");return n.indexOf(",")>0?fm(n.split(","),t):fm([n],t)}function fm(i,t){for(let n=0;n<i.length;n++)if(i[n].indexOf(t)>=0)return n;return-1}function RC(i,t,n){n?i.removeEventListener(TC,t):i.addEventListener(TC,t)}function kd(i,t,n,r){const o=CC+t;if(null!=r){const s=i.style[o];if(s.length){const a=s.split(",");a[r]=n,n=a.join(",")}}i.style[o]=n}function hm(i,t){return i.style[CC+t]||""}class IC{constructor(t,n,r,o,s,a,c,d){this.element=t,this.keyframes=n,this.animationName=r,this._duration=o,this._delay=s,this._finalStyles=c,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=a||"linear",this.totalTime=o+s,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new X6(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const n=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(t[r]=n?this._finalStyles[r]:em(this.element,r))})}this.currentSnapshot=t}}class rF extends Ca{constructor(t,n){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=JS(n)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const n=this._startingStyles[t];n?this.element.style.setProperty(t,n):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class OC{constructor(){this._count=0}validateStyleProperty(t){return Gg(t)}matchesElement(t,n){return qg(t,n)}containsElement(t,n){return zg(t,n)}query(t,n,r){return $g(t,n,r)}computeStyle(t,n,r){return window.getComputedStyle(t)[n]}buildKeyframeElement(t,n,r){r=r.map(c=>JS(c));let o=`@keyframes ${n} {\n`,s="";r.forEach(c=>{s=" ";const d=parseFloat(c.offset);o+=`${s}${100*d}% {\n`,s+=" ",Object.keys(c).forEach(y=>{const k=c[y];switch(y){case"offset":return;case"easing":return void(k&&(o+=`${s}animation-timing-function: ${k};\n`));default:return void(o+=`${s}${y}: ${k};\n`)}}),o+=`${s}}\n`}),o+="}\n";const a=document.createElement("style");return a.textContent=o,a}animate(t,n,r,o,s,a=[],c){const d=a.filter(be=>be instanceof IC),y={};rC(r,o)&&d.forEach(be=>{let Pe=be.currentSnapshot;Object.keys(Pe).forEach(Me=>y[Me]=Pe[Me])});const k=function(i){let t={};return i&&(Array.isArray(i)?i:[i]).forEach(r=>{Object.keys(r).forEach(o=>{"offset"==o||"easing"==o||(t[o]=r[o])})}),t}(n=oC(t,n,y));if(0==r)return new rF(t,k);const q="gen_css_kf_"+this._count++,J=this.buildKeyframeElement(t,q,n);(function(i){var t;const n=null===(t=i.getRootNode)||void 0===t?void 0:t.call(i);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(J);const he=SC(t,n),we=new IC(t,n,q,r,o,s,k,he);return we.onDestroy(()=>function(i){i.parentNode.removeChild(i)}(J)),we}}class NC{constructor(t,n,r,o){this.element=t,this.keyframes=n,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,n,r){return t.animate(n,r)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(n=>{"offset"!=n&&(t[n]=this._finished?this._finalKeyframe[n]:em(this.element,n))}),this.currentSnapshot=t}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class lF{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(kC().toString()),this._cssKeyframesDriver=new OC}validateStyleProperty(t){return Gg(t)}matchesElement(t,n){return qg(t,n)}containsElement(t,n){return zg(t,n)}query(t,n,r){return $g(t,n,r)}computeStyle(t,n,r){return window.getComputedStyle(t)[n]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,n,r,o,s,a=[],c){if(!c&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,n,r,o,s,a);const k={duration:r,delay:o,fill:0==o?"both":"forwards"};s&&(k.easing=s);const q={},J=a.filter(he=>he instanceof NC);rC(r,o)&&J.forEach(he=>{let we=he.currentSnapshot;Object.keys(we).forEach(be=>q[be]=we[be])});const ae=SC(t,n=oC(t,n=n.map(he=>bo(he,!1)),q));return new NC(t,n,k,ae)}}function kC(){return GS()&&Element.prototype.animate||{}}let dF=(()=>{class i extends US{constructor(n,r){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(r.body,{id:"0",encapsulation:_n.None,styles:[],data:{animation:[]}})}build(n){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(n)?BS(n):n;return PC(this._renderer,null,r,"register",[o]),new fF(r,this._renderer)}}return i.\u0275fac=function(n){return new(n||i)(Ae(Ko),Ae(tt))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();class fF extends class{}{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new hF(this._id,t,n||{},this._renderer)}}class hF{constructor(t,n,r,o){this.id=t,this.element=n,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return PC(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,n;return null!==(n=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==n?n:0}}function PC(i,t,n,r,o){return i.setProperty(t,`@@${n}:${r}`,o)}const xC="@.disabled";let pF=(()=>{class i{constructor(n,r,o){this.delegate=n,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,a)=>{a&&a.parentNode(s)&&a.removeChild(s.parentNode,s)}}createRenderer(n,r){const s=this.delegate.createRenderer(n,r);if(!(n&&r&&r.data&&r.data.animation)){let k=this._rendererCache.get(s);return k||(k=new LC("",s,this.engine),this._rendererCache.set(s,k)),k}const a=r.id,c=r.id+"-"+this._currentId;this._currentId++,this.engine.register(c,n);const d=k=>{Array.isArray(k)?k.forEach(d):this.engine.registerTrigger(a,c,n,k.name,k)};return r.data.animation.forEach(d),new gF(this,c,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,r,o){n>=0&&n<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,c]=s;a(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(n){return new(n||i)(Ae(Ko),Ae(Nd),Ae(ut))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();class LC{constructor(t,n,r){this.namespaceId=t,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?o=>n.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,r,o=!0){this.delegate.insertBefore(t,n,r),this.engine.onInsert(this.namespaceId,n,t,o)}removeChild(t,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate,r)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,r,o){this.delegate.setAttribute(t,n,r,o)}removeAttribute(t,n,r){this.delegate.removeAttribute(t,n,r)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,r,o){this.delegate.setStyle(t,n,r,o)}removeStyle(t,n,r){this.delegate.removeStyle(t,n,r)}setProperty(t,n,r){"@"==n.charAt(0)&&n==xC?this.disableAnimations(t,!!r):this.delegate.setProperty(t,n,r)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,r){return this.delegate.listen(t,n,r)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class gF extends LC{constructor(t,n,r,o){super(n,r,o),this.factory=t,this.namespaceId=n}setProperty(t,n,r){"@"==n.charAt(0)?"."==n.charAt(1)&&n==xC?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,n.substr(1),r):this.delegate.setProperty(t,n,r)}listen(t,n,r){if("@"==n.charAt(0)){const o=function(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=n.substr(1),a="";return"@"!=s.charAt(0)&&([s,a]=function(i){const t=i.indexOf(".");return[i.substring(0,t),i.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{this.factory.scheduleListenerCallback(c._data||-1,r,c)})}return this.delegate.listen(t,n,r)}}let yF=(()=>{class i extends Nd{constructor(n,r,o){super(n.body,r,o)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt),Ae(Kg),Ae(sm))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();const So=new et("AnimationModuleType"),FC=[{provide:US,useClass:dF},{provide:sm,useFactory:function(){return new w6}},{provide:Nd,useClass:yF},{provide:Ko,useFactory:function(i,t,n){return new pF(i,t,n)},deps:[md,Nd,ut]}],VC=[{provide:Kg,useFactory:function(){return"function"==typeof kC()?new lF:new OC}},{provide:So,useValue:"BrowserAnimations"},...FC],jC=[{provide:Kg,useClass:QS},{provide:So,useValue:"NoopAnimations"},...FC];let SF=(()=>{class i{static withConfig(n){return{ngModule:i,providers:n.disableAnimations?jC:VC}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({providers:VC,imports:[kg]}),i})();function gt(...i){let t=i[i.length-1];return p(t)?(i.pop(),De(i,t)):ye(i)}class fi extends l{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return n&&!n.closed&&t.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new u;return this._value}next(t){super.next(this._value=t)}}class CF extends E{notifyNext(t,n,r,o,s){this.destination.next(n)}notifyError(t,n){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class TF extends E{constructor(t,n,r){super(),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function wF(i,t,n,r,o=new TF(i,n,r)){if(!o.closed)return t instanceof te?t.subscribe(o):Ce(t)(o)}const UC={};function BC(...i){let t,n;return p(i[i.length-1])&&(n=i.pop()),"function"==typeof i[i.length-1]&&(t=i.pop()),1===i.length&&_(i[0])&&(i=i[0]),ye(i,n).lift(new AF(t))}class AF{constructor(t){this.resultSelector=t}call(t,n){return n.subscribe(new RF(t,this.resultSelector))}}class RF extends CF{constructor(t,n){super(t),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(UC),this.observables.push(t)}_complete(){const t=this.observables,n=t.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let r=0;r<n;r++)this.add(wF(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,n,r){const o=this.values,a=this.toRespond?o[r]===UC?--this.toRespond:this.toRespond:0;o[r]=n,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let n;try{n=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const xd=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})();function Ld(...i){return me(1)(gt(...i))}const os=new te(i=>i.complete());function Fd(i){return i?function(i){return new te(t=>i.schedule(()=>t.complete()))}(i):os}function HC(i){return new te(t=>{let n;try{n=i()}catch(o){return void t.error(o)}return(n?F(n):Fd()).subscribe(t)})}function $r(i,t){return"function"==typeof t?n=>n.pipe($r((r,o)=>F(i(r,o)).pipe(S((s,a)=>t(r,s,o,a))))):n=>n.lift(new OF(i))}class OF{constructor(t){this.project=t}call(t,n){return n.subscribe(new MF(t,this.project))}}class MF extends Ge{constructor(t,n){super(t),this.project=n,this.index=0}_next(t){let n;const r=this.index++;try{n=this.project(t,r)}catch(o){return void this.destination.error(o)}this._innerSub(n)}_innerSub(t){const n=this.innerSubscription;n&&n.unsubscribe();const r=new Ne(this),o=this.destination;o.add(r),this.innerSubscription=Je(t,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const WC=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();function ni(i){return t=>0===i?Fd():t.lift(new NF(i))}class NF{constructor(t){if(this.total=t,this.total<0)throw new WC}call(t,n){return n.subscribe(new kF(t,this.total))}}class kF extends E{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){const n=this.total,r=++this.count;r<=n&&(this.destination.next(t),r===n&&(this.destination.complete(),this.unsubscribe()))}}function ss(...i){const t=i[i.length-1];return p(t)?(i.pop(),n=>Ld(i,n,t)):n=>Ld(i,n)}function GC(i,t){let n=!1;return arguments.length>=2&&(n=!0),function(o){return o.lift(new PF(i,t,n))}}class PF{constructor(t,n,r=!1){this.accumulator=t,this.seed=n,this.hasSeed=r}call(t,n){return n.subscribe(new xF(t,this.accumulator,this.seed,this.hasSeed))}}class xF extends E{constructor(t,n,r,o){super(t),this.accumulator=n,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const n=this.index++;let r;try{r=this.accumulator(this.seed,t,n)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function as(i,t){return function(r){return r.lift(new LF(i,t))}}class LF{constructor(t,n){this.predicate=t,this.thisArg=n}call(t,n){return n.subscribe(new FF(t,this.predicate,this.thisArg))}}class FF extends E{constructor(t,n,r){super(t),this.predicate=n,this.thisArg=r,this.count=0}_next(t){let n;try{n=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}n&&this.destination.next(t)}}function cs(i){return function(n){const r=new VF(i),o=n.lift(r);return r.caught=o}}class VF{constructor(t){this.selector=t}call(t,n){return n.subscribe(new jF(t,this.selector,this.caught))}}class jF extends Ge{constructor(t,n,r){super(t),this.selector=n,this.caught=r}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const r=new Ne(this);this.add(r);const o=Je(n,r);o!==r&&this.add(o)}}}function il(i,t){return ce(i,t,1)}function pm(i){return function(n){return 0===i?Fd():n.lift(new UF(i))}}class UF{constructor(t){if(this.total=t,this.total<0)throw new WC}call(t,n){return n.subscribe(new BF(t,this.total))}}class BF extends E{constructor(t,n){super(t),this.total=n,this.ring=new Array,this.count=0}_next(t){const n=this.ring,r=this.total,o=this.count++;n.length<r?n.push(t):n[o%r]=t}_complete(){const t=this.destination;let n=this.count;if(n>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let s=0;s<r;s++){const a=n++%r;t.next(o[a])}}t.complete()}}function qC(i=GF){return t=>t.lift(new HF(i))}class HF{constructor(t){this.errorFactory=t}call(t,n){return n.subscribe(new WF(t,this.errorFactory))}}class WF extends E{constructor(t,n){super(t),this.errorFactory=n,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)}}}function GF(){return new xd}function zC(i=null){return t=>t.lift(new qF(i))}class qF{constructor(t){this.defaultValue=t}call(t,n){return n.subscribe(new zF(t,this.defaultValue))}}class zF extends E{constructor(t,n){super(t),this.defaultValue=n,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Aa(i,t){const n=arguments.length>=2;return r=>r.pipe(i?as((o,s)=>i(o,s,r)):Y,ni(1),n?zC(t):qC(()=>new xd))}function Co(){}function Ti(i,t,n){return function(o){return o.lift(new KF(i,t,n))}}class KF{constructor(t,n,r){this.nextOrObserver=t,this.error=n,this.complete=r}call(t,n){return n.subscribe(new YF(t,this.nextOrObserver,this.error,this.complete))}}class YF extends E{constructor(t,n,r,o){super(t),this._tapNext=Co,this._tapError=Co,this._tapComplete=Co,this._tapError=r||Co,this._tapComplete=o||Co,D(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||Co,this._tapError=n.error||Co,this._tapComplete=n.complete||Co)}_next(t){try{this._tapNext.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class QF{constructor(t){this.callback=t}call(t,n){return n.subscribe(new XF(t,this.callback))}}class XF extends E{constructor(t,n){super(t),this.add(new v(n))}}class Kr{constructor(t,n){this.id=t,this.url=n}}class gm extends Kr{constructor(t,n,r="imperative",o=null){super(t,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rl extends Kr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $C extends Kr{constructor(t,n,r){super(t,n),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ZF extends Kr{constructor(t,n,r){super(t,n),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class e8 extends Kr{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t8 extends Kr{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n8 extends Kr{constructor(t,n,r,o,s){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class i8 extends Kr{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r8 extends Kr{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KC{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YC{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class o8{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s8{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class a8{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class c8{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JC{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nt="primary";class l8{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Ra(i){return new l8(i)}const QC="ngNavigationCancelingError";function mm(i){const t=Error("NavigationCancelingError: "+i);return t[QC]=!0,t}function d8(i,t,n){const r=n.path.split("/");if(r.length>i.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<i.length))return null;const o={};for(let s=0;s<r.length;s++){const a=r[s],c=i[s];if(a.startsWith(":"))o[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:i.slice(0,r.length),posParams:o}}function Rr(i,t){const n=i?Object.keys(i):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let s=0;s<n.length;s++)if(o=n[s],!XC(i[o],t[o]))return!1;return!0}function XC(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const n=[...i].sort(),r=[...t].sort();return n.every((o,s)=>r[s]===o)}return i===t}function ZC(i){return Array.prototype.concat.apply([],i)}function e2(i){return i.length>0?i[i.length-1]:null}function Pn(i,t){for(const n in i)i.hasOwnProperty(n)&&t(i[n],n)}function Ir(i){return Cu(i)?i:yc(i)?F(Promise.resolve(i)):gt(i)}const p8={exact:function r2(i,t,n){if(!us(i.segments,t.segments)||!Vd(i.segments,t.segments,n)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!i.children[r]||!r2(i.children[r],t.children[r],n))return!1;return!0},subset:o2},t2={exact:function(i,t){return Rr(i,t)},subset:function(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(n=>XC(i[n],t[n]))},ignored:()=>!0};function n2(i,t,n){return p8[n.paths](i.root,t.root,n.matrixParams)&&t2[n.queryParams](i.queryParams,t.queryParams)&&!("exact"===n.fragment&&i.fragment!==t.fragment)}function o2(i,t,n){return s2(i,t,t.segments,n)}function s2(i,t,n,r){if(i.segments.length>n.length){const o=i.segments.slice(0,n.length);return!(!us(o,n)||t.hasChildren()||!Vd(o,n,r))}if(i.segments.length===n.length){if(!us(i.segments,n)||!Vd(i.segments,n,r))return!1;for(const o in t.children)if(!i.children[o]||!o2(i.children[o],t.children[o],r))return!1;return!0}{const o=n.slice(0,i.segments.length),s=n.slice(i.segments.length);return!!(us(i.segments,o)&&Vd(i.segments,o,r)&&i.children[Nt])&&s2(i.children[Nt],t,s,r)}}function Vd(i,t,n){return t.every((r,o)=>t2[n](i[o].parameters,r.parameters))}class ls{constructor(t,n,r){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ra(this.queryParams)),this._queryParamMap}toString(){return v8.serialize(this)}}class xt{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Pn(n,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jd(this)}}class ol{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Ra(this.parameters)),this._parameterMap}toString(){return u2(this)}}function us(i,t){return i.length===t.length&&i.every((n,r)=>n.path===t[r].path)}class _m{}class a2{parse(t){const n=new I8(t);return new ls(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){return`${`/${sl(t.root,!0)}`}${function(i){const t=Object.keys(i).map(n=>{const r=i[n];return Array.isArray(r)?r.map(o=>`${Ud(n)}=${Ud(o)}`).join("&"):`${Ud(n)}=${Ud(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(i){return encodeURI(i)}(t.fragment)}`:""}`}}const v8=new a2;function jd(i){return i.segments.map(t=>u2(t)).join("/")}function sl(i,t){if(!i.hasChildren())return jd(i);if(t){const n=i.children[Nt]?sl(i.children[Nt],!1):"",r=[];return Pn(i.children,(o,s)=>{s!==Nt&&r.push(`${s}:${sl(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function(i,t){let n=[];return Pn(i.children,(r,o)=>{o===Nt&&(n=n.concat(t(r,o)))}),Pn(i.children,(r,o)=>{o!==Nt&&(n=n.concat(t(r,o)))}),n}(i,(r,o)=>o===Nt?[sl(i.children[Nt],!1)]:[`${o}:${sl(r,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Nt]?`${jd(i)}/${n[0]}`:`${jd(i)}/(${n.join("//")})`}}function c2(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ud(i){return c2(i).replace(/%3B/gi,";")}function ym(i){return c2(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bd(i){return decodeURIComponent(i)}function l2(i){return Bd(i.replace(/\+/g,"%20"))}function u2(i){return`${ym(i.path)}${function(i){return Object.keys(i).map(t=>`;${ym(t)}=${ym(i[t])}`).join("")}(i.parameters)}`}const C8=/^[^\/()?;=#]+/;function Hd(i){const t=i.match(C8);return t?t[0]:""}const T8=/^[^=?&#]+/,A8=/^[^?&#]+/;class I8{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Nt]=new xt(t,n)),r}parseSegment(){const t=Hd(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ol(Bd(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Hd(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=Hd(this.remaining);o&&(r=o,this.capture(r))}t[Bd(n)]=Bd(r)}parseQueryParam(t){const n=function(i){const t=i.match(T8);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const a=function(i){const t=i.match(A8);return t?t[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const o=l2(n),s=l2(r);if(t.hasOwnProperty(o)){let a=t[o];Array.isArray(a)||(a=[a],t[o]=a),a.push(s)}else t[o]=s}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Hd(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Nt);const a=this.parseChildren();n[s]=1===Object.keys(a).length?a[Nt]:new xt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class d2{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=vm(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=vm(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Em(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Em(t,this._root).map(n=>n.value)}}function vm(i,t){if(i===t.value)return t;for(const n of t.children){const r=vm(i,n);if(r)return r}return null}function Em(i,t){if(i===t.value)return[t];for(const n of t.children){const r=Em(i,n);if(r.length)return r.unshift(t),r}return[]}class Yr{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function al(i){const t={};return i&&i.children.forEach(n=>t[n.value.outlet]=n),t}class f2 extends d2{constructor(t,n){super(t),this.snapshot=n,bm(this,t)}toString(){return this.snapshot.toString()}}function h2(i,t){const n=function(i,t){const a=new Wd([],{},{},"",{},Nt,t,null,i.root,-1,{});return new g2("",new Yr(a,[]))}(i,t),r=new fi([new ol("",{})]),o=new fi({}),s=new fi({}),a=new fi({}),c=new fi(""),d=new ds(r,o,a,c,s,Nt,t,n.root);return d.snapshot=n.root,new f2(new Yr(d,[]),n)}class ds{constructor(t,n,r,o,s,a,c,d){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=s,this.outlet=a,this.component=c,this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(S(t=>Ra(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(S(t=>Ra(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function p2(i,t="emptyOnly"){const n=i.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const o=n[r],s=n[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(s.component)break;r--}}return function(i){return i.reduce((t,n)=>({params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign({},t.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Wd{constructor(t,n,r,o,s,a,c,d,y,k,q){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=s,this.outlet=a,this.component=c,this.routeConfig=d,this._urlSegment=y,this._lastPathIndex=k,this._resolve=q}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ra(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ra(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class g2 extends d2{constructor(t,n){super(n),this.url=t,bm(this,n)}toString(){return m2(this._root)}}function bm(i,t){t.value._routerState=i,t.children.forEach(n=>bm(i,n))}function m2(i){const t=i.children.length>0?` { ${i.children.map(m2).join(", ")} } `:"";return`${i.value}${t}`}function Sm(i){if(i.snapshot){const t=i.snapshot,n=i._futureSnapshot;i.snapshot=n,Rr(t.queryParams,n.queryParams)||i.queryParams.next(n.queryParams),t.fragment!==n.fragment&&i.fragment.next(n.fragment),Rr(t.params,n.params)||i.params.next(n.params),function(i,t){if(i.length!==t.length)return!1;for(let n=0;n<i.length;++n)if(!Rr(i[n],t[n]))return!1;return!0}(t.url,n.url)||i.url.next(n.url),Rr(t.data,n.data)||i.data.next(n.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Cm(i,t){return Rr(i.params,t.params)&&function(i,t){return us(i,t)&&i.every((n,r)=>Rr(n.parameters,t[r].parameters))}(i.url,t.url)&&!(!i.parent!=!t.parent)&&(!i.parent||Cm(i.parent,t.parent))}function Gd(i,t,n){if(n&&i.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const o=function(i,t,n){return t.children.map(r=>{for(const o of n.children)if(i.shouldReuseRoute(r.value,o.value.snapshot))return Gd(i,r,o);return Gd(i,r)})}(i,t,n);return new Yr(r,o)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const a=s.route;return _2(t,a),a}}const r=function(i){return new ds(new fi(i.url),new fi(i.params),new fi(i.queryParams),new fi(i.fragment),new fi(i.data),i.outlet,i.component,i)}(t.value),o=t.children.map(s=>Gd(i,s));return new Yr(r,o)}}function _2(i,t){if(i.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=i.value;for(let n=0;n<i.children.length;++n)_2(i.children[n],t.children[n])}function qd(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function cl(i){return"object"==typeof i&&null!=i&&i.outlets}function Tm(i,t,n,r,o){let s={};return r&&Pn(r,(a,c)=>{s[c]=Array.isArray(a)?a.map(d=>`${d}`):`${a}`}),new ls(n.root===i?t:y2(n.root,i,t),s,o)}function y2(i,t,n){const r={};return Pn(i.children,(o,s)=>{r[s]=o===t?n:y2(o,t,n)}),new xt(i.segments,r)}class v2{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&qd(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(cl);if(o&&o!==e2(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wm{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function E2(i,t,n){if(i||(i=new xt([],{})),0===i.segments.length&&i.hasChildren())return zd(i,t,n);const r=function(i,t,n){let r=0,o=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;o<i.segments.length;){if(r>=n.length)return s;const a=i.segments[o],c=n[r];if(cl(c))break;const d=`${c}`,y=r<n.length-1?n[r+1]:null;if(o>0&&void 0===d)break;if(d&&y&&"object"==typeof y&&void 0===y.outlets){if(!S2(d,y,a))return s;r+=2}else{if(!S2(d,{},a))return s;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(i,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<i.segments.length){const s=new xt(i.segments.slice(0,r.pathIndex),{});return s.children[Nt]=new xt(i.segments.slice(r.pathIndex),i.children),zd(s,0,o)}return r.match&&0===o.length?new xt(i.segments,{}):r.match&&!i.hasChildren()?Am(i,t,n):r.match?zd(i,0,o):Am(i,t,n)}function zd(i,t,n){if(0===n.length)return new xt(i.segments,{});{const r=function(i){return cl(i[0])?i[0].outlets:{[Nt]:i}}(n),o={};return Pn(r,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(o[a]=E2(i.children[a],t,s))}),Pn(i.children,(s,a)=>{void 0===r[a]&&(o[a]=s)}),new xt(i.segments,o)}}function Am(i,t,n){const r=i.segments.slice(0,t);let o=0;for(;o<n.length;){const s=n[o];if(cl(s)){const d=U8(s.outlets);return new xt(r,d)}if(0===o&&qd(n[0])){r.push(new ol(i.segments[t].path,b2(n[0]))),o++;continue}const a=cl(s)?s.outlets[Nt]:`${s}`,c=o<n.length-1?n[o+1]:null;a&&c&&qd(c)?(r.push(new ol(a,b2(c))),o+=2):(r.push(new ol(a,{})),o++)}return new xt(r,{})}function U8(i){const t={};return Pn(i,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=Am(new xt([],{}),0,n))}),t}function b2(i){const t={};return Pn(i,(n,r)=>t[r]=`${n}`),t}function S2(i,t,n){return i==n.path&&Rr(t,n.parameters)}class H8{constructor(t,n,r,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Sm(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const o=al(n);t.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,o[a],r),delete o[a]}),Pn(o,(s,a)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){const o=t.value,s=n?n.value:null;if(o===s)if(o.component){const a=r.getContext(o.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,s=al(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const o=al(n);t.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],r),this.forwardEvent(new c8(s.value.snapshot))}),t.children.length&&this.forwardEvent(new s8(t.value.snapshot))}activateRoutes(t,n,r){const o=t.value,s=n?n.value:null;if(Sm(o),o===s)if(o.component){const a=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(o.component){const a=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const c=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),C2(c.route)}else{const c=function(i){for(let t=i.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(o.snapshot),d=c?c.module.componentFactoryResolver:null;a.attachRef=null,a.route=o,a.resolver=d,a.outlet&&a.outlet.activateWith(o,d),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}}function C2(i){Sm(i.value),i.children.forEach(C2)}class Rm{constructor(t,n){this.routes=t,this.module=n}}function To(i){return"function"==typeof i}function fs(i){return i instanceof ls}const ll=Symbol("INITIAL_VALUE");function ul(){return $r(i=>BC(i.map(t=>t.pipe(ni(1),ss(ll)))).pipe(GC((t,n)=>{let r=!1;return n.reduce((o,s,a)=>o!==ll?o:(s===ll&&(r=!0),r||!1!==s&&a!==n.length-1&&!fs(s)?o:s),t)},ll),as(t=>t!==ll),S(t=>fs(t)?t:!0===t),ni(1)))}let T2=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=dn({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&st(0,"router-outlet")},directives:function(){return[Pm]},encapsulation:2}),i})();function w2(i,t=""){for(let n=0;n<i.length;n++){const r=i[n];Y8(r,J8(t,r))}}function Y8(i,t){i.children&&w2(i.children,t)}function J8(i,t){return t?i||t.path?i&&!t.path?`${i}/`:!i&&t.path?t.path:`${i}/${t.path}`:"":i}function Im(i){const t=i.children&&i.children.map(Im),n=t?Object.assign(Object.assign({},i),{children:t}):Object.assign({},i);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Nt&&(n.component=T2),n}function Wi(i){return i.outlet||Nt}function A2(i,t){const n=i.filter(r=>Wi(r)===t);return n.push(...i.filter(r=>Wi(r)!==t)),n}const R2={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function $d(i,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||n.length>0)?Object.assign({},R2):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(t.matcher||d8)(n,i,t);if(!s)return Object.assign({},R2);const a={};Pn(s.posParams,(d,y)=>{a[y]=d.path});const c=s.consumed.length>0?Object.assign(Object.assign({},a),s.consumed[s.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:c,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Kd(i,t,n,r,o="corrected"){if(n.length>0&&function(i,t,n){return n.some(r=>Yd(i,t,r)&&Wi(r)!==Nt)}(i,n,r)){const a=new xt(t,function(i,t,n,r){const o={};o[Nt]=r,r._sourceSegment=i,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&Wi(s)!==Nt){const a=new xt([],{});a._sourceSegment=i,a._segmentIndexShift=t.length,o[Wi(s)]=a}return o}(i,t,r,new xt(n,i.children)));return a._sourceSegment=i,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(i,t,n){return n.some(r=>Yd(i,t,r))}(i,n,r)){const a=new xt(i.segments,function(i,t,n,r,o,s){const a={};for(const c of r)if(Yd(i,n,c)&&!o[Wi(c)]){const d=new xt([],{});d._sourceSegment=i,d._segmentIndexShift="legacy"===s?i.segments.length:t.length,a[Wi(c)]=d}return Object.assign(Object.assign({},o),a)}(i,t,n,r,i.children,o));return a._sourceSegment=i,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}const s=new xt(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Yd(i,t,n){return(!(i.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function I2(i,t,n,r){return!!(Wi(i)===r||r!==Nt&&Yd(t,n,i))&&("**"===i.path||$d(t,i,n).matched)}function D2(i,t,n){return 0===t.length&&!i.children[n]}class dl{constructor(t){this.segmentGroup=t||null}}class O2{constructor(t){this.urlTree=t}}function Jd(i){return new te(t=>t.error(new dl(i)))}function M2(i){return new te(t=>t.error(new O2(i)))}function tV(i){return new te(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class rV{constructor(t,n,r,o,s){this.configLoader=n,this.urlSerializer=r,this.urlTree=o,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(Cr)}apply(){const t=Kd(this.urlTree.root,[],[],this.config).segmentGroup,n=new xt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,Nt).pipe(S(s=>this.createUrlTree(Dm(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cs(s=>{if(s instanceof O2)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof dl?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Nt).pipe(S(o=>this.createUrlTree(Dm(o),t.queryParams,t.fragment))).pipe(cs(o=>{throw o instanceof dl?this.noMatchError(o):o}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,r){const o=t.segments.length>0?new xt([],{[Nt]:t}):t;return new ls(o,n,r)}expandSegmentGroup(t,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(S(s=>new xt([],s))):this.expandSegment(t,r,n,r.segments,o,!0)}expandChildren(t,n,r){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return F(o).pipe(il(s=>{const a=r.children[s],c=A2(n,s);return this.expandSegmentGroup(t,c,a,s).pipe(S(d=>({segment:d,outlet:s})))}),GC((s,a)=>(s[a.outlet]=a.segment,s),{}),function(i,t){const n=arguments.length>=2;return r=>r.pipe(i?as((o,s)=>i(o,s,r)):Y,pm(1),n?zC(t):qC(()=>new xd))}())}expandSegment(t,n,r,o,s,a){return F(r).pipe(il(c=>this.expandSegmentAgainstRoute(t,n,r,c,o,s,a).pipe(cs(y=>{if(y instanceof dl)return gt(null);throw y}))),Aa(c=>!!c),cs((c,d)=>{if(c instanceof xd||"EmptyError"===c.name){if(D2(n,o,s))return gt(new xt([],{}));throw new dl(n)}throw c}))}expandSegmentAgainstRoute(t,n,r,o,s,a,c){return I2(o,n,s,a)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(t,n,o,s,a):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,o,s,a):Jd(n):Jd(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,o,s,a){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,o,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,o,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?M2(s):this.lineralizeSegments(r,s).pipe(ce(a=>{const c=new xt(a,{});return this.expandSegment(t,c,n,a,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,o,s,a){const{matched:c,consumedSegments:d,lastChild:y,positionalParamSegments:k}=$d(n,o,s);if(!c)return Jd(n);const q=this.applyRedirectCommands(d,o.redirectTo,k);return o.redirectTo.startsWith("/")?M2(q):this.lineralizeSegments(o,q).pipe(ce(J=>this.expandSegment(t,n,r,J.concat(s.slice(y)),a,!1)))}matchSegmentAgainstRoute(t,n,r,o,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe(S(J=>(r._loadedConfig=J,new xt(o,{})))):gt(new xt(o,{}));const{matched:a,consumedSegments:c,lastChild:d}=$d(n,r,o);if(!a)return Jd(n);const y=o.slice(d);return this.getChildConfig(t,r,o).pipe(ce(q=>{const J=q.module,ae=q.routes,{segmentGroup:he,slicedSegments:we}=Kd(n,c,y,ae),be=new xt(he.segments,he.children);if(0===we.length&&be.hasChildren())return this.expandChildren(J,ae,be).pipe(S($e=>new xt(c,$e)));if(0===ae.length&&0===we.length)return gt(new xt(c,{}));const Pe=Wi(r)===s;return this.expandSegment(J,be,ae,we,Pe?Nt:s,!0).pipe(S(je=>new xt(c.concat(je.segments),je.children)))}))}getChildConfig(t,n,r){return n.children?gt(new Rm(n.children,t)):n.loadChildren?void 0!==n._loadedConfig?gt(n._loadedConfig):this.runCanLoadGuards(t.injector,n,r).pipe(ce(o=>o?this.configLoader.load(t.injector,n).pipe(S(s=>(n._loadedConfig=s,s))):function(i){return new te(t=>t.error(mm(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(n))):gt(new Rm([],t))}runCanLoadGuards(t,n,r){const o=n.canLoad;return o&&0!==o.length?gt(o.map(a=>{const c=t.get(a);let d;if(function(i){return i&&To(i.canLoad)}(c))d=c.canLoad(n,r);else{if(!To(c))throw new Error("Invalid CanLoad guard");d=c(n,r)}return Ir(d)})).pipe(ul(),Ti(a=>{if(!fs(a))return;const c=mm(`Redirecting to "${this.urlSerializer.serialize(a)}"`);throw c.url=a,c}),S(a=>!0===a)):gt(!0)}lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return gt(r);if(o.numberOfChildren>1||!o.children[Nt])return tV(t.redirectTo);o=o.children[Nt]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreatreUrlTree(t,n,r,o){const s=this.createSegmentGroup(t,n.root,r,o);return new ls(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Pn(t,(o,s)=>{if("string"==typeof o&&o.startsWith(":")){const c=o.substring(1);r[s]=n[c]}else r[s]=o}),r}createSegmentGroup(t,n,r,o){const s=this.createSegments(t,n.segments,r,o);let a={};return Pn(n.children,(c,d)=>{a[d]=this.createSegmentGroup(t,c,r,o)}),new xt(s,a)}createSegments(t,n,r,o){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,o):this.findOrReturn(s,r))}findPosParam(t,n,r){const o=r[n.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return o}findOrReturn(t,n){let r=0;for(const o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}}function Dm(i){const t={};for(const r of Object.keys(i.children)){const s=Dm(i.children[r]);(s.segments.length>0||s.hasChildren())&&(t[r]=s)}return function(i){if(1===i.numberOfChildren&&i.children[Nt]){const t=i.children[Nt];return new xt(i.segments.concat(t.segments),t.children)}return i}(new xt(i.segments,t))}class N2{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Qd{constructor(t,n){this.component=t,this.route=n}}function aV(i,t,n){const r=i._root;return fl(r,t?t._root:null,n,[r.value])}function Xd(i,t,n){const r=function(i){if(!i)return null;for(let t=i.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(i)}function fl(i,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=al(t);return i.children.forEach(a=>{(function(i,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,a=t?t.value:null,c=n?n.getContext(i.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const d=function(i,t,n){if("function"==typeof n)return n(i,t);switch(n){case"pathParamsChange":return!us(i.url,t.url);case"pathParamsOrQueryParamsChange":return!us(i.url,t.url)||!Rr(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cm(i,t)||!Rr(i.queryParams,t.queryParams);case"paramsChange":default:return!Cm(i,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);d?o.canActivateChecks.push(new N2(r)):(s.data=a.data,s._resolvedData=a._resolvedData),fl(i,t,s.component?c?c.children:null:n,r,o),d&&c&&c.outlet&&c.outlet.isActivated&&o.canDeactivateChecks.push(new Qd(c.outlet.component,a))}else a&&hl(t,c,o),o.canActivateChecks.push(new N2(r)),fl(i,null,s.component?c?c.children:null:n,r,o)})(a,s[a.value.outlet],n,r.concat([a.value]),o),delete s[a.value.outlet]}),Pn(s,(a,c)=>hl(a,n.getContext(c),o)),o}function hl(i,t,n){const r=al(i),o=i.value;Pn(r,(s,a)=>{hl(s,o.component?t?t.children.getContext(a):null:t,n)}),n.canDeactivateChecks.push(new Qd(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}class EV{}function k2(i){return new te(t=>t.error(i))}class SV{constructor(t,n,r,o,s,a){this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a}recognize(){const t=Kd(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,Nt);if(null===n)return null;const r=new Wd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Yr(r,n),s=new g2(this.url,o);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const n=t.value,r=p2(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,r)}processChildren(t,n){const r=[];for(const s of Object.keys(n.children)){const a=n.children[s],c=A2(t,s),d=this.processSegmentGroup(c,a,s);if(null===d)return null;r.push(...d)}const o=P2(r);return function(i){i.sort((t,n)=>t.value.outlet===Nt?-1:n.value.outlet===Nt?1:t.value.outlet.localeCompare(n.value.outlet))}(o),o}processSegment(t,n,r,o){for(const s of t){const a=this.processSegmentAgainstRoute(s,n,r,o);if(null!==a)return a}return D2(n,r,o)?[]:null}processSegmentAgainstRoute(t,n,r,o){if(t.redirectTo||!I2(t,n,r,o))return null;let s,a=[],c=[];if("**"===t.path){const ae=r.length>0?e2(r).parameters:{};s=new Wd(r,ae,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,F2(t),Wi(t),t.component,t,x2(n),L2(n)+r.length,V2(t))}else{const ae=$d(n,t,r);if(!ae.matched)return null;a=ae.consumedSegments,c=r.slice(ae.lastChild),s=new Wd(a,ae.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,F2(t),Wi(t),t.component,t,x2(n),L2(n)+a.length,V2(t))}const d=function(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(t),{segmentGroup:y,slicedSegments:k}=Kd(n,a,c,d.filter(ae=>void 0===ae.redirectTo),this.relativeLinkResolution);if(0===k.length&&y.hasChildren()){const ae=this.processChildren(d,y);return null===ae?null:[new Yr(s,ae)]}if(0===d.length&&0===k.length)return[new Yr(s,[])];const q=Wi(t)===o,J=this.processSegment(d,y,k,q?Nt:o);return null===J?null:[new Yr(s,J)]}}function wV(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function P2(i){const t=[],n=new Set;for(const r of i){if(!wV(r)){t.push(r);continue}const o=t.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):t.push(r)}for(const r of n){const o=P2(r.children);t.push(new Yr(r.value,o))}return t.filter(r=>!n.has(r))}function x2(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function L2(i){let t=i,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function F2(i){return i.data||{}}function V2(i){return i.resolve||{}}function Om(i){return $r(t=>{const n=i(t);return n?F(n).pipe(S(()=>t)):gt(t)})}class kV extends class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const Mm=new et("ROUTES");class j2{constructor(t,n,r,o){this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=o}load(t,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const o=this.loadModuleFactory(n.loadChildren).pipe(S(s=>{this.onLoadEndListener&&this.onLoadEndListener(n);const a=s.create(t);return new Rm(ZC(a.injector.get(Mm,void 0,lt.Self|lt.Optional)).map(Im),a)}),cs(s=>{throw n._loader$=void 0,s}));return n._loader$=new Te(o,()=>new l).pipe(_e()),n._loader$}loadModuleFactory(t){return"string"==typeof t?F(this.loader.load(t)):Ir(t()).pipe(ce(n=>n instanceof g0?gt(n):F(this.compiler.compileModuleAsync(n))))}}class PV{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ia,this.attachRef=null}}class Ia{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new PV,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}class LV{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function FV(i){throw i}function VV(i,t,n){return t.parse("/")}function U2(i,t){return gt(null)}const jV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},UV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gn=(()=>{class i{constructor(n,r,o,s,a,c,d,y){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=o,this.location=s,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new l,this.errorHandler=FV,this.malformedUriErrorHandler=VV,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:U2,afterPreactivation:U2},this.urlHandlingStrategy=new LV,this.routeReuseStrategy=new kV,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(Cr),this.console=a.get(Bu);const J=a.get(ut);this.isNgZoneEnabled=J instanceof ut&&ut.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=new ls(new xt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new j2(c,d,ae=>this.triggerEvent(new KC(ae)),ae=>this.triggerEvent(new YC(ae))),this.routerState=h2(this.currentUrlTree,this.rootComponentType),this.transitions=new fi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(as(o=>0!==o.id),S(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$r(o=>{let s=!1,a=!1;return gt(o).pipe(Ti(c=>{this.currentNavigation={id:c.id,initialUrl:c.currentRawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$r(c=>{const d=this.browserUrlTree.toString(),y=!this.navigated||c.extractedUrl.toString()!==d||d!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Zd(c.source)&&(this.browserUrlTree=c.extractedUrl),gt(c).pipe($r(q=>{const J=this.transitions.getValue();return r.next(new gm(q.id,this.serializeUrl(q.extractedUrl),q.source,q.restoredState)),J!==this.transitions.getValue()?os:Promise.resolve(q)}),function(i,t,n,r){return $r(o=>function(i,t,n,r,o){return new rV(i,t,n,r,o).apply()}(i,t,n,o.extractedUrl,r).pipe(S(s=>Object.assign(Object.assign({},o),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ti(q=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:q.urlAfterRedirects})}),function(i,t,n,r,o){return ce(s=>function(i,t,n,r,o="emptyOnly",s="legacy"){try{const a=new SV(i,t,n,r,o,s).recognize();return null===a?k2(new EV):gt(a)}catch(a){return k2(a)}}(i,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,o).pipe(S(a=>Object.assign(Object.assign({},s),{targetSnapshot:a}))))}(this.rootComponentType,this.config,q=>this.serializeUrl(q),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ti(q=>{"eager"===this.urlUpdateStrategy&&(q.extras.skipLocationChange||this.setBrowserUrl(q.urlAfterRedirects,q),this.browserUrlTree=q.urlAfterRedirects);const J=new e8(q.id,this.serializeUrl(q.extractedUrl),this.serializeUrl(q.urlAfterRedirects),q.targetSnapshot);r.next(J)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:J,extractedUrl:ae,source:he,restoredState:we,extras:be}=c,Pe=new gm(J,this.serializeUrl(ae),he,we);r.next(Pe);const Me=h2(ae,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},c),{targetSnapshot:Me,urlAfterRedirects:ae,extras:Object.assign(Object.assign({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=c.rawUrl,this.browserUrlTree=c.urlAfterRedirects,c.resolve(null),os}),Om(c=>{const{targetSnapshot:d,id:y,extractedUrl:k,rawUrl:q,extras:{skipLocationChange:J,replaceUrl:ae}}=c;return this.hooks.beforePreactivation(d,{navigationId:y,appliedUrlTree:k,rawUrlTree:q,skipLocationChange:!!J,replaceUrl:!!ae})}),Ti(c=>{const d=new t8(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),S(c=>Object.assign(Object.assign({},c),{guards:aV(c.targetSnapshot,c.currentSnapshot,this.rootContexts)})),function(i,t){return ce(n=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return 0===a.length&&0===s.length?gt(Object.assign(Object.assign({},n),{guardsResult:!0})):function(i,t,n,r){return F(i).pipe(ce(o=>function(i,t,n,r,o){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?gt(s.map(c=>{const d=Xd(c,t,o);let y;if(function(i){return i&&To(i.canDeactivate)}(d))y=Ir(d.canDeactivate(i,t,n,r));else{if(!To(d))throw new Error("Invalid CanDeactivate guard");y=Ir(d(i,t,n,r))}return y.pipe(Aa())})).pipe(ul()):gt(!0)}(o.component,o.route,n,t,r)),Aa(o=>!0!==o,!0))}(a,r,o,i).pipe(ce(c=>c&&function(i){return"boolean"==typeof i}(c)?function(i,t,n,r){return F(t).pipe(il(o=>Ld(function(i,t){return null!==i&&t&&t(new o8(i)),gt(!0)}(o.route.parent,r),function(i,t){return null!==i&&t&&t(new a8(i)),gt(!0)}(o.route,r),function(i,t,n){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>function(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(a)).filter(a=>null!==a).map(a=>HC(()=>gt(a.guards.map(d=>{const y=Xd(d,a.node,n);let k;if(function(i){return i&&To(i.canActivateChild)}(y))k=Ir(y.canActivateChild(r,i));else{if(!To(y))throw new Error("Invalid CanActivateChild guard");k=Ir(y(r,i))}return k.pipe(Aa())})).pipe(ul())));return gt(s).pipe(ul())}(i,o.path,n),function(i,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?gt(r.map(s=>HC(()=>{const a=Xd(s,t,n);let c;if(function(i){return i&&To(i.canActivate)}(a))c=Ir(a.canActivate(t,i));else{if(!To(a))throw new Error("Invalid CanActivate guard");c=Ir(a(t,i))}return c.pipe(Aa())}))).pipe(ul()):gt(!0)}(i,o.route,n))),Aa(o=>!0!==o,!0))}(r,s,i,t):gt(c)),S(c=>Object.assign(Object.assign({},n),{guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),Ti(c=>{if(fs(c.guardsResult)){const y=mm(`Redirecting to "${this.serializeUrl(c.guardsResult)}"`);throw y.url=c.guardsResult,y}const d=new n8(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(d)}),as(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,""),!1)),Om(c=>{if(c.guards.canActivateChecks.length)return gt(c).pipe(Ti(d=>{const y=new i8(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(y)}),$r(d=>{let y=!1;return gt(d).pipe(function(i,t){return ce(n=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return gt(n);let s=0;return F(o).pipe(il(a=>function(i,t,n,r){return function(i,t,n,r){const o=Object.keys(i);if(0===o.length)return gt({});const s={};return F(o).pipe(ce(a=>function(i,t,n,r){const o=Xd(i,t,r);return Ir(o.resolve?o.resolve(t,n):o(t,n))}(i[a],t,n,r).pipe(Ti(c=>{s[a]=c}))),pm(1),ce(()=>Object.keys(s).length===o.length?gt(s):os))}(i._resolve,i,t,r).pipe(S(s=>(i._resolvedData=s,i.data=Object.assign(Object.assign({},i.data),p2(i,n).resolve),null)))}(a.route,r,i,t)),Ti(()=>s++),pm(1),ce(a=>s===o.length?gt(n):os))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ti({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(d),this.cancelNavigationTransition(d,"At least one route resolver didn't emit any value."))}}))}),Ti(d=>{const y=new r8(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(y)}))}),Om(c=>{const{targetSnapshot:d,id:y,extractedUrl:k,rawUrl:q,extras:{skipLocationChange:J,replaceUrl:ae}}=c;return this.hooks.afterPreactivation(d,{navigationId:y,appliedUrlTree:k,rawUrlTree:q,skipLocationChange:!!J,replaceUrl:!!ae})}),S(c=>{const d=function(i,t,n){const r=Gd(i,t._root,n?n._root:void 0);return new f2(r,t)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return Object.assign(Object.assign({},c),{targetRouterState:d})}),Ti(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((i,t,n)=>S(r=>(new H8(t,r.targetRouterState,r.currentRouterState,n).activate(i),r)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),Ti({next(){s=!0},complete(){s=!0}}),function(i){return t=>t.lift(new QF(i))}(()=>{var c;if(!s&&!a){const d=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,d)):this.cancelNavigationTransition(o,d)}(null===(c=this.currentNavigation)||void 0===c?void 0:c.id)===o.id&&(this.currentNavigation=null)}),cs(c=>{if(a=!0,function(i){return i&&i[QC]}(c)){const d=fs(c.url);d||(this.navigated=!0,this.restoreHistory(o,!0));const y=new $C(o.id,this.serializeUrl(o.extractedUrl),c.message);r.next(y),d?setTimeout(()=>{const k=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),q={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Zd(o.source)};this.scheduleNavigation(k,"imperative",null,q,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const d=new ZF(o.id,this.serializeUrl(o.extractedUrl),c);r.next(d);try{o.resolve(this.errorHandler(c))}catch(y){o.reject(y)}}return os}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:s,urlTree:a}=r,c={replaceUrl:!0};if(s){const d=Object.assign({},s);delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(c.state=d)}this.scheduleNavigation(a,o,s,c)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(n){var r;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(r=n.state)||void 0===r?void 0:r.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,r){if(!n)return!0;const o=r.urlTree.toString()===n.urlTree.toString();return r.transitionId!==n.transitionId||!o||!("hashchange"===r.source&&"popstate"===n.source||"popstate"===r.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){w2(n),this.config=n.map(Im),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:d}=r,y=o||this.routerState.root,k=d?this.currentUrlTree.fragment:a;let q=null;switch(c){case"merge":q=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":q=this.currentUrlTree.queryParams;break;default:q=s||null}return null!==q&&(q=this.removeEmptyProps(q)),function(i,t,n,r,o){if(0===n.length)return Tm(t.root,t.root,t,r,o);const s=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new v2(!0,0,i);let t=0,n=!1;const r=i.reduce((o,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return Pn(s.outlets,(d,y)=>{c[y]="string"==typeof d?d.split("/"):d}),[...o,{outlets:c}]}if(s.segmentPath)return[...o,s.segmentPath]}return"string"!=typeof s?[...o,s]:0===a?(s.split("/").forEach((c,d)=>{0==d&&"."===c||(0==d&&""===c?n=!0:".."===c?t++:""!=c&&o.push(c))}),o):[...o,s]},[]);return new v2(n,t,r)}(n);if(s.toRoot())return Tm(t.root,new xt([],{}),t,r,o);const a=function(i,t,n){if(i.isAbsolute)return new wm(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const s=n.snapshot._urlSegment;return new wm(s,s===t.root,0)}const r=qd(i.commands[0])?0:1;return function(i,t,n){let r=i,o=t,s=n;for(;s>o;){if(s-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new wm(r,!1,o-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,i.numberOfDoubleDots)}(s,t,i),c=a.processChildren?zd(a.segmentGroup,a.index,s.commands):E2(a.segmentGroup,a.index,s.commands);return Tm(a.segmentGroup,c,t,r,o)}(y,this.currentUrlTree,n,q,null!=k?k:null)}navigateByUrl(n,r={skipLocationChange:!1}){const o=fs(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function(i){for(let t=0;t<i.length;t++){const n=i[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,n)}return r}isActive(n,r){let o;if(o=!0===r?Object.assign({},jV):!1===r?Object.assign({},UV):r,fs(n))return n2(this.currentUrlTree,n,o);const s=this.parseUrl(n);return n2(this.currentUrlTree,s,o)}removeEmptyProps(n){return Object.keys(n).reduce((r,o)=>{const s=n[o];return null!=s&&(r[o]=s),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new rl(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,o,s,a){var c,d;if(this.disposed)return Promise.resolve(!1);const y=this.getTransition(),k=Zd(r)&&y&&!Zd(y.source),ae=(this.lastSuccessfulId===y.id||this.currentNavigation?y.rawUrl:y.urlAfterRedirects).toString()===n.toString();if(k&&ae)return Promise.resolve(!0);let he,we,be;a?(he=a.resolve,we=a.reject,be=a.promise):be=new Promise((je,$e)=>{he=je,we=$e});const Pe=++this.navigationId;let Me;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Me=o&&o.\u0275routerPageId?o.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(c=this.browserPageId)&&void 0!==c?c:0:(null!==(d=this.browserPageId)&&void 0!==d?d:0)+1):Me=0,this.setTransition({id:Pe,targetPageId:Me,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:he,reject:we,promise:be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),be.catch(je=>Promise.reject(je))}setBrowserUrl(n,r){const o=this.urlSerializer.serialize(n),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",s):this.location.go(o,"",s)}restoreHistory(n,r=!1){var o,s;if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===a?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===a&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(a)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const o=new $C(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(o),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return i.\u0275fac=function(n){return new(n||i)(Ae(Xl),Ae(_m),Ae(Ia),Ae(qc),Ae(Bt),Ae(Wu),Ae(Qo),Ae(void 0))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();function Zd(i){return"imperative"!==i}let Pm=(()=>{class i{constructor(n,r,o,s,a){this.parentContexts=n,this.location=r,this.resolver=o,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.name=s||Nt,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const a=(r=r||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),c=this.parentContexts.getOrCreateContext(this.name).children,d=new GV(n,c,this.location.injector);this.activated=this.location.createComponent(a,this.location.length,d),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(n){return new(n||i)(Se(Ia),Se(kn),Se(Zi),Fo("name"),Se(Pi))},i.\u0275dir=Be({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class GV{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===ds?this.route:t===Ia?this.childContexts:this.parent.get(t,n)}}class B2{}class H2{preload(t,n){return gt(null)}}let W2=(()=>{class i{constructor(n,r,o,s,a){this.router=n,this.injector=s,this.preloadingStrategy=a,this.loader=new j2(r,o,y=>n.triggerEvent(new KC(y)),y=>n.triggerEvent(new YC(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(as(n=>n instanceof rl),il(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(Cr);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const o=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const a=s._loadedConfig;o.push(this.processRoutes(a.module,a.routes))}else s.loadChildren&&!s.canLoad?o.push(this.preloadConfig(n,s)):s.children&&o.push(this.processRoutes(n,s.children));return F(o).pipe(me(),S(s=>{}))}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(n.injector,r)).pipe(ce(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return i.\u0275fac=function(n){return new(n||i)(Ae(Gn),Ae(Wu),Ae(Qo),Ae(Bt),Ae(B2))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})(),xm=(()=>{class i{constructor(n,r,o={}){this.router=n,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof gm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof rl&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof JC&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new JC(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(Ae(Gn),Ae(AS),Ae(void 0))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();const hs=new et("ROUTER_CONFIGURATION"),G2=new et("ROUTER_FORROOT_GUARD"),zV=[qc,{provide:_m,useClass:a2},{provide:Gn,useFactory:function(i,t,n,r,o,s,a,c={},d,y){const k=new Gn(null,i,t,n,r,o,s,ZC(a));return d&&(k.urlHandlingStrategy=d),y&&(k.routeReuseStrategy=y),function(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy)}(c,k),c.enableTracing&&k.events.subscribe(q=>{var J,ae;null===(J=console.group)||void 0===J||J.call(console,`Router Event: ${q.constructor.name}`),console.log(q.toString()),console.log(q),null===(ae=console.groupEnd)||void 0===ae||ae.call(console)}),k},deps:[_m,Ia,qc,Bt,Wu,Qo,Mm,hs,[class{},new li],[class{},new li]]},Ia,{provide:ds,useFactory:function(i){return i.routerState.root},deps:[Gn]},{provide:Wu,useClass:_x},W2,H2,class{preload(t,n){return n().pipe(cs(()=>gt(null)))}},{provide:hs,useValue:{enableTracing:!1}}];function $V(){return new Yp("Router",Gn)}let KV=(()=>{class i{constructor(n,r){}static forRoot(n,r){return{ngModule:i,providers:[zV,q2(n),{provide:G2,useFactory:QV,deps:[[Gn,new li,new uo]]},{provide:hs,useValue:r||{}},{provide:Sa,useFactory:JV,deps:[es,[new Fs(fg),new li],hs]},{provide:xm,useFactory:YV,deps:[Gn,AS,hs]},{provide:B2,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:H2},{provide:Yp,multi:!0,useFactory:$V},[Lm,{provide:Vc,multi:!0,useFactory:t9,deps:[Lm]},{provide:z2,useFactory:n9,deps:[Lm]},{provide:vb,multi:!0,useExisting:z2}]]}}static forChild(n){return{ngModule:i,providers:[q2(n)]}}}return i.\u0275fac=function(n){return new(n||i)(Ae(G2,8),Ae(Gn,8))},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({}),i})();function YV(i,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new xm(i,t,n)}function JV(i,t,n={}){return n.useHash?new F4(i,t):new cS(i,t)}function QV(i){return"guarded"}function q2(i){return[{provide:WR,multi:!0,useValue:i},{provide:Mm,multi:!0,useValue:i}]}let Lm=(()=>{class i{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new l}appInitializer(){return this.injector.get(P4,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(c=>r=c),s=this.injector.get(Gn),a=this.injector.get(hs);return"disabled"===a.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===a.initialNavigation||"enabledBlocking"===a.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),o})}bootstrapListener(n){const r=this.injector.get(hs),o=this.injector.get(W2),s=this.injector.get(xm),a=this.injector.get(Gn),c=this.injector.get(Hr);n===c.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&a.initialNavigation(),o.setUpPreloading(),s.init(),a.resetRootComponentType(c.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(n){return new(n||i)(Ae(Bt))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();function t9(i){return i.appInitializer.bind(i)}function n9(i){return i.bootstrapListener.bind(i)}const z2=new et("Router Initializer");function ef(i,t){return new te(n=>{const r=i.length;if(0===r)return void n.complete();const o=new Array(r);let s=0,a=0;for(let c=0;c<r;c++){const d=F(i[c]);let y=!1;n.add(d.subscribe({next:k=>{y||(y=!0,a++),o[c]=k},error:k=>n.error(k),complete:()=>{s++,(s===r||!y)&&(a===r&&n.next(t?t.reduce((k,q,J)=>(k[q]=o[J],k),{}):o),n.complete())}}))}})}let $2=(()=>{class i{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return i.\u0275fac=function(n){return new(n||i)(Se(Sr),Se(Tt))},i.\u0275dir=Be({type:i}),i})(),ps=(()=>{class i extends $2{}return i.\u0275fac=function(){let t;return function(r){return(t||(t=Nn(i)))(r||i)}}(),i.\u0275dir=Be({type:i,features:[Ct]}),i})();const ar=new et("NgValueAccessor"),s9={provide:ar,useExisting:Ut(()=>tf),multi:!0},c9=new et("CompositionEventMode");let tf=(()=>{class i extends $2{constructor(n,r,o){super(n,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const i=wr()?wr().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return i.\u0275fac=function(n){return new(n||i)(Se(Sr),Se(Tt),Se(c9,8))},i.\u0275dir=Be({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Ft("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[It([s9]),Ct]}),i})();function wo(i){return null==i||0===i.length}function Y2(i){return null!=i&&"number"==typeof i.length}const xn=new et("NgValidators"),Ao=new et("NgAsyncValidators"),l9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class u9{static min(t){return function(i){return t=>{if(wo(t.value)||wo(i))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<i?{min:{min:i,actual:t.value}}:null}}(t)}static max(t){return function(i){return t=>{if(wo(t.value)||wo(i))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>i?{max:{max:i,actual:t.value}}:null}}(t)}static required(t){return function(i){return wo(i.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(i){return!0===i.value?null:{required:!0}}(t)}static email(t){return function(i){return wo(i.value)||l9.test(i.value)?null:{email:!0}}(t)}static minLength(t){return function(i){return t=>wo(t.value)||!Y2(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function(i){return t=>Y2(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static pattern(t){return function(i){if(!i)return Ro;let t,n;return"string"==typeof i?(n="","^"!==i.charAt(0)&&(n+="^"),n+=i,"$"!==i.charAt(i.length-1)&&(n+="$"),t=new RegExp(n)):(n=i.toString(),t=i),r=>{if(wo(r.value))return null;const o=r.value;return t.test(o)?null:{pattern:{requiredPattern:n,actualValue:o}}}}(t)}static nullValidator(t){return null}static compose(t){return lT(t)}static composeAsync(t){return uT(t)}}function Ro(i){return null}function rT(i){return null!=i}function oT(i){const t=yc(i)?F(i):i;return Cu(t),t}function sT(i){let t={};return i.forEach(n=>{t=null!=n?Object.assign(Object.assign({},t),n):t}),0===Object.keys(t).length?null:t}function aT(i,t){return t.map(n=>n(i))}function cT(i){return i.map(t=>function(i){return!i.validate}(t)?t:n=>t.validate(n))}function lT(i){if(!i)return null;const t=i.filter(rT);return 0==t.length?null:function(n){return sT(aT(n,t))}}function Fm(i){return null!=i?lT(cT(i)):null}function uT(i){if(!i)return null;const t=i.filter(rT);return 0==t.length?null:function(n){return function(...i){if(1===i.length){const t=i[0];if(_(t))return ef(t,null);if(R(t)&&Object.getPrototypeOf(t)===Object.prototype){const n=Object.keys(t);return ef(n.map(r=>t[r]),n)}}if("function"==typeof i[i.length-1]){const t=i.pop();return ef(i=1===i.length&&_(i[0])?i[0]:i,null).pipe(S(n=>t(...n)))}return ef(i,null)}(aT(n,t).map(oT)).pipe(S(sT))}}function Vm(i){return null!=i?uT(cT(i)):null}function dT(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function fT(i){return i._rawValidators}function hT(i){return i._rawAsyncValidators}function jm(i){return i?Array.isArray(i)?i:[i]:[]}function nf(i,t){return Array.isArray(i)?i.includes(t):i===t}function pT(i,t){const n=jm(t);return jm(i).forEach(o=>{nf(n,o)||n.push(o)}),n}function gT(i,t){return jm(t).filter(n=>!nf(i,n))}let mT=(()=>{class i{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Fm(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Vm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,r){return!!this.control&&this.control.hasError(n,r)}getError(n,r){return this.control?this.control.getError(n,r):null}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=Be({type:i}),i})(),ii=(()=>{class i extends mT{get formDirective(){return null}get path(){return null}}return i.\u0275fac=function(){let t;return function(r){return(t||(t=Nn(i)))(r||i)}}(),i.\u0275dir=Be({type:i,features:[Ct]}),i})();class Jr extends mT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _T{constructor(t){this._cd=t}is(t){var n,r,o;return"submitted"===t?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[t])}}let yT=(()=>{class i extends _T{constructor(n){super(n)}}return i.\u0275fac=function(n){return new(n||i)(Se(Jr,2))},i.\u0275dir=Be({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&Vt("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[Ct]}),i})(),vT=(()=>{class i extends _T{constructor(n){super(n)}}return i.\u0275fac=function(n){return new(n||i)(Se(ii,10))},i.\u0275dir=Be({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&Vt("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[Ct]}),i})();function pl(i,t){Hm(i,t),t.valueAccessor.writeValue(i.value),function(i,t){t.valueAccessor.registerOnChange(n=>{i._pendingValue=n,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&ET(i,t)})}(i,t),function(i,t){const n=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};i.registerOnChange(n),t._registerOnDestroy(()=>{i._unregisterOnChange(n)})}(i,t),function(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&ET(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function(i,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};i.registerOnDisabledChange(n),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(n)})}}(i,t)}function sf(i,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),cf(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function af(i,t){i.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Hm(i,t){const n=fT(i);null!==t.validator?i.setValidators(dT(n,t.validator)):"function"==typeof n&&i.setValidators([n]);const r=hT(i);null!==t.asyncValidator?i.setAsyncValidators(dT(r,t.asyncValidator)):"function"==typeof r&&i.setAsyncValidators([r]);const o=()=>i.updateValueAndValidity();af(t._rawValidators,o),af(t._rawAsyncValidators,o)}function cf(i,t){let n=!1;if(null!==i){if(null!==t.validator){const o=fT(i);if(Array.isArray(o)&&o.length>0){const s=o.filter(a=>a!==t.validator);s.length!==o.length&&(n=!0,i.setValidators(s))}}if(null!==t.asyncValidator){const o=hT(i);if(Array.isArray(o)&&o.length>0){const s=o.filter(a=>a!==t.asyncValidator);s.length!==o.length&&(n=!0,i.setAsyncValidators(s))}}}const r=()=>{};return af(t._rawValidators,r),af(t._rawAsyncValidators,r),n}function ET(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function bT(i,t){Hm(i,t)}function ST(i,t){i._syncPendingControls(),t.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function lf(i,t){const n=i.indexOf(t);n>-1&&i.splice(n,1)}const gl="VALID",uf="INVALID",Oa="PENDING",ml="DISABLED";function qm(i){return($m(i)?i.validators:i)||null}function CT(i){return Array.isArray(i)?Fm(i):i||null}function zm(i,t){return($m(t)?t.asyncValidators:i)||null}function TT(i){return Array.isArray(i)?Vm(i):i||null}function $m(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class Km{constructor(t,n){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=CT(this._rawValidators),this._composedAsyncValidatorFn=TT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===gl}get invalid(){return this.status===uf}get pending(){return this.status==Oa}get disabled(){return this.status===ml}get enabled(){return this.status!==ml}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=CT(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=TT(t)}addValidators(t){this.setValidators(pT(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(pT(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(gT(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(gT(t,this._rawAsyncValidators))}hasValidator(t){return nf(this._rawValidators,t)}hasAsyncValidator(t){return nf(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Oa,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=ml,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=gl,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gl||this.status===Oa)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ml:gl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Oa,this._hasOwnPendingAsyncValidator=!0;const n=oT(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){return function(i,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=i;return t.forEach(o=>{r=r instanceof _l?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof Ym&&r.at(o)||null}),r}(this,t)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Dt,this.statusChanges=new Dt}_calculateStatus(){return this._allControlsDisabled()?ml:this.errors?uf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oa)?Oa:this._anyControlsHaveStatus(uf)?uf:gl}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){$m(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ma extends Km{constructor(t=null,n,r){super(qm(n),zm(r,n)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=null,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){lf(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){lf(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class _l extends Km{constructor(t,n,r){super(qm(n),zm(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,o)=>{r.reset(t[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n instanceof Ma?n.value:n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const n of Object.keys(this.controls)){const r=this.controls[n];if(this.contains(n)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(t,n){let r=t;return this._forEachChild((o,s)=>{r=n(r,o,s)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((n,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Ym extends Km{constructor(t,n,r){super(qm(n),zm(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,r={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),n&&(this.controls.splice(t,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){this._checkAllValuesPresent(t),t.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(t.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((r,o)=>{r.reset(t[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t instanceof Ma?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((n,r)=>{t(n,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((n,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const C9={provide:ii,useExisting:Ut(()=>df)},yl=(()=>Promise.resolve(null))();let df=(()=>{class i extends ii{constructor(n,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Dt,this.form=new _l({},Fm(n),Vm(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){yl.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),pl(n.control,n),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){yl.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),lf(this._directives,n)})}addFormGroup(n){yl.then(()=>{const r=this._findContainer(n.path),o=new _l({});bT(o,n),r.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){yl.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){yl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,ST(this.form,this._directives),this.ngSubmit.emit(n),!1}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return i.\u0275fac=function(n){return new(n||i)(Se(xn,10),Se(Ao,10))},i.\u0275dir=Be({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){1&n&&Ft("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[It([C9]),Ct]}),i})(),DT=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=Be({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),MT=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({}),i})();const Jm=new et("NgModelWithFormControlWarning"),M9={provide:ii,useExisting:Ut(()=>vl)};let vl=(()=>{class i extends ii{constructor(n,r){super(),this.validators=n,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Dt,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return pl(r,n),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){sf(n.control||null,n,!1),lf(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,ST(this.form,this.directives),this.ngSubmit.emit(n),!1}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,o=this.form.get(n.path);r!==o&&(sf(r||null,n),o instanceof Ma&&(pl(o,n),n.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);bT(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function(i,t){return cf(i,t)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Hm(this.form,this),this._oldForm&&cf(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(n){return new(n||i)(Se(xn,10),Se(Ao,10))},i.\u0275dir=Be({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){1&n&&Ft("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[It([M9]),Ct,yn]}),i})();const P9={provide:Jr,useExisting:Ut(()=>Zm)};let r_,Zm=(()=>{class i extends Jr{constructor(n,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.update=new Dt,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(i,t){if(!t)return null;let n,r,o;return Array.isArray(t),t.forEach(s=>{s.constructor===tf?n=s:function(i){return Object.getPrototypeOf(i.constructor)===ps}(s)?r=s:o=s}),o||r||n||null}(0,s)}set isDisabled(n){}ngOnChanges(n){this._added||this._setUpControl(),function(i,t){if(!i.hasOwnProperty("model"))return!1;const n=i.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return function(i,t){return[...t.path,i]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return i.\u0275fac=function(n){return new(n||i)(Se(ii,13),Se(xn,10),Se(Ao,10),Se(ar,10),Se(Jm,8))},i.\u0275dir=Be({type:i,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[It([P9]),Ct,yn]}),i._ngModelWarningSentOnce=!1,i})(),zT=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[MT]]}),i})(),$T=(()=>{class i{static withConfig(n){return{ngModule:i,providers:[{provide:Jm,useValue:n.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[zT]}),i})(),J9=(()=>{class i{group(n,r=null){const o=this._reduceControls(n);let c,s=null,a=null;return null!=r&&(function(i){return void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn}(r)?(s=null!=r.validators?r.validators:null,a=null!=r.asyncValidators?r.asyncValidators:null,c=null!=r.updateOn?r.updateOn:void 0):(s=null!=r.validator?r.validator:null,a=null!=r.asyncValidator?r.asyncValidator:null)),new _l(o,{asyncValidators:a,updateOn:c,validators:s})}control(n,r,o){return new Ma(n,r,o)}array(n,r,o){const s=n.map(a=>this._createControl(a));return new Ym(s,r,o)}_reduceControls(n){const r={};return Object.keys(n).forEach(o=>{r[o]=this._createControl(n[o])}),r}_createControl(n){return n instanceof Ma||n instanceof _l||n instanceof Ym?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({factory:function(){return new i},token:i,providedIn:$T}),i})();try{r_="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){r_=!1}let Na,qt=(()=>{class i{constructor(n){this._platformId=n,this.isBrowser=this._platformId?function(i){return i===wS}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!r_)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(n){return new(n||i)(Ae(Uc))},i.\u0275prov=ze({factory:function(){return new i(Ae(Uc))},token:i,providedIn:"root"}),i})(),El=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({}),i})();const KT=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function YT(){if(Na)return Na;if("object"!=typeof document||!document)return Na=new Set(KT),Na;let i=document.createElement("input");return Na=new Set(KT.filter(t=>(i.setAttribute("type",t),i.type===t))),Na}let bl,gs,o_;function Sl(i){return function(){if(null==bl&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>bl=!0}))}finally{bl=bl||!1}return bl}()?i:!!i.capture}function JT(){if(null==gs){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return gs=!1,gs;if("scrollBehavior"in document.documentElement.style)gs=!0;else{const i=Element.prototype.scrollTo;gs=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return gs}function ms(i){return i.composedPath?i.composedPath()[0]:i.target}function s_(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Sn(i){return null!=i&&"false"!=`${i}`}function Io(i,t=0){return function(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function hf(i){return Array.isArray(i)?i:[i]}function Cn(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Qr(i){return i instanceof Tt?i.nativeElement:i}function Tl(i,t,n,r){return D(n)&&(r=n,n=void 0),r?Tl(i,t,n).pipe(S(o=>_(o)?r(...o):r(o))):new te(o=>{QT(i,t,function(a){o.next(arguments.length>1?Array.prototype.slice.call(arguments):a)},o,n)})}function QT(i,t,n,r,o){let s;if(function(i){return i&&"function"==typeof i.addEventListener&&"function"==typeof i.removeEventListener}(i)){const a=i;i.addEventListener(t,n,o),s=()=>a.removeEventListener(t,n,o)}else if(function(i){return i&&"function"==typeof i.on&&"function"==typeof i.off}(i)){const a=i;i.on(t,n),s=()=>a.off(t,n)}else if(function(i){return i&&"function"==typeof i.addListener&&"function"==typeof i.removeListener}(i)){const a=i;i.addListener(t,n),s=()=>a.removeListener(t,n)}else{if(!i||!i.length)throw new TypeError("Invalid event target");for(let a=0,c=i.length;a<c;a++)QT(i[a],t,n,r,o)}r.add(s)}class o7 extends v{constructor(t,n){super()}schedule(t,n=0){return this}}class pf extends o7{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){if(this.closed)return this;this.state=t;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let o,r=!1;try{this.work(t)}catch(s){r=!0,o=!!s&&s||new Error(s)}if(r)return this.unsubscribe(),o}_unsubscribe(){const t=this.id,n=this.scheduler,r=n.actions,o=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&r.splice(o,1),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null}}let XT=(()=>{class i{constructor(n,r=i.now){this.SchedulerAction=n,this.now=r}schedule(n,r=0,o){return new this.SchedulerAction(this,n).schedule(o,r)}}return i.now=()=>Date.now(),i})();class cr extends XT{constructor(t,n=XT.now){super(t,()=>cr.delegate&&cr.delegate!==this?cr.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,n=0,r){return cr.delegate&&cr.delegate!==this?cr.delegate.schedule(t,n,r):super.schedule(t,n,r)}flush(t){const{actions:n}=this;if(this.active)return void n.push(t);let r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this.active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}const ka=new cr(pf);class a7{constructor(t){this.durationSelector=t}call(t,n){return n.subscribe(new c7(t,this.durationSelector))}}class c7 extends Ge{constructor(t,n){super(t),this.durationSelector=n,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:o}=this;n=o(t)}catch(o){return this.destination.error(o)}const r=Je(n,new Ne(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:n,throttled:r}=this;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),n&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function a_(i){return!_(i)&&i-parseFloat(i)+1>=0}function ZT(i=0,t,n){let r=-1;return a_(t)?r=Number(t)<1?1:Number(t):p(t)&&(n=t),p(n)||(n=ka),new te(o=>{const s=a_(i)?i:+i-n.now();return n.schedule(l7,s,{index:0,period:r,subscriber:o})})}function l7(i){const{index:t,period:n,subscriber:r}=i;if(r.next(t),!r.closed){if(-1===n)return r.complete();i.index=t+1,this.schedule(i,n)}}function gf(i,t=ka){return function(i){return function(n){return n.lift(new a7(i))}}(()=>ZT(i,t))}function Ln(i){return t=>t.lift(new u7(i))}class u7{constructor(t){this.notifier=t}call(t,n){const r=new d7(t),o=Je(this.notifier,new Ne(r));return o&&!r.seenValue?(r.add(o),n.subscribe(r)):r}}class d7 extends Ge{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const ew=Sl({passive:!0});let tw=(()=>{class i{constructor(n,r){this._platform=n,this._ngZone=r,this._monitoredElements=new Map}monitor(n){if(!this._platform.isBrowser)return os;const r=Qr(n),o=this._monitoredElements.get(r);if(o)return o.subject;const s=new l,a="cdk-text-field-autofilled",c=d=>{"cdk-text-field-autofill-start"!==d.animationName||r.classList.contains(a)?"cdk-text-field-autofill-end"===d.animationName&&r.classList.contains(a)&&(r.classList.remove(a),this._ngZone.run(()=>s.next({target:d.target,isAutofilled:!1}))):(r.classList.add(a),this._ngZone.run(()=>s.next({target:d.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",c,ew),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",c,ew)}}),s}stopMonitoring(n){const r=Qr(n),o=this._monitoredElements.get(r);o&&(o.unlisten(),o.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((n,r)=>this.stopMonitoring(r))}}return i.\u0275fac=function(n){return new(n||i)(Ae(qt),Ae(ut))},i.\u0275prov=ze({factory:function(){return new i(Ae(qt),Ae(ut))},token:i,providedIn:"root"}),i})(),nw=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[El]]}),i})();function rw(i){return t=>t.lift(new E7(i))}class E7{constructor(t){this.total=t}call(t,n){return n.subscribe(new b7(t,this.total))}}class b7 extends E{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}class S7{constructor(t,n){this.compare=t,this.keySelector=n}call(t,n){return n.subscribe(new C7(t,this.compare,this.keySelector))}}class C7 extends E{constructor(t,n,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}compare(t,n){return t===n}_next(t){let n;try{const{keySelector:o}=this;n=o?o(t):t}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,n)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=n,this.destination.next(t))}}function sw(i,t=ka){return n=>n.lift(new T7(i,t))}class T7{constructor(t,n){this.dueTime=t,this.scheduler=n}call(t,n){return n.subscribe(new w7(t,this.dueTime,this.scheduler))}}class w7 extends E{constructor(t,n,r){super(t),this.dueTime=n,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(A7,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function A7(i){i.debouncedNext()}let l_=(()=>{class i{create(n){return"undefined"==typeof MutationObserver?null:new MutationObserver(n)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({factory:function(){return new i},token:i,providedIn:"root"}),i})(),aw=(()=>{class i{constructor(n){this._mutationObserverFactory=n,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((n,r)=>this._cleanupObserver(r))}observe(n){const r=Qr(n);return new te(o=>{const a=this._observeElement(r).subscribe(o);return()=>{a.unsubscribe(),this._unobserveElement(r)}})}_observeElement(n){if(this._observedElements.has(n))this._observedElements.get(n).count++;else{const r=new l,o=this._mutationObserverFactory.create(s=>r.next(s));o&&o.observe(n,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(n,{observer:o,stream:r,count:1})}return this._observedElements.get(n).stream}_unobserveElement(n){this._observedElements.has(n)&&(this._observedElements.get(n).count--,this._observedElements.get(n).count||this._cleanupObserver(n))}_cleanupObserver(n){if(this._observedElements.has(n)){const{observer:r,stream:o}=this._observedElements.get(n);r&&r.disconnect(),o.complete(),this._observedElements.delete(n)}}}return i.\u0275fac=function(n){return new(n||i)(Ae(l_))},i.\u0275prov=ze({factory:function(){return new i(Ae(l_))},token:i,providedIn:"root"}),i})(),cw=(()=>{class i{constructor(n,r,o){this._contentObserver=n,this._elementRef=r,this._ngZone=o,this.event=new Dt,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(n){this._disabled=Sn(n),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(n){this._debounce=Io(n),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const n=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?n.pipe(sw(this.debounce)):n).subscribe(this.event)})}_unsubscribe(){var n;null===(n=this._currentSubscription)||void 0===n||n.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(Se(aw),Se(Tt),Se(ut))},i.\u0275dir=Be({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),u_=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({providers:[l_]}),i})();function mf(i,t){return(i.getAttribute(t)||"").match(/\S+/g)||[]}const uw="cdk-describedby-message-container",dw="cdk-describedby-message",_f="cdk-describedby-host";let D7=0;const Dr=new Map;let Fn=null,fw=(()=>{class i{constructor(n){this._document=n}describe(n,r,o){if(!this._canBeDescribed(n,r))return;const s=d_(r,o);"string"!=typeof r?(hw(r),Dr.set(s,{messageElement:r,referenceCount:0})):Dr.has(s)||this._createMessageElement(r,o),this._isElementDescribedByMessage(n,s)||this._addMessageReference(n,s)}removeDescription(n,r,o){if(!r||!this._isElementNode(n))return;const s=d_(r,o);if(this._isElementDescribedByMessage(n,s)&&this._removeMessageReference(n,s),"string"==typeof r){const a=Dr.get(s);a&&0===a.referenceCount&&this._deleteMessageElement(s)}Fn&&0===Fn.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const n=this._document.querySelectorAll(`[${_f}]`);for(let r=0;r<n.length;r++)this._removeCdkDescribedByReferenceIds(n[r]),n[r].removeAttribute(_f);Fn&&this._deleteMessagesContainer(),Dr.clear()}_createMessageElement(n,r){const o=this._document.createElement("div");hw(o),o.textContent=n,r&&o.setAttribute("role",r),this._createMessagesContainer(),Fn.appendChild(o),Dr.set(d_(n,r),{messageElement:o,referenceCount:0})}_deleteMessageElement(n){const r=Dr.get(n),o=r&&r.messageElement;Fn&&o&&Fn.removeChild(o),Dr.delete(n)}_createMessagesContainer(){if(!Fn){const n=this._document.getElementById(uw);n&&n.parentNode&&n.parentNode.removeChild(n),Fn=this._document.createElement("div"),Fn.id=uw,Fn.style.visibility="hidden",Fn.classList.add("cdk-visually-hidden"),this._document.body.appendChild(Fn)}}_deleteMessagesContainer(){Fn&&Fn.parentNode&&(Fn.parentNode.removeChild(Fn),Fn=null)}_removeCdkDescribedByReferenceIds(n){const r=mf(n,"aria-describedby").filter(o=>0!=o.indexOf(dw));n.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(n,r){const o=Dr.get(r);(function(i,t,n){const r=mf(i,t);r.some(o=>o.trim()==n.trim())||(r.push(n.trim()),i.setAttribute(t,r.join(" ")))})(n,"aria-describedby",o.messageElement.id),n.setAttribute(_f,""),o.referenceCount++}_removeMessageReference(n,r){const o=Dr.get(r);o.referenceCount--,function(i,t,n){const o=mf(i,t).filter(s=>s!=n.trim());o.length?i.setAttribute(t,o.join(" ")):i.removeAttribute(t)}(n,"aria-describedby",o.messageElement.id),n.removeAttribute(_f)}_isElementDescribedByMessage(n,r){const o=mf(n,"aria-describedby"),s=Dr.get(r),a=s&&s.messageElement.id;return!!a&&-1!=o.indexOf(a)}_canBeDescribed(n,r){if(!this._isElementNode(n))return!1;if(r&&"object"==typeof r)return!0;const o=null==r?"":`${r}`.trim(),s=n.getAttribute("aria-label");return!(!o||s&&s.trim()===o)}_isElementNode(n){return n.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt))},i.\u0275prov=ze({factory:function(){return new i(Ae(tt))},token:i,providedIn:"root"}),i})();function d_(i,t){return"string"==typeof i?`${t||""}/${i}`:i}function hw(i){i.id||(i.id=`${dw}-${D7++}`)}function _w(i){return 0===i.offsetX&&0===i.offsetY}function yw(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}"undefined"!=typeof Element&&Element;const vw=new et("cdk-input-modality-detector-options"),z7={ignoreKeys:[18,17,224,91,16]},Pa=Sl({passive:!0,capture:!0});let bw=(()=>{class i{constructor(n,r,o,s){this._platform=n,this._mostRecentTarget=null,this._modality=new fi(null),this._lastTouchMs=0,this._onKeydown=a=>{var c,d;(null===(d=null===(c=this._options)||void 0===c?void 0:c.ignoreKeys)||void 0===d?void 0:d.some(y=>y===a.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ms(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(_w(a)?"keyboard":"mouse"),this._mostRecentTarget=ms(a))},this._onTouchstart=a=>{yw(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ms(a))},this._options=Object.assign(Object.assign({},z7),s),this.modalityDetected=this._modality.pipe(rw(1)),this.modalityChanged=this.modalityDetected.pipe(function(i,t){return n=>n.lift(new S7(i,t))}()),n.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Pa),o.addEventListener("mousedown",this._onMousedown,Pa),o.addEventListener("touchstart",this._onTouchstart,Pa)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Pa),document.removeEventListener("mousedown",this._onMousedown,Pa),document.removeEventListener("touchstart",this._onTouchstart,Pa))}}return i.\u0275fac=function(n){return new(n||i)(Ae(qt),Ae(ut),Ae(tt),Ae(vw,8))},i.\u0275prov=ze({factory:function(){return new i(Ae(qt),Ae(ut),Ae(tt),Ae(vw,8))},token:i,providedIn:"root"}),i})();const Tw=new et("cdk-focus-monitor-default-options"),yf=Sl({passive:!0,capture:!0});let xa=(()=>{class i{constructor(n,r,o,s,a){this._ngZone=n,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new l,this._rootNodeFocusAndBlurListener=c=>{const d=ms(c),y="focus"===c.type?this._onFocus:this._onBlur;for(let k=d;k;k=k.parentElement)y.call(this,c,k)},this._document=s,this._detectionMode=(null==a?void 0:a.detectionMode)||0}monitor(n,r=!1){const o=Qr(n);if(!this._platform.isBrowser||1!==o.nodeType)return gt(null);const s=function(i){if(function(){if(null==o_){const i="undefined"!=typeof document?document.head:null;o_=!(!i||!i.createShadowRoot&&!i.attachShadow)}return o_}()){const t=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;const c={checkChildren:r,subject:new l,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(n){const r=Qr(n),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(n,r,o){const s=Qr(n);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([c,d])=>this._originChanged(c,r,d)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(n,r,o){o?n.classList.add(r):n.classList.remove(r)}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(n){return 1===this._detectionMode||!!(null==n?void 0:n.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(n,r){this._toggleClass(n,"cdk-focused",!!r),this._toggleClass(n,"cdk-touch-focused","touch"===r),this._toggleClass(n,"cdk-keyboard-focused","keyboard"===r),this._toggleClass(n,"cdk-mouse-focused","mouse"===r),this._toggleClass(n,"cdk-program-focused","program"===r)}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,r){const o=this._elementInfo.get(r),s=ms(n);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(n,r){const o=this._elementInfo.get(r);!o||o.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(o.subject,null))}_emitOrigin(n,r){this._ngZone.run(()=>n.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const r=n.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,yf),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,yf)}),this._rootNodeFocusListenerCount.set(r,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ln(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){const r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,yf),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,yf),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,o){this._setClasses(n,r),this._emitOrigin(o.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){const r=[];return this._elementInfo.forEach((o,s)=>{(s===n||o.checkChildren&&s.contains(n))&&r.push([s,o])}),r}}return i.\u0275fac=function(n){return new(n||i)(Ae(ut),Ae(qt),Ae(bw),Ae(tt,8),Ae(Tw,8))},i.\u0275prov=ze({factory:function(){return new i(Ae(ut),Ae(qt),Ae(bw),Ae(tt,8),Ae(Tw,8))},token:i,providedIn:"root"}),i})();const ww="cdk-high-contrast-black-on-white",Aw="cdk-high-contrast-white-on-black",f_="cdk-high-contrast-active";let Rw=(()=>{class i{constructor(n,r){this._platform=n,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);const r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(n):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(n),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const n=this._document.body.classList;n.remove(f_),n.remove(ww),n.remove(Aw),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(n.add(f_),n.add(ww)):2===r&&(n.add(f_),n.add(Aw))}}}return i.\u0275fac=function(n){return new(n||i)(Ae(qt),Ae(tt))},i.\u0275prov=ze({factory:function(){return new i(Ae(qt),Ae(tt))},token:i,providedIn:"root"}),i})(),Y7=(()=>{class i{constructor(n){n._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(n){return new(n||i)(Ae(Rw))},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[El,u_]]}),i})();const Iw=new et("cdk-dir-doc",{providedIn:"root",factory:function(){return v1(tt)}});let Do=(()=>{class i{constructor(n){if(this.value="ltr",this.change=new Dt,n){const o=n.documentElement?n.documentElement.dir:null,s=(n.body?n.body.dir:null)||o;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(n){return new(n||i)(Ae(Iw,8))},i.\u0275prov=ze({factory:function(){return new i(Ae(Iw,8))},token:i,providedIn:"root"}),i})(),wl=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({}),i})();const Dw=new mo("12.2.13"),Ow=new mo("12.2.13"),ij=new et("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let _s,ri=(()=>{class i{constructor(n,r,o){this._hasDoneGlobalChecks=!1,this._document=o,n._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return!(!Kp()||s_())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[n])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const n=this._document.createElement("div");n.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(n);const r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(n)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Ow.full!==Dw.full&&console.warn("The Angular Material version ("+Ow.full+") does not match the Angular CDK version ("+Dw.full+").\nPlease ensure the versions of these two packages exactly match.")}}return i.\u0275fac=function(n){return new(n||i)(Ae(Rw),Ae(ij,8),Ae(tt))},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[wl],wl]}),i})();function h_(i){return class extends i{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Sn(t)}}}function p_(i,t){return class extends i{constructor(...n){super(...n),this.defaultColor=t,this.color=t}get color(){return this._color}set color(n){const r=n||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function Mw(i){return class extends i{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Sn(t)}}}function rj(i,t=0){return class extends i{constructor(...n){super(...n),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(n){this._tabIndex=null!=n?Io(n):this.defaultTabIndex}}}function oj(i){return class extends i{constructor(...t){super(...t),this.stateChanges=new l,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}try{_s="undefined"!=typeof Intl}catch(i){_s=!1}let kw=(()=>{class i{isErrorState(n,r){return!!(n&&n.invalid&&(n.touched||r&&r.submitted))}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=ze({factory:function(){return new i},token:i,providedIn:"root"}),i})();class _j{constructor(t,n,r){this._renderer=t,this.element=n,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Pw={enterDuration:225,exitDuration:150},g_=Sl({passive:!0}),xw=["mousedown","touchstart"],Lw=["mouseup","mouseleave","touchend","touchcancel"];class vj{constructor(t,n,r,o){this._target=t,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=Qr(r))}fadeInRipple(t,n,r={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Pw),r.animation);r.centered&&(t=o.left+o.width/2,n=o.top+o.height/2);const a=r.radius||function(i,t,n){const r=Math.max(Math.abs(i-n.left),Math.abs(i-n.right)),o=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+o*o)}(t,n,o),c=t-o.left,d=n-o.top,y=s.enterDuration,k=document.createElement("div");k.classList.add("mat-ripple-element"),k.style.left=c-a+"px",k.style.top=d-a+"px",k.style.height=2*a+"px",k.style.width=2*a+"px",null!=r.color&&(k.style.backgroundColor=r.color),k.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(k),function(i){window.getComputedStyle(i).getPropertyValue("opacity")}(k),k.style.transform="scale(1)";const q=new _j(this,k,r);return q.state=0,this._activeRipples.add(q),r.persistent||(this._mostRecentTransientRipple=q),this._runTimeoutOutsideZone(()=>{const J=q===this._mostRecentTransientRipple;q.state=1,!r.persistent&&(!J||!this._isPointerDown)&&q.fadeOut()},y),q}fadeOutRipple(t){const n=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!n)return;const r=t.element,o=Object.assign(Object.assign({},Pw),t.config.animation);r.style.transitionDuration=`${o.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.parentNode.removeChild(r)},o.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const n=Qr(t);!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,this._registerEvents(xw))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Lw),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const n=_w(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!yw(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=t.changedTouches;for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,n=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,n))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(n=>{this._triggerElement.addEventListener(n,this,g_)})})}_removeTriggerEvents(){this._triggerElement&&(xw.forEach(t=>{this._triggerElement.removeEventListener(t,this,g_)}),this._pointerUpEventsRegistered&&Lw.forEach(t=>{this._triggerElement.removeEventListener(t,this,g_)}))}}const Sj=new et("mat-ripple-global-options");let Rl=(()=>{class i{constructor(n,r,o,s,a){this._elementRef=n,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new vj(this,r,n,o)}get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,r=0,o){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,r,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),n))}}return i.\u0275fac=function(n){return new(n||i)(Se(Tt),Se(ut),Se(qt),Se(Sj,8),Se(So,8))},i.\u0275dir=Be({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){2&n&&Vt("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),i})(),m_=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[ri,El],ri]}),i})();const Oj=["underline"],Mj=["connectionContainer"],Nj=["inputContainer"],kj=["label"];function Pj(i,t){1&i&&(ra(0),xe(1,"div",14),st(2,"div",15),st(3,"div",16),st(4,"div",17),Le(),xe(5,"div",18),st(6,"div",15),st(7,"div",16),st(8,"div",17),Le(),oa())}function xj(i,t){1&i&&(xe(0,"div",19),Bn(1,1),Le())}function Lj(i,t){if(1&i&&(ra(0),Bn(1,2),xe(2,"span"),hn(3),Le(),oa()),2&i){const n=en(2);nt(3),go(n._control.placeholder)}}function Fj(i,t){1&i&&Bn(0,3,["*ngSwitchCase","true"])}function Vj(i,t){1&i&&(xe(0,"span",23),hn(1," *"),Le())}function jj(i,t){if(1&i){const n=_c();xe(0,"label",20,21),Ft("cdkObserveContent",function(){return oo(n),en().updateOutlineGap()}),rn(2,Lj,4,1,"ng-container",12),rn(3,Fj,1,0,"ng-content",12),rn(4,Vj,2,0,"span",22),Le()}if(2&i){const n=en();Vt("mat-empty",n._control.empty&&!n._shouldAlwaysFloat())("mat-form-field-empty",n._control.empty&&!n._shouldAlwaysFloat())("mat-accent","accent"==n.color)("mat-warn","warn"==n.color),ft("cdkObserveContentDisabled","outline"!=n.appearance)("id",n._labelId)("ngSwitch",n._hasLabel()),nn("for",n._control.id)("aria-owns",n._control.id),nt(2),ft("ngSwitchCase",!1),nt(1),ft("ngSwitchCase",!0),nt(1),ft("ngIf",!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)}}function Uj(i,t){1&i&&(xe(0,"div",24),Bn(1,4),Le())}function Bj(i,t){if(1&i&&(xe(0,"div",25,26),st(2,"span",27),Le()),2&i){const n=en();nt(2),Vt("mat-accent","accent"==n.color)("mat-warn","warn"==n.color)}}function Hj(i,t){1&i&&(xe(0,"div"),Bn(1,5),Le()),2&i&&ft("@transitionMessages",en()._subscriptAnimationState)}function Wj(i,t){if(1&i&&(xe(0,"div",31),hn(1),Le()),2&i){const n=en(2);ft("id",n._hintLabelId),nt(1),go(n.hintLabel)}}function Gj(i,t){if(1&i&&(xe(0,"div",28),rn(1,Wj,2,2,"div",29),Bn(2,6),st(3,"div",30),Bn(4,7),Le()),2&i){const n=en();ft("@transitionMessages",n._subscriptAnimationState),nt(1),ft("ngIf",n.hintLabel)}}const qj=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],zj=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Uw=new et("MatError"),Kj={transitionMessages:xg("transitionMessages",[Lg("enter",di({opacity:1,transform:"translateY(0%)"})),el("void => enter",[di({opacity:0,transform:"translateY(-5px)"}),Zc("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let __=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=Be({type:i}),i})();const Bw=new et("MatHint");let y_=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=Be({type:i,selectors:[["mat-label"]]}),i})(),Jj=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=Be({type:i,selectors:[["mat-placeholder"]]}),i})();const Hw=new et("MatPrefix"),Ww=new et("MatSuffix");let Gw=0;const Xj=p_(class{constructor(i){this._elementRef=i}},"primary"),Zj=new et("MAT_FORM_FIELD_DEFAULT_OPTIONS"),zw=new et("MatFormField");let eU=(()=>{class i extends Xj{constructor(n,r,o,s,a,c,d,y){super(n),this._changeDetectorRef=r,this._dir=s,this._defaults=a,this._platform=c,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new l,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Gw++,this._labelId="mat-form-field-label-"+Gw++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==y,this.appearance=a&&a.appearance?a.appearance:"legacy",this._hideRequiredMarker=!(!a||null==a.hideRequiredMarker)&&a.hideRequiredMarker}get appearance(){return this._appearance}set appearance(n){const r=this._appearance;this._appearance=n||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==n&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=Sn(n)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(n){this._explicitFormFieldControl=n}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const n=this._control;n.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${n.controlType}`),n.stateChanges.pipe(ss(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),n.ngControl&&n.ngControl.valueChanges&&n.ngControl.valueChanges.pipe(Ln(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ln(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),X(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ss(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ss(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ln(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(n){const r=this._control?this._control.ngControl:null;return r&&r[n]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Tl(this._label.nativeElement,"transitionend").pipe(ni(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&n.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,o=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?n.push(r.id):this._hintLabel&&n.push(this._hintLabelId),o&&n.push(o.id)}else this._errorChildren&&n.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(n)}}_validateControlChild(){}updateOutlineGap(){const n=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&n&&n.children.length&&n.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let r=0,o=0;const s=this._connectionContainerRef.nativeElement,a=s.querySelectorAll(".mat-form-field-outline-start"),c=s.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const d=s.getBoundingClientRect();if(0===d.width&&0===d.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const y=this._getStartEnd(d),k=n.children,q=this._getStartEnd(k[0].getBoundingClientRect());let J=0;for(let ae=0;ae<k.length;ae++)J+=k[ae].offsetWidth;r=Math.abs(q-y)-5,o=J>0?.75*J+10:0}for(let d=0;d<a.length;d++)a[d].style.width=`${r}px`;for(let d=0;d<c.length;d++)c[d].style.width=`${o}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(n){return this._dir&&"rtl"===this._dir.value?n.right:n.left}_isAttachedToDOM(){const n=this._elementRef.nativeElement;if(n.getRootNode){const r=n.getRootNode();return r&&r!==n}return document.documentElement.contains(n)}}return i.\u0275fac=function(n){return new(n||i)(Se(Tt),Se(Pi),Se(Tt),Se(Do,8),Se(Zj,8),Se(qt),Se(ut),Se(So,8))},i.\u0275cmp=dn({type:i,selectors:[["mat-form-field"]],contentQueries:function(n,r,o){if(1&n&&(Vi(o,__,5),Vi(o,__,7),Vi(o,y_,5),Vi(o,y_,7),Vi(o,Jj,5),Vi(o,Uw,5),Vi(o,Bw,5),Vi(o,Hw,5),Vi(o,Ww,5)),2&n){let s;pn(s=gn())&&(r._controlNonStatic=s.first),pn(s=gn())&&(r._controlStatic=s.first),pn(s=gn())&&(r._labelChildNonStatic=s.first),pn(s=gn())&&(r._labelChildStatic=s.first),pn(s=gn())&&(r._placeholderChild=s.first),pn(s=gn())&&(r._errorChildren=s),pn(s=gn())&&(r._hintChildren=s),pn(s=gn())&&(r._prefixChildren=s),pn(s=gn())&&(r._suffixChildren=s)}},viewQuery:function(n,r){if(1&n&&(Tr(Oj,5),Tr(Mj,7),Tr(Nj,5),Tr(kj,5)),2&n){let o;pn(o=gn())&&(r.underlineRef=o.first),pn(o=gn())&&(r._connectionContainerRef=o.first),pn(o=gn())&&(r._inputContainerRef=o.first),pn(o=gn())&&(r._label=o.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(n,r){2&n&&Vt("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[It([{provide:zw,useExisting:i}]),Ct],ngContentSelectors:zj,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(n,r){1&n&&(po(qj),xe(0,"div",0),xe(1,"div",1,2),Ft("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),rn(3,Pj,9,0,"ng-container",3),rn(4,xj,2,0,"div",4),xe(5,"div",5,6),Bn(7),xe(8,"span",7),rn(9,jj,5,16,"label",8),Le(),Le(),rn(10,Uj,2,0,"div",9),Le(),rn(11,Bj,3,4,"div",10),xe(12,"div",11),rn(13,Hj,2,1,"div",12),rn(14,Gj,5,2,"div",13),Le(),Le()),2&n&&(nt(3),ft("ngIf","outline"==r.appearance),nt(1),ft("ngIf",r._prefixChildren.length),nt(5),ft("ngIf",r._hasFloatingLabel()),nt(1),ft("ngIf",r._suffixChildren.length),nt(1),ft("ngIf","outline"!=r.appearance),nt(1),ft("ngSwitch",r._getDisplayedMessages()),nt(1),ft("ngSwitchCase","error"),nt(1),ft("ngSwitchCase","hint"))},directives:[Kc,ud,SS,cw],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Kj.transitionMessages]},changeDetection:0}),i})(),$w=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[Yc,ri,u_],ri]}),i})();const tU=new et("MAT_INPUT_VALUE_ACCESSOR"),nU=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let iU=0;const rU=oj(class{constructor(i,t,n,r){this._defaultErrorStateMatcher=i,this._parentForm=t,this._parentFormGroup=n,this.ngControl=r}});let oU=(()=>{class i extends rU{constructor(n,r,o,s,a,c,d,y,k,q){super(c,s,a,o),this._elementRef=n,this._platform=r,this._autofillMonitor=y,this._formField=q,this._uid="mat-input-"+iU++,this.focused=!1,this.stateChanges=new l,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(he=>YT().has(he));const J=this._elementRef.nativeElement,ae=J.nodeName.toLowerCase();this._inputValueAccessor=d||J,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&k.runOutsideAngular(()=>{n.nativeElement.addEventListener("keyup",he=>{const we=he.target;!we.value&&0===we.selectionStart&&0===we.selectionEnd&&(we.setSelectionRange(1,1),we.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ae,this._isTextarea="textarea"===ae,this._isInFormField=!!q,this._isNativeSelect&&(this.controlType=J.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(n){this._disabled=Sn(n),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(n){this._id=n||this._uid}get required(){return this._required}set required(n){this._required=Sn(n)}get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&YT().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(n){n!==this.value&&(this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=Sn(n)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}_focusChanged(n){n!==this.focused&&(this.focused=n,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var n,r;const o=(null===(r=null===(n=this._formField)||void 0===n?void 0:n._hideControlPlaceholder)||void 0===r?void 0:r.call(n))?null:this.placeholder;if(o!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=o,o?s.setAttribute("placeholder",o):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_validateType(){nU.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const n=this._elementRef.nativeElement,r=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const n=this._elementRef.nativeElement;return this._isNativeSelect&&(n.multiple||n.size>1)}}return i.\u0275fac=function(n){return new(n||i)(Se(Tt),Se(qt),Se(Jr,10),Se(df,8),Se(vl,8),Se(kw),Se(tU,10),Se(tw),Se(ut),Se(zw,8))},i.\u0275dir=Be({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(n,r){1&n&&Ft("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&n&&(aa("disabled",r.disabled)("required",r.required),nn("id",r.id)("data-placeholder",r.placeholder)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),Vt("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[It([{provide:__,useExisting:i}]),Ct,yn]}),i})(),sU=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({providers:[kw],imports:[[nw,$w,ri],nw,$w]}),i})();const Kw=["mat-button",""],Yw=["*"],cU=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],lU=p_(h_(Mw(class{constructor(i){this._elementRef=i}})));let Qw=(()=>{class i extends lU{constructor(n,r,o){super(n),this._focusMonitor=r,this._animationMode=o,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of cU)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);n.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(n,r){n?this._focusMonitor.focusVia(this._getHostElement(),n,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...n){return n.some(r=>this._getHostElement().hasAttribute(r))}}return i.\u0275fac=function(n){return new(n||i)(Se(Tt),Se(xa),Se(So,8))},i.\u0275cmp=dn({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(n,r){if(1&n&&Tr(Rl,5),2&n){let o;pn(o=gn())&&(r.ripple=o.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(n,r){2&n&&(nn("disabled",r.disabled||null),Vt("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ct],attrs:Kw,ngContentSelectors:Yw,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,r){1&n&&(po(),xe(0,"span",0),Bn(1),Le(),st(2,"span",1),st(3,"span",2)),2&n&&(nt(2),Vt("mat-button-ripple-round",r.isRoundButton||r.isIconButton),ft("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Rl],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),uU=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[m_,ri],ri]}),i})();const dU=["thumbContainer"],fU=["toggleBar"],hU=["input"],pU=function(i){return{enterDuration:i}},gU=["*"],mU=new et("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let _U=0;const yU={provide:ar,useExisting:Ut(()=>Xw),multi:!0};class vU{constructor(t,n){this.source=t,this.checked=n}}const EU=rj(p_(Mw(h_(class{constructor(i){this._elementRef=i}}))));let Xw=(()=>{class i extends EU{constructor(n,r,o,s,a,c){super(n),this._focusMonitor=r,this._changeDetectorRef=o,this.defaults=a,this._onChange=d=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++_U,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Dt,this.toggleChange=new Dt,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=a.color||"accent",this._noopAnimations="NoopAnimations"===c}get required(){return this._required}set required(n){this._required=Sn(n)}get checked(){return this._checked}set checked(n){this._checked=Sn(n),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(n=>{"keyboard"===n||"program"===n?this._inputElement.nativeElement.focus():n||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(n){n.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(n){n.stopPropagation()}writeValue(n){this.checked=!!n}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this.disabled=n,this._changeDetectorRef.markForCheck()}focus(n,r){r?this._focusMonitor.focusVia(this._inputElement,r,n):this._inputElement.nativeElement.focus(n)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new vU(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return i.\u0275fac=function(n){return new(n||i)(Se(Tt),Se(xa),Se(Pi),Fo("tabindex"),Se(mU),Se(So,8))},i.\u0275cmp=dn({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(n,r){if(1&n&&(Tr(dU,5),Tr(fU,5),Tr(hU,5)),2&n){let o;pn(o=gn())&&(r._thumbEl=o.first),pn(o=gn())&&(r._thumbBarEl=o.first),pn(o=gn())&&(r._inputElement=o.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(n,r){2&n&&(aa("id",r.id),nn("tabindex",r.disabled?null:-1)("aria-label",null)("aria-labelledby",null),Vt("mat-checked",r.checked)("mat-disabled",r.disabled)("mat-slide-toggle-label-before","before"==r.labelPosition)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[It([yU]),Ct],ngContentSelectors:gU,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(n,r){if(1&n&&(po(),xe(0,"label",0,1),xe(2,"div",2,3),xe(4,"input",4,5),Ft("change",function(s){return r._onChangeEvent(s)})("click",function(s){return r._onInputClick(s)}),Le(),xe(6,"div",6,7),st(8,"div",8),xe(9,"div",9),st(10,"div",10),Le(),Le(),Le(),xe(11,"span",11,12),Ft("cdkObserveContent",function(){return r._onLabelTextChange()}),xe(13,"span",13),hn(14,"\xa0"),Le(),Bn(15),Le(),Le()),2&n){const o=bu(1),s=bu(12);nn("for",r.inputId),nt(2),Vt("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),nt(2),ft("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex)("checked",r.checked)("disabled",r.disabled),nn("name",r.name)("aria-checked",r.checked.toString())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),nt(5),ft("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",function(i,t,n,r){return G0(Fe(),Jn(),i,t,n,r)}(18,pU,r._noopAnimations?0:150))}},directives:[Rl,cw],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),i})(),Zw=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({}),i})(),CU=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[Zw,m_,ri,u_],Zw,ri]}),i})();new class extends cr{flush(t){this.active=!0,this.scheduled=void 0;const{actions:n}=this;let r,o=-1,s=n.length;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while(++o<s&&(t=n.shift()));if(this.active=!1,r){for(;++o<s&&(t=n.shift());)t.unsubscribe();throw r}}}(class extends pf{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}requestAsyncId(t,n,r=0){return null!==r&&r>0?super.requestAsyncId(t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,n,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)}});let RU=1;const IU=Promise.resolve(),Ef={};function eA(i){return i in Ef&&(delete Ef[i],!0)}const tA={setImmediate(i){const t=RU++;return Ef[t]=!0,IU.then(()=>eA(t)&&i()),t},clearImmediate(i){eA(i)}};new class extends cr{flush(t){this.active=!0,this.scheduled=void 0;const{actions:n}=this;let r,o=-1,s=n.length;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while(++o<s&&(t=n.shift()));if(this.active=!1,r){for(;++o<s&&(t=n.shift());)t.unsubscribe();throw r}}}(class extends pf{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}requestAsyncId(t,n,r=0){return null!==r&&r>0?super.requestAsyncId(t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=tA.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,n,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(t,n,r);0===t.actions.length&&(tA.clearImmediate(n),t.scheduled=void 0)}});new class extends cr{}(class extends pf{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(t,n,r):t.flush(this)}});class hi{constructor(t,n,r){this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,n,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}}accept(t,n,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,n,r)}toObservable(){switch(this.kind){case"N":return gt(this.value);case"E":return function(i,t){return new te(n=>n.error(i))}(this.error);case"C":return Fd()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new hi("N",t):hi.undefinedValueNotification}static createError(t){return new hi("E",void 0,t)}static createComplete(){return hi.completeNotification}}hi.completeNotification=new hi("C"),hi.undefinedValueNotification=new hi("N",void 0);let La=(()=>{class i{constructor(n,r,o){this._ngZone=n,this._platform=r,this._scrolled=new l,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){const r=this.scrollContainers.get(n);r&&(r.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=20){return this._platform.isBrowser?new te(r=>{this._globalSubscription||this._addGlobalListener();const o=n>0?this._scrolled.pipe(gf(n)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):gt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((n,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(n,r){const o=this.getAncestorScrollContainers(n);return this.scrolled(r).pipe(as(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(n){const r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,n)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(n,r){let o=Qr(r),s=n.getElementRef().nativeElement;do{if(o==s)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Tl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(n){return new(n||i)(Ae(ut),Ae(qt),Ae(tt,8))},i.\u0275prov=ze({factory:function(){return new i(Ae(ut),Ae(qt),Ae(tt,8))},token:i,providedIn:"root"}),i})(),Il=(()=>{class i{constructor(n,r,o){this._platform=n,this._change=new l,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(n.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){const n=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+o,right:n.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const n=this._document,r=this._getWindow(),o=n.documentElement,s=o.getBoundingClientRect();return{top:-s.top||n.body.scrollTop||r.scrollY||o.scrollTop||0,left:-s.left||n.body.scrollLeft||r.scrollX||o.scrollLeft||0}}change(n=20){return n>0?this._change.pipe(gf(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(n){return new(n||i)(Ae(qt),Ae(ut),Ae(tt,8))},i.\u0275prov=ze({factory:function(){return new i(Ae(qt),Ae(ut),Ae(tt,8))},token:i,providedIn:"root"}),i})(),v_=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({}),i})(),aA=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[wl,El,v_],wl,v_]}),i})();class E_{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class cA extends E_{constructor(t,n,r,o){super(),this.component=t,this.viewContainerRef=n,this.injector=r,this.componentFactoryResolver=o}}class b_ extends E_{constructor(t,n,r){super(),this.templateRef=t,this.viewContainerRef=n,this.context=r}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class oB extends E_{constructor(t){super(),this.element=t instanceof Tt?t.nativeElement:t}}class sB extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof cA?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof b_?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof oB?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,n,r,o,s){super(),this.outletElement=t,this._componentFactoryResolver=n,this._appRef=r,this._defaultInjector=o,this.attachDomPortal=a=>{const c=a.element,d=this._document.createComment("dom-portal");c.parentNode.insertBefore(d,c),this.outletElement.appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=s}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let o;return t.viewContainerRef?(o=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>o.destroy())):(o=r.create(t.injector||this._defaultInjector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=t,o}attachTemplatePortal(t){let n=t.viewContainerRef,r=n.createEmbeddedView(t.templateRef,t.context);return r.rootNodes.forEach(o=>this.outletElement.appendChild(o)),r.detectChanges(),this.setDisposeFn(()=>{let o=n.indexOf(r);-1!==o&&n.remove(o)}),this._attachedPortal=t,r}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let aB=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({}),i})();const fA=JT();class dB{constructor(t,n){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Cn(-this._previousScrollPosition.left),t.style.top=Cn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,o=this._document.body.style,s=r.scrollBehavior||"",a=o.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),fA&&(r.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),fA&&(r.scrollBehavior=s,o.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,r=this._viewportRuler.getViewportSize();return n.scrollHeight>r.height||n.scrollWidth>r.width}}class fB{constructor(t,n,r,o){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=r,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class hA{enable(){}disable(){}attach(){}}function S_(i,t){return t.some(n=>i.bottom<n.top||i.top>n.bottom||i.right<n.left||i.left>n.right)}function pA(i,t){return t.some(n=>i.top<n.top||i.bottom>n.bottom||i.left<n.left||i.right>n.right)}class hB{constructor(t,n,r,o){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this._config=o,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:o}=this._viewportRuler.getViewportSize();S_(n,[{width:r,height:o,bottom:o,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let pB=(()=>{class i{constructor(n,r,o,s){this._scrollDispatcher=n,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new hA,this.close=a=>new fB(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new dB(this._viewportRuler,this._document),this.reposition=a=>new hB(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}}return i.\u0275fac=function(n){return new(n||i)(Ae(La),Ae(Il),Ae(ut),Ae(tt))},i.\u0275prov=ze({factory:function(){return new i(Ae(La),Ae(Il),Ae(ut),Ae(tt))},token:i,providedIn:"root"}),i})();class gA{constructor(t){if(this.scrollStrategy=new hA,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const n=Object.keys(t);for(const r of n)void 0!==t[r]&&(this[r]=t[r])}}}class gB{constructor(t,n,r,o,s){this.offsetX=r,this.offsetY=o,this.panelClass=s,this.originX=t.originX,this.originY=t.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY}}class mB{constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}}let mA=(()=>{class i{constructor(n){this._attachedOverlays=[],this._document=n}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){const r=this._attachedOverlays.indexOf(n);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt))},i.\u0275prov=ze({factory:function(){return new i(Ae(tt))},token:i,providedIn:"root"}),i})(),_B=(()=>{class i extends mA{constructor(n){super(n),this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){o[s]._keydownEvents.next(r);break}}}add(n){super.add(n),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt))},i.\u0275prov=ze({factory:function(){return new i(Ae(tt))},token:i,providedIn:"root"}),i})(),yB=(()=>{class i extends mA{constructor(n,r){super(n),this._platform=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ms(o)},this._clickListener=o=>{const s=ms(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let d=c.length-1;d>-1;d--){const y=c[d];if(!(y._outsidePointerEvents.observers.length<1)&&y.hasAttached()){if(y.overlayElement.contains(s)||y.overlayElement.contains(a))break;y._outsidePointerEvents.next(o)}}}}add(n){if(super.add(n),!this._isAttached){const r=this._document.body;r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const n=this._document.body;n.removeEventListener("pointerdown",this._pointerDownListener,!0),n.removeEventListener("click",this._clickListener,!0),n.removeEventListener("auxclick",this._clickListener,!0),n.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(n.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt),Ae(qt))},i.\u0275prov=ze({factory:function(){return new i(Ae(tt),Ae(qt))},token:i,providedIn:"root"}),i})(),C_=(()=>{class i{constructor(n,r){this._platform=r,this._document=n}ngOnDestroy(){const n=this._containerElement;n&&n.parentNode&&n.parentNode.removeChild(n)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const n="cdk-overlay-container";if(this._platform.isBrowser||s_()){const o=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].parentNode.removeChild(o[s])}const r=this._document.createElement("div");r.classList.add(n),s_()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt),Ae(qt))},i.\u0275prov=ze({factory:function(){return new i(Ae(tt),Ae(qt))},token:i,providedIn:"root"}),i})();class vB{constructor(t,n,r,o,s,a,c,d,y){this._portalOutlet=t,this._host=n,this._pane=r,this._config=o,this._ngZone=s,this._keyboardDispatcher=a,this._document=c,this._location=d,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new l,this._attachments=new l,this._detachments=new l,this._locationChanges=v.EMPTY,this._backdropClickHandler=k=>this._backdropClick.next(k),this._keydownEvents=new l,this._outsidePointerEvents=new l,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let n=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ni(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Cn(this._config.width),t.height=Cn(this._config.height),t.minWidth=Cn(this._config.minWidth),t.minHeight=Cn(this._config.minHeight),t.maxWidth=Cn(this._config.maxWidth),t.maxHeight=Cn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let n;const r=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",r),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(n)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",r)}),t.style.pointerEvents="none",n=this._ngZone.runOutsideAngular(()=>setTimeout(r,500))}_toggleClasses(t,n,r){const o=t.classList;hf(n).forEach(s=>{s&&(r?o.add(s):o.remove(s))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Ln(X(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.parentNode&&t.parentNode.removeChild(t),this._backdropElement===t&&(this._backdropElement=null))}}const _A="cdk-overlay-connected-position-bounding-box",EB=/([A-Za-z%]+)$/;class yA{constructor(t,n,r,o,s){this._viewportRuler=n,this._document=r,this._platform=o,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new l,this._resizeSubscription=v.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(_A),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,n=this._overlayRect,r=this._viewportRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,a),d=this._getOverlayPoint(c,n,a),y=this._getOverlayFit(d,n,r,a);if(y.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(y,d,r)?o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<y.visibleArea)&&(s={overlayFit:y,overlayPoint:d,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(const d of o){const y=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);y>c&&(c=y,a=d)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ys(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(_A),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],n=this._getOriginPoint(this._originRect,t);this._applyPosition(t,n)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,n){let r,o;if("center"==n.originX)r=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==n.originX?s:a}return o="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,{x:r,y:o}}_getOverlayPoint(t,n,r){let o,s;return o="center"==r.overlayX?-n.width/2:"start"===r.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,s="center"==r.overlayY?-n.height/2:"top"==r.overlayY?0:-n.height,{x:t.x+o,y:t.y+s}}_getOverlayFit(t,n,r,o){const s=EA(n);let{x:a,y:c}=t,d=this._getOffset(o,"x"),y=this._getOffset(o,"y");d&&(a+=d),y&&(c+=y);let J=0-c,ae=c+s.height-r.height,he=this._subtractOverflows(s.width,0-a,a+s.width-r.width),we=this._subtractOverflows(s.height,J,ae),be=he*we;return{visibleArea:be,isCompletelyWithinViewport:s.width*s.height===be,fitsInViewportVertically:we===s.height,fitsInViewportHorizontally:he==s.width}}_canFitWithFlexibleDimensions(t,n,r){if(this._hasFlexibleDimensions){const o=r.bottom-n.y,s=r.right-n.x,a=vA(this._overlayRef.getConfig().minHeight),c=vA(this._overlayRef.getConfig().minWidth),y=t.fitsInViewportHorizontally||null!=c&&c<=s;return(t.fitsInViewportVertically||null!=a&&a<=o)&&y}return!1}_pushOverlayOnScreen(t,n,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const o=EA(n),s=this._viewportRect,a=Math.max(t.x+o.width-s.width,0),c=Math.max(t.y+o.height-s.height,0),d=Math.max(s.top-r.top-t.y,0),y=Math.max(s.left-r.left-t.x,0);let k=0,q=0;return k=o.width<=s.width?y||-a:t.x<this._viewportMargin?s.left-r.left-t.x:0,q=o.height<=s.height?d||-c:t.y<this._viewportMargin?s.top-r.top-t.y:0,this._previousPushAmount={x:k,y:q},{x:t.x+k,y:t.y+q}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),o=new mB(t,r);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,o=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${r} ${o}`}_calculateBoundingBoxRect(t,n){const r=this._viewportRect,o=this._isRtl();let s,a,c,k,q,J;if("top"===n.overlayY)a=t.y,s=r.height-a+this._viewportMargin;else if("bottom"===n.overlayY)c=r.height-t.y+2*this._viewportMargin,s=r.height-c+this._viewportMargin;else{const ae=Math.min(r.bottom-t.y+r.top,t.y),he=this._lastBoundingBoxSize.height;s=2*ae,a=t.y-ae,s>he&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.y-he/2)}if("end"===n.overlayX&&!o||"start"===n.overlayX&&o)J=r.width-t.x+this._viewportMargin,k=t.x-this._viewportMargin;else if("start"===n.overlayX&&!o||"end"===n.overlayX&&o)q=t.x,k=r.right-t.x;else{const ae=Math.min(r.right-t.x+r.left,t.x),he=this._lastBoundingBoxSize.width;k=2*ae,q=t.x-ae,k>he&&!this._isInitialRender&&!this._growAfterOpen&&(q=t.x-he/2)}return{top:a,left:q,bottom:c,right:J,width:k,height:s}}_setBoundingBoxStyles(t,n){const r=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;o.height=Cn(r.height),o.top=Cn(r.top),o.bottom=Cn(r.bottom),o.width=Cn(r.width),o.left=Cn(r.left),o.right=Cn(r.right),o.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",o.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",s&&(o.maxHeight=Cn(s)),a&&(o.maxWidth=Cn(a))}this._lastBoundingBoxSize=r,ys(this._boundingBox.style,o)}_resetBoundingBoxStyles(){ys(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ys(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){const r={},o=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(o){const k=this._viewportRuler.getViewportScrollPosition();ys(r,this._getExactOverlayY(n,t,k)),ys(r,this._getExactOverlayX(n,t,k))}else r.position="static";let c="",d=this._getOffset(n,"x"),y=this._getOffset(n,"y");d&&(c+=`translateX(${d}px) `),y&&(c+=`translateY(${y}px)`),r.transform=c.trim(),a.maxHeight&&(o?r.maxHeight=Cn(a.maxHeight):s&&(r.maxHeight="")),a.maxWidth&&(o?r.maxWidth=Cn(a.maxWidth):s&&(r.maxWidth="")),ys(this._pane.style,r)}_getExactOverlayY(t,n,r){let o={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r));let a=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=a,"bottom"===t.overlayY?o.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":o.top=Cn(s.y),o}_getExactOverlayX(t,n,r){let a,o={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),a=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===a?o.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":o.left=Cn(s.x),o}_getScrollVisibility(){const t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),r=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:pA(t,r),isOriginOutsideView:S_(t,r),isOverlayClipped:pA(n,r),isOverlayOutsideView:S_(n,r)}}_subtractOverflows(t,...n){return n.reduce((r,o)=>r-Math.max(o,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+n-this._viewportMargin,width:t-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return"x"===n?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&hf(t).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Tt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const n=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+n,height:r,width:n}}}function ys(i,t){for(let n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i}function vA(i){if("number"!=typeof i&&null!=i){const[t,n]=i.split(EB);return n&&"px"!==n?null:parseFloat(t)}return i||null}function EA(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}class bB{constructor(t,n,r,o,s,a,c){this._preferredPositions=[],this._positionStrategy=new yA(r,o,s,a,c).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,n),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,n,r,o){const s=new gB(t,n,r,o);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const bA="cdk-global-overlay-wrapper";class SB{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(bA),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:o,height:s,maxWidth:a,maxHeight:c}=r,d=!("100%"!==o&&"100vw"!==o||a&&"100%"!==a&&"100vw"!==a),y=!("100%"!==s&&"100vh"!==s||c&&"100%"!==c&&"100vh"!==c);t.position=this._cssPosition,t.marginLeft=d?"0":this._leftOffset,t.marginTop=y?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,d?n.justifyContent="flex-start":"center"===this._justifyContent?n.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?n.justifyContent="flex-end":"flex-end"===this._justifyContent&&(n.justifyContent="flex-start"):n.justifyContent=this._justifyContent,n.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,r=n.style;n.classList.remove(bA),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let CB=(()=>{class i{constructor(n,r,o,s){this._viewportRuler=n,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new SB}connectedTo(n,r,o){return new bB(r,o,n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(n){return new yA(n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(n){return new(n||i)(Ae(Il),Ae(tt),Ae(qt),Ae(C_))},i.\u0275prov=ze({factory:function(){return new i(Ae(Il),Ae(tt),Ae(qt),Ae(C_))},token:i,providedIn:"root"}),i})(),TB=0,Fa=(()=>{class i{constructor(n,r,o,s,a,c,d,y,k,q,J){this.scrollStrategies=n,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=d,this._document=y,this._directionality=k,this._location=q,this._outsideClickDispatcher=J}create(n){const r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new gA(n);return a.direction=a.direction||this._directionality.value,new vB(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(n){const r=this._document.createElement("div");return r.id="cdk-overlay-"+TB++,r.classList.add("cdk-overlay-pane"),n.appendChild(r),r}_createHostElement(){const n=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalOutlet(n){return this._appRef||(this._appRef=this._injector.get(Hr)),new sB(n,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(n){return new(n||i)(Ae(pB),Ae(C_),Ae(Zi),Ae(CB),Ae(_B),Ae(Bt),Ae(ut),Ae(tt),Ae(Do),Ae(qc),Ae(yB))},i.\u0275prov=ze({token:i,factory:i.\u0275fac}),i})();const RB={provide:new et("cdk-connected-overlay-scroll-strategy"),deps:[Fa],useFactory:function(i){return()=>i.scrollStrategies.reposition()}};let IB=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({providers:[Fa,RB],imports:[[wl,aB,aA],aA]}),i})();const CA=new Set;let Va,TA=(()=>{class i{constructor(n){this._platform=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):OB}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&function(i){if(!CA.has(i))try{Va||(Va=document.createElement("style"),Va.setAttribute("type","text/css"),document.head.appendChild(Va)),Va.sheet&&(Va.sheet.insertRule(`@media ${i} {body{ }}`,0),CA.add(i))}catch(t){console.error(t)}}(n),this._matchMedia(n)}}return i.\u0275fac=function(n){return new(n||i)(Ae(qt))},i.\u0275prov=ze({factory:function(){return new i(Ae(qt))},token:i,providedIn:"root"}),i})();function OB(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let MB=(()=>{class i{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new l}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return wA(hf(n)).some(o=>this._registerQuery(o).mql.matches)}observe(n){let s=BC(wA(hf(n)).map(a=>this._registerQuery(a).observable));return s=Ld(s.pipe(ni(1)),s.pipe(rw(1),sw(0))),s.pipe(S(a=>{const c={matches:!1,breakpoints:{}};return a.forEach(({matches:d,query:y})=>{c.matches=c.matches||d,c.breakpoints[y]=d}),c}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);const r=this._mediaMatcher.matchMedia(n),s={observable:new te(a=>{const c=d=>this._zone.run(()=>a.next(d));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(ss(r),S(({matches:a})=>({query:n,matches:a})),Ln(this._destroySubject)),mql:r};return this._queries.set(n,s),s}}return i.\u0275fac=function(n){return new(n||i)(Ae(TA),Ae(ut))},i.\u0275prov=ze({factory:function(){return new i(Ae(TA),Ae(ut))},token:i,providedIn:"root"}),i})();function wA(i){return i.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}const kB={tooltipState:xg("state",[Lg("initial, void, hidden",di({opacity:0,transform:"scale(0)"})),Lg("visible",di({transform:"scale(1)"})),el("* => visible",Zc("200ms cubic-bezier(0, 0, 0.2, 1)",X5([di({opacity:0,transform:"scale(0)",offset:0}),di({opacity:.5,transform:"scale(0.99)",offset:.5}),di({opacity:1,transform:"scale(1)",offset:1})]))),el("* => hidden",Zc("100ms cubic-bezier(0, 0, 0.2, 1)",di({opacity:0})))])},AA="tooltip-panel",RA=Sl({passive:!0}),IA=new et("mat-tooltip-scroll-strategy"),FB={provide:IA,deps:[Fa],useFactory:function(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},VB=new et("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let UB=(()=>{class i{constructor(n,r,o,s,a,c,d,y,k,q,J,ae){this._overlay=n,this._elementRef=r,this._scrollDispatcher=o,this._viewContainerRef=s,this._ngZone=a,this._platform=c,this._ariaDescriber=d,this._focusMonitor=y,this._dir=q,this._defaultOptions=J,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new l,this._handleKeydown=he=>{this._isTooltipVisible()&&27===he.keyCode&&!function(i,...t){return t.length?t.some(n=>i[n]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}(he)&&(he.preventDefault(),he.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=k,this._document=ae,J&&(J.position&&(this.position=J.position),J.touchGestures&&(this.touchGestures=J.touchGestures)),q.change.pipe(Ln(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),a.runOutsideAngular(()=>{r.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(n){var r;n!==this._position&&(this._position=n,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(r=this._tooltipInstance)||void 0===r||r.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(n){this._disabled=Sn(n),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(n){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=n?String(n).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(n){this._tooltipClass=n,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ln(this._destroyed)).subscribe(n=>{n?"keyboard"===n&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const n=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),n.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([r,o])=>{n.removeEventListener(r,o,RA)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(n,this.message,"tooltip"),this._focusMonitor.stopMonitoring(n)}show(n=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const r=this._createOverlay();this._detach(),this._portal=this._portal||new cA(this._tooltipComponent,this._viewContainerRef),this._tooltipInstance=r.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Ln(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(n)}hide(n=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(n)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(Ln(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${AA}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ln(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ln(this._destroyed)).subscribe(()=>{var o;return null===(o=this._tooltipInstance)||void 0===o?void 0:o._handleBodyInteraction()}),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(n){const r=n.getConfig().positionStrategy,o=this._getOrigin(),s=this._getOverlayPosition();r.withPositions([this._addOffset(Object.assign(Object.assign({},o.main),s.main)),this._addOffset(Object.assign(Object.assign({},o.fallback),s.fallback))])}_addOffset(n){return n}_getOrigin(){const n=!this._dir||"ltr"==this._dir.value,r=this.position;let o;"above"==r||"below"==r?o={originX:"center",originY:"above"==r?"top":"bottom"}:"before"==r||"left"==r&&n||"right"==r&&!n?o={originX:"start",originY:"center"}:("after"==r||"right"==r&&n||"left"==r&&!n)&&(o={originX:"end",originY:"center"});const{x:s,y:a}=this._invertPosition(o.originX,o.originY);return{main:o,fallback:{originX:s,originY:a}}}_getOverlayPosition(){const n=!this._dir||"ltr"==this._dir.value,r=this.position;let o;"above"==r?o={overlayX:"center",overlayY:"bottom"}:"below"==r?o={overlayX:"center",overlayY:"top"}:"before"==r||"left"==r&&n||"right"==r&&!n?o={overlayX:"end",overlayY:"center"}:("after"==r||"right"==r&&n||"left"==r&&!n)&&(o={overlayX:"start",overlayY:"center"});const{x:s,y:a}=this._invertPosition(o.overlayX,o.overlayY);return{main:o,fallback:{overlayX:s,overlayY:a}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(ni(1),Ln(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(n){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=n,this._tooltipInstance._markForCheck())}_invertPosition(n,r){return"above"===this.position||"below"===this.position?"top"===r?r="bottom":"bottom"===r&&(r="top"):"end"===n?n="start":"start"===n&&(n="end"),{x:n,y:r}}_updateCurrentPositionClass(n){const{overlayY:r,originX:o,originY:s}=n;let a;if(a="center"===r?this._dir&&"rtl"===this._dir.value?"end"===o?"left":"right":"start"===o?"left":"right":"bottom"===r&&"top"===s?"above":"below",a!==this._currentPosition){const c=this._overlayRef;if(c){const d=`${this._cssClassPrefix}-${AA}-`;c.removePanelClass(d+this._currentPosition),c.addPanelClass(d+a)}this._currentPosition=a}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const n=[];if(this._platformSupportsMouseEvents())n.push(["mouseleave",()=>this.hide()],["wheel",r=>this._wheelListener(r)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const r=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};n.push(["touchend",r],["touchcancel",r])}this._addListeners(n),this._passiveListeners.push(...n)}_addListeners(n){n.forEach(([r,o])=>{this._elementRef.nativeElement.addEventListener(r,o,RA)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(n){if(this._isTooltipVisible()){const r=this._document.elementFromPoint(n.clientX,n.clientY),o=this._elementRef.nativeElement;r!==o&&!o.contains(r)&&this.hide()}}_disableNativeGesturesIfNecessary(){const n=this.touchGestures;if("off"!==n){const r=this._elementRef.nativeElement,o=r.style;("on"===n||"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName)&&(o.userSelect=o.msUserSelect=o.webkitUserSelect=o.MozUserSelect="none"),("on"===n||!r.draggable)&&(o.webkitUserDrag="none"),o.touchAction="none",o.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(n){return new(n||i)(Se(Fa),Se(Tt),Se(La),Se(kn),Se(ut),Se(qt),Se(fw),Se(xa),Se(void 0),Se(Do),Se(void 0),Se(tt))},i.\u0275dir=Be({type:i,inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),BB=(()=>{class i extends UB{constructor(n,r,o,s,a,c,d,y,k,q,J,ae){super(n,r,o,s,a,c,d,y,k,q,J,ae),this._tooltipComponent=WB}}return i.\u0275fac=function(n){return new(n||i)(Se(Fa),Se(Tt),Se(La),Se(kn),Se(ut),Se(qt),Se(fw),Se(xa),Se(IA),Se(Do,8),Se(VB,8),Se(tt))},i.\u0275dir=Be({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[Ct]}),i})(),HB=(()=>{class i{constructor(n){this._changeDetectorRef=n,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new l}show(n){clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=void 0,this._onShow(),this._markForCheck()},n)}hide(n){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=void 0,this._markForCheck()},n)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(n){const r=n.toState;"hidden"===r&&!this.isVisible()&&this._onHide.next(),("visible"===r||"hidden"===r)&&(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_onShow(){}}return i.\u0275fac=function(n){return new(n||i)(Se(Pi))},i.\u0275dir=Be({type:i}),i})(),WB=(()=>{class i extends HB{constructor(n,r){super(n),this._breakpointObserver=r,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}}return i.\u0275fac=function(n){return new(n||i)(Se(Pi),Se(MB))},i.\u0275cmp=dn({type:i,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(n,r){2&n&&Tu("zoom","visible"===r._visibility?1:null)},features:[Ct],decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(n,r){if(1&n&&(xe(0,"div",0),Ft("@state.start",function(){return r._animationStart()})("@state.done",function(s){return r._animationDone(s)}),kc(1,"async"),hn(2),Le()),2&n){let o;Vt("mat-tooltip-handset",null==(o=Pc(1,5,r._isHandset))?null:o.matches),ft("ngClass",r.tooltipClass)("@state",r._visibility),nt(2),go(r.message)}},directives:[yS],pipes:[dd],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[kB.tooltipState]},changeDetection:0}),i})(),GB=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({providers:[FB],imports:[[Y7,Yc,IB,ri],ri,v_]}),i})();const DA_configs={AppID:"fee9eb8f5bb44a6893ec96fd5e993a31"};let qB=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=dn({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&st(0,"router-outlet")},directives:[Pm],styles:[""],changeDetection:0}),i})();function OA(i=0,t=ka){return(!a_(i)||i<0)&&(i=0),(!t||"function"!=typeof t.schedule)&&(t=ka),new te(n=>(n.add(t.schedule(zB,i,{subscriber:n,counter:0,period:i})),n))}function zB(i){const{subscriber:t,counter:n,period:r}=i;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}class YB{constructor(t,n){this.delay=t,this.scheduler=n}call(t,n){return n.subscribe(new T_(t,this.delay,this.scheduler))}}class T_ extends E{constructor(t,n,r){super(t),this.delay=n,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const n=t.source,r=n.queue,o=t.scheduler,s=t.destination;for(;r.length>0&&r[0].time-o.now()<=0;)r.shift().notification.observe(s);if(r.length>0){const a=Math.max(0,r[0].time-o.now());this.schedule(t,a)}else this.unsubscribe(),n.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(T_.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const n=this.scheduler,r=new JB(n.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(n)}_next(t){this.scheduleNotification(hi.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(hi.createComplete()),this.unsubscribe()}}class JB{constructor(t,n){this.time=t,this.notification=n}}var QB=V(507);class oi{constructor(t){this.config=t,this.audioDevices=[],this.videoDevices=[],this.AgoraRTC=oi.AgoraRTC,this.checkSystemRequirements()?this.collectDevices():this.AgoraRTC.Logger.error("Web RTC is not supported in this browser")}checkSystemRequirements(){return this.AgoraRTC.checkSystemRequirements()}createClient(t,n=!0,r,o){return this.client=this.AgoraRTC.createClient(t),n&&this.init(this.config.AppID,r,o),this.client}createStream(t){if(!t.microphoneId&&this.audioDevices&&this.audioDevices.length&&(t.microphoneId=this.audioDevices[0].deviceId),!t.cameraId&&this.videoDevices&&this.videoDevices.length){const n=this.videoDevices[0].deviceId;t.cameraId=t.cameraId||n}return this.AgoraRTC.createStream(t)}init(t,n,r){this.client.init(t,n,r)}collectDevices(){this.AgoraRTC.getDevices(t=>{const n=t.filter(o=>"audioinput"===o.kind&&"default"!==o.deviceId),r=t.filter(o=>"videoinput"===o.kind&&"default"!==o.deviceId);this.audioDevices=n,this.videoDevices=r})}}oi.\u0275fac=function(t){return new(t||oi)(Ae("config"))},oi.\u0275prov=ze({token:oi,factory:oi.\u0275fac,providedIn:"root"}),oi.AgoraRTC=QB,oi.ngInjectableDef=ze({factory:function(){return new oi(Ae("config"))},token:oi,providedIn:"root"});let XB=(()=>{class i{static forRoot(n){return{ngModule:i,providers:[oi,{provide:"config",useValue:n}]}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({}),i})();const $t={RELAY_OK:0,SERVER_ERROR_RESPONSE:1,SERVER_NO_RESPONSE:2,NO_RESOURCE_AVAILABLE:3,FAILED_JOIN_SRC:4,FAILED_JOIN_DEST:5,FAILED_PACKET_RECEIVED_FROM_SRC:6,FAILED_PACKET_SENT_TO_DEST:7,SERVER_CONNECTION_LOST:8,INTERNAL_ERROR:9,SRC_TOKEN_EXPIRED:10,DEST_TOKEN_EXPIRED:11,RELAY_ALREADY_START:12,RELAY_NOT_START:13};$t[$t.RELAY_OK]="RELAY_OK",$t[$t.SERVER_ERROR_RESPONSE]="SERVER_ERROR_RESPONSE",$t[$t.SERVER_NO_RESPONSE]="SERVER_NO_RESPONSE",$t[$t.NO_RESOURCE_AVAILABLE]="NO_RESOURCE_AVAILABLE",$t[$t.FAILED_JOIN_SRC]="FAILED_JOIN_SRC",$t[$t.FAILED_JOIN_DEST]="FAILED_JOIN_DEST",$t[$t.FAILED_PACKET_RECEIVED_FROM_SRC]="FAILED_PACKET_RECEIVED_FROM_SRC",$t[$t.FAILED_PACKET_SENT_TO_DEST]="FAILED_PACKET_SENT_TO_DEST",$t[$t.SERVER_CONNECTION_LOST]="SERVER_CONNECTION_LOST",$t[$t.INTERNAL_ERROR]="INTERNAL_ERROR",$t[$t.SRC_TOKEN_EXPIRED]="SRC_TOKEN_EXPIRED",$t[$t.DEST_TOKEN_EXPIRED]="DEST_TOKEN_EXPIRED",$t[$t.RELAY_ALREADY_START]="RELAY_ALREADY_START",$t[$t.RELAY_NOT_START]="RELAY_NOT_START";const Or={Debug:0,Info:1,Warning:2,Error:3,None:4};function ZB(i,t){if(1&i&&(ra(0),hn(1),oa()),2&i){const n=en(2);nt(1),zo(" Calling to ",n.data.user.name," ")}}function eH(i,t){1&i&&hn(0),2&i&&zo(" ",en(2).data.user.name," is calling ")}function tH(i,t){if(1&i){const n=_c();ra(0),xe(1,"button",11),Ft("click",function(){return oo(n),en(2).onAcceptCall()}),Le(),oa()}}function nH(i,t){if(1&i){const n=_c();xe(0,"div",1),xe(1,"div",2),xe(2,"div",3),st(3,"img",4),Le(),xe(4,"p",5),rn(5,ZB,2,1,"ng-container",6),rn(6,eH,1,1,"ng-template",null,7,eb),Le(),Le(),xe(8,"div",8),rn(9,tH,2,0,"ng-container",9),xe(10,"span"),xe(11,"button",10),Ft("click",function(){return oo(n),en().onDeclineCall()}),Le(),Le(),Le(),Le()}if(2&i){const n=bu(7),r=en();Vt("video-call--full-screen",r.fullScreen),ft("@fade",void 0),nt(3),ft("src",r.data.user.photoURL,au),nt(2),ft("ngIf",r.data.outcome)("ngIfElse",n),nt(4),ft("ngIf",!r.data.outcome)}}function iH(i,t){if(1&i&&st(0,"ngx-spinner",15),2&i){const n=en().ngIf;ft("text",n.statusText)("connected",n.connected)("ended",n.ended)}}function rH(i,t){1&i&&st(0,"ngx-timer",16),2&i&&ft("started",en().ngIf.started)}function oH(i,t){if(1&i&&(st(0,"div",17),kc(1,"async")),2&i){const n=t.$implicit;Vt("hidden",!1===Pc(1,3,en(3).remoteStreamVideoToggle$)),ft("id",n)}}function sH(i,t){if(1&i){const n=_c();hr(),ao(),xe(0,"ngx-controls",18),Ft("toggleCamera",function(o){return oo(n),en(3).onToggleCamera(o)})("toggleMicrophone",function(o){return oo(n),en(3).onToggleMicrophone(o)})("toggleFullScreen",function(o){return oo(n),en(3).onToggleFullScreen(o)})("endCall",function(){return oo(n),en(3).onEndCall()}),Le()}if(2&i){const n=en(3);ft("cameraEnabled",n.cameraEnabled)("microphoneEnabled",n.microphoneEnabled)("fullScreenEnabled",n.fullScreenEnabled)}}function aH(i,t){if(1&i&&(xe(0,"div",2),rn(1,iH,1,3,"ngx-spinner",3),rn(2,rH,1,1,"ngx-timer",4),st(3,"div",5),rn(4,oH,2,5,"div",6),xe(5,"div",7),hr(),xe(6,"svg",8),xe(7,"g",9),st(8,"path",10),st(9,"path",11),Le(),xe(10,"defs"),xe(11,"clipPath",12),st(12,"rect",13),Le(),Le(),Le(),Le(),rn(13,sH,1,3,"ngx-controls",14),Le()),2&i){const n=t.ngIf,r=en(2);nt(1),ft("ngIf",n.loading),nt(1),ft("ngIf",n.started),nt(1),ft("id",r.localContainerId)("hidden",!r.cameraEnabled),nt(1),ft("ngForOf",r.remoteCalls),nt(9),ft("ngIf",n.connected&&!n.ended)}}function cH(i,t){if(1&i&&(xe(0,"div"),rn(1,aH,14,6,"div",1),kc(2,"async"),Le()),2&i){const n=en();ft("@fade",void 0)("@.disabled",!n.animate),nt(1),ft("ngIf",Pc(2,3,n.streamState$))}}Or[Or.Debug]="Debug",Or[Or.Info]="Info",Or[Or.Warning]="Warning",Or[Or.Error]="Error",Or[Or.None]="None";let MA=(()=>{class i{constructor(n,r,o,s){this.document=n,this.componentFactoryResolver=r,this.appRef=o,this.injector=s,this.wrapperSelector="ngx-webrtc-wrapper"}open(n,r={}){return this.appendComponent(n,r)}appendComponent(n,r){const o=this.componentFactoryResolver.resolveComponentFactory(n).create(this.injector),{instance:s}=o;Object.keys(r).forEach(c=>s[c]=r[c]),this.appRef.attachView(o.hostView);const a=o.hostView.rootNodes[0];return this.getContainer().append(a),s.afterClosed.pipe(ni(1),function(i,t=ka){const r=function(i){return i instanceof Date&&!isNaN(+i)}(i)?+i-t.now():Math.abs(i);return o=>o.lift(new YB(r,t))}(250)).subscribe(()=>{this.appRef.detachView(o.hostView),o.destroy()}),s}getContainer(){let n=this.document.querySelector(`.${this.wrapperSelector}`);return n||(n=this.document.createElement("div"),n.setAttribute("class",this.wrapperSelector),n.setAttribute("style","position: fixed; top: 0; width: 100vw;"),this.document.body.appendChild(n)),n}}return i.\u0275fac=function(n){return new(n||i)(Ae(tt),Ae(Zi),Ae(Hr),Ae(Bt))},i.\u0275prov=ze({factory:function(){return new i(Ae(tt),Ae(Zi),Ae(Hr),Ae(Go))},token:i,providedIn:"root"}),i})();const Sf_HIDDEN={opacity:0,"margin-top":"100%"},Sf_SHOWN={opacity:1,"margin-top":0},NA=xg("fade",[el(":enter",[di(Sf_HIDDEN),Zc("250ms ease-in-out",di(Sf_SHOWN))]),el(":leave",[di(Sf_SHOWN),Zc("250ms ease-in-out",di(Sf_HIDDEN))])]);class kA{constructor(t){this.cdr=t,this.afterClosed=new l,this.shown=!0}closeDialog(t){this.onAfterClosed(t)}onAfterClosed(t){this.shown=!1,this.cdr.markForCheck(),this.afterClosed.next(t)}}let lH=(()=>{class i{constructor(){this.cameraEnabled=!0,this.microphoneEnabled=!0,this.fullScreenEnabled=!1,this.toggleCamera=new Dt,this.toggleMicrophone=new Dt,this.toggleFullScreen=new Dt,this.endCall=new Dt}onToggleCamera(){this.toggleCamera.emit(this.cameraEnabled)}onToggleMicrophone(){this.toggleMicrophone.emit(this.microphoneEnabled)}onToggleFullScreen(){this.toggleFullScreen.emit(this.fullScreenEnabled)}onEndCall(){this.endCall.emit()}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=dn({type:i,selectors:[["ngx-controls"]],inputs:{cameraEnabled:"cameraEnabled",microphoneEnabled:"microphoneEnabled",fullScreenEnabled:"fullScreenEnabled"},outputs:{toggleCamera:"toggleCamera",toggleMicrophone:"toggleMicrophone",toggleFullScreen:"toggleFullScreen",endCall:"endCall"},decls:63,vars:19,consts:[[1,"controls"],[1,"controls__item"],[1,"controls__button",3,"click"],[1,"controls__icon-wrapper"],["width","32","height","32","viewBox","0 0 64 64","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","video-camera",1,"controls__icon"],["id","Group"],["id","Group_2"],["id","Vector","d","M63.4134 16.2294C63.0454 15.9814 62.5787 15.928 62.1707 16.096L50.6668 20.6986V20C50.6668 16.3226 47.6748 13.3334 44.0001 13.3334H6.66663C2.992 13.3334 0 16.3226 0 20V44C0 47.6774 2.992 50.6666 6.66663 50.6666H44C47.6746 50.6666 50.6666 47.6772 50.6666 44V43.3014L62.1706 47.904C62.5812 48.072 63.048 48.0186 63.4132 47.7706C63.7786 47.5226 63.9999 47.1093 63.9999 46.6666V17.3334C64 16.8906 63.7786 16.4774 63.4134 16.2294Z","fill","white"],["id","no-camera",1,"controls__icon"],["id","Vector","d","M44.0002 13.3325H6.66735C2.99276 13.3325 0.000793457 16.3218 0.000793457 19.999V43.9988C0.000793457 47.6761 2.99276 50.6654 6.66735 50.6654H7.67797L44.9176 13.4257C44.6162 13.3832 44.315 13.3325 44.0002 13.3325Z","fill","white"],["id","Group_3"],["id","Group_4"],["id","Vector_2","d","M63.4134 16.2285C63.0454 15.9805 62.5788 15.9271 62.1708 16.0951L50.6669 20.6977V19.9991C50.6669 18.6417 50.2535 17.3831 49.5549 16.3297L63.608 2.2766C64.128 1.75661 64.128 0.911242 63.608 0.391247C63.088 -0.128748 62.2426 -0.128748 61.7226 0.391247L0.389996 61.724C-0.129999 62.244 -0.129999 63.0894 0.389996 63.6094C0.651369 63.868 0.992615 63.9988 1.33399 63.9988C1.67536 63.9988 2.01661 63.8681 2.27798 63.6094L15.2192 50.6655H44.0003C47.6749 50.6655 50.6669 47.6762 50.6669 43.9989V43.3003L62.1708 47.9029C62.5814 48.0709 63.0481 48.0175 63.4134 47.7695C63.7788 47.5215 64 47.1082 64 46.6655V17.3325C64 16.8898 63.7788 16.4765 63.4134 16.2285Z","fill","white"],["id","microphone",1,"controls__icon"],["id","Vector"],["fill-rule","evenodd","clip-rule","evenodd","d","M44.3474 12.1407L44.3468 17.2309V33.8672C44.3468 40.6024 38.9004 46.0823 32.206 46.0823C27.8366 46.0787 23.8059 43.7286 21.6503 39.9279L20.4131 36.8161C20.1824 35.875 20.0659 34.9098 20.0659 33.941V12.1407C20.0659 5.43551 25.5014 0 32.2066 0C38.9118 0 44.3474 5.43551 44.3474 12.1407Z","fill","white"],["fill-rule","evenodd","clip-rule","evenodd","d","M15.0971 33.7512C15.0947 36.1345 15.5932 38.4912 16.5596 40.6697L18.1223 43.4553C22.3699 49.6259 30.1387 52.3143 37.292 50.089C44.4453 47.8638 49.318 41.2426 49.3156 33.7518C49.3156 32.9026 50.0039 32.2143 50.8532 32.2143C51.7018 32.2143 52.3907 32.9026 52.3907 33.7518C52.4051 44.4499 44.0585 53.2951 33.3778 53.9017V60.9246H39.8098C40.6584 60.9246 41.3473 61.6135 41.3473 62.4622C41.3473 63.3114 40.6584 63.9997 39.8098 63.9997H24.6029C23.7537 63.9997 23.0654 63.3114 23.0654 62.4622C23.0654 61.6135 23.7537 60.9246 24.6029 60.9246H30.3033V53.847C25.6228 53.4212 21.2413 51.3623 17.926 48.0313C17.1926 47.298 16.5163 46.51 15.9031 45.6739L14.2418 42.9874C12.7757 40.1297 12.0148 36.9633 12.022 33.7512C12.022 32.902 12.7103 32.2137 13.5595 32.2137C14.4088 32.2137 15.0971 32.902 15.0971 33.7512Z","fill","white"],["id","no-microphone",1,"controls__icon"],["id","Vector","d","M52.9733 4.25592L44.3474 12.8813V12.1407C44.3474 5.43551 38.9118 0 32.2066 0C25.5014 0 20.0659 5.43551 20.0659 12.1407V33.941C20.0659 34.9098 20.1824 35.875 20.4131 36.8161L16.5596 40.6697C15.5932 38.4912 15.0947 36.1345 15.0971 33.7512C15.0971 32.902 14.4088 32.2137 13.5595 32.2137C12.7103 32.2137 12.022 32.902 12.022 33.7512C12.0148 36.9633 12.7757 40.1297 14.2418 42.9874L8.81411 48.4151C8.4117 48.8007 8.24954 49.3731 8.39008 49.9124C8.53002 50.4518 8.95105 50.8728 9.4898 51.0133C10.0291 51.1539 10.6021 50.9917 10.9877 50.5899L15.9031 45.6739C16.5163 46.51 17.1926 47.298 17.926 48.0313C21.2413 51.3623 25.6228 53.4212 30.3033 53.847V60.9246H24.6029C23.7537 60.9246 23.0654 61.6135 23.0654 62.4622C23.0654 63.3114 23.7537 63.9997 24.6029 63.9997H39.8098C40.6584 63.9997 41.3473 63.3114 41.3473 62.4622C41.3473 61.6135 40.6584 60.9246 39.8098 60.9246H33.3778V53.9017C44.0585 53.2951 52.4051 44.4499 52.3907 33.7518C52.3907 32.9026 51.7018 32.2143 50.8532 32.2143C50.0039 32.2143 49.3156 32.9026 49.3156 33.7518C49.318 41.2426 44.4453 47.8638 37.292 50.089C30.1387 52.3143 22.3699 49.6259 18.1224 43.4553L21.6503 39.9279C23.8059 43.7286 27.8366 46.0787 32.206 46.0823C38.9004 46.0823 44.3468 40.6024 44.3468 33.8672V17.2309L55.1475 6.43072C55.7481 5.83071 55.7481 4.85713 55.1475 4.25652C54.5469 3.65591 53.5733 3.65591 52.9733 4.25652V4.25592Z","fill","white"],["id","fullscreen",1,"controls__icon"],["id","Vector","d","M57.8018 53.4382L44.3964 40.0328L40.0328 44.3964L53.4382 57.8018H43.0205V64H64V43.0205H57.8018V53.4382Z","fill","white"],["id","Vector_2","d","M44.3964 23.9803L57.8018 10.5618V20.9795H64V0H43.0205V6.1982H53.4382L40.0328 19.6036L44.3964 23.9803Z","fill","white"],["id","Vector_3","d","M19.6036 40.0328L6.1982 53.4382V43.0205H0V64H20.9795V57.8018H10.5618L23.9803 44.3964L19.6036 40.0328Z","fill","white"],["id","Vector_4","d","M20.9795 6.1982V0H0V20.9795H6.1982V10.5618L19.6036 23.9803L23.9803 19.6036L10.5618 6.1982H20.9795Z","fill","white"],["id","exit-full-screen",1,"controls__icon"],["id","fullscreen_x5F_exit"],["id","Vector","d","M49.172 54.828L58.344 64L64 58.344L54.828 49.172L64 40H40V64L49.172 54.828Z","fill","white"],["id","Vector_2","d","M0 24H24V0L14.828 9.172L5.75 0.086L0.094 5.742L9.172 14.828L0 24Z","fill","white"],["id","Vector_3","d","M0 58.344L5.656 64L14.828 54.828L24 64V40H0L9.172 49.172L0 58.344Z","fill","white"],["id","Vector_4","d","M40 24H64L54.828 14.828L63.922 5.742L58.266 0.086L49.172 9.172L40 0V24Z","fill","white"],[1,"controls__button","controls__button--danger",3,"click"],["id","phone"],["id","Vector","d","M51.7097 13.2478C51.2458 12.7839 50.4959 12.7839 50.032 13.2478L1.38351 61.8963C0.919568 62.3602 0.919568 63.1101 1.38351 63.574C1.61488 63.8054 1.91864 63.9217 2.2224 63.9217C2.52615 63.9217 2.82991 63.8054 3.06129 63.574L51.7097 14.9256C52.1737 14.4628 52.1737 13.7117 51.7097 13.2478Z","fill","white"],["id","Vector_2","d","M16.9605 42.9635L26.1159 33.8081L21.3365 29.0287C18.91 26.6022 18.6869 24.3679 20.5878 21.5629C20.8535 21.1951 22.5444 19.6941 23.992 18.4839C24.9151 17.9333 25.5487 17.1181 25.8264 16.1155C26.1954 14.783 25.9225 13.2156 25.0516 11.6885C24.8463 11.3373 19.9625 3.06229 15.4583 0.680892C14.6171 0.235937 13.6714 0.0010004 12.721 0.0010004C11.1571 0.0010004 9.68576 0.610886 8.58109 1.71556L5.57082 4.72702C-3.21082 13.5098 -1.58525 24.419 10.2719 36.2749L16.9605 42.9635Z","fill","white"],["id","Vector_3","d","M63.313 48.5357C60.9304 44.0328 52.6566 39.1478 52.2923 38.9342C51.2304 38.329 50.1209 38.0099 49.0839 38.0099C47.5402 38.0099 46.2753 38.717 45.51 40.0033C44.2986 41.452 42.7964 43.1429 42.4345 43.4051C39.6129 45.3154 37.4071 45.1007 34.9652 42.6588L31.148 38.8416L21.9926 47.997L27.7189 53.7233C34.5356 60.5412 41.0367 63.9976 47.0371 63.9976C47.0383 63.9976 47.0383 63.9976 47.0383 63.9976C51.4534 63.9976 55.5672 62.1217 59.2669 58.4232L62.2771 55.413C64.1068 53.5845 64.5233 50.821 63.313 48.5357Z","fill","white"]],template:function(n,r){1&n&&(xe(0,"div",0),xe(1,"div",1),xe(2,"button",2),Ft("click",function(){return r.onToggleCamera()}),xe(3,"div",3),hr(),xe(4,"svg",4),xe(5,"g",5),xe(6,"g",6),xe(7,"g",7),st(8,"path",8),Le(),Le(),Le(),xe(9,"g",9),xe(10,"g",6),xe(11,"g",7),st(12,"path",10),Le(),Le(),xe(13,"g",11),xe(14,"g",12),st(15,"path",13),Le(),Le(),Le(),Le(),Le(),ao(),xe(16,"p"),hn(17,"Camera"),Le(),Le(),Le(),xe(18,"div",1),xe(19,"button",2),Ft("click",function(){return r.onToggleMicrophone()}),xe(20,"div",3),hr(),xe(21,"svg",4),xe(22,"g",14),xe(23,"g",15),st(24,"path",16),st(25,"path",17),Le(),Le(),xe(26,"g",18),st(27,"path",19),Le(),Le(),Le(),ao(),xe(28,"p"),hn(29,"Mic"),Le(),Le(),Le(),xe(30,"div",1),xe(31,"button",2),Ft("click",function(){return r.onToggleFullScreen()}),xe(32,"div",3),hr(),xe(33,"svg",4),xe(34,"g",20),xe(35,"g",6),xe(36,"g",7),xe(37,"g",11),st(38,"path",21),st(39,"path",22),st(40,"path",23),st(41,"path",24),Le(),Le(),Le(),Le(),xe(42,"g",25),xe(43,"g",6),xe(44,"g",26),xe(45,"g",7),st(46,"path",27),st(47,"path",28),st(48,"path",29),st(49,"path",30),Le(),Le(),Le(),Le(),Le(),Le(),ao(),xe(50,"p"),hn(51),Le(),Le(),Le(),xe(52,"div",1),xe(53,"button",31),Ft("click",function(){return r.onEndCall()}),xe(54,"div",3),hr(),xe(55,"svg",4),xe(56,"g",32),xe(57,"g",6),st(58,"path",33),st(59,"path",34),st(60,"path",35),Le(),Le(),Le(),Le(),ao(),xe(61,"p"),hn(62,"End"),Le(),Le(),Le(),Le()),2&n&&(nt(2),Vt("controls__button--active",r.cameraEnabled),nt(3),Vt("controls__icon--shown",r.cameraEnabled),nt(4),Vt("controls__icon--shown",!r.cameraEnabled),nt(10),Vt("controls__button--active",r.microphoneEnabled),nt(3),Vt("controls__icon--shown",r.microphoneEnabled),nt(4),Vt("controls__icon--shown",!r.microphoneEnabled),nt(5),Vt("controls__button--active",r.fullScreenEnabled),nt(3),Vt("controls__icon--shown",!r.fullScreenEnabled),nt(8),Vt("controls__icon--shown",r.fullScreenEnabled),nt(9),go(r.fullScreenEnabled?"Exit fullscreen":"Fullscreen"))},styles:["[_nghost-%COMP%]{transition:.3s}.controls[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);bottom:0;display:flex;justify-content:center;padding:15px 0;position:absolute;left:0;width:100%}.controls__item[_ngcontent-%COMP%]{margin:0 5px;text-align:center}.controls__button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer}.controls__button[_ngcontent-%COMP%]:hover   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#101316}.controls__button--active[_ngcontent-%COMP%]   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#0b73c9}.controls__button--active[_ngcontent-%COMP%]:hover   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#158ef2}.controls__button--danger[_ngcontent-%COMP%]   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#d73b3d}.controls__button--danger[_ngcontent-%COMP%]:hover   .controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#e06567}.controls__button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;margin:8px 0 0}.controls__icon-wrapper[_ngcontent-%COMP%]{background-color:#313a42;border-radius:50%;box-shadow:0 3px 8px #00000080;margin:auto;position:relative;height:60px;transition:.3s;width:60px}.controls__icon-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.controls__icon[_ngcontent-%COMP%]{opacity:0;transition:.3s}.controls__icon--shown[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0}),i})(),uH=(()=>{class i{constructor(){this.connected=!0,this.ended=!1}get color(){return this.ended?"#aaa":this.connected?"#37D425":"#1195E6"}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=dn({type:i,selectors:[["ngx-spinner"]],inputs:{connected:"connected",ended:"ended",text:"text"},decls:9,vars:7,consts:[[1,"spinner"],[1,"spinner__wrapper"],[1,"spinner__icon"],["xmlns","http://www.w3.org/2000/svg","width","64px","height","64px","viewBox","0 0 32 32","fill","none"],["d","M5.25 5.5C3.45507 5.5 2 6.95508 2 8.75V19.25C2 21.0449 3.45507 22.5 5.25 22.5H14.75C16.5449 22.5 18 21.0449 18 19.25V8.75C18 6.95507 16.5449 5.5 14.75 5.5H5.25Z"],["d","M23.1232 20.6431L19.5 17.0935V10.9989L23.1121 7.3706C23.8988 6.58044 25.248 7.13753 25.248 8.25251V19.7502C25.248 20.8577 23.9143 21.4181 23.1232 20.6431Z"],[1,"spinner__cirle"],[1,"spinner__text"]],template:function(n,r){1&n&&(xe(0,"div",0),xe(1,"div",1),xe(2,"div",2),hr(),xe(3,"svg",3),st(4,"path",4),st(5,"path",5),Le(),Le(),ao(),st(6,"div",6),xe(7,"div",7),hn(8),Le(),Le(),Le()),2&n&&(Vt("spinner--connected",r.connected)("spinner--ended",r.ended),nt(4),nn("fill",r.color),nt(1),nn("fill",r.color),nt(3),go(r.text))},styles:[".spinner[_ngcontent-%COMP%]{background-color:#22292f;height:100vh;position:relative}.spinner--connected[_ngcontent-%COMP%]   .spinner__cirle[_ngcontent-%COMP%]{border-color:#37d425}.spinner--ended[_ngcontent-%COMP%]   .spinner__cirle[_ngcontent-%COMP%]{border-color:transparent}.spinner__wrapper[_ngcontent-%COMP%]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.spinner__cirle[_ngcontent-%COMP%]{animation:spin 2s linear infinite;border:5px solid #1195E6;border-radius:50%;border-top-color:transparent;height:160px;margin:auto;transition:.3s;width:160px}.spinner__icon[_ngcontent-%COMP%]{left:50%;position:absolute;top:52px;transform:translate(-40%)}.spinner__text[_ngcontent-%COMP%]{color:#fff;font-size:1.3em;margin-top:35px;text-align:center}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"],changeDetection:0}),i})(),dH=(()=>{class i{constructor(){this.started=Date.now()}ngOnInit(){this.time$=ZT(0,1e3).pipe(S(()=>this.format(Date.now()-this.started)))}format(n){const r=Math.floor(n/1e3%60).toString().padStart(2,"0"),o=Math.floor(n/6e4%60).toString().padStart(2,"0");return[Math.floor(n/36e5%24).toString().padStart(2,"0"),o,r].join(":")}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=dn({type:i,selectors:[["ngx-timer"]],inputs:{started:"started"},decls:4,vars:3,consts:[[1,"timer"]],template:function(n,r){1&n&&(xe(0,"div",0),xe(1,"span"),hn(2),kc(3,"async"),Le(),Le()),2&n&&(nt(2),go(Pc(3,1,r.time$)))},pipes:[dd],styles:[".timer[_ngcontent-%COMP%]{color:#fff;position:relative;text-align:center;z-index:1}.timer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);border-radius:5px;padding:5px 10px}"],changeDetection:0}),i})(),fH=(()=>{class i extends kA{constructor(n){super(n),this.fullScreen=!1}ngOnInit(){this.play(`assets/${this.data.outcome?"outcome":"income"}.mp3`)}ngOnDestroy(){this.stop()}onAcceptCall(){this.fullScreen=!0,this.cdr.markForCheck(),this.afterClosed.next(this.data)}onDeclineCall(){this.play("assets/cancel.mp3"),setTimeout(()=>this.closeDialog(null),200)}play(n,r=!0){this.audio&&this.stop(),this.audio=new Audio(n),this.audio.loop=r,this.audio.load(),this.audio.play()}stop(){this.audio.pause(),this.audio.remove()}}return i.\u0275fac=function(n){return new(n||i)(Se(Pi))},i.\u0275cmp=dn({type:i,selectors:[["ngx-video-call"]],inputs:{data:"data"},features:[Ct],decls:1,vars:1,consts:[["class","video-call",3,"video-call--full-screen",4,"ngIf"],[1,"video-call"],[1,"video-call-user"],[1,"video-call-user__block","video-call-user__block--animated"],["alt","",1,"video-call-user__img",3,"src"],[1,"video-call-user__title"],[4,"ngIf","ngIfElse"],["income",""],[1,"video-call__actions"],[4,"ngIf"],["aria-label","Decline",1,"video-call__button","video-call__button--decline",3,"click"],["aria-label","Accept",1,"video-call__button","video-call__button--accept",3,"click"]],template:function(n,r){1&n&&rn(0,nH,12,7,"div",0),2&n&&ft("ngIf",r.shown&&r.data)},directives:[Kc],styles:['[_nghost-%COMP%]{display:block;height:100vh;position:relative}.video-call[_ngcontent-%COMP%]{background-image:linear-gradient(#3F51B5,#393e46);background-size:cover;border-radius:10px;box-shadow:0 5px 10px #0000001a;display:flex;flex-direction:column;height:100%;justify-content:flex-end;left:0;left:50%;max-height:400px;max-width:400px;position:absolute;top:0;top:50%;transform:translate(-50%,-50%);transition:.3s;width:100%;z-index:5}.video-call--full-screen[_ngcontent-%COMP%]{background-image:linear-gradient(#22292F);border-radius:0;max-height:100%;max-width:100%}.video-call-user[_ngcontent-%COMP%]{left:50%;position:absolute;text-align:center;top:50%;transform:translate(-50%,-55%);z-index:1}.video-call-user__block[_ngcontent-%COMP%]{background:#fff;border-radius:100%;border:solid 5px #fff;height:180px;margin:0 auto;transform:scale(1);width:180px}.video-call-user__block--animated[_ngcontent-%COMP%]{animation:play 2s ease infinite;-webkit-backface-visibility:hidden;backface-visibility:hidden}.video-call-user__img[_ngcontent-%COMP%]{border-radius:100%;height:100%;left:0px;object-fit:cover;position:absolute;top:0px;width:100%}.video-call-user__title[_ngcontent-%COMP%]{color:#fff;font-size:1.2em;font-weight:700;margin:15px 0 0}.video-call__actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px 0}.video-call__button[_ngcontent-%COMP%]{border-radius:.5em;box-shadow:0 0 #3f51b500,0 .05em .1em #0003;border:0;cursor:pointer;display:block;font-size:40px;height:1em;margin:0 5px;position:relative;transform:translate(0) scale(1);transition:.3s;width:1em}.video-call__button[_ngcontent-%COMP%]:before, .video-call__button[_ngcontent-%COMP%]:after{content:"";position:absolute}.video-call__button[_ngcontent-%COMP%]:before{background-color:#ffffff1a;border-radius:100%;height:1em;left:0;opacity:1;top:0;transform:translate(0) scale(0);width:1em}.video-call__button[_ngcontent-%COMP%]:after{background-position:50% 50%;background-repeat:no-repeat;background-size:cover;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTYuNiAxMC44YzEuNCAyLjggMy44IDUuMSA2LjYgNi42bDIuMi0yLjJjLjMtLjMuNy0uNCAxLS4yIDEuMS40IDIuMy42IDMuNi42LjUgMCAxIC40IDEgMVYyMGMwIC41LS41IDEtMSAxLTkuNCAwLTE3LTcuNi0xNy0xNyAwLS42LjQtMSAxLTFoMy41Yy41IDAgMSAuNCAxIDEgMCAxLjIuMiAyLjUuNiAzLjYuMS40IDAgLjctLjIgMWwtMi4zIDIuMnoiIGZpbGw9IiNmZmZmZmYiLz48L3N2Zz4=);height:.5em;left:.25em;top:.25em;transform:translate(0);transition:.3s;width:.5em}.video-call__button--accept[_ngcontent-%COMP%]{animation:phone-outer 3s infinite;background-color:#3f51b5}.video-call__button--accept[_ngcontent-%COMP%]:before{animation:phone-inner 3s infinite}.video-call__button--accept[_ngcontent-%COMP%]:after{animation:phone-icon 3s infinite}.video-call__button--decline[_ngcontent-%COMP%]{background-color:#d73b3d}.video-call__button--decline[_ngcontent-%COMP%]:hover{background-color:#ce2a2c}.video-call__button--decline[_ngcontent-%COMP%]:after{top:.28em;transform:translate(0) rotate(135deg)}@keyframes play{0%{transform:scale(1)}15%{box-shadow:0 0 0 5px #9b9da466}25%{box-shadow:0 0 0 10px #9b9da466,0 0 0 20px #9b9da433}25%{box-shadow:0 0 0 15px #9b9da466,0 0 0 30px #9b9da433}}@keyframes phone-outer{0%{box-shadow:0 0 #3f51b500,0 .05em .1em #0003;transform:translate(0) scale(1)}33.3333%{box-shadow:0 0 #3f51b51a,0 .05em .1em #00000080;transform:translate(0) scale(1.1)}66.6666%{box-shadow:0 0 0 .5em #3f51b500,0 .05em .1em #0003;transform:translate(0) scale(1)}to{box-shadow:0 0 #3f51b500,0 .05em .1em #0003;transform:translate(0) scale(1)}}@keyframes phone-inner{0%{opacity:1;transform:translate(0) scale(0)}33.3333%{opacity:1;transform:translate(0) scale(.9)}66.6666%{opacity:0;transform:translate(0) scale(0)}to{opacity:0;transform:translate(0) scale(0)}}@keyframes phone-icon{0%{transform:translate(0)}2%{transform:translate(.01em)}4%{transform:translate(-.01em)}6%{transform:translate(.01em)}8%{transform:translate(-.01em)}10%{transform:translate(.01em)}12%{transform:translate(-.01em)}14%{transform:translate(.01em)}16%{transform:translate(-.01em)}18%{transform:translate(.01em)}20%{transform:translate(-.01em)}22%{transform:translate(.01em)}24%{transform:translate(-.01em)}26%{transform:translate(.01em)}28%{transform:translate(-.01em)}30%{transform:translate(.01em)}32%{transform:translate(-.01em)}34%{transform:translate(.01em)}36%{transform:translate(-.01em)}38%{transform:translate(.01em)}40%{transform:translate(-.01em)}42%{transform:translate(.01em)}44%{transform:translate(-.01em)}46%{transform:translate(0)}}'],data:{animation:[NA]},changeDetection:0}),i})();const PA={connected:!1,loading:!0,statusText:"Initializing",started:null,ended:!1},hH={mode:"rtc",codec:"h264"},pH={audio:!0,video:!0,screen:!1};let gH=(()=>{class i{constructor(n){this.ngxAgoraService=n,this.streamState=new fi(PA),this.remoteStreamVideoToggle=new fi(!0),this.callEnd=new l,this.localContainerId="local-video",this.remoteCalls=[],this.remoteStreamVideoToggle$=this.remoteStreamVideoToggle.asObservable(),this.streamState$=this.streamState.asObservable()}init(n,r,o=!1){return this.uid=n,this.ngxAgoraService.AgoraRTC.Logger.setLogLevel(this.ngxAgoraService.AgoraRTC.Logger[o?"DEBUG":"NONE"]),this.client=this.ngxAgoraService.createClient(hH),this.assignClientHandlers(),this.localStream=this.ngxAgoraService.createStream(Object.assign(Object.assign({},pH),{streamID:this.uid})),this.initLocalStream(()=>{this.streamState.next(Object.assign(Object.assign({},this.streamState.value),{connected:!0,statusText:"Waiting others to join"})),this.join(r,()=>this.publish())}),this.callEnd.asObservable()}deinit(){this.streamState.next(PA)}endCall(){this.client.leave(()=>{this.localStream.isPlaying()&&(this.localStream.stop(),this.localStream.close(),this.remoteCalls=[]),this.streamState.next(Object.assign(Object.assign({},this.streamState.value),{started:null,loading:!0,statusText:"",ended:!0})),OA(500).pipe(ni(1)).subscribe(()=>this.callEnd.next())})}toggleVideo(n){this.localStream&&(n?this.localStream.muteVideo():this.localStream.unmuteVideo())}toggleAudio(n){this.localStream&&(n?this.localStream.muteAudio():this.localStream.unmuteAudio())}toggleFullScreen(n){n?document.exitFullscreen():document.documentElement.requestFullscreen()}isVideoEnabled(){return!!this.localStream&&this.localStream.isVideoOn()}isAudioEnabled(){return!!this.localStream&&this.localStream.isAudioOn()}join(n,r,o){this.client.join(null,n,this.uid,r,o)}publish(){this.client.publish(this.localStream)}assignClientHandlers(){this.client.on("stream-subscribed",n=>{this.streamState.next(Object.assign(Object.assign({},this.streamState.value),{started:n.stream.subscribeLTS,loading:!1}))}),this.client.on("error",n=>{console.log("Got error msg:",n.reason),"DYNAMIC_KEY_TIMEOUT"===n.reason&&this.client.renewChannelKey("",()=>console.log("Renewed the channel key successfully."),r=>console.warn("Renew channel key failed: ",r))}),this.client.on("stream-added",n=>{this.client.subscribe(n.stream,{audio:!0,video:!0},o=>{console.log("Subscribe stream failed",o)})}),this.client.on("stream-subscribed",n=>{const r=n.stream,o=this.getRemoteId(r);this.remoteCalls.length||(this.remoteCalls.push(o),setTimeout(()=>r.play(o),1e3))}),this.client.on("mute-video",()=>this.remoteStreamVideoToggle.next(!1)),this.client.on("unmute-video",()=>this.remoteStreamVideoToggle.next(!0)),this.client.on("stream-removed",n=>{const r=n.stream;r&&(r.stop(),this.remoteCalls=[],console.log(`Remote stream is removed ${r.getId()}`))}),this.client.on("peer-leave",n=>{const r=n.stream;r&&(r.stop(),this.remoteCalls=this.remoteCalls.filter(o=>o!==`${this.getRemoteId(r)}`),this.endCall())})}initLocalStream(n){this.localStream.init(()=>{this.localStream.play(this.localContainerId),n&&n()},r=>{console.warn("getUserMedia failed",r),this.endCall()})}getRemoteId(n){return`remote_call-${n.getId()}`}}return i.\u0275fac=function(n){return new(n||i)(Ae(oi))},i.\u0275prov=ze({factory:function(){return new i(Ae(oi))},token:i,providedIn:"root"}),i})(),xA=(()=>{class i extends kA{constructor(n,r){super(r),this.webRtcService=n,this.animate=!0,this.debug=!1,this.callEnd=new Dt,this.streamState$=this.webRtcService.streamState$,this.remoteStreamVideoToggle$=this.webRtcService.remoteStreamVideoToggle$}ngOnInit(){this.webRtcService.init(this.uid,this.channel,this.debug).pipe(ni(1)).subscribe(()=>{this.callEnd.emit(),this.closeDialog(!0)})}ngOnDestroy(){this.webRtcService.deinit()}get localContainerId(){return this.webRtcService.localContainerId}get remoteCalls(){return this.webRtcService.remoteCalls}get cameraEnabled(){return this.webRtcService.isVideoEnabled()}get microphoneEnabled(){return this.webRtcService.isAudioEnabled()}get fullScreenEnabled(){return!!document.fullscreenElement}onToggleCamera(n){this.webRtcService.toggleVideo(n)}onToggleMicrophone(n){this.webRtcService.toggleAudio(n)}onToggleFullScreen(n){this.webRtcService.toggleFullScreen(n)}onEndCall(){this.webRtcService.endCall()}}return i.\u0275fac=function(n){return new(n||i)(Se(gH),Se(Pi))},i.\u0275cmp=dn({type:i,selectors:[["ngx-webrtc"]],inputs:{animate:"animate",debug:"debug",uid:"uid",channel:"channel"},outputs:{callEnd:"callEnd"},features:[Ct],decls:1,vars:1,consts:[[4,"ngIf"],["class","container",4,"ngIf"],[1,"container"],[3,"text","connected","ended",4,"ngIf"],[3,"started",4,"ngIf"],[1,"container__local",3,"id","hidden"],["class","container__remote",3,"id","hidden",4,"ngFor","ngForOf"],[1,"container__user-icon"],["width","64","height","64","viewBox","0 0 64 64","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","user","clip-path","url(#clip0)"],["id","Vector","d","M31.5439 30.829C35.7793 30.829 39.4468 29.3099 42.4434 26.3129C45.4399 23.3163 46.959 19.6498 46.959 15.414C46.959 11.1796 45.4399 7.51267 42.4429 4.51512C39.4458 1.51904 35.7788 0 31.5439 0C27.3081 0 23.6416 1.51904 20.645 4.51561C17.6484 7.51218 16.1289 11.1792 16.1289 15.414C16.1289 19.6498 17.6484 23.3168 20.6455 26.3134C23.6426 29.3095 27.3096 30.829 31.5439 30.829V30.829Z","fill","#0B73C9"],["id","Vector_2","d","M58.5161 49.2127C58.4297 47.9656 58.2549 46.6053 57.9976 45.1688C57.7378 43.7215 57.4033 42.3533 57.0029 41.1029C56.5894 39.8104 56.0269 38.534 55.3315 37.3109C54.6099 36.0414 53.7622 34.9359 52.811 34.0262C51.8164 33.0746 50.5986 32.3094 49.1904 31.7513C47.7871 31.1962 46.2319 30.9149 44.5684 30.9149C43.915 30.9149 43.2832 31.183 42.063 31.9774C41.312 32.4672 40.4336 33.0336 39.4531 33.66C38.6147 34.1942 37.479 34.6947 36.0762 35.1478C34.7075 35.5907 33.3179 35.8153 31.9463 35.8153C30.5747 35.8153 29.1855 35.5907 27.8154 35.1478C26.4141 34.6952 25.2783 34.1947 24.4409 33.6605C23.4697 33.0399 22.5908 32.4735 21.8286 31.9769C20.6099 31.1825 19.9775 30.9144 19.3242 30.9144C17.6602 30.9144 16.1055 31.1962 14.7026 31.7518C13.2954 32.309 12.0771 33.0741 11.0815 34.0267C10.1309 34.9369 9.28271 36.0419 8.56201 37.3109C7.86719 38.534 7.30469 39.8099 6.89062 41.1034C6.49072 42.3538 6.15625 43.7215 5.89648 45.1688C5.63916 46.6033 5.46436 47.9642 5.37793 49.2142C5.29297 50.4388 5.25 51.7098 5.25 52.9934C5.25 56.3343 6.31201 59.0388 8.40625 61.0335C10.4746 63.0017 13.2114 64.0002 16.5396 64.0002H47.356C50.6841 64.0002 53.4199 63.0022 55.4888 61.0335C57.5835 59.0403 58.6455 56.3352 58.6455 52.993C58.645 51.7034 58.6016 50.4314 58.5161 49.2127V49.2127Z","fill","#0B73C9"],["id","clip0"],["width","64","height","64","fill","#0B73C9"],["ngxToggle","",3,"cameraEnabled","microphoneEnabled","fullScreenEnabled","toggleCamera","toggleMicrophone","toggleFullScreen","endCall",4,"ngIf"],[3,"text","connected","ended"],[3,"started"],[1,"container__remote",3,"id"],["ngxToggle","",3,"cameraEnabled","microphoneEnabled","fullScreenEnabled","toggleCamera","toggleMicrophone","toggleFullScreen","endCall"]],template:function(n,r){1&n&&rn(0,cH,3,5,"div",0),2&n&&ft("ngIf",r.shown)},directives:function(){return[Kc,vS,uH,dH,lH,_H]},pipes:function(){return[dd]},styles:["ngx-timer[_ngcontent-%COMP%]{display:block;padding-top:25px}.container[_ngcontent-%COMP%]{background-color:#22292f;height:100vh}.container__local[_ngcontent-%COMP%]{border-radius:5px;height:20vh;overflow:hidden;position:fixed;right:1rem;top:1rem;width:20vw;z-index:1}.container__local[_ngcontent-%COMP%]:not(:empty){box-shadow:0 3px 8px #00000080}.container__remote[_ngcontent-%COMP%]{background-color:#22292f;height:100vh;left:0;position:fixed;top:0;width:100vw}.container__remote.hidden[_ngcontent-%COMP%]{display:none}.container__remote.hidden[_ngcontent-%COMP%] + .container__user-icon[_ngcontent-%COMP%]{display:block}.container__remote[_ngcontent-%COMP%]:empty{display:none}.container__user-icon[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);border-radius:50%;box-shadow:0 3px 8px #00000080;display:none;left:50%;padding:20px;position:absolute;top:50%;transform:translate(-50%,-50%)}@media screen and (max-width: 769px){ngx-controls[_ngcontent-%COMP%]{opacity:1!important}}"],data:{animation:[NA]},changeDetection:0}),i})(),mH=(()=>{class i{constructor(n){this.dialog=n}open(n){const r=this.dialog.open(fH,{data:n});let o;return r.afterClosed.pipe(ni(1)).subscribe(s=>{(null==s?void 0:s.channel)&&(o=this.dialog.open(xA,{uid:s.uid,channel:s.channel,debug:!!s.debug}))}),{acceptCall:r.onAcceptCall.bind(r),close:r.closeDialog.bind(r),afterConfirmation:()=>r.afterClosed.asObservable().pipe(ni(1)),afterCallEnd:()=>o?o.afterClosed.asObservable().pipe(ni(1)):gt(!1)}}}return i.\u0275fac=function(n){return new(n||i)(Ae(MA))},i.\u0275prov=ze({factory:function(){return new i(Ae(MA))},token:i,providedIn:"root"}),i})(),_H=(()=>{class i{constructor(n,r){this.renderer=n,this.el=r,this.subscription=new v,this.delay=5e3}onEnter(){this.subscription.unsubscribe(),this.setStyle(1)}onLeave(){this.hide()}ngOnInit(){this.hide()}hide(){this.subscription.unsubscribe(),this.subscription=OA(this.delay).pipe(ni(1)).subscribe(()=>this.setStyle(0))}setStyle(n){this.renderer.setStyle(this.el.nativeElement,"opacity",n)}}return i.\u0275fac=function(n){return new(n||i)(Se(Sr),Se(Tt))},i.\u0275dir=Be({type:i,selectors:[["","ngxToggle",""]],hostBindings:function(n,r){1&n&&Ft("mouseenter",function(){return r.onEnter()})("mouseleave",function(){return r.onLeave()})}}),i})(),yH=(()=>{class i{static forRoot(n){return{ngModule:i,providers:[oi,{provide:"config",useValue:n}]}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i}),i.\u0275inj=Ot({imports:[[Yc,XB]]}),i})();const vH=[{path:"",component:(()=>{class i{constructor(n,r,o,s){this.formBuilder=n,this.router=r,this.localStorage=o,this.videoCallDialogService=s,this.sessionKey="ngx-webrtc:channelId",this.outcome=!1}get channelId(){return this.localStorage.getItem(this.sessionKey)||"test-channel-ngx-webrtc"}get tooltipText(){return this.outcome?"Outcome":"Income"}ngOnInit(){this.form=this.formBuilder.group({channelId:[this.channelId,u9.required]})}onSubmit(){this.saveChannel(),this.router.navigate(["conference"],{queryParams:Object.assign({},this.form.value)})}onModalOpen(){this.saveChannel();const n=this.videoCallDialogService.open({uid:String(Math.floor(100*Math.random())),channel:this.channelId,outcome:this.outcome,user:{name:"Test User",photoURL:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTvDtoEwuV9E2kHqNDi6MnBzXlefn8TfyrwgQ&usqp=CAU"},debug:!0});setTimeout(()=>n.close(),7e3),n.afterConfirmation().subscribe(r=>console.log(r))}saveChannel(){const{channelId:n}=this.form.value;this.localStorage.setItem(this.sessionKey,n)}}return i.\u0275fac=function(n){return new(n||i)(Se(J9),Se(Gn),Se(Storage),Se(mH))},i.\u0275cmp=dn({type:i,selectors:[["app-home"]],decls:25,vars:7,consts:[[1,"home"],[1,"home__welcome"],[1,"home__form",3,"formGroup","ngSubmit"],[1,"home__wrapper","home__wrapper--center"],["src","assets/user.svg","alt","User",1,"user"],[1,"home__title"],[1,"home__wrapper"],["matInput","","placeholder","Channel id","formControlName","channelId"],[1,"home__wrapper","home__wrapper--center","home__wrapper--buttons"],["mat-flat-button","","color","primary",1,"home__btn",3,"disabled"],["mat-raised-button","","type","button",1,"home__btn",3,"disabled","click"],[3,"checked","matTooltip","change","click"],[1,"home__footer"],["href","https://www.npmjs.com/package/ngx-webrtc-lib","target","_blank"],["viewBox","0 0 27.23 27.23"],["width","27.23","height","27.23","rx","2"],["fill","#fff","points","5.8 21.75 13.66 21.75 13.67 9.98 17.59 9.98 17.58 21.76 21.51 21.76 21.52 6.06 5.82 6.04 5.8 21.75"],["href","https://github.com/TarasMoskovych/ngx-webrtc","target","_blank"],["aria-hidden","true","role","img","viewBox","0 0 16 16","width","50","height","50",1,""],["fill-rule","evenodd","d","M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"]],template:function(n,r){1&n&&(xe(0,"div",0),xe(1,"div",1),xe(2,"form",2),Ft("ngSubmit",function(){return r.onSubmit()}),xe(3,"div",3),st(4,"img",4),Le(),xe(5,"h1",5),hn(6," Welcome "),Le(),xe(7,"mat-form-field",6),xe(8,"mat-label"),hn(9,"Channel Id"),Le(),st(10,"input",7),Le(),xe(11,"div",8),xe(12,"button",9),hn(13,"Start / Join call"),Le(),xe(14,"button",10),Ft("click",function(){return r.onModalOpen()}),hn(15,"Open Call Dialog "),xe(16,"mat-slide-toggle",11),Ft("change",function(s){return r.outcome=s.checked})("click",function(s){return s.stopPropagation()}),Le(),Le(),Le(),Le(),xe(17,"div",12),xe(18,"a",13),hr(),xe(19,"svg",14),st(20,"rect",15),st(21,"polygon",16),Le(),Le(),ao(),xe(22,"a",17),hr(),xe(23,"svg",18),st(24,"path",19),Le(),Le(),Le(),Le(),Le()),2&n&&(nt(2),ft("formGroup",r.form),nt(5),Vt("mat-focused",r.form.valid),nt(5),ft("disabled",r.form.invalid),nt(2),ft("disabled",r.form.invalid),nt(2),ft("checked",r.outcome)("matTooltip",r.tooltipText))},directives:[DT,vT,vl,eU,y_,oU,tf,yT,Zm,Qw,Xw,BB],styles:[".home[_ngcontent-%COMP%]{align-items:center;background-color:#f2f2f2;display:flex;flex-wrap:wrap;justify-content:center;min-height:100vh;width:100%}.home__welcome[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 5px 10px #0000001a;overflow:hidden;padding:10px 40px;width:390px}.home__welcome[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{height:150px}.home__title[_ngcontent-%COMP%]{color:#333;display:block;font-size:30px;font-weight:500;margin:10px 0 60px;text-align:center}.home__wrapper[_ngcontent-%COMP%]{width:100%}.home__wrapper--center[_ngcontent-%COMP%]{text-align:center}.home__wrapper--buttons[_ngcontent-%COMP%]{align-items:center;display:flex}.home__btn[_ngcontent-%COMP%]{margin:0 5px}.home__footer[_ngcontent-%COMP%]{margin-top:30px;text-align:center}.home__footer[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#333;cursor:pointer;height:24px;margin:0 5px;transition:.3s;width:24px}.home__footer[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{fill:#aaa}"],changeDetection:0}),i})()},{path:"conference",component:(()=>{class i{constructor(n,r){this.route=n,this.router=r,this.uid=String(Math.floor(100*Math.random()))}ngOnInit(){this.channel=this.route.snapshot.queryParams.channelId||"test-channel"}onCallEnd(){this.router.navigateByUrl("/")}}return i.\u0275fac=function(n){return new(n||i)(Se(ds),Se(Gn))},i.\u0275cmp=dn({type:i,selectors:[["app-conference"]],decls:1,vars:4,consts:[[3,"animate","channel","debug","uid","callEnd"]],template:function(n,r){1&n&&(xe(0,"ngx-webrtc",0),Ft("callEnd",function(){return r.onCallEnd()}),Le()),2&n&&ft("animate",!1)("channel",r.channel)("debug",!0)("uid",r.uid)},directives:[xA],styles:[""],changeDetection:0}),i})()},{path:"**",redirectTo:""}];let EH=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Pt({type:i,bootstrap:[qB]}),i.\u0275inj=Ot({providers:[{provide:Storage,useValue:window.localStorage}],imports:[[kg,SF,yH.forRoot(DA_configs),$T,KV.forRoot(vH),sU,uU,GB,CU]]}),i})();(function(){if(Ab)throw new Error("Cannot enable prod mode after platform setup.");wb=!1})(),H5().bootstrapModule(EH).catch(i=>console.error(i))}},ue=>{ue(ue.s=570)}]);